(self.webpackChunktrudesk=self.webpackChunktrudesk||[]).push([[6],{45:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);var react=__webpack_require__(0),react_dom=__webpack_require__(9),redux=__webpack_require__(819),es=__webpack_require__(3),redux_saga_core_npm_proxy_esm=__webpack_require__(737),redux_saga_thunk=__webpack_require__(738),handleActions=__webpack_require__(816),immutable_es=__webpack_require__(815),lib=__webpack_require__(742);const PENDING="PENDING",ERROR="ERROR",SUCCESS="SUCCESS",INIT_SOCKET=(0,lib.b)("INIT_SOCKET",[SUCCESS,ERROR]),UPDATE_SOCKET=(0,lib.b)("UPDATE_SOCKET",[SUCCESS,ERROR]),SHOW_MODAL=(0,lib.b)("SHOW_MODAL"),HIDE_MODAL=(0,lib.b)("HIDE_MODAL"),CLEAR_MODAL=(0,lib.b)("CLEAR_MODAL"),SHOW_NOTICE=(0,lib.b)("SHOW_NOTICE",[SUCCESS]),CLEAR_NOTICE=(0,lib.b)("CLEAR_NOTICE"),SET_SESSION_USER=(0,lib.b)("SET_SESSION_USER",[SUCCESS,PENDING,ERROR]),FETCH_ROLES=(0,lib.b)("FETCH_ROLES",[SUCCESS,ERROR]),UPDATE_ROLE_ORDER=(0,lib.b)("UPDATE_ROLE_ORDER",[SUCCESS,ERROR]),FETCH_VIEWDATA=(0,lib.b)("FETCH_VIEWDATA",[SUCCESS,PENDING,ERROR]),NAV_CHANGE=(0,lib.b)("NAV_CHANGE"),FETCH_DASHBOARD_DATA=(0,lib.b)("FETCH_DASHBOARD_DATA",[SUCCESS,PENDING,ERROR]),FETCH_DASHBOARD_TOP_GROUPS=(0,lib.b)("FETCH_DASHBOARD_TOP_GROUPS",[SUCCESS,PENDING,ERROR]),FETCH_DASHBOARD_TOP_TAGS=(0,lib.b)("FETCH_DASHBOARD_TOP_TAGS",[SUCCESS,PENDING,ERROR]),FETCH_DASHBOARD_OVERDUE_TICKETS=(0,lib.b)("FETCH_DASHBOARD_OVERDUE_TICKETS",[SUCCESS,PENDING,ERROR]),FETCH_TICKETS=(0,lib.b)("FETCH_TICKETS",[SUCCESS,PENDING,ERROR]),CREATE_TICKET=(0,lib.b)("CREATE_TICKET",[PENDING,SUCCESS,ERROR]),DELETE_TICKET=(0,lib.b)("DELETE_TICKET",[SUCCESS,PENDING,ERROR]),UNLOAD_TICKETS=(0,lib.b)("UNLOAD_TICKETS",[SUCCESS]),TICKET_UPDATED=(0,lib.b)("TICKET_UPDATED",[SUCCESS]),TICKET_EVENT=(0,lib.b)("TICKET_EVENT",[SUCCESS]),FETCH_TICKET_TYPES=(0,lib.b)("FETCH_TICKET_TYPES",[SUCCESS,PENDING,ERROR]),CREATE_TICKET_TYPE=((0,lib.b)("FETCH_TICKET_TAGS",[SUCCESS,PENDING,ERROR]),(0,lib.b)("CREATE_TICKET_TYPE",[SUCCESS,ERROR])),RENAME_TICKET_TYPE=(0,lib.b)("RENAME_TICKET_TYPE",[SUCCESS,ERROR]),DELETE_TICKET_TYPE=(0,lib.b)("DELETE_TICKET_TYPE",[SUCCESS,ERROR]),FETCH_PRIORITIES=(0,lib.b)("FETCH_PRIORITIES",[SUCCESS,PENDING,ERROR]),CREATE_PRIORITY=(0,lib.b)("CREATE_PRIORITY",[SUCCESS,ERROR]),UPDATE_PRIORITY=(0,lib.b)("UPDATE_PRIORITY",[SUCCESS,ERROR]),DELETE_PRIORITY=(0,lib.b)("DELETE_PRIORITY",[SUCCESS,ERROR]),GET_TAGS_WITH_PAGE=(0,lib.b)("GET_TAGS_WITH_PAGE",[SUCCESS,ERROR]),TAGS_UPDATE_CURRENT_PAGE=(0,lib.b)("TAGS_UPDATE_CURRENT_PAGE",[SUCCESS,ERROR]),CREATE_TAG=(0,lib.b)("CREATE_TAG",[SUCCESS,ERROR]),TRANSFER_TO_THIRDPARTY=(0,lib.b)("TRANSFER_TO_THIRDPARTY",[SUCCESS,ERROR]),FETCH_ACCOUNTS=(0,lib.b)("FETCH_ACCOUNTS",[PENDING,SUCCESS,ERROR]),FETCH_ACCOUNTS_CREATE_TICKET=(0,lib.b)("FETCH_ACCOUNTS_CREATE_TICKET",[PENDING,SUCCESS,ERROR]),CREATE_ACCOUNT=(0,lib.b)("CREATE_ACCOUNT",[PENDING,SUCCESS,ERROR]),SAVE_EDIT_ACCOUNT=(0,lib.b)("SAVE_EDIT_ACCOUNT",[PENDING,SUCCESS,ERROR]),DELETE_ACCOUNT=(0,lib.b)("DELETE_ACCOUNT",[PENDING,SUCCESS,ERROR]),ENABLE_ACCOUNT=(0,lib.b)("ENABLE_ACCOUNT",[SUCCESS,ERROR]),UNLOAD_ACCOUNTS=(0,lib.b)("UNLOAD_ACCOUNTS",[SUCCESS]),SAVE_PROFILE=(0,lib.b)("SAVE_PROFILE",[SUCCESS,PENDING,ERROR]),GEN_MFA=(0,lib.b)("GEN_MFA",[SUCCESS,PENDING,ERROR]),FETCH_GROUPS=(0,lib.b)("FETCH_GROUPS",[PENDING,SUCCESS,ERROR]),CREATE_GROUP=(0,lib.b)("CREATE_GROUP",[SUCCESS,PENDING,ERROR]),UPDATE_GROUP=(0,lib.b)("UPDATE_GROUP",[SUCCESS,PENDING,ERROR]),DELETE_GROUP=(0,lib.b)("DELETE_GROUP",[SUCCESS,PENDING,ERROR]),UNLOAD_GROUPS=(0,lib.b)("UNLOAD_GROUPS",[SUCCESS]),FETCH_TEAMS=(0,lib.b)("FETCH_TEAMS",[PENDING,SUCCESS,ERROR]),CREATE_TEAM=(0,lib.b)("CREATE_TEAM",[PENDING,SUCCESS,ERROR]),SAVE_EDIT_TEAM=(0,lib.b)("SAVE_EDIT_TEAM",[PENDING,SUCCESS,ERROR]),DELETE_TEAM=(0,lib.b)("DELETE_TEAM",[PENDING,SUCCESS,ERROR]),UNLOAD_TEAMS=(0,lib.b)("UNLOAD_TEAMS",[SUCCESS]),FETCH_DEPARTMENTS=(0,lib.b)("FETCH_DEPARTMENTS",[PENDING,SUCCESS,ERROR]),CREATE_DEPARTMENT=(0,lib.b)("CREATE_DEPARTMENT",[PENDING,SUCCESS,ERROR]),UPDATE_DEPARTMENT=(0,lib.b)("UPDATE_DEPARTMENT",[SUCCESS,PENDING,ERROR]),DELETE_DEPARTMENT=(0,lib.b)("DELETE_DEPARTMENT",[SUCCESS,PENDING,ERROR]),UNLOAD_DEPARTMENTS=(0,lib.b)("UNLOAD_DEPARTMENTS",[SUCCESS]),FETCH_CONVERSATIONS=(0,lib.b)("FETCH_CONVERSATIONS",[SUCCESS,PENDING,ERROR]),UNLOAD_CONVERSATIONS=(0,lib.b)("UNLOAD_CONVERSATIONS",[SUCCESS]),FETCH_SINGLE_CONVERSATION=(0,lib.b)("FETCH_SINGLE_CONVERSATION",[SUCCESS,PENDING,ERROR]),SET_CURRENT_CONVERSATION=(0,lib.b)("SET_CURRENT_CONVERSATION",[SUCCESS]),UNLOAD_SINGLE_CONVERSATION=(0,lib.b)("UNLOAD_SINGLE_CONVERSATION",[SUCCESS]),DELETE_CONVERSATION=(0,lib.b)("DELETE_CONVERSATION",[SUCCESS,PENDING,ERROR]),MESSAGES_SEND=(0,lib.b)("MESSAGES_SEND",[SUCCESS,ERROR]),MESSAGES_UI_RECEIVE=(0,lib.b)("MESSAGES_UI_RECEIVE",[SUCCESS,ERROR]),FETCH_NOTICES=(0,lib.b)("FETCH_NOTICES",[PENDING,SUCCESS,ERROR]),CREATE_NOTICE=(0,lib.b)("CREATE_NOTICE",[SUCCESS,PENDING,ERROR]),UPDATE_NOTICE=(0,lib.b)("UPDATE_NOTICE",[SUCCESS,PENDING,ERROR]),DELETE_NOTICE=(0,lib.b)("DELETE_NOTICE",[PENDING,SUCCESS,ERROR]),UNLOAD_NOTICES=(0,lib.b)("UNLOAD_NOTICES",[SUCCESS]),GENERATE_REPORT=(0,lib.b)("GENERATE_REPORT",[SUCCESS,PENDING,ERROR]),FETCH_SEARCH_RESULTS=(0,lib.b)("FETCH_SEARCH_RESULTS",[SUCCESS,PENDING,ERROR]),UNLOAD_SEARCH_RESULTS=(0,lib.b)("UNLOAD_SEARCH_RESULTS",[SUCCESS]),FETCH_SETTINGS=(0,lib.b)("FETCH_SETTINGS",[SUCCESS,ERROR]),UPDATE_SETTING=(0,lib.b)("UPDATE_SETTING",[SUCCESS,ERROR]),UPDATE_MULTIPLE_SETTINGS=(0,lib.b)("UPDATE_MULTIPLE_SETTINGS",[SUCCESS,ERROR]),UPDATE_COLORSCHEME=(0,lib.b)("UPDATE_COLORSCHEME",[SUCCESS,ERROR]),FETCH_MONGODB_TOOLS=(0,lib.b)("FETCH_MONGODB_TOOLS",[SUCCESS,ERROR]),FETCH_BACKUPS=(0,lib.b)("FETCH_BACKUPS",[SUCCESS,ERROR]),BACKUP_NOW=(0,lib.b)("BACKUP_NOW",[PENDING,SUCCESS,ERROR]),FETCH_DELETED_TICKETS=(0,lib.b)("FETCH_DELETED_TICKETS",[PENDING,SUCCESS,ERROR]),RESTORE_DELETED_TICKET=(0,lib.b)("RESTORE_DELETED_TICKET",[SUCCESS,ERROR]),PERM_DELETE_TICKET=(0,lib.b)("PERM_DELETE_TICKET",[SUCCESS,ERROR]),CHANGE_DELETED_TICKETS_PAGE=(0,lib.b)("CHANGE_DELETED_TICKETS_PAGE"),UPDATE_PERMISSIONS=(0,lib.b)("UPDATE_PERMISSIONS",[PENDING,SUCCESS,ERROR]),CREATE_ROLE=(0,lib.b)("CREATE_ROLE",[SUCCESS,ERROR]),DELETE_ROLE=(0,lib.b)("DELETE_ROLE",[SUCCESS,ERROR]),initialState={sessionUser:null,mfa:(0,immutable_es.D5)({}),roles:(0,immutable_es.aV)([]),roleOrder:(0,immutable_es.D5)({}),notice:null,loadingViewData:!0,viewdata:(0,immutable_es.D5)({}),socket:{},socketInitialized:!1},shared=(0,handleActions.Z)({[INIT_SOCKET.SUCCESS]:(state,action)=>state.socketInitialized?{...state}:{...state,socket:action.payload.socket,socketInitialized:!0},[SET_SESSION_USER.SUCCESS]:(state,action)=>({...state,sessionUser:action.payload.sessionUser}),[GEN_MFA.SUCCESS]:(state,action)=>({...state,mfa:(0,immutable_es.d0)(action.payload)}),[SHOW_NOTICE]:(state,action)=>({...state,notice:(0,immutable_es.d0)(action.payload)}),[CLEAR_NOTICE]:state=>({...state,notice:null}),[FETCH_ROLES.SUCCESS]:(state,action)=>({...state,roles:(0,immutable_es.d0)(action.response.roles),roleOrder:(0,immutable_es.d0)(action.response.roleOrder)}),[UPDATE_ROLE_ORDER.SUCCESS]:(state,action)=>({...state,roleOrder:(0,immutable_es.d0)(action.response.roleOrder)})},initialState),common_initialState={loadingViewData:!0,viewdata:(0,immutable_es.D5)({})},common=(0,handleActions.Z)({[FETCH_VIEWDATA.PENDING]:state=>({...state,loadingViewData:!0}),[FETCH_VIEWDATA.SUCCESS]:(state,action)=>({...state,loadingViewData:!1,viewdata:(0,immutable_es.d0)(action.payload.response.viewdata)}),[FETCH_VIEWDATA.ERROR]:state=>({...state,loadingViewData:!0,viewdata:common_initialState.viewdata})},common_initialState);var uikit_combined_min=__webpack_require__(5),uikit_combined_min_default=__webpack_require__.n(uikit_combined_min);const modalReducer_initialState={modalType:null,modalProps:{}},modalReducer=(0,handleActions.Z)({[SHOW_MODAL]:(state,action)=>({modalType:action.payload.modalType,modalProps:action.payload.modalProps}),[HIDE_MODAL]:(state,action)=>{const modal=document.getElementById("uk-modal");if(modal){const modalTag=modal.getAttribute("data-modal-tag");modalTag===action.payload?uikit_combined_min_default().modal(modal).hide():modalTag||uikit_combined_min_default().modal(modal).hide()}return state},[CLEAR_MODAL]:()=>({...modalReducer_initialState})},modalReducer_initialState),reducers_sidebarReducer=(0,handleActions.Z)({[NAV_CHANGE]:(state,action)=>({activeItem:action.payload.activeItem,activeSubItem:action.payload.activeSubItem,plugins:null})},{activeItem:"",activeSubItem:"",plugins:null});var lodash=__webpack_require__(4),helpers=__webpack_require__(2),helpers_default=__webpack_require__.n(helpers);const settings_initialState={loaded:!1,settings:(0,immutable_es.D5)({}),hasMongoDBTools:!1,backingup:!1,backups:(0,immutable_es.aV)([]),deletedTicketsCount:0,allDeletedTickets:(0,immutable_es.aV)([]),deletedTickets:(0,immutable_es.aV)([])},settings=(0,handleActions.Z)({[FETCH_SETTINGS.SUCCESS]:(state,action)=>({...state,settings:(0,immutable_es.d0)(action.response.settings.data),loaded:!0}),[UPDATE_SETTING.SUCCESS]:(state,action)=>{const updatedSetting=(0,lodash.find)(action.response.updatedSettings,{name:action.payload.name});return{...state,loaded:state.loaded,settings:state.settings.setIn(["settings",action.payload.stateName],updatedSetting)}},[UPDATE_SETTING.ERROR]:(state,action)=>(helpers_default().UI.showSnackbar("Error: "+action.error,!0),{...state,loaded:state.loaded,settings:state.settings}),[UPDATE_MULTIPLE_SETTINGS.SUCCESS]:state=>({...state,loaded:state.loaded,settings:state.settings}),[FETCH_MONGODB_TOOLS.SUCCESS]:(state,action)=>({...state,hasMongoDBTools:action.response.success}),[FETCH_BACKUPS.SUCCESS]:(state,action)=>({...state,backups:(0,immutable_es.d0)(action.response.files)}),[BACKUP_NOW.PENDING]:state=>({...state,backingup:!0}),[BACKUP_NOW.SUCCESS]:state=>({...state,backingup:!1}),[BACKUP_NOW.ERROR]:state=>({...state,backingup:!1}),[FETCH_DELETED_TICKETS.SUCCESS]:(state,action)=>({...state,deletedTicketsCount:action.response.deletedTickets.length,allDeletedTickets:(0,immutable_es.d0)(action.response.deletedTickets),deletedTickets:(0,immutable_es.d0)(action.response.deletedTickets.slice(0,15))}),[RESTORE_DELETED_TICKET.SUCCESS]:(state,action)=>{const deletedIdx=state.deletedTickets.findIndex((i=>i.get("_id")===action.payload._id)),allDeletedIdx=state.allDeletedTickets.findIndex((i=>i.get("_id")===action.payload._id));return{...state,allDeletedTickets:state.allDeletedTickets.splice(allDeletedIdx,1),deletedTickets:state.deletedTickets.splice(deletedIdx,1)}},[CHANGE_DELETED_TICKETS_PAGE]:(state,action)=>{const pageIndex=action.payload.pageIndex;return{...state,deletedTickets:state.allDeletedTickets.slice(15*pageIndex,15*(pageIndex+1))}},[PERM_DELETE_TICKET.SUCCESS]:(state,action)=>{const deletedIdx=state.deletedTickets.findIndex((i=>i.get("_id")===action.payload._id)),allDeletedIdx=state.allDeletedTickets.findIndex((i=>i.get("_id")===action.payload._id));return{...state,allDeletedTickets:state.allDeletedTickets.splice(allDeletedIdx,1),deletedTickets:state.deletedTickets.splice(deletedIdx,1)}}},settings_initialState),dashboardReducer_initialState={loading:!1,lastUpdated:null,ticketBreakdownData:(0,immutable_es.aV)([]),mostActiveTicket:null,mostAssignee:null,mostCommenter:null,mostRequester:null,ticketAvg:null,ticketCount:0,closedCount:0,loadingTopGroups:!1,topGroups:(0,immutable_es.aV)([]),loadingTopTags:!1,topTags:(0,immutable_es.aV)([]),loadingOverdueTickets:!1,overdueTickets:(0,immutable_es.aV)([])},dashboardReducer=(0,handleActions.Z)({[FETCH_DASHBOARD_DATA.PENDING]:state=>({...state,loading:!0}),[FETCH_DASHBOARD_DATA.SUCCESS]:(state,action)=>({...state,loading:!1,lastUpdated:action.response.lastUpdated,ticketBreakdownData:(0,immutable_es.d0)(action.response.data),mostActiveTicket:(0,immutable_es.d0)(action.response.mostActiveTicket),mostCommenter:(0,immutable_es.d0)(action.response.mostCommenter),mostRequester:(0,immutable_es.d0)(action.response.mostRequester),mostAssignee:(0,immutable_es.d0)(action.response.mostAssignee),ticketAvg:(0,immutable_es.d0)(action.response.ticketAvg),ticketCount:action.response.ticketCount,closedCount:action.response.closedCount}),[FETCH_DASHBOARD_TOP_GROUPS.PENDING]:state=>({...state,loadingTopGroups:!0}),[FETCH_DASHBOARD_TOP_GROUPS.SUCCESS]:(state,action)=>{const items=action.response.items;let top5=(0,lodash.sortBy)(items,(i=>i.count)).reverse().slice(0,5);return top5=(0,lodash.map)(top5,(v=>[v.name,v.count])),{...state,loadingTopGroups:!1,topGroups:(0,immutable_es.d0)(top5)}},[FETCH_DASHBOARD_TOP_TAGS.PENDING]:state=>({...state,loadingTopTags:!0}),[FETCH_DASHBOARD_TOP_TAGS.SUCCESS]:(state,action)=>{const items=action.response.tags,topTags=(0,lodash.map)(items,((v,k)=>[k,v]));return{...state,loadingTopTags:!1,topTags:(0,immutable_es.d0)(topTags)}},[FETCH_DASHBOARD_OVERDUE_TICKETS.PENDING]:state=>({...state,loadingOverdueTickets:!0}),[FETCH_DASHBOARD_OVERDUE_TICKETS.SUCCESS]:(state,action)=>({...state,loadingOverdueTickets:!1,overdueTickets:(0,immutable_es.d0)(action.response.tickets)})},dashboardReducer_initialState);var isUndefined=__webpack_require__(422),isUndefined_default=__webpack_require__.n(isUndefined);const ticketsReducer_initialState={tickets:(0,immutable_es.aV)([]),loadingTicketTypes:!1,types:(0,immutable_es.aV)([]),priorities:(0,immutable_es.aV)([]),totalCount:"",viewType:"active",loading:!1,nextPage:1,prevPage:0};const ticketsReducer=(0,handleActions.Z)({[FETCH_TICKETS.PENDING]:(state,action)=>({...state,viewType:action.payload.type,loading:!0}),[FETCH_TICKETS.SUCCESS]:(state,action)=>({...state,tickets:(0,immutable_es.d0)(action.response.tickets||[]),prevPage:(0,immutable_es.d0)(action.response.prevPage),nextPage:(0,immutable_es.d0)(action.response.nextPage),totalCount:action.response.totalCount?(0,immutable_es.d0)(action.response.totalCount.toString()):action.response.tickets.length.toString(),loading:!1}),[FETCH_TICKETS.ERROR]:state=>({...state,loading:!1}),[CREATE_TICKET.SUCCESS]:state=>({...state}),[DELETE_TICKET.SUCCESS]:(state,action)=>{const idx=state.tickets.findIndex((ticket=>ticket.get("_id").toString()===action.payload.id.toString()));return-1===idx?{...state}:{...state,tickets:state.tickets.delete(idx)}},[TICKET_EVENT.SUCCESS]:(state,action)=>{switch(action.payload.type){case"created":{const ticket=action.payload.data;return{...state,tickets:state.tickets.insert(0,(0,immutable_es.d0)(ticket))}}case"deleted":{const id=action.payload.data,idx=state.tickets.findIndex((ticket=>ticket.get("_id").toString()===id.toString()));return-1===idx?{...state}:{...state,tickets:state.tickets.delete(idx)}}default:return{...state}}},[TICKET_UPDATED.SUCCESS]:(state,action)=>{const ticket=action.payload.ticket,userGroupIds=action.sessionUser.groups,idx=state.tickets.findIndex((t=>t.get("_id")===ticket._id)),inView=function(view,status,assignee,userId,userGroupIds,groupId){let hasView=!1,hasGroup=!1;switch(view){case"filter":hasView=!0;break;case"all":hasView=-1!==[0,1,2,3].indexOf(status);break;case"active":hasView=-1!==[0,1,2].indexOf(status);break;case"assigned":hasView=assignee===userId;break;case"unassigned":hasView=isUndefined_default()(assignee);break;case"new":hasView=0===status;break;case"open":hasView=1===status;break;case"pending":hasView=2===status;break;case"closed":hasView=3===status;break;default:hasView=!1}return hasGroup=!isUndefined_default()(userGroupIds)&&!isUndefined_default()(groupId)&&-1!==userGroupIds.indexOf(groupId),hasGroup&&hasView}(state.viewType,ticket.status,ticket.assignee?ticket.assignee._id:void 0,action.sessionUser._id,userGroupIds,ticket.group._id);if(!inView&&-1!==idx)return{...state,tickets:state.tickets.delete(idx)};if(!inView)return{...state};if(-1===idx){const withTicket=state.tickets.push((0,immutable_es.d0)(ticket));return{...state,tickets:withTicket.sortBy((t=>-t.get("uid")))}}return{...state,tickets:state.tickets.set(idx,(0,immutable_es.d0)(ticket))}},[UNLOAD_TICKETS.SUCCESS]:state=>({...state,tickets:state.tickets.clear(),loading:!1}),[FETCH_TICKET_TYPES.PENDING]:state=>({...state,loadingTicketTypes:!0}),[FETCH_TICKET_TYPES.SUCCESS]:(state,action)=>({...state,loadingTicketTypes:!1,types:(0,immutable_es.d0)(action.response.ticketTypes),priorities:(0,immutable_es.d0)(action.response.priorities)}),[FETCH_PRIORITIES.SUCCESS]:(state,action)=>({...state,priorities:(0,immutable_es.d0)(action.response.priorities)})},ticketsReducer_initialState),tagsReducer_initialState={loading:!0,totalCount:0,tags:(0,immutable_es.aV)([]),currentPage:0},reducers_tagsReducer=(0,handleActions.Z)({[GET_TAGS_WITH_PAGE.SUCCESS]:(state,action)=>({...state,loading:!1,totalCount:action.response.count,tags:(0,immutable_es.d0)(action.response.tags)}),[GET_TAGS_WITH_PAGE.ERROR]:(state,action)=>({...state,loading:!1}),[TAGS_UPDATE_CURRENT_PAGE]:(state,action)=>({...state,currentPage:action.payload.currentPage})},tagsReducer_initialState),accountsReducer_initialState={accounts:(0,immutable_es.aV)([]),type:"customers",loading:!1,accountsCreateTicket:(0,immutable_es.aV)([]),createTicketLoading:!1},accountsReducer=(0,handleActions.Z)({[FETCH_ACCOUNTS.PENDING]:state=>({...state,loading:!0}),[FETCH_ACCOUNTS.SUCCESS]:(state,action)=>{const arr=state.accounts.toArray();return action.payload.response.accounts.forEach((i=>{arr.push(i)})),{...state,accounts:(0,immutable_es.d0)(arr),type:action.payload.payload&&action.payload.payload.type?action.payload.payload.type:"customers",loading:!1}},[FETCH_ACCOUNTS_CREATE_TICKET.PENDING]:state=>({...state,createTicketLoading:!0}),[FETCH_ACCOUNTS_CREATE_TICKET.SUCCESS]:(state,action)=>{const arr=state.accountsCreateTicket.toArray();return action.payload.response.accounts.forEach((i=>{arr.push(i)})),{...state,accountsCreateTicket:(0,immutable_es.d0)(arr),createTicketLoading:!1}},[CREATE_ACCOUNT.SUCCESS]:(state,action)=>{const resAccount=action.response.account;if(!resAccount.role.isAgent&&!resAccount.role.isAdmin&&"customers"!==state.type)return{...state};if(resAccount.role.isAgent||resAccount.role.isAdmin&&"customers"===state.type)return{...state};if(resAccount.role.isAdmin&&!resAccount.role.isAgent&&"agents"===state.type)return{...state};if(resAccount.role.isAgent&&!resAccount.role.isAdmin&&"admins"===state.type)return{...state};const insertedAccount=state.accounts.push((0,immutable_es.d0)(resAccount));return{...state,accounts:insertedAccount.sortBy((account=>account.get("fullname")))}},[SAVE_EDIT_ACCOUNT.SUCCESS]:(state,action)=>{const resUser=action.response.user,accountIndex=state.accounts.findIndex((u=>u.get("_id")===resUser._id)),customer=!resUser.role.isAdmin&&!resUser.role.isAgent;let accounts=null;return"agents"!==state.type&&"admins"!==state.type||customer?("agents"!==state.type&&"admins"!==state.type||!customer)&&("customers"!==state.type||customer)?"customers"===state.type&&customer&&(accounts=state.accounts.set(accountIndex,(0,immutable_es.d0)(resUser))):accounts=state.accounts.remove(accountIndex):accounts=state.accounts.set(accountIndex,(0,immutable_es.d0)(resUser)),{...state,accounts}},[DELETE_ACCOUNT.PENDING]:(state,action)=>{const accountIndex=state.accounts.findIndex((u=>u.get("username")===action.payload.username));return{...state,accounts:state.accounts.setIn([accountIndex,"loading"],!0)}},[DELETE_ACCOUNT.SUCCESS]:(state,action)=>{const isDisabled=action.response.disabled,accountIndex=state.accounts.findIndex((u=>u.get("username")===action.payload.username));let withDisabled;return withDisabled=state.accounts.setIn([accountIndex,"deleted"],isDisabled),withDisabled=withDisabled.setIn([accountIndex,"loading"],!1),isDisabled||(withDisabled=state.accounts.delete(accountIndex)),{...state,accounts:withDisabled}},[ENABLE_ACCOUNT.SUCCESS]:(state,action)=>{const accountIndex=state.accounts.findIndex((u=>u.get("username")===action.payload.username));return{...state,accounts:state.accounts.setIn([accountIndex,"deleted"],!1)}},[UNLOAD_ACCOUNTS.SUCCESS]:state=>({...state,accounts:state.accounts.clear()})},accountsReducer_initialState),groupsReducer_initialState={groups:(0,immutable_es.aV)([])},groupsReducer=(0,handleActions.Z)({[FETCH_GROUPS.SUCCESS]:(state,action)=>({...state,groups:(0,immutable_es.d0)(action.response.groups).sortBy((group=>group.get("name")))}),[CREATE_GROUP.SUCCESS]:(state,action)=>{const resGroup=action.response.group,withInsertedGroup=state.groups.push((0,immutable_es.d0)(resGroup));return{...state,groups:withInsertedGroup.sortBy((team=>team.get("name")))}},[UPDATE_GROUP.SUCCESS]:(state,action)=>{const resGroup=action.response.group,groupIndex=state.groups.findIndex((g=>g.get("_id")===resGroup._id));return{...state,groups:state.groups.set(groupIndex,(0,immutable_es.d0)(resGroup))}},[DELETE_GROUP.SUCCESS]:(state,action)=>{const idx=state.groups.findIndex((g=>g.get("_id")===action.payload._id));return{...state,groups:state.groups.delete(idx)}},[UNLOAD_GROUPS.SUCCESS]:state=>({...state,groups:state.groups.clear()})},groupsReducer_initialState),teamsReducer_initialState={teams:(0,immutable_es.aV)([])},teamsReducer=(0,handleActions.Z)({[FETCH_TEAMS.SUCCESS]:(state,action)=>({...state,teams:(0,immutable_es.d0)(action.payload.response.teams)}),[CREATE_TEAM.SUCCESS]:(state,action)=>{const resTeam=action.response.team,withInsertedTeam=state.teams.push((0,immutable_es.d0)(resTeam));return{...state,teams:withInsertedTeam.sortBy((team=>team.get("name")))}},[SAVE_EDIT_TEAM.SUCCESS]:(state,action)=>{const resTeam=action.response.team,teamIndex=state.teams.findIndex((t=>t.get("_id")===resTeam._id));return{...state,teams:state.teams.set(teamIndex,(0,immutable_es.d0)(resTeam))}},[DELETE_TEAM.SUCCESS]:(state,action)=>{const idx=state.teams.findIndex((t=>t.get("_id")===action.payload._id));return{...state,teams:state.teams.delete(idx)}},[UNLOAD_TEAMS.SUCCESS]:state=>({...state,teams:state.teams.clear()})},teamsReducer_initialState),departmentsReducer_initialState={departments:(0,immutable_es.aV)([])},departmentsReducer=(0,handleActions.Z)({[FETCH_DEPARTMENTS.SUCCESS]:(state,action)=>({...state,departments:(0,immutable_es.d0)(action.response.departments).sortBy((d=>d.get("normalized")))}),[CREATE_DEPARTMENT.SUCCESS]:(state,action)=>{const department=(0,immutable_es.d0)(action.response.department),withDepartment=state.departments.push(department);return{...state,departments:withDepartment.sortBy((department=>department.get("normalized")))}},[UPDATE_DEPARTMENT.SUCCESS]:(state,action)=>{const department=action.response.department,idx=state.departments.findIndex((d=>d.get("_id")===department._id));return{...state,departments:state.departments.set(idx,(0,immutable_es.d0)(department))}},[DELETE_DEPARTMENT.SUCCESS]:(state,action)=>{const idx=state.departments.findIndex((d=>d.get("_id")===action.payload._id));return{...state,departments:state.departments.delete(idx)}},[UNLOAD_DEPARTMENTS.SUCCESS]:state=>({...state,departments:state.departments.clear()})},departmentsReducer_initialState),noticesReducer_initialState={notices:(0,immutable_es.aV)([]),loading:!1},noticesReducer=(0,handleActions.Z)({[FETCH_NOTICES.PENDING]:(state,action)=>({...state,loading:!0}),[FETCH_NOTICES.SUCCESS]:(state,action)=>({...state,notices:(0,immutable_es.d0)(action.response.notices||[]),loading:!1}),[CREATE_NOTICE.SUCCESS]:(state,action)=>{const notice=action.response.notice;return{...state,notices:state.notices.push((0,immutable_es.d0)(notice))}},[UPDATE_NOTICE.SUCCESS]:(state,action)=>{const notice=action.response.notice,idx=state.notices.findIndex((n=>n.get("_id")===notice._id));return{...state,notices:state.notices.set(idx,(0,immutable_es.d0)(notice))}},[DELETE_NOTICE.SUCCESS]:(state,action)=>{const idx=state.notices.findIndex((n=>n.get("_id")===action.payload._id));return{...state,notices:state.notices.delete(idx)}},[UNLOAD_NOTICES.SUCCESS]:state=>({...state,notices:state.notices.clear(),loading:!1})},noticesReducer_initialState),searchReducer_initialState={loading:!1,results:(0,immutable_es.aV)([]),error:null},reducers_searchReducer=(0,handleActions.Z)({[FETCH_SEARCH_RESULTS.PENDING]:state=>({...state,loading:!0}),[FETCH_SEARCH_RESULTS.SUCCESS]:(state,action)=>({...state,loading:!1,results:(0,immutable_es.d0)(action.response.hits.hits)}),[FETCH_SEARCH_RESULTS.ERROR]:(state,action)=>({...state,loading:!1,error:action.error.response.data}),[UNLOAD_SEARCH_RESULTS.SUCCESS]:state=>({...state,loading:!1,results:state.results.clear()})},searchReducer_initialState),messagesReducer_initialState={loading:!1,conversations:(0,immutable_es.aV)([]),loadingSingleConversation:!1,currentConversation:null,loadingChatWindowConversation:(0,immutable_es.D5)({}),chatWindowConversations:(0,immutable_es.D5)({})},messagesReducer=(0,handleActions.Z)({[FETCH_CONVERSATIONS.PENDING]:state=>({...state,loading:!0}),[FETCH_CONVERSATIONS.SUCCESS]:(state,action)=>({...state,loading:!1,conversations:(0,immutable_es.d0)(action.response.conversations)}),[DELETE_CONVERSATION.SUCCESS]:(state,action)=>{if(!action.response.conversation)return{...state};const conversation=action.response.conversation,idx=state.conversations.findIndex((i=>i.get("_id").toString()===conversation._id.toString()));return-1===idx?{...state}:{...state,conversations:state.conversations.delete(idx)}},[UNLOAD_CONVERSATIONS.SUCCESS]:state=>({...state,conversations:messagesReducer_initialState.conversations}),[FETCH_SINGLE_CONVERSATION.PENDING]:state=>({...state,loadingSingleConversation:!0}),[FETCH_SINGLE_CONVERSATION.SUCCESS]:(state,action)=>({...state,loadingSingleConversation:!1,currentConversation:(0,immutable_es.d0)(action.response.conversation)}),[SET_CURRENT_CONVERSATION.SUCCESS]:(state,action)=>{const conversation=action.payload.conversation;return console.log(conversation),conversation?{...state,loadingSingleConversation:!1,currentConversation:(0,immutable_es.d0)(conversation)}:{...state}},[UNLOAD_SINGLE_CONVERSATION.SUCCESS]:state=>({...state,currentConversation:null}),[MESSAGES_SEND.SUCCESS]:(state,action)=>({...state}),[MESSAGES_UI_RECEIVE.SUCCESS]:(state,action)=>{const message=(0,immutable_es.d0)(action.payload.message),isOwner=action.payload.isOwner;let conversation=state.conversations.find((c=>c.get("_id").toString()===message.get("conversation").toString()));const index=state.conversations.indexOf(conversation);if(-1===index)return{...state};if(conversation=conversation.set("recentMessage",`${isOwner?"You":message.get("owner").get("fullname")}: ${message.get("body")}`),conversation=conversation.set("updatedAt",message.get("createdAt")),!state.currentConversation||state.currentConversation.get("_id").toString()!==message.get("conversation").toString())return{...state,conversations:state.conversations.set(index,conversation)};const newMessageList=state.currentConversation.get("messages").push(message);return{...state,conversations:state.conversations.set(index,conversation),currentConversation:state.currentConversation.set("messages",newMessageList)}}},messagesReducer_initialState),reducers=(0,redux.UY)({shared,common,searchState:reducers_searchReducer,modal:modalReducer,sidebar:reducers_sidebarReducer,dashboardState:dashboardReducer,ticketsState:ticketsReducer,accountsState:accountsReducer,groupsState:groupsReducer,teamsState:teamsReducer,departmentsState:departmentsReducer,noticesState:noticesReducer,settings,tagsSettings:reducers_tagsReducer,messagesState:messagesReducer});var redux_saga_effects_npm_proxy_esm=__webpack_require__(16),node_modules_axios=__webpack_require__(6),axios_default=__webpack_require__.n(node_modules_axios);axios_default().defaults.headers.post["Content-Type"]="application/json";const token=document.querySelector('meta[name="csrf-token"]').getAttribute("content");axios_default().defaults.headers["CSRF-TOKEN"]=token;const api={dashboard:{}};api.dashboard.getData=payload=>{const timespan=payload.timespan||30;return axios_default().get(`/api/v1/tickets/stats/${timespan}`).then((res=>res.data))},api.dashboard.getTopGroups=payload=>{const timespan=payload.timespan||30;return axios_default().get(`/api/v1/tickets/count/topgroups/${timespan}/5`).then((res=>res.data))},api.dashboard.getTopTags=payload=>{const timespan=payload.timespan||30;return axios_default().get(`/api/v1/tickets/count/tags/${timespan}`).then((res=>res.data))},api.dashboard.getOverdueTickets=()=>axios_default().get("/api/v1/tickets/overdue").then((res=>res.data)),api.tickets={},api.tickets.getWithPage=payload=>{const limit=payload.limit?payload.limit:50,page=payload.page?payload.page:0,type=payload.type?payload.type:"all",filter=payload.filter?encodeURIComponent(JSON.stringify(payload.filter,null,2)):void 0,fullFilter=filter?`&filter=${filter}`:void 0;return axios_default().get(`/api/v2/tickets?type=${type}&page=${page}&limit=${limit}${fullFilter}`).then((res=>res.data))},api.tickets.search=payload=>axios_default().get(`/api/v1/tickets/search/?search=${payload.searchString}&limit=100`).then((res=>res.data)),api.tickets.create=payload=>axios_default().post("/api/v1/tickets/create",payload).then((res=>res.data)),api.tickets.delete=({id})=>axios_default().delete(`/api/v1/tickets/${id}`).then((res=>res.data)),api.tickets.renameTicketType=(id,name)=>axios_default().put("/api/v1/tickets/types/"+id,{name}).then((res=>res.data)),api.tickets.createTicketType=({name})=>axios_default().post("/api/v1/tickets/types/create",{name}).then((res=>res.data)),api.tickets.addPriorityToType=({typeId,priority})=>axios_default().post(`/api/v1/tickets/type/${typeId}/addpriority`,{priority}).then((res=>res.data)),api.tickets.removePriorityFromType=({typeId,priority})=>axios_default().post(`/api/v1/tickets/type/${typeId}/removepriority`,{priority}).then((res=>res.data)),api.tickets.deleteTicketType=({id,newTypeId})=>axios_default().delete(`/api/v1/tickets/types/${id}`,{data:{newTypeId}}).then((res=>res.data)),api.tickets.fetchPriorities=()=>axios_default().get("/api/v1/tickets/priorities").then((res=>res.data)),api.tickets.createPriority=({name,overdueIn,htmlColor})=>axios_default().post("/api/v1/tickets/priority/create",{name,overdueIn,htmlColor}).then((res=>res.data)),api.tickets.updatePriority=({id,name,overdueIn,htmlColor})=>axios_default().put(`/api/v1/tickets/priority/${id}`,{name,overdueIn,htmlColor}).then((res=>res.data)),api.tickets.deletePriority=({id,newPriority})=>axios_default().post(`/api/v1/tickets/priority/${id}/delete`,{newPriority}).then((res=>res.data)),api.tickets.getTagsWithPage=({limit,page})=>(limit=limit||10,page=page||0,axios_default().get(`/api/v1/tags/limit?limit=${limit}&page=${page}`).then((res=>res.data))),api.tickets.createTag=({name})=>axios_default().post("/api/v1/tags/create",{tag:name}).then((res=>res.data)),api.tickets.transferToThirdParty=({uid})=>axios_default().post(`/api/v2/tickets/transfer/${uid}`).then((res=>res.data)),api.tickets.fetchTicketTypes=()=>axios_default().get("/api/v2/tickets/info/types").then((res=>res.data)),api.accounts={},api.accounts.create=payload=>axios_default().post("/api/v2/accounts",payload).then((res=>res.data)),api.accounts.getWithPage=payload=>{const limit=payload&&payload.limit?payload.limit:25,page=payload&&payload.page?payload.page:0,type=payload&&payload.type?payload.type:"all";let search=payload&&payload.search?payload.search:"";search&&(search=`&search=${search}`);const showDeleted=!(!payload||!payload.showDeleted)&&payload.showDeleted;return axios_default().get(`/api/v2/accounts?type=${type}&limit=${limit}&page=${page}${search}&showDeleted=${showDeleted}`).then((res=>res.data))},api.accounts.updateUser=payload=>axios_default().put(`/api/v2/accounts/${payload.username}`,payload).then((res=>res.data)),api.accounts.deleteAccount=({username})=>axios_default().delete(`/api/v1/users/${username}`).then((res=>res.data)),api.accounts.enableAccount=({username})=>axios_default().get(`/api/v1/users/${username}/enable`).then((res=>res.data)),api.accounts.saveProfile=payload=>axios_default().put("/api/v2/accounts/profile",payload).then((res=>res.data)),api.accounts.generateMFA=payload=>axios_default().post("/api/v2/accounts/profile/mfa",payload).then((res=>res.data)),api.groups={},api.groups.create=payload=>axios_default().post("/api/v2/groups",payload).then((res=>res.data)),api.groups.get=payload=>{const limit=payload&&payload.limit?payload.limit:1e3,page=payload&&payload.page?payload.page:0,type=payload&&payload.type?`&type=${payload.type}`:"";return axios_default().get(`/api/v2/groups?limit=${limit}&page=${page}${type}`).then((res=>res.data))},api.groups.update=payload=>axios_default().put(`/api/v2/groups/${payload._id}`,payload).then((res=>res.data)),api.groups.delete=({_id})=>axios_default().delete(`/api/v2/groups/${_id}`).then((res=>res.data)),api.teams={},api.teams.getWithPage=payload=>{const limit=payload&&payload.limit?payload.limit:100,page=payload&&payload.page?payload.page:0;return axios_default().get(`/api/v2/teams?limit=${limit}&page=${page}`).then((res=>res.data))},api.teams.create=payload=>axios_default().post("/api/v2/teams",payload).then((res=>res.data)),api.teams.updateTeam=payload=>axios_default().put(`/api/v2/teams/${payload._id}`,payload).then((res=>res.data)),api.teams.deleteTeam=({_id})=>axios_default().delete(`/api/v2/teams/${_id}`).then((res=>res.data)),api.departments={},api.departments.get=()=>axios_default().get("/api/v2/departments").then((res=>res.data)),api.departments.create=payload=>axios_default().post("/api/v2/departments",payload).then((res=>res.data)),api.departments.update=payload=>axios_default().put(`/api/v2/departments/${payload._id}`,payload).then((res=>res.data)),api.departments.delete=({_id})=>axios_default().delete(`/api/v2/departments/${_id}`).then((res=>res.data)),api.messages={},api.messages.getConversations=()=>axios_default().get("/api/v2/messages/conversations").then((res=>res.data)),api.messages.getSingleConversation=({_id})=>axios_default().get(`/api/v2/messages/conversations/${_id}`).then((res=>res.data)),api.messages.deleteConversation=payload=>axios_default().delete(`/api/v1/messages/conversation/${payload.convoId}`,payload).then((res=>res.data)),api.messages.send=payload=>axios_default().post("/api/v1/messages/send",payload).then((res=>res.data)),api.notices={},api.notices.create=payload=>axios_default().post("/api/v2/notices",payload).then((res=>res.data)),api.notices.get=()=>axios_default().get("/api/v2/notices").then((res=>res.data)),api.notices.update=payload=>axios_default().put(`/api/v2/notices/${payload._id}`,payload).then((res=>res.data)),api.notices.delete=({_id})=>axios_default().delete(`/api/v2/notices/${_id}`).then((res=>res.data)),api.reports={},api.reports.generate=payload=>axios_default().post(`/api/v1/reports/generate/${payload.type}`,payload),api.search={},api.search.search=({limit,term})=>{const l=limit||25;return axios_default().get(`/api/v2/es/search?limit=${l}&q=${term}`).then((res=>res.data))},api.settings={},api.settings.update=settings=>axios_default().put("/api/v1/settings",settings).then((res=>res.data)),api.settings.hasMongoDBTools=()=>axios_default().get("/api/v1/backup/hastools").then((res=>res.data)),api.settings.fetchBackups=()=>axios_default().get("/api/v1/backups").then((res=>res.data)),api.settings.backupNow=()=>axios_default().post("/api/v1/backup").then((res=>res.data)),api.settings.getBackups=()=>axios_default().get("/api/v1/backups").then((res=>res.data)),api.settings.fetchDeletedTickets=()=>axios_default().get("/api/v1/tickets/deleted").then((res=>res.data)),api.settings.restoreDeletedTicket=({_id})=>axios_default().post("/api/v1/tickets/deleted/restore",{_id}).then((res=>res.data)),api.settings.permDeleteTicket=({_id})=>axios_default().delete(`/api/v2/tickets/deleted/${_id}`).then((res=>res.data)),api.settings.updateRoleOrder=({roleOrder})=>axios_default().put("/api/v1/settings/updateroleorder",{roleOrder}).then((res=>res.data)),api.settings.updatePermissions=payload=>axios_default().put(`/api/v1/roles/${payload._id}`,payload).then((res=>res.data)),api.settings.createRole=({name})=>axios_default().post("/api/v1/roles",{name}).then((res=>res.data)),api.settings.deleteRole=({_id,newRoleId})=>axios_default().delete(`/api/v1/roles/${_id}`,{data:{newRoleId}}).then((res=>res.data)),api.settings.buildSass=()=>axios_default().get("/api/v1/settings/buildsass").then((res=>res.data)),api.common={},api.common.getSessionUser=()=>axios_default().get("/api/v2/login").then((res=>res.data)),api.common.fetchRoles=()=>axios_default().get("/api/v1/roles").then((res=>res.data)),api.common.fetchViewData=()=>axios_default().get("/api/v2/viewdata").then((res=>res.data));const client_api=api;var browser=__webpack_require__(71),browser_default=__webpack_require__.n(browser);const COLOURS={debug:"blue",info:"green",warn:"pink",error:"red"};const logger=new class{generateMessage(level,message,source){const namespace=`trudesk:${level}`,createDebug=browser_default()(namespace);createDebug.color=COLOURS[level],source?createDebug(source,message):createDebug(message)}debug(message,source){return this.generateMessage("debug",message,source)}info(message,source){return this.generateMessage("info",message,source)}warn(message,source){return this.generateMessage("warn",message,source)}error(message,source){return this.generateMessage("error",message,source)}};function*initSocket({meta}){try{const s=io.connect({transports:["polling","websocket"]});yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:INIT_SOCKET.SUCCESS,payload:{socket:s},meta})}catch(error){logger.error(error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:INIT_SOCKET.ERROR,error})}}function*updateSocket({payload}){try{const s=payload.socket;yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_SOCKET.SUCCESS,payload:{socket:s}})}catch(error){logger.error(error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_SOCKET.ERROR,error})}}function*setSessionUser({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.common.getSessionUser,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:SET_SESSION_USER.SUCCESS,payload:{sessionUser:response}})}catch(error){console.log(error);const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&logger.error(errorText,error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:SET_SESSION_USER.ERROR,error})}}function*fetchRoles({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.common.fetchRoles,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ROLES.SUCCESS,response})}catch(error){const errorText=error.response.data.error;logger.error(errorText,error.response),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ROLES.ERROR,error})}}function*fetchViewData({payload,meta}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_VIEWDATA.PENDING});try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.common.fetchViewData);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_VIEWDATA.SUCCESS,payload:{response,payload},meta})}catch(error){let errorText="";error.response&&(errorText=error.response.data.error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response||error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_VIEWDATA.ERROR,error})}}function*watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(INIT_SOCKET.ACTION,initSocket),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_SOCKET.ACTION,updateSocket),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(SET_SESSION_USER.ACTION,setSessionUser),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_ROLES.ACTION,fetchRoles),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_VIEWDATA.ACTION,fetchViewData)}function*fetchDashboardData({payload,meta}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DASHBOARD_DATA.PENDING});try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.dashboard.getData,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DASHBOARD_DATA.SUCCESS,response,meta})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DASHBOARD_DATA.ERROR,error})}}function*fetchDashboardTopGroups({payload}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DASHBOARD_TOP_GROUPS.PENDING});try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.dashboard.getTopGroups,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DASHBOARD_TOP_GROUPS.SUCCESS,response})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DASHBOARD_TOP_GROUPS.ERROR,error})}}function*fetchDashboardTopTags({payload}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DASHBOARD_TOP_TAGS.PENDING});try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.dashboard.getTopTags,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DASHBOARD_TOP_TAGS.SUCCESS,response})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DASHBOARD_TOP_TAGS.ERROR,error})}}function*fetchDashboardOverdueTickets({payload}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DASHBOARD_OVERDUE_TICKETS.PENDING});try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.dashboard.getOverdueTickets,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DASHBOARD_OVERDUE_TICKETS.SUCCESS,response})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DASHBOARD_OVERDUE_TICKETS.ERROR,error})}}function*dashboard_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_DASHBOARD_DATA.ACTION,fetchDashboardData),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_DASHBOARD_TOP_GROUPS.ACTION,fetchDashboardTopGroups),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_DASHBOARD_TOP_TAGS.ACTION,fetchDashboardTopTags),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_DASHBOARD_OVERDUE_TICKETS.ACTION,fetchDashboardOverdueTickets)}function fetchSettings(){return axios_default().get("/api/v1/settings").then((res=>res.data)).catch((error=>{throw error.response}))}function*fetchFlow({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(fetchSettings,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.SUCCESS,response})}catch(error){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ERROR,error})}}function*updateSetting({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.update,[payload]);payload.noSnackbar||helpers_default().UI.showSnackbar("Setting Saved Successfully",!1),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_SETTING.SUCCESS,response,payload,meta})}catch(error){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_SETTING.ERROR,error,meta})}}function*updateMultipleSettings({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.update,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_MULTIPLE_SETTINGS.SUCCESS,response}),helpers_default().UI.showSnackbar("Setting saved successfully.",!1),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ACTION})}catch(error){helpers_default().UI.showSnackbar(error,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_MULTIPLE_SETTINGS.ERROR,error})}}function*updateColorScheme({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.update,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_COLORSCHEME.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.buildSass),helpers_default().UI.showSnackbar("Setting saved successfully. Reloading...",!1),setTimeout((function(){window.location.reload()}),1e3)}catch(error){helpers_default().UI.showSnackbar(error,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_MULTIPLE_SETTINGS.ERROR,error})}}function*checkMongoDBTools({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.hasMongoDBTools,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_MONGODB_TOOLS.SUCCESS,response})}catch(error){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_MONGODB_TOOLS.ERROR,error})}}function*fetchBackups(){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.fetchBackups);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_BACKUPS.SUCCESS,response})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_BACKUPS.ERROR,error})}}function*backupNow(){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:BACKUP_NOW.PENDING});const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.backupNow);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:BACKUP_NOW.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_BACKUPS.ACTION}),helpers_default().UI.showSnackbar("Backup completed successfully")}catch(error){if(!error.response)return logger.error(error);const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:BACKUP_NOW.ERROR,error})}}function*fetchDeletedTickets(){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DELETED_TICKETS.PENDING});const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.fetchDeletedTickets);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DELETED_TICKETS.SUCCESS,response})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DELETED_TICKETS.ERROR,error})}}function*restoreDeletedTicket({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.restoreDeletedTicket,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:RESTORE_DELETED_TICKET.SUCCESS,response,payload}),helpers_default().UI.showSnackbar("Ticket Restored")}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:RESTORE_DELETED_TICKET.ERROR,error})}}function*permDeleteTicket({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.permDeleteTicket,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:PERM_DELETE_TICKET.SUCCESS,response,payload}),helpers_default().UI.showSnackbar("Ticket Deleted")}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:PERM_DELETE_TICKET.ERROR,error})}}function*updateRoleOrder({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.updateRoleOrder,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_ROLE_ORDER.SUCCESS,response})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_ROLE_ORDER.ERROR,error})}}function*updatePermissions({payload}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_PERMISSIONS.PENDING});const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.updatePermissions,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_PERMISSIONS.SUCCESS,response}),helpers_default().UI.showSnackbar("Updated Role. Flushing Permissions...")}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_PERMISSIONS.ERROR,error})}}function*createRole({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.createRole,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_ROLE.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ROLES.ACTION}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_ROLE.ERROR,error})}}function*deleteRole({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.deleteRole,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_ROLE.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ROLES.ACTION}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL}),helpers_default().UI.showSnackbar("Role successfully deleted")}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_ROLE.ERROR,error})}}function*settingsWatcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_SETTINGS.ACTION,fetchFlow),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_SETTING.ACTION,updateSetting),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_MULTIPLE_SETTINGS.ACTION,updateMultipleSettings),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_COLORSCHEME.ACTION,updateColorScheme),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_MONGODB_TOOLS.ACTION,checkMongoDBTools),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_BACKUPS.ACTION,fetchBackups),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(BACKUP_NOW.ACTION,backupNow),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_DELETED_TICKETS.ACTION,fetchDeletedTickets),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(RESTORE_DELETED_TICKET.ACTION,restoreDeletedTicket),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(PERM_DELETE_TICKET.ACTION,permDeleteTicket),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_ROLE_ORDER.ACTION,updateRoleOrder),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_PERMISSIONS.ACTION,updatePermissions),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_ROLE.ACTION,createRole),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_ROLE.ACTION,deleteRole)}const getSessionUser=state=>state.shared.sessionUser;function*fetchTickets({payload}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_TICKETS.PENDING,payload});try{let response=null;response="search"===payload.type?yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.search,payload):yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.getWithPage,payload),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_TICKETS.SUCCESS,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_TICKETS.ERROR,error}),logger.error(errorText,error)}}function*createTicket({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.create,payload),sessionUser=yield(0,redux_saga_effects_npm_proxy_esm.Ys)(getSessionUser);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TICKET.SUCCESS,response,sessionUser}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TICKET.ERROR,error})}}function*deleteTicket({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.delete,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_TICKET.SUCCESS,payload,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_TICKET.ERROR,error}),logger.error(errorText,error)}}function*unloadThunk({payload,meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_TICKETS.SUCCESS,payload,meta})}catch(error){logger.error(error)}}function*ticketUpdated({payload}){try{const sessionUser=yield(0,redux_saga_effects_npm_proxy_esm.Ys)(getSessionUser);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:TICKET_UPDATED.SUCCESS,payload,sessionUser})}catch(error){logger.error(error)}}function*ticketEvent({payload}){try{const sessionUser=yield(0,redux_saga_effects_npm_proxy_esm.Ys)(getSessionUser);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:TICKET_EVENT.SUCCESS,payload,sessionUser})}catch(error){logger.error(error)}}function*createTicketType({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.createTicketType,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TICKET_TYPE.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TICKET_TYPE.ERROR,error})}}function*deleteTicketType({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.deleteTicketType,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_TICKET_TYPE.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_TICKET_TYPE.ERROR,error})}}function*getTagsWithPage({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.getTagsWithPage,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:GET_TAGS_WITH_PAGE.SUCCESS,response})}catch(error){if(!error.response)return logger.error(error);const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:GET_TAGS_WITH_PAGE.ERROR,error})}}function*fetchPriorities({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.fetchPriorities,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_PRIORITIES.SUCCESS,response,meta})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_PRIORITIES.ERROR,error})}}function*createPriority({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.createPriority,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_PRIORITY.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_PRIORITY.ERROR,error})}}function*updatePriority({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.updatePriority,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_PRIORITY.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_PRIORITY.ERROR,error})}}function*deletePriority({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.deletePriority,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_PRIORITY.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_PRIORITY.ERROR,error})}}function*createTag({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.createTag,{name:payload.name});yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TAG.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),(0,lodash.isUndefined)(payload.currentPage)||(yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:GET_TAGS_WITH_PAGE.ACTION,payload:{limit:16,page:payload.currentPage}})),helpers_default().UI.showSnackbar(`Tag ${payload.name} successfully created`)}catch(error){if(!error.response)return logger.error(error);const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TAG.ERROR,error})}}function*transferToThirdParty({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.transferToThirdParty,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:TRANSFER_TO_THIRDPARTY.SUCCESS,response}),helpers_default().UI.showSnackbar("Ticket Transferred Successfully",!1)}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:TRANSFER_TO_THIRDPARTY.ERROR,error})}}function*fetchTicketTypes({payload}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_TICKET_TYPES.PENDING});try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.fetchTicketTypes,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_TICKET_TYPES.SUCCESS,response})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_TICKET_TYPES.ERROR,error})}}function*tickets_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_TICKETS.ACTION,fetchTickets),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_TICKET.ACTION,createTicket),yield(0,redux_saga_effects_npm_proxy_esm.ib)(DELETE_TICKET.ACTION,deleteTicket),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_TICKETS.ACTION,unloadThunk),yield(0,redux_saga_effects_npm_proxy_esm.ib)(TICKET_UPDATED.ACTION,ticketUpdated),yield(0,redux_saga_effects_npm_proxy_esm.ib)(TICKET_EVENT.ACTION,ticketEvent),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_TICKET_TYPE.ACTION,createTicketType),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_TICKET_TYPE.ACTION,deleteTicketType),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_PRIORITIES.ACTION,fetchPriorities),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_PRIORITY.ACTION,createPriority),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_PRIORITY.ACTION,updatePriority),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_PRIORITY.ACTION,deletePriority),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(GET_TAGS_WITH_PAGE.ACTION,getTagsWithPage),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_TAG.ACTION,createTag),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(TRANSFER_TO_THIRDPARTY.ACTION,transferToThirdParty),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_TICKET_TYPES.ACTION,fetchTicketTypes)}function*fetchAccounts({payload,meta}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ACCOUNTS.PENDING});try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.getWithPage,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ACCOUNTS.SUCCESS,payload:{response,payload},meta})}catch(error){let errorText="";error.response&&(errorText=error.response.data.error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response||error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ACCOUNTS.ERROR,error})}}function*fetchAccountsCreateTicket({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.getWithPage,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ACCOUNTS_CREATE_TICKET.SUCCESS,payload:{response,payload},meta})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ACCOUNTS_CREATE_TICKET.ERROR,error})}}function*createAccount({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.create,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_ACCOUNT.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),helpers_default().UI.showSnackbar("Account created successfully")}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response||error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_ACCOUNT.ERROR,error})}}function*saveEditAccount({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.updateUser,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:SAVE_EDIT_ACCOUNT.SUCCESS,response,meta}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),payload.hideSnackbar||helpers_default().UI.showSnackbar("Account updated successfully")}catch(error){let errorText="";error.response&&(errorText=error.response.data.error),errorText.message&&(errorText=errorText.message),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response||error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:SAVE_EDIT_ACCOUNT.ERROR,error})}}function*deleteAccount({payload}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_ACCOUNT.PENDING,payload});const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.deleteAccount,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_ACCOUNT.SUCCESS,response,payload}),response.disabled?helpers_default().UI.showSnackbar("Account is linked to existing tickets. Account Disabled"):helpers_default().UI.showSnackbar("Account deleted successfully")}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response||error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_ACCOUNT.ERROR,error})}}function*enableAccount({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.enableAccount,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:ENABLE_ACCOUNT.SUCCESS,response,payload}),helpers_default().UI.showSnackbar("Account has been enabled")}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response||error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:ENABLE_ACCOUNT.ERROR,error})}}function*accounts_unloadThunk({payload,meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_ACCOUNTS.SUCCESS,payload,meta})}catch(error){logger.error(error)}}function*saveProfile({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.saveProfile,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:SAVE_PROFILE.SUCCESS,response,meta})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:SAVE_PROFILE.ERROR,error})}}function*genMFA({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.generateMFA,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:GEN_MFA.SUCCESS,payload:response,meta})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:GEN_MFA.ERROR,error})}}function*accounts_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_ACCOUNT.ACTION,createAccount),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_ACCOUNTS.ACTION,fetchAccounts),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_ACCOUNTS_CREATE_TICKET.ACTION,fetchAccountsCreateTicket),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(SAVE_EDIT_ACCOUNT.ACTION,saveEditAccount),yield(0,redux_saga_effects_npm_proxy_esm.ib)(DELETE_ACCOUNT.ACTION,deleteAccount),yield(0,redux_saga_effects_npm_proxy_esm.ib)(ENABLE_ACCOUNT.ACTION,enableAccount),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_ACCOUNTS.ACTION,accounts_unloadThunk),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(SAVE_PROFILE.ACTION,saveProfile),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(GEN_MFA.ACTION,genMFA)}function*fetchGroups({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.groups.get,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_GROUPS.SUCCESS,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_GROUPS.ERROR,error}),logger.error(errorText,error)}}function*createGroup({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.groups.create,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_GROUP.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_GROUP.ERROR,error}),logger.error(errorText,error)}}function*updateGroup({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.groups.update,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_GROUP.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_GROUP.ERROR,error}),logger.error(errorText,error)}}function*deleteGroup({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.groups.delete,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_GROUP.SUCCESS,payload,response,meta}),helpers_default().UI.showSnackbar("Successfully delete group")}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_GROUP.ERROR,error}),logger.error(errorText,error)}}function*groups_unloadThunk({payload,meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_GROUPS.SUCCESS,payload,meta})}catch(error){logger.error(error)}}function*groups_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_GROUPS.ACTION,fetchGroups),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_GROUP.ACTION,createGroup),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_GROUP.ACTION,updateGroup),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_GROUP.ACTION,deleteGroup),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_GROUPS.ACTION,groups_unloadThunk)}function*fetchTeams({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.teams.getWithPage,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_TEAMS.SUCCESS,payload:{response,payload},meta})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_TEAMS.ERROR,error})}}function*createTeam({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.teams.create,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TEAM.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TEAM.ERROR,error})}}function*updateTeam({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.teams.updateTeam,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:SAVE_EDIT_TEAM.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:SAVE_EDIT_TEAM.ERROR,error})}}function*deleteTeam({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.teams.deleteTeam,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_TEAM.SUCCESS,payload,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_TEAM.ERROR,error})}}function*teams_unloadThunk({payload,meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_TEAMS.SUCCESS,payload,meta})}catch(error){logger.error(error)}}function*teams_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_TEAMS.ACTION,fetchTeams),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_TEAM.ACTION,createTeam),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(SAVE_EDIT_TEAM.ACTION,updateTeam),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_TEAM.ACTION,deleteTeam),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_TEAMS.ACTION,teams_unloadThunk)}function*fetchDepartments({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.departments.get,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DEPARTMENTS.SUCCESS,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DEPARTMENTS.ERROR,error})}}function*createDepartment({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.departments.create,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_DEPARTMENT.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_DEPARTMENT.ERROR,error}),logger.error(errorText,error)}}function*updateDepartment({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.departments.update,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_DEPARTMENT.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_DEPARTMENT.ERROR,error}),logger.error(errorText,error)}}function*deleteDepartment({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.departments.delete,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_DEPARTMENT.SUCCESS,payload,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_DEPARTMENT.ERROR,error}),logger.error(errorText,error)}}function*unloadDepartments({payload,meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_DEPARTMENTS.SUCCESS,payload,meta})}catch(error){logger.error(error)}}function*departments_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_DEPARTMENTS.ACTION,fetchDepartments),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_DEPARTMENT.ACTION,createDepartment),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_DEPARTMENT.ACTION,updateDepartment),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_DEPARTMENT.ACTION,deleteDepartment),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_DEPARTMENTS.ACTION,unloadDepartments)}function*fetchNotices({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.notices.get,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_NOTICES.SUCCESS,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_NOTICES.ERROR,error}),logger.error(errorText,error)}}function*createNotice({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.notices.create,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_NOTICE.SUCCESS,response,meta}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),helpers_default().UI.showSnackbar("Notice Created")}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_NOTICE.ERROR,error})}}function*updateNotice({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.notices.update,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_NOTICE.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_NOTICE.ERROR,error})}}function*deleteNotice({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.notices.delete,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_NOTICE.SUCCESS,payload,response})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_NOTICE.ERROR,error})}}function*notices_unloadThunk({payload,meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_NOTICES.SUCCESS,payload,meta})}catch(error){logger.error(error)}}function*watch(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_NOTICE.ACTION,createNotice),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_NOTICES.ACTION,fetchNotices),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_NOTICE.ACTION,updateNotice),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_NOTICE.ACTION,deleteNotice),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_NOTICES.ACTION,notices_unloadThunk)}function*fetchSearchResults({payload,meta}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SEARCH_RESULTS.PENDING}),payload.term||(yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SEARCH_RESULTS.ERROR,error:{message:"Invalid search Term"}}));try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.search.search,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SEARCH_RESULTS.SUCCESS,response,meta})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SEARCH_RESULTS.ERROR,error}),logger.error(errorText,error)}}function*unloadSearchResults({payload,meta}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_SEARCH_RESULTS.SUCCESS,payload,meta})}function*search_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_SEARCH_RESULTS.ACTION,fetchSearchResults),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_SEARCH_RESULTS.ACTION,unloadSearchResults)}function*fetchConversations({payload}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_CONVERSATIONS.PENDING});try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.messages.getConversations,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_CONVERSATIONS.SUCCESS,response})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_CONVERSATIONS.ERROR,error})}}function*unloadConversations({meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_CONVERSATIONS.SUCCESS,meta})}catch(error){logger.error(error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_CONVERSATIONS.ERROR,error})}}function*deleteConversation({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.messages.deleteConversation,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_CONVERSATION.SUCCESS,response,meta})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_CONVERSATION.ERROR,error})}}function*fetchSingleConversation({payload,meta}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SINGLE_CONVERSATION.PENDING});try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.messages.getSingleConversation,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SINGLE_CONVERSATION.SUCCESS,response,meta})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SINGLE_CONVERSATION.ERROR,error})}}function*unloadSingleConversation({meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_SINGLE_CONVERSATION.SUCCESS,meta})}catch(error){logger.error(error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_SINGLE_CONVERSATION.ERROR,error})}}function*onReceiveMessage({payload,meta}){try{const state=yield(0,redux_saga_effects_npm_proxy_esm.Ys)((r=>r.messagesState));-1===state.conversations.findIndex((c=>c.get("_id").toString()===payload.message.conversation.toString()))?yield(0,redux_saga_effects_npm_proxy_esm.xN)({type:FETCH_CONVERSATIONS.ACTION,meta}):yield(0,redux_saga_effects_npm_proxy_esm.xN)({type:MESSAGES_UI_RECEIVE.SUCCESS,payload,meta})}catch(error){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:MESSAGES_UI_RECEIVE.ERROR,error})}}function*sendMessage({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.messages.send,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:MESSAGES_SEND.SUCCESS,payload:response,response,meta})}catch(error){logger.error(error);const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:MESSAGES_SEND.ERROR,error})}}function*messages_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_CONVERSATIONS.ACTION,fetchConversations),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_CONVERSATIONS.ACTION,unloadConversations),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_CONVERSATION.ACTION,deleteConversation),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_SINGLE_CONVERSATION.ACTION,fetchSingleConversation),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_SINGLE_CONVERSATION.ACTION,unloadSingleConversation),yield(0,redux_saga_effects_npm_proxy_esm.ib)(MESSAGES_UI_RECEIVE.ACTION,onReceiveMessage),yield(0,redux_saga_effects_npm_proxy_esm.ib)(MESSAGES_SEND.ACTION,sendMessage)}function*generateReport({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.reports.generate,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:GENERATE_REPORT.SUCCESS,response,meta}),function(response,filename){const headers=response.headers,blob=new Blob([response.data],{type:headers["content-type"]}),link=document.createElement("a");link.href=window.URL.createObjectURL(blob),link.download=`${filename}.csv`,link.click(),link.remove()}(response,payload.filename)}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),console.log(errorText),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:GENERATE_REPORT.ERROR,error})}}function*reports_watch(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(GENERATE_REPORT.ACTION,generateReport)}var react_singleton_hook_es=__webpack_require__(744),prop_types=__webpack_require__(63),prop_types_default=__webpack_require__.n(prop_types),mobxreact_esm=__webpack_require__(822),mobx_esm=__webpack_require__(823),createAction=__webpack_require__(820);const common_initSocket=(0,createAction.Z)(INIT_SOCKET.ACTION,(payload=>payload),(()=>({thunk:!0}))),common_updateSocket=(0,createAction.Z)(UPDATE_SOCKET.ACTION,(payload=>payload)),common_setSessionUser=(0,createAction.Z)(SET_SESSION_USER.ACTION),showModal=(0,createAction.Z)(SHOW_MODAL.ACTION,((modalType,modalProps)=>({modalType,modalProps}))),hideModal=(0,createAction.Z)(HIDE_MODAL.ACTION),clearModal=(0,createAction.Z)(CLEAR_MODAL.ACTION),showNotice=(0,createAction.Z)(SHOW_NOTICE.ACTION),clearNotice=(0,createAction.Z)(CLEAR_NOTICE.ACTION),common_fetchRoles=(0,createAction.Z)(FETCH_ROLES.ACTION),common_updateRoleOrder=(0,createAction.Z)(UPDATE_ROLE_ORDER.ACTION),common_fetchViewData=(0,createAction.Z)(FETCH_VIEWDATA.ACTION,(payload=>payload),(()=>({thunk:!0})));var clsx_m=__webpack_require__(821),socketEventConsts=__webpack_require__(7);function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var Avatar=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(Avatar,_React$Component);var Constructor,protoProps,staticProps,_super=_createSuper(Avatar);function Avatar(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Avatar),(_this=_super.call(this,props)).onlineBubbleRef=react.createRef(),_this.overlayRef=react.createRef(),_this.imageUploadInput=react.createRef(),_this.onOnlineStatusUpdate=_this.onOnlineStatusUpdate.bind(_assertThisInitialized(_this)),_this}return Constructor=Avatar,protoProps=[{key:"componentDidMount",value:function(){this.props.showOnlineBubble&&this.props.userId&&this.props.socket.on(socketEventConsts.UI_ONLINE_STATUS_UPDATE,this.onOnlineStatusUpdate)}},{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){!prevProps.showOnlineBubble&&this.props.showOnlineBubble&&this.props.userId&&(this.props.socket.off(socketEventConsts.UI_ONLINE_STATUS_UPDATE,this.onOnlineStatusUpdate),this.props.socket.on(socketEventConsts.UI_ONLINE_STATUS_UPDATE,this.onOnlineStatusUpdate))}},{key:"componentWillUnmount",value:function(){this.props.socket.off(socketEventConsts.UI_ONLINE_STATUS_UPDATE,this.onOnlineStatusUpdate)}},{key:"onOnlineStatusUpdate",value:function(data){var _this2=this;if(this.onlineBubbleRef.current&&this.props.userId){var bubble=this.onlineBubbleRef.current;bubble.classList.remove("user-online"),bubble.classList.remove("user-idle"),bubble.classList.add("user-offline");var onlineUserList=data.sortedUserList,idleUserList=data.sortedIdleList,isOnline=(0,lodash.some)(onlineUserList,(function(val){return val.user._id.toString()===_this2.props.userId.toString()}));(0,lodash.some)(idleUserList,(function(val){return val.user._id.toString()===_this2.props.userId.toString()}))?(bubble.classList.remove("user-offline"),bubble.classList.remove("user-online"),bubble.classList.add("user-idle")):isOnline&&(bubble.classList.remove("user-offline"),bubble.classList.remove("user-idle"),bubble.classList.add("user-online"))}}},{key:"onMouseOver",value:function(){this.overlayRef.current&&this.overlayRef.current.classList.contains("uk-hidden")&&this.overlayRef.current.classList.remove("uk-hidden")}},{key:"onMouseOut",value:function(){this.overlayRef.current&&!this.overlayRef.current.classList.contains("uk-hidden")&&this.overlayRef.current.classList.add("uk-hidden")}},{key:"onUploadImageClicked",value:function(e){e.preventDefault(),this.imageUploadInput.current&&this.imageUploadInput.current.click("click")}},{key:"onImageInputChange",value:function(e){var _this3=this;if(e.preventDefault(),""!==this.imageUploadInput.current.value){var formData=new FormData,imageFile=e.target.files[0];formData.append("_id",this.props.userId),formData.append("username",this.props.username),formData.append("image",imageFile),axios_default().post("/accounts/uploadImage",formData,{headers:{"Content-Type":"multipart/form-data"}}).then((function(res){_this3.props.socket&&_this3.props.socket.emit(socketEventConsts.ACCOUNTS_UI_PROFILE_IMAGE_UPDATE,{_id:_this3.props.userId}),_this3.imageUploadInput.current.value=""})).catch((function(error){console.error(error),helpers_default().UI.showSnackbar("Error: ".concat(error.message),!0)}))}}},{key:"render",value:function(){var _this4=this,_this$props=this.props,style=_this$props.style,image=_this$props.image,showOnlineBubble=_this$props.showOnlineBubble,overrideBubbleSize=_this$props.overrideBubbleSize,showLargerBubble=_this$props.showLargerBubble,size=_this$props.size,showBorder=_this$props.showBorder,borderColor=_this$props.borderColor,enableImageUpload=_this$props.enableImageUpload,wrapperStyle={borderRadius:"50%"};showBorder&&(wrapperStyle.borderWidth=4,wrapperStyle.borderStyle="solid",wrapperStyle.borderColor="rgba(0,0,0,0.1)"),borderColor&&(wrapperStyle.borderColor=borderColor),style&&(wrapperStyle=_objectSpread(_objectSpread({},wrapperStyle),style));var bubbleSize=size<50?Math.round(size/2):17;return overrideBubbleSize&&(bubbleSize=overrideBubbleSize),showLargerBubble&&(bubbleSize=25),react.createElement(react.Fragment,null,react.createElement("div",{className:"relative uk-clearfix uk-float-left uk-display-inline-block",style:wrapperStyle,onMouseOver:function(){return _this4.onMouseOver()},onMouseOut:function(){return _this4.onMouseOut()}},enableImageUpload&&react.createElement(react.Fragment,null,react.createElement("form",null,react.createElement("input",{ref:this.imageUploadInput,className:"uk-hidden",type:"file",hidden:!0,accept:"image/*",onChange:function(e){return _this4.onImageInputChange(e)}})),react.createElement("div",{ref:this.overlayRef,className:"uk-hidden",style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignContent:"center",alignItems:"center",justifyContent:"center",height:size,width:size,background:"rgba(0,0,0,0.2)",borderRadius:"50%",cursor:"pointer",zIndex:100},onClick:function(e){return _this4.onUploadImageClicked(e)}},react.createElement("i",{className:"material-icons",style:{color:"#fff"}},"edit"))),react.createElement("img",{className:"profile-pic uk-border-circle",style:{height:size,width:size},src:"/uploads/users/".concat(image||"defaultProfile.jpg"),alt:""}),showOnlineBubble&&react.createElement("span",{ref:this.onlineBubbleRef,className:(0,clsx_m.Z)("user-online-status",showLargerBubble&&"user-status-large","user-offline","uk-border-circle"),style:{height:bubbleSize,width:bubbleSize}})))}}],protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Avatar}(react.Component);Avatar.propTypes={userId:prop_types_default().string,username:prop_types_default().string,socket:prop_types_default().object.isRequired,image:prop_types_default().string,size:prop_types_default().number.isRequired,showOnlineBubble:prop_types_default().bool,showBorder:prop_types_default().bool,borderColor:prop_types_default().string,enableImageUpload:prop_types_default().bool,style:prop_types_default().object,overrideBubbleSize:prop_types_default().number,showLargerBubble:prop_types_default().bool},Avatar.defaultProps={size:50,showOnlineBubble:!0,showBorder:!1,enableImageUpload:!1,showLargerBubble:!1};const Avatar_Avatar=(0,es.$j)((function(state){return{socket:state.shared.socket}}),{})(Avatar);function PDropdownTrigger_typeof(obj){return PDropdownTrigger_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PDropdownTrigger_typeof(obj)}function PDropdownTrigger_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PDropdownTrigger_setPrototypeOf(o,p){return PDropdownTrigger_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},PDropdownTrigger_setPrototypeOf(o,p)}function PDropdownTrigger_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=PDropdownTrigger_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PDropdownTrigger_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PDropdownTrigger_possibleConstructorReturn(this,result)}}function PDropdownTrigger_possibleConstructorReturn(self,call){if(call&&("object"===PDropdownTrigger_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PDropdownTrigger_getPrototypeOf(o){return PDropdownTrigger_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},PDropdownTrigger_getPrototypeOf(o)}var PDropdownTrigger=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PDropdownTrigger_setPrototypeOf(subClass,superClass)}(PDropdownTrigger,_React$Component);var Constructor,protoProps,staticProps,_super=PDropdownTrigger_createSuper(PDropdownTrigger);function PDropdownTrigger(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PDropdownTrigger),(_this=_super.call(this,props)).containerRef=(0,react.createRef)(),_this}return Constructor=PDropdownTrigger,(protoProps=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){}},{key:"componentWillUnmount",value:function(){}},{key:"onTargetClick",value:function(e){e.preventDefault(),this.props.target&&this.props.target.current&&"function"==typeof this.props.target.current.show&&this.props.target.current.show(this.containerRef.current)}},{key:"render",value:function(){var _this2=this;return react.createElement("div",{ref:this.containerRef,className:"uk-clearfix",onClick:function(e){return _this2.onTargetClick(e)}},this.props.children)}}])&&PDropdownTrigger_defineProperties(Constructor.prototype,protoProps),staticProps&&PDropdownTrigger_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PDropdownTrigger}(react.Component);PDropdownTrigger.propTypes={target:prop_types_default().any.isRequired,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const PDropdown_PDropdownTrigger=PDropdownTrigger;function OffCanvasTrigger_typeof(obj){return OffCanvasTrigger_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},OffCanvasTrigger_typeof(obj)}function OffCanvasTrigger_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function OffCanvasTrigger_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function OffCanvasTrigger_setPrototypeOf(o,p){return OffCanvasTrigger_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},OffCanvasTrigger_setPrototypeOf(o,p)}function OffCanvasTrigger_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=OffCanvasTrigger_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=OffCanvasTrigger_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return OffCanvasTrigger_possibleConstructorReturn(this,result)}}function OffCanvasTrigger_possibleConstructorReturn(self,call){if(call&&("object"===OffCanvasTrigger_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function OffCanvasTrigger_getPrototypeOf(o){return OffCanvasTrigger_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},OffCanvasTrigger_getPrototypeOf(o)}var OffCanvasTrigger=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&OffCanvasTrigger_setPrototypeOf(subClass,superClass)}(OffCanvasTrigger,_React$Component);var Constructor,protoProps,staticProps,_super=OffCanvasTrigger_createSuper(OffCanvasTrigger);function OffCanvasTrigger(){return OffCanvasTrigger_classCallCheck(this,OffCanvasTrigger),_super.apply(this,arguments)}return Constructor=OffCanvasTrigger,(protoProps=[{key:"render",value:function(){return react.createElement("div",{"data-uk-offcanvas":"{target: '#".concat(this.props.target,"', mode: 'slide'}")},this.props.children)}}])&&OffCanvasTrigger_defineProperties(Constructor.prototype,protoProps),staticProps&&OffCanvasTrigger_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),OffCanvasTrigger}(react.Component);OffCanvasTrigger.propTypes={target:prop_types_default().string.isRequired,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};function NoticeBanner_typeof(obj){return NoticeBanner_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},NoticeBanner_typeof(obj)}function NoticeBanner_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function NoticeBanner_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NoticeBanner_setPrototypeOf(o,p){return NoticeBanner_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},NoticeBanner_setPrototypeOf(o,p)}function NoticeBanner_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=NoticeBanner_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NoticeBanner_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NoticeBanner_possibleConstructorReturn(this,result)}}function NoticeBanner_possibleConstructorReturn(self,call){if(call&&("object"===NoticeBanner_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NoticeBanner_getPrototypeOf(o){return NoticeBanner_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},NoticeBanner_getPrototypeOf(o)}var NoticeBanner=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NoticeBanner_setPrototypeOf(subClass,superClass)}(NoticeBanner,_React$Component);var Constructor,protoProps,staticProps,_super=NoticeBanner_createSuper(NoticeBanner);function NoticeBanner(){return NoticeBanner_classCallCheck(this,NoticeBanner),_super.apply(this,arguments)}return Constructor=NoticeBanner,(protoProps=[{key:"render",value:function(){var notice=this.props.notice,dateFormatted=helpers_default().formatDate(notice.get("activeDate,"),helpers_default().getShortDateFormat()+", "+helpers_default().getTimeFormat());return react.createElement("div",{id:"notice-banner",style:{width:"100%",height:"30px",background:notice.get("color"),color:notice.get("fontColor"),fontSize:"13px",fontWeight:"500",textAlign:"center",paddingTop:"7px"}},dateFormatted," Important: ",notice.get("message"))}}])&&NoticeBanner_defineProperties(Constructor.prototype,protoProps),staticProps&&NoticeBanner_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NoticeBanner}(react.Component);NoticeBanner.propTypes={notice:prop_types_default().object.isRequired};const components_NoticeBanner=NoticeBanner;var moment_timezone=__webpack_require__(52),moment_timezone_default=__webpack_require__.n(moment_timezone);function PDropdown_typeof(obj){return PDropdown_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PDropdown_typeof(obj)}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function PDropdown_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PDropdown_setPrototypeOf(o,p){return PDropdown_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},PDropdown_setPrototypeOf(o,p)}function PDropdown_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=PDropdown_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PDropdown_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PDropdown_possibleConstructorReturn(this,result)}}function PDropdown_possibleConstructorReturn(self,call){if(call&&("object"===PDropdown_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return PDropdown_assertThisInitialized(self)}function PDropdown_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function PDropdown_getPrototypeOf(o){return PDropdown_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},PDropdown_getPrototypeOf(o)}var PDropDown=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PDropdown_setPrototypeOf(subClass,superClass)}(PDropDown,_React$Component);var Constructor,protoProps,staticProps,_super=PDropdown_createSuper(PDropDown);function PDropDown(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PDropDown),(_this=_super.call(this,props)).dropRef=(0,react.createRef)(),_this.pTriggerRef=null,_this.hideDropdownOnMouseUp=_this.hideDropdownOnMouseUp.bind(PDropdown_assertThisInitialized(_this)),_this.closeOnClick=_this.closeOnClick.bind(PDropdown_assertThisInitialized(_this)),_this}return Constructor=PDropDown,(protoProps=[{key:"hideDropdownOnMouseUp",value:function(e){this.dropRef.current&&(this.dropRef.current.contains(e.target)||this.pTriggerRef.contains(e.target)||(document.removeEventListener("mouseup",this.hideDropdownOnMouseUp),this.dropRef.current.classList.remove("pDropOpen")))}},{key:"closeOnClick",value:function(){this.dropRef.current&&(document.removeEventListener("mouseup",this.hideDropdownOnMouseUp),this.dropRef.current.classList.remove("pDropOpen"))}},{key:"show",value:function(pTrigger){if(!pTrigger)return console.error("Invalid pTrigger sent to show method"),!0;if(this.pTriggerRef=pTrigger,this.dropRef.current){var ref=this.dropRef.current;if(ref.classList.contains("pDropOpen"))return ref.classList.remove("pDropOpen"),!0;document.removeEventListener("mouseup",this.hideDropdownOnMouseUp),document.addEventListener("mouseup",this.hideDropdownOnMouseUp);var pageContent=document.getElementById("page-content");if(pageContent){var pageOffsetLeft=0,pageOffsetTop=0,pTriggerOffsetLeft=pTrigger.getBoundingClientRect().left,pTriggerOffsetTop=pTrigger.getBoundingClientRect().top,pTriggerHeight=pTrigger.offsetHeight,left0=250;ref.classList.contains("pSmall")&&(left0=180),ref.classList.contains("p-dropdown-left")&&(left0=0),pageContent.contains(pTrigger)&&(pageOffsetLeft=pageContent.clientLeft,pageOffsetTop=pageContent.clientTop,pTriggerOffsetLeft=pTrigger.offsetLeft,pTriggerOffsetTop=pTrigger.offsetTop),pageOffsetTop+=pTriggerOffsetTop;var left=pTriggerOffsetLeft-window.scrollX-pageOffsetLeft-left0;this.props.leftOffset&&(left+=Number(this.props.leftOffset)),left+="px";var top=pTriggerHeight+(pTriggerOffsetTop-window.scrollY+pageOffsetTop);this.props.topOffset&&(top+=Number(this.props.topOffset));var noticeFrame=document.getElementById("notice-banner"),hasNotice=!1;noticeFrame&&(hasNotice=!noticeFrame.classList.contains("uk-hidden")),hasNotice&&!ref.classList.contains("opt-ignore-notice")&&(top-=30),top+="px";var _step,_iterator=_createForOfIteratorHelper(ref.querySelectorAll("a"));try{for(_iterator.s();!(_step=_iterator.n()).done;){var link=_step.value;link.removeEventListener("click",this.closeOnClick),link.addEventListener("click",this.closeOnClick)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var _step2,_iterator2=_createForOfIteratorHelper(ref.querySelectorAll(".close-on-click"));try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _link=_step2.value;_link.removeEventListener("click",this.closeOnClick),_link.addEventListener("click",this.closeOnClick)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}ref.style.position="absolute",ref.style.left=left,ref.style.top=top,ref.classList.add("pDropOpen"),this.props.onShow()}}}},{key:"render",value:function(){var _this$props=this.props,title=_this$props.title,titleHref=_this$props.titleHref,showTitlebar=_this$props.showTitlebar,leftArrow=_this$props.leftArrow,showArrow=_this$props.showArrow,override=_this$props.override,topOffset=_this$props.topOffset,leftOffset=_this$props.leftOffset,rightComponent=_this$props.rightComponent,children=_this$props.children,className=_this$props.className,footerComponent=_this$props.footerComponent,minHeight=_this$props.minHeight,minWidth=_this$props.minWidth,isListItems=_this$props.isListItems;return react.createElement("div",{id:this.props.id,ref:this.dropRef,className:(0,clsx_m.Z)("p-dropdown",leftArrow&&"p-dropdown-left",!showArrow&&"p-dropdown-hide-arrow",className),"data-override":override,"data-top-offset":topOffset,"data-left-offset":leftOffset,style:{minHeight,minWidth}},showTitlebar&&react.createElement("div",{className:"actions"},titleHref&&react.createElement("a",{href:titleHref},title),!titleHref&&react.createElement("span",{style:{paddingLeft:"5px"}},title),rightComponent&&react.createElement("div",{className:"uk-float-right"},rightComponent)),isListItems&&react.createElement("div",{className:"items close-on-click"},react.createElement("ul",null,children)),!isListItems&&react.createElement("div",null,children),footerComponent&&react.createElement("div",{className:"bottom-actions actions uk-float-left",style:{borderBottom:"none",borderTop:"1px solid rgba(0,0,0,0.2)"}},footerComponent))}}])&&PDropdown_defineProperties(Constructor.prototype,protoProps),staticProps&&PDropdown_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PDropDown}(react.Component);PDropDown.propTypes={id:prop_types_default().string.isRequired,title:prop_types_default().string,titleHref:prop_types_default().string,showTitlebar:prop_types_default().bool,leftArrow:prop_types_default().bool,showArrow:prop_types_default().bool,override:prop_types_default().bool,topOffset:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),leftOffset:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),rightComponent:prop_types_default().element,footerComponent:prop_types_default().element,minHeight:prop_types_default().number,minWidth:prop_types_default().number,isListItems:prop_types_default().bool,className:prop_types_default().string,onShow:prop_types_default().func.isRequired,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired},PDropDown.defaultProps={showTitlebar:!0,leftArrow:!1,showArrow:!0,override:!1,topOffset:"0",leftOffset:"0",minHeight:0,isListItems:!0,onShow:function(){}};const PDropdown=PDropDown;var _class,_class2,_descriptor;__webpack_require__(33);function notificationsDropdown_typeof(obj){return notificationsDropdown_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},notificationsDropdown_typeof(obj)}function notificationsDropdown_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function notificationsDropdown_setPrototypeOf(o,p){return notificationsDropdown_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},notificationsDropdown_setPrototypeOf(o,p)}function notificationsDropdown_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=notificationsDropdown_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=notificationsDropdown_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return notificationsDropdown_possibleConstructorReturn(this,result)}}function notificationsDropdown_possibleConstructorReturn(self,call){if(call&&("object"===notificationsDropdown_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return notificationsDropdown_assertThisInitialized(self)}function notificationsDropdown_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function notificationsDropdown_getPrototypeOf(o){return notificationsDropdown_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},notificationsDropdown_getPrototypeOf(o)}var target,property,decorators,descriptor,context,desc,NotificationsDropdownPartial=(0,mobxreact_esm.Pi)((_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&notificationsDropdown_setPrototypeOf(subClass,superClass)}(NotificationsDropdownPartial,_React$Component);var Constructor,protoProps,staticProps,_super=notificationsDropdown_createSuper(NotificationsDropdownPartial);function NotificationsDropdownPartial(props){var _this,target,property,descriptor,context;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NotificationsDropdownPartial),_this=_super.call(this,props),target=_this,property="notifications",descriptor=_descriptor,context=notificationsDropdown_assertThisInitialized(_this),descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0}),(0,mobx_esm.rC)(notificationsDropdown_assertThisInitialized(_this)),_this.onSocketUpdateNotifications=_this.onSocketUpdateNotifications.bind(notificationsDropdown_assertThisInitialized(_this)),_this.clearNotificationsClicked=_this.clearNotificationsClicked.bind(notificationsDropdown_assertThisInitialized(_this)),_this.markNotificationRead=_this.markNotificationRead.bind(notificationsDropdown_assertThisInitialized(_this)),_this}return Constructor=NotificationsDropdownPartial,(protoProps=[{key:"componentDidMount",value:function(){this.props.socket.on(socketEventConsts.NOTIFICATIONS_UPDATE,this.onSocketUpdateNotifications)}},{key:"componentWillUnmount",value:function(){this.props.socket.off(socketEventConsts.NOTIFICATIONS_UPDATE,this.onSocketUpdateNotifications)}},{key:"onSocketUpdateNotifications",value:function(data){helpers_default().arrayIsEqual(this.notifications,data.items)||(this.notifications=data.items)}},{key:"clearNotificationsClicked",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.socket.emit(socketEventConsts.NOTIFICATIONS_CLEAR)}},{key:"markNotificationRead",value:function(e,notification){e.preventDefault(),e.stopPropagation(),this.props.socket.emit(socketEventConsts.NOTIFICATIONS_MARK_READ,notification._id),History.pushState(null,null,"/tickets/".concat(notification.data.ticket.uid))}},{key:"render",value:function(){var _this2=this,_this$props=this.props,shortDateFormat=_this$props.shortDateFormat,timezone=_this$props.timezone,forwardedRef=_this$props.forwardedRef;return react.createElement(PDropdown,{ref:forwardedRef,id:"notifications",title:"Notifications",topOffset:-4,leftOffset:4,rightComponent:react.createElement("a",{className:"hoverUnderline no-ajaxy",onClick:function(e){return _this2.clearNotificationsClicked(e)}},"Clear Notifications"),footerComponent:react.createElement("div",{className:"uk-text-center"+(this.notifications.length<1?" hide":"")},react.createElement("a",{className:"no-ajaxy hoverUnderline",onClick:this.props.onViewAllNotificationsClick},"View All Notifications"))},this.notifications.map((function(notification){var formattedTimestamp=moment_timezone_default().utc(notification.created).tz(timezone).format("YYYY-MM-DDThh:mm"),formattedDate=moment_timezone_default().utc(notification.created).tz(timezone).format(shortDateFormat);return react.createElement("li",{key:notification._id},react.createElement("a",{className:"item no-ajaxy",onClick:function(e){return _this2.markNotificationRead(e,notification)}},react.createElement("div",{className:"uk-clearfix"},notification.unread&&react.createElement("div",{className:"messageUnread"}),0===notification.type&&react.createElement("div",{className:"messageIcon left"},react.createElement("i",{className:"fa fa-check green"})),1===notification.type&&react.createElement("div",{className:"messageIcon left"},react.createElement("i",{className:"fa fa-comment-o green",style:{marginTop:"-5px"}})),2===notification.type&&react.createElement("div",{className:"messageIcon left"},react.createElement("i",{className:"fa fa-exclamation red"})),react.createElement("div",{className:"messageAuthor"},react.createElement("strong",null,notification.title)),react.createElement("div",{className:"messageSnippet"},react.createElement("span",null,notification.message)),react.createElement("div",{className:"messageDate"},react.createElement("time",{dateTime:formattedTimestamp,className:"timestamp"},formattedDate)))))}),this))}}])&&notificationsDropdown_defineProperties(Constructor.prototype,protoProps),staticProps&&notificationsDropdown_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NotificationsDropdownPartial}(react.Component),target=_class2.prototype,property="notifications",decorators=[mobx_esm.LO],descriptor={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},desc={},Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),_descriptor=desc,_class=_class2))||_class;NotificationsDropdownPartial.propTypes={socket:prop_types_default().object.isRequired,timezone:prop_types_default().string.isRequired,shortDateFormat:prop_types_default().string.isRequired,onViewAllNotificationsClick:prop_types_default().func.isRequired,forwardedRef:prop_types_default().any};const notificationsDropdown=(0,es.$j)((function(state){return{socket:state.shared.socket}}),{},null,{forwardRef:!0})(NotificationsDropdownPartial),accounts_fetchAccounts=(0,createAction.Z)(FETCH_ACCOUNTS.ACTION,(payload=>payload),(()=>({thunk:!0}))),accounts_fetchAccountsCreateTicket=(0,createAction.Z)(FETCH_ACCOUNTS_CREATE_TICKET.ACTION,(payload=>payload),(()=>({thunk:!0}))),accounts_createAccount=(0,createAction.Z)(CREATE_ACCOUNT.ACTION),accounts_saveEditAccount=(0,createAction.Z)(SAVE_EDIT_ACCOUNT.ACTION,(payload=>payload),(()=>({thunk:!0}))),accounts_deleteAccount=(0,createAction.Z)(DELETE_ACCOUNT.ACTION),accounts_enableAccount=(0,createAction.Z)(ENABLE_ACCOUNT.ACTION),unloadAccounts=(0,createAction.Z)(UNLOAD_ACCOUNTS.ACTION,(payload=>payload),(()=>({thunk:!0}))),accounts_saveProfile=(0,createAction.Z)(SAVE_PROFILE.ACTION,(payload=>payload),(()=>({thunk:!0}))),accounts_genMFA=(0,createAction.Z)(GEN_MFA.ACTION,(payload=>payload),(()=>({thunk:!0})));function EnableSwitch_typeof(obj){return EnableSwitch_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EnableSwitch_typeof(obj)}function EnableSwitch_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function EnableSwitch_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EnableSwitch_setPrototypeOf(o,p){return EnableSwitch_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},EnableSwitch_setPrototypeOf(o,p)}function EnableSwitch_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EnableSwitch_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EnableSwitch_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EnableSwitch_possibleConstructorReturn(this,result)}}function EnableSwitch_possibleConstructorReturn(self,call){if(call&&("object"===EnableSwitch_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function EnableSwitch_getPrototypeOf(o){return EnableSwitch_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},EnableSwitch_getPrototypeOf(o)}var EnableSwitch=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EnableSwitch_setPrototypeOf(subClass,superClass)}(EnableSwitch,_React$Component);var Constructor,protoProps,staticProps,_super=EnableSwitch_createSuper(EnableSwitch);function EnableSwitch(){var _this;EnableSwitch_classCallCheck(this,EnableSwitch);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).labelRef=(0,react.createRef)(),_this}return Constructor=EnableSwitch,(protoProps=[{key:"onLevelClick",value:function(e){e.preventDefault(),this.labelRef.current&&this.labelRef.current.click()}},{key:"render",value:function(){var _this2=this,combinedStyle=(0,lodash.merge)({margin:"17px 0 0 0"},this.props.style);return react.createElement("div",{className:"md-switch-wrapper md-switch md-green uk-float-right uk-clearfix",style:combinedStyle},react.createElement("label",{ref:this.labelRef,htmlFor:this.props.stateName,style:this.props.labelStyle||{}},this.props.label,this.props.sublabel),react.createElement("input",{type:"checkbox",id:this.props.stateName,name:this.props.stateName,onChange:this.props.onChange,checked:this.props.checked,disabled:this.props.disabled}),react.createElement("span",{className:(0,clsx_m.Z)("lever",this.props.leverClass),onClick:function(e){return _this2.onLevelClick(e)}}))}}])&&EnableSwitch_defineProperties(Constructor.prototype,protoProps),staticProps&&EnableSwitch_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EnableSwitch}(react.Component);EnableSwitch.propTypes={stateName:prop_types_default().string.isRequired,label:prop_types_default().string.isRequired,labelStyle:prop_types_default().object,sublabel:prop_types_default().node,style:prop_types_default().object,leverClass:prop_types_default().string,onChange:prop_types_default().func,checked:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),disabled:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool])};const Settings_EnableSwitch=EnableSwitch;function Spacer_typeof(obj){return Spacer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Spacer_typeof(obj)}function Spacer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Spacer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Spacer_setPrototypeOf(o,p){return Spacer_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Spacer_setPrototypeOf(o,p)}function Spacer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Spacer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Spacer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Spacer_possibleConstructorReturn(this,result)}}function Spacer_possibleConstructorReturn(self,call){if(call&&("object"===Spacer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Spacer_getPrototypeOf(o){return Spacer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Spacer_getPrototypeOf(o)}var Spacer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Spacer_setPrototypeOf(subClass,superClass)}(Spacer,_React$Component);var Constructor,protoProps,staticProps,_super=Spacer_createSuper(Spacer);function Spacer(){return Spacer_classCallCheck(this,Spacer),_super.apply(this,arguments)}return Constructor=Spacer,(protoProps=[{key:"render",value:function(){return react.createElement("div",{style:{display:"block",marginTop:this.props.top,marginBottom:this.props.bottom}},this.props.showBorder&&react.createElement("hr",{style:{display:"block",margin:0,height:this.props.borderSize}}))}}])&&Spacer_defineProperties(Constructor.prototype,protoProps),staticProps&&Spacer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Spacer}(react.Component);Spacer.propTypes={top:prop_types_default().number,bottom:prop_types_default().number,showBorder:prop_types_default().bool,borderSize:prop_types_default().number},Spacer.defaultProps={top:15,bottom:15,showBorder:!1,borderSize:2};const components_Spacer=Spacer;function profileDropdown_typeof(obj){return profileDropdown_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},profileDropdown_typeof(obj)}var profileDropdown_class,profileDropdown_class2,profileDropdown_descriptor;function profileDropdown_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function profileDropdown_setPrototypeOf(o,p){return profileDropdown_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},profileDropdown_setPrototypeOf(o,p)}function profileDropdown_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=profileDropdown_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=profileDropdown_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return profileDropdown_possibleConstructorReturn(this,result)}}function profileDropdown_possibleConstructorReturn(self,call){if(call&&("object"===profileDropdown_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return profileDropdown_assertThisInitialized(self)}function profileDropdown_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function profileDropdown_getPrototypeOf(o){return profileDropdown_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},profileDropdown_getPrototypeOf(o)}var ProfileDropdownPartial=(0,mobxreact_esm.Pi)((profileDropdown_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&profileDropdown_setPrototypeOf(subClass,superClass)}(ProfileDropdownPartial,_React$Component);var Constructor,protoProps,staticProps,_super=profileDropdown_createSuper(ProfileDropdownPartial);function ProfileDropdownPartial(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ProfileDropdownPartial),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"keyboardShortcutsChecked",profileDropdown_descriptor,profileDropdown_assertThisInitialized(_this)),(0,mobx_esm.rC)(profileDropdown_assertThisInitialized(_this)),_this}return Constructor=ProfileDropdownPartial,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().ajaxify("#profile-drop"),this.props.sessionUser&&(this.keyboardShortcutsChecked=this.props.sessionUser.preferences.keyboardShortcuts)}},{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){prevProps.sessionUser!==this.props.sessionUser&&(this.keyboardShortcutsChecked=this.props.sessionUser.preferences.keyboardShortcuts)}},{key:"onKeyboardShortcutsChanged",value:function(e){var _this2=this,checked=e.target.checked;this.props.saveEditAccount({hideSnackbar:!0,username:this.props.sessionUser.username,preferences:{keyboardShortcuts:checked}}).then((function(){_this2.props.setSessionUser()}))}},{key:"render",value:function(){var _this3=this;return react.createElement(PDropdown,{ref:this.props.forwardedRef,id:"profile-drop",className:"profile-drop",showTitlebar:!1,minHeight:185,minWidth:350,topOffset:-5,leftOffset:-70,showArrow:!1,isListItems:!1},react.createElement("div",{className:"pdrop-content"},react.createElement("div",{className:"user-section padding-15 uk-clearfix"},react.createElement("div",{className:"user-info"},react.createElement(Avatar_Avatar,{image:this.props.sessionUser.image||"defaultProfile.jpg",showOnlineBubble:!1,style:{marginLeft:5,marginRight:15},size:60}),react.createElement("div",{className:"user-info-items"},react.createElement("span",{className:"uk-text-bold",style:{fontSize:"16px",lineHeight:"22px"}},this.props.sessionUser.fullname),react.createElement("span",null,this.props.sessionUser.email),react.createElement("a",{href:"/profile"},"Profile Settings")))),react.createElement(components_Spacer,{showBorder:!0,borderSize:1,top:0,bottom:0}),react.createElement("div",{className:"profile-drop-actions"},react.createElement("div",{className:"action-logout"},react.createElement("i",{className:"material-icons"},"logout"),react.createElement("a",{href:"/logout"},"Logout")))),react.createElement("div",{className:"pdrop-footer"},react.createElement("div",{className:"links"},react.createElement("a",{href:"https://forum.trudesk.io",target:"_blank",rel:"noreferrer"},"Community"),react.createElement("span",null,"·"),react.createElement("a",{href:"#",className:"no-ajaxy",onClick:function(e){e.preventDefault(),helpers_default().hideAllpDropDowns(),_this3.props.showModal("PRIVACY_POLICY")}},"Privacy Policy"))))}}])&&profileDropdown_defineProperties(Constructor.prototype,protoProps),staticProps&&profileDropdown_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ProfileDropdownPartial}(react.Component),profileDropdown_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(profileDropdown_class2.prototype,"keyboardShortcutsChecked",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),profileDropdown_class=profileDropdown_class2))||profileDropdown_class;ProfileDropdownPartial.propTypes={sessionUser:prop_types_default().object.isRequired,setSessionUser:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired,saveEditAccount:prop_types_default().func.isRequired,forwardedRef:prop_types_default().any};const profileDropdown=(0,es.$j)((function(state){return{sessionUser:state.shared.sessionUser}}),{setSessionUser:common_setSessionUser,showModal,saveEditAccount:accounts_saveEditAccount},null,{forwardRef:!0})(ProfileDropdownPartial);function conversationsDropdown_typeof(obj){return conversationsDropdown_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},conversationsDropdown_typeof(obj)}var conversationsDropdown_class,conversationsDropdown_class2,conversationsDropdown_descriptor;function conversationsDropdown_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function conversationsDropdown_setPrototypeOf(o,p){return conversationsDropdown_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},conversationsDropdown_setPrototypeOf(o,p)}function conversationsDropdown_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=conversationsDropdown_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=conversationsDropdown_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return conversationsDropdown_possibleConstructorReturn(this,result)}}function conversationsDropdown_possibleConstructorReturn(self,call){if(call&&("object"===conversationsDropdown_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return conversationsDropdown_assertThisInitialized(self)}function conversationsDropdown_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function conversationsDropdown_getPrototypeOf(o){return conversationsDropdown_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},conversationsDropdown_getPrototypeOf(o)}var ConversationsDropdownPartial=(0,mobxreact_esm.Pi)((conversationsDropdown_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&conversationsDropdown_setPrototypeOf(subClass,superClass)}(ConversationsDropdownPartial,_React$Component);var Constructor,protoProps,staticProps,_super=conversationsDropdown_createSuper(ConversationsDropdownPartial);function ConversationsDropdownPartial(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ConversationsDropdownPartial),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"conversations",conversationsDropdown_descriptor,conversationsDropdown_assertThisInitialized(_this)),(0,mobx_esm.rC)(conversationsDropdown_assertThisInitialized(_this)),_this.onUpdateConversationsNotifications=_this.onUpdateConversationsNotifications.bind(conversationsDropdown_assertThisInitialized(_this)),_this}return Constructor=ConversationsDropdownPartial,(protoProps=[{key:"componentDidMount",value:function(){this.props.socket.on(socketEventConsts.MESSAGES_UPDATE_UI_CONVERSATION_NOTIFICATIONS,this.onUpdateConversationsNotifications)}},{key:"componentWillUnmount",value:function(){this.props.socket.off(socketEventConsts.MESSAGES_UPDATE_UI_CONVERSATION_NOTIFICATIONS,this.onUpdateConversationsNotifications)}},{key:"onUpdateConversationsNotifications",value:function(data){helpers_default().setupScrollers(),helpers_default().arrayIsEqual(this.conversations,data.conversations)||(this.conversations=data.conversations)}},{key:"onConversationClicked",value:function(e,id){e.preventDefault(),History.pushState(null,null,"/messages/".concat(id))}},{key:"render",value:function(){var _this2=this,_this$props=this.props,timezone=_this$props.timezone,shortDateFormat=_this$props.shortDateFormat,forwardedRef=_this$props.forwardedRef;return react.createElement(PDropdown,{ref:forwardedRef,id:"conversations",title:"Conversations",titleHref:"/messages",topOffset:-4,leftOffset:4,onShow:function(){_this2.props.socket.emit(socketEventConsts.MESSAGES_UPDATE_UI_CONVERSATION_NOTIFICATIONS)},rightComponent:react.createElement("a",{href:"/messages/startconversation",className:"hoverUnderline"},"Start Conversation"),footerComponent:react.createElement("div",{className:"uk-text-center"+(this.conversations.length<1?" hide":"")},react.createElement("a",{className:"no-ajaxy hoverUnderline",onClick:function(){History.pushState(null,null,"/messages")}},"View All Conversations"))},react.createElement("div",{className:"items scrollable close-on-click"},react.createElement("ul",null,this.conversations.map((function(conversation){var profilePic=conversation.partner.image||"defaultProfile.jpg",formattedTimestamp=moment_timezone_default().utc(conversation.updatedAt).tz(timezone).format("YYYY-MM-DDThh:mm"),formattedDate=moment_timezone_default().utc(conversation.updatedAt).tz(timezone).format(shortDateFormat);return react.createElement("li",{key:conversation._id},react.createElement("a",{className:"no-ajaxy messageNotification uk-position-relative",onClick:function(e){return _this2.onConversationClicked(e,conversation._id)}},react.createElement("div",{className:"uk-clearfix"},react.createElement("div",{className:"profilePic uk-float-left"},react.createElement("img",{src:"/uploads/users/".concat(profilePic),alt:"Profile Picture"})),react.createElement("div",{className:"messageAuthor"},react.createElement("strong",null,conversation.partner.fullname)),react.createElement("div",{className:"messageSnippet"},react.createElement("span",null,conversation.recentMessage)),react.createElement("div",{className:"messageDate",style:{position:"absolute",top:"10px",right:"15px"}},react.createElement("time",{dateTime:formattedTimestamp},formattedDate)))))})))))}}])&&conversationsDropdown_defineProperties(Constructor.prototype,protoProps),staticProps&&conversationsDropdown_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ConversationsDropdownPartial}(react.Component),conversationsDropdown_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(conversationsDropdown_class2.prototype,"conversations",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),conversationsDropdown_class=conversationsDropdown_class2))||conversationsDropdown_class;ConversationsDropdownPartial.propTypes={timezone:prop_types_default().string.isRequired,shortDateFormat:prop_types_default().string.isRequired,socket:prop_types_default().object.isRequired,forwardedRef:prop_types_default().any.isRequired};const conversationsDropdown=ConversationsDropdownPartial,startConversation=(owner,receiver,callback)=>new Promise(((resolve,reject)=>{if(owner===receiver)return"function"==typeof callback?callback("Invalid Participants"):reject(new Error("Invalid Participants"));axios_default().post("/api/v1/messages/conversation/start",{owner,participants:[owner,receiver]}).then((res=>"function"==typeof callback?callback(null,res.data.conversation):resolve(res.data.conversation))).catch((err=>"function"==typeof callback?callback(err):reject(err)))}));function OffCanvas_typeof(obj){return OffCanvas_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},OffCanvas_typeof(obj)}function OffCanvas_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function OffCanvas_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function OffCanvas_setPrototypeOf(o,p){return OffCanvas_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},OffCanvas_setPrototypeOf(o,p)}function OffCanvas_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=OffCanvas_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=OffCanvas_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return OffCanvas_possibleConstructorReturn(this,result)}}function OffCanvas_possibleConstructorReturn(self,call){if(call&&("object"===OffCanvas_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function OffCanvas_getPrototypeOf(o){return OffCanvas_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},OffCanvas_getPrototypeOf(o)}var OffCanvas=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&OffCanvas_setPrototypeOf(subClass,superClass)}(OffCanvas,_React$Component);var Constructor,protoProps,staticProps,_super=OffCanvas_createSuper(OffCanvas);function OffCanvas(){return OffCanvas_classCallCheck(this,OffCanvas),_super.apply(this,arguments)}return Constructor=OffCanvas,(protoProps=[{key:"render",value:function(){var _this$props=this.props,title=_this$props.title,id=_this$props.id,children=_this$props.children;return react.createElement("div",{id,className:"uk-offcanvas"},react.createElement("div",{className:"uk-offcanvas-bar uk-offcanvas-bar-flip scrollable"},title&&react.createElement("div",{className:"uk-offcanvas-title"},react.createElement("h3",null,title)),children))}}])&&OffCanvas_defineProperties(Constructor.prototype,protoProps),staticProps&&OffCanvas_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),OffCanvas}(react.Component);OffCanvas.propTypes={title:prop_types_default().string,id:prop_types_default().string.isRequired,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const components_OffCanvas=OffCanvas;function onlineUserList_typeof(obj){return onlineUserList_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},onlineUserList_typeof(obj)}var onlineUserList_class,onlineUserList_class2,onlineUserList_descriptor;function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return onlineUserList_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return onlineUserList_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function onlineUserList_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function onlineUserList_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function onlineUserList_setPrototypeOf(o,p){return onlineUserList_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},onlineUserList_setPrototypeOf(o,p)}function onlineUserList_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=onlineUserList_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=onlineUserList_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return onlineUserList_possibleConstructorReturn(this,result)}}function onlineUserList_possibleConstructorReturn(self,call){if(call&&("object"===onlineUserList_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return onlineUserList_assertThisInitialized(self)}function onlineUserList_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function onlineUserList_getPrototypeOf(o){return onlineUserList_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},onlineUserList_getPrototypeOf(o)}var OnlineUserListPartial=(0,mobxreact_esm.Pi)((onlineUserList_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&onlineUserList_setPrototypeOf(subClass,superClass)}(OnlineUserListPartial,_React$Component);var Constructor,protoProps,staticProps,_super=onlineUserList_createSuper(OnlineUserListPartial);function OnlineUserListPartial(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OnlineUserListPartial),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"activeUsers",onlineUserList_descriptor,onlineUserList_assertThisInitialized(_this)),(0,mobx_esm.jQ)({enforceActions:"never"}),(0,mobx_esm.rC)(onlineUserList_assertThisInitialized(_this)),_this.onSocketUpdateUsers=_this.onSocketUpdateUsers.bind(onlineUserList_assertThisInitialized(_this)),_this}return Constructor=OnlineUserListPartial,(protoProps=[{key:"componentDidMount",value:function(){this.props.socket.on("updateUsers",this.onSocketUpdateUsers)}},{key:"componentWillUnmount",value:function(){this.props.socket.off("updateUsers",this.onSocketUpdateUsers)}},{key:"onSocketUpdateUsers",value:function(data){this.activeUsers.replace(data)}},{key:"isActiveUser",value:function(username){return!!this.activeUsers.get(username)}},{key:"onUserClicked",value:function(e,_id){var _this2=this;e.preventDefault(),uikit_combined_min_default().offcanvas.hide(),startConversation(this.props.sessionUser._id,_id).then((function(conversation){_this2.props.socket.emit(socketEventConsts.MESSAGES_SPAWN_CHAT_WINDOW,{convoId:conversation._id})}))}},{key:"fromNow",value:function(timezone,date){return(0,lodash.isUndefined)(date)?"Never":(moment_timezone_default().updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mo",MM:"%dmos",y:"1y",yy:"%dyrs"}}),moment_timezone_default().utc(date).tz(timezone).fromNow())}},{key:"render",value:function(){var _this3=this,_this$props=this.props,timezone=_this$props.timezone,users=_this$props.users;return react.createElement(components_OffCanvas,{title:"Online Users",id:"online-user-list"},react.createElement("div",{style:{padding:"0 5px"}},react.createElement("div",{className:"active-now"},react.createElement("h5",null,"Active Now"),react.createElement("div",{className:"online-list-wrapper"},react.createElement("ul",{className:"online-list"},(0,mobx_esm.qh)(this.activeUsers).map((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];if(_this3.props.sessionUser&&value.user._id===_this3.props.sessionUser._id)return null;var image=value.user.image||"defaultProfile.jpg",isAgentOrAdmin=value.user.role.isAdmin||value.user.role.isAgent;return react.createElement("li",{key},react.createElement("a",{className:"no-ajaxy",onClick:function(e){return _this3.onUserClicked(e,value.user._id)}},react.createElement("div",{className:"user-list-user"},react.createElement("div",{className:"image"},react.createElement("img",{src:"/uploads/users/".concat(image),alt:"Profile Pic"})),react.createElement("span",{className:"online-status","data-user-status-id":value.user._id}),react.createElement("div",{className:"user-name"+(isAgentOrAdmin?" _agent":"")},value.user.fullname+(isAgentOrAdmin?" - Agent":"")))))}))))),react.createElement("h5",null,"More Conversations"),react.createElement("div",{className:"user-list-wrapper",style:{lineHeight:"normal"}},react.createElement("div",{className:"online-list-search-box search-box",style:{borderTop:"1px solid rgba(0,0,0,0.1)",borderRight:"none"}},react.createElement("input",{type:"text",placeholder:"Search"})),react.createElement("ul",{className:"user-list"},users.map((function(user){if(_this3.props.sessionUser&&user._id===_this3.props.sessionUser._id)return null;var image=user.get("image")||"defaultProfile.jpg";return react.createElement("li",{key:user.get("_id"),"data-search-term":user.get("fullname").toLowerCase()},react.createElement("a",{className:"no-ajaxy",onClick:function(e){return OnlineUserListPartial.onUserClicked(e,user.get("_id"))}},react.createElement("div",{className:"user-list-user"},react.createElement("div",{className:"image"},react.createElement("img",{src:"/uploads/users/".concat(image),alt:"Profile Picture"}))),react.createElement("span",{className:"online-status-offline"+(_this3.isActiveUser(user.get("username"))?" success-text":""),"data-user-status-id":user.get("_id")},_this3.isActiveUser(user.get("username"))?"Now":_this3.fromNow(timezone,user.get("lastOnline"))),react.createElement("div",{className:"user-name"},user.get("fullname"))))}))))))}}])&&onlineUserList_defineProperties(Constructor.prototype,protoProps),staticProps&&onlineUserList_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),OnlineUserListPartial}(react.Component),onlineUserList_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(onlineUserList_class2.prototype,"activeUsers",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),onlineUserList_class=onlineUserList_class2))||onlineUserList_class;OnlineUserListPartial.propTypes={sessionUser:prop_types_default().object.isRequired,timezone:prop_types_default().string.isRequired,users:prop_types_default().array.isRequired,socket:prop_types_default().object.isRequired};const onlineUserList=OnlineUserListPartial;var TopbarContainer_class,TopbarContainer_class2,TopbarContainer_descriptor,_descriptor2,_descriptor3,js_cookie=__webpack_require__(25),js_cookie_default=__webpack_require__.n(js_cookie);function TopbarContainer_typeof(obj){return TopbarContainer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TopbarContainer_typeof(obj)}function TopbarContainer_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function TopbarContainer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TopbarContainer_setPrototypeOf(o,p){return TopbarContainer_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},TopbarContainer_setPrototypeOf(o,p)}function TopbarContainer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TopbarContainer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TopbarContainer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TopbarContainer_possibleConstructorReturn(this,result)}}function TopbarContainer_possibleConstructorReturn(self,call){if(call&&("object"===TopbarContainer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return TopbarContainer_assertThisInitialized(self)}function TopbarContainer_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function TopbarContainer_getPrototypeOf(o){return TopbarContainer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},TopbarContainer_getPrototypeOf(o)}function TopbarContainer_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var TopbarContainer=(0,mobxreact_esm.Pi)((TopbarContainer_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TopbarContainer_setPrototypeOf(subClass,superClass)}(TopbarContainer,_React$Component);var Constructor,protoProps,staticProps,_super=TopbarContainer_createSuper(TopbarContainer);function TopbarContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TopbarContainer),(_this=_super.call(this,props)).conversationsDropdownPartial=(0,react.createRef)(),_this.notificationsDropdownPartial=(0,react.createRef)(),_this.profileDropdownPartial=(0,react.createRef)(),TopbarContainer_initializerDefineProperty(_this,"notificationCount",TopbarContainer_descriptor,TopbarContainer_assertThisInitialized(_this)),TopbarContainer_initializerDefineProperty(_this,"activeUserCount",_descriptor2,TopbarContainer_assertThisInitialized(_this)),TopbarContainer_initializerDefineProperty(_this,"showInfoBanner",_descriptor3,TopbarContainer_assertThisInitialized(_this)),(0,mobx_esm.rC)(TopbarContainer_assertThisInitialized(_this)),_this.onSocketUpdateNotifications=_this.onSocketUpdateNotifications.bind(TopbarContainer_assertThisInitialized(_this)),_this.onSocketUpdateUsers=_this.onSocketUpdateUsers.bind(TopbarContainer_assertThisInitialized(_this)),_this.onSocketShowNotice=_this.onSocketShowNotice.bind(TopbarContainer_assertThisInitialized(_this)),_this.onSocketClearNotice=_this.onSocketClearNotice.bind(TopbarContainer_assertThisInitialized(_this)),_this}return Constructor=TopbarContainer,staticProps=[{key:"onConversationsClicked",value:function(e){e.preventDefault()}}],(protoProps=[{key:"componentDidMount",value:function(){var _this2=this;this.props.fetchViewData().then((function(){_this2.props.viewdata.get("notice")&&_this2.showNotice(_this2.props.viewdata.get("notice").toJS(),_this2.props.viewdata.get("noticeCookieName"))})),this.props.socket.on(socketEventConsts.NOTIFICATIONS_UPDATE,this.onSocketUpdateNotifications),this.props.socket.on(socketEventConsts.USERS_UPDATE,this.onSocketUpdateUsers),this.props.socket.on(socketEventConsts.NOTICE_UI_SHOW,this.onSocketShowNotice),this.props.socket.on(socketEventConsts.NOTICE_UI_CLEAR,this.onSocketClearNotice),this.props.socket.emit(socketEventConsts.NOTIFICATIONS_UPDATE),this.props.socket.emit(socketEventConsts.USERS_UPDATE)}},{key:"componentWillUnmount",value:function(){this.props.socket.off(socketEventConsts.NOTIFICATIONS_UPDATE,this.onSocketUpdateNotifications),this.props.socket.off(socketEventConsts.USERS_UPDATE,this.onSocketUpdateUsers),this.props.socket.off(socketEventConsts.NOTICE_UI_SHOW,this.onSocketShowNotice),this.props.socket.off(socketEventConsts.NOTICE_UI_CLEAR,this.onSocketClearNotice)}},{key:"shouldShowBanner",value:function(){"true"===js_cookie_default().get("trudesk_info_banner_closed")&&(this.showInfoBanner=!1)}},{key:"closeInfo",value:function(){js_cookie_default().set("trudesk_info_banner_closed","true"),this.showInfoBanner=!1}},{key:"showNotice",value:function(notice,cookieName){this.props.showNotice(notice),cookieName&&"false"!==js_cookie_default().get(cookieName)&&this.props.showModal("NOTICE_ALERT",{modalTag:"NOTICE_ALERT",notice,noticeCookieName:cookieName,shortDateFormat:this.props.viewdata.get("shortDateFormat"),timeFormat:this.props.viewdata.get("timeFormat")})}},{key:"onSocketShowNotice",value:function(data){this.props.showNotice(data);var cookieName=data.name+"_"+helpers_default().formatDate(data.activeDate,"MMMDDYYYY_HHmmss");this.showNotice(data,cookieName),helpers_default().resizeAll()}},{key:"onSocketClearNotice",value:function(){this.props.clearNotice(),this.props.hideModal("NOTICE_ALERT"),helpers_default().resizeAll()}},{key:"onSocketUpdateNotifications",value:function(data){data.count!==this.notificationCount&&(this.notificationCount=data.count)}},{key:"onSocketUpdateUsers",value:function(data){delete data[this.props.sessionUser.username];var count=(0,lodash.size)(data);count!==this.activeUserCount&&(this.activeUserCount=count)}},{key:"render",value:function(){var _this3=this,_this$props=this.props,loadingViewData=_this$props.loadingViewData,viewdata=_this$props.viewdata,sessionUser=_this$props.sessionUser;return loadingViewData||!sessionUser?react.createElement("div",null):react.createElement("div",null,this.props.notice&&react.createElement(components_NoticeBanner,{notice:this.props.notice}),react.createElement("div",{className:"uk-grid top-nav"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("div",{className:"top-bar","data-topbar":!0},react.createElement("div",{className:"title-area uk-float-left"},react.createElement("div",{className:"logo"},react.createElement("img",{src:viewdata.get("logoImage"),alt:"Logo",className:"site-logo"}))),react.createElement("section",{className:"top-bar-section uk-clearfix"},react.createElement("div",{className:"top-menu uk-float-right"},react.createElement("ul",{className:"uk-subnav uk-margin-bottom-remove"},sessionUser&&helpers_default().canUser("tickets:create")&&react.createElement("li",{className:"top-bar-icon nopadding"},react.createElement("button",{title:"Create Ticket",className:"anchor",onClick:function(){return _this3.props.showModal("CREATE_TICKET")}},react.createElement("i",{className:"material-icons"},""))),sessionUser&&helpers_default().canUser("tickets:create")&&react.createElement("li",{className:"top-bar-icon nopadding nohover"},react.createElement("i",{className:"material-icons separator"},"remove")),react.createElement("li",{className:"top-bar-icon"},react.createElement(PDropdown_PDropdownTrigger,{target:this.conversationsDropdownPartial},react.createElement("a",{title:"Conversations",className:"no-ajaxy uk-vertical-align",onClick:function(e){return TopbarContainer.onConversationsClicked(e)}},react.createElement("i",{className:"material-icons"},"question_answer")))),react.createElement("li",{className:"top-bar-icon"},react.createElement(PDropdown_PDropdownTrigger,{target:this.notificationsDropdownPartial},react.createElement("a",{title:"Notifications",className:"no-ajaxy uk-vertical-align"},react.createElement("i",{className:"material-icons"},"notifications"),react.createElement("span",{className:"alert uk-border-circle label "+(this.notificationCount<1?"hide":"")},this.notificationCount)))),react.createElement("li",{className:"top-bar-icon nopadding nohover"},react.createElement("i",{className:"material-icons separator"},"remove")),react.createElement("li",{className:"profile-area profile-name"},react.createElement("span",{style:{fontSize:16}},sessionUser.fullname),react.createElement("div",{className:"uk-position-relative uk-display-inline-block"},react.createElement(PDropdown_PDropdownTrigger,{target:this.profileDropdownPartial},react.createElement("a",{href:"#",title:sessionUser.fullname,className:"profile-pic no-ajaxy uk-vertical-align-middle"},react.createElement(Avatar_Avatar,{image:sessionUser.image,showOnlineBubble:!0,userId:sessionUser._id,size:35,overrideBubbleSize:15})))))),react.createElement(notificationsDropdown,{forwardedRef:this.notificationsDropdownPartial,shortDateFormat:viewdata.get("shortDateFormat"),timezone:viewdata.get("timezone"),onViewAllNotificationsClick:function(){return _this3.props.showModal("VIEW_ALL_NOTIFICATIONS")}}),react.createElement(conversationsDropdown,{forwardedRef:this.conversationsDropdownPartial,shortDateFormat:viewdata.get("shortDateFormat"),timezone:viewdata.get("timezone"),socket:this.props.socket}),react.createElement(profileDropdown,{forwardedRef:this.profileDropdownPartial}))))),react.createElement(onlineUserList,{timezone:viewdata.get("timezone"),users:viewdata.get("users").toArray(),sessionUser:this.props.sessionUser,socket:this.props.socket})))}}])&&TopbarContainer_defineProperties(Constructor.prototype,protoProps),staticProps&&TopbarContainer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TopbarContainer}(react.Component),TopbarContainer_descriptor=TopbarContainer_applyDecoratedDescriptor(TopbarContainer_class2.prototype,"notificationCount",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor2=TopbarContainer_applyDecoratedDescriptor(TopbarContainer_class2.prototype,"activeUserCount",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor3=TopbarContainer_applyDecoratedDescriptor(TopbarContainer_class2.prototype,"showInfoBanner",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),TopbarContainer_class=TopbarContainer_class2))||TopbarContainer_class;TopbarContainer.propTypes={socket:prop_types_default().object.isRequired,sessionUser:prop_types_default().object,fetchViewData:prop_types_default().func.isRequired,loadingViewData:prop_types_default().bool.isRequired,viewdata:prop_types_default().object.isRequired,showModal:prop_types_default().func.isRequired,hideModal:prop_types_default().func.isRequired,showNotice:prop_types_default().func.isRequired,clearNotice:prop_types_default().func.isRequired,notice:prop_types_default().object};const Topbar_TopbarContainer=(0,es.$j)((function(state){return{socket:state.shared.socket,sessionUser:state.shared.sessionUser,notice:state.shared.notice,loadingViewData:state.common.loadingViewData,viewdata:state.common.viewdata}}),{fetchViewData:common_fetchViewData,showModal,hideModal,showNotice,clearNotice})(TopbarContainer);function SidebarItem_typeof(obj){return SidebarItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SidebarItem_typeof(obj)}function SidebarItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SidebarItem_setPrototypeOf(o,p){return SidebarItem_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},SidebarItem_setPrototypeOf(o,p)}function SidebarItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SidebarItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SidebarItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SidebarItem_possibleConstructorReturn(this,result)}}function SidebarItem_possibleConstructorReturn(self,call){if(call&&("object"===SidebarItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SidebarItem_getPrototypeOf(o){return SidebarItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},SidebarItem_getPrototypeOf(o)}var NavButton=function(_Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SidebarItem_setPrototypeOf(subClass,superClass)}(NavButton,_Component);var Constructor,protoProps,staticProps,_super=SidebarItem_createSuper(NavButton);function NavButton(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NavButton),_super.call(this,props)}return Constructor=NavButton,(protoProps=[{key:"componentDidUpdate",value:function(){helpers_default().UI.bindAccordion(),helpers_default().UI.tetherUpdate()}},{key:"renderAnchorLink",value:function(){return react.createElement("a",{href:this.props.href,className:this.props.class,target:this.props.target||""},react.createElement("i",{className:"material-icons"},this.props.icon),this.props.text)}},{key:"render",value:function(){return this.props.hasSubmenu?react.createElement("li",{className:"hasSubMenu"+(this.props.active?" active":""),"data-nav-id":this.props.subMenuTarget,"data-nav-accordion":!0,"data-nav-accordion-target":"side-nav-accordion-"+this.props.subMenuTarget},this.renderAnchorLink(),this.props.children):react.createElement("li",{className:this.props.active?" active ":""},this.renderAnchorLink(),this.props.children)}}])&&SidebarItem_defineProperties(Constructor.prototype,protoProps),staticProps&&SidebarItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NavButton}(react.Component);NavButton.propTypes={href:prop_types_default().string.isRequired,icon:prop_types_default().string.isRequired,text:prop_types_default().string.isRequired,class:prop_types_default().string,hasSubmenu:prop_types_default().bool,subMenuTarget:prop_types_default().string,active:prop_types_default().bool,target:prop_types_default().string,children:prop_types_default().node};const SidebarItem=NavButton;function NavSeperator_typeof(obj){return NavSeperator_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},NavSeperator_typeof(obj)}function NavSeperator_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function NavSeperator_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NavSeperator_setPrototypeOf(o,p){return NavSeperator_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},NavSeperator_setPrototypeOf(o,p)}function NavSeperator_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=NavSeperator_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NavSeperator_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NavSeperator_possibleConstructorReturn(this,result)}}function NavSeperator_possibleConstructorReturn(self,call){if(call&&("object"===NavSeperator_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NavSeperator_getPrototypeOf(o){return NavSeperator_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},NavSeperator_getPrototypeOf(o)}const Nav_NavSeperator=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NavSeperator_setPrototypeOf(subClass,superClass)}(NavSeperator,_React$Component);var Constructor,protoProps,staticProps,_super=NavSeperator_createSuper(NavSeperator);function NavSeperator(){return NavSeperator_classCallCheck(this,NavSeperator),_super.apply(this,arguments)}return Constructor=NavSeperator,(protoProps=[{key:"render",value:function(){return react.createElement("hr",null)}}])&&NavSeperator_defineProperties(Constructor.prototype,protoProps),staticProps&&NavSeperator_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NavSeperator}(react.Component);var isArray=__webpack_require__(10),isArray_default=__webpack_require__.n(isArray),jquery=__webpack_require__(1),jquery_default=__webpack_require__.n(jquery);function Submenu_typeof(obj){return Submenu_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Submenu_typeof(obj)}function Submenu_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Submenu_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Submenu_setPrototypeOf(o,p){return Submenu_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Submenu_setPrototypeOf(o,p)}function Submenu_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Submenu_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Submenu_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Submenu_possibleConstructorReturn(this,result)}}function Submenu_possibleConstructorReturn(self,call){if(call&&("object"===Submenu_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Submenu_getPrototypeOf(o){return Submenu_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Submenu_getPrototypeOf(o)}var Submenu=function(_Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Submenu_setPrototypeOf(subClass,superClass)}(Submenu,_Component);var Constructor,protoProps,staticProps,_super=Submenu_createSuper(Submenu);function Submenu(){return Submenu_classCallCheck(this,Submenu),_super.apply(this,arguments)}return Constructor=Submenu,(protoProps=[{key:"componentDidMount",value:function(){this.buildFloatingMenu(this.props.id)}},{key:"componentDidUpdate",value:function(){this.buildFloatingMenu(this.props.id)}},{key:"shouldComponentUpdate",value:function(nextProps){return this.props.children!==nextProps.children}},{key:"buildFloatingMenu",value:function(navId){if(this.props.children){var $sideBarToRight=jquery_default()(".sidebar-to-right");$sideBarToRight.find("#side-nav-sub-"+navId).remove();var ul=jquery_default()('<ul id="side-nav-sub-'+this.props.id+'" class="side-nav-sub side-nav-floating"></ul>'),li=null;if(isArray_default()(this.props.children))for(var i=0;i<this.props.children.length;i++)this.props.children[i]&&("NavSeperator"===this.props.children[i].type.name?ul.append("<hr />"):(this.props.children[i].props.hasSeperator&&ul.append("<hr />"),li=jquery_default()('<li class="'+(this.props.children[i].props.active?" active ":"")+'"><a href="'+this.props.children[i].props.href+'"><span>'+this.props.children[i].props.text+"</span></a></li>"),ul.append(li)));else{if("NavSeperator"===this.props.children.type.name)return;li=jquery_default()('<li class="'+(this.props.children.props.active?" active ":"")+'"><a href="'+this.props.children.props.href+'"><span>'+this.props.children.props.text+"</span></a></li>"),ul.append(li)}$sideBarToRight.append(ul),helpers_default().UI.setupSidebarTether(),jquery_default()("body").ajaxify()}}},{key:"render",value:function(){return react.createElement("ul",{id:"side-nav-accordion-"+this.props.id,className:"side-nav-sub side-nav-accordion"+(!0===this.props.subMenuOpen?" subMenuOpen":"")},this.props.children)}}])&&Submenu_defineProperties(Constructor.prototype,protoProps),staticProps&&Submenu_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Submenu}(react.Component);Submenu.propTypes={id:prop_types_default().string.isRequired,subMenuOpen:prop_types_default().bool,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const Nav_Submenu=Submenu;function SubmenuItem_typeof(obj){return SubmenuItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SubmenuItem_typeof(obj)}function SubmenuItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function SubmenuItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SubmenuItem_setPrototypeOf(o,p){return SubmenuItem_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},SubmenuItem_setPrototypeOf(o,p)}function SubmenuItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SubmenuItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SubmenuItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SubmenuItem_possibleConstructorReturn(this,result)}}function SubmenuItem_possibleConstructorReturn(self,call){if(call&&("object"===SubmenuItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SubmenuItem_getPrototypeOf(o){return SubmenuItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},SubmenuItem_getPrototypeOf(o)}var SubmenuItem=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SubmenuItem_setPrototypeOf(subClass,superClass)}(SubmenuItem,_React$Component);var Constructor,protoProps,staticProps,_super=SubmenuItem_createSuper(SubmenuItem);function SubmenuItem(){return SubmenuItem_classCallCheck(this,SubmenuItem),_super.apply(this,arguments)}return Constructor=SubmenuItem,(protoProps=[{key:"render",value:function(){return react.createElement("div",null,this.props.hasSeperator&&react.createElement("hr",null),react.createElement("li",{className:this.props.active?" active ":""},react.createElement("a",{href:this.props.href},react.createElement("i",{className:"material-icons fa-sub-icon"},this.props.icon),this.props.text)))}}])&&SubmenuItem_defineProperties(Constructor.prototype,protoProps),staticProps&&SubmenuItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SubmenuItem}(react.Component);SubmenuItem.propTypes={href:prop_types_default().string.isRequired,text:prop_types_default().string.isRequired,icon:prop_types_default().string.isRequired,hasSeperator:prop_types_default().bool,active:prop_types_default().bool};const Nav_SubmenuItem=SubmenuItem,updateNavChange=(0,createAction.Z)(NAV_CHANGE.ACTION,(values=>({activeItem:values.activeItem,activeSubItem:values.activeSubItem,sessionUser:values.sessionUser})));function Sidebar_typeof(obj){return Sidebar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Sidebar_typeof(obj)}function Sidebar_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Sidebar_setPrototypeOf(o,p){return Sidebar_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Sidebar_setPrototypeOf(o,p)}function Sidebar_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Sidebar_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Sidebar_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Sidebar_possibleConstructorReturn(this,result)}}function Sidebar_possibleConstructorReturn(self,call){if(call&&("object"===Sidebar_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Sidebar_getPrototypeOf(o){return Sidebar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Sidebar_getPrototypeOf(o)}var Sidebar=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Sidebar_setPrototypeOf(subClass,superClass)}(Sidebar,_React$Component);var Constructor,protoProps,staticProps,_super=Sidebar_createSuper(Sidebar);function Sidebar(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Sidebar),_super.call(this,props)}return Constructor=Sidebar,(protoProps=[{key:"componentDidMount",value:function(){var sidebarRoute=document.getElementById("__sidebar_route").innerText,sidebarSubRoute=document.getElementById("__sidebar_sub_route").innerText;this.props.updateNavChange({activeItem:sidebarRoute,activeSubItem:sidebarSubRoute})}},{key:"componentDidUpdate",value:function(){helpers_default().UI.initSidebar(),helpers_default().UI.bindExpand()}},{key:"renderPlugins",value:function(){var _this$state=this.state,plugins=_this$state.plugins,sessionUser=_this$state.sessionUser,activeItem=_this$state.activeItem,activeSubItem=_this$state.activeSubItem;return react.createElement(SidebarItem,{text:"Plugins",icon:"extension",href:"/plugins",class:"navPlugins tether-plugins",hasSubmenu:plugins&&plugins.length>0,subMenuTarget:"plugins",active:"plugins"===activeItem},plugins&&plugins.length>0&&react.createElement(Nav_Submenu,{id:"plugins",subMenuOpen:"plugins"===activeItem},plugins.map((function(item){if(-1!==item.permissions.split(" ").indexOf(sessionUser.role))return react.createElement(Nav_SubmenuItem,{key:item.name,text:item.menu.main.name,icon:item.menu.main.icon,href:item.menu.main.link,active:activeSubItem===item.name})}))))}},{key:"render",value:function(){var _this$props=this.props,activeItem=_this$props.activeItem,activeSubItem=_this$props.activeSubItem,sessionUser=_this$props.sessionUser;return react.createElement("div",{className:"sidebar nopadding",style:{overflowX:"hidden",top:this.props.notice?"95px":"65px"},"data-scroll-opacitymax":"0.1"},react.createElement("div",{id:"side-nav-container",style:{minHeight:"calc(100% - 50px)"}},react.createElement("ul",{className:"side-nav"},sessionUser&&helpers_default().canUser("agent:*",!0)&&react.createElement(SidebarItem,{text:"Dashboard",icon:"dashboard",href:"/dashboard",class:"navHome",active:"dashboard"===activeItem}),sessionUser&&helpers_default().canUser("tickets:view")&&react.createElement(SidebarItem,{text:"Tickets",icon:"assignment",href:"/tickets",class:"navTickets no-ajaxy",hasSubmenu:!0,subMenuTarget:"tickets",active:"tickets"===activeItem},react.createElement(Nav_Submenu,{id:"tickets"},react.createElement(Nav_SubmenuItem,{text:"Active",icon:"timer",href:"/tickets/active",active:"tickets-active"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Assigned",icon:"assignment_ind",href:"/tickets/assigned",active:"tickets-assigned"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Unassigned",icon:"person_add_disabled",href:"/tickets/unassigned",active:"tickets-unassigned"===activeSubItem}),react.createElement(Nav_NavSeperator,null),react.createElement(Nav_SubmenuItem,{text:"New",icon:"",href:"/tickets/new",active:"tickets-new"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Pending",icon:"",href:"/tickets/pending",active:"tickets-pending"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Open",icon:"",href:"/tickets/open",active:"tickets-open"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Closed",icon:"",href:"/tickets/closed",active:"tickets-closed"===activeSubItem}))),react.createElement(SidebarItem,{text:"Messages",icon:"chat",href:"/messages",class:"navMessages",active:"messages"===activeItem}),sessionUser&&helpers_default().canUser("accounts:view")&&react.createElement(SidebarItem,{text:"Accounts",icon:"",href:"/accounts",class:"navAccounts",active:"accounts"===activeItem,subMenuTarget:"accounts",hasSubmenu:sessionUser&&helpers_default().canUser("agent:*",!0)},sessionUser&&helpers_default().canUser("agent:*",!0)&&react.createElement(Nav_Submenu,{id:"accounts"},react.createElement(Nav_SubmenuItem,{href:"/accounts/customers",text:"Customers",icon:"account_box",active:"accounts-customers"===activeSubItem}),sessionUser&&helpers_default().canUser("agent:*",!0)&&react.createElement(Nav_SubmenuItem,{href:"/accounts/agents",text:"Agents",icon:"account_circle",active:"accounts-agents"===activeSubItem}),sessionUser&&helpers_default().canUser("admin:*")&&react.createElement(Nav_SubmenuItem,{href:"/accounts/admins",text:"Admins",icon:"how_to_reg",active:"accounts-admins"===activeSubItem}))),sessionUser&&helpers_default().canUser("groups:view")&&react.createElement(SidebarItem,{text:"Customer Groups",icon:"supervisor_account",href:"/groups",class:"navGroups",active:"groups"===activeItem}),sessionUser&&helpers_default().canUser("teams:view")&&react.createElement(SidebarItem,{text:"Teams",icon:"wc",href:"/teams",class:"navTeams",active:"teams"===activeItem}),sessionUser&&helpers_default().canUser("departments:view")&&react.createElement(SidebarItem,{text:"Departments",icon:"domain",href:"/departments",class:"navTeams",active:"departments"===activeItem}),sessionUser&&helpers_default().canUser("reports:view")&&react.createElement(SidebarItem,{text:"Reports",icon:"assessment",href:"/reports/generate",class:"navReports no-ajaxy",hasSubmenu:!0,subMenuTarget:"reports",active:"reports"===activeItem},react.createElement(Nav_Submenu,{id:"reports"},react.createElement(Nav_SubmenuItem,{text:"Generate",icon:"timeline",href:"/reports/generate",active:"reports-generate"===activeSubItem}))),sessionUser&&helpers_default().canUser("notices:view")&&react.createElement(SidebarItem,{text:"Notices",icon:"campaign",href:"/notices",class:"navNotices",active:"notices"===activeItem}),sessionUser&&helpers_default().canUser("settings:edit")&&react.createElement(SidebarItem,{text:"Settings",icon:"settings",href:"/settings/general",class:"navSettings no-ajaxy",hasSubmenu:!0,subMenuTarget:"settings",active:"settings"===activeItem},react.createElement(Nav_Submenu,{id:"settings"},react.createElement(Nav_SubmenuItem,{text:"General",icon:"tune",href:"/settings",active:"settings-general"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Accounts",icon:"tune",href:"/settings/accounts",active:"settings-accounts"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Appearance",icon:"style",href:"/settings/appearance",active:"settings-appearance"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Tickets",icon:"assignment",href:"/settings/tickets",active:"settings-tickets"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Permissions",icon:"security",href:"/settings/permissions",active:"settings-permissions"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Mailer",icon:"email",href:"/settings/mailer",active:"settings-mailer"===activeSubItem}),react.createElement(Nav_SubmenuItem,{href:"/settings/elasticsearch",text:"Elasticsearch",icon:"search",active:"settings-elasticsearch"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Backup/Restore",icon:"archive",href:"/settings/backup",active:"settings-backup"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Server",icon:"dns",href:"/settings/server",active:"settings-server"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Legal",icon:"gavel",href:"/settings/legal",active:"settings-legal"===activeSubItem}),sessionUser&&helpers_default().canUser("settings:logs")&&react.createElement(Nav_SubmenuItem,{text:"Logs",icon:"remove_from_queue",href:"/settings/logs",hasSeperator:!0,active:"settings-logs"===activeSubItem}))),react.createElement(Nav_NavSeperator,null),react.createElement(SidebarItem,{href:"/about",icon:"help",text:"About",active:"about"===activeItem}))),react.createElement("div",{className:"side-nav-bottom-panel"},react.createElement("a",{id:"expand-menu",className:"no-ajaxy",href:"#"},react.createElement("i",{className:"material-icons"},"menu"),"Collapse Menu")))}}])&&Sidebar_defineProperties(Constructor.prototype,protoProps),staticProps&&Sidebar_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Sidebar}(react.Component);Sidebar.propTypes={updateNavChange:prop_types_default().func.isRequired,activeItem:prop_types_default().string.isRequired,activeSubItem:prop_types_default().string.isRequired,sessionUser:prop_types_default().object,plugins:prop_types_default().array,notice:prop_types_default().object};const Nav_Sidebar=(0,es.$j)((function(state){return{activeItem:state.sidebar.activeItem,activeSubItem:state.sidebar.activeSubItem,sessionUser:state.shared.sessionUser,notice:state.shared.notice}}),{updateNavChange})(Sidebar);function Button_typeof(obj){return Button_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Button_typeof(obj)}function Button_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Button_setPrototypeOf(o,p){return Button_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Button_setPrototypeOf(o,p)}function Button_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Button_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Button_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Button_possibleConstructorReturn(this,result)}}function Button_possibleConstructorReturn(self,call){if(call&&("object"===Button_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Button_getPrototypeOf(o){return Button_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Button_getPrototypeOf(o)}var Button=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Button_setPrototypeOf(subClass,superClass)}(Button,_React$Component);var Constructor,protoProps,staticProps,_super=Button_createSuper(Button);function Button(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Button),_super.call(this,props)}return Constructor=Button,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.waves()}},{key:"click",value:function(){this.button&&this.button.click()}},{key:"render",value:function(){var _this=this,_this$props=this.props,type=_this$props.type,small=_this$props.small,flat=_this$props.flat,style=_this$props.style,text=_this$props.text,icon=_this$props.icon,onClick=_this$props.onClick,waves=_this$props.waves,disabled=_this$props.disabled,extraClass=_this$props.extraClass,styleOverride=_this$props.styleOverride,hasDropdown=_this$props.hasDropdown,classBuild=(small?" md-btn-small ":"")+(flat?" md-btn-flat ":"")+(waves?" md-btn-wave ":"")+(style&&style&&flat?" md-btn-flat-"+style:style?" md-btn-"+style:"")+(disabled?" disabled ":"")+" "+extraClass,renderStyleOverride=styleOverride;return small&&(renderStyleOverride?(0,lodash.merge)(renderStyleOverride,{maxHeight:"27px"}):renderStyleOverride={maxHeight:"27px"},hasDropdown&&(0,lodash.merge)(renderStyleOverride,{paddingRight:"12px"}),icon&&(0,lodash.merge)(renderStyleOverride,{padding:"0 10px"})),react.createElement("button",{className:"uk-clearfix md-btn"+classBuild,onClick,type:type||"button",disabled,style:renderStyleOverride,ref:function(r){return _this.button=r}},icon&&react.createElement("i",{className:"material-icons",style:{fontSize:"18px",margin:"5px 0"}},icon),text&&react.createElement("div",{className:"uk-float-left uk-width-1-1 uk-text-center"}," ",text),hasDropdown&&react.createElement("i",{className:"material-icons",style:{fontSize:"18px",margin:"5px 0 0 5px"}},""))}}])&&Button_defineProperties(Constructor.prototype,protoProps),staticProps&&Button_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Button}(react.Component);Button.propTypes={type:prop_types_default().string,text:prop_types_default().string,icon:prop_types_default().string,flat:prop_types_default().bool,style:prop_types_default().string,styleOverride:prop_types_default().object,hasDropdown:prop_types_default().bool,small:prop_types_default().bool,waves:prop_types_default().bool,disabled:prop_types_default().bool,extraClass:prop_types_default().string,onClick:prop_types_default().func},Button.defaultProps={disabled:!1,hasDropdown:!1,flat:!1,waves:!0,type:"button"};const components_Button=Button;function BaseModal_typeof(obj){return BaseModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},BaseModal_typeof(obj)}function BaseModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function BaseModal_setPrototypeOf(o,p){return BaseModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},BaseModal_setPrototypeOf(o,p)}function BaseModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=BaseModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=BaseModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return BaseModal_possibleConstructorReturn(this,result)}}function BaseModal_possibleConstructorReturn(self,call){if(call&&("object"===BaseModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return BaseModal_assertThisInitialized(self)}function BaseModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function BaseModal_getPrototypeOf(o){return BaseModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},BaseModal_getPrototypeOf(o)}var BaseModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&BaseModal_setPrototypeOf(subClass,superClass)}(BaseModal,_React$Component);var Constructor,protoProps,staticProps,_super=BaseModal_createSuper(BaseModal);function BaseModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BaseModal),(_this=_super.call(this,props)).state={modal:null},_this.clearModal=_this.clearModal.bind(BaseModal_assertThisInitialized(_this)),_this}return Constructor=BaseModal,(protoProps=[{key:"componentDidMount",value:function(){var _this2=this;this.setState({modal:uikit_combined_min_default().modal(this.modal,this.props.options)},(function(){_this2.state.modal.show(),jquery_default()(_this2.modal).on("hide.uk.modal",_this2.clearModal)}))}},{key:"show",value:function(){this.state.modal&&this.state.modal.show()}},{key:"hide",value:function(){this.props.hideModal()}},{key:"clearModal",value:function(){this.props.clearModal()}},{key:"render",value:function(){var _this3=this;return react.createElement("div",{id:"uk-modal",className:"uk-modal"+(this.props.parentExtraClass?" "+this.props.parentExtraClass:""),ref:function(i){return _this3.modal=i},"data-modal-tag":this.props.modalTag},react.createElement("div",{className:"uk-modal-dialog"+(this.props.large?" uk-modal-dialog-large":"")+(this.props.extraClass?" "+this.props.extraClass:"")},this.props.children))}}])&&BaseModal_defineProperties(Constructor.prototype,protoProps),staticProps&&BaseModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),BaseModal}(react.Component);BaseModal.propTypes={large:prop_types_default().bool,options:prop_types_default().object,modalTag:prop_types_default().string,hideModal:prop_types_default().func.isRequired,clearModal:prop_types_default().func.isRequired,parentExtraClass:prop_types_default().string,extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const Modals_BaseModal=(0,es.$j)(null,{hideModal,clearModal})(BaseModal);function NoticeAlertModal_typeof(obj){return NoticeAlertModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},NoticeAlertModal_typeof(obj)}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function NoticeAlertModal_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function NoticeAlertModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NoticeAlertModal_setPrototypeOf(o,p){return NoticeAlertModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},NoticeAlertModal_setPrototypeOf(o,p)}function NoticeAlertModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=NoticeAlertModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NoticeAlertModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NoticeAlertModal_possibleConstructorReturn(this,result)}}function NoticeAlertModal_possibleConstructorReturn(self,call){if(call&&("object"===NoticeAlertModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NoticeAlertModal_getPrototypeOf(o){return NoticeAlertModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},NoticeAlertModal_getPrototypeOf(o)}var NoticeAlertModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NoticeAlertModal_setPrototypeOf(subClass,superClass)}(NoticeAlertModal,_React$Component);var Constructor,protoProps,staticProps,_super=NoticeAlertModal_createSuper(NoticeAlertModal);function NoticeAlertModal(){return NoticeAlertModal_classCallCheck(this,NoticeAlertModal),_super.apply(this,arguments)}return Constructor=NoticeAlertModal,(protoProps=[{key:"onConfirmClick",value:function(e){e.preventDefault();var expiresDate=new Date;expiresDate.setDate(expiresDate.getDate()+1),js_cookie_default().set(this.props.noticeCookieName,"false",{expires:expiresDate}),this.props.hideModal("NOTICE_ALERT")}},{key:"render",value:function(){var _this=this,_this$props=this.props,notice=_this$props.notice,dateFormat=_this$props.shortDateFormat+", "+_this$props.timeFormat;return react.createElement(Modals_BaseModal,_extends({},this.props,{options:{bgclose:!1},large:!0}),react.createElement("div",null,react.createElement("div",{style:{width:"100%",height:"50px",backgroundColor:notice.color,marginBottom:"5px",position:"absolute",top:0,left:0,padding:"7px 25px"}},react.createElement("h4",{style:{fontSize:"24px",marginTop:"7px",fontWeight:"300",color:notice.fontColor}},notice.name)),react.createElement("div",{style:{paddingBottom:"25px"}},react.createElement("p",{style:{marginTop:"50px",color:"#222",fontSize:"18px",paddingBottom:"15px"}},helpers_default().formatDate(notice.activeDate,dateFormat),react.createElement("br",null),"Important: ",notice.message),react.createElement(components_Button,{text:"Confirm",flat:!0,style:"success",extraClass:"uk-float-right",styleOverride:{marginBottom:0},waves:!0,onClick:function(e){return _this.onConfirmClick(e)}}))))}}])&&NoticeAlertModal_defineProperties(Constructor.prototype,protoProps),staticProps&&NoticeAlertModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NoticeAlertModal}(react.Component);NoticeAlertModal.propTypes={notice:prop_types_default().object.isRequired,noticeCookieName:prop_types_default().string.isRequired,shortDateFormat:prop_types_default().string.isRequired,timeFormat:prop_types_default().string.isRequired,hideModal:prop_types_default().func.isRequired};const Modals_NoticeAlertModal=(0,es.$j)(null,{hideModal})(NoticeAlertModal),tickets_fetchTickets=(0,createAction.Z)(FETCH_TICKETS.ACTION),tickets_createTicket=(0,createAction.Z)(CREATE_TICKET.ACTION),tickets_ticketUpdated=(0,createAction.Z)(TICKET_UPDATED.ACTION),tickets_deleteTicket=(0,createAction.Z)(DELETE_TICKET.ACTION),unloadTickets=(0,createAction.Z)(UNLOAD_TICKETS.ACTION,(payload=>payload),(()=>({thunk:!0}))),tickets_ticketEvent=(0,createAction.Z)(TICKET_EVENT.ACTION),tickets_createTicketType=(0,createAction.Z)(CREATE_TICKET_TYPE.ACTION,(input=>({name:input.name}))),tickets_deleteTicketType=((0,createAction.Z)(RENAME_TICKET_TYPE.ACTION,(input=>({name:input.name}))),(0,createAction.Z)(DELETE_TICKET_TYPE.ACTION,((id,newTypeId)=>({id,newTypeId})))),tickets_fetchPriorities=(0,createAction.Z)(FETCH_PRIORITIES.ACTION,(payload=>payload),(()=>({thunk:!0}))),tickets_createPriority=(0,createAction.Z)(CREATE_PRIORITY.ACTION,(({name,overdueIn,htmlColor})=>({name,overdueIn,htmlColor}))),tickets_updatePriority=(0,createAction.Z)(UPDATE_PRIORITY.ACTION,(({id,name,overdueIn,htmlColor})=>({id,name,overdueIn,htmlColor}))),tickets_deletePriority=(0,createAction.Z)(DELETE_PRIORITY.ACTION,(({id,newPriority})=>({id,newPriority}))),tickets_getTagsWithPage=(0,createAction.Z)(GET_TAGS_WITH_PAGE.ACTION,(({limit,page})=>({limit,page}))),tagsUpdateCurrentPage=(0,createAction.Z)(TAGS_UPDATE_CURRENT_PAGE.ACTION,(currentPage=>({currentPage}))),tickets_createTag=(0,createAction.Z)(CREATE_TAG.ACTION,(({name,currentPage})=>({name,currentPage}))),tickets_transferToThirdParty=(0,createAction.Z)(TRANSFER_TO_THIRDPARTY.ACTION,(({uid})=>({uid}))),tickets_fetchTicketTypes=(0,createAction.Z)(FETCH_TICKET_TYPES.ACTION);function CreateTicketTypeModal_typeof(obj){return CreateTicketTypeModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateTicketTypeModal_typeof(obj)}function CreateTicketTypeModal_extends(){return CreateTicketTypeModal_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},CreateTicketTypeModal_extends.apply(this,arguments)}function CreateTicketTypeModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateTicketTypeModal_setPrototypeOf(o,p){return CreateTicketTypeModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},CreateTicketTypeModal_setPrototypeOf(o,p)}function CreateTicketTypeModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateTicketTypeModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateTicketTypeModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateTicketTypeModal_possibleConstructorReturn(this,result)}}function CreateTicketTypeModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateTicketTypeModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function CreateTicketTypeModal_getPrototypeOf(o){return CreateTicketTypeModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateTicketTypeModal_getPrototypeOf(o)}var CreateTicketTypeModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateTicketTypeModal_setPrototypeOf(subClass,superClass)}(CreateTicketTypeModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateTicketTypeModal_createSuper(CreateTicketTypeModal);function CreateTicketTypeModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateTicketTypeModal),(_this=_super.call(this,props)).state={typeName:""},_this}return Constructor=CreateTicketTypeModal,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs(),helpers_default().formvalidator()}},{key:"onTypeNameChanged",value:function(e){this.setState({typeName:e.target.value})}},{key:"onCreateTicketTypeSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!0;this.props.createTicketType({name:this.state.typeName})}},{key:"render",value:function(){var _this2=this;return react.createElement(Modals_BaseModal,CreateTicketTypeModal_extends({},this.props,{ref:function(i){return _this2.base=i}}),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onCreateTicketTypeSubmit(e)}},react.createElement("div",null,react.createElement("h2",{className:"nomargin mb-5"},"Create Ticket Type"),react.createElement("p",{className:"uk-text-small uk-text-muted"},"Create a ticket type"),react.createElement("label",{htmlFor:"typeName"},"Type name"),react.createElement("input",{value:this.state.typeName,onChange:function(e){return _this2.onTypeNameChanged(e)},type:"text",className:"md-input",name:"typeName","data-validation":"length","data-validation-length":"min3","data-validation-error-msg":"Please enter a valid type name. Type name must contain at least 3 characters"})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Create",style:"success",type:"submit"}))))}}])&&CreateTicketTypeModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateTicketTypeModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateTicketTypeModal}(react.Component);CreateTicketTypeModal.propTypes={onTypeCreated:prop_types_default().func,createTicketType:prop_types_default().func.isRequired};const Modals_CreateTicketTypeModal=(0,es.$j)(null,{createTicketType:tickets_createTicketType})(CreateTicketTypeModal);function SingleSelect_typeof(obj){return SingleSelect_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SingleSelect_typeof(obj)}function SingleSelect_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SingleSelect_setPrototypeOf(o,p){return SingleSelect_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},SingleSelect_setPrototypeOf(o,p)}function SingleSelect_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SingleSelect_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SingleSelect_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SingleSelect_possibleConstructorReturn(this,result)}}function SingleSelect_possibleConstructorReturn(self,call){if(call&&("object"===SingleSelect_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return SingleSelect_assertThisInitialized(self)}function SingleSelect_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function SingleSelect_getPrototypeOf(o){return SingleSelect_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},SingleSelect_getPrototypeOf(o)}var SingleSelect=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SingleSelect_setPrototypeOf(subClass,superClass)}(SingleSelect,_React$Component);var Constructor,protoProps,staticProps,_super=SingleSelect_createSuper(SingleSelect);function SingleSelect(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SingleSelect),(_this=_super.call(this,props)).value="",_this.props.defaultValue&&(_this.value=_this.props.defaultValue),_this.onSelectChange=_this.onSelectChange.bind(SingleSelect_assertThisInitialized(_this)),_this}return Constructor=SingleSelect,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.selectize();var $select=jquery_default()(this.select);this.updateSelectizeItems(),$select.on("change",this.onSelectChange),this.props.multiple&&(this.value=[]),this.props.defaultValue&&(this.value=this.props.defaultValue)}},{key:"componentWillUnmount",value:function(){var selectize=this.select.selectize;selectize&&selectize.destroy()}},{key:"onSelectChange",value:function(e){if(""===e.target.value){if(!this.props.onSelectChange||!this.props.multiple)return;this.props.onSelectChange(e,[])}this.props.multiple?this.value=this.select.selectize.items:this.value=e.target.value,this.value&&this.props.onSelectChange&&this.props.onSelectChange(e,this.value)}},{key:"componentDidUpdate",value:function(prevProps){prevProps.defaultValue===this.props.defaultValue||this.value||(this.value=this.props.defaultValue),this.updateSelectizeItems()}},{key:"updateSelectizeItems",value:function(){if(this.select&&this.select.selectize){var self=this;(0,lodash.each)(this.select.selectize.options,(function(i){-1===(0,lodash.findIndex)(self.props.items,(function(o){return i.value===o.value}))&&self.select.selectize.removeOption(i.value,!0)})),this.select.selectize.addOption(this.props.items),this.select.selectize.refreshOptions(!1),this.select.selectize.addItem(this.value,!0),(0,lodash.each)(this.props.items,(function(i){self.select.selectize.updateOption(i.value,i)})),this.props.disabled?this.select.selectize.disable():this.select.selectize.enable()}}},{key:"render",value:function(){var _this2=this,width="100%";this.props.width&&(width=this.props.width);var value=this.props.multiple&&!(0,lodash.isArray)(this.value)?[this.value]:this.value;return react.createElement("div",{className:"uk-clearfix"},react.createElement("div",{className:"uk-width-1-1 uk-float-right",style:{paddingRight:"10px",width}},react.createElement("select",{className:"selectize",ref:function(select){_this2.select=select},"data-md-selectize-inline":!0,"data-md-selectize-notextbox":this.props.showTextbox?"false":"true",value,onChange:function(){},disabled:this.props.disabled,"data-md-selectize-bottom":"true",multiple:this.props.multiple,"data-md-selectize-top-offset":"-32"})))}}])&&SingleSelect_defineProperties(Constructor.prototype,protoProps),staticProps&&SingleSelect_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SingleSelect}(react.Component);SingleSelect.propTypes={width:prop_types_default().string,items:prop_types_default().arrayOf(prop_types_default().object).isRequired,multiple:prop_types_default().bool,showTextbox:prop_types_default().bool,defaultValue:prop_types_default().string,disabled:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),onSelectChange:prop_types_default().func},SingleSelect.defaultProps={showTextbox:!0,disabled:!1,multiple:!1};const components_SingleSelect=SingleSelect;function DeleteTicketTypeModal_typeof(obj){return DeleteTicketTypeModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DeleteTicketTypeModal_typeof(obj)}function DeleteTicketTypeModal_extends(){return DeleteTicketTypeModal_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},DeleteTicketTypeModal_extends.apply(this,arguments)}function DeleteTicketTypeModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DeleteTicketTypeModal_setPrototypeOf(o,p){return DeleteTicketTypeModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},DeleteTicketTypeModal_setPrototypeOf(o,p)}function DeleteTicketTypeModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DeleteTicketTypeModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DeleteTicketTypeModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DeleteTicketTypeModal_possibleConstructorReturn(this,result)}}function DeleteTicketTypeModal_possibleConstructorReturn(self,call){if(call&&("object"===DeleteTicketTypeModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DeleteTicketTypeModal_getPrototypeOf(o){return DeleteTicketTypeModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},DeleteTicketTypeModal_getPrototypeOf(o)}var DeleteTicketTypeModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DeleteTicketTypeModal_setPrototypeOf(subClass,superClass)}(DeleteTicketTypeModal,_React$Component);var Constructor,protoProps,staticProps,_super=DeleteTicketTypeModal_createSuper(DeleteTicketTypeModal);function DeleteTicketTypeModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DeleteTicketTypeModal),(_this=_super.call(this,props)).state={selectedType:""},_this}return Constructor=DeleteTicketTypeModal,(protoProps=[{key:"getTicketTypes",value:function(){return this.props.settings&&this.props.settings.get("ticketTypes")?this.props.settings.get("ticketTypes").toArray():[]}},{key:"onSelectChanged",value:function(e){this.setState({selectedType:e.target.value})}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!this.state.selectedType)return helpers_default().UI.showSnackbar("Unable to get new ticket type. Aborting...",!0),!0;this.props.deleteTicketType(this.props.type.get("_id"),this.state.selectedType)}},{key:"render",value:function(){var _this2=this,type=this.props.type,mappedTypes=this.getTicketTypes().filter((function(obj){return type.get("name")!==obj.get("name")})).map((function(item){return{text:item.get("name"),value:item.get("_id")}}));return react.createElement(Modals_BaseModal,DeleteTicketTypeModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("h2",null,"Remove Ticket Type"),react.createElement("span",null,"Please select the ticket type you wish to reassign tickets to in order to delete this ticket type.")),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"100%"}},react.createElement("label",{className:"uk-form-label nopadding nomargin"},"Type"),react.createElement(components_SingleSelect,{showTextbox:!1,items:mappedTypes,onSelectChange:function(e){return _this2.onSelectChanged(e)},value:this.state.selectedType}))),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("span",{className:"uk-text-danger"},"WARNING: This will change all tickets with type ",react.createElement("strong",null,type.get("name"))," to the selected ticket type.",react.createElement("br",null),react.createElement("strong",null,"This is permanent!"))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Cancel",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Delete",style:"danger",flat:!0,type:"submit"}))))}}])&&DeleteTicketTypeModal_defineProperties(Constructor.prototype,protoProps),staticProps&&DeleteTicketTypeModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DeleteTicketTypeModal}(react.Component);DeleteTicketTypeModal.propTypes={type:prop_types_default().object.isRequired,settings:prop_types_default().object.isRequired,deleteTicketType:prop_types_default().func.isRequired};const Modals_DeleteTicketTypeModal=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{deleteTicketType:tickets_deleteTicketType})(DeleteTicketTypeModal),groups_fetchGroups=(0,createAction.Z)(FETCH_GROUPS.ACTION,(payload=>payload),(()=>({thunk:!0}))),groups_createGroup=(0,createAction.Z)(CREATE_GROUP.ACTION),groups_updateGroup=(0,createAction.Z)(UPDATE_GROUP.ACTION),groups_deleteGroup=(0,createAction.Z)(DELETE_GROUP.ACTION,(payload=>payload),(()=>({thunk:!0}))),unloadGroups=(0,createAction.Z)(UNLOAD_GROUPS.ACTION,(payload=>payload),(()=>({thunk:!0})));function FilterTicketsModal_typeof(obj){return FilterTicketsModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},FilterTicketsModal_typeof(obj)}function FilterTicketsModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function FilterTicketsModal_setPrototypeOf(o,p){return FilterTicketsModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},FilterTicketsModal_setPrototypeOf(o,p)}function FilterTicketsModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=FilterTicketsModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=FilterTicketsModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return FilterTicketsModal_possibleConstructorReturn(this,result)}}function FilterTicketsModal_possibleConstructorReturn(self,call){if(call&&("object"===FilterTicketsModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function FilterTicketsModal_getPrototypeOf(o){return FilterTicketsModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},FilterTicketsModal_getPrototypeOf(o)}var FilterTicketsModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&FilterTicketsModal_setPrototypeOf(subClass,superClass)}(FilterTicketsModal,_React$Component);var Constructor,protoProps,staticProps,_super=FilterTicketsModal_createSuper(FilterTicketsModal);function FilterTicketsModal(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FilterTicketsModal),_super.call(this,props)}return Constructor=FilterTicketsModal,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs(),this.props.fetchGroups(),this.props.fetchAccounts({page:0,limit:-1,type:"agents",showDeleted:!1}),this.props.getTagsWithPage({limit:-1}),this.props.fetchTicketTypes()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadGroups(),this.props.unloadAccounts()}},{key:"onSubmit",value:function(e){e.preventDefault();var startDate=e.target.filterDate_Start.value,endDate=e.target.filterDate_End.value,subject=e.target.subject.value,statuses=this.statusSelect.value,tags=this.tagsSelect.value,types=this.typesSelect.value,groups=this.groupSelect.value,assignees=this.assigneeSelect.value,queryString="?f=1";startDate&&(queryString+="&ds=".concat(startDate)),endDate&&(queryString+="&de=".concat(endDate)),subject&&(queryString+="&fs=".concat(subject)),(0,lodash.each)(statuses,(function(i){queryString+="&st=".concat(i)})),(0,lodash.each)(types,(function(i){queryString+="&tt=".concat(i)})),(0,lodash.each)(tags,(function(i){queryString+="&tag=".concat(i)})),(0,lodash.each)(groups,(function(i){queryString+="&gp=".concat(i)})),(0,lodash.each)(assignees,(function(i){queryString+="&au=".concat(i)})),History.pushState(null,null,"/tickets/filter/".concat(queryString,"&r=").concat(Math.floor(99999*Math.random())+1)),this.props.hideModal()}},{key:"render",value:function(){var _this=this,tags=this.props.ticketTags.map((function(t){return{text:t.get("name"),value:t.get("_id")}})).toArray(),types=this.props.ticketTypes.map((function(t){return{text:t.get("name"),value:t.get("_id")}})).toArray(),groups=this.props.groupsState.groups.map((function(g){return{text:g.get("name"),value:g.get("_id")}})).toArray(),assignees=this.props.accountsState.accounts.map((function(a){return{text:a.get("fullname"),value:a.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,{options:{bgclose:!1}},react.createElement("h2",{style:{marginBottom:20}},"Ticket Filter"),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this.onSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Subject"),react.createElement("input",{type:"text",name:"subject",className:"md-input"})),react.createElement("div",{className:"uk-grid uk-grid-collapse uk-margin-small-bottom"},react.createElement("div",{className:"uk-width-1-2",style:{padding:"0 15px 0 0"}},react.createElement("label",{htmlFor:"filterDate_Start",className:"uk-form-label nopadding nomargin"},"Date Start"),react.createElement("input",{id:"filterDate_Start",className:"md-input",name:"filterDate_Start",type:"text","data-uk-datepicker":"{format:'"+helpers_default().getShortDateFormat()+"'}"})),react.createElement("div",{className:"uk-width-1-2",style:{padding:"0 0 0 15px"}},react.createElement("label",{htmlFor:"filterDate_End",className:"uk-form-label nopadding nomargin"},"Date End"),react.createElement("input",{id:"filterDate_End",className:"md-input",name:"filterDate_End",type:"text","data-uk-datepicker":"{format:'"+helpers_default().getShortDateFormat()+"'}"}))),react.createElement("div",{className:"uk-grid uk-grid-collapse uk-margin-small-bottom"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("label",{htmlFor:"filterStatus",className:"uk-form-label",style:{paddingBottom:0,marginBottom:0}},"Status"),react.createElement(components_SingleSelect,{items:[{text:"New",value:"0"},{text:"Open",value:"1"},{text:"Pending",value:"2"},{text:"Closed",value:"3"}],showTextbox:!1,multiple:!0,ref:function(r){return _this.statusSelect=r}}))),react.createElement("div",{className:"uk-grid uk-grid-collapse uk-margin-small-bottom"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("label",{htmlFor:"filterStatus",className:"uk-form-label",style:{paddingBottom:0,marginBottom:0}},"Ticket Tags"),react.createElement(components_SingleSelect,{items:tags,showTextbox:!0,multiple:!0,ref:function(r){return _this.tagsSelect=r}}))),react.createElement("div",{className:"uk-grid uk-grid-collapse uk-margin-small-bottom"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("label",{htmlFor:"filterStatus",className:"uk-form-label",style:{paddingBottom:0,marginBottom:0}},"Ticket Type"),react.createElement(components_SingleSelect,{items:types,showTextbox:!1,multiple:!0,ref:function(r){return _this.typesSelect=r}}))),react.createElement("div",{className:"uk-grid uk-grid-collapse uk-margin-small-bottom"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("label",{htmlFor:"filterStatus",className:"uk-form-label",style:{paddingBottom:0,marginBottom:0}},"Assignee"),react.createElement(components_SingleSelect,{items:assignees,showTextbox:!1,multiple:!0,ref:function(r){return _this.assigneeSelect=r}}))),react.createElement("div",{className:"uk-grid uk-grid-collapse uk-margin-small-bottom"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("label",{htmlFor:"filterStatus",className:"uk-form-label",style:{paddingBottom:0,marginBottom:0}},"Groups"),react.createElement(components_SingleSelect,{items:groups,showTextbox:!1,multiple:!0,ref:function(r){return _this.groupSelect=r}}))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Cancel",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Apply Filter",style:"primary",flat:!1,type:"submit"}))))}}])&&FilterTicketsModal_defineProperties(Constructor.prototype,protoProps),staticProps&&FilterTicketsModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),FilterTicketsModal}(react.Component);FilterTicketsModal.propTypes={viewdata:prop_types_default().object.isRequired,groupsState:prop_types_default().object.isRequired,accountsState:prop_types_default().object.isRequired,hideModal:prop_types_default().func.isRequired,fetchGroups:prop_types_default().func.isRequired,unloadGroups:prop_types_default().func.isRequired,fetchAccounts:prop_types_default().func.isRequired,unloadAccounts:prop_types_default().func.isRequired,getTagsWithPage:prop_types_default().func.isRequired,ticketTags:prop_types_default().object.isRequired,fetchTicketTypes:prop_types_default().func.isRequired,ticketTypes:prop_types_default().object.isRequired};const Modals_FilterTicketsModal=(0,es.$j)((function(state){return{viewdata:state.common.viewdata,groupsState:state.groupsState,accountsState:state.accountsState,ticketTags:state.tagsSettings.tags,ticketTypes:state.ticketsState.types}}),{hideModal,fetchGroups:groups_fetchGroups,unloadGroups,fetchAccounts:accounts_fetchAccounts,unloadAccounts,getTagsWithPage:tickets_getTagsWithPage,fetchTicketTypes:tickets_fetchTicketTypes})(FilterTicketsModal);var some=__webpack_require__(427),some_default=__webpack_require__.n(some),velocity_min=__webpack_require__(11),velocity_min_default=__webpack_require__.n(velocity_min);const settings_fetchSettings=(0,createAction.Z)(FETCH_SETTINGS.ACTION),settings_updateSetting=(0,createAction.Z)(UPDATE_SETTING.ACTION,(input=>({name:input.name,value:input.value,stateName:input.stateName,noSnackbar:!!input.noSnackbar&&input.noSnackbar})),(()=>({thunk:!0}))),settings_updateMultipleSettings=(0,createAction.Z)(UPDATE_MULTIPLE_SETTINGS.ACTION),settings_updateColorScheme=(0,createAction.Z)(UPDATE_COLORSCHEME.ACTION),fetchMongoDBTools=(0,createAction.Z)(FETCH_MONGODB_TOOLS.ACTION),settings_fetchBackups=(0,createAction.Z)(FETCH_BACKUPS.ACTION),settings_backupNow=(0,createAction.Z)(BACKUP_NOW.ACTION),settings_fetchDeletedTickets=(0,createAction.Z)(FETCH_DELETED_TICKETS.ACTION),settings_restoreDeletedTicket=(0,createAction.Z)(RESTORE_DELETED_TICKET.ACTION),settings_permDeleteTicket=(0,createAction.Z)(PERM_DELETE_TICKET.ACTION),changeDeletedTicketsPage=(0,createAction.Z)(CHANGE_DELETED_TICKETS_PAGE.ACTION,(pageIndex=>({pageIndex}))),settings_createRole=(0,createAction.Z)(CREATE_ROLE.ACTION),settings_updatePermissions=(0,createAction.Z)(UPDATE_PERMISSIONS.ACTION),settings_deleteRole=(0,createAction.Z)(DELETE_ROLE.ACTION);function AddPriorityToTypeModal_typeof(obj){return AddPriorityToTypeModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},AddPriorityToTypeModal_typeof(obj)}function AddPriorityToTypeModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function AddPriorityToTypeModal_setPrototypeOf(o,p){return AddPriorityToTypeModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},AddPriorityToTypeModal_setPrototypeOf(o,p)}function AddPriorityToTypeModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=AddPriorityToTypeModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=AddPriorityToTypeModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return AddPriorityToTypeModal_possibleConstructorReturn(this,result)}}function AddPriorityToTypeModal_possibleConstructorReturn(self,call){if(call&&("object"===AddPriorityToTypeModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function AddPriorityToTypeModal_getPrototypeOf(o){return AddPriorityToTypeModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},AddPriorityToTypeModal_getPrototypeOf(o)}var AddPriorityToTypeModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&AddPriorityToTypeModal_setPrototypeOf(subClass,superClass)}(AddPriorityToTypeModal,_React$Component);var Constructor,protoProps,staticProps,_super=AddPriorityToTypeModal_createSuper(AddPriorityToTypeModal);function AddPriorityToTypeModal(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AddPriorityToTypeModal),_super.call(this,props)}return Constructor=AddPriorityToTypeModal,(protoProps=[{key:"getPriorities",value:function(){return this.props.settings&&this.props.settings.get("priorities")?this.props.settings.get("priorities").toArray():[]}},{key:"onAddClick",value:function(e,type,priority){var _this=this;e.preventDefault();var $addButton=jquery_default()(e.target),$check=$addButton.siblings("i.material-icons");client_api.tickets.addPriorityToType({typeId:type.get("_id"),priority:priority.get("_id")}).then((function(){velocity_min_default()($addButton,{opacity:0},{duration:350,complete:function(){$addButton.addClass("hide")}}),$check.length>0&&velocity_min_default()($check,{opacity:1},{delay:360,duration:200,begin:function(){$check.show()}}),_this.props.fetchSettings()})).catch((function(error){var errorText=error.response.data.error;logger.error(errorText,error.response),helpers_default().UI.showSnackbar("Error: ".concat(errorText),!0)}))}},{key:"render",value:function(){var _this2=this,type=this.props.type;return react.createElement(Modals_BaseModal,null,react.createElement("form",{className:"uk-form-stacked"},react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("h2",null,"Add Priorities"),react.createElement("span",null,"Please select the priorities you wish to add to type: ",type.get("name"))),react.createElement("div",{className:"priority-loop zone"},this.getPriorities().map((function(priority){return some_default()(type.get("priorities").toJS(),priority.toObject())?react.createElement("div",{key:priority.get("_id"),className:"z-box uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h5",{style:{color:priority.get("htmlColor"),fontWeight:"bold"}},priority.get("name")),react.createElement("p",{className:"uk-text-muted"},"SLA Overdue: ",react.createElement("strong",null,priority.get("durationFormatted")))),react.createElement("div",{className:"uk-float-right"},react.createElement("i",{className:"material-icons uk-text-success mt-10 mr-15",style:{fontSize:"28px"}},"check"))):react.createElement("div",{key:priority.get("_id"),className:"z-box uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h5",{style:{color:priority.get("htmlColor"),fontWeight:"bold"}},priority.get("name")),react.createElement("p",{className:"uk-text-muted"},"SLA Overdue: ",react.createElement("strong",null,priority.get("durationFormatted")))),react.createElement("div",{className:"uk-float-right"},react.createElement("a",{type:"button",className:"uk-button uk-button-success mt-10 mr-10 no-ajaxy",onClick:function(e){return _this2.onAddClick(e,type,priority)}},"Add"),react.createElement("i",{className:"material-icons uk-text-success mt-10 mr-15",style:{display:"none",opacity:0,fontSize:"28px"}},"check")))}))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{type:"button",flat:!0,waves:!0,text:"Close",extraClass:"uk-modal-close"}))))}}])&&AddPriorityToTypeModal_defineProperties(Constructor.prototype,protoProps),staticProps&&AddPriorityToTypeModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AddPriorityToTypeModal}(react.Component);AddPriorityToTypeModal.propTypes={settings:prop_types_default().object.isRequired,type:prop_types_default().object.isRequired,fetchSettings:prop_types_default().func.isRequired};const Modals_AddPriorityToTypeModal=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{fetchSettings:settings_fetchSettings})(AddPriorityToTypeModal);function ColorSelector_typeof(obj){return ColorSelector_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},ColorSelector_typeof(obj)}function ColorSelector_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ColorSelector_setPrototypeOf(o,p){return ColorSelector_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},ColorSelector_setPrototypeOf(o,p)}function ColorSelector_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=ColorSelector_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=ColorSelector_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return ColorSelector_possibleConstructorReturn(this,result)}}function ColorSelector_possibleConstructorReturn(self,call){if(call&&("object"===ColorSelector_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function ColorSelector_getPrototypeOf(o){return ColorSelector_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},ColorSelector_getPrototypeOf(o)}var ColorSelector=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&ColorSelector_setPrototypeOf(subClass,superClass)}(ColorSelector,_React$Component);var Constructor,protoProps,staticProps,_super=ColorSelector_createSuper(ColorSelector);function ColorSelector(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ColorSelector),(_this=_super.call(this,props)).state={selectedColor:""},_this}return Constructor=ColorSelector,staticProps=[{key:"getRandomColor",value:function(){for(var color="#",i=0;i<6;i++)color+="0123456789ABCDEF"[Math.floor(16*Math.random())];return color}},{key:"getContrast",value:function(hexcolor){if(3===(hexcolor=hexcolor.replace("#","")).length){var v=hexcolor[0];hexcolor=hexcolor+v+v+v}return(299*parseInt(hexcolor.substr(0,2),16)+587*parseInt(hexcolor.substr(2,2),16)+114*parseInt(hexcolor.substr(4,2),16))/1e3>=128?"#444":"#f7f8fa"}}],(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs(),this.setState({selectedColor:this.props.defaultColor},this.updateColorButton)}},{key:"componentDidUpdate",value:function(prevProps){this.props.defaultColor!==prevProps.defaultColor&&this.setState({selectedColor:this.props.defaultColor},this.updateColorButton)}},{key:"generateRandomColor",value:function(event){var _this2=this;if(event.preventDefault(),jquery_default()(event.target).length>0){var color=ColorSelector.getRandomColor();this.props.onChange&&(event.target.value=color,this.props.onChange(event)),this.setState({selectedColor:color},(function(){_this2.updateColorButton()}))}}},{key:"updateColorButton",value:function(){var fgColor=ColorSelector.getContrast(this.state.selectedColor.substring(1));jquery_default()(this.colorButton).css({background:this.state.selectedColor,color:fgColor})}},{key:"onInputValueChange",value:function(e){var val=e.target.value;this.props.onChange&&this.props.onChange(e),this.setState({selectedColor:val},this.updateColorButton)}},{key:"revertColor",value:function(){this.setState({selectedColor:this.props.defaultColor},this.updateColorButton)}},{key:"render",value:function(){var _this3=this;return react.createElement("div",{className:this.props.parentClass},react.createElement("div",{className:"uk-float-left uk-width-1-4"},react.createElement("button",{ref:function(colorButton){_this3.colorButton=colorButton},className:"uk-button uk-button-small uk-color-button mr-5 mt-10",style:{float:"right"},onClick:function(e){_this3.generateRandomColor(e)}},react.createElement("i",{className:"material-icons"},"refresh"))),react.createElement("div",{className:"md-input-wrapper uk-float-left md-input-filled",style:{width:this.props.hideRevert?"70%":"50%"}},react.createElement("label",null,"Color"),this.props.validationEnabled&&react.createElement("input",{name:this.props.inputName?this.props.inputName:"",type:"text",className:"md-input",value:this.state.selectedColor,onChange:function(e){_this3.onInputValueChange(e)},"data-validation":"custom","data-validation-regexp":"^\\#([0-9a-fA-F]){3,6}$","data-validation-error-msg":"Invalid HEX Color"}),!this.props.validationEnabled&&react.createElement("input",{name:this.props.inputName?this.props.inputName:"",type:"text",className:"md-input",value:this.state.selectedColor,onChange:function(e){_this3.onInputValueChange(e)}}),react.createElement("div",{className:"md-input-bar"})),!this.props.hideRevert&&react.createElement("button",{className:"md-btn md-btn-small md-btn-flat mt-10 uk-float-right uk-width-1-4",onClick:function(){_this3.revertColor()}},"Revert"))}}])&&ColorSelector_defineProperties(Constructor.prototype,protoProps),staticProps&&ColorSelector_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ColorSelector}(react.Component);ColorSelector.propTypes={inputName:prop_types_default().string,defaultColor:prop_types_default().string.isRequired,hideRevert:prop_types_default().bool,parentClass:prop_types_default().string,onChange:prop_types_default().func,validationEnabled:prop_types_default().bool},ColorSelector.defaultProps={defaultColor:"#878982",hideRevert:!1,validationEnabled:!1};const components_ColorSelector=ColorSelector;function CreatePriorityModal_typeof(obj){return CreatePriorityModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreatePriorityModal_typeof(obj)}var CreatePriorityModal_class,CreatePriorityModal_class2,CreatePriorityModal_descriptor,CreatePriorityModal_descriptor2,CreatePriorityModal_descriptor3;function CreatePriorityModal_extends(){return CreatePriorityModal_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},CreatePriorityModal_extends.apply(this,arguments)}function CreatePriorityModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function CreatePriorityModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreatePriorityModal_setPrototypeOf(o,p){return CreatePriorityModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},CreatePriorityModal_setPrototypeOf(o,p)}function CreatePriorityModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreatePriorityModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreatePriorityModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreatePriorityModal_possibleConstructorReturn(this,result)}}function CreatePriorityModal_possibleConstructorReturn(self,call){if(call&&("object"===CreatePriorityModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreatePriorityModal_assertThisInitialized(self)}function CreatePriorityModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreatePriorityModal_getPrototypeOf(o){return CreatePriorityModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},CreatePriorityModal_getPrototypeOf(o)}function CreatePriorityModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var CreatePriorityModal=(0,mobxreact_esm.Pi)((CreatePriorityModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreatePriorityModal_setPrototypeOf(subClass,superClass)}(CreatePriorityModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreatePriorityModal_createSuper(CreatePriorityModal);function CreatePriorityModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreatePriorityModal),CreatePriorityModal_initializerDefineProperty(_this=_super.call(this,props),"name",CreatePriorityModal_descriptor,CreatePriorityModal_assertThisInitialized(_this)),CreatePriorityModal_initializerDefineProperty(_this,"overdueIn",CreatePriorityModal_descriptor2,CreatePriorityModal_assertThisInitialized(_this)),CreatePriorityModal_initializerDefineProperty(_this,"htmlColor",CreatePriorityModal_descriptor3,CreatePriorityModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(CreatePriorityModal_assertThisInitialized(_this)),_this}return Constructor=CreatePriorityModal,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs(),helpers_default().formvalidator()}},{key:"onCreatePrioritySubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!0;this.props.createPriority({name:this.name,overdueIn:this.overdueIn,htmlColor:this.htmlColor})}},{key:"render",value:function(){var _this2=this;return react.createElement(Modals_BaseModal,CreatePriorityModal_extends({},this.props,{ref:function(i){return _this2.base=i}}),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onCreatePrioritySubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("h2",null,"Create Priority")),react.createElement("div",null,react.createElement("div",{className:"uk-clearfix"},react.createElement("div",{className:"z-box uk-grid uk-grid-collpase uk-clearfix"},react.createElement("div",{className:"uk-width-1-3"},react.createElement("label",null,"Priority Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.name=e.target.value},"data-validation":"length","data-validation-length":"min3","data-validation-error-msg":"Invalid name (3+ characters)"})),react.createElement("div",{className:"uk-width-1-3"},react.createElement("label",null,"SLA Overdue (minutes)"),react.createElement("input",{type:"text",className:"md-input",value:this.overdueIn,onChange:function(e){return _this2.overdueIn=e.target.value},"data-validation":"number","data-validation-allowing":"range[1;525600]","data-validation-error-msg":"Invalid SLA Time (1-525600)"})),react.createElement("div",{className:"uk-width-1-3"},react.createElement(components_ColorSelector,{hideRevert:!0,defaultColor:"#29B995",validationEnabled:!0,onChange:function(e){return _this2.htmlColor=e.target.value}}))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Cancel",type:"button",extraClass:"uk-modal-close",flat:!0,waves:!0}),react.createElement(components_Button,{text:"Create",type:"submit",flat:!0,waves:!0,style:"success"}))))))}}])&&CreatePriorityModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreatePriorityModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreatePriorityModal}(react.Component),CreatePriorityModal_descriptor=CreatePriorityModal_applyDecoratedDescriptor(CreatePriorityModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreatePriorityModal_descriptor2=CreatePriorityModal_applyDecoratedDescriptor(CreatePriorityModal_class2.prototype,"overdueIn",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2880}}),CreatePriorityModal_descriptor3=CreatePriorityModal_applyDecoratedDescriptor(CreatePriorityModal_class2.prototype,"htmlColor",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"#29B995"}}),CreatePriorityModal_class=CreatePriorityModal_class2))||CreatePriorityModal_class;CreatePriorityModal.propTypes={onPriorityCreated:prop_types_default().func,createPriority:prop_types_default().func.isRequired};const Modals_CreatePriorityModal=(0,es.$j)(null,{createPriority:tickets_createPriority})(CreatePriorityModal);function DeletePriorityModal_typeof(obj){return DeletePriorityModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DeletePriorityModal_typeof(obj)}function DeletePriorityModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DeletePriorityModal_setPrototypeOf(o,p){return DeletePriorityModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},DeletePriorityModal_setPrototypeOf(o,p)}function DeletePriorityModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DeletePriorityModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DeletePriorityModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DeletePriorityModal_possibleConstructorReturn(this,result)}}function DeletePriorityModal_possibleConstructorReturn(self,call){if(call&&("object"===DeletePriorityModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DeletePriorityModal_getPrototypeOf(o){return DeletePriorityModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},DeletePriorityModal_getPrototypeOf(o)}var DeletePriorityModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DeletePriorityModal_setPrototypeOf(subClass,superClass)}(DeletePriorityModal,_React$Component);var Constructor,protoProps,staticProps,_super=DeletePriorityModal_createSuper(DeletePriorityModal);function DeletePriorityModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DeletePriorityModal),(_this=_super.call(this,props)).state={selectedPriority:""},_this}return Constructor=DeletePriorityModal,(protoProps=[{key:"onSubmit",value:function(e){if(e.preventDefault(),!this.state.selectedPriority)return helpers_default().UI.showSnackbar("Unable to get new priority. Aborting...",!0),!0;this.props.deletePriority({id:this.props.priority.get("_id"),newPriority:this.state.selectedPriority})}},{key:"getPriorities",value:function(){return this.props.settings&&this.props.settings.get("priorities")?this.props.settings.get("priorities").toArray():[]}},{key:"onSelectChanged",value:function(e){this.setState({selectedPriority:e.target.value})}},{key:"render",value:function(){var _this2=this,priority=this.props.priority,mappedPriorities=this.getPriorities().filter((function(obj){return priority.get("name")!==obj.get("name")})).map((function(p){return{text:p.get("name"),value:p.get("_id")}}));return react.createElement(Modals_BaseModal,null,react.createElement("div",null,react.createElement("form",{onSubmit:function(e){return _this2.onSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("h2",null,"Remove Priority"),react.createElement("span",null,"Please select the priority you wish to reassign tickets to in order to delete this priority"),react.createElement("hr",{style:{margin:"10px 0"}})),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"100%"}},react.createElement("label",{className:"uk-form-label"},"Priority"),react.createElement(components_SingleSelect,{items:mappedPriorities,showTextbox:!1,width:"100%",value:this.state.selectedPriority,onSelectChange:function(e){return _this2.onSelectChanged(e)}}))),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("span",{className:"uk-text-danger"},"WARNING: This will change all tickets with a priority of: ",react.createElement("strong",null,priority.get("name"))," to the selected priority above.")),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{type:"button",flat:!0,waves:!0,text:"Cancel",extraClass:"uk-modal-close"}),react.createElement(components_Button,{type:"submit",flat:!0,waves:!0,text:"Delete",style:"danger"})))))}}])&&DeletePriorityModal_defineProperties(Constructor.prototype,protoProps),staticProps&&DeletePriorityModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DeletePriorityModal}(react.Component);DeletePriorityModal.propTypes={priority:prop_types_default().object.isRequired,settings:prop_types_default().object.isRequired,deletePriority:prop_types_default().func.isRequired};const Modals_DeletePriorityModal=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{deletePriority:tickets_deletePriority})(DeletePriorityModal);function CreateTagModal_typeof(obj){return CreateTagModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateTagModal_typeof(obj)}function CreateTagModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateTagModal_setPrototypeOf(o,p){return CreateTagModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},CreateTagModal_setPrototypeOf(o,p)}function CreateTagModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateTagModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateTagModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateTagModal_possibleConstructorReturn(this,result)}}function CreateTagModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateTagModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function CreateTagModal_getPrototypeOf(o){return CreateTagModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateTagModal_getPrototypeOf(o)}var CreateTagModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateTagModal_setPrototypeOf(subClass,superClass)}(CreateTagModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateTagModal_createSuper(CreateTagModal);function CreateTagModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateTagModal),(_this=_super.call(this,props)).state={name:""},_this}return Constructor=CreateTagModal,(protoProps=[{key:"onNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"onSubmit",value:function(e){if(e.preventDefault(),"settings"===this.props.page)return this.props.createTag({name:this.state.name,currentPage:this.props.currentPage});this.props.createTag({name:this.state.name})}},{key:"render",value:function(){var _this2=this;return react.createElement(Modals_BaseModal,null,react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onSubmit(e)}},react.createElement("div",null,react.createElement("h2",{className:"nomargin mb-5"},"Create Tag"),react.createElement("p",{className:"uk-text-muted"},"Tags categorize tickets, making it easy to identify issues"),react.createElement("label",null,"Tag Name"),react.createElement("input",{type:"text",className:"md-input",name:"name","data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a valid tag name. Tag name must contain at least 2 characters.",value:this.state.name,onChange:function(e){return _this2.onNameChange(e)}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",extraClass:"uk-modal-close",flat:!0,waves:!0}),react.createElement(components_Button,{text:"Create",type:"submit",flat:!0,waves:!0,style:"success"}))))}}])&&CreateTagModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateTagModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateTagModal}(react.Component);CreateTagModal.propTypes={createTag:prop_types_default().func.isRequired,page:prop_types_default().string,currentPage:prop_types_default().number};const Modals_CreateTagModal=(0,es.$j)(null,{createTag:tickets_createTag})(CreateTagModal);function AddTagsModal_typeof(obj){return AddTagsModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},AddTagsModal_typeof(obj)}function AddTagsModal_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function AddTagsModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function AddTagsModal_setPrototypeOf(o,p){return AddTagsModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},AddTagsModal_setPrototypeOf(o,p)}function AddTagsModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=AddTagsModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=AddTagsModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return AddTagsModal_possibleConstructorReturn(this,result)}}function AddTagsModal_possibleConstructorReturn(self,call){if(call&&("object"===AddTagsModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function AddTagsModal_getPrototypeOf(o){return AddTagsModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},AddTagsModal_getPrototypeOf(o)}var AddTagsModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&AddTagsModal_setPrototypeOf(subClass,superClass)}(AddTagsModal,_React$Component);var Constructor,protoProps,staticProps,_super=AddTagsModal_createSuper(AddTagsModal);function AddTagsModal(){return AddTagsModal_classCallCheck(this,AddTagsModal),_super.apply(this,arguments)}return Constructor=AddTagsModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.getTagsWithPage({limit:-1,page:0})}},{key:"componentDidUpdate",value:function(){helpers_default().setupChosen(),!jquery_default()(this.select).val()&&this.props.currentTags&&this.props.currentTags.length>0&&jquery_default()(this.select).val(this.props.currentTags),jquery_default()(this.select).trigger("chosen:updated")}},{key:"onCreateTagClicked",value:function(e){var _this=this;e.preventDefault(),this.props.hideModal(),setTimeout((function(){_this.props.showModal("CREATE_TAG")}),300)}},{key:"onSubmit",value:function(e){var _this2=this;e.preventDefault();var selectedTags=jquery_default()(e.target.tags).val();selectedTags||(selectedTags=[]),axios_default().put("/api/v1/tickets/".concat(this.props.ticketId),{tags:selectedTags}).then((function(){_this2.props.socket.emit(socketEventConsts.TICKETS_UI_TAGS_UPDATE,{ticketId:_this2.props.ticketId}),_this2.closeButton.click()})).catch((function(error){logger.error(error),helpers_default().UI.showSnackbar(error,!0)}))}},{key:"onClearClicked",value:function(){var _this3=this;axios_default().put("/api/v1/tickets/".concat(this.props.ticketId),{tags:[]}).then((function(){jquery_default()(_this3.select).val("").trigger("chosen:updated"),_this3.props.socket.emit(socketEventConsts.TICKETS_UI_TAGS_UPDATE,{ticketId:_this3.props.ticketId})})).catch((function(error){logger.error(error),helpers_default().UI.showSnackbar(error,!0)}))}},{key:"render",value:function(){var _this4=this,mappedTags=this.props.tagsSettings.tags&&this.props.tagsSettings.tags.map((function(tag){return{text:tag.get("name"),value:tag.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,{options:{bgclose:!1}},react.createElement("div",{className:"uk-clearfix"},react.createElement("h5",{style:{fontWeight:300}},"Add Tags"),react.createElement("div",null,react.createElement("form",{className:"nomargin",onSubmit:function(e){return _this4.onSubmit(e)}},react.createElement("div",{className:"search-container"},react.createElement("select",{name:"tags",id:"tags",className:"chosen-select",multiple:!0,"data-placeholder":" ","data-noresults":"No Tags Found for ",ref:function(r){return _this4.select=r}},mappedTags.map((function(tag){return react.createElement("option",{key:tag.value,value:tag.value},tag.text)}))),react.createElement("button",{type:"button",style:{borderRadius:0},onClick:function(e){return _this4.onCreateTagClicked(e)}},react.createElement("i",{className:"material-icons",style:{marginRight:0}},"add"))),react.createElement("div",{className:"left",style:{marginTop:15}},react.createElement(components_Button,{type:"button",text:"Clear",small:!0,flat:!0,style:"danger",onClick:function(e){return _this4.onClearClicked(e)}})),react.createElement("div",{className:"right",style:{marginTop:15}},react.createElement(components_Button,{type:"button",text:"Cancel",style:"secondary",small:!0,flat:!0,waves:!0,extraClass:"uk-modal-close",ref:function(r){return _this4.closeButton=r}}),react.createElement(components_Button,{type:"submit",text:"Save Tags",style:"success",small:!0,waves:!0}))))))}}])&&AddTagsModal_defineProperties(Constructor.prototype,protoProps),staticProps&&AddTagsModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AddTagsModal}(react.Component);AddTagsModal.propTypes={ticketId:prop_types_default().string.isRequired,currentTags:prop_types_default().array,tagsSettings:prop_types_default().object.isRequired,getTagsWithPage:prop_types_default().func.isRequired,socket:prop_types_default().object.isRequired,showModal:prop_types_default().func.isRequired,hideModal:prop_types_default().func.isRequired};const Modals_AddTagsModal=(0,es.$j)((function(state){return{tagsSettings:state.tagsSettings,socket:state.shared.socket}}),{getTagsWithPage:tickets_getTagsWithPage,showModal,hideModal})(AddTagsModal);function Grid_typeof(obj){return Grid_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Grid_typeof(obj)}function Grid_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Grid_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Grid_setPrototypeOf(o,p){return Grid_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Grid_setPrototypeOf(o,p)}function Grid_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Grid_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Grid_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Grid_possibleConstructorReturn(this,result)}}function Grid_possibleConstructorReturn(self,call){if(call&&("object"===Grid_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Grid_getPrototypeOf(o){return Grid_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Grid_getPrototypeOf(o)}var Grid=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Grid_setPrototypeOf(subClass,superClass)}(Grid,_React$Component);var Constructor,protoProps,staticProps,_super=Grid_createSuper(Grid);function Grid(){return Grid_classCallCheck(this,Grid),_super.apply(this,arguments)}return Constructor=Grid,(protoProps=[{key:"render",value:function(){return react.createElement("div",{className:"uk-grid uk-clearfix"+(this.props.gutterSize?" uk-grid-"+this.props.gutterSize:"")+(this.props.collapse?" uk-grid-collapse":"")+(this.props.extraClass?" "+this.props.extraClass:""),style:this.props.style},this.props.children)}}])&&Grid_defineProperties(Constructor.prototype,protoProps),staticProps&&Grid_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Grid}(react.Component);Grid.propTypes={extraClass:prop_types_default().string,gutterSize:prop_types_default().string,collapse:prop_types_default().bool,style:prop_types_default().object,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired},Grid.defaultProps={collapse:!1};const components_Grid=Grid;function GridItem_typeof(obj){return GridItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},GridItem_typeof(obj)}function GridItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function GridItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function GridItem_setPrototypeOf(o,p){return GridItem_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},GridItem_setPrototypeOf(o,p)}function GridItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=GridItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=GridItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return GridItem_possibleConstructorReturn(this,result)}}function GridItem_possibleConstructorReturn(self,call){if(call&&("object"===GridItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function GridItem_getPrototypeOf(o){return GridItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},GridItem_getPrototypeOf(o)}var GridItem=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&GridItem_setPrototypeOf(subClass,superClass)}(GridItem,_React$Component);var Constructor,protoProps,staticProps,_super=GridItem_createSuper(GridItem);function GridItem(){return GridItem_classCallCheck(this,GridItem),_super.apply(this,arguments)}return Constructor=GridItem,(protoProps=[{key:"render",value:function(){var _this$props=this.props,width=_this$props.width,xLargeWidth=_this$props.xLargeWidth,extraClass=_this$props.extraClass;return react.createElement("div",{className:"uk-width-"+width+(xLargeWidth?" uk-width-xLarge-"+xLargeWidth:"")+(extraClass?" "+extraClass:""),style:this.props.style},this.props.children)}}])&&GridItem_defineProperties(Constructor.prototype,protoProps),staticProps&&GridItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),GridItem}(react.Component);GridItem.propTypes={width:prop_types_default().string.isRequired,xLargeWidth:prop_types_default().string,extraClass:prop_types_default().string,style:prop_types_default().object,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const Grid_GridItem=GridItem;function SpinLoader_typeof(obj){return SpinLoader_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SpinLoader_typeof(obj)}function SpinLoader_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SpinLoader_setPrototypeOf(o,p){return SpinLoader_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},SpinLoader_setPrototypeOf(o,p)}function SpinLoader_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SpinLoader_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SpinLoader_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SpinLoader_possibleConstructorReturn(this,result)}}function SpinLoader_possibleConstructorReturn(self,call){if(call&&("object"===SpinLoader_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SpinLoader_getPrototypeOf(o){return SpinLoader_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},SpinLoader_getPrototypeOf(o)}var SpinLoader=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SpinLoader_setPrototypeOf(subClass,superClass)}(SpinLoader,_React$Component);var Constructor,protoProps,staticProps,_super=SpinLoader_createSuper(SpinLoader);function SpinLoader(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SpinLoader),(_this=_super.call(this,props)).spinnerRef=(0,react.createRef)(),_this}return Constructor=SpinLoader,(protoProps=[{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){if(this.spinnerRef.current&&this.props.animate){var $spinnerRef=jquery_default()(this.spinnerRef.current);!prevProps.active&&this.props.active&&$spinnerRef.css({opacity:1}).show(),prevProps.active&&!this.props.active&&$spinnerRef.animate({opacity:0},this.props.animateDelay,(function(){$spinnerRef.hide()}))}}},{key:"render",value:function(){return react.createElement("div",{ref:this.spinnerRef,className:(0,clsx_m.Z)("card-spinner",this.props.extraClass,!this.props.active&&!this.props.animate&&"hide"),style:this.props.style},react.createElement("div",{className:"spinner",style:this.props.spinnerStyle}))}}])&&SpinLoader_defineProperties(Constructor.prototype,protoProps),staticProps&&SpinLoader_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SpinLoader}(react.Component);SpinLoader.propTypes={active:prop_types_default().bool,extraClass:prop_types_default().string,style:prop_types_default().object,spinnerStyle:prop_types_default().object,animate:prop_types_default().bool,animateDelay:prop_types_default().number},SpinLoader.defaultProps={animate:!1,animateDelay:700};const components_SpinLoader=SpinLoader;var tomarkdown=__webpack_require__(502),tomarkdown_default=__webpack_require__.n(tomarkdown),easymde_min=__webpack_require__(503),easymde_min_default=__webpack_require__.n(easymde_min);__webpack_require__(746),__webpack_require__(747),__webpack_require__(748);function EasyMDE_typeof(obj){return EasyMDE_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EasyMDE_typeof(obj)}function EasyMDE_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EasyMDE_setPrototypeOf(o,p){return EasyMDE_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},EasyMDE_setPrototypeOf(o,p)}function EasyMDE_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EasyMDE_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EasyMDE_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EasyMDE_possibleConstructorReturn(this,result)}}function EasyMDE_possibleConstructorReturn(self,call){if(call&&("object"===EasyMDE_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function EasyMDE_getPrototypeOf(o){return EasyMDE_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},EasyMDE_getPrototypeOf(o)}var EasyMDE=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EasyMDE_setPrototypeOf(subClass,superClass)}(EasyMDE,_React$Component);var Constructor,protoProps,staticProps,_super=EasyMDE_createSuper(EasyMDE);function EasyMDE(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EasyMDE),(_this=_super.call(this,props)).state={value:"",loaded:!1},_this}return Constructor=EasyMDE,staticProps=[{key:"getDerivedStateFromProps",value:function(nextProps,state){return void 0===nextProps.defaultValue||state.loaded||nextProps.defaultValue===state.value?null:{value:tomarkdown_default()(nextProps.defaultValue).replace(/\\n/gi,"\n"),loaded:!0}}},{key:"attachFileDesc",value:function(textarea){var $el=jquery_default()(textarea),attachFileDiv=jquery_default()("<div></div>");attachFileDiv.addClass("attachFileDesc").html("<p>Attach images by dragging & dropping or pasting from clipboard.</p>"),$el.siblings(".CodeMirror").addClass("hasFileDesc"),$el.siblings(".editor-statusbar").addClass("hasFileDesc").prepend(attachFileDiv)}},{key:"getMdeToolbarItems",value:function(){return[{name:"bold",action:easymde_min_default().toggleBold,className:"material-icons mi-bold no-ajaxy",title:"Bold"},{name:"italic",action:easymde_min_default().toggleItalic,className:"material-icons mi-italic no-ajaxy",title:"Italic"},{name:"Title",action:easymde_min_default().toggleHeadingSmaller,className:"material-icons mi-title no-ajaxy",title:"Title"},"|",{name:"Code",action:easymde_min_default().toggleCodeBlock,className:"material-icons mi-code no-ajaxy",title:"Code"},{name:"Quote",action:easymde_min_default().toggleBlockquote,className:"material-icons mi-quote no-ajaxy",title:"Quote"},{name:"Generic List",action:easymde_min_default().toggleUnorderedList,className:"material-icons mi-list no-ajaxy",title:"Generic List"},{name:"Numbered List",action:easymde_min_default().toggleOrderedList,className:"material-icons mi-numlist no-ajaxy",title:"Numbered List"},"|",{name:"Create Link",action:easymde_min_default().drawLink,className:"material-icons mi-link no-ajaxy",title:"Create Link"},"|",{name:"Toggle Preview",action:easymde_min_default().togglePreview,className:"material-icons mi-preview no-disable no-mobile no-ajaxy",title:"Toggle Preview"}]}}],(protoProps=[{key:"componentDidMount",value:function(){var _this2=this;if(this.easymde=new(easymde_min_default())({element:this.element,forceSync:!0,minHeight:this.props.height,toolbar:EasyMDE.getMdeToolbarItems(),autoDownloadFontAwesome:!1,status:!1,spellChecker:!1}),this.easymde.codemirror.on("change",(function(){_this2.onTextareaChanged(_this2.easymde.value())})),this.easymde&&this.props.allowImageUpload){if(!this.props.inlineImageUploadUrl)return logger.error("Invalid inlineImageUploadUrl Prop.");var $el=jquery_default()(this.element);$el.hasClass("hasInlineUpload")||($el.addClass("hasInlineUpload"),window.inlineAttachment.editors.codemirror4.attach(this.easymde.codemirror,{onFileUploadResponse:function(xhr){var result=JSON.parse(xhr.responseText),filename=result[this.settings.jsonFieldName];if(result&&filename){var newValue;newValue="function"==typeof this.settings.urlText?this.settings.urlText.call(this,filename,result):this.settings.urlText.replace(this.filenameTag,filename);var text=this.editor.getValue().replace(this.lastValue,newValue);this.editor.setValue(text),this.settings.onFileUploaded.call(this,filename)}return!1},onFileUploadError:function(xhr){var result=xhr.responseText,text=this.editor.getValue()+" "+result;this.editor.setValue(text)},extraHeaders:this.props.inlineImageUploadHeaders,errorText:"Error uploading file: ",uploadUrl:this.props.inlineImageUploadUrl,jsonFieldName:"filename",urlText:"![Image]({filename})"}),EasyMDE.attachFileDesc(this.element))}}},{key:"componentDidUpdate",value:function(){this.easymde&&this.easymde.value()!==this.state.value&&this.easymde.value(this.state.value)}},{key:"componentWillUnmount",value:function(){this.easymde&&(this.easymde.codemirror.off("change"),this.easymde=null)}},{key:"onTextareaChanged",value:function(value){this.setState({value}),this.props.onChange&&this.props.onChange(value)}},{key:"getEditorText",value:function(){return this.state.value}},{key:"setEditorText",value:function(value){this.setState({value:tomarkdown_default()(value)})}},{key:"render",value:function(){var _this3=this;return setTimeout((function(){_this3.easymde.codemirror.refresh()}),250),react.createElement(react.Fragment,null,react.createElement("textarea",{ref:function(i){return _this3.element=i},value:this.state.value,onChange:function(e){return _this3.onTextareaChanged(e)}}),this.props.showStatusBar&&react.createElement("div",{className:"editor-statusbar uk-float-left uk-width-1-1"}))}}])&&EasyMDE_defineProperties(Constructor.prototype,protoProps),staticProps&&EasyMDE_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EasyMDE}(react.Component);EasyMDE.propTypes={height:prop_types_default().string,value:prop_types_default().string,onChange:prop_types_default().func,defaultValue:prop_types_default().string,allowImageUpload:prop_types_default().bool,inlineImageUploadUrl:prop_types_default().string,inlineImageUploadHeaders:prop_types_default().object,showStatusBar:prop_types_default().bool.isRequired},EasyMDE.defaultProps={height:"150px",allowImageUpload:!1,showStatusBar:!0};const components_EasyMDE=EasyMDE;function CreateTicketModal_typeof(obj){return CreateTicketModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateTicketModal_typeof(obj)}var CreateTicketModal_class,CreateTicketModal_class2,CreateTicketModal_descriptor,CreateTicketModal_descriptor2,CreateTicketModal_descriptor3,_descriptor4;function CreateTicketModal_extends(){return CreateTicketModal_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},CreateTicketModal_extends.apply(this,arguments)}function CreateTicketModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function CreateTicketModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateTicketModal_setPrototypeOf(o,p){return CreateTicketModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},CreateTicketModal_setPrototypeOf(o,p)}function CreateTicketModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateTicketModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateTicketModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateTicketModal_possibleConstructorReturn(this,result)}}function CreateTicketModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateTicketModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreateTicketModal_assertThisInitialized(self)}function CreateTicketModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreateTicketModal_getPrototypeOf(o){return CreateTicketModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateTicketModal_getPrototypeOf(o)}function CreateTicketModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var CreateTicketModal=(0,mobxreact_esm.Pi)((CreateTicketModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateTicketModal_setPrototypeOf(subClass,superClass)}(CreateTicketModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateTicketModal_createSuper(CreateTicketModal);function CreateTicketModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateTicketModal),CreateTicketModal_initializerDefineProperty(_this=_super.call(this,props),"priorities",CreateTicketModal_descriptor,CreateTicketModal_assertThisInitialized(_this)),CreateTicketModal_initializerDefineProperty(_this,"allAccounts",CreateTicketModal_descriptor2,CreateTicketModal_assertThisInitialized(_this)),CreateTicketModal_initializerDefineProperty(_this,"groupAccounts",CreateTicketModal_descriptor3,CreateTicketModal_assertThisInitialized(_this)),CreateTicketModal_initializerDefineProperty(_this,"selectedPriority",_descriptor4,CreateTicketModal_assertThisInitialized(_this)),_this.issueText="",(0,mobx_esm.rC)(CreateTicketModal_assertThisInitialized(_this)),_this}return Constructor=CreateTicketModal,protoProps=[{key:"componentDidMount",value:function(){var _this2=this;this.props.fetchTicketTypes(),this.props.getTagsWithPage({limit:-1}),this.props.fetchGroups(),this.props.fetchAccountsCreateTicket({type:"all",limit:1e3}),helpers_default().UI.inputs(),helpers_default().formvalidator(),this.defaultTicketTypeWatcher=(0,mobx_esm.gx)((function(){return _this2.props.viewdata.get("defaultTicketType")}),(function(){_this2.priorities=(0,lodash.orderBy)(_this2.props.viewdata.toJS().defaultTicketType.priorities,["migrationNum"]),_this2.selectedPriority=(0,lodash.head)(_this2.priorities)?(0,lodash.head)(_this2.priorities)._id:""}))}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){this.defaultTicketTypeWatcher&&this.defaultTicketTypeWatcher()}},{key:"onTicketTypeSelectChange",value:function(e){var _this3=this;this.priorityWrapper.classList.add("hide"),this.priorityLoader.classList.remove("hide"),axios_default().get("/api/v1/tickets/type/".concat(e.target.value)).then((function(res){var type=res.data.type;type&&type.priorities&&(_this3.priorities=(0,lodash.orderBy)(type.priorities,["migrationNum"]),_this3.selectedPriority=(0,lodash.head)((0,lodash.orderBy)(type.priorities,["migrationNum"]))?(0,lodash.head)((0,lodash.orderBy)(type.priorities,["migrationNum"]))._id:"",setTimeout((function(){_this3.priorityLoader.classList.add("hide"),_this3.priorityWrapper.classList.remove("hide")}),500))})).catch((function(error){_this3.priorityLoader.classList.add("hide"),logger.error(error),helpers_default().UI.showSnackbar("Error: ".concat(error.response.data.error))}))}},{key:"onPriorityRadioChange",value:function(e){this.selectedPriority=e.target.value}},{key:"onFormSubmit",value:function(e){e.preventDefault();var $form=jquery_default()(e.target),data={};if(!(this.issueText.length<1)){var $mdeError,allowAgentUserTickets=this.props.viewdata.get("ticketSettings").get("allowAgentUserTickets")&&(this.props.shared.sessionUser.role.isAdmin||this.props.shared.sessionUser.role.isAgent),minIssueLength=this.props.viewdata.get("ticketSettings").get("minIssue"),$issueTextbox=jquery_default()(this.issueMde.element),$errorBorderWrap=$issueTextbox.parents(".error-border-wrap");if(this.issueText.length<minIssueLength){$errorBorderWrap.css({border:"1px solid #E74C3C"});var mdeError=jquery_default()('<div class="mde-error uk-float-left uk-text-left">Please enter a valid issue. Issue must contain at least '.concat(minIssueLength," characters</div>"));($mdeError=$issueTextbox.siblings(".editor-statusbar").find(".mde-error")).length<1&&$issueTextbox.siblings(".editor-statusbar").prepend(mdeError)}else{if($errorBorderWrap.css("border","none"),($mdeError=$issueTextbox.parent().find(".mde-error")).length>0&&$mdeError.remove(),!$form.isValid(null,null,!1))return!0;allowAgentUserTickets&&(data.owner=this.ownerSelect.value),data.subject=e.target.subject.value,data.group=this.groupSelect.value,data.type=this.typeSelect.value,data.tags=this.tagSelect.value,data.priority=this.selectedPriority,data.issue=this.issueMde.easymde.value(),data.socketid=this.props.socket.io.engine.id,this.props.createTicket(data)}}}},{key:"onGroupSelectChange",value:function(e){}},{key:"render",value:function(){var _this4=this,_this$props=this.props,shared=_this$props.shared,viewdata=_this$props.viewdata,allowAgentUserTickets=viewdata.get("ticketSettings").get("allowAgentUserTickets")&&(shared.sessionUser.role.isAdmin||shared.sessionUser.role.isAgent),mappedAccounts=this.props.accounts.map((function(a){return{text:a.get("fullname"),value:a.get("_id")}})).toArray(),mappedGroups=this.props.groups.map((function(grp){return{text:grp.get("name"),value:grp.get("_id")}})).toArray(),mappedTicketTypes=this.props.ticketTypes.toArray().map((function(type){return{text:type.get("name"),value:type.get("_id")}})),mappedTicketTags=this.props.ticketTags.toArray().map((function(tag){return{text:tag.get("name"),value:tag.get("_id")}}));return react.createElement(Modals_BaseModal,CreateTicketModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this4.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Subject"),react.createElement("input",{type:"text",name:"subject",className:"md-input","data-validation":"length","data-validation-length":"min".concat(viewdata.get("ticketSettings").get("minSubject")),"data-validation-error-msg":"Please enter a valid Subject. Subject must contain at least ".concat(viewdata.get("ticketSettings").get("minSubject")," characters.")})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement(components_Grid,null,allowAgentUserTickets&&react.createElement(Grid_GridItem,{width:"1-3"},react.createElement("label",{className:"uk-form-label"},"Owner"),react.createElement(components_SingleSelect,{showTextbox:!0,items:mappedAccounts,defaultValue:this.props.shared.sessionUser._id,width:"100%",ref:function(i){return _this4.ownerSelect=i}})),react.createElement(Grid_GridItem,{width:allowAgentUserTickets?"2-3":"1-1"},react.createElement("label",{className:"uk-form-label"},"Group"),react.createElement(components_SingleSelect,{showTextbox:!1,items:mappedGroups,defaultValue:(0,lodash.head)(mappedGroups)?(0,lodash.head)(mappedGroups).value:"",onSelectChange:function(e){return _this4.onGroupSelectChange(e)},width:"100%",ref:function(i){return _this4.groupSelect=i}})))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"1-3"},react.createElement("label",{className:"uk-form-label"},"Type"),react.createElement(components_SingleSelect,{showTextbox:!1,items:mappedTicketTypes,width:"100%",defaultValue:this.props.viewdata.get("defaultTicketType").get("_id"),onSelectChange:function(e){_this4.onTicketTypeSelectChange(e)},ref:function(i){return _this4.typeSelect=i}})),react.createElement(Grid_GridItem,{width:"2-3"},react.createElement("label",{className:"uk-form-label"},"Tags"),react.createElement(components_SingleSelect,{showTextbox:!1,items:mappedTicketTags,width:"100%",multiple:!0,ref:function(i){return _this4.tagSelect=i}})))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Priority"),react.createElement("div",{ref:function(i){return _this4.priorityLoader=i},style:{height:"32px",width:"32px",position:"relative"},className:"hide"},react.createElement(components_SpinLoader,{style:{background:"transparent"},spinnerStyle:{width:"24px",height:"24px"},active:!0})),react.createElement("div",{ref:function(i){return _this4.priorityWrapper=i},className:"uk-clearfix"},this.priorities.map((function(priority){return react.createElement("div",{key:priority._id,className:"uk-float-left"},react.createElement("span",{className:"icheck-inline"},react.createElement("input",{id:"p___"+priority._id,name:"priority",type:"radio",className:"with-gap",value:priority._id,onChange:function(e){_this4.onPriorityRadioChange(e)},checked:_this4.selectedPriority===priority._id,"data-md-icheck":!0}),react.createElement("label",{htmlFor:"p___"+priority._id,className:"mb-10 inline-label"},react.createElement("span",{className:"uk-badge",style:{backgroundColor:priority.htmlColor}},priority.name))))})))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("span",null,"Description"),react.createElement("div",{className:"error-border-wrap uk-clearfix"},react.createElement(components_EasyMDE,{ref:function(i){return _this4.issueMde=i},onChange:function(val){return _this4.issueText=val},allowImageUpload:!0,inlineImageUploadUrl:"/tickets/uploadmdeimage",inlineImageUploadHeaders:{ticketid:"uploads"}})),react.createElement("span",{style:{marginTop:"6px",display:"inline-block",fontSize:"11px"},className:"uk-text-muted"},"Please try to be as specific as possible. Please include any details you think may be relevant, such as","troubleshooting steps you've taken.")),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Cancel",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Create",style:"primary",flat:!0,type:"submit"}))))}}],protoProps&&CreateTicketModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateTicketModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateTicketModal}(react.Component),CreateTicketModal_descriptor=CreateTicketModal_applyDecoratedDescriptor(CreateTicketModal_class2.prototype,"priorities",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),CreateTicketModal_descriptor2=CreateTicketModal_applyDecoratedDescriptor(CreateTicketModal_class2.prototype,"allAccounts",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.props.accounts||[]}}),CreateTicketModal_descriptor3=CreateTicketModal_applyDecoratedDescriptor(CreateTicketModal_class2.prototype,"groupAccounts",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_descriptor4=CreateTicketModal_applyDecoratedDescriptor(CreateTicketModal_class2.prototype,"selectedPriority",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateTicketModal_class=CreateTicketModal_class2))||CreateTicketModal_class;CreateTicketModal.propTypes={shared:prop_types_default().object.isRequired,socket:prop_types_default().object.isRequired,viewdata:prop_types_default().object.isRequired,ticketTypes:prop_types_default().object.isRequired,priorities:prop_types_default().object.isRequired,ticketTags:prop_types_default().object.isRequired,accounts:prop_types_default().object.isRequired,groups:prop_types_default().object.isRequired,createTicket:prop_types_default().func.isRequired,fetchTicketTypes:prop_types_default().func.isRequired,getTagsWithPage:prop_types_default().func.isRequired,fetchGroups:prop_types_default().func.isRequired,fetchAccountsCreateTicket:prop_types_default().func.isRequired};const Modals_CreateTicketModal=(0,es.$j)((function(state){return{shared:state.shared,socket:state.shared.socket,viewdata:state.common.viewdata,ticketTypes:state.ticketsState.types,priorities:state.ticketsState.priorities,ticketTags:state.tagsSettings.tags,groups:state.groupsState.groups,accounts:state.accountsState.accountsCreateTicket}}),{createTicket:tickets_createTicket,fetchTicketTypes:tickets_fetchTicketTypes,getTagsWithPage:tickets_getTagsWithPage,fetchGroups:groups_fetchGroups,fetchAccountsCreateTicket:accounts_fetchAccountsCreateTicket})(CreateTicketModal);function CreateRoleModal_typeof(obj){return CreateRoleModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateRoleModal_typeof(obj)}var CreateRoleModal_class,CreateRoleModal_class2,CreateRoleModal_descriptor;function CreateRoleModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateRoleModal_setPrototypeOf(o,p){return CreateRoleModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},CreateRoleModal_setPrototypeOf(o,p)}function CreateRoleModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateRoleModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateRoleModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateRoleModal_possibleConstructorReturn(this,result)}}function CreateRoleModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateRoleModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreateRoleModal_assertThisInitialized(self)}function CreateRoleModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreateRoleModal_getPrototypeOf(o){return CreateRoleModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateRoleModal_getPrototypeOf(o)}var CreateRoleModal=(0,mobxreact_esm.Pi)((CreateRoleModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateRoleModal_setPrototypeOf(subClass,superClass)}(CreateRoleModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateRoleModal_createSuper(CreateRoleModal);function CreateRoleModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateRoleModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"name",CreateRoleModal_descriptor,CreateRoleModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(CreateRoleModal_assertThisInitialized(_this)),_this}return Constructor=CreateRoleModal,(protoProps=[{key:"onNameChange",value:function(e){this.name=e.target.value}},{key:"onCreateRoleClicked",value:function(e){e.preventDefault(),this.props.createRole({name:this.name})}},{key:"render",value:function(){var _this2=this;return react.createElement(Modals_BaseModal,null,react.createElement("div",{className:"uk-form-stacked"},react.createElement("div",null,react.createElement("h2",{className:"nomargin mb-5"},"Create Role"),react.createElement("p",{className:"uk-text-muted"},"Once created, the role will become editable in the permission editor"),react.createElement("label",null,"Role Name"),react.createElement("input",{type:"text",className:"md-input",name:"name","data-validation":"length","data-validation-length":"min3","data-validation-error-msg":"Please enter a valid role name. Role name must contain at least 3 characters.",value:this.name,onChange:function(e){return _this2.onNameChange(e)}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",extraClass:"uk-modal-close",flat:!0,waves:!0}),react.createElement(components_Button,{text:"Create",type:"button",flat:!0,waves:!0,style:"success",onClick:function(e){return _this2.onCreateRoleClicked(e)}}))))}}])&&CreateRoleModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateRoleModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateRoleModal}(react.Component),CreateRoleModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(CreateRoleModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateRoleModal_class=CreateRoleModal_class2))||CreateRoleModal_class;CreateRoleModal.propTypes={createRole:prop_types_default().func.isRequired};const Modals_CreateRoleModal=(0,es.$j)(null,{createRole:settings_createRole})(CreateRoleModal);function DeleteRoleModal_typeof(obj){return DeleteRoleModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DeleteRoleModal_typeof(obj)}var DeleteRoleModal_class,DeleteRoleModal_class2,DeleteRoleModal_descriptor;function DeleteRoleModal_extends(){return DeleteRoleModal_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},DeleteRoleModal_extends.apply(this,arguments)}function DeleteRoleModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DeleteRoleModal_setPrototypeOf(o,p){return DeleteRoleModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},DeleteRoleModal_setPrototypeOf(o,p)}function DeleteRoleModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DeleteRoleModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DeleteRoleModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DeleteRoleModal_possibleConstructorReturn(this,result)}}function DeleteRoleModal_possibleConstructorReturn(self,call){if(call&&("object"===DeleteRoleModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return DeleteRoleModal_assertThisInitialized(self)}function DeleteRoleModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function DeleteRoleModal_getPrototypeOf(o){return DeleteRoleModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},DeleteRoleModal_getPrototypeOf(o)}var DeleteRoleModal=(0,mobxreact_esm.Pi)((DeleteRoleModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DeleteRoleModal_setPrototypeOf(subClass,superClass)}(DeleteRoleModal,_React$Component);var Constructor,protoProps,staticProps,_super=DeleteRoleModal_createSuper(DeleteRoleModal);function DeleteRoleModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DeleteRoleModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"selectedRole",DeleteRoleModal_descriptor,DeleteRoleModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(DeleteRoleModal_assertThisInitialized(_this)),_this}return Constructor=DeleteRoleModal,(protoProps=[{key:"onSelectChanged",value:function(e){this.selectedRole=e.target.value}},{key:"onFormSubmit",value:function(e){e.preventDefault(),this.props.deleteRole({_id:this.props.role.get("_id"),newRoleId:this.selectedRole})}},{key:"render",value:function(){var _this2=this,role=this.props.role,mappedRoles=this.props.shared.roles.filter((function(obj){return obj.get("_id")!==role.get("_id")})).map((function(r){return{text:r.get("name"),value:r.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,DeleteRoleModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("h2",null,"Remove Role"),react.createElement("span",null,"Please select the role you wish to assign ALL users to")),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"100%"}},react.createElement("label",{className:"uk-form-label nopadding nomargin"},"Type"),react.createElement(components_SingleSelect,{showTextbox:!1,items:mappedRoles,onSelectChange:function(e){return _this2.onSelectChanged(e)},value:this.selectedRole}))),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("span",{className:"uk-text-danger"},"WARNING: This will change all accounts with role ",react.createElement("strong",null,role.get("name"))," to the selected role above.",role.get("isAdmin")&&react.createElement("span",{className:"uk-text-danger"},"The role you are about to remove is an admin role. Please ensure there is another Admin role or you could be locked out!"),react.createElement("br",null),react.createElement("br",null),react.createElement("strong",{style:{fontSize:"18px"}},"This is permanent!"))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Cancel",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Delete",style:"danger",flat:!0,type:"submit"}))))}}])&&DeleteRoleModal_defineProperties(Constructor.prototype,protoProps),staticProps&&DeleteRoleModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DeleteRoleModal}(react.Component),DeleteRoleModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(DeleteRoleModal_class2.prototype,"selectedRole",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),DeleteRoleModal_class=DeleteRoleModal_class2))||DeleteRoleModal_class;DeleteRoleModal.propTypes={role:prop_types_default().object,deleteRole:prop_types_default().func.isRequired,shared:prop_types_default().object.isRequired};const Modals_DeleteRoleModal=(0,es.$j)((function(state){return{shared:state.shared}}),{deleteRole:settings_deleteRole})(DeleteRoleModal);function ViewAllNotificationsModal_typeof(obj){return ViewAllNotificationsModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},ViewAllNotificationsModal_typeof(obj)}var ViewAllNotificationsModal_class,ViewAllNotificationsModal_class2,ViewAllNotificationsModal_descriptor;function ViewAllNotificationsModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ViewAllNotificationsModal_setPrototypeOf(o,p){return ViewAllNotificationsModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},ViewAllNotificationsModal_setPrototypeOf(o,p)}function ViewAllNotificationsModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=ViewAllNotificationsModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=ViewAllNotificationsModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return ViewAllNotificationsModal_possibleConstructorReturn(this,result)}}function ViewAllNotificationsModal_possibleConstructorReturn(self,call){if(call&&("object"===ViewAllNotificationsModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return ViewAllNotificationsModal_assertThisInitialized(self)}function ViewAllNotificationsModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function ViewAllNotificationsModal_getPrototypeOf(o){return ViewAllNotificationsModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},ViewAllNotificationsModal_getPrototypeOf(o)}var ViewAllNotificationsModal=(0,mobxreact_esm.Pi)((ViewAllNotificationsModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&ViewAllNotificationsModal_setPrototypeOf(subClass,superClass)}(ViewAllNotificationsModal,_React$Component);var Constructor,protoProps,staticProps,_super=ViewAllNotificationsModal_createSuper(ViewAllNotificationsModal);function ViewAllNotificationsModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ViewAllNotificationsModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"notifications",ViewAllNotificationsModal_descriptor,ViewAllNotificationsModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(ViewAllNotificationsModal_assertThisInitialized(_this)),_this}return Constructor=ViewAllNotificationsModal,(protoProps=[{key:"componentDidMount",value:function(){var _this2=this;helpers_default().hideAllpDropDowns(),axios_default().get("/api/v1/users/notifications").then((function(res){_this2.notifications=res.data.notifications})).catch((function(err){helpers_default().UI.showSnackbar("Error: ".concat(err.response),!0),logger.error(err.response)}))}},{key:"onNotificationClick",value:function(e,notification){if(e.preventDefault(),!(notification&&notification.data&&notification.data.ticket&&notification.data.ticket.uid))return!1;this.props.hideModal(),this.props.socket.emit(socketEventConsts.NOTIFICATIONS_MARK_READ,notification._id),History.pushState(null,null,"/tickets/".concat(notification.data.ticket.uid))}},{key:"render",value:function(){var _this3=this;return react.createElement(Modals_BaseModal,{large:!0},react.createElement("div",{className:"uk-modal-header"},react.createElement("h2",null,"Notifications")),react.createElement("div",{className:"uk-modal-content",style:{height:"400px",overflow:"auto"}},react.createElement("table",{className:"notificationsTable"},react.createElement("thead",null,react.createElement("tr",null,react.createElement("th",{className:"type"},"Type"),react.createElement("th",{className:"title"},"Title"),react.createElement("th",{className:"date"},"Date"))),react.createElement("tbody",null,this.notifications.map((function(notification){var formattedDate=helpers_default().formatDate(notification.created,helpers_default().getShortDateFormat()+" "+helpers_default().getTimeFormat());return react.createElement("tr",{key:notification._id,className:"notification-row",onClick:function(e){return _this3.onNotificationClick(e,notification)}},react.createElement("td",{className:"type"},react.createElement("i",{className:"fa fa-2x fa-check"})),react.createElement("td",{className:"title"},react.createElement("p",null,notification.title),react.createElement("div",{className:"body"},notification.message)),react.createElement("td",{className:"date"},react.createElement("time",{dateTime:helpers_default().formatDate(notification.created,"YYY-MM-DDThh:mm")},formattedDate)))}))))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,onClick:function(){return _this3.props.hideModal()}})))}}])&&ViewAllNotificationsModal_defineProperties(Constructor.prototype,protoProps),staticProps&&ViewAllNotificationsModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ViewAllNotificationsModal}(react.Component),ViewAllNotificationsModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(ViewAllNotificationsModal_class2.prototype,"notifications",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ViewAllNotificationsModal_class=ViewAllNotificationsModal_class2))||ViewAllNotificationsModal_class;ViewAllNotificationsModal.propTypes={hideModal:prop_types_default().func.isRequired,socket:prop_types_default().object.isRequired};const Modals_ViewAllNotificationsModal=(0,es.$j)((function(state){return{socket:state.shared.socket}}),{hideModal})(ViewAllNotificationsModal),teams_fetchTeams=(0,createAction.Z)(FETCH_TEAMS.ACTION,(payload=>payload),(()=>({thunk:!0}))),teams_createTeam=(0,createAction.Z)(CREATE_TEAM.ACTION),saveEditTeam=(0,createAction.Z)(SAVE_EDIT_TEAM.ACTION),teams_deleteTeam=(0,createAction.Z)(DELETE_TEAM.ACTION),unloadTeams=(0,createAction.Z)(UNLOAD_TEAMS.ACTION,(payload=>payload),(()=>({thunk:!0})));function MultiSelect_typeof(obj){return MultiSelect_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},MultiSelect_typeof(obj)}function MultiSelect_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function MultiSelect_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function MultiSelect_setPrototypeOf(o,p){return MultiSelect_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},MultiSelect_setPrototypeOf(o,p)}function MultiSelect_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=MultiSelect_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=MultiSelect_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return MultiSelect_possibleConstructorReturn(this,result)}}function MultiSelect_possibleConstructorReturn(self,call){if(call&&("object"===MultiSelect_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function MultiSelect_getPrototypeOf(o){return MultiSelect_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},MultiSelect_getPrototypeOf(o)}var MultiSelect=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&MultiSelect_setPrototypeOf(subClass,superClass)}(MultiSelect,_React$Component);var Constructor,protoProps,staticProps,_super=MultiSelect_createSuper(MultiSelect);function MultiSelect(){return MultiSelect_classCallCheck(this,MultiSelect),_super.apply(this,arguments)}return Constructor=MultiSelect,(protoProps=[{key:"componentDidMount",value:function(){var $select=jquery_default()(this.select);helpers_default().UI.multiSelect({afterSelect:this.props.onChange,afterDeselect:this.props.onChange}),this.props.initialSelected&&($select.multiSelect("select",this.props.initialSelected),$select.multiSelect("refresh")),this.props.disabled&&($select.attr("disabled","disabled"),$select.multiSelect("refresh"))}},{key:"componentDidUpdate",value:function(prevProps){var $select=jquery_default()(this.select);helpers_default().arrayIsEqual(prevProps.items,this.props.items)?prevProps.initialSelected!==this.props.initialSelected&&($select.multiSelect("select",this.props.initialSelected),$select.multiSelect("refresh")):($select.empty().multiSelect("refresh"),(0,lodash.each)(this.props.items,(function(i){$select.append("<option value='".concat(i.value,"'>").concat(i.text,"</option>"))})),$select.attr("disabled",!1),$select.multiSelect("refresh"),this.props.initialSelected&&($select.multiSelect("select",this.props.initialSelected),$select.multiSelect("refresh"))),$select.attr("disabled",this.props.disabled),$select.multiSelect("refresh")}},{key:"getSelected",value:function(){var $select=jquery_default()(this.select);return $select?$select.val():[]}},{key:"selectAll",value:function(){var $select=jquery_default()(this.select);$select&&this.props.items&&this.props.items.length>0&&($select.multiSelect("select_all"),$select.multiSelect("refresh"))}},{key:"deselectAll",value:function(){var $select=jquery_default()(this.select);$select&&this.props.items&&this.props.items.length>0&&($select.multiSelect("deselect_all"),$select.multiSelect("refresh"))}},{key:"render",value:function(){var _this=this,_this$props=this.props,id=_this$props.id,items=_this$props.items;return react.createElement("select",{id,multiple:"multiple",className:"multiselect",ref:function(r){return _this.select=r}},items&&items.map((function(item,i){return react.createElement("option",{key:i,value:item.value},item.text)})))}}])&&MultiSelect_defineProperties(Constructor.prototype,protoProps),staticProps&&MultiSelect_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MultiSelect}(react.Component);MultiSelect.propTypes={id:prop_types_default().string,items:prop_types_default().array.isRequired,initialSelected:prop_types_default().array,onChange:prop_types_default().func.isRequired,disabled:prop_types_default().bool};const components_MultiSelect=MultiSelect;function CreateAccountModal_typeof(obj){return CreateAccountModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateAccountModal_typeof(obj)}var CreateAccountModal_class,CreateAccountModal_class2,CreateAccountModal_descriptor,CreateAccountModal_descriptor2,CreateAccountModal_descriptor3,CreateAccountModal_descriptor4,_descriptor5,_descriptor6,_descriptor7;function CreateAccountModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function CreateAccountModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateAccountModal_setPrototypeOf(o,p){return CreateAccountModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},CreateAccountModal_setPrototypeOf(o,p)}function CreateAccountModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateAccountModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateAccountModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateAccountModal_possibleConstructorReturn(this,result)}}function CreateAccountModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateAccountModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreateAccountModal_assertThisInitialized(self)}function CreateAccountModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreateAccountModal_getPrototypeOf(o){return CreateAccountModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateAccountModal_getPrototypeOf(o)}function CreateAccountModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var CreateAccountModal=(0,mobxreact_esm.Pi)((CreateAccountModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateAccountModal_setPrototypeOf(subClass,superClass)}(CreateAccountModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateAccountModal_createSuper(CreateAccountModal);function CreateAccountModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateAccountModal),CreateAccountModal_initializerDefineProperty(_this=_super.call(this,props),"username",CreateAccountModal_descriptor,CreateAccountModal_assertThisInitialized(_this)),CreateAccountModal_initializerDefineProperty(_this,"password",CreateAccountModal_descriptor2,CreateAccountModal_assertThisInitialized(_this)),CreateAccountModal_initializerDefineProperty(_this,"passwordConfirm",CreateAccountModal_descriptor3,CreateAccountModal_assertThisInitialized(_this)),CreateAccountModal_initializerDefineProperty(_this,"fullname",CreateAccountModal_descriptor4,CreateAccountModal_assertThisInitialized(_this)),CreateAccountModal_initializerDefineProperty(_this,"email",_descriptor5,CreateAccountModal_assertThisInitialized(_this)),CreateAccountModal_initializerDefineProperty(_this,"title",_descriptor6,CreateAccountModal_assertThisInitialized(_this)),_this.selectedRole="",CreateAccountModal_initializerDefineProperty(_this,"isAgentRole",_descriptor7,CreateAccountModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(CreateAccountModal_assertThisInitialized(_this)),_this}return Constructor=CreateAccountModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchGroups({type:"all"}),this.props.fetchTeams(),this.props.fetchRoles(),helpers_default().UI.inputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"onInputChanged",value:function(e,name){this[name]=e.target.value}},{key:"onRoleSelectChange",value:function(e){var _this2=this;this.selectedRole=e.target.value;var roleObject=this.props.roles.find((function(role){return role.get("_id")===_this2.selectedRole}));this.isAgentRole=roleObject.get("isAdmin")||roleObject.get("isAgent"),!this.selectedRole||this.selectedRole.length<1?this.roleSelectErrorMessage.classList.remove("hide"):this.roleSelectErrorMessage.classList.add("hide")}},{key:"onGroupSelectChange",value:function(){var selectedGroups=this.groupSelect.getSelected();!selectedGroups||selectedGroups.length<1?this.groupSelectErrorMessage.classList.remove("hide"):this.groupSelectErrorMessage.classList.add("hide")}},{key:"onFormSubmit",value:function(e){e.preventDefault();var isValid=!0;jquery_default()(e.target).isValid(null,null,!1)||(isValid=!1),!this.selectedRole||this.selectedRole.length<1?(this.roleSelectErrorMessage.classList.remove("hide"),isValid&&(isValid=!1)):this.roleSelectErrorMessage.classList.add("hide");var selectedGroups=this.groupSelect?this.groupSelect.getSelected():void 0;if(selectedGroups&&(selectedGroups.length<1?(this.groupSelectErrorMessage.classList.remove("hide"),isValid&&(isValid=!1)):this.groupSelectErrorMessage.classList.add("hide")),isValid){var payload={username:this.username,fullname:this.fullname,title:this.title,email:this.email,groups:this.groupSelect?this.groupSelect.getSelected():void 0,teams:this.teamSelect?this.teamSelect.getSelected():void 0,role:this.selectedRole,password:this.password.length>3?this.password:void 0,passwordConfirm:this.passwordConfirm.length>3?this.passwordConfirm:void 0};this.props.createAccount(payload)}}},{key:"render",value:function(){var _this3=this,roles=this.props.roles.map((function(role){return{text:role.get("name"),value:role.get("_id")}})).toArray(),groups=this.props.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray(),teams=this.props.teams.map((function(team){return{text:team.get("name"),value:team.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,{parentExtraClass:"pt-0",extraClass:"p-0 pb-25"},react.createElement("div",{className:"user-heading",style:{minHeight:"130px",background:"#1976d2",padding:"24px"}},react.createElement("div",{className:"uk-width-1-1"},react.createElement("div",{style:{width:"82px",height:"82px",float:"left",marginRight:"24px",position:"relative"}},react.createElement("div",{className:"mediumProfilePic",style:{position:"relative"}},react.createElement("img",{src:"/uploads/users/defaultProfile.jpg",alt:"Profile Picture"}))),react.createElement("div",{className:"user-heading-content"},react.createElement("h2",null,react.createElement("span",{className:"uk-text-truncate"},"Create Account"),react.createElement("span",{className:"sub-heading"},"Please provide account details below"))))),react.createElement("div",{style:{margin:"24px 24px 0 24px"}},react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this3.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Username"),react.createElement("input",{type:"text",className:"md-input",value:this.username,onChange:function(e){return _this3.onInputChanged(e,"username")},"data-validation":"length","data-validation-length":"min4","data-validation-error-msg":"Username must contain at least 4 characters."})),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"50%",paddingRight:"20px"}},react.createElement("label",{className:"uk-form-label"},"Name"),react.createElement("input",{type:"text",className:"md-input",value:this.fullname,onChange:function(e){return _this3.onInputChanged(e,"fullname")},"data-validation":"length","data-validation-length":"min1","data-validation-error-msg":"Name must contain at least 1 character."})),react.createElement("div",{className:"uk-float-left uk-width-1-2"},react.createElement("label",{className:"uk-form-label"},"Title"),react.createElement("input",{type:"text",className:"md-input",value:this.title,onChange:function(e){return _this3.onInputChanged(e,"title")}}))),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"50%",paddingRight:"20px"}},react.createElement("label",{className:"uk-form-label"},"Password"),react.createElement("input",{type:"password",className:"md-input",name:"password_confirmation",value:this.password,onChange:function(e){return _this3.onInputChanged(e,"password")},"data-validation":this.props.common.accountsPasswordComplexity?"length":"none","data-validation-length":"min8","data-validation-error-msg":"Password must contain at least 8 characters."})),react.createElement("div",{className:"uk-float-left uk-width-1-2"},react.createElement("label",{className:"uk-form-label"},"Confirm Password"),react.createElement("input",{type:"password",className:"md-input",name:"password",value:this.passwordConfirm,onChange:function(e){return _this3.onInputChanged(e,"passwordConfirm")},"data-validation":"confirmation","data-validation-error-msg":"Password does not match"}))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Email"),react.createElement("input",{type:"email",className:"md-input",value:this.email,onChange:function(e){return _this3.onInputChanged(e,"email")},"data-validation":"email"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Role"),react.createElement(components_SingleSelect,{items:roles,width:"100",showTextbox:!1,onSelectChange:function(e){return _this3.onRoleSelectChange(e)}}),react.createElement("span",{className:"hide help-block",style:{display:"inline-block",marginTop:"10px",fontWeight:"bold",color:"#d85030"},ref:function(r){return _this3.roleSelectErrorMessage=r}},"Please select a role for this user")),!this.isAgentRole&&react.createElement("div",null,react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Groups"),react.createElement(components_MultiSelect,{items:groups,onChange:function(e){return _this3.onGroupSelectChange(e)},ref:function(r){return _this3.groupSelect=r}}),react.createElement("span",{className:"hide help-block",style:{display:"inline-block",marginTop:"3px",fontWeight:"bold",color:"#d85030"},ref:function(r){return _this3.groupSelectErrorMessage=r}},"Please select a group for this user."))),this.isAgentRole&&react.createElement("div",null,react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Teams"),react.createElement(components_MultiSelect,{items:teams,onChange:function(){},ref:function(r){return _this3.teamSelect=r}}))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Create Account",flat:!0,waves:!0,style:"success",type:"submit"})))))}}])&&CreateAccountModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateAccountModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateAccountModal}(react.Component),CreateAccountModal_descriptor=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"username",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateAccountModal_descriptor2=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"password",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateAccountModal_descriptor3=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"passwordConfirm",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateAccountModal_descriptor4=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"fullname",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_descriptor5=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"email",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_descriptor6=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"title",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_descriptor7=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"isAgentRole",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),CreateAccountModal_class=CreateAccountModal_class2))||CreateAccountModal_class;CreateAccountModal.propTypes={common:prop_types_default().object.isRequired,groups:prop_types_default().object.isRequired,teams:prop_types_default().object.isRequired,roles:prop_types_default().object.isRequired,createAccount:prop_types_default().func.isRequired,fetchGroups:prop_types_default().func.isRequired,unloadGroups:prop_types_default().func.isRequired,fetchTeams:prop_types_default().func.isRequired,unloadTeams:prop_types_default().func.isRequired,fetchRoles:prop_types_default().func.isRequired};const Modals_CreateAccountModal=(0,es.$j)((function(state){return{roles:state.shared.roles,common:state.common,groups:state.groupsState.groups,teams:state.teamsState.teams}}),{createAccount:accounts_createAccount,fetchGroups:groups_fetchGroups,unloadGroups,fetchTeams:teams_fetchTeams,unloadTeams,fetchRoles:common_fetchRoles})(CreateAccountModal),departments_fetchDepartments=(0,createAction.Z)(FETCH_DEPARTMENTS.ACTION,(payload=>payload),(()=>({thunk:!0}))),departments_createDepartment=(0,createAction.Z)(CREATE_DEPARTMENT.ACTION),departments_updateDepartment=(0,createAction.Z)(UPDATE_DEPARTMENT.ACTION),departments_deleteDepartment=(0,createAction.Z)(DELETE_DEPARTMENT.ACTION),departments_unloadDepartments=(0,createAction.Z)(UNLOAD_DEPARTMENTS.ACTION,(payload=>payload),(()=>({thunk:!0})));function EditAccountModal_typeof(obj){return EditAccountModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EditAccountModal_typeof(obj)}var EditAccountModal_class,EditAccountModal_class2,EditAccountModal_descriptor,EditAccountModal_descriptor2,EditAccountModal_descriptor3,EditAccountModal_descriptor4,EditAccountModal_descriptor5,EditAccountModal_descriptor6;function EditAccountModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function EditAccountModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EditAccountModal_setPrototypeOf(o,p){return EditAccountModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},EditAccountModal_setPrototypeOf(o,p)}function EditAccountModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EditAccountModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EditAccountModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EditAccountModal_possibleConstructorReturn(this,result)}}function EditAccountModal_possibleConstructorReturn(self,call){if(call&&("object"===EditAccountModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return EditAccountModal_assertThisInitialized(self)}function EditAccountModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function EditAccountModal_getPrototypeOf(o){return EditAccountModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},EditAccountModal_getPrototypeOf(o)}function EditAccountModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var EditAccountModal=(0,mobxreact_esm.Pi)((EditAccountModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EditAccountModal_setPrototypeOf(subClass,superClass)}(EditAccountModal,_React$Component);var Constructor,protoProps,staticProps,_super=EditAccountModal_createSuper(EditAccountModal);function EditAccountModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditAccountModal),EditAccountModal_initializerDefineProperty(_this=_super.call(this,props),"name",EditAccountModal_descriptor,EditAccountModal_assertThisInitialized(_this)),EditAccountModal_initializerDefineProperty(_this,"title",EditAccountModal_descriptor2,EditAccountModal_assertThisInitialized(_this)),EditAccountModal_initializerDefineProperty(_this,"password",EditAccountModal_descriptor3,EditAccountModal_assertThisInitialized(_this)),EditAccountModal_initializerDefineProperty(_this,"confirmPassword",EditAccountModal_descriptor4,EditAccountModal_assertThisInitialized(_this)),EditAccountModal_initializerDefineProperty(_this,"email",EditAccountModal_descriptor5,EditAccountModal_assertThisInitialized(_this)),_this.selectedRole="",EditAccountModal_initializerDefineProperty(_this,"isAgentRole",EditAccountModal_descriptor6,EditAccountModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(EditAccountModal_assertThisInitialized(_this)),_this}return Constructor=EditAccountModal,(protoProps=[{key:"componentDidMount",value:function(){this.name=this.props.user.fullname,this.title=this.props.user.title,this.email=this.props.user.email,this.isAgentRole=this.props.user.role.isAdmin||this.props.user.role.isAgent,helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),this.props.fetchGroups({type:"all"}),this.props.fetchTeams(),this.props.fetchDepartments(),this.props.fetchRoles()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadGroups(),this.props.unloadTeams(),this.props.unloadDepartments()}},{key:"onFileBtnClick",value:function(e){e.stopPropagation(),this.uploadImageInput&&this.uploadImageInput.click()}},{key:"onImageUploadChanged",value:function(e){var self=e.target,that=this,formData=new FormData;formData.append("username",this.props.user.username),formData.append("_id",this.props.user._id),formData.append("image",self.files[0]),axios_default().post("/accounts/uploadImage",formData).then((function(res){var timestamp=(new Date).getTime();that.uploadProfileImage.setAttribute("src","".concat(res.data,"?").concat(timestamp))})).catch((function(err){logger.error(err)}))}},{key:"onInputChanged",value:function(e,stateName){this[stateName]=e.target.value}},{key:"onRoleSelectChange",value:function(e){var _this2=this;this.selectedRole=e.target.value;var roleObject=this.props.roles.find((function(role){return role.get("_id")===_this2.selectedRole}));this.isAgentRole=roleObject.get("isAdmin")||roleObject.get("isAgent")}},{key:"onSubmitSaveAccount",value:function(e){if(e.preventDefault(),this.props.edit){var data={username:this.props.user.username,fullname:this.name,title:this.title,email:this.email,groups:!this.isAgentRole&&this.groupSelect?this.groupSelect.getSelected():void 0,teams:this.isAgentRole&&this.teamsSelect?this.teamsSelect.getSelected():void 0,role:this.selectedRole,password:this.password.length>1?this.password:void 0,passwordConfirm:this.confirmPassword.length>1?this.confirmPassword:void 0};this.props.saveEditAccount(data)}}},{key:"render",value:function(){var _this3=this,_this$props=this.props,user=_this$props.user,edit=_this$props.edit,customer=!this.isAgentRole,profilePicture=user.image||"defaultProfile.jpg",roles=helpers_default().getRolesByHierarchy().map((function(role){return{text:role.name,value:role._id}})),teams=this.props.teams?this.props.teams.map((function(team){return{text:team.get("name"),value:team.get("_id")}})).toArray():[],departments=this.props.departments?this.props.departments.map((function(department){return{text:department.get("name"),value:department.get("_id")}})).toArray():[],groups=this.props.groups?this.props.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray():[];return user.teams||(user.teams=[]),user.departments||(user.departments=[]),user.groups||(user.groups=[]),react.createElement(Modals_BaseModal,{parentExtraClass:"pt-0",extraClass:"p-0 pb-25",options:{bgclose:!1}},react.createElement("div",{className:"user-heading",style:{minHeight:"130px",background:"#1976d2",padding:"24px"}},react.createElement("div",{className:"uk-width-1-1"},react.createElement("div",{style:{width:"82px",height:"82px",float:"left",marginRight:"24px",position:"relative"}},edit&&react.createElement("form",{className:"form nomargin",encType:"multipart/form-data"},react.createElement("div",{className:"mediumProfilePic",style:{position:"relative"}},react.createElement("input",{name:"_id",type:"hidden",value:user._id,readOnly:!0}),react.createElement("input",{name:"username",type:"hidden",value:user.username,readOnly:!0}),react.createElement("input",{type:"file",style:{display:"none"},ref:function(r){return _this3.uploadImageInput=r},onChange:function(e){return _this3.onImageUploadChanged(e)}}),react.createElement("img",{src:"/uploads/users/".concat(profilePicture),alt:"Profile Picture",ref:function(r){return _this3.uploadProfileImage=r}})),react.createElement("div",{className:"profile-picture-controls"},react.createElement("span",{className:"btn-file",onClick:function(e){return _this3.onFileBtnClick(e)}},react.createElement("i",{className:"material-icons"},"file_upload")))),!edit&&react.createElement("div",{className:"mediumProfilePic",style:{position:"relative"}},react.createElement("img",{src:"/uploads/users/".concat(profilePicture),alt:"Profile Picture",ref:function(r){return _this3.uploadProfileImage=r}}))),react.createElement("div",{className:"user-heading-content"},react.createElement("h2",null,react.createElement("span",{className:"uk-text-truncate"},user.username),react.createElement("span",{className:"sub-heading"},user.title))))),react.createElement("div",{style:{margin:"24px 24px 0 24px"}},react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this3.onSubmitSaveAccount(e)}},react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"50%",paddingRight:"20px"}},react.createElement("label",{className:"uk-form-label"},"Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this3.onInputChanged(e,"name")},disabled:!edit})),react.createElement("div",{className:"uk-float-left uk-width-1-2"},react.createElement("label",{className:"uk-form-label"},"Title"),react.createElement("input",{type:"text",className:"md-input",value:this.title,onChange:function(e){return _this3.onInputChanged(e,"title")},disabled:!edit}))),edit&&react.createElement("div",null,react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"50%",paddingRight:"20px"}},react.createElement("label",{className:"uk-form-label"},"Password"),react.createElement("input",{type:"password",className:"md-input",value:this.password,onChange:function(e){return _this3.onInputChanged(e,"password")}})),react.createElement("div",{className:"uk-float-left uk-width-1-2"},react.createElement("label",{className:"uk-form-label"},"Confirm Password"),react.createElement("input",{type:"password",className:"md-input",value:this.confirmPassword,onChange:function(e){return _this3.onInputChanged(e,"confirmPassword")}})))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Email"),react.createElement("input",{type:"email",className:"md-input",value:this.email,onChange:function(e){return _this3.onInputChanged(e,"email")},disabled:!edit})),edit&&react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Role"),react.createElement(components_SingleSelect,{items:roles,width:"100",showTextbox:!1,defaultValue:user.role._id,onSelectChange:function(e){return _this3.onRoleSelectChange(e)},disabled:!edit})),this.props.groups&&customer&&react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Groups"),react.createElement(components_MultiSelect,{items:groups,initialSelected:user.groups.map((function(i){return i._id})),onChange:function(){},ref:function(r){return _this3.groupSelect=r},disabled:!edit})),!customer&&react.createElement("div",null,react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Teams"),react.createElement(components_MultiSelect,{items:teams,initialSelected:user.teams.map((function(i){return i._id})),onChange:function(){},ref:function(r){return _this3.teamsSelect=r},disabled:!edit})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Departments"),react.createElement(components_MultiSelect,{items:departments,initialSelected:user.departments.map((function(i){return i._id})),onChange:function(){},disabled:!0}))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Save Account",flat:!0,waves:!0,style:"primary",type:"submit",disabled:!edit})))))}}])&&EditAccountModal_defineProperties(Constructor.prototype,protoProps),staticProps&&EditAccountModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EditAccountModal}(react.Component),EditAccountModal_descriptor=EditAccountModal_applyDecoratedDescriptor(EditAccountModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditAccountModal_descriptor2=EditAccountModal_applyDecoratedDescriptor(EditAccountModal_class2.prototype,"title",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditAccountModal_descriptor3=EditAccountModal_applyDecoratedDescriptor(EditAccountModal_class2.prototype,"password",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditAccountModal_descriptor4=EditAccountModal_applyDecoratedDescriptor(EditAccountModal_class2.prototype,"confirmPassword",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditAccountModal_descriptor5=EditAccountModal_applyDecoratedDescriptor(EditAccountModal_class2.prototype,"email",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditAccountModal_descriptor6=EditAccountModal_applyDecoratedDescriptor(EditAccountModal_class2.prototype,"isAgentRole",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),EditAccountModal_class=EditAccountModal_class2))||EditAccountModal_class;EditAccountModal.propTypes={edit:prop_types_default().bool.isRequired,user:prop_types_default().object.isRequired,groups:prop_types_default().object.isRequired,teams:prop_types_default().object.isRequired,departments:prop_types_default().object.isRequired,saveEditAccount:prop_types_default().func.isRequired,fetchGroups:prop_types_default().func.isRequired,unloadGroups:prop_types_default().func.isRequired,fetchTeams:prop_types_default().func.isRequired,unloadTeams:prop_types_default().func.isRequired,fetchDepartments:prop_types_default().func.isRequired,unloadDepartments:prop_types_default().func.isRequired,fetchRoles:prop_types_default().func.isRequired,roles:prop_types_default().object.isRequired},EditAccountModal.defaultProps={edit:!1};const Modals_EditAccountModal=(0,es.$j)((function(state){return{groups:state.groupsState.groups,teams:state.teamsState.teams,departments:state.departmentsState.departments,roles:state.shared.roles}}),{saveEditAccount:accounts_saveEditAccount,fetchGroups:groups_fetchGroups,unloadGroups,fetchTeams:teams_fetchTeams,unloadTeams,fetchDepartments:departments_fetchDepartments,unloadDepartments:departments_unloadDepartments,fetchRoles:common_fetchRoles})(EditAccountModal);function CreateGroupModal_typeof(obj){return CreateGroupModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateGroupModal_typeof(obj)}var CreateGroupModal_class,CreateGroupModal_class2,CreateGroupModal_descriptor;function CreateGroupModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateGroupModal_setPrototypeOf(o,p){return CreateGroupModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},CreateGroupModal_setPrototypeOf(o,p)}function CreateGroupModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateGroupModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateGroupModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateGroupModal_possibleConstructorReturn(this,result)}}function CreateGroupModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateGroupModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreateGroupModal_assertThisInitialized(self)}function CreateGroupModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreateGroupModal_getPrototypeOf(o){return CreateGroupModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateGroupModal_getPrototypeOf(o)}var CreateGroupModal=(0,mobxreact_esm.Pi)((CreateGroupModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateGroupModal_setPrototypeOf(subClass,superClass)}(CreateGroupModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateGroupModal_createSuper(CreateGroupModal);function CreateGroupModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateGroupModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"name",CreateGroupModal_descriptor,CreateGroupModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(CreateGroupModal_assertThisInitialized(_this)),_this}return Constructor=CreateGroupModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchAccounts({type:"customers"}),helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadAccounts()}},{key:"onInputChange",value:function(e){this.name=e.target.value}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;var postData={name:this.name,members:this.membersSelect.getSelected()||[]};this.props.createGroup(postData)}},{key:"render",value:function(){var _this2=this,mappedAccounts=this.props.accounts.map((function(account){return{text:account.get("fullname"),value:account.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,null,react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Create Group")),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Group Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange(e)},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a valid Group name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Group Members"),react.createElement(components_MultiSelect,{items:mappedAccounts,onChange:function(){},ref:function(r){return _this2.membersSelect=r}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Create Group",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}])&&CreateGroupModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateGroupModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateGroupModal}(react.Component),CreateGroupModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(CreateGroupModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateGroupModal_class=CreateGroupModal_class2))||CreateGroupModal_class;CreateGroupModal.propTypes={accounts:prop_types_default().object.isRequired,fetchAccounts:prop_types_default().func.isRequired,unloadAccounts:prop_types_default().func.isRequired,createGroup:prop_types_default().func.isRequired};const Modals_CreateGroupModal=(0,es.$j)((function(state){return{accounts:state.accountsState.accounts}}),{createGroup:groups_createGroup,fetchAccounts:accounts_fetchAccounts,unloadAccounts})(CreateGroupModal);function EditGroupModal_typeof(obj){return EditGroupModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EditGroupModal_typeof(obj)}var EditGroupModal_class,EditGroupModal_class2,EditGroupModal_descriptor;function EditGroupModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EditGroupModal_setPrototypeOf(o,p){return EditGroupModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},EditGroupModal_setPrototypeOf(o,p)}function EditGroupModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EditGroupModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EditGroupModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EditGroupModal_possibleConstructorReturn(this,result)}}function EditGroupModal_possibleConstructorReturn(self,call){if(call&&("object"===EditGroupModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return EditGroupModal_assertThisInitialized(self)}function EditGroupModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function EditGroupModal_getPrototypeOf(o){return EditGroupModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},EditGroupModal_getPrototypeOf(o)}var EditGroupModal=(0,mobxreact_esm.Pi)((EditGroupModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EditGroupModal_setPrototypeOf(subClass,superClass)}(EditGroupModal,_React$Component);var Constructor,protoProps,staticProps,_super=EditGroupModal_createSuper(EditGroupModal);function EditGroupModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditGroupModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"name",EditGroupModal_descriptor,EditGroupModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(EditGroupModal_assertThisInitialized(_this)),_this}return Constructor=EditGroupModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchAccounts({type:"customers",limit:-1}),this.name=this.props.group.name,helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadAccounts()}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;var payload={_id:this.props.group._id,name:this.name,members:this.membersSelect.getSelected()||[],sendMailTo:this.sendMailToSelect.getSelected()||[]};this.props.updateGroup(payload)}},{key:"onInputChange",value:function(e){this.name=e.target.value}},{key:"render",value:function(){var _this2=this,mappedAccounts=this.props.accounts.map((function(account){return{text:account.get("fullname"),value:account.get("_id")}})).toArray(),selectedMembers=this.props.group.members.map((function(member){return member._id})),selectedSendMailTo=this.props.group.sendMailTo.map((function(member){return member._id}));return react.createElement(Modals_BaseModal,null,react.createElement(components_SpinLoader,{active:this.props.accountsLoading}),react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Edit Group")),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Group Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange(e)},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a valid Group name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Group Members"),react.createElement(components_MultiSelect,{items:mappedAccounts,initialSelected:selectedMembers,onChange:function(){},ref:function(r){return _this2.membersSelect=r}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Send Notifications To"),react.createElement(components_MultiSelect,{items:mappedAccounts,initialSelected:selectedSendMailTo,onChange:function(){},ref:function(r){return _this2.sendMailToSelect=r}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Save Group",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}])&&EditGroupModal_defineProperties(Constructor.prototype,protoProps),staticProps&&EditGroupModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EditGroupModal}(react.Component),EditGroupModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(EditGroupModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditGroupModal_class=EditGroupModal_class2))||EditGroupModal_class;EditGroupModal.propTypes={group:prop_types_default().object.isRequired,accounts:prop_types_default().object.isRequired,updateGroup:prop_types_default().func.isRequired,fetchAccounts:prop_types_default().func.isRequired,unloadAccounts:prop_types_default().func.isRequired,accountsLoading:prop_types_default().bool.isRequired};const Modals_EditGroupModal=(0,es.$j)((function(state){return{accounts:state.accountsState.accounts,accountsLoading:state.accountsState.loading}}),{updateGroup:groups_updateGroup,fetchAccounts:accounts_fetchAccounts,unloadAccounts})(EditGroupModal);function CreateTeamModal_typeof(obj){return CreateTeamModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateTeamModal_typeof(obj)}var CreateTeamModal_class,CreateTeamModal_class2,CreateTeamModal_descriptor;function CreateTeamModal_extends(){return CreateTeamModal_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},CreateTeamModal_extends.apply(this,arguments)}function CreateTeamModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateTeamModal_setPrototypeOf(o,p){return CreateTeamModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},CreateTeamModal_setPrototypeOf(o,p)}function CreateTeamModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateTeamModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateTeamModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateTeamModal_possibleConstructorReturn(this,result)}}function CreateTeamModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateTeamModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreateTeamModal_assertThisInitialized(self)}function CreateTeamModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreateTeamModal_getPrototypeOf(o){return CreateTeamModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateTeamModal_getPrototypeOf(o)}var CreateTeamModal=(0,mobxreact_esm.Pi)((CreateTeamModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateTeamModal_setPrototypeOf(subClass,superClass)}(CreateTeamModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateTeamModal_createSuper(CreateTeamModal);function CreateTeamModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateTeamModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"name",CreateTeamModal_descriptor,CreateTeamModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(CreateTeamModal_assertThisInitialized(_this)),_this}return Constructor=CreateTeamModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchAccounts({limit:-1}),helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadAccounts()}},{key:"onInputChange",value:function(e){this.name=e.target.value}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;var payload={name:this.name,members:this.membersSelect.getSelected()};this.props.createTeam(payload)}},{key:"render",value:function(){var _this2=this,mappedAccounts=this.props.accounts.filter((function(account){return!0===account.getIn(["role","isAgent"])&&!account.get("deleted")})).map((function(account){return{text:account.get("fullname"),value:account.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,CreateTeamModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Create Team")),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Team Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange(e)},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a valid Team name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Team Members"),react.createElement(components_MultiSelect,{items:mappedAccounts,onChange:function(){},ref:function(r){return _this2.membersSelect=r}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Create Team",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}])&&CreateTeamModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateTeamModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateTeamModal}(react.Component),CreateTeamModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(CreateTeamModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateTeamModal_class=CreateTeamModal_class2))||CreateTeamModal_class;CreateTeamModal.propTypes={fetchAccounts:prop_types_default().func.isRequired,unloadAccounts:prop_types_default().func.isRequired,accounts:prop_types_default().object.isRequired,createTeam:prop_types_default().func.isRequired};const Modals_CreateTeamModal=(0,es.$j)((function(state){return{accounts:state.accountsState.accounts}}),{fetchAccounts:accounts_fetchAccounts,unloadAccounts,createTeam:teams_createTeam})(CreateTeamModal);function EditTeamModal_typeof(obj){return EditTeamModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EditTeamModal_typeof(obj)}var EditTeamModal_class,EditTeamModal_class2,EditTeamModal_descriptor;function EditTeamModal_extends(){return EditTeamModal_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},EditTeamModal_extends.apply(this,arguments)}function EditTeamModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EditTeamModal_setPrototypeOf(o,p){return EditTeamModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},EditTeamModal_setPrototypeOf(o,p)}function EditTeamModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EditTeamModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EditTeamModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EditTeamModal_possibleConstructorReturn(this,result)}}function EditTeamModal_possibleConstructorReturn(self,call){if(call&&("object"===EditTeamModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return EditTeamModal_assertThisInitialized(self)}function EditTeamModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function EditTeamModal_getPrototypeOf(o){return EditTeamModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},EditTeamModal_getPrototypeOf(o)}var EditTeamModal=(0,mobxreact_esm.Pi)((EditTeamModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EditTeamModal_setPrototypeOf(subClass,superClass)}(EditTeamModal,_React$Component);var Constructor,protoProps,staticProps,_super=EditTeamModal_createSuper(EditTeamModal);function EditTeamModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditTeamModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"name",EditTeamModal_descriptor,EditTeamModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(EditTeamModal_assertThisInitialized(_this)),_this}return Constructor=EditTeamModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchAccounts({type:"all",limit:-1}),this.name=this.props.team.name,helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadAccounts()}},{key:"onInputChange",value:function(e){this.name=e.target.value}},{key:"onSaveTeamEdit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;var payload={_id:this.props.team._id,name:this.name,members:this.membersSelect.getSelected()||[]};this.props.saveEditTeam(payload)}},{key:"render",value:function(){var _this2=this,mappedAccounts=this.props.accounts.filter((function(account){return!0===account.getIn(["role","isAgent"])&&!account.get("deleted")})).map((function(account){return{text:account.get("fullname"),value:account.get("_id")}})).toArray(),selectedMembers=this.props.team.members;return react.createElement(Modals_BaseModal,EditTeamModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement(components_SpinLoader,{active:this.props.accountsLoading}),react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Edit Team")),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onSaveTeamEdit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Team Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange(e)},"data-validation":"length","data-validation-length":"2-25","data-validation-error-msg":"Please enter a valid Team name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Team Members"),react.createElement(components_MultiSelect,{items:mappedAccounts,initialSelected:selectedMembers,onChange:function(){},ref:function(r){return _this2.membersSelect=r}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Save Team",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}])&&EditTeamModal_defineProperties(Constructor.prototype,protoProps),staticProps&&EditTeamModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EditTeamModal}(react.Component),EditTeamModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(EditTeamModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditTeamModal_class=EditTeamModal_class2))||EditTeamModal_class;EditTeamModal.propTypes={team:prop_types_default().object.isRequired,fetchAccounts:prop_types_default().func.isRequired,unloadAccounts:prop_types_default().func.isRequired,saveEditTeam:prop_types_default().func.isRequired,accounts:prop_types_default().object.isRequired,accountsLoading:prop_types_default().bool.isRequired};const Modals_EditTeamModal=(0,es.$j)((function(state){return{accounts:state.accountsState.accounts,accountsLoading:state.accountsState.loading}}),{fetchAccounts:accounts_fetchAccounts,unloadAccounts,saveEditTeam})(EditTeamModal);function CreateDepartmentModal_typeof(obj){return CreateDepartmentModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateDepartmentModal_typeof(obj)}var CreateDepartmentModal_class,CreateDepartmentModal_class2,CreateDepartmentModal_descriptor,CreateDepartmentModal_descriptor2,CreateDepartmentModal_descriptor3;function CreateDepartmentModal_extends(){return CreateDepartmentModal_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},CreateDepartmentModal_extends.apply(this,arguments)}function CreateDepartmentModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function CreateDepartmentModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateDepartmentModal_setPrototypeOf(o,p){return CreateDepartmentModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},CreateDepartmentModal_setPrototypeOf(o,p)}function CreateDepartmentModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateDepartmentModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateDepartmentModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateDepartmentModal_possibleConstructorReturn(this,result)}}function CreateDepartmentModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateDepartmentModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreateDepartmentModal_assertThisInitialized(self)}function CreateDepartmentModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreateDepartmentModal_getPrototypeOf(o){return CreateDepartmentModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateDepartmentModal_getPrototypeOf(o)}function CreateDepartmentModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var CreateDepartmentModal=(0,mobxreact_esm.Pi)((CreateDepartmentModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateDepartmentModal_setPrototypeOf(subClass,superClass)}(CreateDepartmentModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateDepartmentModal_createSuper(CreateDepartmentModal);function CreateDepartmentModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateDepartmentModal),CreateDepartmentModal_initializerDefineProperty(_this=_super.call(this,props),"name",CreateDepartmentModal_descriptor,CreateDepartmentModal_assertThisInitialized(_this)),CreateDepartmentModal_initializerDefineProperty(_this,"allGroups",CreateDepartmentModal_descriptor2,CreateDepartmentModal_assertThisInitialized(_this)),CreateDepartmentModal_initializerDefineProperty(_this,"publicGroups",CreateDepartmentModal_descriptor3,CreateDepartmentModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(CreateDepartmentModal_assertThisInitialized(_this)),_this}return Constructor=CreateDepartmentModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchTeams(),this.props.fetchGroups({type:"all"}),helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadTeams(),this.props.unloadGroups()}},{key:"onInputChange",value:function(e){this.name=e.target.value}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;if(!this.allGroups&&!this.publicGroups&&null==this.groupSelect.getSelected())return helpers_default().UI.showSnackbar("Can not create department without a group selected or all groups enabled!",!0),!1;if(null==this.teamsSelect.getSelected())return helpers_default().UI.showSnackbar("Can not create department without a team selected!",!0),!1;var payload={name:this.name,teams:this.teamsSelect.getSelected(),allGroups:this.allGroups,publicGroups:this.publicGroups,groups:this.allGroups?[]:this.groupSelect.getSelected()};this.props.createDepartment(payload)}},{key:"render",value:function(){var _this2=this,mappedTeams=this.props.teams.map((function(team){return{text:team.get("name"),value:team.get("_id")}})).toArray(),mappedGroups=this.props.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,CreateDepartmentModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Create Department")),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Department Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange(e)},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a valid department name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Teams"),react.createElement(components_MultiSelect,{items:mappedTeams,onChange:function(){},ref:function(r){return _this2.teamsSelect=r}})),react.createElement("hr",null),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h4",{style:{paddingLeft:2}},"Access all current and new customer groups?")),react.createElement("div",{className:"uk-float-right md-switch md-green",style:{marginTop:5}},react.createElement("label",null,"Yes",react.createElement("input",{type:"checkbox",value:this.allGroups,onChange:function(e){_this2.allGroups=e.target.checked,_this2.allGroups?_this2.groupSelect.selectAll():_this2.groupSelect.deselectAll()}}),react.createElement("span",{className:"lever"})))),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h4",{style:{paddingLeft:2}},"Access all current and new public groups?")),react.createElement("div",{className:"uk-float-right md-switch md-green",style:{marginTop:1}},react.createElement("label",null,"Yes",react.createElement("input",{type:"checkbox",checked:this.publicGroups,onChange:function(e){_this2.publicGroups=e.target.checked}}),react.createElement("span",{className:"lever"})))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Customer Groups"),react.createElement(components_MultiSelect,{items:mappedGroups,onChange:function(){},ref:function(r){return _this2.groupSelect=r},disabled:this.allGroups})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Create Department",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}])&&CreateDepartmentModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateDepartmentModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateDepartmentModal}(react.Component),CreateDepartmentModal_descriptor=CreateDepartmentModal_applyDecoratedDescriptor(CreateDepartmentModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateDepartmentModal_descriptor2=CreateDepartmentModal_applyDecoratedDescriptor(CreateDepartmentModal_class2.prototype,"allGroups",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),CreateDepartmentModal_descriptor3=CreateDepartmentModal_applyDecoratedDescriptor(CreateDepartmentModal_class2.prototype,"publicGroups",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),CreateDepartmentModal_class=CreateDepartmentModal_class2))||CreateDepartmentModal_class;CreateDepartmentModal.propTypes={createDepartment:prop_types_default().func.isRequired,fetchTeams:prop_types_default().func.isRequired,unloadTeams:prop_types_default().func.isRequired,fetchGroups:prop_types_default().func.isRequired,unloadGroups:prop_types_default().func.isRequired,teams:prop_types_default().object.isRequired,groups:prop_types_default().object.isRequired};const Modals_CreateDepartmentModal=(0,es.$j)((function(state){return{teams:state.teamsState.teams,groups:state.groupsState.groups}}),{createDepartment:departments_createDepartment,fetchTeams:teams_fetchTeams,unloadTeams,fetchGroups:groups_fetchGroups,unloadGroups})(CreateDepartmentModal);function EditDepartmentModal_typeof(obj){return EditDepartmentModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EditDepartmentModal_typeof(obj)}var EditDepartmentModal_class,EditDepartmentModal_class2,EditDepartmentModal_descriptor,EditDepartmentModal_descriptor2,EditDepartmentModal_descriptor3;function EditDepartmentModal_extends(){return EditDepartmentModal_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},EditDepartmentModal_extends.apply(this,arguments)}function EditDepartmentModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function EditDepartmentModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EditDepartmentModal_setPrototypeOf(o,p){return EditDepartmentModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},EditDepartmentModal_setPrototypeOf(o,p)}function EditDepartmentModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EditDepartmentModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EditDepartmentModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EditDepartmentModal_possibleConstructorReturn(this,result)}}function EditDepartmentModal_possibleConstructorReturn(self,call){if(call&&("object"===EditDepartmentModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return EditDepartmentModal_assertThisInitialized(self)}function EditDepartmentModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function EditDepartmentModal_getPrototypeOf(o){return EditDepartmentModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},EditDepartmentModal_getPrototypeOf(o)}function EditDepartmentModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var EditDepartmentModal=(0,mobxreact_esm.Pi)((EditDepartmentModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EditDepartmentModal_setPrototypeOf(subClass,superClass)}(EditDepartmentModal,_React$Component);var Constructor,protoProps,staticProps,_super=EditDepartmentModal_createSuper(EditDepartmentModal);function EditDepartmentModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditDepartmentModal),EditDepartmentModal_initializerDefineProperty(_this=_super.call(this,props),"name",EditDepartmentModal_descriptor,EditDepartmentModal_assertThisInitialized(_this)),EditDepartmentModal_initializerDefineProperty(_this,"allGroups",EditDepartmentModal_descriptor2,EditDepartmentModal_assertThisInitialized(_this)),EditDepartmentModal_initializerDefineProperty(_this,"publicGroups",EditDepartmentModal_descriptor3,EditDepartmentModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(EditDepartmentModal_assertThisInitialized(_this)),_this}return Constructor=EditDepartmentModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchTeams(),this.props.fetchGroups({type:"all"}),this.name=this.props.department.get("name"),this.allGroups=this.props.department.get("allGroups"),this.publicGroups=!!this.allGroups||this.props.department.get("publicGroups"),helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs(),this.allGroups&&this.groupSelect.selectAll()}},{key:"componentWillUnmount",value:function(){this.props.unloadTeams(),this.props.unloadGroups()}},{key:"onInputChange",value:function(e){this.name=e.target.value}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;var payload={_id:this.props.department.get("_id"),name:this.name,teams:this.teamsSelect.getSelected(),allGroups:this.allGroups,publicGroups:this.publicGroups,groups:this.allGroups?[]:this.groupSelect.getSelected()};this.props.updateDepartment(payload)}},{key:"render",value:function(){var _this2=this,department=this.props.department,departmentTeams=department.get("teams"),departmentGroups=department.get("groups"),mappedTeams=this.props.teams.map((function(team){return{text:team.get("name"),value:team.get("_id")}})).toArray(),mappedGroups=this.props.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,EditDepartmentModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Edit Department: ",department.get("name"))),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Department Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange(e)},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a valid department name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Teams"),react.createElement(components_MultiSelect,{items:mappedTeams,initialSelected:departmentTeams?departmentTeams.map((function(d){return d.get("_id")})).toArray():[],onChange:function(){},ref:function(r){return _this2.teamsSelect=r}})),react.createElement("hr",null),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h4",{style:{paddingLeft:2}},"Access all current and new customer groups?")),react.createElement("div",{className:"uk-float-right md-switch md-green",style:{marginTop:5}},react.createElement("label",null,"Yes",react.createElement("input",{type:"checkbox",checked:this.allGroups,onChange:function(e){_this2.allGroups=e.target.checked,_this2.publicGroups=_this2.allGroups,_this2.allGroups?_this2.groupSelect.selectAll():_this2.groupSelect.deselectAll()}}),react.createElement("span",{className:"lever"})))),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h4",{style:{paddingLeft:2}},"Access all current and new public groups?")),react.createElement("div",{className:"uk-float-right md-switch md-green",style:{marginTop:1}},react.createElement("label",null,"Yes",react.createElement("input",{type:"checkbox",checked:this.publicGroups,onChange:function(e){_this2.publicGroups=e.target.checked}}),react.createElement("span",{className:"lever"})))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Customer Groups"),react.createElement(components_MultiSelect,{items:mappedGroups,onChange:function(){},initialSelected:departmentGroups?departmentGroups.map((function(d){return d.get("_id")})).toArray():[],ref:function(r){return _this2.groupSelect=r},disabled:this.allGroups})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Save Department",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}])&&EditDepartmentModal_defineProperties(Constructor.prototype,protoProps),staticProps&&EditDepartmentModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EditDepartmentModal}(react.Component),EditDepartmentModal_descriptor=EditDepartmentModal_applyDecoratedDescriptor(EditDepartmentModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditDepartmentModal_descriptor2=EditDepartmentModal_applyDecoratedDescriptor(EditDepartmentModal_class2.prototype,"allGroups",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),EditDepartmentModal_descriptor3=EditDepartmentModal_applyDecoratedDescriptor(EditDepartmentModal_class2.prototype,"publicGroups",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),EditDepartmentModal_class=EditDepartmentModal_class2))||EditDepartmentModal_class;EditDepartmentModal.propTypes={department:prop_types_default().object.isRequired,updateDepartment:prop_types_default().func.isRequired,fetchTeams:prop_types_default().func.isRequired,unloadTeams:prop_types_default().func.isRequired,fetchGroups:prop_types_default().func.isRequired,unloadGroups:prop_types_default().func.isRequired,teams:prop_types_default().object.isRequired,groups:prop_types_default().object.isRequired};const Modals_EditDepartmentModal=(0,es.$j)((function(state){return{teams:state.teamsState.teams,groups:state.groupsState.groups}}),{updateDepartment:departments_updateDepartment,fetchTeams:teams_fetchTeams,unloadTeams,fetchGroups:groups_fetchGroups,unloadGroups})(EditDepartmentModal);var index_module=__webpack_require__(824);const PopoverColorPicker_useClickOutside=(ref,handler)=>{(0,react.useEffect)((()=>{let startedInside=!1,startedWhenMounted=!1;const listener=event=>{!startedInside&&startedWhenMounted&&ref.current&&!ref.current.contains(event.target)&&handler(event)},validateEventStart=event=>{startedWhenMounted=ref.current,startedInside=ref.current&&ref.current.contains(event.target)};return document.addEventListener("mousedown",validateEventStart),document.addEventListener("touchstart",validateEventStart),document.addEventListener("click",listener),()=>{document.removeEventListener("mousedown",validateEventStart),document.removeEventListener("touchstart",validateEventStart),document.removeEventListener("click",listener)}}),[ref,handler])};function PopoverColorPicker_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return PopoverColorPicker_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PopoverColorPicker_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PopoverColorPicker_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var PopoverColorPicker=function(_ref){var color=_ref.color,onChange=_ref.onChange,style=_ref.style,popover=(0,react.useRef)(),_useState2=PopoverColorPicker_slicedToArray((0,react.useState)(!1),2),isOpen=_useState2[0],toggle=_useState2[1],close=(0,react.useCallback)((function(){return toggle(!1)}),[]);return PopoverColorPicker_useClickOutside(popover,close),react.createElement("div",{className:"picker",style},react.createElement("div",{className:"swatch",style:{backgroundColor:color},onClick:function(){return toggle(!0)}}),isOpen&&react.createElement("div",{className:"popover",ref:popover},react.createElement(index_module.gW,{color,onChange})))};const notices_fetchNotices=(0,createAction.Z)(FETCH_NOTICES.ACTION),notices_createNotice=(0,createAction.Z)(CREATE_NOTICE.ACTION,(payload=>payload),(()=>({thunk:!0}))),notices_updateNotice=(0,createAction.Z)(UPDATE_NOTICE.ACTION),unloadNotices=(0,createAction.Z)(UNLOAD_NOTICES.ACTION,(payload=>payload),(()=>({thunk:!0}))),notices_deleteNotice=(0,createAction.Z)(DELETE_NOTICE.ACTION);function CreateNoticeModal_typeof(obj){return CreateNoticeModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateNoticeModal_typeof(obj)}var CreateNoticeModal_class,CreateNoticeModal_class2,CreateNoticeModal_descriptor,CreateNoticeModal_descriptor2,CreateNoticeModal_descriptor3,CreateNoticeModal_descriptor4;function CreateNoticeModal_extends(){return CreateNoticeModal_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},CreateNoticeModal_extends.apply(this,arguments)}function CreateNoticeModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function CreateNoticeModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateNoticeModal_setPrototypeOf(o,p){return CreateNoticeModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},CreateNoticeModal_setPrototypeOf(o,p)}function CreateNoticeModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateNoticeModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateNoticeModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateNoticeModal_possibleConstructorReturn(this,result)}}function CreateNoticeModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateNoticeModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreateNoticeModal_assertThisInitialized(self)}function CreateNoticeModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreateNoticeModal_getPrototypeOf(o){return CreateNoticeModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateNoticeModal_getPrototypeOf(o)}function CreateNoticeModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var CreateNoticeModal=(0,mobxreact_esm.Pi)((CreateNoticeModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateNoticeModal_setPrototypeOf(subClass,superClass)}(CreateNoticeModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateNoticeModal_createSuper(CreateNoticeModal);function CreateNoticeModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateNoticeModal),CreateNoticeModal_initializerDefineProperty(_this=_super.call(this,props),"name",CreateNoticeModal_descriptor,CreateNoticeModal_assertThisInitialized(_this)),CreateNoticeModal_initializerDefineProperty(_this,"message",CreateNoticeModal_descriptor2,CreateNoticeModal_assertThisInitialized(_this)),CreateNoticeModal_initializerDefineProperty(_this,"color",CreateNoticeModal_descriptor3,CreateNoticeModal_assertThisInitialized(_this)),CreateNoticeModal_initializerDefineProperty(_this,"fontColor",CreateNoticeModal_descriptor4,CreateNoticeModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(CreateNoticeModal_assertThisInitialized(_this)),_this}return Constructor=CreateNoticeModal,protoProps=[{key:"componentDidMount",value:function(){this.color="#4CAF50",this.fontColor="#ffffff",helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){helpers_default().UI.reRenderInputs()}},{key:"onInputChange",value:function(target,e){this[target]=e.target.value}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;var payload={name:this.name,message:this.message,color:this.color,fontColor:this.fontColor};this.props.createNotice(payload).then((function(){helpers_default().resizeAll()}))}},{key:"render",value:function(){var _this2=this;return react.createElement(Modals_BaseModal,CreateNoticeModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Create Notice")),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange("name",e)},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a notice name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Message"),react.createElement("textarea",{className:"md-input",value:this.message,onChange:function(e){return _this2.onInputChange("message",e)},"data-validation":"length","data-validation-length":"min10","data-validation-error-msg":"Please enter a notice message. (Must contain 10 characters)"})),react.createElement("div",null,react.createElement("span",{style:{display:"inline-block",float:"left",paddingTop:5}},"Background Color"),react.createElement(PopoverColorPicker,{color:this.color,onChange:function(c){_this2.color=c},style:{float:"left",marginLeft:5,marginRight:15}}),react.createElement("span",{style:{display:"inline-block",float:"left",paddingTop:5}},"Font Color"),react.createElement(PopoverColorPicker,{color:this.fontColor,onChange:function(c){_this2.fontColor=c},style:{float:"left",marginLeft:5}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Create Notice",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}],protoProps&&CreateNoticeModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateNoticeModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateNoticeModal}(react.Component),CreateNoticeModal_descriptor=CreateNoticeModal_applyDecoratedDescriptor(CreateNoticeModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateNoticeModal_descriptor2=CreateNoticeModal_applyDecoratedDescriptor(CreateNoticeModal_class2.prototype,"message",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateNoticeModal_descriptor3=CreateNoticeModal_applyDecoratedDescriptor(CreateNoticeModal_class2.prototype,"color",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateNoticeModal_descriptor4=CreateNoticeModal_applyDecoratedDescriptor(CreateNoticeModal_class2.prototype,"fontColor",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateNoticeModal_class=CreateNoticeModal_class2))||CreateNoticeModal_class;CreateNoticeModal.propTypes={createNotice:prop_types_default().func.isRequired};const Modals_CreateNoticeModal=(0,es.$j)((function(state){return{}}),{createNotice:notices_createNotice})(CreateNoticeModal);function EditNoticeModal_typeof(obj){return EditNoticeModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EditNoticeModal_typeof(obj)}var EditNoticeModal_class,EditNoticeModal_class2,EditNoticeModal_descriptor,EditNoticeModal_descriptor2,EditNoticeModal_descriptor3,EditNoticeModal_descriptor4;function EditNoticeModal_extends(){return EditNoticeModal_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},EditNoticeModal_extends.apply(this,arguments)}function EditNoticeModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function EditNoticeModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EditNoticeModal_setPrototypeOf(o,p){return EditNoticeModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},EditNoticeModal_setPrototypeOf(o,p)}function EditNoticeModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EditNoticeModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EditNoticeModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EditNoticeModal_possibleConstructorReturn(this,result)}}function EditNoticeModal_possibleConstructorReturn(self,call){if(call&&("object"===EditNoticeModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return EditNoticeModal_assertThisInitialized(self)}function EditNoticeModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function EditNoticeModal_getPrototypeOf(o){return EditNoticeModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},EditNoticeModal_getPrototypeOf(o)}function EditNoticeModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var EditNoticeModal=(0,mobxreact_esm.Pi)((EditNoticeModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EditNoticeModal_setPrototypeOf(subClass,superClass)}(EditNoticeModal,_React$Component);var Constructor,protoProps,staticProps,_super=EditNoticeModal_createSuper(EditNoticeModal);function EditNoticeModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditNoticeModal),EditNoticeModal_initializerDefineProperty(_this=_super.call(this,props),"name",EditNoticeModal_descriptor,EditNoticeModal_assertThisInitialized(_this)),EditNoticeModal_initializerDefineProperty(_this,"message",EditNoticeModal_descriptor2,EditNoticeModal_assertThisInitialized(_this)),EditNoticeModal_initializerDefineProperty(_this,"color",EditNoticeModal_descriptor3,EditNoticeModal_assertThisInitialized(_this)),EditNoticeModal_initializerDefineProperty(_this,"fontColor",EditNoticeModal_descriptor4,EditNoticeModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(EditNoticeModal_assertThisInitialized(_this)),_this}return Constructor=EditNoticeModal,protoProps=[{key:"componentDidMount",value:function(){this.name=this.props.notice.name,this.message=this.props.notice.message,this.color=this.props.notice.color,this.fontColor=this.props.notice.fontColor,helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){helpers_default().UI.reRenderInputs()}},{key:"onInputChange",value:function(target,e){this[target]=e.target.value}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;var payload={_id:this.props.notice._id,name:this.name,message:this.message,color:this.color,fontColor:this.fontColor};this.props.updateNotice(payload)}},{key:"render",value:function(){var _this2=this;return react.createElement(Modals_BaseModal,EditNoticeModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Edit Notice")),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange("name",e)},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a notice name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Message"),react.createElement("textarea",{className:"md-input",value:this.message,onChange:function(e){return _this2.onInputChange("message",e)},"data-validation":"length","data-validation-length":"min10","data-validation-error-msg":"Please enter a notice message. (Must contain 10 characters)"})),react.createElement("div",null,react.createElement("span",{style:{display:"inline-block",float:"left",paddingTop:5}},"Background Color"),react.createElement(PopoverColorPicker,{color:this.color,onChange:function(c){_this2.color=c},style:{float:"left",marginLeft:5,marginRight:15}}),react.createElement("span",{style:{display:"inline-block",float:"left",paddingTop:5}},"Font Color"),react.createElement(PopoverColorPicker,{color:this.fontColor,onChange:function(c){_this2.fontColor=c},style:{float:"left",marginLeft:5}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Save Notice",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}],protoProps&&EditNoticeModal_defineProperties(Constructor.prototype,protoProps),staticProps&&EditNoticeModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EditNoticeModal}(react.Component),EditNoticeModal_descriptor=EditNoticeModal_applyDecoratedDescriptor(EditNoticeModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditNoticeModal_descriptor2=EditNoticeModal_applyDecoratedDescriptor(EditNoticeModal_class2.prototype,"message",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditNoticeModal_descriptor3=EditNoticeModal_applyDecoratedDescriptor(EditNoticeModal_class2.prototype,"color",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditNoticeModal_descriptor4=EditNoticeModal_applyDecoratedDescriptor(EditNoticeModal_class2.prototype,"fontColor",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditNoticeModal_class=EditNoticeModal_class2))||EditNoticeModal_class;EditNoticeModal.propTypes={notice:prop_types_default().object.isRequired,updateNotice:prop_types_default().func.isRequired};const Modals_EditNoticeModal=(0,es.$j)((function(state){return{}}),{updateNotice:notices_updateNotice})(EditNoticeModal);function LinkWarningModal_typeof(obj){return LinkWarningModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},LinkWarningModal_typeof(obj)}function LinkWarningModal_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function LinkWarningModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function LinkWarningModal_setPrototypeOf(o,p){return LinkWarningModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},LinkWarningModal_setPrototypeOf(o,p)}function LinkWarningModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=LinkWarningModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=LinkWarningModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return LinkWarningModal_possibleConstructorReturn(this,result)}}function LinkWarningModal_possibleConstructorReturn(self,call){if(call&&("object"===LinkWarningModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function LinkWarningModal_getPrototypeOf(o){return LinkWarningModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},LinkWarningModal_getPrototypeOf(o)}var LinkWarningModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&LinkWarningModal_setPrototypeOf(subClass,superClass)}(LinkWarningModal,_React$Component);var Constructor,protoProps,staticProps,_super=LinkWarningModal_createSuper(LinkWarningModal);function LinkWarningModal(){var _this;LinkWarningModal_classCallCheck(this,LinkWarningModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).proceedToLink=function(e,link){e.preventDefault(),_this.props.hideModal(),setTimeout((function(){window.open(link,"_blank")}),300)},_this}return Constructor=LinkWarningModal,(protoProps=[{key:"render",value:function(){var _this2=this;return react.createElement(Modals_BaseModal,null,react.createElement("div",null,react.createElement("h2",null,"Redirect Warning"),react.createElement("p",null,"You are being redirected to a site outside this domain. Proceed with caution."),react.createElement("p",null,react.createElement("strong",null,this.props.href))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Cancel",extraClass:"uk-modal-close",flat:!0,waves:!0}),react.createElement(components_Button,{text:"Proceed",type:"submit",flat:!0,waves:!0,style:"danger",onClick:function(e){return _this2.proceedToLink(e,_this2.props.href)}})))}}])&&LinkWarningModal_defineProperties(Constructor.prototype,protoProps),staticProps&&LinkWarningModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),LinkWarningModal}(react.Component);LinkWarningModal.propTypes={hideModal:prop_types_default().func.isRequired,href:prop_types_default().string.isRequired};const Modals_LinkWarningModal=(0,es.$j)(null,{hideModal})(LinkWarningModal);function Input_typeof(obj){return Input_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Input_typeof(obj)}var Input_class,Input_class2,Input_descriptor;function Input_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Input_setPrototypeOf(o,p){return Input_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Input_setPrototypeOf(o,p)}function Input_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Input_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Input_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Input_possibleConstructorReturn(this,result)}}function Input_possibleConstructorReturn(self,call){if(call&&("object"===Input_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Input_assertThisInitialized(self)}function Input_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Input_getPrototypeOf(o){return Input_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Input_getPrototypeOf(o)}var Input=(0,mobxreact_esm.Pi)((Input_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Input_setPrototypeOf(subClass,superClass)}(Input,_React$Component);var Constructor,protoProps,staticProps,_super=Input_createSuper(Input);function Input(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Input),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"value",Input_descriptor,Input_assertThisInitialized(_this)),_this.handleChange=function(e){_this.value=e.target.value,_this.props.onChange&&_this.props.onChange(_this.value)},_this}return Constructor=Input,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs()}},{key:"render",value:function(){var _this2=this,_this$props=this.props,name=_this$props.name,type=_this$props.type,defaultValue=_this$props.defaultValue;return react.createElement("div",null,react.createElement("input",{className:"md-input",name,type,defaultValue,onChange:function(e){return _this2.handleChange(e)}}))}}])&&Input_defineProperties(Constructor.prototype,protoProps),staticProps&&Input_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Input}(react.Component),Input_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(Input_class2.prototype,"value",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Input_class=Input_class2))||Input_class;Input.propTypes={name:prop_types_default().string,type:prop_types_default().string,defaultValue:prop_types_default().string,onChange:prop_types_default().func},Input.defaultProps={type:"text"};const components_Input=Input;function PasswordPromptModal_typeof(obj){return PasswordPromptModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PasswordPromptModal_typeof(obj)}var PasswordPromptModal_class,PasswordPromptModal_class2,PasswordPromptModal_descriptor;function PasswordPromptModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function PasswordPromptModal_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PasswordPromptModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PasswordPromptModal_setPrototypeOf(o,p){return PasswordPromptModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},PasswordPromptModal_setPrototypeOf(o,p)}function PasswordPromptModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=PasswordPromptModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PasswordPromptModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PasswordPromptModal_possibleConstructorReturn(this,result)}}function PasswordPromptModal_possibleConstructorReturn(self,call){if(call&&("object"===PasswordPromptModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return PasswordPromptModal_assertThisInitialized(self)}function PasswordPromptModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function PasswordPromptModal_getPrototypeOf(o){return PasswordPromptModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},PasswordPromptModal_getPrototypeOf(o)}var PasswordPromptModal=(0,mobxreact_esm.Pi)((PasswordPromptModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PasswordPromptModal_setPrototypeOf(subClass,superClass)}(PasswordPromptModal,_React$Component);var Constructor,protoProps,staticProps,_super=PasswordPromptModal_createSuper(PasswordPromptModal);function PasswordPromptModal(){var _this;PasswordPromptModal_classCallCheck(this,PasswordPromptModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return PasswordPromptModal_initializerDefineProperty(_this=_super.call.apply(_super,[this].concat(args)),"confirmPassword",PasswordPromptModal_descriptor,PasswordPromptModal_assertThisInitialized(_this)),_this.onVerifyPassword=function(e){e.preventDefault(),axios_default().post("/api/v2/accounts/profile/mfa/disable",{confirmPassword:_this.confirmPassword}).then((function(res){_this.props.hideModal(),_this.props.onVerifyComplete&&_this.props.onVerifyComplete(!0)})).catch((function(error){var errMessage="An Error has occurred.";error.response&&error.response.data&&error.response.data.error&&(errMessage=error.response.data.error),helpers_default().UI.showSnackbar(errMessage,!0),_this.props.onVerifyComplete&&_this.props.onVerifyComplete(!1)}))},_this}return Constructor=PasswordPromptModal,(protoProps=[{key:"render",value:function(){var _this2=this,_this$props=this.props,titleOverride=_this$props.titleOverride,textOverride=_this$props.textOverride;return react.createElement(Modals_BaseModal,{options:{bgclose:!1}},react.createElement("div",null,react.createElement("h2",null,titleOverride||"Confirm Password"),react.createElement("p",null,textOverride||"Please confirm your password.")),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Current Password"),react.createElement(components_Input,{name:"current-password",type:"password",onChange:function(val){return _this2.confirmPassword=val}})),react.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},react.createElement(components_Button,{text:"Cancel",small:!0,flat:!0,waves:!1,onClick:function(){return _this2.props.hideModal()}}),react.createElement(components_Button,{text:"Verify Password",style:"primary",small:!0,waves:!0,onClick:function(e){return _this2.onVerifyPassword(e)}})))}}])&&PasswordPromptModal_defineProperties(Constructor.prototype,protoProps),staticProps&&PasswordPromptModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PasswordPromptModal}(react.Component),PasswordPromptModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(PasswordPromptModal_class2.prototype,"confirmPassword",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),PasswordPromptModal_class=PasswordPromptModal_class2))||PasswordPromptModal_class;PasswordPromptModal.propTypes={user:prop_types_default().object.isRequired,titleOverride:prop_types_default().string,textOverride:prop_types_default().string,onVerifyComplete:prop_types_default().func.isRequired,hideModal:prop_types_default().func.isRequired};const Modals_PasswordPromptModal=(0,es.$j)((function(state){return{}}),{hideModal})(PasswordPromptModal);var PrivacyPolicyModal_class,PrivacyPolicyModal_class2,PrivacyPolicyModal_descriptor,react_markdown=__webpack_require__(825),remark_gfm=__webpack_require__(850),rehype_raw=__webpack_require__(851);function PrivacyPolicyModal_typeof(obj){return PrivacyPolicyModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PrivacyPolicyModal_typeof(obj)}function PrivacyPolicyModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PrivacyPolicyModal_setPrototypeOf(o,p){return PrivacyPolicyModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},PrivacyPolicyModal_setPrototypeOf(o,p)}function PrivacyPolicyModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=PrivacyPolicyModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PrivacyPolicyModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PrivacyPolicyModal_possibleConstructorReturn(this,result)}}function PrivacyPolicyModal_possibleConstructorReturn(self,call){if(call&&("object"===PrivacyPolicyModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return PrivacyPolicyModal_assertThisInitialized(self)}function PrivacyPolicyModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function PrivacyPolicyModal_getPrototypeOf(o){return PrivacyPolicyModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},PrivacyPolicyModal_getPrototypeOf(o)}var PrivacyPolicyModal=(0,mobxreact_esm.Pi)((PrivacyPolicyModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PrivacyPolicyModal_setPrototypeOf(subClass,superClass)}(PrivacyPolicyModal,_React$Component);var Constructor,protoProps,staticProps,_super=PrivacyPolicyModal_createSuper(PrivacyPolicyModal);function PrivacyPolicyModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PrivacyPolicyModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"privacyPolicy",PrivacyPolicyModal_descriptor,PrivacyPolicyModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(PrivacyPolicyModal_assertThisInitialized(_this)),_this}return Constructor=PrivacyPolicyModal,(protoProps=[{key:"componentDidMount",value:function(){var _this2=this;axios_default().get("/api/v1/privacypolicy").then((function(res){_this2.privacyPolicy=res.data?res.data.privacyPolicy:""})).catch((function(err){logger.error(err)}))}},{key:"render",value:function(){return react.createElement(Modals_BaseModal,{large:!0,options:{}},react.createElement("div",{className:"uk-overflow-container"},react.createElement(react_markdown.D,{remarkPlugins:[remark_gfm.Z],rehypePlugins:[rehype_raw.Z]},this.privacyPolicy.toString().replace(/\\n/gi,"\n"))))}}])&&PrivacyPolicyModal_defineProperties(Constructor.prototype,protoProps),staticProps&&PrivacyPolicyModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PrivacyPolicyModal}(react.Component),PrivacyPolicyModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(PrivacyPolicyModal_class2.prototype,"privacyPolicy",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),PrivacyPolicyModal_class=PrivacyPolicyModal_class2))||PrivacyPolicyModal_class;PrivacyPolicyModal.propTypes={};var MODAL_COMPONENTS={NOTICE_ALERT:Modals_NoticeAlertModal,CREATE_TICKET:Modals_CreateTicketModal,CREATE_TICKET_TYPE:Modals_CreateTicketTypeModal,DELETE_TICKET_TYPE:Modals_DeleteTicketTypeModal,FILTER_TICKET:Modals_FilterTicketsModal,ADD_PRIORITY_TO_TYPE:Modals_AddPriorityToTypeModal,CREATE_PRIORITY:Modals_CreatePriorityModal,DELETE_PRIORITY:Modals_DeletePriorityModal,CREATE_TAG:Modals_CreateTagModal,ADD_TAGS_MODAL:Modals_AddTagsModal,CREATE_ROLE:Modals_CreateRoleModal,DELETE_ROLE:Modals_DeleteRoleModal,VIEW_ALL_NOTIFICATIONS:Modals_ViewAllNotificationsModal,CREATE_ACCOUNT:Modals_CreateAccountModal,EDIT_ACCOUNT:Modals_EditAccountModal,CREATE_GROUP:Modals_CreateGroupModal,EDIT_GROUP:Modals_EditGroupModal,CREATE_TEAM:Modals_CreateTeamModal,EDIT_TEAM:Modals_EditTeamModal,CREATE_DEPARTMENT:Modals_CreateDepartmentModal,EDIT_DEPARTMENT:Modals_EditDepartmentModal,CREATE_NOTICE:Modals_CreateNoticeModal,EDIT_NOTICE:Modals_EditNoticeModal,LINK_WARNING:Modals_LinkWarningModal,PASSWORD_PROMPT:Modals_PasswordPromptModal,PRIVACY_POLICY:PrivacyPolicyModal},ModalRoot=function(_ref){var modalType=_ref.modalType,modalProps=_ref.modalProps;if(!modalType)return react.createElement("div",{id:"modal-wrap"});var SpecificModal=MODAL_COMPONENTS[modalType];return react.createElement(SpecificModal,modalProps)};ModalRoot.propTypes={modalType:prop_types_default().string,modalProps:prop_types_default().object};const Modals=(0,es.$j)((function(state){return state.modal}))(ModalRoot),dashboard_fetchDashboardData=(0,createAction.Z)(FETCH_DASHBOARD_DATA.ACTION,(payload=>payload),(()=>({thunk:!0}))),dashboard_fetchDashboardTopGroups=(0,createAction.Z)(FETCH_DASHBOARD_TOP_GROUPS.ACTION,(payload=>payload)),dashboard_fetchDashboardTopTags=(0,createAction.Z)(FETCH_DASHBOARD_TOP_TAGS.ACTION,(payload=>payload)),dashboard_fetchDashboardOverdueTickets=(0,createAction.Z)(FETCH_DASHBOARD_OVERDUE_TICKETS.ACTION);function PageTitle_typeof(obj){return PageTitle_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PageTitle_typeof(obj)}function PageTitle_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PageTitle_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PageTitle_setPrototypeOf(o,p){return PageTitle_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},PageTitle_setPrototypeOf(o,p)}function PageTitle_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=PageTitle_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PageTitle_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PageTitle_possibleConstructorReturn(this,result)}}function PageTitle_possibleConstructorReturn(self,call){if(call&&("object"===PageTitle_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PageTitle_getPrototypeOf(o){return PageTitle_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},PageTitle_getPrototypeOf(o)}var PageTitle=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PageTitle_setPrototypeOf(subClass,superClass)}(PageTitle,_React$Component);var Constructor,protoProps,staticProps,_super=PageTitle_createSuper(PageTitle);function PageTitle(){return PageTitle_classCallCheck(this,PageTitle),_super.apply(this,arguments)}return Constructor=PageTitle,(protoProps=[{key:"render",value:function(){var _this$props=this.props,title=_this$props.title,rightComponent=_this$props.rightComponent,shadow=_this$props.shadow,hideBorderBottom=_this$props.hideBorderBottom,extraClasses=_this$props.extraClasses;return react.createElement("div",{className:(0,clsx_m.Z)("nopadding",extraClasses)},react.createElement("div",{className:(0,clsx_m.Z)("uk-width-1-1","page-title","pl-25","uk-clearfix",hideBorderBottom?"nbb":"dt-borderBottom",!shadow&&"noshadow")},react.createElement("p",{className:"uk-float-left"},title),react.createElement("div",{className:"uk-float-right uk-clearfix uk-width-1-2"},rightComponent)))}}])&&PageTitle_defineProperties(Constructor.prototype,protoProps),staticProps&&PageTitle_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PageTitle}(react.Component);PageTitle.propTypes={title:prop_types_default().string.isRequired,shadow:prop_types_default().bool,hideBorderBottom:prop_types_default().bool,extraClasses:prop_types_default().string,rightComponent:prop_types_default().element},PageTitle.defaultProps={shadow:!1,hideBorderBottom:!1};const components_PageTitle=PageTitle;function PageContent_typeof(obj){return PageContent_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PageContent_typeof(obj)}function PageContent_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PageContent_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PageContent_setPrototypeOf(o,p){return PageContent_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},PageContent_setPrototypeOf(o,p)}function PageContent_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=PageContent_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PageContent_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PageContent_possibleConstructorReturn(this,result)}}function PageContent_possibleConstructorReturn(self,call){if(call&&("object"===PageContent_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PageContent_getPrototypeOf(o){return PageContent_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},PageContent_getPrototypeOf(o)}var PageContent=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PageContent_setPrototypeOf(subClass,superClass)}(PageContent,_React$Component);var Constructor,protoProps,staticProps,_super=PageContent_createSuper(PageContent);function PageContent(){return PageContent_classCallCheck(this,PageContent),_super.apply(this,arguments)}return Constructor=PageContent,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().resizeFullHeight(),helpers_default().setupScrollers()}},{key:"render",value:function(){return react.createElement("div",{id:this.props.id,className:"page-content no-border-top full-height scrollable "+(this.props.extraClass||""),style:{padding:this.props.padding}},react.createElement("div",{style:{paddingBottom:this.props.paddingBottom}},this.props.children))}}])&&PageContent_defineProperties(Constructor.prototype,protoProps),staticProps&&PageContent_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PageContent}(react.Component);PageContent.propTypes={id:prop_types_default().string,padding:prop_types_default().number,paddingBottom:prop_types_default().number,extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired},PageContent.defaultProps={padding:25,paddingBottom:100};const components_PageContent=PageContent;function DropdownTrigger_typeof(obj){return DropdownTrigger_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DropdownTrigger_typeof(obj)}function DropdownTrigger_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DropdownTrigger_setPrototypeOf(o,p){return DropdownTrigger_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},DropdownTrigger_setPrototypeOf(o,p)}function DropdownTrigger_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DropdownTrigger_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DropdownTrigger_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DropdownTrigger_possibleConstructorReturn(this,result)}}function DropdownTrigger_possibleConstructorReturn(self,call){if(call&&("object"===DropdownTrigger_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DropdownTrigger_getPrototypeOf(o){return DropdownTrigger_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},DropdownTrigger_getPrototypeOf(o)}var DropdownTrigger=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DropdownTrigger_setPrototypeOf(subClass,superClass)}(DropdownTrigger,_React$Component);var Constructor,protoProps,staticProps,_super=DropdownTrigger_createSuper(DropdownTrigger);function DropdownTrigger(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DropdownTrigger),_super.call(this,props)}return Constructor=DropdownTrigger,(protoProps=[{key:"componentDidMount",value:function(){this.drop&&uikit_combined_min_default().dropdown(this.drop,{mode:this.props.mode,pos:this.props.pos,offset:this.props.offset})}},{key:"componentWillUnmount",value:function(){this.drop&&(this.drop=null)}},{key:"render",value:function(){var _this=this;return react.createElement("div",{ref:function(i){return _this.drop=i},className:"uk-position-relative"+(this.props.extraClass?" "+this.props.extraClass:""),"aria-haspopup":!0,"aria-expanded":!1},this.props.children)}}])&&DropdownTrigger_defineProperties(Constructor.prototype,protoProps),staticProps&&DropdownTrigger_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DropdownTrigger}(react.Component);DropdownTrigger.propTypes={mode:prop_types_default().string,pos:prop_types_default().string,offset:prop_types_default().number,extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired},DropdownTrigger.defaultProps={mode:"click",pos:"bottom-left"};const Dropdown_DropdownTrigger=DropdownTrigger;function Dropdown_typeof(obj){return Dropdown_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Dropdown_typeof(obj)}function Dropdown_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Dropdown_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Dropdown_setPrototypeOf(o,p){return Dropdown_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Dropdown_setPrototypeOf(o,p)}function Dropdown_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Dropdown_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Dropdown_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Dropdown_possibleConstructorReturn(this,result)}}function Dropdown_possibleConstructorReturn(self,call){if(call&&("object"===Dropdown_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Dropdown_getPrototypeOf(o){return Dropdown_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Dropdown_getPrototypeOf(o)}var Dropdown=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Dropdown_setPrototypeOf(subClass,superClass)}(Dropdown,_React$Component);var Constructor,protoProps,staticProps,_super=Dropdown_createSuper(Dropdown);function Dropdown(){return Dropdown_classCallCheck(this,Dropdown),_super.apply(this,arguments)}return Constructor=Dropdown,(protoProps=[{key:"render",value:function(){var _this$props=this.props,small=_this$props.small,width=_this$props.width,children=_this$props.children,className=(small?" uk-dropdown-small ":" ")+(_this$props.extraClass||"");return react.createElement("div",{className:"nopadding-left nopadding-right uk-dropdown uk-margin-top-remove"+className,style:{width,minWidth:width}},react.createElement("ul",{className:"uk-nav uk-topbar nomargin"},children))}}])&&Dropdown_defineProperties(Constructor.prototype,protoProps),staticProps&&Dropdown_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Dropdown}(react.Component);Dropdown.propTypes={small:prop_types_default().bool,width:prop_types_default().oneOfType([prop_types_default().number,prop_types_default().string]),extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired},Dropdown.defaultProps={width:150};const components_Dropdown=Dropdown;function TruCard_typeof(obj){return TruCard_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TruCard_typeof(obj)}function TruCard_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TruCard_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TruCard_setPrototypeOf(o,p){return TruCard_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},TruCard_setPrototypeOf(o,p)}function TruCard_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TruCard_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TruCard_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TruCard_possibleConstructorReturn(this,result)}}function TruCard_possibleConstructorReturn(self,call){if(call&&("object"===TruCard_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TruCard_getPrototypeOf(o){return TruCard_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},TruCard_getPrototypeOf(o)}var TruCard=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TruCard_setPrototypeOf(subClass,superClass)}(TruCard,_React$Component);var Constructor,protoProps,staticProps,_super=TruCard_createSuper(TruCard);function TruCard(){return TruCard_classCallCheck(this,TruCard),_super.apply(this,arguments)}return Constructor=TruCard,(protoProps=[{key:"render",value:function(){return react.createElement("div",{className:(0,clsx_m.Z)("tru-card-wrapper","uk-position-relative",this.props.fullSize&&"uk-width-1-1 uk-height-1-1"),style:this.props.style},react.createElement(components_SpinLoader,{animate:this.props.animateLoader,animateDelay:this.props.animateDelay,active:this.props.loaderActive}),react.createElement("div",{className:(0,clsx_m.Z)("tru-card",this.props.hover&&"tru-card-hover",this.props.fullSize&&"uk-width-1-1 uk-height-1-1")},this.props.showMoveHandle&&react.createElement("div",{style:{cursor:"move",position:"absolute",top:2,right:8}},react.createElement("i",{className:"material-icons"},"drag_handle")),this.props.header&&react.createElement("div",{className:"tru-card-head "+(this.props.extraHeadClass||"")},this.props.menu&&react.createElement("div",{className:"tru-card-head-menu"},react.createElement(Dropdown_DropdownTrigger,{pos:"bottom-right",mode:"click"},react.createElement("i",{className:"material-icons tru-icon"},"more_vert"),react.createElement(components_Dropdown,{small:!0},this.props.menu.map((function(child){return child}))))),this.props.header&&react.createElement("div",{className:"uk-text-center"},this.props.header)),react.createElement("div",{className:"tru-card-content uk-clearfix "+(this.props.extraContentClass||"")},this.props.content)))}}])&&TruCard_defineProperties(Constructor.prototype,protoProps),staticProps&&TruCard_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TruCard}(react.Component);TruCard.propTypes={menu:prop_types_default().arrayOf(prop_types_default().element),header:prop_types_default().element,extraHeadClass:prop_types_default().string,extraContentClass:prop_types_default().string,content:prop_types_default().element.isRequired,loaderActive:prop_types_default().bool,hover:prop_types_default().bool,fullSize:prop_types_default().bool,showMoveHandle:prop_types_default().bool,style:prop_types_default().object,animateLoader:prop_types_default().bool,animateDelay:prop_types_default().number},TruCard.defaultProps={loaderActive:!1,hover:!0,fullSize:!0,showMoveHandle:!1,animateLoader:!1,animateDelay:600};const components_TruCard=TruCard;var countUp_min=__webpack_require__(18),countUp_min_default=__webpack_require__.n(countUp_min);function CountUp(props){var textRef=(0,react.useRef)();(0,react.useRef)();return(0,react.useEffect)((function(){textRef.current&&(textRef.current.innerText="--",new(countUp_min_default())(textRef.current,props.startNumber,props.endNumber,0,props.duration).start())}),[props.startNumber,props.endNumber]),react.createElement("div",null,react.createElement("span",{ref:textRef},"--"),props.extraText&&" ".concat(props.extraText))}CountUp.propTypes={startNumber:prop_types_default().number,endNumber:prop_types_default().number,extraText:prop_types_default().string,duration:prop_types_default().number},CountUp.defaultProps={startNumber:0,endNumber:0,duration:1.5};__webpack_require__(27);function PeityBar(props){var barRef=(0,react.useRef)();return(0,react.useEffect)((function(){barRef.current&&jquery_default()(barRef.current).peity("bar",{height:props.height,width:props.width,fill:props.fill,padding:props.padding})}),[]),react.createElement("div",null,react.createElement("span",{ref:barRef},props.values))}function PeityPie(_ref){var type=_ref.type,height=_ref.height,width=_ref.width,fill=_ref.fill,value=_ref.value,pieRef=(0,react.useRef)();return(0,react.useEffect)((function(){pieRef.current&&jquery_default()(pieRef.current).peity(type,{height,width,fill})}),[pieRef.current]),(0,react.useEffect)((function(){pieRef.current&&jquery_default()(pieRef.current).text(value).change()}),[value]),react.createElement("div",null,react.createElement("span",{ref:pieRef},value))}function PeityLine(_ref){var height=_ref.height,width=_ref.width,fill=_ref.fill,stroke=_ref.stroke,values=_ref.values,lineRef=(0,react.useRef)();return(0,react.useEffect)((function(){lineRef.current&&jquery_default()(lineRef.current).peity("line",{height,width,fill,stroke})}),[]),react.createElement("div",null,react.createElement("span",{ref:lineRef},values))}PeityBar.propTypes={values:prop_types_default().string.isRequired,height:prop_types_default().number,width:prop_types_default().number,fill:prop_types_default().arrayOf(prop_types_default().string),padding:prop_types_default().number},PeityBar.defaultProps={height:28,width:48,fill:["#e74c3c"],padding:.2},PeityPie.propTypes={type:prop_types_default().string,value:prop_types_default().string.isRequired,height:prop_types_default().number,width:prop_types_default().number,fill:prop_types_default().arrayOf(prop_types_default().string)},PeityPie.defaultProps={type:"pie",height:24,width:24,fill:["#29b955","#ccc"]},PeityLine.propTypes={values:prop_types_default().string.isRequired,height:prop_types_default().number,width:prop_types_default().number,fill:prop_types_default().string,stroke:prop_types_default().string},PeityLine.defaultProps={height:28,width:64,fill:"#d1e4f6",stroke:"#0288d1"};var d3_min=__webpack_require__(94),metricsgraphics_min=__webpack_require__(517),metricsgraphics_min_default=__webpack_require__.n(metricsgraphics_min),noDataDiv=react.createElement("div",{className:"no-data-available-text"},"No Data Available");function MGraph(props){var graphRef=(0,react.useRef)(),graphParams={};return(0,react.useEffect)((function(){props.data&&graphRef.current&&props.data.length>0&&(graphRef.current.innerHTML="",graphParams={full_width:props.fullWidth,height:props.height,x_accessor:props.x_accessor,y_accessor:props.y_accessor,y_extended_ticks:props.y_extended_ticks,show_tooltips:props.showTooltips,aggregate_rollover:props.aggregate_rollover,transition_on_update:props.transition_on_update,colors:props.colors,target:graphRef.current},props.area&&(graphParams.area=[1]),graphParams.data=metricsgraphics_min_default().convert.date(props.data,"date"),metricsgraphics_min_default().data_graphic(graphParams))}),[props.data]),react.createElement("div",{ref:graphRef},props.data&&props.data.length<1&&noDataDiv)}MGraph.propTypes={data:prop_types_default().arrayOf(prop_types_default().object),fullWidth:prop_types_default().bool,height:prop_types_default().number,area:prop_types_default().bool,x_accessor:prop_types_default().string,y_accessor:prop_types_default().string,y_extended_ticks:prop_types_default().bool,showTooltips:prop_types_default().bool,aggregate_rollover:prop_types_default().bool,transition_on_update:prop_types_default().bool,colors:prop_types_default().arrayOf(prop_types_default().string)},MGraph.defaultProps={fullWidth:!0,area:!0,y_extended_ticks:!0,showTooltips:!1,aggregate_rollover:!0,transition_on_update:!1,colors:["#2196f3"]};__webpack_require__(518);var c3=__webpack_require__(239);function D3Pie(props){var pieChart=(0,react.useRef)(),mappedColors=[];return(0,react.useEffect)((function(){pieChart.current&&props.data.length>0&&(mappedColors=(0,lodash.shuffle)(props.colors),mappedColors=(0,lodash.zipObject)((0,lodash.map)(props.data,(function(v){return v[0]})),mappedColors),c3.generate({bindto:d3_min.select(pieChart.current),size:{height:props.size},data:{columns:props.data,type:props.type,colors:mappedColors,empty:{label:{text:props.emptyLabel}}},donut:{label:{format:function(){return""}}}}))}),[pieChart.current,props.data]),react.createElement("div",null,react.createElement("div",{ref:pieChart}))}D3Pie.propTypes={data:prop_types_default().array.isRequired,type:prop_types_default().string,size:prop_types_default().number,emptyLabel:prop_types_default().string,colors:prop_types_default().arrayOf(prop_types_default().string)},D3Pie.defaultProps={data:[],type:"pie",size:200,emptyLabel:"No Data Available",colors:["#e74c3c","#3498db","#9b59b6","#34495e","#1abc9c","#2ecc71","#03A9F4","#00BCD4","#009688","#4CAF50","#FF5722","#CDDC39","#FFC107","#00E5FF","#E040FB","#607D8B"]};var Dashboard_class,Dashboard_class2,Dashboard_descriptor,moment=__webpack_require__(15),moment_default=__webpack_require__.n(moment);function Dashboard_typeof(obj){return Dashboard_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Dashboard_typeof(obj)}function Dashboard_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Dashboard_setPrototypeOf(o,p){return Dashboard_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Dashboard_setPrototypeOf(o,p)}function Dashboard_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Dashboard_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Dashboard_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Dashboard_possibleConstructorReturn(this,result)}}function Dashboard_possibleConstructorReturn(self,call){if(call&&("object"===Dashboard_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Dashboard_assertThisInitialized(self)}function Dashboard_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Dashboard_getPrototypeOf(o){return Dashboard_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Dashboard_getPrototypeOf(o)}var DashboardContainer=(0,mobxreact_esm.Pi)((Dashboard_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Dashboard_setPrototypeOf(subClass,superClass)}(DashboardContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Dashboard_createSuper(DashboardContainer);function DashboardContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DashboardContainer),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"timespan",Dashboard_descriptor,Dashboard_assertThisInitialized(_this)),_this.onTimespanChange=function(e){e.preventDefault(),_this.timespan=e.target.value,_this.props.fetchDashboardData({timespan:e.target.value}),_this.props.fetchDashboardTopGroups({timespan:e.target.value}),_this.props.fetchDashboardTopTags({timespan:e.target.value})},_this}return Constructor=DashboardContainer,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.setupPeity(),this.props.fetchDashboardData({timespan:this.timespan}),this.props.fetchDashboardTopGroups({timespan:this.timespan}),this.props.fetchDashboardTopTags({timespan:this.timespan}),this.props.fetchDashboardOverdueTickets()}},{key:"render",value:function(){var _this2=this,formatString=helpers_default().getLongDateFormat()+" "+helpers_default().getTimeFormat(),lastUpdatedFormatted=this.props.dashboardState.lastUpdated?moment_default().utc(this.props.dashboardState.lastUpdated,"MM/DD/YYYY hh:mm:ssa").format(formatString):"Cache Still Loading...",closedPercent=this.props.dashboardState.closedCount?Math.round(this.props.dashboardState.closedCount/this.props.dashboardState.ticketCount*100).toString():"0";return react.createElement("div",null,react.createElement(components_PageTitle,{title:"Dashboard",rightComponent:react.createElement("div",null,react.createElement("div",{className:"uk-float-right",style:{minWidth:250}},react.createElement("div",{style:{marginTop:8}},react.createElement(components_SingleSelect,{items:[{text:"Last 30 Days",value:"30"},{text:"Last 60 Days",value:"60"},{text:"Last 90 Days",value:"90"},{text:"Last 180 Days",value:"180"},{text:"Last 365 Days",value:"365"}],defaultValue:"30",onSelectChange:function(e){return _this2.onTimespanChange(e)}}))),react.createElement("div",{className:"uk-float-right uk-text-muted uk-text-small",style:{margin:"23px 25px 0 0"}},react.createElement("strong",null,"Last Updated: "),react.createElement("span",null,lastUpdatedFormatted)))}),react.createElement(components_PageContent,null,react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"1-3"},react.createElement(components_TruCard,{content:react.createElement("div",null,react.createElement("div",{className:"right uk-margin-top uk-margin-small-right"},react.createElement(PeityBar,{values:"5,3,9,6,5,9,7"})),react.createElement("span",{className:"uk-text-muted uk-text-small"},"Total Tickets (last ",this.timespan.toString(),"d)"),react.createElement("h2",{className:"uk-margin-remove"},react.createElement(CountUp,{startNumber:0,endNumber:this.props.dashboardState.ticketCount||0})))})),react.createElement(Grid_GridItem,{width:"1-3"},react.createElement(components_TruCard,{content:react.createElement("div",null,react.createElement("div",{className:"right uk-margin-top uk-margin-small-right"},react.createElement(PeityPie,{type:"donut",value:("NaN"!==closedPercent?closedPercent:"0")+"/100"})),react.createElement("span",{className:"uk-text-muted uk-text-small"},"Tickets Completed"),react.createElement("h2",{className:"uk-margin-remove"},react.createElement("span",null,"NaN"!==closedPercent?closedPercent:"0"),"%"))})),react.createElement(Grid_GridItem,{width:"1-3"},react.createElement(components_TruCard,{content:react.createElement("div",null,react.createElement("div",{className:"right uk-margin-top uk-margin-small-right"},react.createElement(PeityLine,{values:"5,3,9,6,5,9,7,3,5,2"})),react.createElement("span",{className:"uk-text-muted uk-text-small"},"Avg Response Time"),react.createElement("h2",{className:"uk-margin-remove"},react.createElement(CountUp,{endNumber:this.props.dashboardState.ticketAvg||0,extraText:"hours"})))})),react.createElement(Grid_GridItem,{width:"1-1",extraClass:"uk-margin-medium-top"},react.createElement(components_TruCard,{header:react.createElement("div",{className:"uk-text-left"},react.createElement("h6",{style:{padding:15,margin:0,fontSize:"14px"}},"Ticket Breakdown")),fullSize:!0,hover:!1,extraContentClass:"nopadding",content:react.createElement("div",{className:"mGraph mGraph-panel",style:{minHeight:200,position:"relative"}},react.createElement(MGraph,{height:250,x_accessor:"date",y_accessor:"value",data:this.props.dashboardState.ticketBreakdownData.toJS()||[]}))})),react.createElement(Grid_GridItem,{width:"1-2",extraClass:"uk-margin-medium-top"},react.createElement(components_TruCard,{loaderActive:this.props.dashboardState.loadingTopGroups,animateLoader:!0,style:{minHeight:256},header:react.createElement("div",{className:"uk-text-left"},react.createElement("h6",{style:{padding:15,margin:0,fontSize:"14px"}},"Top 5 Groups")),content:react.createElement("div",null,react.createElement(D3Pie,{data:this.props.dashboardState.topGroups.toJS()}))})),react.createElement(Grid_GridItem,{width:"1-2",extraClass:"uk-margin-medium-top"},react.createElement(components_TruCard,{loaderActive:this.props.dashboardState.loadingTopTags,animateLoader:!0,animateDelay:800,style:{minHeight:256},header:react.createElement("div",{className:"uk-text-left"},react.createElement("h6",{style:{padding:15,margin:0,fontSize:"14px"}},"Top 10 Tags")),content:react.createElement("div",null,react.createElement(D3Pie,{type:"donut",data:this.props.dashboardState.topTags.toJS()}))})),react.createElement(Grid_GridItem,{width:"1-2",extraClass:"uk-margin-medium-top"},react.createElement(components_TruCard,{style:{minHeight:250},header:react.createElement("div",{className:"uk-text-left"},react.createElement("h6",{style:{padding:15,margin:0,fontSize:"14px"}},"Overdue Tickets")),content:react.createElement("div",{className:"uk-overflow-container"},react.createElement("table",{className:"uk-table"},react.createElement("thead",null,react.createElement("tr",null,react.createElement("th",{className:"uk-text-nowrap"},"Ticket"),react.createElement("th",{className:"uk-text-nowrap"},"Status"),react.createElement("th",{className:"uk-text-nowrap"},"Subject"),react.createElement("th",{className:"uk-text-nowrap uk-text-right"},"Last Updated"))),react.createElement("tbody",null,this.props.dashboardState.overdueTickets.map((function(ticket){return react.createElement("tr",{key:ticket.get("_id"),className:"uk-table-middle"},react.createElement("td",{className:"uk-width-1-10 uk-text-nowrap"},react.createElement("a",{href:"/tickets/".concat(ticket.get("uid"))},"T#",ticket.get("uid"))),react.createElement("td",{className:"uk-width-1-10 uk-text-nowrap"},react.createElement("span",{className:"uk-badge ticket-status-open uk-width-1-1 ml-0"},"Open")),react.createElement("td",{className:"uk-width-6-10"},ticket.get("subject")),react.createElement("td",{className:"uk-width-2-10 uk-text-right uk-text-muted uk-text-small"},moment_default().utc(ticket.get("updated")).tz(helpers_default().getTimezone()).format(helpers_default().getShortDateFormat())))})))))})),react.createElement(Grid_GridItem,{width:"1-2",extraClass:"uk-margin-medium-top"},react.createElement(components_TruCard,{header:react.createElement("div",{className:"uk-text-left"},react.createElement("h6",{style:{padding:15,margin:0,fontSize:"14px"}},"Quick Stats (Last 365 Days)")),content:react.createElement("div",{className:"uk-overflow-container"},react.createElement("table",{className:"uk-table"},react.createElement("thead",null,react.createElement("tr",null,react.createElement("th",{className:"uk-text-nowrap"},"Stat"),react.createElement("th",{className:"uk-text-nowrap uk-text-right"},"Value"))),react.createElement("tbody",null,react.createElement("tr",{className:"uk-table-middle"},react.createElement("td",{className:"uk-width-6-10 uk-text-nowrap uk-text-muted uk-text-small"},"Most tickets by..."),react.createElement("td",{id:"mostRequester",className:"uk-width-4-10 uk-text-right  uk-text-small"},this.props.dashboardState.mostRequester?"".concat(this.props.dashboardState.mostRequester.get("name")," (").concat(this.props.dashboardState.mostRequester.get("value"),")"):"--")),react.createElement("tr",{className:"uk-table-middle"},react.createElement("td",{className:"uk-width-6-10 uk-text-nowrap uk-text-muted uk-text-small"},"Most comments by...."),react.createElement("td",{id:"mostCommenter",className:"uk-width-4-10 uk-text-right  uk-text-small"},this.props.dashboardState.mostCommenter?"".concat(this.props.dashboardState.mostCommenter.get("name")," (").concat(this.props.dashboardState.mostCommenter.get("value"),")"):"--")),react.createElement("tr",{className:"uk-table-middle"},react.createElement("td",{className:"uk-width-6-10 uk-text-nowrap uk-text-muted uk-text-small"},"Most assigned support user...."),react.createElement("td",{id:"mostAssignee",className:"uk-width-4-10 uk-text-right  uk-text-small"},this.props.dashboardState.mostAssignee?"".concat(this.props.dashboardState.mostAssignee.get("name")," (").concat(this.props.dashboardState.mostAssignee.get("value"),")"):"--")),react.createElement("tr",{className:"uk-table-middle"},react.createElement("td",{className:"uk-width-6-10 uk-text-nowrap uk-text-muted uk-text-small"},"Most active ticket..."),react.createElement("td",{className:"uk-width-4-10 uk-text-right  uk-text-small"},react.createElement("a",{id:"mostActiveTicket",href:"#"},this.props.dashboardState.mostActiveTicket?"T#".concat(this.props.dashboardState.mostActiveTicket.get("uid")):"--"))))))})))))}}])&&Dashboard_defineProperties(Constructor.prototype,protoProps),staticProps&&Dashboard_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DashboardContainer}(react.Component),Dashboard_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(Dashboard_class2.prototype,"timespan",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Dashboard_class=Dashboard_class2))||Dashboard_class;DashboardContainer.propTypes={fetchDashboardData:prop_types_default().func.isRequired,fetchDashboardTopGroups:prop_types_default().func.isRequired,fetchDashboardTopTags:prop_types_default().func.isRequired,fetchDashboardOverdueTickets:prop_types_default().func.isRequired,dashboardState:prop_types_default().object.isRequired};const Dashboard=(0,es.$j)((function(state){return{dashboardState:state.dashboardState}}),{fetchDashboardData:dashboard_fetchDashboardData,fetchDashboardTopGroups:dashboard_fetchDashboardTopGroups,fetchDashboardTopTags:dashboard_fetchDashboardTopTags,fetchDashboardOverdueTickets:dashboard_fetchDashboardOverdueTickets})(DashboardContainer),search_fetchSearchResults=(0,createAction.Z)(FETCH_SEARCH_RESULTS.ACTION,(payload=>payload),(()=>({thunk:!0}))),search_unloadSearchResults=(0,createAction.Z)(UNLOAD_SEARCH_RESULTS.ACTION,(payload=>payload),(()=>({thunk:!0})));function Table_typeof(obj){return Table_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Table_typeof(obj)}function Table_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Table_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Table_setPrototypeOf(o,p){return Table_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Table_setPrototypeOf(o,p)}function Table_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Table_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Table_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Table_possibleConstructorReturn(this,result)}}function Table_possibleConstructorReturn(self,call){if(call&&("object"===Table_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Table_getPrototypeOf(o){return Table_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Table_getPrototypeOf(o)}var Table=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Table_setPrototypeOf(subClass,superClass)}(Table,_React$Component);var Constructor,protoProps,staticProps,_super=Table_createSuper(Table);function Table(){return Table_classCallCheck(this,Table),_super.apply(this,arguments)}return Constructor=Table,(protoProps=[{key:"render",value:function(){var _this$props=this.props,headers=_this$props.headers,striped=_this$props.striped,stickyHeader=_this$props.stickyHeader,children=_this$props.children,extraClass=_this$props.extraClass,useBody=_this$props.useBody,tableClass="uk-table"+(striped?" uk-table-striped stripe":"")+(stickyHeader?" sticky-header fixed-width":"")+(extraClass?" "+extraClass:"");return react.createElement("table",{className:tableClass,style:this.props.style,ref:this.props.tableRef},headers&&react.createElement("thead",null,react.createElement("tr",null,headers)),useBody&&react.createElement("tbody",{className:"scrollable full-height c91-fix"},children),!useBody&&children)}}])&&Table_defineProperties(Constructor.prototype,protoProps),staticProps&&Table_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Table}(react.Component);Table.propTypes={headers:prop_types_default().arrayOf(prop_types_default().element),tableRef:prop_types_default().func,striped:prop_types_default().bool,stickyHeader:prop_types_default().bool,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired,style:prop_types_default().object,extraClass:prop_types_default().string,useBody:prop_types_default().bool},Table.defaultProps={striped:!0,stickyHeader:!0,useBody:!0};const components_Table=Table;function TableHeader_typeof(obj){return TableHeader_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TableHeader_typeof(obj)}function TableHeader_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TableHeader_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TableHeader_setPrototypeOf(o,p){return TableHeader_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},TableHeader_setPrototypeOf(o,p)}function TableHeader_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TableHeader_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TableHeader_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TableHeader_possibleConstructorReturn(this,result)}}function TableHeader_possibleConstructorReturn(self,call){if(call&&("object"===TableHeader_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TableHeader_getPrototypeOf(o){return TableHeader_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},TableHeader_getPrototypeOf(o)}var TableHeader=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TableHeader_setPrototypeOf(subClass,superClass)}(TableHeader,_React$Component);var Constructor,protoProps,staticProps,_super=TableHeader_createSuper(TableHeader);function TableHeader(){return TableHeader_classCallCheck(this,TableHeader),_super.apply(this,arguments)}return Constructor=TableHeader,(protoProps=[{key:"render",value:function(){var _this$props=this.props,width=_this$props.width,height=_this$props.height,padding=_this$props.padding,textAlign=_this$props.textAlign,text=_this$props.text,component=_this$props.component;return react.createElement("th",{style:{width,padding,height,verticalAlign:"middle",fontSize:12,textTransform:"uppercase",textAlign}},component,text)}}])&&TableHeader_defineProperties(Constructor.prototype,protoProps),staticProps&&TableHeader_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TableHeader}(react.Component);TableHeader.propTypes={width:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),height:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),padding:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),textAlign:prop_types_default().string,text:prop_types_default().string,component:prop_types_default().oneOfType([prop_types_default().element,prop_types_default().func])},TableHeader.defaultProps={textAlign:"left"};const Table_TableHeader=TableHeader;function TableRow_typeof(obj){return TableRow_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TableRow_typeof(obj)}function TableRow_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TableRow_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TableRow_setPrototypeOf(o,p){return TableRow_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},TableRow_setPrototypeOf(o,p)}function TableRow_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TableRow_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TableRow_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TableRow_possibleConstructorReturn(this,result)}}function TableRow_possibleConstructorReturn(self,call){if(call&&("object"===TableRow_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TableRow_getPrototypeOf(o){return TableRow_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},TableRow_getPrototypeOf(o)}var TableRow=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TableRow_setPrototypeOf(subClass,superClass)}(TableRow,_React$Component);var Constructor,protoProps,staticProps,_super=TableRow_createSuper(TableRow);function TableRow(){return TableRow_classCallCheck(this,TableRow),_super.apply(this,arguments)}return Constructor=TableRow,(protoProps=[{key:"render",value:function(){var clickable=this.props.clickable,clickableStyle={cursor:"pointer"},style=this.props.style;return style=clickable?this.props.style?Object.assign(this.props.style,clickableStyle):clickableStyle:this.props.style?Object.assign(this.props.style,{cursor:"default"}):{cursor:"default"},react.createElement("tr",{className:this.props.className,style,onClick:this.props.onClick},this.props.children)}}])&&TableRow_defineProperties(Constructor.prototype,protoProps),staticProps&&TableRow_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TableRow}(react.Component);TableRow.propTypes={clickable:prop_types_default().bool,onClick:prop_types_default().func,style:prop_types_default().object,className:prop_types_default().any,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired},TableRow.defaultProps={clickable:!1};const Table_TableRow=TableRow;function TitlePagination_typeof(obj){return TitlePagination_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TitlePagination_typeof(obj)}function TitlePagination_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TitlePagination_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TitlePagination_setPrototypeOf(o,p){return TitlePagination_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},TitlePagination_setPrototypeOf(o,p)}function TitlePagination_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TitlePagination_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TitlePagination_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TitlePagination_possibleConstructorReturn(this,result)}}function TitlePagination_possibleConstructorReturn(self,call){if(call&&("object"===TitlePagination_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TitlePagination_getPrototypeOf(o){return TitlePagination_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},TitlePagination_getPrototypeOf(o)}var TitlePagination=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TitlePagination_setPrototypeOf(subClass,superClass)}(TitlePagination,_React$Component);var Constructor,protoProps,staticProps,_super=TitlePagination_createSuper(TitlePagination);function TitlePagination(){return TitlePagination_classCallCheck(this,TitlePagination),_super.apply(this,arguments)}return Constructor=TitlePagination,staticProps=[{key:"formatNumber",value:function(num){return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"calcStartEnd",value:function(page,limit){return page=Number(page),limit=Number(limit),{start:0===page?"1":page*limit,end:0===page?limit:page*limit+limit}}}],(protoProps=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){jquery_default()(this.parent).ajaxify()}},{key:"render",value:function(){var _this=this,_this$props=this.props,limit=_this$props.limit,total=_this$props.total,prevEnabled=_this$props.prevEnabled,nextEnabled=_this$props.nextEnabled,currentPage=_this$props.currentPage,prevPage=_this$props.prevPage,nextPage=_this$props.nextPage,type=_this$props.type,filter=_this$props.filter,link=function(page){return type?"filter"===type.toLowerCase()?"".concat(filter.raw,"&page=").concat(page):"/tickets/".concat(type,"/page/").concat(page,"/"):"#"},startEnd=TitlePagination.calcStartEnd(currentPage,limit);return react.createElement("div",{className:"pagination uk-float-left uk-clearfix",ref:function(r){return _this.parent=r}},react.createElement("span",{className:"pagination-info"},TitlePagination.formatNumber(startEnd.start)," - ",TitlePagination.formatNumber(startEnd.end)," of"," ",TitlePagination.formatNumber(total)),react.createElement("ul",{className:"button-group"},react.createElement("li",{className:"pagination"},react.createElement("a",{href:prevEnabled?link(prevPage):"#",title:"Previous Page",className:"btn md-btn-wave-light"+(prevEnabled?"":" no-ajaxy")},react.createElement("i",{className:"fa fa-large fa-chevron-left"}))),react.createElement("li",{className:"pagination"},react.createElement("a",{href:nextEnabled?link(nextPage):"#",title:"Next Page",className:"btn md-btn-wave-light"+(nextEnabled?"":" no-ajaxy")},react.createElement("i",{className:"fa fa-large fa-chevron-right"})))))}}])&&TitlePagination_defineProperties(Constructor.prototype,protoProps),staticProps&&TitlePagination_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TitlePagination}(react.Component);TitlePagination.propTypes={limit:prop_types_default().number,total:prop_types_default().string,type:prop_types_default().string,filter:prop_types_default().object,prevEnabled:prop_types_default().bool.isRequired,nextEnabled:prop_types_default().bool.isRequired,currentPage:prop_types_default().string,prevPage:prop_types_default().number,nextPage:prop_types_default().number},TitlePagination.defaultProps={limit:50,prevPage:0,nextPage:1};const components_TitlePagination=TitlePagination;function TableCell_typeof(obj){return TableCell_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TableCell_typeof(obj)}function TableCell_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TableCell_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TableCell_setPrototypeOf(o,p){return TableCell_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},TableCell_setPrototypeOf(o,p)}function TableCell_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TableCell_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TableCell_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TableCell_possibleConstructorReturn(this,result)}}function TableCell_possibleConstructorReturn(self,call){if(call&&("object"===TableCell_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TableCell_getPrototypeOf(o){return TableCell_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},TableCell_getPrototypeOf(o)}var TableCell=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TableCell_setPrototypeOf(subClass,superClass)}(TableCell,_React$Component);var Constructor,protoProps,staticProps,_super=TableCell_createSuper(TableCell);function TableCell(){return TableCell_classCallCheck(this,TableCell),_super.apply(this,arguments)}return Constructor=TableCell,(protoProps=[{key:"render",value:function(){return react.createElement("td",this.props,this.props.children)}}])&&TableCell_defineProperties(Constructor.prototype,protoProps),staticProps&&TableCell_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TableCell}(react.Component);TableCell.propTypes={children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const Table_TableCell=TableCell;function PageTitleButton_typeof(obj){return PageTitleButton_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PageTitleButton_typeof(obj)}function PageTitleButton_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PageTitleButton_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PageTitleButton_setPrototypeOf(o,p){return PageTitleButton_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},PageTitleButton_setPrototypeOf(o,p)}function PageTitleButton_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=PageTitleButton_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PageTitleButton_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PageTitleButton_possibleConstructorReturn(this,result)}}function PageTitleButton_possibleConstructorReturn(self,call){if(call&&("object"===PageTitleButton_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PageTitleButton_getPrototypeOf(o){return PageTitleButton_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},PageTitleButton_getPrototypeOf(o)}var PageTitleButton=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PageTitleButton_setPrototypeOf(subClass,superClass)}(PageTitleButton,_React$Component);var Constructor,protoProps,staticProps,_super=PageTitleButton_createSuper(PageTitleButton);function PageTitleButton(){return PageTitleButton_classCallCheck(this,PageTitleButton),_super.apply(this,arguments)}return Constructor=PageTitleButton,(protoProps=[{key:"render",value:function(){return react.createElement("div",{className:"pagination uk-float-left"},react.createElement("ul",{className:"button-group uk-float-left"},react.createElement("li",{className:"pagination relative"},react.createElement("a",{href:this.props.href,className:"btn no-ajaxy",style:{borderRadius:3},onClick:this.props.onButtonClick},this.props.fontAwesomeIcon&&react.createElement("i",{className:"fa fa-large ".concat(this.props.fontAwesomeIcon)}),this.props.mdIcon&&react.createElement("i",{className:"material-icons"},this.props.mdIcon)))))}}])&&PageTitleButton_defineProperties(Constructor.prototype,protoProps),staticProps&&PageTitleButton_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PageTitleButton}(react.Component);PageTitleButton.propTypes={href:prop_types_default().string.isRequired,fontAwesomeIcon:prop_types_default().string,mdIcon:prop_types_default().string,onButtonClick:prop_types_default().func},PageTitleButton.defaultProps={href:"#"};const components_PageTitleButton=PageTitleButton;function DropdownItem_typeof(obj){return DropdownItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DropdownItem_typeof(obj)}function DropdownItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DropdownItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DropdownItem_setPrototypeOf(o,p){return DropdownItem_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},DropdownItem_setPrototypeOf(o,p)}function DropdownItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DropdownItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DropdownItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DropdownItem_possibleConstructorReturn(this,result)}}function DropdownItem_possibleConstructorReturn(self,call){if(call&&("object"===DropdownItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DropdownItem_getPrototypeOf(o){return DropdownItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},DropdownItem_getPrototypeOf(o)}var DropdownItem=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DropdownItem_setPrototypeOf(subClass,superClass)}(DropdownItem,_React$Component);var Constructor,protoProps,staticProps,_super=DropdownItem_createSuper(DropdownItem);function DropdownItem(){return DropdownItem_classCallCheck(this,DropdownItem),_super.apply(this,arguments)}return Constructor=DropdownItem,(protoProps=[{key:"onClick",value:function(e){this.props.onClick&&this.props.onClick(e)}},{key:"render",value:function(){var _this$props=this.props,closeOnClick=_this$props.closeOnClick,text=_this$props.text,href=_this$props.href,extraClass=_this$props.extraClass;return react.createElement("li",{className:closeOnClick?"uk-dropdown-close":""},react.createElement("a",{href,"close-uk-dropdown":closeOnClick.toString(),className:(href?"":"no-ajaxy")+(extraClass?" "+extraClass:""),onClick:this.props.onClick},text))}}])&&DropdownItem_defineProperties(Constructor.prototype,protoProps),staticProps&&DropdownItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DropdownItem}(react.Component);DropdownItem.propTypes={href:prop_types_default().string,text:prop_types_default().string.isRequired,extraClass:prop_types_default().string,onClick:prop_types_default().func,closeOnClick:prop_types_default().bool},DropdownItem.defaultProps={closeOnClick:!0};const Dropdown_DropdownItem=DropdownItem;function DropdownSeperator_typeof(obj){return DropdownSeperator_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DropdownSeperator_typeof(obj)}function DropdownSeperator_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DropdownSeperator_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DropdownSeperator_setPrototypeOf(o,p){return DropdownSeperator_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},DropdownSeperator_setPrototypeOf(o,p)}function DropdownSeperator_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DropdownSeperator_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DropdownSeperator_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DropdownSeperator_possibleConstructorReturn(this,result)}}function DropdownSeperator_possibleConstructorReturn(self,call){if(call&&("object"===DropdownSeperator_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DropdownSeperator_getPrototypeOf(o){return DropdownSeperator_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},DropdownSeperator_getPrototypeOf(o)}const DropdownSeperator=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DropdownSeperator_setPrototypeOf(subClass,superClass)}(DropdownSeparator,_React$Component);var Constructor,protoProps,staticProps,_super=DropdownSeperator_createSuper(DropdownSeparator);function DropdownSeparator(){return DropdownSeperator_classCallCheck(this,DropdownSeparator),_super.apply(this,arguments)}return Constructor=DropdownSeparator,(protoProps=[{key:"render",value:function(){return react.createElement("li",null,react.createElement("hr",{style:{margin:"5px 0"}}))}}])&&DropdownSeperator_defineProperties(Constructor.prototype,protoProps),staticProps&&DropdownSeperator_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DropdownSeparator}(react.Component);var anime_es=__webpack_require__(519),sanitize_html=__webpack_require__(752),sanitize_html_default=__webpack_require__.n(sanitize_html);function SearchResults_typeof(obj){return SearchResults_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SearchResults_typeof(obj)}function SearchResults_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function SearchResults_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SearchResults_setPrototypeOf(o,p){return SearchResults_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},SearchResults_setPrototypeOf(o,p)}function SearchResults_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SearchResults_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SearchResults_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SearchResults_possibleConstructorReturn(this,result)}}function SearchResults_possibleConstructorReturn(self,call){if(call&&("object"===SearchResults_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SearchResults_getPrototypeOf(o){return SearchResults_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},SearchResults_getPrototypeOf(o)}var SearchResults=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SearchResults_setPrototypeOf(subClass,superClass)}(SearchResults,_React$Component);var Constructor,protoProps,staticProps,_super=SearchResults_createSuper(SearchResults);function SearchResults(){return SearchResults_classCallCheck(this,SearchResults),_super.apply(this,arguments)}return Constructor=SearchResults,protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.setupDataTethers(),jquery_default()(document).on("mousedown",SearchResults.documentMouseEvent)}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){SearchResults.toggleAnimation(!0,!1),jquery_default()(document).off("mousedown",SearchResults.documentMouseEvent)}},{key:"onSearchItemClick",value:function(e){e.preventDefault(),SearchResults.toggleAnimation(!0,!1);var href=e.currentTarget.getAttribute("href");History.pushState(null,null,href),this.props.unloadSearchResults()}},{key:"render",value:function(){var _this=this,_this$props=this.props,target=_this$props.target,searchResults=_this$props.searchResults,error=_this$props.error;return react.createElement("div",{className:"search-results-container animate-in","data-tether":"{target: '".concat(target,"', pos: 'top right', targetAttachment: 'bottom right', offset: '0 8px'}")},error&&react.createElement("h4",{className:"uk-width-1-1 uk-text-center text-light mt-15 text-danger"},error.error),!searchResults||searchResults.size<1&&react.createElement("h4",{className:"uk-width-1-1 uk-text-center text-light mt-15"},"No Results"),react.createElement("ul",{className:"search-results-list"},searchResults&&searchResults.map((function(item){var doc=item.get("_source");return react.createElement("li",{key:item.get("_id"),className:"search-results-item status-".concat(doc.get("status"))},react.createElement("a",{href:"/tickets/".concat(doc.get("uid")),onClick:function(e){return _this.onSearchItemClick(e)}},react.createElement("span",{className:"priority",style:{background:"".concat(doc.getIn(["priority","htmlColor"]))}}),react.createElement("span",{className:"uid"},doc.get("uid")),react.createElement("span",{className:"subject"},doc.get("subject")),react.createElement("span",{className:"issue"},sanitize_html_default()(doc.get("issue"),{allowedTags:[]}))))}))))}}],staticProps=[{key:"documentMouseEvent",value:function(event){if(jquery_default()(event.target).parents(".search-results-container").length>0)return!1;SearchResults.toggleAnimation(!0,!1)}},{key:"toggleAnimation",value:function(forceState,state){for(var animateItems=jquery_default()(".search-results-container"),transitionProp="string"==typeof document.documentElement.style.transition?"transition":"WebkitTransition",i=0;i<animateItems.length;i++){var item=animateItems[i];item.style[transitionProp+"Delay"]=50*i+"ms",forceState?state?(item.classList.remove("hide"),item.classList.add("is-in")):(item.classList.add("hide"),item.classList.remove("is-in")):(item.classList.toggle("hide"),item.classList.toggle("is-in"))}}}],protoProps&&SearchResults_defineProperties(Constructor.prototype,protoProps),staticProps&&SearchResults_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SearchResults}(react.Component);SearchResults.propTypes={target:prop_types_default().string.isRequired,searchResults:prop_types_default().object.isRequired,error:prop_types_default().object,unloadSearchResults:prop_types_default().func.isRequired};const components_SearchResults=(0,es.$j)((function(state){return{searchResults:state.searchState.results,error:state.searchState.error}}),{unloadSearchResults:search_unloadSearchResults},null,{forwardRef:!0})(SearchResults);function TicketsContainer_typeof(obj){return TicketsContainer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TicketsContainer_typeof(obj)}var TicketsContainer_class,TicketsContainer_class2,TicketsContainer_descriptor;function TicketsContainer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TicketsContainer_setPrototypeOf(o,p){return TicketsContainer_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},TicketsContainer_setPrototypeOf(o,p)}function TicketsContainer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TicketsContainer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TicketsContainer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TicketsContainer_possibleConstructorReturn(this,result)}}function TicketsContainer_possibleConstructorReturn(self,call){if(call&&("object"===TicketsContainer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return TicketsContainer_assertThisInitialized(self)}function TicketsContainer_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function TicketsContainer_getPrototypeOf(o){return TicketsContainer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},TicketsContainer_getPrototypeOf(o)}var TicketsContainer=(0,mobxreact_esm.Pi)((TicketsContainer_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TicketsContainer_setPrototypeOf(subClass,superClass)}(TicketsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=TicketsContainer_createSuper(TicketsContainer);function TicketsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TicketsContainer),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"searchTerm",TicketsContainer_descriptor,TicketsContainer_assertThisInitialized(_this)),_this.selectedTickets=[],(0,mobx_esm.rC)(TicketsContainer_assertThisInitialized(_this)),_this.onTicketCreated=_this.onTicketCreated.bind(TicketsContainer_assertThisInitialized(_this)),_this.onTicketUpdated=_this.onTicketUpdated.bind(TicketsContainer_assertThisInitialized(_this)),_this.onTicketDeleted=_this.onTicketDeleted.bind(TicketsContainer_assertThisInitialized(_this)),_this}return Constructor=TicketsContainer,(protoProps=[{key:"componentDidMount",value:function(){this.props.socket.on("$trudesk:client:ticket:created",this.onTicketCreated),this.props.socket.on("$trudesk:client:ticket:updated",this.onTicketUpdated),this.props.socket.on("$trudesk:client:ticket:deleted",this.onTicketDeleted),this.props.fetchTickets({limit:50,page:this.props.page,type:this.props.view,filter:this.props.filter})}},{key:"componentDidUpdate",value:function(){this.timeline&&(this.timeline.pause(),this.timeline.seek(0)),anime_es.Z.remove("tr.overdue td"),this.timeline=anime_es.Z.timeline({direction:"alternate",duration:800,autoPlay:!1,easing:"steps(1)",loop:!0,backgroundColor:"blue"}),this.timeline.add({targets:"tr.overdue td",backgroundColor:"#b71c1c",color:"#ffffff"}),this.timeline.play()}},{key:"componentWillUnmount",value:function(){anime_es.Z.remove("tr.overdue td"),this.timeline=null,this.props.unloadTickets(),this.props.socket.off("$trudesk:client:ticket:created",this.onTicketCreated),this.props.socket.off("$trudesk:client:ticket:updated",this.onTicketUpdated),this.props.socket.off("$trudesk:client:ticket:deleted",this.onTicketDeleted)}},{key:"onTicketCreated",value:function(ticket){"0"===this.props.page&&this.props.ticketEvent({type:"created",data:ticket})}},{key:"onTicketUpdated",value:function(data){this.props.ticketUpdated(data)}},{key:"onTicketDeleted",value:function(id){this.props.ticketEvent({type:"deleted",data:id})}},{key:"onTicketCheckChanged",value:function(e,id){e.target.checked?this.selectedTickets.push(id):this.selectedTickets=(0,lodash.without)(this.selectedTickets,id),this.selectedTickets=(0,lodash.uniq)(this.selectedTickets)}},{key:"onSetStatus",value:function(status){var _this2=this,statusText="";switch(status){case 0:statusText="New";break;case 1:statusText="Open";break;case 2:statusText="Pending";break;case 3:statusText="Closed"}var batch=this.selectedTickets.map((function(id){return{id,status}}));axios_default().put("/api/v2/tickets/batch",{batch}).then((function(res){res.data.success?(helpers_default().UI.showSnackbar({text:"Ticket status set to ".concat(statusText)}),_this2._clearChecked()):(helpers_default().UI.showSnackbar("An unknown error occurred.",!0),logger.error(res.data.error))})).catch((function(error){logger.error(error),helpers_default().UI.showSnackbar("An Error occurred. Please check console.",!0)}))}},{key:"onDeleteClicked",value:function(){var _this3=this;(0,lodash.each)(this.selectedTickets,(function(id){_this3.props.deleteTicket({id})})),this._clearChecked()}},{key:"onSearchTermChanged",value:function(e){this.searchTerm=e.target.value,this.searchTerm.length>3?(components_SearchResults.toggleAnimation(!0,!0),this.props.fetchSearchResults({term:this.searchTerm})):components_SearchResults.toggleAnimation(!0,!1)}},{key:"_onSearchFocus",value:function(e){this.searchTerm.length>3&&components_SearchResults.toggleAnimation(!0,!0)}},{key:"onSearchKeypress",value:function(e){this.searchTerm.length>3&&this.props.fetchSearchResults({term:this.searchTerm})}},{key:"_selectAll",value:function(){var _this4=this;this.selectedTickets=[],this.ticketsTable.querySelectorAll('td > input[type="checkbox"]').forEach((function(item){_this4.selectedTickets.push(item.dataset.ticket),item.checked=!0})),this.selectedTickets=(0,lodash.uniq)(this.selectedTickets)}},{key:"_clearChecked",value:function(){this.selectedTickets=[],this.ticketsTable.querySelectorAll('td > input[type="checkbox"]').forEach((function(item){item.checked=!1})),this.selectAllCheckbox.checked=!1}},{key:"onSelectAll",value:function(e){e.target.checked?this._selectAll():this._clearChecked()}},{key:"render",value:function(){for(var _this5=this,loadingItems=[],i=0;i<51;i++){for(var cells=[],k=0;k<10;k++)cells.push(react.createElement(Table_TableCell,{key:k,className:"vam"},react.createElement("div",{className:"loadingTextAnimation"})));loadingItems.push(react.createElement(Table_TableRow,{key:Math.random()},cells))}var selectAllCheckbox=react.createElement("div",{style:{marginLeft:17}},react.createElement("input",{type:"checkbox",id:"select_all",style:{display:"none"},className:"svgcheckinput",onChange:function(e){return _this5.onSelectAll(e)},ref:function(r){return _this5.selectAllCheckbox=r}}),react.createElement("label",{htmlFor:"select_all",className:"svgcheck"},react.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 18 18"},react.createElement("path",{d:"M1,9 L1,3.5 C1,2 2,1 3.5,1 L14.5,1 C16,1 17,2 17,3.5 L17,14.5 C17,16 16,17 14.5,17 L3.5,17 C2,17 1,16 1,14.5 L1,9 Z"}),react.createElement("polyline",{points:"1 9 7 14 15 4"}))));return react.createElement("div",null,react.createElement(components_PageTitle,{title:"Tickets",shadow:!1,rightComponent:react.createElement("div",null,react.createElement("div",{className:"uk-float-right"},react.createElement(components_TitlePagination,{limit:50,total:this.props.totalCount,type:this.props.view,prevEnabled:this.props.prevEnabled,nextEnabled:this.props.nextEnabled,currentPage:this.props.page,prevPage:this.props.prevPage,nextPage:this.props.nextPage,filter:this.props.filter}),react.createElement(components_PageTitleButton,{fontAwesomeIcon:"fa-refresh",onButtonClick:function(e){e.preventDefault(),_this5.props.unloadTickets().then(_this5.props.fetchTickets({type:_this5.props.view,page:_this5.props.page}))}}),react.createElement(components_PageTitleButton,{fontAwesomeIcon:"fa-filter",onButtonClick:function(e){e.preventDefault(),_this5.props.showModal("FILTER_TICKET")}}),react.createElement(Dropdown_DropdownTrigger,{pos:"bottom-right",offset:5,extraClass:"uk-float-left"},react.createElement(components_PageTitleButton,{fontAwesomeIcon:"fa-tasks"}),react.createElement(components_Dropdown,{small:!0,width:120},react.createElement(Dropdown_DropdownItem,{text:"Create",onClick:function(){return _this5.props.showModal("CREATE_TICKET")}}),react.createElement(DropdownSeperator,null),react.createElement(Dropdown_DropdownItem,{text:"Set Open",onClick:function(){return _this5.onSetStatus(1)}}),react.createElement(Dropdown_DropdownItem,{text:"Set Pending",onClick:function(){return _this5.onSetStatus(2)}}),react.createElement(Dropdown_DropdownItem,{text:"Set Closed",onClick:function(){return _this5.onSetStatus(3)}}),helpers_default().canUser("tickets:delete",!0)&&react.createElement(DropdownSeperator,null),helpers_default().canUser("tickets:delete",!0)&&react.createElement(Dropdown_DropdownItem,{text:"Delete",extraClass:"text-danger",onClick:function(){return _this5.onDeleteClicked()}}))),react.createElement("div",{className:"uk-float-right"},react.createElement("div",{id:"ticket-search-box",className:"search-box uk-float-left nb",style:{marginTop:8,paddingLeft:0}},react.createElement("input",{type:"text",id:"tickets_Search",placeholder:"Search",className:"ticket-top-search",value:this.searchTerm,onChange:function(e){return _this5.onSearchTermChanged(e)},onFocus:function(e){return _this5._onSearchFocus(e)}})))),react.createElement(components_SearchResults,{target:"#ticket-search-box",ref:function(r){return _this5.searchContainer=r}}))}),react.createElement(components_PageContent,{padding:0,paddingBottom:0,extraClass:"uk-position-relative"},react.createElement(components_Table,{tableRef:function(ref){return _this5.ticketsTable=ref},style:{margin:0},extraClass:"pDataTable",stickyHeader:!0,striped:!0,headers:[react.createElement(Table_TableHeader,{key:0,width:45,height:50,component:selectAllCheckbox}),react.createElement(Table_TableHeader,{key:1,width:60,text:"Status"}),react.createElement(Table_TableHeader,{key:2,width:65,text:"#"}),react.createElement(Table_TableHeader,{key:3,width:"23%",text:"Subject"}),react.createElement(Table_TableHeader,{key:4,width:110,text:"Created"}),react.createElement(Table_TableHeader,{key:5,width:125,text:"Requester"}),react.createElement(Table_TableHeader,{key:6,width:175,text:"Customer"}),react.createElement(Table_TableHeader,{key:7,text:"Assignee"}),react.createElement(Table_TableHeader,{key:8,width:110,text:"Due Date"}),react.createElement(Table_TableHeader,{key:9,text:"Updated"})]},!this.props.loading&&this.props.tickets.size<1&&react.createElement(Table_TableRow,{clickable:!1},react.createElement(Table_TableCell,{colSpan:10},react.createElement("h5",{style:{margin:10}},"No Tickets Found"))),this.props.loading&&loadingItems,!this.props.loading&&this.props.tickets.map((function(ticket){var a,status=function(){switch(ticket.get("status")){case 0:return"new";case 1:return"open";case 2:return"pending";case 3:return"closed"}},updated=ticket.get("updated")?helpers_default().formatDate(ticket.get("updated"),helpers_default().getShortDateFormat())+", "+helpers_default().formatDate(ticket.get("updated"),helpers_default().getTimeFormat()):"--",dueDate=ticket.get("dueDate")?helpers_default().formatDate(ticket.get("dueDate"),helpers_default().getShortDateFormat()):"--";return react.createElement(Table_TableRow,{key:ticket.get("_id"),className:"ticket-".concat(status()," ").concat(function(){if(!_this5.props.common.viewdata.get("showOverdue")||-1!==[2,3].indexOf(ticket.get("status")))return!1;var overdueIn=ticket.getIn(["priority","overdueIn"]),now=moment_timezone_default()(),updated=ticket.get("updated"),timeout=(updated=updated?moment_timezone_default()(updated):moment_timezone_default()(ticket.get("date"))).clone().add(overdueIn,"m");return now.isAfter(timeout)}()?"overdue":""),clickable:!0,onClick:function(e){if(e.target.closest("td").getElementsByTagName("input").length>0)return!1;History.pushState(null,"Ticket-".concat(ticket.get("uid")),"/tickets/".concat(ticket.get("uid")))}},react.createElement(Table_TableCell,{className:"ticket-priority nbb vam",style:{borderColor:ticket.getIn(["priority","htmlColor"]),padding:"18px 15px"}},react.createElement("input",{type:"checkbox",id:"c_".concat(ticket.get("_id")),"data-ticket":ticket.get("_id"),style:{display:"none"},onChange:function(e){return _this5.onTicketCheckChanged(e,ticket.get("_id"))},className:"svgcheckinput"}),react.createElement("label",{htmlFor:"c_".concat(ticket.get("_id")),className:"svgcheck"},react.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 18 18"},react.createElement("path",{d:"M1,9 L1,3.5 C1,2 2,1 3.5,1 L14.5,1 C16,1 17,2 17,3.5 L17,14.5 C17,16 16,17 14.5,17 L3.5,17 C2,17 1,16 1,14.5 L1,9 Z"}),react.createElement("polyline",{points:"1 9 7 14 15 4"})))),react.createElement(Table_TableCell,{className:"ticket-status ticket-".concat(status()," vam nbb uk-text-center")},react.createElement("span",{className:"uk-display-inline-block"},status()[0].toUpperCase())),react.createElement(Table_TableCell,{className:"vam nbb"},ticket.get("uid")),react.createElement(Table_TableCell,{className:"vam nbb"},ticket.get("subject")),react.createElement(Table_TableCell,{className:"vam nbb"},helpers_default().formatDate(ticket.get("date"),helpers_default().getShortDateFormat())),react.createElement(Table_TableCell,{className:"vam nbb"},ticket.getIn(["owner","fullname"])),react.createElement(Table_TableCell,{className:"vam nbb"},ticket.getIn(["group","name"])),react.createElement(Table_TableCell,{className:"vam nbb"},(a=ticket.get("assignee"))?a.get("fullname"):"--"),react.createElement(Table_TableCell,{className:"vam nbb"},dueDate),react.createElement(Table_TableCell,{className:"vam nbb"},updated))})))))}}])&&TicketsContainer_defineProperties(Constructor.prototype,protoProps),staticProps&&TicketsContainer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TicketsContainer}(react.Component),TicketsContainer_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(TicketsContainer_class2.prototype,"searchTerm",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),TicketsContainer_class=TicketsContainer_class2))||TicketsContainer_class;TicketsContainer.propTypes={socket:prop_types_default().object.isRequired,view:prop_types_default().string.isRequired,page:prop_types_default().string.isRequired,prevPage:prop_types_default().number.isRequired,nextPage:prop_types_default().number.isRequired,prevEnabled:prop_types_default().bool.isRequired,nextEnabled:prop_types_default().bool.isRequired,tickets:prop_types_default().object.isRequired,totalCount:prop_types_default().string.isRequired,loading:prop_types_default().bool.isRequired,fetchTickets:prop_types_default().func.isRequired,deleteTicket:prop_types_default().func.isRequired,ticketEvent:prop_types_default().func.isRequired,unloadTickets:prop_types_default().func.isRequired,ticketUpdated:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired,fetchSearchResults:prop_types_default().func.isRequired,common:prop_types_default().object.isRequired,filter:prop_types_default().object.isRequired},TicketsContainer.defaultProps={view:"active",page:0,prevEnabled:!0,nextEnabled:!0};const Tickets_TicketsContainer=(0,es.$j)((function(state){return{tickets:state.ticketsState.tickets,totalCount:state.ticketsState.totalCount,prevPage:state.ticketsState.prevPage,nextPage:state.ticketsState.nextPage,loading:state.ticketsState.loading,common:state.common,socket:state.shared.socket}}),{fetchTickets:tickets_fetchTickets,deleteTicket:tickets_deleteTicket,ticketEvent:tickets_ticketEvent,unloadTickets,ticketUpdated:tickets_ticketUpdated,fetchSearchResults:search_fetchSearchResults,showModal})(TicketsContainer);var AssigneeDropdownPartial_class,AssigneeDropdownPartial_class2,AssigneeDropdownPartial_descriptor,sortBy=__webpack_require__(536),sortBy_default=__webpack_require__.n(sortBy),union=__webpack_require__(550),union_default=__webpack_require__.n(union);function AssigneeDropdownPartial_typeof(obj){return AssigneeDropdownPartial_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},AssigneeDropdownPartial_typeof(obj)}function AssigneeDropdownPartial_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function AssigneeDropdownPartial_setPrototypeOf(o,p){return AssigneeDropdownPartial_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},AssigneeDropdownPartial_setPrototypeOf(o,p)}function AssigneeDropdownPartial_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=AssigneeDropdownPartial_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=AssigneeDropdownPartial_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return AssigneeDropdownPartial_possibleConstructorReturn(this,result)}}function AssigneeDropdownPartial_possibleConstructorReturn(self,call){if(call&&("object"===AssigneeDropdownPartial_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return AssigneeDropdownPartial_assertThisInitialized(self)}function AssigneeDropdownPartial_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function AssigneeDropdownPartial_getPrototypeOf(o){return AssigneeDropdownPartial_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},AssigneeDropdownPartial_getPrototypeOf(o)}var AssigneeDropdownPartial=(0,mobxreact_esm.Pi)((AssigneeDropdownPartial_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&AssigneeDropdownPartial_setPrototypeOf(subClass,superClass)}(AssigneeDropdownPartial,_React$Component);var Constructor,protoProps,staticProps,_super=AssigneeDropdownPartial_createSuper(AssigneeDropdownPartial);function AssigneeDropdownPartial(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AssigneeDropdownPartial),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"agents",AssigneeDropdownPartial_descriptor,AssigneeDropdownPartial_assertThisInitialized(_this)),(0,mobx_esm.rC)(AssigneeDropdownPartial_assertThisInitialized(_this)),_this.onUpdateAssigneeList=_this.onUpdateAssigneeList.bind(AssigneeDropdownPartial_assertThisInitialized(_this)),_this}return Constructor=AssigneeDropdownPartial,(protoProps=[{key:"componentDidMount",value:function(){this.props.socket.on(socketEventConsts.TICKETS_ASSIGNEE_LOAD,this.onUpdateAssigneeList)}},{key:"componentWillUnmount",value:function(){this.props.socket.off(socketEventConsts.TICKETS_ASSIGNEE_LOAD,this.onUpdateAssigneeList)}},{key:"onUpdateAssigneeList",value:function(data){this.agents=data||[]}},{key:"render",value:function(){var _this2=this;return react.createElement(PDropdown,{ref:this.props.forwardedRef,title:"Select Assignee",id:"assigneeDropdown",className:"opt-ignore-notice",override:!0,leftArrow:!0,topOffset:75,leftOffset:35,minHeight:215,rightComponent:react.createElement("a",{className:"hoverUnderline no-ajaxy",onClick:function(){helpers_default().hideAllpDropDowns(),_this2.props.onClearClick&&_this2.props.onClearClick(),_this2.props.socket.emit(socketEventConsts.TICKETS_ASSIGNEE_CLEAR,_this2.props.ticketId)}},"Clear Assignee")},this.agents.map((function(agent){return react.createElement("li",{key:agent._id,onClick:function(){_this2.props.onAssigneeClick&&_this2.props.onAssigneeClick({agent}),helpers_default().hideAllpDropDowns(),_this2.props.socket.emit(socketEventConsts.TICKETS_ASSIGNEE_SET,{_id:agent._id,ticketId:_this2.props.ticketId})}},react.createElement("a",{className:"messageNotification no-ajaxy",role:"button"},react.createElement("div",{className:"uk-clearfix"},react.createElement(Avatar_Avatar,{userId:agent._id,image:agent.image,size:50}),react.createElement("div",{className:"messageAuthor"},react.createElement("strong",null,agent.fullname)),react.createElement("div",{className:"messageSnippet"},react.createElement("span",null,agent.email)),react.createElement("div",{className:"messageDate"},agent.title))))})))}}])&&AssigneeDropdownPartial_defineProperties(Constructor.prototype,protoProps),staticProps&&AssigneeDropdownPartial_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AssigneeDropdownPartial}(react.Component),AssigneeDropdownPartial_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(AssigneeDropdownPartial_class2.prototype,"agents",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),AssigneeDropdownPartial_class=AssigneeDropdownPartial_class2))||AssigneeDropdownPartial_class;AssigneeDropdownPartial.propTypes={ticketId:prop_types_default().string.isRequired,onClearClick:prop_types_default().func,onAssigneeClick:prop_types_default().func,socket:prop_types_default().object.isRequired,forwardedRef:prop_types_default().any.isRequired};const Tickets_AssigneeDropdownPartial=(0,es.$j)((function(state){return{socket:state.shared.socket}}),{},null,{forwardRef:!0})(AssigneeDropdownPartial);var react_html_parser_lib=__webpack_require__(560);function CommentNotePartial_typeof(obj){return CommentNotePartial_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CommentNotePartial_typeof(obj)}function CommentNotePartial_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function CommentNotePartial_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CommentNotePartial_setPrototypeOf(o,p){return CommentNotePartial_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},CommentNotePartial_setPrototypeOf(o,p)}function CommentNotePartial_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CommentNotePartial_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CommentNotePartial_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CommentNotePartial_possibleConstructorReturn(this,result)}}function CommentNotePartial_possibleConstructorReturn(self,call){if(call&&("object"===CommentNotePartial_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function CommentNotePartial_getPrototypeOf(o){return CommentNotePartial_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},CommentNotePartial_getPrototypeOf(o)}var setupImages=function(parent){parent.body.querySelectorAll("img:not(.hasLinked)").forEach((function(i){return helpers_default().setupImageLink(i)}))},setupLinks=function(parent){parent.body.querySelectorAll("a").forEach((function(i){return helpers_default().setupLinkWarning(i)}))},CommentNotePartial=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CommentNotePartial_setPrototypeOf(subClass,superClass)}(CommentNotePartial,_React$Component);var Constructor,protoProps,staticProps,_super=CommentNotePartial_createSuper(CommentNotePartial);function CommentNotePartial(){return CommentNotePartial_classCallCheck(this,CommentNotePartial),_super.apply(this,arguments)}return Constructor=CommentNotePartial,(protoProps=[{key:"componentDidMount",value:function(){setupImages(this),setupLinks(this)}},{key:"componentDidUpdate",value:function(){setupImages(this),setupLinks(this)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var _this=this,_this$props=this.props,ticketSubject=_this$props.ticketSubject,comment=_this$props.comment,isNote=_this$props.isNote,dateFormat=_this$props.dateFormat,onEditClick=_this$props.onEditClick,onRemoveClick=_this$props.onRemoveClick,dateFormatted=helpers_default().formatDate(comment.date,dateFormat);return react.createElement("div",{className:"ticket-comment"},react.createElement(Avatar_Avatar,{image:comment.owner.image,userId:comment.owner._id}),react.createElement("div",{className:"issue-text"},react.createElement("h3",null,"Re: ",ticketSubject),react.createElement("a",{className:"comment-email-link",href:"mailto:".concat(comment.owner.email)},comment.owner.fullname," <",comment.owner.email,">"),react.createElement("br",null),react.createElement("time",{dateTime:dateFormatted,title:dateFormatted,"data-uk-tooltip":"{delay: 200}"},helpers_default().calendarDate(comment.date)),react.createElement("br",null),isNote&&react.createElement("span",{className:"uk-badge uk-badge-small nomargin-left-right text-white"},"NOTE"),react.createElement("div",{className:"comment-body",style:{marginTop:10},ref:function(r){return _this.body=r}},isNote&&react.createElement(react.Fragment,null,(0,react_html_parser_lib.ZP)(comment.note)),!isNote&&react.createElement(react.Fragment,null,(0,react_html_parser_lib.ZP)(comment.comment)))),3!==this.props.ticketStatus&&react.createElement("div",{className:"comment-actions"},helpers_default().hasPermOverRole(comment.owner.role,null,"comments:delete",!0)&&react.createElement("div",{className:"remove-comment",onClick:onRemoveClick},react.createElement("i",{className:"material-icons"},"")),helpers_default().hasPermOverRole(comment.owner.role,null,"comments:update",!0)&&react.createElement("div",{className:"edit-comment",onClick:onEditClick},react.createElement("i",{className:"material-icons"},""))))}}])&&CommentNotePartial_defineProperties(Constructor.prototype,protoProps),staticProps&&CommentNotePartial_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CommentNotePartial}(react.Component);CommentNotePartial.propTypes={ticketStatus:prop_types_default().number.isRequired,ticketSubject:prop_types_default().string.isRequired,comment:prop_types_default().object.isRequired,dateFormat:prop_types_default().string.isRequired,isNote:prop_types_default().bool.isRequired,onEditClick:prop_types_default().func.isRequired,onRemoveClick:prop_types_default().func.isRequired},CommentNotePartial.defaultProps={isNote:!1};const Tickets_CommentNotePartial=CommentNotePartial;function DatePicker_typeof(obj){return DatePicker_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DatePicker_typeof(obj)}function DatePicker_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DatePicker_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DatePicker_setPrototypeOf(o,p){return DatePicker_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},DatePicker_setPrototypeOf(o,p)}function DatePicker_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DatePicker_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DatePicker_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DatePicker_possibleConstructorReturn(this,result)}}function DatePicker_possibleConstructorReturn(self,call){if(call&&("object"===DatePicker_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DatePicker_getPrototypeOf(o){return DatePicker_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},DatePicker_getPrototypeOf(o)}var DatePicker=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DatePicker_setPrototypeOf(subClass,superClass)}(DatePicker,_React$Component);var Constructor,protoProps,staticProps,_super=DatePicker_createSuper(DatePicker);function DatePicker(){return DatePicker_classCallCheck(this,DatePicker),_super.apply(this,arguments)}return Constructor=DatePicker,(protoProps=[{key:"componentDidMount",value:function(){var _this=this;jquery_default()(this.datepicker).on("change.uk.datepicker",(function(e){_this.props.onChange&&_this.props.onChange(e)}))}},{key:"componentDidUpdate",value:function(){this.props.value&&jquery_default()(this.datepicker).val(helpers_default().formatDate(this.props.value,this.props.format)),void 0===this.props.value&&jquery_default()(this.datepicker).val("")}},{key:"componentWillUnmount",value:function(){jquery_default()(this.datepicker).off("change.uk.datepicker")}},{key:"render",value:function(){var _this2=this,_this$props=this.props,value=_this$props.value,small=_this$props.small,name=_this$props.name,validation=_this$props.validation;return _this$props.readOnly,react.createElement(react.Fragment,null,react.createElement("input",{ref:function(r){return _this2.datepicker=r},id:name,name,type:"text",readOnly:!0,className:(0,clsx_m.Z)("md-input",small&&"small-font",small&&"p-0"),"data-uk-datepicker":"{format:'".concat(this.props.format,"'}"),"data-validation":validation,style:this.style||{width:"97%"},defaultValue:value?helpers_default().formatDate(value,this.props.format):""}))}}])&&DatePicker_defineProperties(Constructor.prototype,protoProps),staticProps&&DatePicker_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DatePicker}(react.Component);DatePicker.propTypes={format:prop_types_default().string.isRequired,name:prop_types_default().string.isRequired,onChange:prop_types_default().func,value:prop_types_default().string,small:prop_types_default().bool,validation:prop_types_default().string,readOnly:prop_types_default().bool},DatePicker.defaultProps={small:!1,validation:"shortDate",readOnly:!0};const components_DatePicker=DatePicker;function IssuePartial_typeof(obj){return IssuePartial_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},IssuePartial_typeof(obj)}var IssuePartial_class,IssuePartial_class2,IssuePartial_descriptor,IssuePartial_descriptor2,IssuePartial_descriptor3,IssuePartial_descriptor4,IssuePartial_descriptor5,IssuePartial_descriptor6;function IssuePartial_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function IssuePartial_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function IssuePartial_setPrototypeOf(o,p){return IssuePartial_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},IssuePartial_setPrototypeOf(o,p)}function IssuePartial_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=IssuePartial_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=IssuePartial_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return IssuePartial_possibleConstructorReturn(this,result)}}function IssuePartial_possibleConstructorReturn(self,call){if(call&&("object"===IssuePartial_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return IssuePartial_assertThisInitialized(self)}function IssuePartial_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function IssuePartial_getPrototypeOf(o){return IssuePartial_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},IssuePartial_getPrototypeOf(o)}function IssuePartial_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var IssuePartial=(0,mobxreact_esm.Pi)((IssuePartial_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&IssuePartial_setPrototypeOf(subClass,superClass)}(IssuePartial,_React$Component);var Constructor,protoProps,staticProps,_super=IssuePartial_createSuper(IssuePartial);function IssuePartial(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,IssuePartial),IssuePartial_initializerDefineProperty(_this=_super.call(this,props),"ticketId",IssuePartial_descriptor,IssuePartial_assertThisInitialized(_this)),IssuePartial_initializerDefineProperty(_this,"status",IssuePartial_descriptor2,IssuePartial_assertThisInitialized(_this)),IssuePartial_initializerDefineProperty(_this,"owner",IssuePartial_descriptor3,IssuePartial_assertThisInitialized(_this)),IssuePartial_initializerDefineProperty(_this,"subject",IssuePartial_descriptor4,IssuePartial_assertThisInitialized(_this)),IssuePartial_initializerDefineProperty(_this,"issue",IssuePartial_descriptor5,IssuePartial_assertThisInitialized(_this)),IssuePartial_initializerDefineProperty(_this,"attachments",IssuePartial_descriptor6,IssuePartial_assertThisInitialized(_this)),(0,mobx_esm.rC)(IssuePartial_assertThisInitialized(_this)),_this.ticketId=_this.props.ticketId,_this.status=_this.props.status,_this.owner=_this.props.owner,_this.subject=_this.props.subject,_this.issue=_this.props.issue,_this.attachments=_this.props.attachments,_this.onUpdateTicketAttachments=_this.onUpdateTicketAttachments.bind(IssuePartial_assertThisInitialized(_this)),_this}return Constructor=IssuePartial,protoProps=[{key:"componentDidMount",value:function(){this.issueBody.querySelectorAll("img:not(.hasLinked)").forEach((function(i){return helpers_default().setupImageLink(i)})),function(parent){parent.issueBody.querySelectorAll("a").forEach((function(i){return helpers_default().setupLinkWarning(i)}))}(this),this.props.socket.on(socketEventConsts.TICKETS_UI_ATTACHMENTS_UPDATE,this.onUpdateTicketAttachments)}},{key:"componentDidUpdate",value:function(prevProps){prevProps.ticketId!==this.props.ticketId&&(this.ticketId=this.props.ticketId),prevProps.status!==this.props.status&&(this.status=this.props.status),prevProps.owner!==this.props.owner&&(this.owner=this.props.owner),prevProps.subject!==this.props.subject&&(this.subject=this.props.subject),prevProps.issue!==this.props.issue&&(this.issue=this.props.issue),prevProps.attachments!==this.props.attachments&&(this.attachments=this.props.attachments)}},{key:"componentWillUnmount",value:function(){this.props.socket.off(socketEventConsts.TICKETS_UI_ATTACHMENTS_UPDATE,this.onUpdateTicketAttachments)}},{key:"onUpdateTicketAttachments",value:function(data){this.ticketId===data.ticket._id&&(this.attachments=data.ticket.attachments)}},{key:"onAttachmentInputChange",value:function(e){var _this2=this,formData=new FormData,attachmentFile=e.target.files[0];formData.append("ticketId",this.ticketId),formData.append("attachment",attachmentFile);var token=document.querySelector('meta[name="csrf-token"]').getAttribute("content");axios_default().post("/tickets/uploadattachment",formData,{headers:{"Content-Type":"multipart/form-data","CSRF-TOKEN":token}}).then((function(){_this2.props.socket.emit(socketEventConsts.TICKETS_UI_ATTACHMENTS_UPDATE,{_id:_this2.ticketId}),helpers_default().UI.showSnackbar("Attachment Successfully Uploaded")})).catch((function(error){logger.error(error),error.response&&logger.error(error.response),helpers_default().UI.showSnackbar(error,!0)}))}},{key:"removeAttachment",value:function(e,attachmentId){var _this3=this;axios_default().delete("/api/v1/tickets/".concat(this.ticketId,"/attachments/remove/").concat(attachmentId)).then((function(){_this3.props.socket.emit(socketEventConsts.TICKETS_UI_ATTACHMENTS_UPDATE,{_id:_this3.ticketId}),helpers_default().UI.showSnackbar("Attachment Removed")})).catch((function(error){logger.error(error),error.response&&logger.error(error.response),helpers_default().UI.showSnackbar(error,!0)}))}},{key:"render",value:function(){var _this4=this;return react.createElement("div",{className:"initial-issue uk-clearfix"},react.createElement(Avatar_Avatar,{image:this.owner.image,userId:this.owner._id}),react.createElement("div",{className:"issue-text"},react.createElement("h3",{className:"subject-text"},this.subject),react.createElement("a",{href:"mailto:".concat(this.owner.email)},this.owner.fullname," <",this.owner.email,">"),react.createElement("br",null),react.createElement("time",{dateTime:helpers_default().formatDate(this.props.date,"YYYY-MM-DD HH:mm")},helpers_default().formatDate(this.props.date,this.props.dateFormat)),react.createElement("br",null),react.createElement("ul",{className:"attachments"},this.attachments&&this.attachments.map((function(attachment){return react.createElement("li",{key:attachment._id},react.createElement("a",{href:attachment.path,className:"no-ajaxy",rel:"noopener noreferrer",target:"_blank"},attachment.name),3!==_this4.status&&react.createElement("a",{role:"button",className:"remove-attachment",onClick:function(e){return _this4.removeAttachment(e,attachment._id)}},react.createElement("i",{className:"fa fa-remove"})))}))),react.createElement("div",{className:"issue-body",ref:function(r){return _this4.issueBody=r}},(0,react_html_parser_lib.ZP)(this.issue))),3!==this.status&&helpers_default().hasPermOverRole(this.props.owner.role,null,"tickets:update",!0)&&react.createElement(react.Fragment,null,react.createElement("div",{className:"edit-issue",onClick:function(){_this4.props.editorWindow&&_this4.props.editorWindow.openEditorWindow({subject:_this4.subject,text:_this4.issue,onPrimaryClick:function(data){_this4.props.socket.emit(socketEventConsts.TICKETS_ISSUE_SET,{_id:_this4.ticketId,value:data.text,subject:data.subjectText})}})}},react.createElement("i",{className:"material-icons"},"")),react.createElement("form",{className:"form nomargin",encType:"multipart/form-data"},react.createElement("div",{className:"add-attachment",onClick:function(e){return _this4.attachmentInput.click()}},react.createElement("i",{className:"material-icons"},"")),react.createElement("input",{ref:function(r){return _this4.attachmentInput=r},className:"hide",type:"file",onChange:function(e){return _this4.onAttachmentInputChange(e)}}))))}}],protoProps&&IssuePartial_defineProperties(Constructor.prototype,protoProps),staticProps&&IssuePartial_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),IssuePartial}(react.Component),IssuePartial_descriptor=IssuePartial_applyDecoratedDescriptor(IssuePartial_class2.prototype,"ticketId",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),IssuePartial_descriptor2=IssuePartial_applyDecoratedDescriptor(IssuePartial_class2.prototype,"status",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),IssuePartial_descriptor3=IssuePartial_applyDecoratedDescriptor(IssuePartial_class2.prototype,"owner",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),IssuePartial_descriptor4=IssuePartial_applyDecoratedDescriptor(IssuePartial_class2.prototype,"subject",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),IssuePartial_descriptor5=IssuePartial_applyDecoratedDescriptor(IssuePartial_class2.prototype,"issue",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),IssuePartial_descriptor6=IssuePartial_applyDecoratedDescriptor(IssuePartial_class2.prototype,"attachments",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),IssuePartial_class=IssuePartial_class2))||IssuePartial_class;IssuePartial.propTypes={ticketId:prop_types_default().string.isRequired,status:prop_types_default().number.isRequired,owner:prop_types_default().object.isRequired,subject:prop_types_default().string.isRequired,issue:prop_types_default().string.isRequired,date:prop_types_default().string.isRequired,dateFormat:prop_types_default().string.isRequired,attachments:prop_types_default().array,editorWindow:prop_types_default().object,socket:prop_types_default().object.isRequired};const Tickets_IssuePartial=IssuePartial;var OffCanvasEditor_class,OffCanvasEditor_class2,OffCanvasEditor_descriptor,OffCanvasEditor_descriptor2,OffCanvasEditor_descriptor3,OffCanvasEditor_descriptor4;__webpack_require__(21);function OffCanvasEditor_typeof(obj){return OffCanvasEditor_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},OffCanvasEditor_typeof(obj)}function OffCanvasEditor_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function OffCanvasEditor_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function OffCanvasEditor_setPrototypeOf(o,p){return OffCanvasEditor_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},OffCanvasEditor_setPrototypeOf(o,p)}function OffCanvasEditor_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=OffCanvasEditor_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=OffCanvasEditor_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return OffCanvasEditor_possibleConstructorReturn(this,result)}}function OffCanvasEditor_possibleConstructorReturn(self,call){if(call&&("object"===OffCanvasEditor_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return OffCanvasEditor_assertThisInitialized(self)}function OffCanvasEditor_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function OffCanvasEditor_getPrototypeOf(o){return OffCanvasEditor_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},OffCanvasEditor_getPrototypeOf(o)}function OffCanvasEditor_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var OffCanvasEditor=(0,mobxreact_esm.Pi)((OffCanvasEditor_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&OffCanvasEditor_setPrototypeOf(subClass,superClass)}(OffCanvasEditor,_React$Component);var Constructor,protoProps,staticProps,_super=OffCanvasEditor_createSuper(OffCanvasEditor);function OffCanvasEditor(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OffCanvasEditor),OffCanvasEditor_initializerDefineProperty(_this=_super.call(this,props),"mdeText",OffCanvasEditor_descriptor,OffCanvasEditor_assertThisInitialized(_this)),OffCanvasEditor_initializerDefineProperty(_this,"subjectText",OffCanvasEditor_descriptor2,OffCanvasEditor_assertThisInitialized(_this)),OffCanvasEditor_initializerDefineProperty(_this,"showSubject",OffCanvasEditor_descriptor3,OffCanvasEditor_assertThisInitialized(_this)),OffCanvasEditor_initializerDefineProperty(_this,"onPrimaryClick",OffCanvasEditor_descriptor4,OffCanvasEditor_assertThisInitialized(_this)),(0,mobx_esm.rC)(OffCanvasEditor_assertThisInitialized(_this)),_this.primaryClick=_this.primaryClick.bind(OffCanvasEditor_assertThisInitialized(_this)),_this}return Constructor=OffCanvasEditor,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs(),jquery_default()(".off-canvas-bottom").DivResizer({}),this.showSubject=this.props.showSubject}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"primaryClick",value:function(){var data={subjectText:this.subjectText,text:this.mdeText};this.onPrimaryClick&&this.onPrimaryClick(data),this.closeEditorWindow()}},{key:"openEditorWindow",value:function(data){this.subjectText=data.subject||"",this.mdeText=data.text||"",this.editor.setEditorText(this.mdeText),this.showSubject=void 0===data.showSubject||data.showSubject,this.onPrimaryClick=data.onPrimaryClick||null,jquery_default()(this.editorWindow).removeClass("closed").addClass("open")}},{key:"closeEditorWindow",value:function(e){e&&e.preventDefault(),jquery_default()(this.editorWindow).removeClass("open").addClass("closed")}},{key:"render",value:function(){var _this2=this;return react.createElement("div",{className:"off-canvas-bottom closed",ref:function(r){return _this2.editorWindow=r}},react.createElement("div",{className:"edit-window-wrapper"},this.showSubject&&react.createElement("div",{className:"edit-subject-wrap"},react.createElement("label",{htmlFor:"edit-subject-input"},"Subject"),react.createElement("input",{id:"edit-subject-input",className:"md-input mb-10",value:this.subjectText,onChange:function(e){return _this2.subjectText=e.target.value}})),react.createElement("div",{className:"editor-container"},react.createElement("div",{className:"editor"},react.createElement("div",{className:"code-mirror-wrap"},react.createElement(components_EasyMDE,{showStatusBar:!1,defaultValue:this.mdeText,value:this.mdeText,onChange:function(val){return _this2.mdeText=val},ref:function(r){return _this2.editor=r},allowImageUpload:this.props.allowUploads,inlineImageUploadUrl:this.props.uploadURL})))),react.createElement("div",{className:"action-panel"},react.createElement("div",{className:"left-buttons"},react.createElement("button",{className:"save-btn uk-button uk-button-accent mr-5",onClick:this.primaryClick},this.props.primaryLabel),react.createElement("button",{className:"uk-button uk-button-cancel",onClick:function(e){return _this2.closeEditorWindow(e)}},"Cancel")))))}}])&&OffCanvasEditor_defineProperties(Constructor.prototype,protoProps),staticProps&&OffCanvasEditor_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),OffCanvasEditor}(react.Component),OffCanvasEditor_descriptor=OffCanvasEditor_applyDecoratedDescriptor(OffCanvasEditor_class2.prototype,"mdeText",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),OffCanvasEditor_descriptor2=OffCanvasEditor_applyDecoratedDescriptor(OffCanvasEditor_class2.prototype,"subjectText",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),OffCanvasEditor_descriptor3=OffCanvasEditor_applyDecoratedDescriptor(OffCanvasEditor_class2.prototype,"showSubject",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),OffCanvasEditor_descriptor4=OffCanvasEditor_applyDecoratedDescriptor(OffCanvasEditor_class2.prototype,"onPrimaryClick",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),OffCanvasEditor_class=OffCanvasEditor_class2))||OffCanvasEditor_class;OffCanvasEditor.propTypes={showSubject:prop_types_default().bool,primaryLabel:prop_types_default().string.isRequired,onPrimaryClick:prop_types_default().func,closeLabel:prop_types_default().string,allowUploads:prop_types_default().bool,uploadURL:prop_types_default().string},OffCanvasEditor.defaultProps={showSubject:!0,closeLabel:"Cancel",allowUploads:!1};const components_OffCanvasEditor=OffCanvasEditor;function StatusSelector_typeof(obj){return StatusSelector_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},StatusSelector_typeof(obj)}var StatusSelector_class,StatusSelector_class2,StatusSelector_descriptor;function StatusSelector_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function StatusSelector_setPrototypeOf(o,p){return StatusSelector_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},StatusSelector_setPrototypeOf(o,p)}function StatusSelector_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=StatusSelector_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=StatusSelector_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return StatusSelector_possibleConstructorReturn(this,result)}}function StatusSelector_possibleConstructorReturn(self,call){if(call&&("object"===StatusSelector_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return StatusSelector_assertThisInitialized(self)}function StatusSelector_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function StatusSelector_getPrototypeOf(o){return StatusSelector_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},StatusSelector_getPrototypeOf(o)}var statusToName=function(status){switch(status){case 0:return"New";case 1:return"Open";case 2:return"Pending";case 3:return"Closed"}},StatusSelector=(0,mobxreact_esm.Pi)((StatusSelector_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&StatusSelector_setPrototypeOf(subClass,superClass)}(StatusSelector,_React$Component);var Constructor,protoProps,staticProps,_super=StatusSelector_createSuper(StatusSelector);function StatusSelector(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StatusSelector),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"status",StatusSelector_descriptor,StatusSelector_assertThisInitialized(_this)),(0,mobx_esm.rC)(StatusSelector_assertThisInitialized(_this)),_this.status=_this.props.status,_this.onDocumentClick=_this.onDocumentClick.bind(StatusSelector_assertThisInitialized(_this)),_this.onUpdateTicketStatus=_this.onUpdateTicketStatus.bind(StatusSelector_assertThisInitialized(_this)),_this}return Constructor=StatusSelector,(protoProps=[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onDocumentClick),this.props.socket.on(socketEventConsts.TICKETS_UI_STATUS_UPDATE,this.onUpdateTicketStatus)}},{key:"componentDidUpdate",value:function(prevProps){prevProps.status!==this.props.status&&(this.status=this.props.status)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onDocumentClick),this.props.socket.off(socketEventConsts.TICKETS_UI_STATUS_UPDATE,this.onUpdateTicketStatus)}},{key:"onDocumentClick",value:function(e){!this.selectorButton.contains(e.target)&&this.dropMenu.classList.contains("shown")&&this.forceClose()}},{key:"onUpdateTicketStatus",value:function(data){this.props.ticketId===data.tid&&(this.status=data.status,this.props.onStatusChange&&this.props.onStatusChange(this.status))}},{key:"toggleDropMenu",value:function(e){if(e.stopPropagation(),this.props.hasPerm){var hasHide=this.dropMenu.classList.contains("hide"),hasShown=this.dropMenu.classList.contains("shown");hasHide?this.dropMenu.classList.remove("hide"):this.dropMenu.classList.add("hide"),hasShown?this.dropMenu.classList.remove("shown"):this.dropMenu.classList.add("shown")}}},{key:"forceClose",value:function(){this.dropMenu.classList.remove("shown"),this.dropMenu.classList.add("hide")}},{key:"changeStatus",value:function(status){this.props.hasPerm&&(this.props.socket.emit(socketEventConsts.TICKETS_STATUS_SET,{_id:this.props.ticketId,value:status}),this.forceClose())}},{key:"render",value:function(){var _this2=this;return react.createElement("div",{className:"floating-ticket-status"},react.createElement("div",{title:"Change Status",className:(0,clsx_m.Z)("ticket-status","ticket-".concat(statusToName(this.status).toLowerCase()),this.props.hasPerm&&"cursor-pointer"),onClick:function(e){return _this2.toggleDropMenu(e)},ref:function(r){return _this2.selectorButton=r}},react.createElement("span",null,statusToName(this.status))),this.props.hasPerm&&react.createElement("span",{className:"drop-icon material-icons",style:{left:"auto",right:22,bottom:-18}},"keyboard_arrow_down"),react.createElement("div",{id:"statusSelect",ref:function(r){return _this2.dropMenu=r},className:"hide"},react.createElement("ul",null,react.createElement("li",{className:"ticket-status ticket-new",onClick:function(){return _this2.changeStatus(0)}},react.createElement("span",null,"New")),react.createElement("li",{className:"ticket-status ticket-open",onClick:function(){return _this2.changeStatus(1)}},react.createElement("span",null,"Open")),react.createElement("li",{className:"ticket-status ticket-pending",onClick:function(){return _this2.changeStatus(2)}},react.createElement("span",null,"Pending")),react.createElement("li",{className:"ticket-status ticket-closed",onClick:function(){return _this2.changeStatus(3)}},react.createElement("span",null,"Closed")))))}}])&&StatusSelector_defineProperties(Constructor.prototype,protoProps),staticProps&&StatusSelector_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),StatusSelector}(react.Component),StatusSelector_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(StatusSelector_class2.prototype,"status",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),StatusSelector_class=StatusSelector_class2))||StatusSelector_class;StatusSelector.propTypes={ticketId:prop_types_default().string.isRequired,status:prop_types_default().number.isRequired,onStatusChange:prop_types_default().func,hasPerm:prop_types_default().bool.isRequired,socket:prop_types_default().object.isRequired},StatusSelector.defaultProps={hasPerm:!1};const Tickets_StatusSelector=StatusSelector;function TruTabSection_typeof(obj){return TruTabSection_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TruTabSection_typeof(obj)}function TruTabSection_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TruTabSection_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TruTabSection_setPrototypeOf(o,p){return TruTabSection_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},TruTabSection_setPrototypeOf(o,p)}function TruTabSection_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TruTabSection_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TruTabSection_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TruTabSection_possibleConstructorReturn(this,result)}}function TruTabSection_possibleConstructorReturn(self,call){if(call&&("object"===TruTabSection_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TruTabSection_getPrototypeOf(o){return TruTabSection_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},TruTabSection_getPrototypeOf(o)}var TruTabSection=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TruTabSection_setPrototypeOf(subClass,superClass)}(TruTabSection,_React$Component);var Constructor,protoProps,staticProps,_super=TruTabSection_createSuper(TruTabSection);function TruTabSection(){return TruTabSection_classCallCheck(this,TruTabSection),_super.apply(this,arguments)}return Constructor=TruTabSection,(protoProps=[{key:"render",value:function(){var _this$props=this.props,sectionId=_this$props.sectionId,active=_this$props.active;return react.createElement("div",{className:(0,clsx_m.Z)("tru-tab-section",!active&&"hidden"),"data-tabid":sectionId,style:this.props.style||{paddingTop:20}},this.props.children)}}])&&TruTabSection_defineProperties(Constructor.prototype,protoProps),staticProps&&TruTabSection_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TruTabSection}(react.Component);TruTabSection.propTypes={sectionId:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]).isRequired,active:prop_types_default().bool.isRequired,style:prop_types_default().object},TruTabSection.defaultProps={active:!1};const TruTabs_TruTabSection=TruTabSection;function TruTabSelector_typeof(obj){return TruTabSelector_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TruTabSelector_typeof(obj)}function TruTabSelector_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TruTabSelector_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TruTabSelector_setPrototypeOf(o,p){return TruTabSelector_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},TruTabSelector_setPrototypeOf(o,p)}function TruTabSelector_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TruTabSelector_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TruTabSelector_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TruTabSelector_possibleConstructorReturn(this,result)}}function TruTabSelector_possibleConstructorReturn(self,call){if(call&&("object"===TruTabSelector_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TruTabSelector_getPrototypeOf(o){return TruTabSelector_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},TruTabSelector_getPrototypeOf(o)}var TruTabSelector=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TruTabSelector_setPrototypeOf(subClass,superClass)}(TruTabSelector,_React$Component);var Constructor,protoProps,staticProps,_super=TruTabSelector_createSuper(TruTabSelector);function TruTabSelector(){return TruTabSelector_classCallCheck(this,TruTabSelector),_super.apply(this,arguments)}return Constructor=TruTabSelector,(protoProps=[{key:"render",value:function(){var _this$props=this.props,label=_this$props.label,active=_this$props.active,selectorId=_this$props.selectorId,showBadge=_this$props.showBadge,badgeText=_this$props.badgeText;return react.createElement(react.Fragment,null,react.createElement("a",{role:"button",className:(0,clsx_m.Z)("tru-tab-selector no-ajaxy",active&&"active"),"data-tabid":selectorId,onClick:function(e){return e.preventDefault()}},label,showBadge&&react.createElement("span",{className:"uk-badge uk-badge-grey uk-badge-small"},badgeText)))}}])&&TruTabSelector_defineProperties(Constructor.prototype,protoProps),staticProps&&TruTabSelector_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TruTabSelector}(react.Component);TruTabSelector.propTypes={label:prop_types_default().string.isRequired,active:prop_types_default().bool,selectorId:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]).isRequired,showBadge:prop_types_default().bool,badgeText:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number])},TruTabSelector.defaultProps={active:!1,showBadge:!1};const TruTabs_TruTabSelector=TruTabSelector;function TruTabSelectors_typeof(obj){return TruTabSelectors_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TruTabSelectors_typeof(obj)}function TruTabSelectors_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TruTabSelectors_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TruTabSelectors_setPrototypeOf(o,p){return TruTabSelectors_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},TruTabSelectors_setPrototypeOf(o,p)}function TruTabSelectors_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TruTabSelectors_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TruTabSelectors_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TruTabSelectors_possibleConstructorReturn(this,result)}}function TruTabSelectors_possibleConstructorReturn(self,call){if(call&&("object"===TruTabSelectors_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TruTabSelectors_getPrototypeOf(o){return TruTabSelectors_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},TruTabSelectors_getPrototypeOf(o)}var TruTabSelectors=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TruTabSelectors_setPrototypeOf(subClass,superClass)}(TruTabSelectors,_React$Component);var Constructor,protoProps,staticProps,_super=TruTabSelectors_createSuper(TruTabSelectors);function TruTabSelectors(){return TruTabSelectors_classCallCheck(this,TruTabSelectors),_super.apply(this,arguments)}return Constructor=TruTabSelectors,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().setupTruTabs(document.querySelectorAll(".tru-tab-selectors > .tru-tab-selector"))}},{key:"render",value:function(){var _this=this,_this$props=this.props,children=_this$props.children,showTrack=_this$props.showTrack;return react.createElement("div",{className:"tru-tab-selectors",style:this.props.style,ref:function(r){return _this.selectors=r}},children,react.createElement("span",{className:"tru-tab-highlighter"}),showTrack&&react.createElement("span",{className:"tru-tab-hr tru-tab-hr-lighten"}))}}])&&TruTabSelectors_defineProperties(Constructor.prototype,protoProps),staticProps&&TruTabSelectors_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TruTabSelectors}(react.Component);TruTabSelectors.propTypes={showTrack:prop_types_default().bool,style:prop_types_default().object},TruTabSelectors.defaultProps={showTrack:!0};const TruTabs_TruTabSelectors=TruTabSelectors;function TruTabWrapper_typeof(obj){return TruTabWrapper_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TruTabWrapper_typeof(obj)}function TruTabWrapper_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TruTabWrapper_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TruTabWrapper_setPrototypeOf(o,p){return TruTabWrapper_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},TruTabWrapper_setPrototypeOf(o,p)}function TruTabWrapper_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TruTabWrapper_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TruTabWrapper_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TruTabWrapper_possibleConstructorReturn(this,result)}}function TruTabWrapper_possibleConstructorReturn(self,call){if(call&&("object"===TruTabWrapper_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TruTabWrapper_getPrototypeOf(o){return TruTabWrapper_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},TruTabWrapper_getPrototypeOf(o)}var TruTabWrapper=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TruTabWrapper_setPrototypeOf(subClass,superClass)}(TruTabWrapper,_React$Component);var Constructor,protoProps,staticProps,_super=TruTabWrapper_createSuper(TruTabWrapper);function TruTabWrapper(){return TruTabWrapper_classCallCheck(this,TruTabWrapper),_super.apply(this,arguments)}return Constructor=TruTabWrapper,(protoProps=[{key:"render",value:function(){return react.createElement("div",{className:"tru-tabs uk-clearfix",style:this.props.style||{padding:"20px 0"}},this.props.children)}}])&&TruTabWrapper_defineProperties(Constructor.prototype,protoProps),staticProps&&TruTabWrapper_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TruTabWrapper}(react.Component);TruTabWrapper.propTypes={style:prop_types_default().object,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node])};const TruTabs_TruTabWrapper=TruTabWrapper;function SingleTicketContainer_typeof(obj){return SingleTicketContainer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SingleTicketContainer_typeof(obj)}var SingleTicketContainer_class,SingleTicketContainer_class2,SingleTicketContainer_descriptor,SingleTicketContainer_descriptor2;function SingleTicketContainer_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function SingleTicketContainer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SingleTicketContainer_setPrototypeOf(o,p){return SingleTicketContainer_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},SingleTicketContainer_setPrototypeOf(o,p)}function SingleTicketContainer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SingleTicketContainer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SingleTicketContainer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SingleTicketContainer_possibleConstructorReturn(this,result)}}function SingleTicketContainer_possibleConstructorReturn(self,call){if(call&&("object"===SingleTicketContainer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return SingleTicketContainer_assertThisInitialized(self)}function SingleTicketContainer_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function SingleTicketContainer_getPrototypeOf(o){return SingleTicketContainer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},SingleTicketContainer_getPrototypeOf(o)}function SingleTicketContainer_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var SingleTicketContainer=(0,mobxreact_esm.Pi)((SingleTicketContainer_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SingleTicketContainer_setPrototypeOf(subClass,superClass)}(SingleTicketContainer,_React$Component);var Constructor,protoProps,staticProps,_super=SingleTicketContainer_createSuper(SingleTicketContainer);function SingleTicketContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SingleTicketContainer),SingleTicketContainer_initializerDefineProperty(_this=_super.call(this,props),"ticket",SingleTicketContainer_descriptor,SingleTicketContainer_assertThisInitialized(_this)),SingleTicketContainer_initializerDefineProperty(_this,"isSubscribed",SingleTicketContainer_descriptor2,SingleTicketContainer_assertThisInitialized(_this)),_this.assigneeDropdownPartial=(0,react.createRef)(),(0,mobx_esm.rC)(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateTicket=_this.onUpdateTicket.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onSocketUpdateComments=_this.onSocketUpdateComments.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateTicketNotes=_this.onUpdateTicketNotes.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateAssignee=_this.onUpdateAssignee.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateTicketType=_this.onUpdateTicketType.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateTicketPriority=_this.onUpdateTicketPriority.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateTicketGroup=_this.onUpdateTicketGroup.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateTicketDueDate=_this.onUpdateTicketDueDate.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateTicketTags=_this.onUpdateTicketTags.bind(SingleTicketContainer_assertThisInitialized(_this)),_this}return Constructor=SingleTicketContainer,(protoProps=[{key:"componentDidMount",value:function(){var parent;this.props.socket.on(socketEventConsts.TICKETS_UPDATE,this.onUpdateTicket),this.props.socket.on(socketEventConsts.TICKETS_ASSIGNEE_UPDATE,this.onUpdateAssignee),this.props.socket.on(socketEventConsts.TICKETS_UI_TYPE_UPDATE,this.onUpdateTicketType),this.props.socket.on(socketEventConsts.TICKETS_UI_PRIORITY_UPDATE,this.onUpdateTicketPriority),this.props.socket.on(socketEventConsts.TICKETS_UI_GROUP_UPDATE,this.onUpdateTicketGroup),this.props.socket.on(socketEventConsts.TICKETS_UI_DUEDATE_UPDATE,this.onUpdateTicketDueDate),this.props.socket.on(socketEventConsts.TICKETS_UI_TAGS_UPDATE,this.onUpdateTicketTags),parent=this,axios_default().get("/api/v2/tickets/".concat(parent.props.ticketUid)).then((function(res){parent.ticket=res.data.ticket,parent.isSubscribed=parent.ticket&&-1!==parent.ticket.subscribers.findIndex((function(i){return i._id===parent.props.shared.sessionUser._id}))})).catch((function(error){403===error.response.status&&History.pushState(null,null,"/tickets"),logger.error(error)})),this.props.fetchTicketTypes(),this.props.fetchGroups()}},{key:"componentDidUpdate",value:function(){helpers_default().resizeFullHeight(),helpers_default().setupScrollers()}},{key:"componentWillUnmount",value:function(){this.props.socket.off(socketEventConsts.TICKETS_UPDATE,this.onUpdateTicket),this.props.socket.off(socketEventConsts.TICKETS_ASSIGNEE_UPDATE,this.onUpdateAssignee),this.props.socket.off(socketEventConsts.TICKETS_UI_TYPE_UPDATE,this.onUpdateTicketType),this.props.socket.off(socketEventConsts.TICKETS_UI_PRIORITY_UPDATE,this.onUpdateTicketPriority),this.props.socket.off(socketEventConsts.TICKETS_UI_GROUP_UPDATE,this.onUpdateTicketGroup),this.props.socket.off(socketEventConsts.TICKETS_UI_DUEDATE_UPDATE,this.onUpdateTicketDueDate),this.props.socket.off(socketEventConsts.TICKETS_UI_TAGS_UPDATE,this.onUpdateTicketTags),this.props.unloadGroups()}},{key:"onUpdateTicket",value:function(data){this.ticket._id===data._id&&(this.ticket=data)}},{key:"onSocketUpdateComments",value:function(data){this.ticket._id===data._id&&(this.ticket.comments=data.comments)}},{key:"onUpdateTicketNotes",value:function(data){this.ticket._id===data._id&&(this.ticket.notes=data.notes)}},{key:"onUpdateAssignee",value:function(data){this.ticket._id===data._id&&(this.ticket.assignee=data.assignee,this.ticket.assignee&&this.ticket.assignee._id===this.props.shared.sessionUser._id&&(this.isSubscribed=!0))}},{key:"onUpdateTicketType",value:function(data){this.ticket._id===data._id&&(this.ticket.type=data.type)}},{key:"onUpdateTicketPriority",value:function(data){this.ticket._id===data._id&&(this.ticket.priority=data.priority)}},{key:"onUpdateTicketGroup",value:function(data){this.ticket._id===data._id&&(this.ticket.group=data.group)}},{key:"onUpdateTicketDueDate",value:function(data){this.ticket._id===data._id&&(this.ticket.dueDate=data.dueDate)}},{key:"onUpdateTicketTags",value:function(data){this.ticket._id===data._id&&(this.ticket.tags=data.tags)}},{key:"onCommentNoteSubmit",value:function(e,type){var _this2=this;e.preventDefault();var isNote="note"===type;axios_default().post("/api/v1/tickets/add".concat(isNote?"note":"comment"),{_id:!isNote&&this.ticket._id,comment:!isNote&&this.commentMDE.getEditorText(),ticketid:isNote&&this.ticket._id,note:isNote&&this.noteMDE.getEditorText()}).then((function(res){res&&res.data&&res.data.success&&(isNote?(_this2.ticket.notes=res.data.ticket.notes,_this2.noteMDE.setEditorText("")):(_this2.ticket.comments=res.data.ticket.comments,_this2.commentMDE.setEditorText("")),helpers_default().scrollToBottom(".page-content-right",!0),_this2.ticket.history=res.data.ticket.history)})).catch((function(error){logger.error(error),error.response&&logger.error(error.response),helpers_default().UI.showSnackbar(error,!0)}))}},{key:"onSubscriberChanged",value:function(e){var _this3=this;axios_default().put("/api/v1/tickets/".concat(this.ticket._id,"/subscribe"),{user:this.props.shared.sessionUser._id,subscribe:e.target.checked}).then((function(res){res.data.success&&res.data.ticket&&(_this3.ticket.subscribers=res.data.ticket.subscribers,_this3.isSubscribed=-1!==_this3.ticket.subscribers.findIndex((function(i){return i._id===_this3.props.shared.sessionUser._id})))})).catch((function(error){logger.error(error.response||error)}))}},{key:"transferToThirdParty",value:function(e){this.props.transferToThirdParty({uid:this.ticket.uid})}},{key:"notesTagged",get:function(){return this.ticket.notes.forEach((function(i){return i.isNote=!0})),this.ticket.notes}},{key:"commentsAndNotes",get:function(){if(!this.ticket)return[];if(!helpers_default().canUser("tickets:notes",!0))return sortBy_default()(this.ticket.comments,"date");var commentsAndNotes=union_default()(this.ticket.comments,this.notesTagged);return commentsAndNotes=sortBy_default()(commentsAndNotes,"date")}},{key:"hasCommentsOrNotes",get:function(){return!!this.ticket&&(this.ticket.comments.length>0||this.ticket.notes.length>0)}},{key:"render",value:function(){var isAgent,isAdmin,_this4=this,mappedGroups=this.props.groupsState?this.props.groupsState.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})):[],mappedTypes=this.props.ticketTypes?this.props.ticketTypes.map((function(type){return{text:type.get("name"),value:type.get("_id"),raw:type.toJS()}})):[],hasTicketUpdate=this.ticket&&3!==this.ticket.status&&helpers_default().canUser("tickets:update");return react.createElement("div",{className:"uk-clearfix uk-position-relative",style:{width:"100%",height:"100vh"}},!this.ticket&&react.createElement(components_SpinLoader,{active:!0}),this.ticket&&react.createElement(react.Fragment,null,react.createElement("div",{className:"page-content"},react.createElement("div",{className:"uk-float-left page-title page-title-small noshadow nopadding relative",style:{width:360,maxWidth:360,minWidth:360}},react.createElement("div",{className:"page-title-border-right relative",style:{padding:"0 30px"}},react.createElement("p",null,"Ticket #",this.ticket.uid),react.createElement(Tickets_StatusSelector,{ticketId:this.ticket._id,status:this.ticket.status,socket:this.props.socket,onStatusChange:function(status){return _this4.ticket.status=status},hasPerm:(isAgent=_this4.props.sessionUser.role.isAgent,isAdmin=_this4.props.sessionUser.role.isAdmin,isAgent||isAdmin?helpers_default().canUser("tickets:update"):!!_this4.ticket&&helpers_default().hasPermOverRole(_this4.ticket.owner.role,_this4.sessionUser.role,"tickets:update",!1))})),react.createElement("div",{className:"page-content-left full-height scrollable"},react.createElement("div",{className:"ticket-details-wrap uk-position-relative uk-clearfix"},react.createElement("div",{className:"ticket-assignee-wrap uk-clearfix",style:{paddingRight:30}},react.createElement("h4",null,"Assignee"),react.createElement("div",{className:"ticket-assignee uk-clearfix"},hasTicketUpdate&&react.createElement("a",{role:"button",title:"Set Assignee",style:{float:"left"},className:"relative no-ajaxy",onClick:function(){return _this4.props.socket.emit(socketEventConsts.TICKETS_ASSIGNEE_LOAD)}},react.createElement(PDropdown_PDropdownTrigger,{target:this.assigneeDropdownPartial},react.createElement(Avatar_Avatar,{image:this.ticket.assignee&&this.ticket.assignee.image,showOnlineBubble:void 0!==this.ticket.assignee,userId:this.ticket.assignee&&this.ticket.assignee._id}),react.createElement("span",{className:"drop-icon material-icons"},"keyboard_arrow_down"))),!hasTicketUpdate&&react.createElement(Avatar_Avatar,{image:this.ticket.assignee&&this.ticket.assignee.image,showOnlineBubble:void 0!==this.ticket.assignee,userId:this.ticket.assignee&&this.ticket.assignee._id}),react.createElement("div",{className:"ticket-assignee-details"},!this.ticket.assignee&&react.createElement("h3",null,"No User Assigned"),this.ticket.assignee&&react.createElement(react.Fragment,null,react.createElement("h3",null,this.ticket.assignee.fullname),react.createElement("a",{className:"comment-email-link uk-text-truncate uk-display-inline-block",href:"mailto:".concat(this.ticket.assignee.email)},this.ticket.assignee.email),react.createElement("span",{className:"uk-display-block"},this.ticket.assignee.title)))),hasTicketUpdate&&react.createElement(Tickets_AssigneeDropdownPartial,{forwardedRef:this.assigneeDropdownPartial,ticketId:this.ticket._id,onClearClick:function(){return _this4.ticket.assignee=void 0},onAssigneeClick:function(_ref){var agent=_ref.agent;return _this4.ticket.assignee=agent}})),react.createElement("div",{className:"uk-width-1-1 padding-left-right-15"},react.createElement("div",{className:"tru-card ticket-details uk-clearfix"},react.createElement("div",{className:"uk-width-1-2 uk-float-left nopadding"},react.createElement("div",{className:"marginright5"},react.createElement("span",null,"Type"),hasTicketUpdate&&react.createElement("select",{value:this.ticket.type._id,onChange:function(e){var type=_this4.props.ticketTypes.find((function(t){return t.get("_id")===e.target.value}));-1!==type.get("priorities").findIndex((function(p){return p.get("_id")===_this4.ticket.priority._id}))||(_this4.props.socket.emit(socketEventConsts.TICKETS_PRIORITY_SET,{_id:_this4.ticket._id,value:type.get("priorities").find((function(){return!0}))}),uikit_combined_min_default().modal.confirm("Selected Priority does not exist for this ticket type. Priority has reset to the default for this type.<br><br><strong>Please select a new priority</strong>",(function(){}),{cancelButtonClass:"uk-hidden"})),_this4.props.socket.emit(socketEventConsts.TICKETS_TYPE_SET,{_id:_this4.ticket._id,value:e.target.value})}},mappedTypes&&mappedTypes.map((function(type){return react.createElement("option",{key:type.value,value:type.value},type.text)}))),!hasTicketUpdate&&react.createElement("div",{className:"input-box"},this.ticket.type.name))),react.createElement("div",{className:"uk-width-1-2 uk-float-left nopadding"},react.createElement("div",{className:"marginleft5"},react.createElement("span",null,"Priority"),hasTicketUpdate&&react.createElement("select",{name:"tPriority",id:"tPriority",value:this.ticket.priority._id,onChange:function(e){return _this4.props.socket.emit(socketEventConsts.TICKETS_PRIORITY_SET,{_id:_this4.ticket._id,value:e.target.value})}},this.ticket.type&&this.ticket.type.priorities&&this.ticket.type.priorities.map((function(priority){return react.createElement("option",{key:priority._id,value:priority._id},priority.name)}))),!hasTicketUpdate&&react.createElement("div",{className:"input-box"},this.ticket.priority.name))),react.createElement("div",{className:"uk-width-1-1 nopadding uk-clearfix"},react.createElement("span",null,"Group"),hasTicketUpdate&&react.createElement("select",{value:this.ticket.group._id,onChange:function(e){_this4.props.socket.emit(socketEventConsts.TICKETS_GROUP_SET,{_id:_this4.ticket._id,value:e.target.value})}},mappedGroups&&mappedGroups.map((function(group){return react.createElement("option",{key:group.value,value:group.value},group.text)}))),!hasTicketUpdate&&react.createElement("div",{className:"input-box"},this.ticket.group.name)),react.createElement("div",{className:"uk-width-1-1 p-0"},react.createElement("span",null,"Due Date")," ",hasTicketUpdate&&react.createElement("span",null,"- "),hasTicketUpdate&&react.createElement("div",{className:"uk-display-inline"},react.createElement("a",{role:"button",onClick:function(e){e.preventDefault(),_this4.props.socket.emit(socketEventConsts.TICKETS_DUEDATE_SET,{_id:_this4.ticket._id,value:void 0})}},"Clear"),react.createElement(components_DatePicker,{name:"ticket_due_date",format:helpers_default().getShortDateFormat(),value:this.ticket.dueDate,small:!0,onChange:function(e){var dueDate=moment_default()(e.target.value,helpers_default().getShortDateFormat()).utc().toISOString();_this4.props.socket.emit(socketEventConsts.TICKETS_DUEDATE_SET,{_id:_this4.ticket._id,value:dueDate})}})),!hasTicketUpdate&&react.createElement("div",{className:"input-box"},helpers_default().formatDate(this.ticket.dueDate,this.props.common.get("shortDateFormat")))),react.createElement("div",{className:"uk-width-1-1 nopadding"},react.createElement("span",null,"Tags",hasTicketUpdate&&react.createElement(react.Fragment,null,react.createElement("span",null," - "),react.createElement("div",{id:"editTags",className:"uk-display-inline"},react.createElement("a",{role:"button",style:{fontSize:11},className:"no-ajaxy",onClick:function(){_this4.props.showModal("ADD_TAGS_MODAL",{ticketId:_this4.ticket._id,currentTags:_this4.ticket.tags.map((function(tag){return tag._id}))})}},"Edit Tags")))),react.createElement("div",{className:"tag-list uk-clearfix"},this.ticket.tags&&this.ticket.tags.map((function(tag){return react.createElement("div",{key:tag._id,className:"item"},tag.name)})))))),helpers_default().canUser("agent:*",!0)&&react.createElement("div",{className:"uk-width-1-1 padding-left-right-15"},react.createElement("div",{className:"tru-card ticket-details pr-0 pb-0",style:{height:250}},"Ticket History",react.createElement("hr",{style:{padding:0,margin:0}}),react.createElement("div",{className:"history-items scrollable",style:{paddingTop:12}},this.ticket.history&&this.ticket.history.map((function(item){return react.createElement("div",{key:item._id,className:"history-item"},react.createElement("time",{dateTime:helpers_default().formatDate(item.date,_this4.props.common.get("longDateFormat"))}),react.createElement("em",null,"Action by: ",react.createElement("span",null,item.owner.fullname)),react.createElement("p",null,item.description))})))))))),react.createElement("div",{className:"page-message nopadding",style:{marginLeft:360}},react.createElement("div",{className:"page-title-right noshadow"},this.props.common.get("hasThirdParty")&&react.createElement("div",{className:"page-top-comments uk-float-right"},react.createElement("a",{role:"button",className:"btn md-btn-primary no-ajaxy",onClick:function(e){e.preventDefault(),_this4.transferToThirdParty(e)}},"Transfer to ThirdParty")),react.createElement("div",{className:"page-top-comments uk-float-right"},react.createElement("a",{role:"button",className:"btn no-ajaxy",onClick:function(e){e.preventDefault(),helpers_default().scrollToBottom(".page-content-right",!0)}},"Add Comment")),react.createElement("div",{className:"onoffswitch subscribeSwitch uk-float-right",style:{marginRight:10,position:"relative",top:18}},react.createElement("input",{id:"subscribeSwitch",type:"checkbox",name:"subscribeSwitch",className:"onoffswitch-checkbox",checked:this.isSubscribed,onChange:function(e){return _this4.onSubscriberChanged(e)}}),react.createElement("label",{className:"onoffswitch-label",htmlFor:"subscribeSwitch"},react.createElement("span",{className:"onoffswitch-inner subscribeSwitch-inner"}),react.createElement("span",{className:"onoffswitch-switch subscribeSwitch-switch"}))),react.createElement("div",{className:"pagination uk-float-right",style:{marginRight:5}},react.createElement("ul",{className:"button-group"},helpers_default().canUser("tickets:print")&&react.createElement("li",{className:"pagination"},react.createElement("a",{href:"/tickets/print/".concat(this.ticket.uid),className:"btn no-ajaxy",style:{borderRadius:3,marginRight:5},rel:"noopener noreferrer",target:"_blank"},react.createElement("i",{className:"material-icons"},"")))))),react.createElement("div",{className:"page-content-right full-height scrollable"},react.createElement("div",{className:"comments-wrapper"},react.createElement(Tickets_IssuePartial,{ticketId:this.ticket._id,status:this.ticket.status,owner:this.ticket.owner,subject:this.ticket.subject,issue:this.ticket.issue,date:this.ticket.date,dateFormat:"".concat(this.props.common.get("longDateFormat"),", ").concat(this.props.common.get("timeFormat")),attachments:this.ticket.attachments,editorWindow:this.editorWindow,socket:this.props.socket}),this.hasCommentsOrNotes&&react.createElement(TruTabs_TruTabWrapper,null,react.createElement(TruTabs_TruTabSelectors,{style:{marginLeft:110}},react.createElement(TruTabs_TruTabSelector,{selectorId:0,label:"All",active:!0,showBadge:!0,badgeText:this.commentsAndNotes.length}),react.createElement(TruTabs_TruTabSelector,{selectorId:1,label:"Comments",showBadge:!0,badgeText:this.ticket?this.ticket.comments&&this.ticket.comments.length:0}),helpers_default().canUser("tickets:notes",!0)&&react.createElement(TruTabs_TruTabSelector,{selectorId:2,label:"Notes",showBadge:!0,badgeText:this.ticket?this.ticket.notes&&this.ticket.notes.length:0})),react.createElement(TruTabs_TruTabSection,{sectionId:0,active:!0},react.createElement("div",{className:"all-comments"},this.commentsAndNotes.map((function(item){return react.createElement(Tickets_CommentNotePartial,{key:item._id,ticketStatus:_this4.ticket.status,ticketSubject:_this4.ticket.subject,comment:item,isNote:item.isNote,dateFormat:"".concat(_this4.props.common.get("longDateFormat"),", ").concat(_this4.props.common.get("timeFormat")),onEditClick:function(){_this4.editorWindow.openEditorWindow({showSubject:!1,text:item.isNote?item.note:item.comment,onPrimaryClick:function(data){_this4.props.socket.emit(socketEventConsts.TICKETS_COMMENT_NOTE_SET,{_id:_this4.ticket._id,item:item._id,isNote:item.isNote,value:data.text})}})},onRemoveClick:function(){_this4.props.socket.emit(socketEventConsts.TICKETS_COMMENT_NOTE_REMOVE,{_id:_this4.ticket._id,value:item._id,isNote:item.isNote})}})})))),react.createElement(TruTabs_TruTabSection,{sectionId:1},react.createElement("div",{className:"comments"},this.ticket&&this.ticket.comments.map((function(comment){return react.createElement(Tickets_CommentNotePartial,{key:comment._id,ticketStatus:_this4.ticket.status,ticketSubject:_this4.ticket.subject,comment,dateFormat:"".concat(_this4.props.common.get("longDateFormat"),", ").concat(_this4.props.common.get("timeFormat")),onEditClick:function(){_this4.editorWindow.openEditorWindow({showSubject:!1,text:comment.comment,onPrimaryClick:function(data){_this4.props.socket.emit(socketEventConsts.TICKETS_COMMENT_NOTE_SET,{_id:_this4.ticket._id,item:comment._id,isNote:comment.isNote,value:data.text})}})},onRemoveClick:function(){_this4.props.socket.emit(socketEventConsts.TICKETS_COMMENT_NOTE_REMOVE,{_id:_this4.ticket._id,value:comment._id,isNote:comment.isNote})}})})))),react.createElement(TruTabs_TruTabSection,{sectionId:2},react.createElement("div",{className:"notes"},this.ticket&&this.ticket.notes.map((function(note){return react.createElement(Tickets_CommentNotePartial,{key:note._id,ticketStatus:_this4.ticket.status,ticketSubject:_this4.ticket.subject,comment:note,isNote:!0,dateFormat:"".concat(_this4.props.common.get("longDateFormat"),", ").concat(_this4.props.common.get("timeFormat")),onEditClick:function(){_this4.editorWindow.openEditorWindow({showSubject:!1,text:note.note,onPrimaryClick:function(data){_this4.props.socket.emit(socketEventConsts.TICKETS_COMMENT_NOTE_SET,{_id:_this4.ticket._id,item:note._id,isNote:note.isNote,value:data.text})}})},onRemoveClick:function(){_this4.props.socket.emit(socketEventConsts.TICKETS_COMMENT_NOTE_REMOVE,{_id:_this4.ticket._id,value:note._id,isNote:note.isNote})}})}))))),3!==this.ticket.status&&(helpers_default().canUser("comments:create",!0)||helpers_default().canUser("tickets:notes",!0))&&react.createElement("div",{className:"uk-width-1-1 ticket-reply uk-clearfix"},react.createElement(Avatar_Avatar,{image:this.props.shared.sessionUser.image,showOnlineBubble:!1}),react.createElement(TruTabs_TruTabWrapper,{style:{paddingLeft:85}},react.createElement(TruTabs_TruTabSelectors,{showTrack:!1},helpers_default().canUser("comments:create",!0)&&react.createElement(TruTabs_TruTabSelector,{selectorId:0,label:"Comment",active:!0}),helpers_default().canUser("tickets:notes",!0)&&react.createElement(TruTabs_TruTabSelector,{selectorId:1,label:"Internal Note",active:!helpers_default().canUser("comments:create",!0)})),react.createElement(TruTabs_TruTabSection,{sectionId:0,style:{paddingTop:0},active:helpers_default().canUser("comments:create",!0)},react.createElement("form",{onSubmit:function(e){return _this4.onCommentNoteSubmit(e,"comment")}},react.createElement(components_EasyMDE,{allowImageUpload:!0,inlineImageUploadUrl:"/tickets/uploadmdeimage",inlineImageUploadHeaders:{ticketid:this.ticket._id},ref:function(r){return _this4.commentMDE=r}}),react.createElement("div",{className:"uk-width-1-1 uk-clearfix",style:{marginTop:50}},react.createElement("div",{className:"uk-float-right"},react.createElement("button",{type:"submit",className:"uk-button uk-button-accent",style:{padding:"10px 15px"}},"Post Comment"))))),react.createElement(TruTabs_TruTabSection,{sectionId:1,style:{paddingTop:0},active:!helpers_default().canUser("comments:create")&&helpers_default().canUser("tickets:notes",!0)},react.createElement("form",{onSubmit:function(e){return _this4.onCommentNoteSubmit(e,"note")}},react.createElement(components_EasyMDE,{allowImageUpload:!0,inlineImageUploadUrl:"/tickets/uploadmdeimage",inlineImageUploadHeaders:{ticketid:this.ticket._id},ref:function(r){return _this4.noteMDE=r}}),react.createElement("div",{className:"uk-width-1-1 uk-clearfix",style:{marginTop:50}},react.createElement("div",{className:"uk-float-right"},react.createElement("button",{type:"submit",className:"uk-button uk-button-accent",style:{padding:"10px 15px"}},"Save Note"))))))))))),react.createElement(components_OffCanvasEditor,{primaryLabel:"Save Edit",ref:function(r){return _this4.editorWindow=r}})))}}])&&SingleTicketContainer_defineProperties(Constructor.prototype,protoProps),staticProps&&SingleTicketContainer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SingleTicketContainer}(react.Component),SingleTicketContainer_descriptor=SingleTicketContainer_applyDecoratedDescriptor(SingleTicketContainer_class2.prototype,"ticket",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),SingleTicketContainer_descriptor2=SingleTicketContainer_applyDecoratedDescriptor(SingleTicketContainer_class2.prototype,"isSubscribed",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),SingleTicketContainer_applyDecoratedDescriptor(SingleTicketContainer_class2.prototype,"notesTagged",[mobx_esm.Fl],Object.getOwnPropertyDescriptor(SingleTicketContainer_class2.prototype,"notesTagged"),SingleTicketContainer_class2.prototype),SingleTicketContainer_applyDecoratedDescriptor(SingleTicketContainer_class2.prototype,"commentsAndNotes",[mobx_esm.Fl],Object.getOwnPropertyDescriptor(SingleTicketContainer_class2.prototype,"commentsAndNotes"),SingleTicketContainer_class2.prototype),SingleTicketContainer_applyDecoratedDescriptor(SingleTicketContainer_class2.prototype,"hasCommentsOrNotes",[mobx_esm.Fl],Object.getOwnPropertyDescriptor(SingleTicketContainer_class2.prototype,"hasCommentsOrNotes"),SingleTicketContainer_class2.prototype),SingleTicketContainer_class=SingleTicketContainer_class2))||SingleTicketContainer_class;SingleTicketContainer.propTypes={ticketId:prop_types_default().string.isRequired,ticketUid:prop_types_default().string.isRequired,shared:prop_types_default().object.isRequired,sessionUser:prop_types_default().object,socket:prop_types_default().object.isRequired,common:prop_types_default().object.isRequired,ticketTypes:prop_types_default().object.isRequired,fetchTicketTypes:prop_types_default().func.isRequired,groupsState:prop_types_default().object.isRequired,fetchGroups:prop_types_default().func.isRequired,unloadGroups:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired,transferToThirdParty:prop_types_default().func};const Tickets_SingleTicketContainer=(0,es.$j)((function(state){return{common:state.common.viewdata,shared:state.shared,sessionUser:state.shared.sessionUser,socket:state.shared.socket,ticketTypes:state.ticketsState.types,groupsState:state.groupsState}}),{fetchTicketTypes:tickets_fetchTicketTypes,fetchGroups:groups_fetchGroups,unloadGroups,showModal,transferToThirdParty:tickets_transferToThirdParty})(SingleTicketContainer);function Menu_typeof(obj){return Menu_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Menu_typeof(obj)}function Menu_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Menu_setPrototypeOf(o,p){return Menu_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Menu_setPrototypeOf(o,p)}function Menu_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Menu_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Menu_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Menu_possibleConstructorReturn(this,result)}}function Menu_possibleConstructorReturn(self,call){if(call&&("object"===Menu_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Menu_getPrototypeOf(o){return Menu_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Menu_getPrototypeOf(o)}var Menu=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Menu_setPrototypeOf(subClass,superClass)}(Menu,_React$Component);var Constructor,protoProps,staticProps,_super=Menu_createSuper(Menu);function Menu(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Menu),_super.call(this,props)}return Constructor=Menu,(protoProps=[{key:"componentDidMount",value:function(){if(this.props.draggable){var menu=jquery_default()(this.menu);this.menuSortable=uikit_combined_min_default().sortable(menu,{handleClass:"drag-handle"}),this.props.onMenuDrag&&this.menuSortable.on("change.uk.sortable",this.props.onMenuDrag)}}},{key:"componentDidUpdate",value:function(){if(this.props.draggable&&!this.menuSortable){var menu=jquery_default()(this.menu);this.menuSortable=uikit_combined_min_default().sortable(menu,{handleClass:"drag-handle"}),this.props.onMenuDrag&&this.menuSortable.on("change.uk.sortable",this.props.onMenuDrag)}}},{key:"render",value:function(){var _this=this,hideBorders=this.props.hideBorders;return react.createElement("ul",{ref:function(i){return _this.menu=i},className:"settings-categories scrollable"+(hideBorders?" noborder ":""),style:{overflow:"hidden auto"}},this.props.children)}}])&&Menu_defineProperties(Constructor.prototype,protoProps),staticProps&&Menu_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Menu}(react.Component);Menu.propTypes={hideBorders:prop_types_default().bool,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired,draggable:prop_types_default().bool,onMenuDrag:prop_types_default().func},Menu.defaultProps={draggable:!1};const Settings_Menu=Menu;function MenuItem_typeof(obj){return MenuItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},MenuItem_typeof(obj)}function MenuItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function MenuItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function MenuItem_setPrototypeOf(o,p){return MenuItem_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},MenuItem_setPrototypeOf(o,p)}function MenuItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=MenuItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=MenuItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return MenuItem_possibleConstructorReturn(this,result)}}function MenuItem_possibleConstructorReturn(self,call){if(call&&("object"===MenuItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function MenuItem_getPrototypeOf(o){return MenuItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},MenuItem_getPrototypeOf(o)}var MenuItem=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&MenuItem_setPrototypeOf(subClass,superClass)}(MenuItem,_React$Component);var Constructor,protoProps,staticProps,_super=MenuItem_createSuper(MenuItem);function MenuItem(){return MenuItem_classCallCheck(this,MenuItem),_super.apply(this,arguments)}return Constructor=MenuItem,(protoProps=[{key:"render",value:function(){var _this$props=this.props,title=_this$props.title,active=_this$props.active,onClick=_this$props.onClick,draggable=_this$props.draggable;return react.createElement("li",{className:active?" active":"",onClick,"data-key":this.props.dragKey},react.createElement("div",{className:"setting-category"},draggable&&react.createElement("span",{className:"drag-handle uk-display-inline-block uk-float-left mr-10"},react.createElement("i",{className:"material-icons"},"drag_handle")),react.createElement("h3",null,title)))}}])&&MenuItem_defineProperties(Constructor.prototype,protoProps),staticProps&&MenuItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MenuItem}(react.Component);MenuItem.propTypes={title:prop_types_default().string.isRequired,active:prop_types_default().bool,onClick:prop_types_default().func.isRequired,draggable:prop_types_default().bool,dragKey:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number])};const Settings_MenuItem=MenuItem;function SettingItem_typeof(obj){return SettingItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SettingItem_typeof(obj)}function SettingItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SettingItem_setPrototypeOf(o,p){return SettingItem_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},SettingItem_setPrototypeOf(o,p)}function SettingItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SettingItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SettingItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SettingItem_possibleConstructorReturn(this,result)}}function SettingItem_possibleConstructorReturn(self,call){if(call&&("object"===SettingItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SettingItem_getPrototypeOf(o){return SettingItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},SettingItem_getPrototypeOf(o)}var SettingItem=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SettingItem_setPrototypeOf(subClass,superClass)}(SettingItem,_React$Component);var Constructor,protoProps,staticProps,_super=SettingItem_createSuper(SettingItem);function SettingItem(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SettingItem),_super.call(this,props)}return Constructor=SettingItem,(protoProps=[{key:"render",value:function(){var _this$props=this.props,title=_this$props.title,subtitle=_this$props.subtitle,component=_this$props.component,tooltip=_this$props.tooltip,extraClass=_this$props.extraClass;return react.createElement("div",{className:"setting-item-wrap uk-margin-medium-bottom"},react.createElement("div",{className:"panel trupanel nopadding no-hover-shadow "+extraClass||0,style:{minHeight:"60px"}},react.createElement("div",{className:"left"},react.createElement("h6",{style:{padding:"0 0 0 15px",margin:"15px 0 0 0",fontSize:"16px",lineHeight:"14px"}},title,tooltip&&react.createElement("i",{className:"material-icons",style:{color:"#888",fontSize:"16px",cursor:"pointer",lineHeight:"3px",marginLeft:"4px"},"data-uk-tooltip":"{cls:'long-text'}",title:tooltip},"error")),react.createElement("h5",{style:{padding:"0 0 10px 15px",margin:"2px 0 0 0",fontSize:"12px"},className:"uk-text-muted"},subtitle)),react.createElement("div",{className:"right uk-width-1-3",style:{position:"relative",paddingTop:"5px"}},react.createElement("div",{className:"uk-float-left",style:{paddingRight:"11px",minWidth:"130px",width:"100%"}},component)),this.props.children&&react.createElement("div",null,react.createElement("hr",{className:"nomargin-top clear"}),react.createElement("div",{className:"panel-body2",style:{padding:this.props.subPanelPadding||"20px 15px 15px 15px"}},react.createElement("div",{className:"uk-position-relative"},react.Children.map(this.props.children,(function(child,k){return react.createElement("div",{key:k,className:"uk-clearfix"},child)}))))),this.props.footer&&react.createElement("div",{style:{padding:"0 15px 25px 15px",marginTop:"-15px"}},this.props.footer)))}}])&&SettingItem_defineProperties(Constructor.prototype,protoProps),staticProps&&SettingItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SettingItem}(react.Component);SettingItem.propTypes={title:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().object]).isRequired,subtitle:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().object]),tooltip:prop_types_default().string,component:prop_types_default().element,footer:prop_types_default().element,subPanelPadding:prop_types_default().string,extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node])};const Settings_SettingItem=SettingItem;function InputWithSave_typeof(obj){return InputWithSave_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},InputWithSave_typeof(obj)}var InputWithSave_class,InputWithSave_class2,InputWithSave_descriptor;function InputWithSave_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function InputWithSave_setPrototypeOf(o,p){return InputWithSave_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},InputWithSave_setPrototypeOf(o,p)}function InputWithSave_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=InputWithSave_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=InputWithSave_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return InputWithSave_possibleConstructorReturn(this,result)}}function InputWithSave_possibleConstructorReturn(self,call){if(call&&("object"===InputWithSave_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return InputWithSave_assertThisInitialized(self)}function InputWithSave_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function InputWithSave_getPrototypeOf(o){return InputWithSave_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},InputWithSave_getPrototypeOf(o)}var InputWithSave=(0,mobxreact_esm.Pi)((InputWithSave_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&InputWithSave_setPrototypeOf(subClass,superClass)}(InputWithSave,_React$Component);var Constructor,protoProps,staticProps,_super=InputWithSave_createSuper(InputWithSave);function InputWithSave(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,InputWithSave),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"value",InputWithSave_descriptor,InputWithSave_assertThisInitialized(_this)),(0,mobx_esm.rC)(InputWithSave_assertThisInitialized(_this)),_this}return Constructor=InputWithSave,(protoProps=[{key:"componentDidMount",value:function(){this.value=this.props.initialValue?this.props.initialValue:"",helpers_default().UI.inputs()}},{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){void 0!==this.props.initialValue&&prevProps.initialValue!==this.props.initialValue&&(this.value=this.props.initialValue)}},{key:"onSaveClicked",value:function(){this.props.updateSetting({name:this.props.settingName,value:this.value,stateName:this.props.stateName})}},{key:"updateValue",value:function(evt){this.value=evt.target.value}},{key:"render",value:function(){var _this2=this,width="100%";return this.props.width&&(width=this.props.width),react.createElement("div",{className:"uk-width-1-1 uk-float-right",style:{width}},react.createElement("div",{className:"uk-width-3-4 uk-float-left",style:{paddingRight:"10px"}},react.createElement("input",{id:this.props.stateName,className:"md-input md-input-width-medium",type:"text",value:this.value,onChange:function(evt){return _this2.updateValue(evt)}})),react.createElement("div",{className:"uk-width-1-4 uk-float-right",style:{marginTop:"10px",textAlign:"center"}},react.createElement("button",{className:"md-btn md-btn-small",onClick:function(e){return _this2.onSaveClicked(e)}},this.props.saveLabel?this.props.saveLabel:"Save")))}}])&&InputWithSave_defineProperties(Constructor.prototype,protoProps),staticProps&&InputWithSave_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),InputWithSave}(react.Component),InputWithSave_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(InputWithSave_class2.prototype,"value",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),InputWithSave_class=InputWithSave_class2))||InputWithSave_class;InputWithSave.propTypes={updateSetting:prop_types_default().func.isRequired,settingName:prop_types_default().string.isRequired,stateName:prop_types_default().string.isRequired,saveLabel:prop_types_default().string,initialValue:prop_types_default().string,value:prop_types_default().string,width:prop_types_default().string};const Settings_InputWithSave=(0,es.$j)(null,{updateSetting:settings_updateSetting})(InputWithSave);function SettingSubItem_typeof(obj){return SettingSubItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SettingSubItem_typeof(obj)}function SettingSubItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function SettingSubItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SettingSubItem_setPrototypeOf(o,p){return SettingSubItem_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},SettingSubItem_setPrototypeOf(o,p)}function SettingSubItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SettingSubItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SettingSubItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SettingSubItem_possibleConstructorReturn(this,result)}}function SettingSubItem_possibleConstructorReturn(self,call){if(call&&("object"===SettingSubItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SettingSubItem_getPrototypeOf(o){return SettingSubItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},SettingSubItem_getPrototypeOf(o)}var SettingSubItem=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SettingSubItem_setPrototypeOf(subClass,superClass)}(SettingSubItem,_React$Component);var Constructor,protoProps,staticProps,_super=SettingSubItem_createSuper(SettingSubItem);function SettingSubItem(){return SettingSubItem_classCallCheck(this,SettingSubItem),_super.apply(this,arguments)}return Constructor=SettingSubItem,(protoProps=[{key:"render",value:function(){var _this$props=this.props,parentClass=_this$props.parentClass,title=_this$props.title,titleCss=_this$props.titleCss,subtitle=_this$props.subtitle,component=_this$props.component,tooltip=_this$props.tooltip,headCss=titleCss||{fontWeight:"normal"};return react.createElement("div",{className:parentClass},react.createElement("div",{className:"uk-float-left uk-width-1-2"},react.createElement("h5",{style:headCss},title,tooltip&&react.createElement("i",{className:"material-icons",style:{color:"#888",fontSize:"14px",cursor:"pointer",lineHeight:"3px",marginLeft:"4px"},"data-uk-tooltip":!0,title:tooltip},"error")),react.createElement("div",{className:"p uk-text-muted"},subtitle)),react.createElement("div",{className:"uk-float-right uk-width-1-2 uk-clearfix",style:{position:"relative",marginTop:"5px"}},react.createElement("div",{className:"uk-width-1-1 uk-float-right"},component)))}}])&&SettingSubItem_defineProperties(Constructor.prototype,protoProps),staticProps&&SettingSubItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SettingSubItem}(react.Component);SettingSubItem.propTypes={parentClass:prop_types_default().string,title:prop_types_default().string.isRequired,titleCss:prop_types_default().object,subtitle:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().node,prop_types_default().element]),tooltip:prop_types_default().string,component:prop_types_default().element},SettingSubItem.defaultProps={parentClass:""};const Settings_SettingSubItem=SettingSubItem;function zone_typeof(obj){return zone_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},zone_typeof(obj)}function zone_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function zone_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function zone_setPrototypeOf(o,p){return zone_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},zone_setPrototypeOf(o,p)}function zone_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=zone_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=zone_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return zone_possibleConstructorReturn(this,result)}}function zone_possibleConstructorReturn(self,call){if(call&&("object"===zone_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function zone_getPrototypeOf(o){return zone_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},zone_getPrototypeOf(o)}var Zone=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&zone_setPrototypeOf(subClass,superClass)}(Zone,_React$Component);var Constructor,protoProps,staticProps,_super=zone_createSuper(Zone);function Zone(){return zone_classCallCheck(this,Zone),_super.apply(this,arguments)}return Constructor=Zone,(protoProps=[{key:"render",value:function(){var extraClass=this.props.extraClass;return react.createElement("div",{className:"zone uk-clearfix "+(extraClass||"")},this.props.children)}}])&&zone_defineProperties(Constructor.prototype,protoProps),staticProps&&zone_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Zone}(react.Component);Zone.propTypes={extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const zone=Zone;function ZoneBox_typeof(obj){return ZoneBox_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},ZoneBox_typeof(obj)}function ZoneBox_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function ZoneBox_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ZoneBox_setPrototypeOf(o,p){return ZoneBox_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},ZoneBox_setPrototypeOf(o,p)}function ZoneBox_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=ZoneBox_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=ZoneBox_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return ZoneBox_possibleConstructorReturn(this,result)}}function ZoneBox_possibleConstructorReturn(self,call){if(call&&("object"===ZoneBox_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function ZoneBox_getPrototypeOf(o){return ZoneBox_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},ZoneBox_getPrototypeOf(o)}var ZoneBox=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&ZoneBox_setPrototypeOf(subClass,superClass)}(ZoneBox,_React$Component);var Constructor,protoProps,staticProps,_super=ZoneBox_createSuper(ZoneBox);function ZoneBox(){return ZoneBox_classCallCheck(this,ZoneBox),_super.apply(this,arguments)}return Constructor=ZoneBox,(protoProps=[{key:"render",value:function(){var extraClass=this.props.extraClass;return react.createElement("div",{className:"z-box uk-clearfix "+(extraClass||"")},this.props.children)}}])&&ZoneBox_defineProperties(Constructor.prototype,protoProps),staticProps&&ZoneBox_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ZoneBox}(react.Component);ZoneBox.propTypes={extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const components_ZoneBox=ZoneBox;function General_typeof(obj){return General_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},General_typeof(obj)}function General_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function General_setPrototypeOf(o,p){return General_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},General_setPrototypeOf(o,p)}function General_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=General_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=General_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return General_possibleConstructorReturn(this,result)}}function General_possibleConstructorReturn(self,call){if(call&&("object"===General_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function General_getPrototypeOf(o){return General_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},General_getPrototypeOf(o)}var GeneralSettings=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&General_setPrototypeOf(subClass,superClass)}(GeneralSettings,_React$Component);var Constructor,protoProps,staticProps,_super=General_createSuper(GeneralSettings);function GeneralSettings(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GeneralSettings),_super.call(this,props)}return Constructor=GeneralSettings,(protoProps=[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"getSettingsValue",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"updateSetting",value:function(stateName,name,value){this.props.updateSetting({stateName,name,value})}},{key:"getTimezones",value:function(){return moment_timezone_default().tz.names().map((function(name){var year=(new Date).getUTCFullYear(),timezoneAtBeginningOfyear=moment_timezone_default().tz(year+"-01-01",name);return{utc:timezoneAtBeginningOfyear.utcOffset(),text:"(GMT"+timezoneAtBeginningOfyear.format("Z")+") "+name,value:name}})).sort((function(a,b){return a.utc-b.utc}))}},{key:"onTimezoneChange",value:function(e){e.target.value&&this.updateSetting("timezone","gen:timezone",e.target.value)}},{key:"render",value:function(){var _this=this,active=this.props.active,SiteTitle=react.createElement(Settings_InputWithSave,{stateName:"siteTitle",settingName:"gen:sitetitle",initialValue:this.getSettingsValue("siteTitle")}),SiteUrl=react.createElement(Settings_InputWithSave,{stateName:"siteUrl",settingName:"gen:siteurl",initialValue:this.getSettingsValue("siteUrl")}),Timezone=react.createElement(components_SingleSelect,{stateName:"timezone",settingName:"gen:timezone",items:this.getTimezones(),defaultValue:this.getSettingsValue("timezone"),onSelectChange:function(e){_this.onTimezoneChange(e)},showTextbox:!0});return react.createElement("div",{className:active?"active":"hide"},react.createElement(Settings_SettingItem,{title:"Site Title",subtitle:react.createElement("div",null,"Title of site. Used as page title. ",react.createElement("i",null,"default: Trudesk")),component:SiteTitle}),react.createElement(Settings_SettingItem,{title:"Site Url",subtitle:react.createElement("div",null,"Publicly accessible URL of this site. ",react.createElement("i",null,"ex: ",this.props.viewdata.get("hosturl"))),component:SiteUrl}),react.createElement(Settings_SettingItem,{title:"Time Zone",subtitle:"Set the local timezone for date display",tooltip:"Requires Server Restart",component:Timezone}),react.createElement(Settings_SettingItem,{title:"Time & Date Format",subtitle:react.createElement("a",{href:"https://momentjs.com/docs/#/displaying/format/",rel:"noopener noreferrer",target:"_blank"},"Moment.js Format Options")},react.createElement(zone,null,react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Time Format",subtitle:"Set the format for time display",component:react.createElement(Settings_InputWithSave,{stateName:"timeFormat",settingName:"gen:timeFormat",initialValue:this.getSettingsValue("timeFormat"),width:"60%"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Short Date Format",subtitle:"Set the format for short dates",component:react.createElement(Settings_InputWithSave,{stateName:"shortDateFormat",settingName:"gen:shortDateFormat",initialValue:this.getSettingsValue("shortDateFormat"),width:"60%"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Long Date Format",subtitle:"Set the format for long dates",component:react.createElement(Settings_InputWithSave,{stateName:"longDateFormat",settingName:"gen:longDateFormat",initialValue:this.getSettingsValue("longDateFormat"),width:"60%"})})))))}}])&&General_defineProperties(Constructor.prototype,protoProps),staticProps&&General_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),GeneralSettings}(react.Component);GeneralSettings.propTypes={active:prop_types_default().bool,updateSetting:prop_types_default().func.isRequired,viewdata:prop_types_default().object.isRequired,settings:prop_types_default().object.isRequired};const General=(0,es.$j)((function(state){return{viewdata:state.common.viewdata,settings:state.settings.settings}}),{updateSetting:settings_updateSetting})(GeneralSettings);function Accounts_typeof(obj){return Accounts_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Accounts_typeof(obj)}var Accounts_class,Accounts_class2,Accounts_descriptor,Accounts_descriptor2;function Accounts_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function Accounts_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Accounts_setPrototypeOf(o,p){return Accounts_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Accounts_setPrototypeOf(o,p)}function Accounts_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Accounts_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Accounts_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Accounts_possibleConstructorReturn(this,result)}}function Accounts_possibleConstructorReturn(self,call){if(call&&("object"===Accounts_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Accounts_assertThisInitialized(self)}function Accounts_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Accounts_getPrototypeOf(o){return Accounts_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Accounts_getPrototypeOf(o)}function Accounts_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var AccountsSettingsContainer=(0,mobxreact_esm.Pi)((Accounts_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Accounts_setPrototypeOf(subClass,superClass)}(AccountsSettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Accounts_createSuper(AccountsSettingsContainer);function AccountsSettingsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AccountsSettingsContainer),Accounts_initializerDefineProperty(_this=_super.call(this,props),"passwordComplexityEnabled",Accounts_descriptor,Accounts_assertThisInitialized(_this)),Accounts_initializerDefineProperty(_this,"allowUserRegistrationEnabled",Accounts_descriptor2,Accounts_assertThisInitialized(_this)),(0,mobx_esm.rC)(Accounts_assertThisInitialized(_this)),_this.state={restarting:!1},_this.restartServer=_this.restartServer.bind(Accounts_assertThisInitialized(_this)),_this}return Constructor=AccountsSettingsContainer,protoProps=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(prevProps){prevProps.settings!==this.props.settings&&(this.passwordComplexityEnabled!==this.getSetting("accountsPasswordComplexity")&&(this.passwordComplexityEnabled=this.getSetting("accountsPasswordComplexity")),this.allowUserRegistrationEnabled!==this.getSetting("allowUserRegistration")&&(this.allowUserRegistrationEnabled=this.getSetting("allowUserRegistration")))}},{key:"restartServer",value:function(){var _this2=this;this.setState({restarting:!0});var token=document.querySelector('meta[name="csrf-token"]').getAttribute("content");axios_default().post("/api/v1/admin/restart",{},{headers:{"CSRF-TOKEN":token}}).catch((function(error){helpers_default().hideLoader(),logger.error(error.responseText),logger.error("Unable to restart server. Server must run under PM2 and Account must have admin rights."),helpers_default().UI.showSnackbar("Unable to restart server. Are you an Administrator?",!0)})).then((function(){_this2.setState({restarting:!1})}))}},{key:"getSetting",value:function(stateName){return this.props.settings.getIn(["settings",stateName,"value"])?this.props.settings.getIn(["settings",stateName,"value"]):""}},{key:"updateSetting",value:function(stateName,name,value){this.props.updateSetting({stateName,name,value})}},{key:"render",value:function(){var _this3=this,active=this.props.active;return react.createElement("div",{className:active?"active":"hide"},react.createElement(Settings_SettingItem,{title:"Allow User Registration",subtitle:"Allow users to create accounts on the login screen.",component:react.createElement(Settings_EnableSwitch,{stateName:"allowUserRegistration",label:"Enable",checked:this.allowUserRegistrationEnabled,onChange:function(e){_this3.updateSetting("allowUserRegistration","allowUserRegistration:enable",e.target.checked)}})}),react.createElement(Settings_SettingItem,{title:"Password Complexity",subtitle:"Require users passwords to meet minimum password complexity",tooltip:"Minimum 8 characters with uppercase and numeric.",component:react.createElement(Settings_EnableSwitch,{stateName:"accountsPasswordComplexity",label:"Enable",checked:this.passwordComplexityEnabled,onChange:function(e){_this3.updateSetting("accountsPasswordComplexity","accountsPasswordComplexity:enable",e.target.checked)}})}))}}],protoProps&&Accounts_defineProperties(Constructor.prototype,protoProps),staticProps&&Accounts_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AccountsSettingsContainer}(react.Component),Accounts_descriptor=Accounts_applyDecoratedDescriptor(Accounts_class2.prototype,"passwordComplexityEnabled",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Accounts_descriptor2=Accounts_applyDecoratedDescriptor(Accounts_class2.prototype,"allowUserRegistrationEnabled",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Accounts_class=Accounts_class2))||Accounts_class;AccountsSettingsContainer.propTypes={active:prop_types_default().bool.isRequired,updateSetting:prop_types_default().func.isRequired,updateMultipleSettings:prop_types_default().func.isRequired,settings:prop_types_default().object.isRequired};const Accounts=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting,updateMultipleSettings:settings_updateMultipleSettings})(AccountsSettingsContainer);function UploadButtonWithX_typeof(obj){return UploadButtonWithX_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},UploadButtonWithX_typeof(obj)}function UploadButtonWithX_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function UploadButtonWithX_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function UploadButtonWithX_setPrototypeOf(o,p){return UploadButtonWithX_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},UploadButtonWithX_setPrototypeOf(o,p)}function UploadButtonWithX_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=UploadButtonWithX_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=UploadButtonWithX_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return UploadButtonWithX_possibleConstructorReturn(this,result)}}function UploadButtonWithX_possibleConstructorReturn(self,call){if(call&&("object"===UploadButtonWithX_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function UploadButtonWithX_getPrototypeOf(o){return UploadButtonWithX_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},UploadButtonWithX_getPrototypeOf(o)}var UploadButtonWithX=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&UploadButtonWithX_setPrototypeOf(subClass,superClass)}(UploadButtonWithX,_React$Component);var Constructor,protoProps,staticProps,_super=UploadButtonWithX_createSuper(UploadButtonWithX);function UploadButtonWithX(){return UploadButtonWithX_classCallCheck(this,UploadButtonWithX),_super.apply(this,arguments)}return Constructor=UploadButtonWithX,(protoProps=[{key:"componentDidMount",value:function(){var $uploadButton=jquery_default()(this.uploadButton),$buttonX=jquery_default()(this.buttonX),$uploadSelect=jquery_default()(this.uploadSelect),uploadLogoSettings={action:this.props.uploadAction,allow:this.props.extAllowed,loadstart:function(){$uploadButton.text("Uploading..."),$uploadButton.attr("disabled",!0),$uploadButton.addClass("disable")},allcomplete:function(){$uploadButton.text("Upload Logo"),$uploadButton.attr("disabled",!1),$uploadButton.removeClass("disable"),helpers_default().UI.showSnackbar("Upload Complete. Reloading...",!1),setTimeout((function(){window.location.reload()}),1e3),$buttonX.removeClass("hide")}};uikit_combined_min_default().uploadSelect($uploadSelect,uploadLogoSettings)}},{key:"render",value:function(){var _this=this,_this$props=this.props,buttonText=_this$props.buttonText,showX=_this$props.showX,onXClick=_this$props.onXClick;return react.createElement("div",null,react.createElement("button",{ref:function(x){_this.buttonX=x},className:"md-btn md-btn-danger md-btn-small right ".concat(showX?"":"hide"),onClick:onXClick,style:{marginTop:"8px"}},"X"),react.createElement("button",{ref:function(button){_this.uploadButton=button},className:"uk-form-file md-btn md-btn-small right",style:{marginTop:"8px",textTransform:"none"}},buttonText,react.createElement("input",{ref:function(select){_this.uploadSelect=select},type:"file"})))}}])&&UploadButtonWithX_defineProperties(Constructor.prototype,protoProps),staticProps&&UploadButtonWithX_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),UploadButtonWithX}(react.Component);UploadButtonWithX.propTypes={buttonText:prop_types_default().string.isRequired,uploadAction:prop_types_default().string.isRequired,extAllowed:prop_types_default().string.isRequired,showX:prop_types_default().oneOfType([prop_types_default().bool,prop_types_default().string]),onXClick:prop_types_default().func};const Settings_UploadButtonWithX=UploadButtonWithX;function Appearance_typeof(obj){return Appearance_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Appearance_typeof(obj)}function Appearance_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Appearance_setPrototypeOf(o,p){return Appearance_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Appearance_setPrototypeOf(o,p)}function Appearance_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Appearance_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Appearance_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Appearance_possibleConstructorReturn(this,result)}}function Appearance_possibleConstructorReturn(self,call){if(call&&("object"===Appearance_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Appearance_getPrototypeOf(o){return Appearance_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Appearance_getPrototypeOf(o)}var colorMap={light:{headerBG:"#42464d",headerPrimary:"#f6f7f8",primary:"#606771",secondary:"#f7f8fa",tertiary:"#e74c3c",quaternary:"#e6e7e8"},dark:{headerBG:"#242a31",headerPrimary:"#f6f7f8",primary:"#f6f7f8",secondary:"#2f3640",tertiary:"#e74c3c",quaternary:"#454f5d"},bluejean:{headerBG:"#112d4e",headerPrimary:"#f9f7f7",primary:"#112d4e",secondary:"#f9f7f7",tertiary:"#3f72af",quaternary:"#dbe2ef"},midnight:{headerBG:"#2c2e3e",headerPrimary:"#f6f6f6",primary:"#444a54",secondary:"#c8c8c8",tertiary:"#ee2b47",quaternary:"#2c2e3e"},moonlight:{headerBG:"#2e3238",headerPrimary:"#eeeeee",primary:"#444a54",secondary:"#c8c8c8",tertiary:"#7971ea",quaternary:"#444a54"},purplerain:{headerBG:"#393041",headerPrimary:"#f6f6f6",primary:"#393041",secondary:"#d2cbd8",tertiary:"#f67280",quaternary:"#52455f"},sandstone:{headerBG:"#625757",headerPrimary:"#f9f9f9",primary:"#625757",secondary:"#dfdfdf",tertiary:"#ef5a5a",quaternary:"#6f6363"},winterfire:{headerBG:"#404969",headerPrimary:"#ebf0f6",primary:"#404969",secondary:"#ebf0f6",tertiary:"#ff7f50",quaternary:"#4a5479"}},AppearanceSettings=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Appearance_setPrototypeOf(subClass,superClass)}(AppearanceSettings,_React$Component);var Constructor,protoProps,staticProps,_super=Appearance_createSuper(AppearanceSettings);function AppearanceSettings(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AppearanceSettings),(_this=_super.call(this,props)).state={selectedColorScheme:"light"},_this}return Constructor=AppearanceSettings,(protoProps=[{key:"componentDidUpdate",value:function(){var colorScheme=this.calcColorScheme();this.state.selectedColorScheme!==colorScheme&&this.setState({selectedColorScheme:colorScheme})}},{key:"getSettingsValue",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"updateSetting",value:function(name,value,stateName){this.props.updateSetting({name,value,stateName})}},{key:"calcColorScheme",value:function(){var colorScheme="light";return"#2f3640"===this.getSettingsValue("colorSecondary")?colorScheme="dark":"#112d4e"===this.getSettingsValue("colorHeaderBG")?colorScheme="bluejean":"#ee2b47"===this.getSettingsValue("colorTertiary")?colorScheme="midnight":"#2e3238"===this.getSettingsValue("colorHeaderBG")?colorScheme="moonlight":"#f67280"===this.getSettingsValue("colorTertiary")?colorScheme="purplerain":"#625757"===this.getSettingsValue("colorHeaderBG")?colorScheme="sandstone":"#404969"===this.getSettingsValue("colorHeaderBG")&&(colorScheme="winterfire"),colorScheme}},{key:"onBuiltInColorSelectChange",value:function(e){e.target&&e.target.value&&(this.headerBGColorSelect.setState({selectedColor:colorMap[e.target.value].headerBG},this.headerBGColorSelect.updateColorButton),this.headerPrimaryColorSelect.setState({selectedColor:colorMap[e.target.value].headerPrimary},this.headerPrimaryColorSelect.updateColorButton),this.primaryColorSelect.setState({selectedColor:colorMap[e.target.value].primary},this.primaryColorSelect.updateColorButton),this.secondaryColorSelect.setState({selectedColor:colorMap[e.target.value].secondary},this.secondaryColorSelect.updateColorButton),this.tertiaryColorSelect.setState({selectedColor:colorMap[e.target.value].tertiary},this.tertiaryColorSelect.updateColorButton),this.quaternaryColorSelect.setState({selectedColor:colorMap[e.target.value].quaternary},this.quaternaryColorSelect.updateColorButton))}},{key:"saveColorScheme",value:function(){var colors=[{name:"color:headerbg",value:this.headerBGColorSelect.state.selectedColor},{name:"color:headerprimary",value:this.headerPrimaryColorSelect.state.selectedColor},{name:"color:primary",value:this.primaryColorSelect.state.selectedColor},{name:"color:secondary",value:this.secondaryColorSelect.state.selectedColor},{name:"color:tertiary",value:this.tertiaryColorSelect.state.selectedColor},{name:"color:quaternary",value:this.quaternaryColorSelect.state.selectedColor}];this.props.updateColorScheme(colors)}},{key:"render",value:function(){var _this2=this,active=this.props.active;return react.createElement("div",{className:active?"active":"hide"},react.createElement(Settings_SettingItem,{title:"Site Logo",subtitle:react.createElement("div",null,"Upload site logo to display in top navigation. ",react.createElement("i",null,"Note: Resize to max width of 140px")),component:react.createElement(Settings_UploadButtonWithX,{buttonText:"Upload Logo",uploadAction:"/settings/general/uploadlogo",extAllowed:"*.(jpg|jpeg|gif|png)",showX:this.getSettingsValue("hasCustomLogo"),onXClick:function(){_this2.updateSetting("gen:customlogo",!1,"hasCustomLogo"),setTimeout((function(){window.location.reload()}),1e3)}})}),react.createElement(Settings_SettingItem,{title:"Page Logo",subtitle:react.createElement("div",null,"Upload logo to display within page views. ",react.createElement("i",null,"Note: Used on login page (min-width: 400px)")),component:react.createElement(Settings_UploadButtonWithX,{buttonText:"Upload Logo",uploadAction:"/settings/general/uploadpagelogo",extAllowed:"*.(jpg|jpeg|gif|png)",showX:this.getSettingsValue("hasCustomPageLogo"),onXClick:function(){_this2.updateSetting("gen:custompagelogo",!1,"hasCustomPageLogo")}})}),react.createElement(Settings_SettingItem,{title:"Favicon",subtitle:"Upload a custom favicon",component:react.createElement(Settings_UploadButtonWithX,{buttonText:"Upload Favicon",uploadAction:"/settings/general/uploadfavicon",extAllowed:"*.(jpg|jpeg|gif|png|ico)",showX:this.getSettingsValue("hasCustomFavicon"),onXClick:function(){_this2.updateSetting("gen:customfavicon",!1,"hasCustomFavicon"),setTimeout((function(){window.location.reload()}),1e3)}})}),react.createElement(Settings_SettingItem,{title:"Color Scheme",subtitle:"Select the colors for your color scheme.",component:react.createElement(components_Button,{text:"Save",flat:!0,style:"success",extraClass:"uk-float-right mt-10",onClick:function(){_this2.saveColorScheme()}})},react.createElement(zone,null,react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Built-in Color Scheme",subtitle:"Select a predefined color scheme",component:react.createElement(components_SingleSelect,{width:"60%",showTextbox:!1,items:[{text:"Light (Default)",value:"light"},{text:"Dark",value:"dark"},{text:"Blue Jean",value:"bluejean"},{text:"Midnight",value:"midnight"},{text:"Moonlight",value:"moonlight"},{text:"Purple Rain",value:"purplerain"},{text:"Sandstone",value:"sandstone"},{text:"Winter's Fire",value:"winterfire"}],defaultValue:this.state.selectedColorScheme,onSelectChange:function(e){_this2.onBuiltInColorSelectChange(e)}})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Header Background",subtitle:"Background color of the header",component:react.createElement(components_ColorSelector,{ref:function(cs){_this2.headerBGColorSelect=cs},defaultColor:this.getSettingsValue("colorHeaderBG"),parentClass:"uk-width-2-3 uk-float-right"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Header Primary",subtitle:"Text and icon color within the header",component:react.createElement(components_ColorSelector,{ref:function(cs){_this2.headerPrimaryColorSelect=cs},defaultColor:this.getSettingsValue("colorHeaderPrimary"),parentClass:"uk-width-2-3 uk-float-right"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Primary",subtitle:"Most text and icons",component:react.createElement(components_ColorSelector,{ref:function(cs){_this2.primaryColorSelect=cs},defaultColor:this.getSettingsValue("colorPrimary"),parentClass:"uk-width-2-3 uk-float-right"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Secondary",subtitle:"The main background color",component:react.createElement(components_ColorSelector,{ref:function(cs){_this2.secondaryColorSelect=cs},defaultColor:this.getSettingsValue("colorSecondary"),parentClass:"uk-width-2-3 uk-float-right"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Tertiary",subtitle:"Accent color, used for links, some buttons, and notifications",component:react.createElement(components_ColorSelector,{ref:function(cs){_this2.tertiaryColorSelect=cs},defaultColor:this.getSettingsValue("colorTertiary"),parentClass:"uk-width-2-3 uk-float-right"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Quaternary",subtitle:"Sidebar background color",component:react.createElement(components_ColorSelector,{ref:function(cs){_this2.quaternaryColorSelect=cs},defaultColor:this.getSettingsValue("colorQuaternary"),parentClass:"uk-width-2-3 uk-float-right"})})))))}}])&&Appearance_defineProperties(Constructor.prototype,protoProps),staticProps&&Appearance_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AppearanceSettings}(react.Component);AppearanceSettings.propTypes={active:prop_types_default().bool,settings:prop_types_default().object.isRequired,updateSetting:prop_types_default().func.isRequired,updateMultipleSettings:prop_types_default().func.isRequired,updateColorScheme:prop_types_default().func.isRequired};const Appearance=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting,updateMultipleSettings:settings_updateMultipleSettings,updateColorScheme:settings_updateColorScheme})(AppearanceSettings);var findIndex=__webpack_require__(576),findIndex_default=__webpack_require__.n(findIndex),velocity_react=__webpack_require__(582);function body_typeof(obj){return body_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},body_typeof(obj)}function body_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function body_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function body_setPrototypeOf(o,p){return body_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},body_setPrototypeOf(o,p)}function body_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=body_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=body_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return body_possibleConstructorReturn(this,result)}}function body_possibleConstructorReturn(self,call){if(call&&("object"===body_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function body_getPrototypeOf(o){return body_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},body_getPrototypeOf(o)}var SplitSettingsPanelBody=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&body_setPrototypeOf(subClass,superClass)}(SplitSettingsPanelBody,_React$Component);var Constructor,protoProps,staticProps,_super=body_createSuper(SplitSettingsPanelBody);function SplitSettingsPanelBody(){return body_classCallCheck(this,SplitSettingsPanelBody),_super.apply(this,arguments)}return Constructor=SplitSettingsPanelBody,(protoProps=[{key:"render",value:function(){var active=this.props.active;return react.createElement(velocity_react.VelocityComponent,{animation:{opacity:active?1:0},duration:750},react.createElement("div",{className:active?"":"hide"},this.props.component))}}])&&body_defineProperties(Constructor.prototype,protoProps),staticProps&&body_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SplitSettingsPanelBody}(react.Component);SplitSettingsPanelBody.propTypes={active:prop_types_default().bool.isRequired,component:prop_types_default().node.isRequired};const body=SplitSettingsPanelBody;function SplitSettingsPanel_typeof(obj){return SplitSettingsPanel_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SplitSettingsPanel_typeof(obj)}function SplitSettingsPanel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SplitSettingsPanel_setPrototypeOf(o,p){return SplitSettingsPanel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},SplitSettingsPanel_setPrototypeOf(o,p)}function SplitSettingsPanel_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SplitSettingsPanel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SplitSettingsPanel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SplitSettingsPanel_possibleConstructorReturn(this,result)}}function SplitSettingsPanel_possibleConstructorReturn(self,call){if(call&&("object"===SplitSettingsPanel_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SplitSettingsPanel_getPrototypeOf(o){return SplitSettingsPanel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},SplitSettingsPanel_getPrototypeOf(o)}var SplitSettingsPanel=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SplitSettingsPanel_setPrototypeOf(subClass,superClass)}(SplitSettingsPanel,_React$Component);var Constructor,protoProps,staticProps,_super=SplitSettingsPanel_createSuper(SplitSettingsPanel);function SplitSettingsPanel(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SplitSettingsPanel),(_this=_super.call(this,props)).state={activeChild:""},_this}return Constructor=SplitSettingsPanel,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().setupScrollers()}},{key:"componentDidUpdate",value:function(){-1===findIndex_default()(this.props.menuItems,["key",this.state.activeChild])&&this.props.menuItems.length>0&&this.setState({activeChild:this.props.menuItems[0].key})}},{key:"switchChild",value:function(key){this.setState({activeChild:key})}},{key:"render",value:function(){var _this2=this,_this$props=this.props,title=_this$props.title,subtitle=_this$props.subtitle,rightComponent=_this$props.rightComponent,menuItems=_this$props.menuItems,tooltip=_this$props.tooltip;return react.createElement("div",{className:"setting-item-wrap uk-margin-medium-bottom"},react.createElement("div",{className:"panel trupanel nopadding no-hover-shadow uk-overflow-hidden",style:{minHeight:"60px",height:"auto"}},react.createElement("div",{className:"left"},react.createElement("h6",{style:{padding:"0 0 0 15px",margin:"15px 0 0 0",fontSize:"16px",lineHeight:"14px"}},title,tooltip&&react.createElement("i",{className:"material-icons",style:{color:"#888",fontSize:"16px",cursor:"pointer",lineHeight:"3px",marginLeft:"4px"},"data-uk-tooltip":"{cls:'long-text'}",title:tooltip},"error")),react.createElement("h5",{style:{padding:"0 0 10px 15px",margin:"2px 0 0 0",fontSize:"12px"},className:"uk-text-muted"},subtitle)),react.createElement("div",{className:"right"},react.createElement("div",{style:{margin:"12px 10px 0 0"}},rightComponent)),react.createElement("hr",{className:"nomargin-top clear"}),react.createElement("div",{className:"panel-body2"},react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"split-panel-categories uk-width-1-4 uk-width-large-1-5 scrollable br",style:{minHeight:"300px",overflow:"hidden auto"}},react.createElement(Settings_Menu,{hideBorders:!0,draggable:this.props.menuDraggable,onMenuDrag:this.props.menuOnDrag},menuItems.map((function(item){return react.createElement(Settings_MenuItem,{active:_this2.state.activeChild===item.key,key:item.key,dragKey:item.key,title:item.title,onClick:function(){_this2.switchChild(item.key)},draggable:_this2.props.menuDraggable})})))),react.createElement("div",{className:"uk-width-3-4 uk-width-large-4-5"+(this.props.scrollable?" scrollable":""),style:{padding:"20px 15px 15px 15px",maxHeight:this.props.maxHeight||"auto"}},menuItems.map((function(menuItem){return react.createElement(body,{active:_this2.state.activeChild===menuItem.key,key:menuItem.key,component:menuItem.bodyComponent})}))))),this.props.footer&&react.createElement("div",{className:"panel-footer"},this.props.footer)))}}])&&SplitSettingsPanel_defineProperties(Constructor.prototype,protoProps),staticProps&&SplitSettingsPanel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SplitSettingsPanel}(react.Component);SplitSettingsPanel.propTypes={title:prop_types_default().string.isRequired,subtitle:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().element]),tooltip:prop_types_default().string,rightComponent:prop_types_default().element,scrollable:prop_types_default().bool,maxHeight:prop_types_default().string,footer:prop_types_default().element,menuItems:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().object),prop_types_default().object]).isRequired,menuDraggable:prop_types_default().bool,menuOnDrag:prop_types_default().func};const Settings_SplitSettingsPanel=SplitSettingsPanel;function permSwitchPartial_typeof(obj){return permSwitchPartial_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},permSwitchPartial_typeof(obj)}function permSwitchPartial_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function permSwitchPartial_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function permSwitchPartial_setPrototypeOf(o,p){return permSwitchPartial_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},permSwitchPartial_setPrototypeOf(o,p)}function permSwitchPartial_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=permSwitchPartial_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=permSwitchPartial_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return permSwitchPartial_possibleConstructorReturn(this,result)}}function permSwitchPartial_possibleConstructorReturn(self,call){if(call&&("object"===permSwitchPartial_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function permSwitchPartial_getPrototypeOf(o){return permSwitchPartial_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},permSwitchPartial_getPrototypeOf(o)}var PermSwitchPartial=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&permSwitchPartial_setPrototypeOf(subClass,superClass)}(PermSwitchPartial,_React$Component);var Constructor,protoProps,staticProps,_super=permSwitchPartial_createSuper(PermSwitchPartial);function PermSwitchPartial(){return permSwitchPartial_classCallCheck(this,PermSwitchPartial),_super.apply(this,arguments)}return Constructor=PermSwitchPartial,(protoProps=[{key:"render",value:function(){var _this$props=this.props,title=_this$props.title,checked=_this$props.checked,onChange=_this$props.onChange,disabled=_this$props.disabled;return react.createElement("div",null,react.createElement("div",{style:{padding:"0 10px"}},react.createElement("div",{className:"uk-clearfix"},react.createElement("div",{className:"left"},react.createElement("h6",{style:{padding:"0 0 0 15px",margin:"20px 0",fontSize:"16px",lineHeight:"14px"}},title)),react.createElement("div",{className:"right",style:{position:"relative"}},react.createElement("div",{className:"md-switch md-green",style:{margin:"18px 0 0 0"}},react.createElement("label",null,"Allow",react.createElement("input",{type:"checkbox",checked,onChange,disabled}),react.createElement("span",{className:"lever"})))))),react.createElement("hr",{className:"nomargin-top clear"}))}}])&&permSwitchPartial_defineProperties(Constructor.prototype,protoProps),staticProps&&permSwitchPartial_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PermSwitchPartial}(react.Component);PermSwitchPartial.propTypes={title:prop_types_default().string.isRequired,checked:prop_types_default().oneOfType([prop_types_default().bool,prop_types_default().string]),onChange:prop_types_default().func.isRequired,disabled:prop_types_default().oneOfType([prop_types_default().bool,prop_types_default().string])};const permSwitchPartial=PermSwitchPartial;function permissionGroupPartial_typeof(obj){return permissionGroupPartial_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},permissionGroupPartial_typeof(obj)}var permissionGroupPartial_class,permissionGroupPartial_class2,permissionGroupPartial_descriptor,permissionGroupPartial_descriptor2,permissionGroupPartial_descriptor3,permissionGroupPartial_descriptor4,permissionGroupPartial_descriptor5,permissionGroupPartial_descriptor6,permissionGroupPartial_descriptor7;function permissionGroupPartial_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function permissionGroupPartial_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function permissionGroupPartial_setPrototypeOf(o,p){return permissionGroupPartial_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},permissionGroupPartial_setPrototypeOf(o,p)}function permissionGroupPartial_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=permissionGroupPartial_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=permissionGroupPartial_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return permissionGroupPartial_possibleConstructorReturn(this,result)}}function permissionGroupPartial_possibleConstructorReturn(self,call){if(call&&("object"===permissionGroupPartial_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return permissionGroupPartial_assertThisInitialized(self)}function permissionGroupPartial_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function permissionGroupPartial_getPrototypeOf(o){return permissionGroupPartial_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},permissionGroupPartial_getPrototypeOf(o)}function permissionGroupPartial_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var PermissionGroupPartial=(0,mobxreact_esm.Pi)((permissionGroupPartial_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&permissionGroupPartial_setPrototypeOf(subClass,superClass)}(PermissionGroupPartial,_React$Component);var Constructor,protoProps,staticProps,_super=permissionGroupPartial_createSuper(PermissionGroupPartial);function PermissionGroupPartial(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PermissionGroupPartial),permissionGroupPartial_initializerDefineProperty(_this=_super.call(this,props),"all",permissionGroupPartial_descriptor,permissionGroupPartial_assertThisInitialized(_this)),permissionGroupPartial_initializerDefineProperty(_this,"create",permissionGroupPartial_descriptor2,permissionGroupPartial_assertThisInitialized(_this)),permissionGroupPartial_initializerDefineProperty(_this,"view",permissionGroupPartial_descriptor3,permissionGroupPartial_assertThisInitialized(_this)),permissionGroupPartial_initializerDefineProperty(_this,"update",permissionGroupPartial_descriptor4,permissionGroupPartial_assertThisInitialized(_this)),permissionGroupPartial_initializerDefineProperty(_this,"delete",permissionGroupPartial_descriptor5,permissionGroupPartial_assertThisInitialized(_this)),permissionGroupPartial_initializerDefineProperty(_this,"special",permissionGroupPartial_descriptor6,permissionGroupPartial_assertThisInitialized(_this)),permissionGroupPartial_initializerDefineProperty(_this,"roleSpecials",permissionGroupPartial_descriptor7,permissionGroupPartial_assertThisInitialized(_this)),(0,mobx_esm.rC)(permissionGroupPartial_assertThisInitialized(_this)),_this}return Constructor=PermissionGroupPartial,(protoProps=[{key:"componentDidMount",value:function(){this.all=this.props.grants.all||"",this.create=this.props.grants.create||"",this.view=this.props.grants.view||"",this.update=this.props.grants.update||"",this.delete=this.props.grants.delete||"",this.special=this.props.grants.special||[],this.roleSpecials=this.props.roleSpecials||[]}},{key:"componentDidUpdate",value:function(prevProps){prevProps.roleSpecials!==this.props.roleSpecials&&(this.roleSpecials=this.props.roleSpecials),prevProps.grants!==this.props.grants&&(prevProps.grants.all!==this.props.grants.all&&(this.all=this.props.grants.all),!0===this.all?(!0!==this.create&&(this.create=!0),!0!==this.view&&(this.view=!0),!0!==this.update&&(this.update=!0),!0!==this.delete&&(this.delete=!0),helpers_default().arrayIsEqual(this.special,["*"])||(this.special=["*"])):(prevProps.grants.create!==this.props.grants.create&&(this.create=this.props.grants.create),prevProps.grants.view!==this.props.grants.view&&(this.view=this.props.grants.view),prevProps.grants.update!==this.props.grants.update&&(this.update=this.props.grants.update),prevProps.grants.delete!==this.props.grants.delete&&(this.delete=this.props.grants.delete),prevProps.grants.special!==this.props.grants.special&&(this.special=this.props.grants.special)))}},{key:"onEnableSwitchChanged",value:function(e,name){"all"===name?(this.all=e.target.checked,this.create=e.target.checked,this.view=e.target.checked,this.update=e.target.checked,this.delete=e.target.checked,e.target.checked?this.special.replace(["*"]):this.special.clear()):this[name]=e.target.checked}},{key:"hasSpecial",value:function(perm){return!(!this.special.length<0||!helpers_default().arrayIsEqual(this.special,["*"])&&-1===this.special.indexOf(perm))}},{key:"onSpecialChanged",value:function(e,perm){if(perm&&!this.all){var arr=this.special;e.target.checked?arr.push(perm):arr=(0,lodash.without)(arr,perm),this.special.replace((0,lodash.uniq)(arr))}}},{key:"render",value:function(){var _this2=this,_this$props=this.props,title=_this$props.title,subtitle=_this$props.subtitle,role=_this$props.role;return react.createElement("div",null,react.createElement(Settings_SettingItem,{title,subtitle,subPanelPadding:"0",component:react.createElement(Settings_EnableSwitch,{stateName:"all_perm_".concat(title,"_").concat(role.get("_id")),label:"All",checked:this.all,onChange:function(e){return _this2.onEnableSwitchChanged(e,"all")}})},react.createElement(permSwitchPartial,{title:"Create",checked:this.create,onChange:function(e){return _this2.onEnableSwitchChanged(e,"create")},disabled:this.all}),react.createElement(permSwitchPartial,{title:"View",onChange:function(e){return _this2.onEnableSwitchChanged(e,"view")},checked:this.view,disabled:this.all}),react.createElement(permSwitchPartial,{title:"Update",onChange:function(e){return _this2.onEnableSwitchChanged(e,"update")},checked:this.update,disabled:this.all}),react.createElement(permSwitchPartial,{title:"Delete",onChange:function(e){return _this2.onEnableSwitchChanged(e,"delete")},checked:this.delete,disabled:this.all}),this.roleSpecials.length>0&&react.createElement("div",null,react.createElement("div",{className:"panel-body2 bg-warn",style:{padding:"0 10px"}},react.createElement("div",{className:"uk-clearfix"},react.createElement("div",{className:"left"},react.createElement("h6",{className:"text-dark",style:{padding:"0 0 0 15px",margin:"20px 0",fontSize:"18px",lineHeight:"14px"}},"Special Permissions")))),this.roleSpecials.map((function(perm){return react.createElement(permSwitchPartial,{key:"".concat(perm.title,"_").concat(perm.perm),title:perm.title,checked:_this2.hasSpecial(perm.perm),onChange:function(e){return _this2.onSpecialChanged(e,perm.perm)},disabled:_this2.all})})))))}}])&&permissionGroupPartial_defineProperties(Constructor.prototype,protoProps),staticProps&&permissionGroupPartial_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PermissionGroupPartial}(react.Component),permissionGroupPartial_descriptor=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"all",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionGroupPartial_descriptor2=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"create",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionGroupPartial_descriptor3=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"view",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionGroupPartial_descriptor4=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"update",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionGroupPartial_descriptor5=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"delete",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionGroupPartial_descriptor6=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"special",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),permissionGroupPartial_descriptor7=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"roleSpecials",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionGroupPartial_class=permissionGroupPartial_class2))||permissionGroupPartial_class;PermissionGroupPartial.propTypes={title:prop_types_default().string.isRequired,subtitle:prop_types_default().string,roleSpecials:prop_types_default().array,role:prop_types_default().object.isRequired,grants:prop_types_default().object.isRequired};const permissionGroupPartial=PermissionGroupPartial;function permissionBody_typeof(obj){return permissionBody_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},permissionBody_typeof(obj)}var permissionBody_class,permissionBody_class2,permissionBody_descriptor,permissionBody_descriptor2,permissionBody_descriptor3,permissionBody_descriptor4,permissionBody_descriptor5,permissionBody_descriptor6,permissionBody_descriptor7,_descriptor8,_descriptor9,_descriptor10,_descriptor11;function permissionBody_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function permissionBody_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function permissionBody_setPrototypeOf(o,p){return permissionBody_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},permissionBody_setPrototypeOf(o,p)}function permissionBody_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=permissionBody_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=permissionBody_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return permissionBody_possibleConstructorReturn(this,result)}}function permissionBody_possibleConstructorReturn(self,call){if(call&&("object"===permissionBody_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return permissionBody_assertThisInitialized(self)}function permissionBody_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function permissionBody_getPrototypeOf(o){return permissionBody_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},permissionBody_getPrototypeOf(o)}function permissionBody_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var PermissionBody=(0,mobxreact_esm.Pi)((permissionBody_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&permissionBody_setPrototypeOf(subClass,superClass)}(PermissionBody,_React$Component);var Constructor,protoProps,staticProps,_super=permissionBody_createSuper(PermissionBody);function PermissionBody(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PermissionBody),permissionBody_initializerDefineProperty(_this=_super.call(this,props),"isAdmin",permissionBody_descriptor,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"isAgent",permissionBody_descriptor2,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"hasHierarchy",permissionBody_descriptor3,permissionBody_assertThisInitialized(_this)),_this.grants=[],permissionBody_initializerDefineProperty(_this,"ticketGrants",permissionBody_descriptor4,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"commentGrants",permissionBody_descriptor5,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"accountGrants",permissionBody_descriptor6,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"groupGrants",permissionBody_descriptor7,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"teamGrants",_descriptor8,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"departmentGrants",_descriptor9,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"reportGrants",_descriptor10,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"noticeGrants",_descriptor11,permissionBody_assertThisInitialized(_this)),(0,mobx_esm.rC)(permissionBody_assertThisInitialized(_this)),_this}return Constructor=PermissionBody,staticProps=[{key:"mapTicketSpecials",value:function(){return[{title:"Print",perm:"print"},{title:"Notes",perm:"notes"},{title:"Manage Public Tickets",perm:"public"},{title:"Can View All Tickets in Assigned Groups",perm:"viewall"}]}},{key:"mapAccountSpecials",value:function(){return[{title:"Import",perm:"import"}]}},{key:"mapNoticeSpecials",value:function(){return[{title:"Activate",perm:"activate"},{title:"Deactivate",perm:"deactivate"}]}},{key:"buildPermArray",value:function(permGroup){var arr=[];return permGroup.all?arr=["*"]:(permGroup.create&&arr.push("create"),permGroup.view&&arr.push("view"),permGroup.update&&arr.push("update"),permGroup.delete&&arr.push("delete"),permGroup.special&&arr.push(permGroup.special.join(" "))),arr}}],(protoProps=[{key:"componentDidMount",value:function(){this.isAdmin=this.props.role.get("isAdmin")||!1,this.isAgent=this.props.role.get("isAgent")||!1,this.hasHierarchy=this.props.role.get("hierarchy")||!1,this.grants=this.props.role.get("grants").toArray()||[],this.parseGrants()}},{key:"componentDidUpdate",value:function(){""===this.isAdmin&&(this.isAdmin=this.props.role.get("isAdmin")||!1),""===this.isAgent&&(this.isAgent=this.props.role.get("isAgent")||!1),""===this.hasHierarchy&&(this.hasHierarchy=this.props.role.get("hierarchy")||!1),this.grants.length<1&&(this.grants=this.props.role.get("grants").toArray()||[]),this.parseGrants()}},{key:"parseGrants",value:function(){if(this.grants){var parsedGrants=helpers_default().parseRoleGrants(this.grants);parsedGrants.tickets&&!(0,lodash.isEqual)(parsedGrants.tickets,this.ticketGrants)&&(this.ticketGrants=parsedGrants.tickets),parsedGrants.comments&&!(0,lodash.isEqual)(parsedGrants.comments,this.commentGrants)&&(this.commentGrants=parsedGrants.comments),parsedGrants.accounts&&!(0,lodash.isEqual)(parsedGrants.accounts,this.accountGrants)&&(this.accountGrants=parsedGrants.accounts),parsedGrants.groups&&!(0,lodash.isEqual)(parsedGrants.groups,this.groupGrants)&&(this.groupGrants=parsedGrants.groups),parsedGrants.teams&&!(0,lodash.isEqual)(parsedGrants.teams,this.teamGrants)&&(this.teamGrants=parsedGrants.teams),parsedGrants.departments&&!(0,lodash.isEqual)(parsedGrants.departments,this.departmentGrants)&&(this.departmentGrants=parsedGrants.departments),parsedGrants.reports&&!(0,lodash.isEqual)(parsedGrants.reports,this.reportGrants)&&(this.reportGrants=parsedGrants.reports),parsedGrants.notices&&!(0,lodash.isEqual)(parsedGrants.notices,this.noticeGrants)&&(this.noticeGrants=parsedGrants.notices)}}},{key:"onEnableSwitchChanged",value:function(e,name){this[name]=e.target.checked}},{key:"onSubmit",value:function(e){e.preventDefault();var obj={};obj._id=this.props.role.get("_id"),this.isAdmin&&(obj.admin=["*"],obj.settings=["*"]),this.isAgent&&(obj.agent=["*"]),obj.hierarchy=this.hasHierarchy,obj.tickets=PermissionBody.buildPermArray(this.ticketPermGroup),obj.comments=PermissionBody.buildPermArray(this.commentPermGroup),obj.accounts=PermissionBody.buildPermArray(this.accountPermGroup),obj.groups=PermissionBody.buildPermArray(this.groupPermGroup),obj.teams=PermissionBody.buildPermArray(this.teamPermGroup),obj.departments=PermissionBody.buildPermArray(this.departmentPermGroup),obj.reports=PermissionBody.buildPermArray(this.reportPermGroup),obj.notices=PermissionBody.buildPermArray(this.noticePermGroup),this.props.updatePermissions(obj)}},{key:"showDeletePermissionRole",value:function(e){e.preventDefault(),this.props.showModal("DELETE_ROLE",{role:this.props.role})}},{key:"render",value:function(){var _this2=this;return react.createElement("div",null,react.createElement("form",{onSubmit:function(e){return _this2.onSubmit(e)}},react.createElement(Settings_SettingItem,{title:"Admin",tooltip:"Role is considered an admin. Enabling management of the trudesk instance.",subtitle:"Is this role defined as an admin role?",component:react.createElement(Settings_EnableSwitch,{stateName:"isAdmin_"+this.props.role.get("_id"),label:"Enable",checked:this.isAdmin,onChange:function(e){return _this2.onEnableSwitchChanged(e,"isAdmin")}})}),react.createElement(Settings_SettingItem,{title:"Support Agent",subtitle:"Is this role defined as an agent role?",tooltip:"Role is considered an agent role. Enabling agent views and displaying in agent lists.",component:react.createElement(Settings_EnableSwitch,{stateName:"isAgent_"+this.props.role.get("_id"),label:"Enable",checked:this.isAgent,onChange:function(e){return _this2.onEnableSwitchChanged(e,"isAgent")}})}),react.createElement(Settings_SettingItem,{title:"Enable Hierarchy",subtitle:"Allow this role to manage resources owned by roles defined under it.",component:react.createElement(Settings_EnableSwitch,{stateName:"hasHierarchy_"+this.props.role.get("_id"),label:"Enable",checked:this.hasHierarchy,onChange:function(e){return _this2.onEnableSwitchChanged(e,"hasHierarchy")}})}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.ticketPermGroup=i},title:"Tickets",role:this.props.role,grants:this.ticketGrants,roleSpecials:PermissionBody.mapTicketSpecials(),subtitle:"Ticket Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.commentPermGroup=i},title:"Comments",role:this.props.role,grants:this.commentGrants,subtitle:"Ticket Comments Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.accountPermGroup=i},title:"Accounts",role:this.props.role,roleSpecials:PermissionBody.mapAccountSpecials(),grants:this.accountGrants,subtitle:"Account Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.groupPermGroup=i},title:"Groups",role:this.props.role,grants:this.groupGrants,subtitle:"Group Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.teamPermGroup=i},title:"Teams",role:this.props.role,grants:this.teamGrants,subtitle:"Team Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.departmentPermGroup=i},title:"Departments",role:this.props.role,grants:this.departmentGrants,subtitle:"Department Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.reportPermGroup=i},title:"Reports",role:this.props.role,grants:this.reportGrants,subtitle:"Report Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.noticePermGroup=i},title:"Notices",role:this.props.role,grants:this.noticeGrants,roleSpecials:PermissionBody.mapNoticeSpecials(),subtitle:"Notice Permissions"}),react.createElement("div",{className:"uk-margin-large-bottom"},react.createElement("h2",{className:"text-light"},"Danger Zone"),react.createElement("div",{className:"danger-zone"},react.createElement("div",{className:"dz-box uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h5",null,"Delete this permission role?"),react.createElement("p",null,"Once you delete a permission role, there is no going back. Please be certain.")),react.createElement("div",{className:"uk-float-right",style:{paddingTop:"10px"}},react.createElement(components_Button,{text:"Delete",small:!0,style:"danger",onClick:function(e){return _this2.showDeletePermissionRole(e)}}))))),react.createElement("div",null,react.createElement("div",{className:"box uk-clearfix"},react.createElement("div",{className:"uk-float-right",style:{paddingTop:"10px"}},react.createElement(components_Button,{type:"submit",style:"success",waves:!0,text:"Save Permissions"}))))))}}])&&permissionBody_defineProperties(Constructor.prototype,protoProps),staticProps&&permissionBody_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PermissionBody}(react.Component),permissionBody_descriptor=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"isAdmin",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionBody_descriptor2=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"isAgent",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionBody_descriptor3=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"hasHierarchy",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionBody_descriptor4=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"ticketGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),permissionBody_descriptor5=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"commentGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),permissionBody_descriptor6=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"accountGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),permissionBody_descriptor7=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"groupGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),_descriptor8=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"teamGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),_descriptor9=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"departmentGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),_descriptor10=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"reportGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),_descriptor11=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"noticeGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),permissionBody_class=permissionBody_class2))||permissionBody_class;PermissionBody.propTypes={role:prop_types_default().object.isRequired,updatePermissions:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const permissionBody=(0,es.$j)(null,{updatePermissions:settings_updatePermissions,showModal})(PermissionBody);function Permissions_typeof(obj){return Permissions_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Permissions_typeof(obj)}function Permissions_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Permissions_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Permissions_setPrototypeOf(o,p){return Permissions_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Permissions_setPrototypeOf(o,p)}function Permissions_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Permissions_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Permissions_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Permissions_possibleConstructorReturn(this,result)}}function Permissions_possibleConstructorReturn(self,call){if(call&&("object"===Permissions_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Permissions_getPrototypeOf(o){return Permissions_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Permissions_getPrototypeOf(o)}var PermissionsSettingsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Permissions_setPrototypeOf(subClass,superClass)}(PermissionsSettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Permissions_createSuper(PermissionsSettingsContainer);function PermissionsSettingsContainer(){return Permissions_classCallCheck(this,PermissionsSettingsContainer),_super.apply(this,arguments)}return Constructor=PermissionsSettingsContainer,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchRoles()}},{key:"getSetting",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"onRoleOrderChanged",value:function(e){for(var children=jquery_default()(e.target).children("li"),arr=[],i=0;i<children.length;i++)arr.push(jquery_default()(children[i]).attr("data-key"));this.props.updateRoleOrder({roleOrder:arr})}},{key:"getRoleMenu",value:function(){var _this=this;return this.props.roleOrder&&this.props.roleOrder.get("order")&&this.props.roles?this.props.roleOrder.get("order").map((function(o){return _this.props.roles.find((function(v){return v.get("_id")===o}))})).toArray():[]}},{key:"onCreateRoleClicked",value:function(e){e.preventDefault(),this.props.showModal("CREATE_ROLE")}},{key:"onDefaultUserRoleChange",value:function(e){this.props.updateSetting({name:"role:user:default",value:e.target.value,stateName:"defaultUserRole"})}},{key:"render",value:function(){var _this2=this,mappedRoles=this.props.roles.map((function(role){return{text:role.get("name"),value:role.get("_id")}})).toArray();return react.createElement("div",{className:this.props.active?"":"hide"},react.createElement(Settings_SettingItem,{title:"Default New User Role",subtitle:"Role assigned to users created during sign-up and public tickets",component:react.createElement(components_SingleSelect,{items:mappedRoles,defaultValue:this.getSetting("defaultUserRole"),onSelectChange:function(e){_this2.onDefaultUserRoleChange(e)},width:"50%",showTextbox:!1})}),react.createElement(Settings_SplitSettingsPanel,{title:"Permissions",tooltip:"Permission order is top down. ex: Admins at top; Users at bottom.",subtitle:react.createElement("div",null,"Create/Modify Role Permissions"," ",react.createElement("span",{className:"uk-text-danger"},"Note: Changes take affect after page refresh")),rightComponent:react.createElement(components_Button,{text:"Create",style:"success",flat:!0,waves:!0,onClick:function(e){return _this2.onCreateRoleClicked(e)}}),menuItems:this.getRoleMenu().map((function(role){return{key:role.get("_id"),title:role.get("name"),bodyComponent:react.createElement(permissionBody,{role})}})),menuDraggable:!0,menuOnDrag:function(e){_this2.onRoleOrderChanged(e)}}))}}])&&Permissions_defineProperties(Constructor.prototype,protoProps),staticProps&&Permissions_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PermissionsSettingsContainer}(react.Component);PermissionsSettingsContainer.propTypes={active:prop_types_default().bool.isRequired,roles:prop_types_default().object.isRequired,roleOrder:prop_types_default().object.isRequired,settings:prop_types_default().object.isRequired,fetchRoles:prop_types_default().func.isRequired,updateRoleOrder:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired,updateSetting:prop_types_default().func.isRequired};const Permissions=(0,es.$j)((function(state){return{roles:state.shared.roles,roleOrder:state.shared.roleOrder,settings:state.settings.settings}}),{fetchRoles:common_fetchRoles,updateRoleOrder:common_updateRoleOrder,showModal,updateSetting:settings_updateSetting})(PermissionsSettingsContainer);function NumberWithSave_typeof(obj){return NumberWithSave_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},NumberWithSave_typeof(obj)}function NumberWithSave_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NumberWithSave_setPrototypeOf(o,p){return NumberWithSave_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},NumberWithSave_setPrototypeOf(o,p)}function NumberWithSave_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=NumberWithSave_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NumberWithSave_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NumberWithSave_possibleConstructorReturn(this,result)}}function NumberWithSave_possibleConstructorReturn(self,call){if(call&&("object"===NumberWithSave_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NumberWithSave_getPrototypeOf(o){return NumberWithSave_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},NumberWithSave_getPrototypeOf(o)}var NumberWithSave=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NumberWithSave_setPrototypeOf(subClass,superClass)}(NumberWithSave,_React$Component);var Constructor,protoProps,staticProps,_super=NumberWithSave_createSuper(NumberWithSave);function NumberWithSave(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NumberWithSave),(_this=_super.call(this,props)).state={value:_this.props.value},_this}return Constructor=NumberWithSave,staticProps=[{key:"getDerivedStateFromProps",value:function(nextProps,state){return state.value?null:{value:nextProps.value}}}],(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs()}},{key:"onSaveClicked",value:function(){this.props.updateSetting({name:this.props.settingName,value:this.state.value,stateName:this.props.stateName})}},{key:"updateValue",value:function(evt){this.setState({value:evt.target.value})}},{key:"render",value:function(){var _this2=this,width="75%";return this.props.width&&(width=this.props.width),react.createElement("div",{className:"uk-width-3-4 uk-float-right"},react.createElement("div",{className:"uk-width-1-4 uk-float-right",style:{marginTop:"10px",textAlign:"center"}},react.createElement("button",{className:"md-btn md-btn-small",onClick:function(e){return _this2.onSaveClicked(e)}},"Save")),react.createElement("div",{className:"uk-width-3-4 uk-float-right",style:{paddingRight:"10px",width}},react.createElement("input",{id:this.props.stateName,className:"md-input",type:"number",value:this.state.value,onChange:function(evt){return _this2.updateValue(evt)}})))}}])&&NumberWithSave_defineProperties(Constructor.prototype,protoProps),staticProps&&NumberWithSave_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NumberWithSave}(react.Component);NumberWithSave.propTypes={updateSetting:prop_types_default().func.isRequired,settingName:prop_types_default().string.isRequired,stateName:prop_types_default().string.isRequired,value:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),width:prop_types_default().string};const Settings_NumberWithSave=(0,es.$j)(null,{updateSetting:settings_updateSetting})(NumberWithSave);function ButtonGroup_typeof(obj){return ButtonGroup_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},ButtonGroup_typeof(obj)}function ButtonGroup_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function ButtonGroup_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ButtonGroup_setPrototypeOf(o,p){return ButtonGroup_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},ButtonGroup_setPrototypeOf(o,p)}function ButtonGroup_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=ButtonGroup_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=ButtonGroup_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return ButtonGroup_possibleConstructorReturn(this,result)}}function ButtonGroup_possibleConstructorReturn(self,call){if(call&&("object"===ButtonGroup_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function ButtonGroup_getPrototypeOf(o){return ButtonGroup_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},ButtonGroup_getPrototypeOf(o)}var ButtonGroup=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&ButtonGroup_setPrototypeOf(subClass,superClass)}(ButtonGroup,_React$Component);var Constructor,protoProps,staticProps,_super=ButtonGroup_createSuper(ButtonGroup);function ButtonGroup(){return ButtonGroup_classCallCheck(this,ButtonGroup),_super.apply(this,arguments)}return Constructor=ButtonGroup,(protoProps=[{key:"render",value:function(){return react.createElement("div",{className:"md-btn-group mt-5"+(this.props.classNames?" "+this.props.classNames:"")},this.props.children)}}])&&ButtonGroup_defineProperties(Constructor.prototype,protoProps),staticProps&&ButtonGroup_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ButtonGroup}(react.Component);ButtonGroup.propTypes={classNames:prop_types_default().string};const components_ButtonGroup=ButtonGroup;function editPriorityPartial_typeof(obj){return editPriorityPartial_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},editPriorityPartial_typeof(obj)}function editPriorityPartial_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function editPriorityPartial_setPrototypeOf(o,p){return editPriorityPartial_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},editPriorityPartial_setPrototypeOf(o,p)}function editPriorityPartial_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=editPriorityPartial_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=editPriorityPartial_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return editPriorityPartial_possibleConstructorReturn(this,result)}}function editPriorityPartial_possibleConstructorReturn(self,call){if(call&&("object"===editPriorityPartial_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function editPriorityPartial_getPrototypeOf(o){return editPriorityPartial_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},editPriorityPartial_getPrototypeOf(o)}var EditPriorityPartial=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&editPriorityPartial_setPrototypeOf(subClass,superClass)}(EditPriorityPartial,_React$Component);var Constructor,protoProps,staticProps,_super=editPriorityPartial_createSuper(EditPriorityPartial);function EditPriorityPartial(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditPriorityPartial),_super.call(this,props)}return Constructor=EditPriorityPartial,(protoProps=[{key:"toggleEditPriority",value:function(){var $parent=jquery_default()(this.editPriorityRef).parent(),$v=$parent.find(".view-priority"),$e=$parent.find(".edit-priority");$v&&$e&&($v.toggleClass("hide"),$e.toggleClass("hide"))}},{key:"onSubmitEditPriority",value:function(e,priority){var _this=this;if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!0;var id=priority.get("_id"),name=e.target.name.value,overdueIn=e.target.overdueIn.value,htmlColor=e.target.htmlColor.value,self=this;client_api.tickets.updatePriority({id,name,overdueIn,htmlColor}).then((function(res){logger.debug(res),self.toggleEditPriority(),_this.props.fetchSettings()})).catch((function(err){if(err.response){var errorText=err.response.data.error;logger.error(errorText,err.response),helpers_default().UI.showSnackbar("Error: ".concat(errorText),!0)}else logger.error(err)}))}},{key:"render",value:function(){var _this2=this,priority=this.props.priority;return react.createElement("div",{className:"edit-priority hide",style:{paddingTop:"2px"},ref:function(i){return _this2.editPriorityRef=i}},react.createElement("form",{onSubmit:function(e){return _this2.onSubmitEditPriority(e,priority)}},react.createElement("div",{className:"uk-grid uk-grid-collapse uk-clearfix"},react.createElement("div",{className:"uk-width-1-4"},react.createElement("label",null,"Priority Name"),react.createElement("input",{name:"name",type:"text",className:"md-input",defaultValue:priority.get("name")})),react.createElement("div",{className:"uk-width-1-4 uk-padding-small-sides"},react.createElement("label",null,"SLA Overdue (minutes)"),react.createElement("input",{name:"overdueIn",type:"text",className:"md-input",defaultValue:priority.get("overdueIn")})),react.createElement("div",{className:"uk-width-1-4 uk-padding-small-sides"},react.createElement(components_ColorSelector,{inputName:"htmlColor",defaultColor:priority.get("htmlColor"),hideRevert:!0,validationEnabled:!0})),react.createElement("div",{className:"uk-width-1-4"},react.createElement("div",{className:"md-btn-group uk-float-right uk-text-right mt-5"},react.createElement(components_Button,{small:!0,text:"Cancel",onClick:function(){return _this2.toggleEditPriority()}}),react.createElement(components_Button,{text:"Save",small:!0,style:"success",type:"submit"}))))))}}])&&editPriorityPartial_defineProperties(Constructor.prototype,protoProps),staticProps&&editPriorityPartial_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EditPriorityPartial}(react.Component);EditPriorityPartial.propTypes={priority:prop_types_default().object.isRequired,fetchSettings:prop_types_default().func.isRequired};const editPriorityPartial=(0,es.$j)(null,{fetchSettings:settings_fetchSettings})(EditPriorityPartial);function ticketTypeBody_typeof(obj){return ticketTypeBody_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},ticketTypeBody_typeof(obj)}function ticketTypeBody_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ticketTypeBody_setPrototypeOf(o,p){return ticketTypeBody_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},ticketTypeBody_setPrototypeOf(o,p)}function ticketTypeBody_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=ticketTypeBody_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=ticketTypeBody_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return ticketTypeBody_possibleConstructorReturn(this,result)}}function ticketTypeBody_possibleConstructorReturn(self,call){if(call&&("object"===ticketTypeBody_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function ticketTypeBody_getPrototypeOf(o){return ticketTypeBody_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},ticketTypeBody_getPrototypeOf(o)}var TicketTypeBody=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&ticketTypeBody_setPrototypeOf(subClass,superClass)}(TicketTypeBody,_React$Component);var Constructor,protoProps,staticProps,_super=ticketTypeBody_createSuper(TicketTypeBody);function TicketTypeBody(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TicketTypeBody),(_this=_super.call(this,props)).prioritiesRef={},_this}return Constructor=TicketTypeBody,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs()}},{key:"handleTypeRename",value:function(event){var _this2=this;event.preventDefault();var name=event.target.name.value;client_api.tickets.renameTicketType(this.props.type.get("_id"),name).then((function(response){response.success&&helpers_default().UI.showSnackbar("Type Updated Successfully"),_this2.props.fetchSettings()})).catch((function(err){helpers_default().UI.showSnackbar(err,!0)}))}},{key:"onAddPriorityClick",value:function(e,type){this.props.showModal("ADD_PRIORITY_TO_TYPE",{type})}},{key:"toggleEditPriority",value:function(e,k){var obj=this.prioritiesRef[k],$v=jquery_default()(obj).find(".view-priority"),$e=jquery_default()(obj).find(".edit-priority");$v&&$e&&($v.toggleClass("hide"),$e.toggleClass("hide"))}},{key:"onRemoveTicketTypePriorityClicked",value:function(e,priorityId){var _this3=this;e.preventDefault(),client_api.tickets.removePriorityFromType({typeId:this.props.type.get("_id"),priority:priorityId}).then((function(){helpers_default().UI.showSnackbar("Priority removed from type: ".concat(_this3.props.type.get("name"))),_this3.props.fetchSettings()})).catch((function(error){if(error.response){var errorText=error.response.data.error;logger.error(errorText,error.response),helpers_default().UI.showSnackbar("Error: ".concat(errorText),!0)}else logger.error(error)}))}},{key:"showDeleteTicketTypeModal",value:function(e,type){this.props.showModal("DELETE_TICKET_TYPE",{type})}},{key:"render",value:function(){var _this4=this,type=this.props.type;return react.createElement("div",null,react.createElement("div",{className:"ticket-type-general-wrapper"},react.createElement("h2",{className:"text-light"},"General"),react.createElement("hr",{style:{margin:"5px 0 25px 0"}}),react.createElement("form",{onSubmit:function(e){_this4.handleTypeRename(e)}},react.createElement("div",{className:"uk-input-group"},react.createElement("label",{htmlFor:"ticket-type-name"},"Type Name"),react.createElement("input",{name:"name",type:"text",className:"md-input",defaultValue:type.get("name")}),react.createElement("div",{className:"uk-input-group-addon"},react.createElement("button",{type:"submit",className:"md-btn md-btn-small"},"Rename"))))),react.createElement("div",{className:"ticket-type-priorities-wrapper uk-margin-medium-top"},react.createElement("h2",{className:"text-light uk-display-inline-block"},"Priorities",react.createElement("i",{className:"material-icons",style:{color:"#888",fontSize:"16px",cursor:"pointer",lineHeight:"18px",marginLeft:"5px"},"data-uk-tooltip":"{cls:'long-text'}",title:"Priorities linked to this type. <br /> Editing a priority will update all types linked."},"help")),react.createElement("div",{className:"uk-float-right"},react.createElement(components_Button,{text:"Add",style:"success",flat:!0,waves:!0,onClick:function(e){return _this4.onAddPriorityClick(e,type)}})),react.createElement("hr",{style:{margin:"5px 0 25px 0"}}),react.createElement("div",{className:"priority-loop zone"},type.get("priorities").map((function(item){return react.createElement("div",{key:item.get("_id"),ref:function(i){return _this4.prioritiesRef[item.get("_id")]=i},className:"z-box uk-clearfix"},react.createElement("div",{className:"view-priority uk-clearfix"},react.createElement(Settings_SettingSubItem,{title:item.get("name"),titleCss:{color:item.get("htmlColor")},subtitle:react.createElement("div",null,"SLA Overdue: ",react.createElement("strong",null,item.get("durationFormatted"))),component:react.createElement(components_ButtonGroup,{classNames:"uk-float-right"},react.createElement(components_Button,{text:"Edit",small:!0,onClick:function(e){return _this4.toggleEditPriority(e,item.get("_id"))}}),react.createElement(components_Button,{text:"Remove",small:!0,style:"danger",onClick:function(e){return _this4.onRemoveTicketTypePriorityClicked(e,item.get("_id"))}}))})),react.createElement(editPriorityPartial,{priority:item}))})))),react.createElement("div",{className:"uk-margin-large-top"},react.createElement("h2",{className:"text-light"},"Danger Zone"),react.createElement("div",{className:"danger-zone"},react.createElement("div",{className:"dz-box uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h5",null,"Delete this type"),react.createElement("p",null,"Once you delete a ticket type, there is no going back. Please be certain.")),react.createElement("div",{className:"uk-float-right",style:{paddingTop:"10px"}},react.createElement(components_Button,{text:"Delete",small:!0,style:"danger",onClick:function(e){return _this4.showDeleteTicketTypeModal(e,type)}}))))))}}])&&ticketTypeBody_defineProperties(Constructor.prototype,protoProps),staticProps&&ticketTypeBody_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TicketTypeBody}(react.Component);TicketTypeBody.propTypes={type:prop_types_default().object.isRequired,updatePriority:prop_types_default().func.isRequired,fetchSettings:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const ticketTypeBody=(0,es.$j)(null,{updatePriority:tickets_updatePriority,fetchSettings:settings_fetchSettings,showModal})(TicketTypeBody);function Tickets_typeof(obj){return Tickets_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Tickets_typeof(obj)}function Tickets_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Tickets_setPrototypeOf(o,p){return Tickets_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Tickets_setPrototypeOf(o,p)}function Tickets_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Tickets_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Tickets_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Tickets_possibleConstructorReturn(this,result)}}function Tickets_possibleConstructorReturn(self,call){if(call&&("object"===Tickets_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Tickets_assertThisInitialized(self)}function Tickets_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Tickets_getPrototypeOf(o){return Tickets_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Tickets_getPrototypeOf(o)}var TicketsSettings=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Tickets_setPrototypeOf(subClass,superClass)}(TicketsSettings,_React$Component);var Constructor,protoProps,staticProps,_super=Tickets_createSuper(TicketsSettings);function TicketsSettings(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TicketsSettings),(_this=_super.call(this,props)).getTicketTags=_this.getTicketTags.bind(Tickets_assertThisInitialized(_this)),_this}return Constructor=TicketsSettings,staticProps=[{key:"toggleEditPriority",value:function(e){var $parent=jquery_default()(e.target).parents(".priority-wrapper"),$v=$parent.find(".view-priority"),$e=$parent.find(".edit-priority");$v&&$e&&($v.toggleClass("hide"),$e.toggleClass("hide"))}},{key:"toggleEditTag",value:function(e){var $parent=jquery_default()(e.target).parents(".tag-wrapper"),$v=$parent.find(".view-tag"),$e=$parent.find(".edit-tag");$v&&$e&&($v.toggleClass("hide"),$e.toggleClass("hide"))}}],(protoProps=[{key:"componentDidMount",value:function(){this.getTicketTags(null,0);var $tagPagination=jquery_default()("#tagPagination");this.tagsPagination=uikit_combined_min_default().pagination($tagPagination,{items:this.props.tagsSettings.totalCount?this.props.tagsSettings.totalCount:0,itemsOnPage:16}),$tagPagination.on("select.uk.pagination",this.getTicketTags)}},{key:"componentDidUpdate",value:function(prevProps){prevProps.tagsSettings.totalCount!==this.props.tagsSettings.totalCount&&(this.tagsPagination.pages=Math.ceil(this.props.tagsSettings.totalCount/16)?Math.ceil(this.props.tagsSettings.totalCount/16):1,this.tagsPagination.render(),this.tagsPagination.currentPage>this.tagsPagination.pages-1&&this.tagsPagination.selectPage(this.tagsPagination.pages-1))}},{key:"getSetting",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"getTicketTypes",value:function(){return this.props.settings&&this.props.settings.get("ticketTypes")?this.props.settings.get("ticketTypes").toArray():[]}},{key:"getPriorities",value:function(){return this.props.settings&&this.props.settings.get("priorities")?this.props.settings.get("priorities").toArray():[]}},{key:"getTicketTags",value:function(e,page){e&&e.preventDefault(),this.props.tagsUpdateCurrentPage(page),this.props.getTagsWithPage({limit:16,page})}},{key:"onDefaultTicketTypeChange",value:function(e){this.props.updateSetting({name:"ticket:type:default",value:e.target.value,stateName:"defaultTicketType"})}},{key:"onAllowPublicTicketsChange",value:function(e){this.props.updateSetting({name:"allowPublicTickets:enable",value:e.target.checked,stateName:"allowPublicTickets",noSnackbar:!0})}},{key:"onAllowAgentUserTicketsChange",value:function(e){this.props.updateSetting({name:"allowAgentUserTickets:enable",value:e.target.checked,stateName:"allowAgentUserTickets",noSnackbar:!0})}},{key:"onShowOverdueChange",value:function(e){this.props.updateSetting({name:"showOverdueTickets:enable",value:e.target.checked,stateName:"showOverdueTickets",noSnackbar:!0})}},{key:"onPlayNewTicketSoundChange",value:function(e){this.props.updateSetting({name:"playNewTicketSound:enable",value:e.target.checked,stateName:"playNewTicketSound",noSnackbar:!0})}},{key:"showModal",value:function(e,modal,props){e.preventDefault(),this.props.showModal(modal,props)}},{key:"onRemovePriorityClicked",value:function(e,priority){e.preventDefault(),this.props.showModal("DELETE_PRIORITY",{priority})}},{key:"onSubmitUpdateTag",value:function(e,tagId){var _this2=this;e.preventDefault(),e.persist();var name=e.target.name.value;if(name.length<2)return helpers_default().UI.showSnackbar("Invalid Tag Name",!0);axios_default().put("/api/v1/tags/".concat(tagId),{name}).then((function(res){TicketsSettings.toggleEditTag(e),helpers_default().UI.showSnackbar("Tag: ".concat(res.data.tag.name," updated successfully")),_this2.getTicketTags(null,_this2.tagsPagination.currentPage)})).catch((function(err){if(!err.response)return logger.error(err);var errorText=err.response.data.error;logger.error(errorText,err.response),helpers_default().UI.showSnackbar("Error: ".concat(errorText),!0)}))}},{key:"onRemoveTagClicked",value:function(e,tag){var _this3=this;uikit_combined_min_default().modal.confirm("Really delete tag <strong>".concat(tag.get(),'</strong><br />\n        <i style="font-size: 13px; color: #e53935">This will remove the tag from all associated tickets.</i>'),(function(){axios_default().delete("/api/v1/tags/".concat(tag.get("_id"))).then((function(res){res.data.success&&(helpers_default().UI.showSnackbar("Successfully removed tag: ".concat(tag.get("name"))),_this3.getTicketTags(null,_this3.tagsPagination.currentPage))})).catch((function(error){var errorText=error.response.data.error;helpers_default().UI.showSnackbar("Error: ".concat(errorText),!0),logger.error(errorText,error.response)}))}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"render",value:function(){var _this4=this,_this$props=this.props,active=_this$props.active,viewdata=_this$props.viewdata,mappedTypes=this.getTicketTypes().map((function(type){return{text:type.get("name"),value:type.get("_id")}}));return react.createElement("div",{className:active?"active":"hide"},react.createElement(Settings_SettingItem,{title:"Default Ticket Type",subtitle:"Default ticket type for newly created tickets.",component:react.createElement(components_SingleSelect,{items:mappedTypes,defaultValue:this.getSetting("defaultTicketType"),onSelectChange:function(e){_this4.onDefaultTicketTypeChange(e)},width:"50%",showTextbox:!1})}),react.createElement(Settings_SettingItem,{title:"Allow Public Tickets",subtitle:react.createElement("div",null,"Allow the creation of tickets by users that are unregistered. (",react.createElement("a",{href:viewdata.get("hosturl")+"/newissue"},viewdata.get("hosturl")+"/newissue"),")"),component:react.createElement(Settings_EnableSwitch,{stateName:"allowPublicTickets",label:"Enable",checked:this.getSetting("allowPublicTickets"),onChange:function(e){_this4.onAllowPublicTicketsChange(e)}})}),react.createElement(Settings_SettingItem,{title:"Allow Agents to Submit Tickets on Behalf of User",subtitle:react.createElement("div",null,"Allow the creation of tickets by agents on behalf of users."),tooltip:"Setting takes affect after refresh.",component:react.createElement(Settings_EnableSwitch,{stateName:"allowAgentUserTickets",label:"Enable",checked:this.getSetting("allowAgentUserTickets"),onChange:function(e){_this4.onAllowAgentUserTicketsChange(e)}})}),react.createElement(Settings_SettingItem,{title:"Show Overdue Tickets",subtitle:"Enable/Disable flashing of tickets based on SLA time of type priority.",tooltip:"If disabled, priority SLA times will not mark tickets overdue.",component:react.createElement(Settings_EnableSwitch,{stateName:"showOverdueTickets",label:"Enable",checked:this.getSetting("showOverdueTickets"),onChange:function(e){_this4.onShowOverdueChange(e)}})}),react.createElement(Settings_SettingItem,{title:"Minimum Subject Length",subtitle:"Minimum character limit for ticket subject",component:react.createElement(Settings_NumberWithSave,{stateName:"minSubjectLength",settingName:"ticket:minlength:subject",value:this.getSetting("minSubjectLength"),width:"40%"})}),react.createElement(Settings_SettingItem,{title:"Minimum Issue Length",subtitle:"Minimum character limit for ticket issue",component:react.createElement(Settings_NumberWithSave,{stateName:"minIssueLength",settingName:"ticket:minlength:issue",value:this.getSetting("minIssueLength"),width:"40%"})}),react.createElement(Settings_SplitSettingsPanel,{title:"Ticket Types",subtitle:"Create/Modify Ticket Types",rightComponent:react.createElement(components_Button,{text:"Create",style:"success",flat:!0,extraClass:"md-btn-wave",onClick:function(e){_this4.showModal(e,"CREATE_TICKET_TYPE")}}),menuItems:this.getTicketTypes().map((function(type){return{key:type.get("_id"),title:type.get("name"),bodyComponent:react.createElement(ticketTypeBody,{type})}}))}),react.createElement(Settings_SettingItem,{title:"Ticket Priorities",subtitle:"Ticket priorities set the level of SLAs for each ticket.",component:react.createElement(components_Button,{text:"Create",style:"success",flat:!0,waves:!0,extraClass:"mt-10 right",onClick:function(e){return _this4.showModal(e,"CREATE_PRIORITY")}})},react.createElement(zone,null,this.getPriorities().map((function(p){var disableRemove=!!p.get("default")&&p.get("default");return react.createElement(components_ZoneBox,{key:p.get("_id"),extraClass:"priority-wrapper"},react.createElement(Settings_SettingSubItem,{parentClass:"view-priority",title:p.get("name"),titleCss:{color:p.get("htmlColor")},subtitle:react.createElement("div",null,"SLA Overdue: ",react.createElement("strong",null,p.get("durationFormatted"))),component:react.createElement(components_ButtonGroup,{classNames:"uk-float-right"},react.createElement(components_Button,{text:"Edit",small:!0,onClick:function(e){return TicketsSettings.toggleEditPriority(e)}}),react.createElement(components_Button,{text:"Remove",small:!0,style:"danger",disabled:disableRemove,onClick:function(e){return _this4.onRemovePriorityClicked(e,p)}}))}),react.createElement(editPriorityPartial,{priority:p}))})))),react.createElement(Settings_SettingItem,{title:"Ticket Tags",subtitle:"Create/Modify Ticket Tags",component:react.createElement(components_Button,{text:"Create",style:"success",flat:!0,waves:!0,extraClass:"mt-10 right",onClick:function(e){return _this4.showModal(e,"CREATE_TAG",{page:"settings",currentPage:_this4.props.tagsSettings.currentPage})}}),footer:react.createElement("ul",{id:"tagPagination",className:"uk-pagination"})},react.createElement(components_Grid,{extraClass:"uk-margin-medium-bottom"},this.props.tagsSettings.tags.size<1&&react.createElement("div",{style:{width:"100%",padding:"55px",textAlign:"center"}},react.createElement("h3",{style:{fontSize:"24px",fontWeight:"300"}},"No Tags Found")),react.createElement(components_SpinLoader,{active:this.props.tagsSettings.loading,extraClass:"panel-bg"}),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement(components_Grid,{extraClass:"zone ml-0"},this.props.tagsSettings.tags.map((function(i){return react.createElement(Grid_GridItem,{width:"1-2",key:i.get("_id"),extraClass:"tag-wrapper br bb"},react.createElement(components_Grid,{extraClass:"view-tag"},react.createElement(Grid_GridItem,{width:"1-1"},react.createElement(components_ZoneBox,null,react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("h5",{style:{fontSize:"16px",lineHeight:"31px",margin:0,padding:0,fontWeight:300}},i.get("name"))),react.createElement(Grid_GridItem,{width:"1-2",extraClass:"uk-text-right"},react.createElement(components_ButtonGroup,{classNames:"mt-5"},react.createElement(components_Button,{text:"edit",flat:!0,waves:!0,small:!0,onClick:function(e){return TicketsSettings.toggleEditTag(e)}}),react.createElement(components_Button,{text:"remove",flat:!0,waves:!0,style:"danger",small:!0,onClick:function(e){return _this4.onRemoveTagClicked(e,i)}}))))))),react.createElement(components_Grid,{extraClass:"edit-tag z-box uk-clearfix nbt hide",style:{paddingTop:"5px"}},react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("form",{onSubmit:function(e){return _this4.onSubmitUpdateTag(e,i.get("_id"))}},react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"2-3"},react.createElement("input",{type:"text",className:"md-input",name:"name",defaultValue:i.get("name")})),react.createElement(Grid_GridItem,{width:"1-3",style:{paddingTop:"10px"}},react.createElement(components_ButtonGroup,{classNames:"uk-float-right uk-text-right"},react.createElement(components_Button,{text:"cancel",flat:!0,waves:!0,small:!0,onClick:function(e){return TicketsSettings.toggleEditTag(e)}}),react.createElement(components_Button,{type:"submit",text:"save",flat:!0,waves:!0,small:!0,style:"success"}))))))))})))))))}}])&&Tickets_defineProperties(Constructor.prototype,protoProps),staticProps&&Tickets_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TicketsSettings}(react.Component);TicketsSettings.propTypes={active:prop_types_default().bool.isRequired,viewdata:prop_types_default().object.isRequired,settings:prop_types_default().object.isRequired,tagsSettings:prop_types_default().object.isRequired,updateSetting:prop_types_default().func.isRequired,getTagsWithPage:prop_types_default().func.isRequired,tagsUpdateCurrentPage:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const Tickets=(0,es.$j)((function(state){return{viewdata:state.common.viewdata,settings:state.settings.settings,tagsSettings:state.tagsSettings}}),{updateSetting:settings_updateSetting,getTagsWithPage:tickets_getTagsWithPage,tagsUpdateCurrentPage,showModal})(TicketsSettings);function mailer_typeof(obj){return mailer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},mailer_typeof(obj)}function mailer_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function mailer_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function mailer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function mailer_setPrototypeOf(o,p){return mailer_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},mailer_setPrototypeOf(o,p)}function mailer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=mailer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=mailer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return mailer_possibleConstructorReturn(this,result)}}function mailer_possibleConstructorReturn(self,call){if(call&&("object"===mailer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function mailer_getPrototypeOf(o){return mailer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},mailer_getPrototypeOf(o)}var MailerSettings_Mailer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&mailer_setPrototypeOf(subClass,superClass)}(MailerSettings_Mailer,_React$Component);var Constructor,protoProps,staticProps,_super=mailer_createSuper(MailerSettings_Mailer);function MailerSettings_Mailer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MailerSettings_Mailer),(_this=_super.call(this,props)).state={mailerSSL:"",mailerHost:"",mailerPort:"",mailerUsername:"",mailerPassword:"",mailerFrom:""},_this}return Constructor=MailerSettings_Mailer,staticProps=[{key:"getDerivedStateFromProps",value:function(nextProps,state){if(nextProps.settings){var stateObj=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?mailer_ownKeys(Object(source),!0).forEach((function(key){mailer_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):mailer_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},state);return""===state.mailerSSL&&(stateObj.mailerSSL=nextProps.settings.getIn(["settings","mailerSSL","value"])||""),state.mailerHost||(stateObj.mailerHost=nextProps.settings.getIn(["settings","mailerHost","value"])||""),state.mailerPort||(stateObj.mailerPort=nextProps.settings.getIn(["settings","mailerPort","value"])||""),state.mailerUsername||(stateObj.mailerUsername=nextProps.settings.getIn(["settings","mailerUsername","value"])||""),state.mailerPassword||(stateObj.mailerPassword=nextProps.settings.getIn(["settings","mailerPassword","value"])||""),state.mailerFrom||(stateObj.mailerFrom=nextProps.settings.getIn(["settings","mailerFrom","value"])||""),stateObj}return null}}],(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"getSetting",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"onEnableMailerChanged",value:function(e){this.props.updateSetting({name:"mailer:enable",stateName:"mailerEnabled",value:e.target.checked,noSnackbar:!0})}},{key:"onMailerSSLChanged",value:function(e){this.setState({mailerSSL:e.target.checked})}},{key:"onInputValueChanged",value:function(e,stateName){this.setState(mailer_defineProperty({},stateName,e.target.value))}},{key:"onMailerSubmit",value:function(e){e.preventDefault();var mailSettings=[{name:"mailer:host",value:this.state.mailerHost},{name:"mailer:port",value:this.state.mailerPort},{name:"mailer:username",value:this.state.mailerUsername},{name:"mailer:password",value:this.state.mailerPassword},{name:"mailer:from",value:this.state.mailerFrom},{name:"mailer:ssl",value:this.state.mailerSSL}];this.props.updateMultipleSettings(mailSettings)}},{key:"testMailerSettings",value:function(e){e.preventDefault(),helpers_default().UI.showSnackbar("Testing..."),axios_default().post("/api/v1/settings/testmailer",{}).then((function(){helpers_default().UI.showSnackbar("Successfully Connected")})).catch((function(err){if(!err.response)return logger.error(err);helpers_default().UI.showSnackbar("Connection Failed. Did you apply settings?",!0),logger.error(err.response.data.error,err.response)}))}},{key:"render",value:function(){var _this2=this;return react.createElement(Settings_SettingItem,{title:"Mailer",subtitle:"Preferences for trudesk to send email notifications to users.",component:react.createElement(Settings_EnableSwitch,{stateName:"mailerEnabled",label:"Enabled",onChange:function(e){return _this2.onEnableMailerChanged(e)},checked:this.getSetting("mailerEnabled")})},react.createElement("form",{onSubmit:function(e){return _this2.onMailerSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("div",{className:"uk-right"},react.createElement(Settings_EnableSwitch,{stateName:"mailerSSL",label:"Use SSLv3",style:{position:"absolute",top:"5px",right:"-5px",zIndex:"99",margin:"0"},checked:this.state.mailerSSL,disabled:!this.getSetting("mailerEnabled"),onChange:function(e){return _this2.onMailerSSLChanged(e)}})),react.createElement("label",null,"Mail Server"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerHost",disabled:!this.getSetting("mailerEnabled"),value:this.state.mailerHost,onChange:function(e){return _this2.onInputValueChanged(e,"mailerHost")}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Port"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerPort",disabled:!this.getSetting("mailerEnabled"),value:this.state.mailerPort,onChange:function(e){return _this2.onInputValueChanged(e,"mailerPort")}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Auth Username"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerUsername",disabled:!this.getSetting("mailerEnabled"),value:this.state.mailerUsername,onChange:function(e){return _this2.onInputValueChanged(e,"mailerUsername")}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Auth Password"),react.createElement("input",{type:"password",className:"md-input md-input-width-medium",name:"mailerPassword",disabled:!this.getSetting("mailerEnabled"),value:this.state.mailerPassword,onChange:function(e){return _this2.onInputValueChanged(e,"mailerPassword")}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"From Address"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerFrom",disabled:!this.getSetting("mailerEnabled"),value:this.state.mailerFrom,onChange:function(e){return _this2.onInputValueChanged(e,"mailerFrom")}})),react.createElement("div",{className:"uk-clearfix"},react.createElement(components_Button,{text:"Test Settings",type:"button",flat:!0,waves:!0,style:"primary",extraClass:"uk-float-left",disabled:!this.getSetting("mailerEnabled"),onClick:function(e){return _this2.testMailerSettings(e)}}),react.createElement(components_Button,{text:"Apply",type:"submit",style:"success",extraClass:"uk-float-right",disabled:!this.getSetting("mailerEnabled"),waves:!0,flat:!0}))))}}])&&mailer_defineProperties(Constructor.prototype,protoProps),staticProps&&mailer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MailerSettings_Mailer}(react.Component);MailerSettings_Mailer.propTypes={settings:prop_types_default().object.isRequired,updateSetting:prop_types_default().func.isRequired,updateMultipleSettings:prop_types_default().func.isRequired};const mailer=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting,updateMultipleSettings:settings_updateMultipleSettings})(MailerSettings_Mailer);function mailerCheck_typeof(obj){return mailerCheck_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},mailerCheck_typeof(obj)}function mailerCheck_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function mailerCheck_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function mailerCheck_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function mailerCheck_setPrototypeOf(o,p){return mailerCheck_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},mailerCheck_setPrototypeOf(o,p)}function mailerCheck_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=mailerCheck_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=mailerCheck_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return mailerCheck_possibleConstructorReturn(this,result)}}function mailerCheck_possibleConstructorReturn(self,call){if(call&&("object"===mailerCheck_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function mailerCheck_getPrototypeOf(o){return mailerCheck_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},mailerCheck_getPrototypeOf(o)}var Mailer_MailerCheck=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&mailerCheck_setPrototypeOf(subClass,superClass)}(Mailer_MailerCheck,_React$Component);var Constructor,protoProps,staticProps,_super=mailerCheck_createSuper(Mailer_MailerCheck);function Mailer_MailerCheck(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Mailer_MailerCheck),(_this=_super.call(this,props)).state={mailerCheckHost:"",mailerCheckPort:"",mailerCheckUsername:"",mailerCheckPassword:"",mailerCheckSelfSign:"",mailerCheckPolling:"",mailerCheckCreateAccount:"",mailerCheckDeleteMessage:"",mailerCheckTicketType:"",mailerCheckTicketPriority:"",typePriorities:[]},_this}return Constructor=Mailer_MailerCheck,staticProps=[{key:"getDerivedStateFromProps",value:function(nextProps,state){if(nextProps.settings){var stateObj=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?mailerCheck_ownKeys(Object(source),!0).forEach((function(key){mailerCheck_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):mailerCheck_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},state);return state.mailerCheckHost||(stateObj.mailerCheckHost=nextProps.settings.getIn(["settings","mailerCheckHost","value"])||""),state.mailerCheckPort||(stateObj.mailerCheckPort=nextProps.settings.getIn(["settings","mailerCheckPort","value"])||""),state.mailerCheckUsername||(stateObj.mailerCheckUsername=nextProps.settings.getIn(["settings","mailerCheckUsername","value"])||""),state.mailerCheckPassword||(stateObj.mailerCheckPassword=nextProps.settings.getIn(["settings","mailerCheckPassword","value"])||""),""===state.mailerCheckSelfSign&&(stateObj.mailerCheckSelfSign=nextProps.settings.getIn(["settings","mailerCheckSelfSign","value"])||""),""===state.mailerCheckPolling&&(stateObj.mailerCheckPolling=parseInt(nextProps.settings.getIn(["settings","mailerCheckPolling","value"]))/6e4||""),""===state.mailerCheckCreateAccount&&(stateObj.mailerCheckCreateAccount=nextProps.settings.getIn(["settings","mailerCheckCreateAccount","value"])||""),""===state.mailerCheckDeleteMessage&&(stateObj.mailerCheckDeleteMessage=nextProps.settings.getIn(["settings","mailerCheckDeleteMessage","value"])||""),state.mailerCheckTicketType||(stateObj.mailerCheckTicketType=nextProps.settings.getIn(["settings","mailerCheckTicketType","value"])||""),stateObj.mailerCheckTicketType&&(stateObj.typePriorities=Mailer_MailerCheck.getTypePriorities(nextProps.settings.get("ticketTypes"),stateObj.mailerCheckTicketType)),state.mailerCheckTicketPriority||(stateObj.mailerCheckTicketPriority=nextProps.settings.getIn(["settings","mailerCheckTicketPriority","value"])||""),stateObj}return null}},{key:"getTypePriorities",value:function(ticketTypes,typeId){return ticketTypes||typeId?ticketTypes.filter((function(item){return item.get("_id")===typeId})).first().get("priorities").map((function(p){return{text:p.get("name"),value:p.get("_id")}})).toArray():[]}}],(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"getSetting",value:function(stateName){return this.props.settings.getIn(["settings",stateName,"value"])?this.props.settings.getIn(["settings",stateName,"value"]):""}},{key:"getTicketTypes",value:function(){return this.props.settings.get("ticketTypes")?this.props.settings.get("ticketTypes").toArray():[]}},{key:"onFormSubmit",value:function(e){e.preventDefault();var mailCheckSettings=[{name:"mailer:check:polling",value:6e4*this.state.mailerCheckPolling},{name:"mailer:check:host",value:this.state.mailerCheckHost},{name:"mailer:check:port",value:this.state.mailerCheckPort},{name:"mailer:check:username",value:this.state.mailerCheckUsername},{name:"mailer:check:password",value:this.state.mailerCheckPassword},{name:"mailer:check:selfsign",value:this.state.mailerCheckSelfSign},{name:"mailer:check:ticketype",value:this.state.mailerCheckTicketType},{name:"mailer:check:ticketpriority",value:this.state.mailerCheckTicketPriority},{name:"mailer:check:createaccount",value:this.state.mailerCheckCreateAccount},{name:"mailer:check:deletemessage",value:this.state.mailerCheckDeleteMessage}];this.props.updateMultipleSettings(mailCheckSettings)}},{key:"onEnableMailerCheckChanged",value:function(e){this.props.updateSetting({name:"mailer:check:enable",stateName:"mailerCheckEnabled",value:e.target.checked,noSnackbar:!0}).then((function(){uikit_combined_min_default().modal.confirm("Setting will take affect after server restart. <br /><br />Would you like to restart the server now?",(function(){axios_default().get("/api/v1/admin/restart").catch((function(error){helpers_default().hideLoader(),logger.error(error.response),logger.error("Unable to restart server. Server must run under PM2 and Account must have admin rights."),helpers_default().UI.showSnackbar("Unable to restart server. Are you an Administrator?",!0)}))}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-primary"})}))}},{key:"onInputValueChanged",value:function(e,stateName){this.setState(mailerCheck_defineProperty({},stateName,e.target.value))}},{key:"onPollingChanged",value:function(e){this.setState({mailerCheckPolling:e.target.value})}},{key:"onCheckboxChanged",value:function(e,stateName){this.setState(mailerCheck_defineProperty({},stateName,e.target.checked))}},{key:"onTicketTypeSelectChanged",value:function(e){this.setState({mailerCheckTicketType:e.target.value,typePriorities:Mailer_MailerCheck.getTypePriorities(this.props.settings.get("ticketTypes"),e.target.value)})}},{key:"onSingleSelectChanged",value:function(e,stateName){this.setState(mailerCheck_defineProperty({},stateName,e.target.value))}},{key:"onCheckNowClicked",value:function(e){axios_default().get("/api/v2/mailer/check").then((function(res){res.data&&res.data.success&&helpers_default().UI.showSnackbar("Fetch mail task scheduled.")})).catch((function(err){logger.error(err),helpers_default().UI.showSnackbar(err,!0)}))}},{key:"render",value:function(){var _this2=this,mappedTicketTypes=this.getTicketTypes().map((function(type){return{text:type.get("name"),value:type.get("_id")}}));return react.createElement(Settings_SettingItem,{title:"Mailer Check",subtitle:react.createElement("div",null,"Poll an IMAP mailbox for messages to convert to tickets - ",react.createElement("i",null,"Settings are applied after server restart")),component:react.createElement(Settings_EnableSwitch,{stateName:"mailerCheckEnabled",label:"Enabled",checked:this.getSetting("mailerCheckEnabled"),onChange:function(e){return _this2.onEnableMailerCheckChanged(e)}})},react.createElement("div",null,react.createElement("form",{onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Mail Server"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerCheckHost",value:this.state.mailerCheckHost,onChange:function(e){return _this2.onInputValueChanged(e,"mailerCheckHost")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Port"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerCheckPort",value:this.state.mailerCheckPort,onChange:function(e){return _this2.onInputValueChanged(e,"mailerCheckPort")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Username"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerCheckUsername",value:this.state.mailerCheckUsername,onChange:function(e){return _this2.onInputValueChanged(e,"mailerCheckUsername")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Password"),react.createElement("input",{type:"password",className:"md-input md-input-width-medium",name:"mailerCheckPassword",value:this.state.mailerCheckPassword,onChange:function(e){return _this2.onInputValueChanged(e,"mailerCheckPassword")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("div",{className:"uk-clearfix uk-margin-medium-bottom"},react.createElement("div",{className:"uk-float-left"},react.createElement("h6",{style:{padding:0,margin:"5px 0 0 0",fontSize:"16px",lineHeight:"14px"}},"Allow Self Signed Certificate"),react.createElement("h5",{style:{padding:"0 0 10px 0",margin:"2px 0 0 0",fontSize:"12px"},className:"uk-text-muted"},"Allow less secure self signed certificates when checking mailbox.")),react.createElement("div",{className:"uk-float-right"},react.createElement(Settings_EnableSwitch,{label:"Enable",stateName:"mailerCheckSelfSign",checked:this.state.mailerCheckSelfSign,onChange:function(e){return _this2.onCheckboxChanged(e,"mailerCheckSelfSign")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("hr",{style:{float:"left",marginTop:"10px"}})),react.createElement("div",{className:"uk-clearfix uk-margin-medium-bottom"},react.createElement("div",{className:"uk-float-left"},react.createElement("h6",{style:{padding:0,margin:"5px 0 0 0",fontSize:"16px",lineHeight:"14px"}},"Polling Interval",react.createElement("i",{className:"material-icons",style:{color:"#888",fontSize:"16px",cursor:"pointer",lineHeight:"20px",marginLeft:"5px"},"data-uk-tooltip":"{cls:'long-text'}",title:"Caution: Polling too often can cause high CPU usage"},"error")),react.createElement("h5",{style:{padding:"0 0 10px 0",margin:"2px 0 0 0",fontSize:"12px"},className:"uk-text-muted"},"How often to poll the server for new messages (Minutes)")),react.createElement("div",{className:"uk-float-right",style:{position:"relative"}},react.createElement("div",{className:"uk-float-left",style:{width:"90px",paddingRight:"10px"}},react.createElement("input",{type:"number",className:"md-input md-input-width-small",name:"mailerCheckPolling",disabled:!this.getSetting("mailerCheckEnabled"),value:this.state.mailerCheckPolling,onChange:function(e){return _this2.onPollingChanged(e)}}))),react.createElement("hr",{style:{float:"left",marginTop:"10px"}})),react.createElement("div",{className:"uk-clearfix uk-margin-medium-bottom"},react.createElement("div",{className:"uk-float-left"},react.createElement("h6",{style:{padding:0,margin:"5px 0 0 0",fontSize:"16px",lineHeight:"14px"}},"Create Account"),react.createElement("h5",{style:{padding:"0 0 10px 0",margin:"2px 0 0 0",fontSize:"12px"},className:"uk-text-muted"},"Create a user account if account does not exist.")),react.createElement("div",{className:"uk-float-right"},react.createElement(Settings_EnableSwitch,{label:"Enable",stateName:"mailerCheckCreateAccount",checked:this.state.mailerCheckCreateAccount,onChange:function(e){return _this2.onCheckboxChanged(e,"mailerCheckCreateAccount")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("hr",{style:{float:"left",marginTop:"10px"}})),react.createElement("div",{className:"uk-clearfix uk-margin-medium-bottom"},react.createElement("div",{className:"uk-float-left"},react.createElement("h6",{style:{padding:0,margin:"5px 0 0 0",fontSize:"16px",lineHeight:"14px"}},"Delete Message"),react.createElement("h5",{style:{padding:"0 0 10px 0",margin:"2px 0 0 0",fontSize:"12px"},className:"uk-text-muted"},"Delete email message from INBOX once processed")),react.createElement("div",{className:"uk-float-right"},react.createElement(Settings_EnableSwitch,{label:"Enable",stateName:"mailerCheckDeleteMessage",checked:this.state.mailerCheckDeleteMessage,onChange:function(e){return _this2.onCheckboxChanged(e,"mailerCheckDeleteMessage")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("hr",{style:{float:"left",marginTop:"10px"}})),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("label",null,"Default Ticket Type"),react.createElement(components_SingleSelect,{showTextbox:!1,width:"100%",items:mappedTicketTypes,defaultValue:this.state.mailerCheckTicketType,disabled:!this.getSetting("mailerCheckEnabled"),onSelectChange:function(e){return _this2.onTicketTypeSelectChanged(e)}})),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("label",null,"Default Ticket Priority"),react.createElement(components_SingleSelect,{showTextbox:!1,width:"100%",items:this.state.typePriorities,defaultValue:this.state.mailerCheckTicketPriority,disabled:!this.getSetting("mailerCheckEnabled"),onSelectChange:function(e){return _this2.onSingleSelectChanged(e,"mailerCheckTicketPriority")}})),react.createElement("div",{className:"uk-clearfix"},react.createElement(components_Button,{text:"Check Now",type:"button",extraClass:"uk-float-left",flat:!0,waves:!0,style:"primary",onClick:function(e){return _this2.onCheckNowClicked(e)},disabled:!this.getSetting("mailerCheckEnabled")}),react.createElement(components_Button,{text:"Apply",type:"submit",extraClass:"uk-float-right",flat:!0,waves:!0,style:"success",disabled:!this.getSetting("mailerCheckEnabled")})))))}}])&&mailerCheck_defineProperties(Constructor.prototype,protoProps),staticProps&&mailerCheck_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Mailer_MailerCheck}(react.Component);Mailer_MailerCheck.propTypes={settings:prop_types_default().object.isRequired,updateSetting:prop_types_default().func.isRequired,updateMultipleSettings:prop_types_default().func.isRequired};const mailerCheck=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting,updateMultipleSettings:settings_updateMultipleSettings})(Mailer_MailerCheck);function mailerSettingsTemplates_typeof(obj){return mailerSettingsTemplates_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},mailerSettingsTemplates_typeof(obj)}var mailerSettingsTemplates_class,mailerSettingsTemplates_class2,mailerSettingsTemplates_descriptor,mailerSettingsTemplates_descriptor2;function mailerSettingsTemplates_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function mailerSettingsTemplates_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function mailerSettingsTemplates_setPrototypeOf(o,p){return mailerSettingsTemplates_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},mailerSettingsTemplates_setPrototypeOf(o,p)}function mailerSettingsTemplates_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=mailerSettingsTemplates_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=mailerSettingsTemplates_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return mailerSettingsTemplates_possibleConstructorReturn(this,result)}}function mailerSettingsTemplates_possibleConstructorReturn(self,call){if(call&&("object"===mailerSettingsTemplates_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return mailerSettingsTemplates_assertThisInitialized(self)}function mailerSettingsTemplates_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function mailerSettingsTemplates_getPrototypeOf(o){return mailerSettingsTemplates_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},mailerSettingsTemplates_getPrototypeOf(o)}function mailerSettingsTemplates_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var templateBody=function(_ref){var template=_ref.template,handleSaveSubject=_ref.handleSaveSubject,handleOpenEditor=_ref.handleOpenEditor;return react.createElement("div",null,react.createElement("h3",{className:"font-light mb-5"},"Template Description"),react.createElement("p",{className:"mb-10",style:{fontSize:"13px"}},template.description),react.createElement("hr",{className:"uk-margin-medium-bottom"}),react.createElement("form",{onSubmit:handleSaveSubject},react.createElement("input",{name:"id",type:"hidden",value:template._id}),react.createElement("div",{className:"uk-input-group"},react.createElement("div",{className:"md-input-wrapper"},react.createElement("label",null,"Mail Subject"),react.createElement("input",{name:"subject",type:"text",className:"md-input",defaultValue:template.subject})),react.createElement("span",{className:"uk-input-group-addon"},react.createElement(components_Button,{type:"submit",text:"Save",small:!0})))),react.createElement(zone,{extraClass:"uk-margin-medium-top"},react.createElement(components_ZoneBox,null,react.createElement("div",{className:"uk-float-left"},react.createElement("h6",{style:{margin:0,fontSize:"16px",lineHeight:"14px"}},"Edit Template (Disabled)"),react.createElement("h5",{className:"uk-text-muted",style:{margin:"2px 0 0 0",fontSize:"12px"}},"Customize template - Currently disabled")),react.createElement("div",{className:"uk-float-right uk-width-1-3 uk-clearfix"},react.createElement("div",{className:"uk-width-1-1 uk-float-right",style:{textAlign:"right"}},react.createElement("button",{className:"md-btn md-btn-small right disabled",style:{textTransform:"none"},onClick:handleOpenEditor,disabled:!0},"Open Editor"))))))};templateBody.propTypes={template:prop_types_default().object.isRequired,handleSaveSubject:prop_types_default().func.isRequired,handleOpenEditor:prop_types_default().func.isRequired};var MailerSettingsTemplates=(0,mobxreact_esm.Pi)((mailerSettingsTemplates_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&mailerSettingsTemplates_setPrototypeOf(subClass,superClass)}(MailerSettingsTemplates,_React$Component);var Constructor,protoProps,staticProps,_super=mailerSettingsTemplates_createSuper(MailerSettingsTemplates);function MailerSettingsTemplates(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MailerSettingsTemplates),mailerSettingsTemplates_initializerDefineProperty(_this=_super.call(this,props),"betaEnabled",mailerSettingsTemplates_descriptor,mailerSettingsTemplates_assertThisInitialized(_this)),mailerSettingsTemplates_initializerDefineProperty(_this,"templates",mailerSettingsTemplates_descriptor2,mailerSettingsTemplates_assertThisInitialized(_this)),(0,mobx_esm.rC)(mailerSettingsTemplates_assertThisInitialized(_this)),_this}return Constructor=MailerSettingsTemplates,staticProps=[{key:"onOpenEditor",value:function(e,name){e.preventDefault();var url="/settings/editor/".concat(name,"/");History.pushState(null,null,url)}}],(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs()}},{key:"componentDidUpdate",value:function(prevProps){helpers_default().UI.reRenderInputs(),prevProps.settings!==this.props.settings&&(this.betaEnabled!==this.getSetting("emailBeta")&&(this.betaEnabled=this.getSetting("emailBeta")),this.props.settings.get("mailTemplates").toArray()!==this.templates&&(this.templates=this.props.settings.get("mailTemplates").toArray()))}},{key:"getSetting",value:function(name){return void 0!==this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"onEmailBetaChange",value:function(e){var self=this,val=e.target.checked;this.props.updateSetting({name:"beta:email",value:val,stateName:"betaEmail",noSnackbar:!0}).then((function(){self.betaEnabled=val}))}},{key:"onSaveSubject",value:function(e){e.preventDefault();var subject=e.target.subject;subject&&axios_default().put("/api/v1/settings/mailer/template/".concat(e.target.id.value),{subject:subject.value}).then((function(res){res.data&&res.data.success&&helpers_default().UI.showSnackbar("Template subject saved successfully")})).catch((function(error){var errorText=error.response?error.response.error:error;helpers_default().UI.showSnackbar("Error: ".concat(errorText),!0),logger.error(errorText,error)}))}},{key:"mapTemplateMenu",value:function(){var _this2=this;return this.templates.map((function(template,idx){var templateJS=template.toJS();return{key:idx,title:template.get("displayName"),bodyComponent:templateBody({template:templateJS,handleSaveSubject:function(e){return _this2.onSaveSubject(e)},handleOpenEditor:function(e){return MailerSettingsTemplates.onOpenEditor(e,templateJS.name)}})}}))}},{key:"render",value:function(){var _this3=this,mappedValues=this.mapTemplateMenu();return react.createElement("div",null,react.createElement(Settings_SettingItem,{title:"Enable New Email Templates",subtitle:react.createElement("div",null,"The new email notification system is currently in beta. Please See"," ",react.createElement("a",{href:"https://forum.trudesk.io/t/beta-email-notification-templates"},"Email Notification Templates")," ","for more information."),component:react.createElement(Settings_EnableSwitch,{stateName:"emailBeta",label:"Enable",checked:this.betaEnabled,onChange:function(e){return _this3.onEmailBetaChange(e)}})}),react.createElement(Settings_SplitSettingsPanel,{title:"Notification Templates",subtitle:react.createElement("div",null,"Customize email notification templates.",react.createElement("strong",null," Note: Not all templates have been converted for the beta")),rightComponent:react.createElement("h4",{className:"uk-display-block uk-text-danger mt-20 mr-20"},"BETA FEATURE"),menuItems:mappedValues}))}}])&&mailerSettingsTemplates_defineProperties(Constructor.prototype,protoProps),staticProps&&mailerSettingsTemplates_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MailerSettingsTemplates}(react.Component),mailerSettingsTemplates_descriptor=mailerSettingsTemplates_applyDecoratedDescriptor(mailerSettingsTemplates_class2.prototype,"betaEnabled",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mailerSettingsTemplates_descriptor2=mailerSettingsTemplates_applyDecoratedDescriptor(mailerSettingsTemplates_class2.prototype,"templates",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mailerSettingsTemplates_class=mailerSettingsTemplates_class2))||mailerSettingsTemplates_class;MailerSettingsTemplates.propTypes={updateSetting:prop_types_default().func.isRequired,settings:prop_types_default().object.isRequired};const mailerSettingsTemplates=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting})(MailerSettingsTemplates);function Mailer_typeof(obj){return Mailer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Mailer_typeof(obj)}function Mailer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Mailer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Mailer_setPrototypeOf(o,p){return Mailer_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Mailer_setPrototypeOf(o,p)}function Mailer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Mailer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Mailer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Mailer_possibleConstructorReturn(this,result)}}function Mailer_possibleConstructorReturn(self,call){if(call&&("object"===Mailer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Mailer_getPrototypeOf(o){return Mailer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Mailer_getPrototypeOf(o)}var MailerSettingsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Mailer_setPrototypeOf(subClass,superClass)}(MailerSettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Mailer_createSuper(MailerSettingsContainer);function MailerSettingsContainer(){return Mailer_classCallCheck(this,MailerSettingsContainer),_super.apply(this,arguments)}return Constructor=MailerSettingsContainer,(protoProps=[{key:"render",value:function(){var active=this.props.active;return react.createElement("div",{className:active?"active":"hide"},react.createElement(mailerSettingsTemplates,null),react.createElement(mailer,null),react.createElement(mailerCheck,null))}}])&&Mailer_defineProperties(Constructor.prototype,protoProps),staticProps&&Mailer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MailerSettingsContainer}(react.Component);MailerSettingsContainer.propTypes={active:prop_types_default().bool.isRequired};const Mailer=MailerSettingsContainer;function Elasticsearch_typeof(obj){return Elasticsearch_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Elasticsearch_typeof(obj)}var Elasticsearch_class,Elasticsearch_class2,Elasticsearch_descriptor,Elasticsearch_descriptor2,Elasticsearch_descriptor3,Elasticsearch_descriptor4,Elasticsearch_descriptor5,Elasticsearch_descriptor6;function Elasticsearch_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function Elasticsearch_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Elasticsearch_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function Elasticsearch_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Elasticsearch_setPrototypeOf(o,p){return Elasticsearch_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Elasticsearch_setPrototypeOf(o,p)}function Elasticsearch_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Elasticsearch_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Elasticsearch_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Elasticsearch_possibleConstructorReturn(this,result)}}function Elasticsearch_possibleConstructorReturn(self,call){if(call&&("object"===Elasticsearch_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Elasticsearch_assertThisInitialized(self)}function Elasticsearch_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Elasticsearch_getPrototypeOf(o){return Elasticsearch_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Elasticsearch_getPrototypeOf(o)}function Elasticsearch_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var ElasticsearchSettingsContainer=(0,mobxreact_esm.Pi)((Elasticsearch_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Elasticsearch_setPrototypeOf(subClass,superClass)}(ElasticsearchSettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Elasticsearch_createSuper(ElasticsearchSettingsContainer);function ElasticsearchSettingsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ElasticsearchSettingsContainer),Elasticsearch_initializerDefineProperty(_this=_super.call(this,props),"esStatus",Elasticsearch_descriptor,Elasticsearch_assertThisInitialized(_this)),Elasticsearch_initializerDefineProperty(_this,"esStatusClass",Elasticsearch_descriptor2,Elasticsearch_assertThisInitialized(_this)),Elasticsearch_initializerDefineProperty(_this,"indexCount",Elasticsearch_descriptor3,Elasticsearch_assertThisInitialized(_this)),Elasticsearch_initializerDefineProperty(_this,"inSyncText",Elasticsearch_descriptor4,Elasticsearch_assertThisInitialized(_this)),Elasticsearch_initializerDefineProperty(_this,"inSyncClass",Elasticsearch_descriptor5,Elasticsearch_assertThisInitialized(_this)),Elasticsearch_initializerDefineProperty(_this,"disableRebuild",Elasticsearch_descriptor6,Elasticsearch_assertThisInitialized(_this)),(0,mobx_esm.rC)(Elasticsearch_assertThisInitialized(_this)),_this.state={host:!1,port:"",configured:!1},_this.getStatus=_this.getStatus.bind(Elasticsearch_assertThisInitialized(_this)),_this.rebuildIndex=_this.rebuildIndex.bind(Elasticsearch_assertThisInitialized(_this)),_this}return Constructor=ElasticsearchSettingsContainer,staticProps=[{key:"getDerivedStateFromProps",value:function(nextProps,state){if(nextProps.settings){var stateObj=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Elasticsearch_ownKeys(Object(source),!0).forEach((function(key){Elasticsearch_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Elasticsearch_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},state);return!1===state.host&&(stateObj.host=nextProps.settings.getIn(["settings","elasticSearchHost","value"])||!1),state.port||(stateObj.port=nextProps.settings.getIn(["settings","elasticSearchPort","value"])||""),state.configured||(stateObj.configured=nextProps.settings.getIn(["settings","elasticSearchConfigured","value"])||!1),stateObj}return null}}],(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs(),!this.loaded&&this.state.configured&&(this.getStatus(),this.loaded=!0)}},{key:"getSetting",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"onEnableChanged",value:function(e){var _this2=this,checked=e.target.checked,self=this;this.props.updateSetting({stateName:"elasticSearchEnabled",name:"es:enable",value:checked,noSnackbar:!0}).then((function(){checked&&_this2.state.host&&_this2.state.port?_this2.setState({configured:!0},(function(){_this2.getStatus()})):_this2.setState({configured:!1},(function(){self.esStatus="Not Configured",self.esStatusClass="",self.inSyncText="Not Configured",self.inSyncClass="",self.indexCount=0}))}))}},{key:"onInputChanged",value:function(e,settingName){this.setState(Elasticsearch_defineProperty({},settingName,e.target.value))}},{key:"onFormSubmit",value:function(e){e.preventDefault();var payload=[{name:"es:host",value:this.state.host},{name:"es:port",value:this.state.port}];this.props.updateMultipleSettings(payload)}},{key:"getStatus",value:function(){var _this3=this,self=this;axios_default().get("/api/v2/es/status").then((function(res){var data=res.data;data.status.isRebuilding?(self.esStatus="Rebuilding...",self.esStatusClass=""):self.esStatus=data.status.esStatus,"connected"===self.esStatus.toLowerCase()?self.esStatusClass="text-success":"error"===self.esStatus.toLowerCase()&&(self.esStatusClass="text-danger"),self.indexCount=data.status.indexCount.toLocaleString(),data.status.inSync?(self.inSyncText="In Sync",self.inSyncClass="bg-success"):(self.inSyncText="Out of Sync",self.inSyncClass="bg-warn"),data.status.isRebuilding?(setTimeout(self.getStatus,3e3),self.disableRebuild=!0):self.disableRebuild=!1})).catch((function(err){_this3.esStatus="Error",_this3.esStatusClass="text-danger",_this3.inSyncText="Unknown",_this3.inSyncClass="",err.error&&err.error.message?helpers_default().UI.showSnackbar("Error: "+err.error.message,!0):helpers_default().UI.showSnackbar("Error: An unknown error occurred. Check Console.",!0),logger.error(err)}))}},{key:"rebuildIndex",value:function(){var self=this;uikit_combined_min_default().modal.confirm("Are you sure you want to rebuild the index?",(function(){self.esStatus="Rebuilding...",self.inSyncText="Out of Sync",self.inSyncClass="bg-warn",self.indexCount=0,axios_default().get("/api/v2/es/rebuild").then((function(){self.esStatus="Rebuilding...",helpers_default().UI.showSnackbar("Rebuilding Index...",!1),self.disableRebuild=!0,setTimeout(self.getStatus,3e3)})).catch((function(err){logger.error("[trudesk:settings:es:RebuildIndex]",err),helpers_default().UI.showSnackbar("Error: An unknown error occurred. Check Console.",!0)}))}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"render",value:function(){var _this4=this;return react.createElement("div",{className:this.props.active?"":"hide"},react.createElement(Settings_SettingItem,{title:"Elasticsearch - Beta",subtitle:"Enable the Elasticsearch engine",component:react.createElement(Settings_EnableSwitch,{stateName:"elasticSearchEnabled",label:"Enable",checked:this.getSetting("elasticSearchEnabled"),onChange:function(e){return _this4.onEnableChanged(e)}})}),react.createElement(Settings_SettingItem,{title:"Connection Status",subtitle:"Current connection status to the Elasticsearch server.",component:react.createElement("h4",{className:"right mr-15 mt-15 ".concat(this.esStatusClass)},this.esStatus)}),react.createElement(Settings_SettingItem,{title:"Indexed Documents",subtitle:"Current count of indexed documents.",component:react.createElement("h4",{className:"right mr-15 mt-15"},this.indexCount)}),react.createElement(Settings_SettingItem,{title:"Index Status",subtitle:"Current status of the index. if the status is not green, the index may need rebuilding.",extraClass:this.inSyncClass,component:react.createElement("h4",{className:"right mr-15 mt-15"},this.inSyncText)}),react.createElement(Settings_SettingItem,{title:"Elasticsearch Server Configuration",tooltip:"Changing server settings will require a rebuild of the index and server restart.",subtitle:"The connection settings to the Elasticsearch server."},react.createElement("form",{onSubmit:function(e){return _this4.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Server"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",value:this.state.host,disabled:!this.getSetting("elasticSearchEnabled"),onChange:function(e){return _this4.onInputChanged(e,"host")}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Port"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",value:this.state.port,disabled:!this.getSetting("elasticSearchEnabled"),onChange:function(e){return _this4.onInputChanged(e,"port")}})),react.createElement("div",{className:"uk-clearfix"},react.createElement(components_Button,{text:"Apply",type:"submit",flat:!0,waves:!0,disabled:!this.getSetting("elasticSearchEnabled"),style:"success",extraClass:"uk-float-right"})))),react.createElement(Settings_SettingItem,{title:"Rebuild Index",subtitle:"Wipe index and rebuild",tooltip:"Rebuilding the index should only occur if the index is out of sync with the database, or has not been initialized. Rebuilding will take some time.",component:react.createElement(components_Button,{text:"Rebuild",flat:!1,waves:!0,style:"primary",extraClass:"right mt-8 mr-5",disabled:this.disableRebuild,onClick:this.rebuildIndex})}))}}])&&Elasticsearch_defineProperties(Constructor.prototype,protoProps),staticProps&&Elasticsearch_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ElasticsearchSettingsContainer}(react.Component),Elasticsearch_descriptor=Elasticsearch_applyDecoratedDescriptor(Elasticsearch_class2.prototype,"esStatus",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Not Configured"}}),Elasticsearch_descriptor2=Elasticsearch_applyDecoratedDescriptor(Elasticsearch_class2.prototype,"esStatusClass",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Elasticsearch_descriptor3=Elasticsearch_applyDecoratedDescriptor(Elasticsearch_class2.prototype,"indexCount",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Elasticsearch_descriptor4=Elasticsearch_applyDecoratedDescriptor(Elasticsearch_class2.prototype,"inSyncText",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Not Configured"}}),Elasticsearch_descriptor5=Elasticsearch_applyDecoratedDescriptor(Elasticsearch_class2.prototype,"inSyncClass",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Elasticsearch_descriptor6=Elasticsearch_applyDecoratedDescriptor(Elasticsearch_class2.prototype,"disableRebuild",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Elasticsearch_class=Elasticsearch_class2))||Elasticsearch_class;ElasticsearchSettingsContainer.propTypes={active:prop_types_default().bool.isRequired,settings:prop_types_default().object.isRequired,updateSetting:prop_types_default().func.isRequired,updateMultipleSettings:prop_types_default().func.isRequired};const Elasticsearch=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting,updateMultipleSettings:settings_updateMultipleSettings})(ElasticsearchSettingsContainer);function BackupRestore_typeof(obj){return BackupRestore_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},BackupRestore_typeof(obj)}function BackupRestore_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function BackupRestore_setPrototypeOf(o,p){return BackupRestore_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},BackupRestore_setPrototypeOf(o,p)}function BackupRestore_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=BackupRestore_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=BackupRestore_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return BackupRestore_possibleConstructorReturn(this,result)}}function BackupRestore_possibleConstructorReturn(self,call){if(call&&("object"===BackupRestore_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return BackupRestore_assertThisInitialized(self)}function BackupRestore_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function BackupRestore_getPrototypeOf(o){return BackupRestore_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},BackupRestore_getPrototypeOf(o)}var BackupRestoreSettingsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&BackupRestore_setPrototypeOf(subClass,superClass)}(BackupRestoreSettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=BackupRestore_createSuper(BackupRestoreSettingsContainer);function BackupRestoreSettingsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BackupRestoreSettingsContainer),(_this=_super.call(this,props)).initBackupUpload=_this.initBackupUpload.bind(BackupRestore_assertThisInitialized(_this)),_this}return Constructor=BackupRestoreSettingsContainer,protoProps=[{key:"componentDidMount",value:function(){this.props.fetchMongoDBTools(),this.props.fetchBackups(),this.props.fetchDeletedTickets()}},{key:"componentDidUpdate",value:function(prevProps){var _this2=this;if(this.initBackupUpload(),!this.deletedTicketsPagination){var $deletedTicketPagination=jquery_default()(".deletedTicketPagination");$deletedTicketPagination.length>0&&(this.deletedTicketsPagination=uikit_combined_min_default().pagination($deletedTicketPagination,{items:this.props.settings.deletedTicketsCount,itemsOnPage:15}),$deletedTicketPagination.on("select.uk.pagination",(function(e,pageIndex){_this2.props.changeDeletedTicketsPage(pageIndex)})))}prevProps.settings.deletedTicketsCount!==this.props.settings.deletedTicketsCount&&(this.deletedTicketsPagination.pages=Math.ceil(this.props.settings.deletedTicketsCount/15)?Math.ceil(this.props.settings.deletedTicketsCount/15):1,this.deletedTicketsPagination.render(),this.deletedTicketsPagination.currentPage>this.deletedTicketsPagination.pages-1&&this.deletedTicketsPagination.selectPage(this.deletedTicketsPagination.pages-1))}},{key:"componentWillUnmount",value:function(){this.deletedTicketsPagination&&(this.deletedTicketsPagination.element.off("select.uk.pagination"),this.deletedTicketsPagination=null)}},{key:"initBackupUpload",value:function(){var $progressBar=jquery_default()(this.backupUploadProgressbar),$uploadSelect=jquery_default()(this.backupUploadSelect),$uploadButton=jquery_default()(this.backupUploadBtn),bar=$progressBar.find(".uk-progress-bar");if(!($progressBar.length<1||$uploadSelect.length<1||$uploadButton.length<1)){var self=this,settings={action:"/api/v1/backup/upload",allow:"*.zip",type:"json",loadstart:function(){bar.css("width","0%").text("0%"),$progressBar.removeClass("hide"),$uploadButton.addClass("hide")},notallowed:function(){helpers_default().UI.showSnackbar("Invalid File Type. Please upload a Zip file.",!0)},error:function(err){logger.error(err),helpers_default().UI.showSnackbar("An unknown error occurred. Check Console",!0)},progress:function(percent){percent=Math.ceil(percent),bar.css("width",percent+"%").text(percent+"%")},allcomplete:function(response){logger.debug(response),response.success||helpers_default().UI.showSnackbar(response.error,!0),bar.css("width","100%").text("100%"),setTimeout((function(){$progressBar.addClass("hide"),$uploadButton.removeClass("hide"),$uploadSelect.val(null),self.props.fetchBackups(),helpers_default().UI.playSound("success")}),1500)}};uikit_combined_min_default().uploadSelect($uploadSelect,settings)}}},{key:"onBackupNowClicked",value:function(e){e.preventDefault(),this.props.backupNow()}},{key:"oneRestoreClicked",value:function(e,backup){var _this3=this;if(backup){var filename=backup.get("filename");uikit_combined_min_default().modal.confirm('<h2>Are you sure?</h2>\n        <p style="font-size: 15px;">\n            <span class="uk-text-danger" style="font-size: 15px;">This is a permanent action.</span> \n            This will earse the database and restore it with the selected backup file: <strong>'.concat(filename,'</strong>\n        </p>\n        <p style="font-size: 12px;">\n            Any users currently logged in will be presented with a blocking restore page. Preventing any further actions.\n            Once complete all users are required to log in again.</p><br />\n        <p style="font-size: 12px; font-style: italic;">\n            This process may take a while depending on the size of the backup.\n        </p>'),(function(){_this3.props.socket.emit(socketEventConsts.BACKUP_RESTORE_SHOW_OVERLAY),axios_default().post("/api/v1/backup/restore",{file:filename}).then((function(){helpers_default().UI.showSnackbar("Restore Complete. Logging all users out..."),setTimeout((function(){_this3.props.socket.emit(socketEventConsts.BACKUP_RESTORE_COMPLETE)}),2e3)})).catch((function(err){logger.error(err),helpers_default().UI.showSnackbar("An error occurred. Check console.",!0)}))}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}}},{key:"onDeleteBackupClicked",value:function(e,backup){var _this4=this;uikit_combined_min_default().modal.confirm('<h2 class="text-light">Are you sure?</h2>\n        <p style="font-size: 14px;">This action is permanent and will destroy the backup file: \n            <strong>'.concat(backup.get("filename"),"</strong>\n        </p>"),(function(){axios_default().delete("/api/v1/backup/".concat(backup.get("filename"))).then((function(res){res.data&&res.data.success?(_this4.props.fetchBackups(),helpers_default().UI.showSnackbar("Backup successfully deleted")):helpers_default().UI.showSnackbar("Unable to delete backup",!0)})).catch((function(err){logger.error(err),helpers_default().UI.showSnackbar("Error: ".concat(err.response.data.error),!0)}))}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"onRestoreTicketClicked",value:function(e,ticket){ticket&&this.props.restoreDeletedTicket({_id:ticket.get("_id")})}},{key:"onDeleteTicketClicked",value:function(e,ticket){ticket&&this.props.permDeleteTicket({_id:ticket.get("_id")})}},{key:"render",value:function(){var _this5=this,active=this.props.active;return react.createElement("div",{className:active?"active":"hide"},!this.props.settings.hasMongoDBTools&&react.createElement(Settings_SettingItem,{title:"MongoDB Tools Not Found",subtitle:"Unable to locate MongoDB tools. Please make sure MongoDB tools are installed."},react.createElement("div",null,react.createElement("h4",null,"Installing MongoDB Tools"),react.createElement("p",{style:{margin:"0 0 5px 0",fontSize:"13px"}},"MongoDB Tools are required to perform backup and restore. See below for instructions on installing MongoDB Tools."),react.createElement("h5",null,react.createElement("strong",null,"Ubuntu 18.04")),react.createElement("pre",{style:{whiteSpace:"pre-line"}},"sudo apt install -y mongo-tools"),react.createElement("br",null),react.createElement("h5",null,react.createElement("strong",null,"ArchLinux")),react.createElement("pre",{style:{whiteSpace:"pre-line"}},"yay -S mongodb-tools-bin"),react.createElement("br",null),react.createElement("h5",null,react.createElement("strong",null,"Fedora 29")),react.createElement("pre",null,"dnf install -y mongo-tools"),react.createElement("br",null),react.createElement("h5",null,react.createElement("strong",null,"Alpine Linux")),react.createElement("pre",null,"apk add mongodb-tools"))),this.props.settings.hasMongoDBTools&&react.createElement("div",null,react.createElement(Settings_SettingItem,{title:"Backup Now",subtitle:"Backup all site data. (Database, Attachments, Assets)",component:react.createElement("div",{className:"uk-float-right mt-10"},react.createElement("div",{className:"uk-progress uk-progress-success uk-progress-striped uk-active"+(this.props.settings.backingup?"":" hide "),style:{height:"31px",background:"transparent"}},react.createElement("div",{className:"uk-progress-bar uk-float-right",style:{width:"115px",fontSize:"11px",textTransform:"uppercase",lineHeight:"31px"}},"Please Wait...")),!this.props.settings.backingup&&react.createElement(components_Button,{text:"Backup Now",style:"success",small:!0,styleOverride:{width:"115px"},onClick:function(e){return _this5.onBackupNowClicked(e)}}))}),react.createElement(Settings_SettingItem,{title:"Backups",subtitle:"Currently stored backups",component:react.createElement("div",{className:"uk-float-right mt-10",style:{width:"85px"}},react.createElement("div",{className:"uk-progress hide",style:{height:"31px"},ref:function(i){return _this5.backupUploadProgressbar=i}},react.createElement("div",{className:"uk-progress-bar",style:{width:0,lineHeight:"31px",fontSize:"11px"}},"0%")),react.createElement("form",{className:"uk-form-stacked"},react.createElement("button",{className:"md-btn md-btn-small md-btn-primary uk-form-file no-ajaxy",style:{width:"85px"},ref:function(i){return _this5.backupUploadBtn=i}},"Upload",react.createElement("input",{ref:function(i){return _this5.backupUploadSelect=i},type:"file",name:"backupUploadSelect"}))))},this.props.settings.backups.size<1&&react.createElement(zone,null,react.createElement(components_ZoneBox,null,react.createElement("h2",{className:"uk-text-muted uk-text-center"},"No Backups"))),this.props.settings.backups.size>0&&react.createElement("table",{className:"uk-table mt-0"},react.createElement("thead",null,react.createElement("tr",null,react.createElement("th",null,"Filename"),react.createElement("th",null,"Size"),react.createElement("th",null))),react.createElement("tbody",null,this.props.settings.backups.map((function(backup){return react.createElement("tr",{key:backup.get("filename")},react.createElement("td",{className:"valign-middle",style:{width:"60%",height:"60px"}},backup.get("filename")),react.createElement("td",{className:"valign-middle"},backup.get("sizeFormat")),react.createElement("td",{className:"uk-text-right valign-middle"},react.createElement(components_ButtonGroup,null,react.createElement("a",{href:"/backups/".concat(backup.get("filename")),className:"md-btn md-btn-small md-btn-wave no-ajaxy",download:backup.get("filename")},"download"),react.createElement(components_Button,{text:"Restore",small:!0,waves:!0,onClick:function(e){return _this5.oneRestoreClicked(e,backup)}}),react.createElement(components_Button,{text:"Delete",small:!0,style:"danger",waves:!0,onClick:function(e){return _this5.onDeleteBackupClicked(e,backup)}}))))})))))),react.createElement(Settings_SettingItem,{title:"Deleted Tickets",subtitle:"Tickets marked as deleted are shown below."},this.props.settings.deletedTickets.size<1&&react.createElement(zone,null,react.createElement(components_ZoneBox,null,react.createElement("h2",{className:"uk-text-muted uk-text-center"},"No Deleted Tickets"))),this.props.settings.deletedTickets.size>0&&react.createElement("div",null,react.createElement("table",{className:"uk-table mt-0 mb-5"},react.createElement("thead",null,react.createElement("tr",null,react.createElement("th",null,"UID"),react.createElement("th",null,"Subject"),react.createElement("th",null,"Group"),react.createElement("th",null,"Date"),react.createElement("th",null))),react.createElement("tbody",null,this.props.settings.deletedTickets.map((function(ticket){return react.createElement("tr",{key:ticket.get("_id")},react.createElement("td",{className:"valign-middle",style:{width:"10%",height:"60px"}},ticket.get("uid")),react.createElement("td",{className:"valign-middle",style:{width:"30%"}},ticket.get("subject")),react.createElement("td",{className:"valign-middle",style:{width:"30%"}},ticket.getIn(["group","name"])),react.createElement("td",{className:"valign-middle",style:{width:"30%"}},ticket.get("date")),react.createElement("td",{className:"uk-text-right valign-middle"},react.createElement(components_ButtonGroup,null,react.createElement(components_Button,{text:"Delete",style:"danger",small:!0,waves:!0,onClick:function(e){return _this5.onDeleteTicketClicked(e,ticket)}}),react.createElement(components_Button,{text:"Restore",small:!0,waves:!0,onClick:function(e){return _this5.onRestoreTicketClicked(e,ticket)}}))))})))),react.createElement("div",{className:"uk-pagination deletedTicketPagination"}))))}}],protoProps&&BackupRestore_defineProperties(Constructor.prototype,protoProps),staticProps&&BackupRestore_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),BackupRestoreSettingsContainer}(react.Component);BackupRestoreSettingsContainer.propTypes={socket:prop_types_default().object.isRequired,active:prop_types_default().bool.isRequired,fetchMongoDBTools:prop_types_default().func.isRequired,fetchBackups:prop_types_default().func.isRequired,fetchDeletedTickets:prop_types_default().func.isRequired,changeDeletedTicketsPage:prop_types_default().func.isRequired,backupNow:prop_types_default().func.isRequired,restoreDeletedTicket:prop_types_default().func.isRequired,permDeleteTicket:prop_types_default().func.isRequired,settings:prop_types_default().object.isRequired};const BackupRestore=(0,es.$j)((function(state){return{socket:state.shared.socket,settings:state.settings}}),{fetchBackups:settings_fetchBackups,fetchMongoDBTools,backupNow:settings_backupNow,fetchDeletedTickets:settings_fetchDeletedTickets,restoreDeletedTicket:settings_restoreDeletedTicket,permDeleteTicket:settings_permDeleteTicket,changeDeletedTicketsPage})(BackupRestoreSettingsContainer);function Server_typeof(obj){return Server_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Server_typeof(obj)}var Server_class,Server_class2,Server_descriptor;function Server_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Server_setPrototypeOf(o,p){return Server_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Server_setPrototypeOf(o,p)}function Server_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Server_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Server_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Server_possibleConstructorReturn(this,result)}}function Server_possibleConstructorReturn(self,call){if(call&&("object"===Server_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Server_assertThisInitialized(self)}function Server_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Server_getPrototypeOf(o){return Server_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Server_getPrototypeOf(o)}var ServerSettingsController=(0,mobxreact_esm.Pi)((Server_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Server_setPrototypeOf(subClass,superClass)}(ServerSettingsController,_React$Component);var Constructor,protoProps,staticProps,_super=Server_createSuper(ServerSettingsController);function ServerSettingsController(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ServerSettingsController),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"maintenanceModeEnabled",Server_descriptor,Server_assertThisInitialized(_this)),(0,mobx_esm.rC)(Server_assertThisInitialized(_this)),_this.state={restarting:!1},_this.restartServer=_this.restartServer.bind(Server_assertThisInitialized(_this)),_this}return Constructor=ServerSettingsController,protoProps=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(prevProps){prevProps.settings!==this.props.settings&&this.maintenanceModeEnabled!==this.getSetting("maintenanceMode")&&(this.maintenanceModeEnabled=this.getSetting("maintenanceMode"))}},{key:"restartServer",value:function(){var _this2=this;this.setState({restarting:!0});var token=document.querySelector('meta[name="csrf-token"]').getAttribute("content");axios_default().post("/api/v1/admin/restart",{},{headers:{"CSRF-TOKEN":token}}).catch((function(error){helpers_default().hideLoader(),logger.error(error.responseText),logger.error("Unable to restart server. Server must run under PM2 and Account must have admin rights."),helpers_default().UI.showSnackbar("Unable to restart server. Are you an Administrator?",!0)})).then((function(){_this2.setState({restarting:!1})}))}},{key:"getSetting",value:function(stateName){return this.props.settings.getIn(["settings",stateName,"value"])?this.props.settings.getIn(["settings",stateName,"value"]):""}},{key:"onMaintenanceModeChange",value:function(e){var _this3=this,self=this,val=e.target.checked;!0===val?uikit_combined_min_default().modal.confirm('<h2>Are you sure?</h2>\n        <p style="font-size: 15px;">\n            <span class="uk-text-danger" style="font-size: 15px;">This will force logout every user and prevent non-administrators from logging in.</span> \n        </p>\n        ',(function(){_this3.props.updateSetting({name:"maintenanceMode:enable",value:val,stateName:"maintenanceMode",noSnackbar:!0}).then((function(){self.maintenanceModeEnabled=val}))}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"}):this.props.updateSetting({name:"maintenanceMode:enable",value:val,stateName:"maintenanceMode",noSnackbar:!0}).then((function(){self.maintenanceModeEnabled=val}))}},{key:"render",value:function(){var _this4=this,active=this.props.active;return react.createElement("div",{className:active?"active":"hide"},react.createElement(Settings_SettingItem,{title:"Restart Server",subtitle:"Restart the Trudesk Instance. ",component:react.createElement(components_Button,{text:"Restart",flat:!1,waves:!0,style:"danger",extraClass:"right mt-8 mr-5",onClick:this.restartServer,disabled:this.state.restarting})}),react.createElement(Settings_SettingItem,{title:"Maintenance Mode",subtitle:"Only Administrators are allowed to login.",component:react.createElement(Settings_EnableSwitch,{stateName:"maintenanceMode",label:"Enable",checked:this.maintenanceModeEnabled,onChange:function(e){return _this4.onMaintenanceModeChange(e)}})}))}}],protoProps&&Server_defineProperties(Constructor.prototype,protoProps),staticProps&&Server_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ServerSettingsController}(react.Component),Server_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(Server_class2.prototype,"maintenanceModeEnabled",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Server_class=Server_class2))||Server_class;ServerSettingsController.propTypes={active:prop_types_default().bool.isRequired,updateSetting:prop_types_default().func.isRequired,updateMultipleSettings:prop_types_default().func.isRequired,settings:prop_types_default().object.isRequired};const Server=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting,updateMultipleSettings:settings_updateMultipleSettings})(ServerSettingsController);function Legal_typeof(obj){return Legal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Legal_typeof(obj)}function Legal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Legal_setPrototypeOf(o,p){return Legal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Legal_setPrototypeOf(o,p)}function Legal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Legal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Legal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Legal_possibleConstructorReturn(this,result)}}function Legal_possibleConstructorReturn(self,call){if(call&&("object"===Legal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Legal_getPrototypeOf(o){return Legal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Legal_getPrototypeOf(o)}var LegalSettingsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Legal_setPrototypeOf(subClass,superClass)}(LegalSettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Legal_createSuper(LegalSettingsContainer);function LegalSettingsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LegalSettingsContainer),(_this=_super.call(this,props)).state={privacyPolicy:""},_this}return Constructor=LegalSettingsContainer,(protoProps=[{key:"getSetting",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"onSavePrivacyPolicyClicked",value:function(e){e.preventDefault(),console.log(this.state.privacyPolicy),this.props.updateSetting({stateName:"privacyPolicy",name:"legal:privacypolicy",value:this.state.privacyPolicy,noSnackbar:!0}).then((function(){helpers_default().UI.showSnackbar("Privacy Policy Updated")}))}},{key:"render",value:function(){var _this2=this,active=this.props.active;return react.createElement("div",{className:active?"":"hide"},react.createElement(Settings_SettingItem,{title:"Privacy Policy",subtitle:"Paste in HTML/Text of your privacy policy."},react.createElement("div",null,react.createElement(components_EasyMDE,{defaultValue:this.getSetting("privacyPolicy"),onChange:function(v){return _this2.setState({privacyPolicy:v})}})),react.createElement("div",{className:"uk-clearfix"},react.createElement(components_Button,{text:"Save",extraClass:"uk-float-right",flat:!0,style:"success",waves:!0,onClick:function(e){return _this2.onSavePrivacyPolicyClicked(e)}}))))}}])&&Legal_defineProperties(Constructor.prototype,protoProps),staticProps&&Legal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),LegalSettingsContainer}(react.Component);LegalSettingsContainer.propTypes={active:prop_types_default().bool,settings:prop_types_default().object.isRequired,updateSetting:prop_types_default().func.isRequired};const Legal=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting})(LegalSettingsContainer);function SettingsContainer_typeof(obj){return SettingsContainer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SettingsContainer_typeof(obj)}function SettingsContainer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SettingsContainer_setPrototypeOf(o,p){return SettingsContainer_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},SettingsContainer_setPrototypeOf(o,p)}function SettingsContainer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SettingsContainer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SettingsContainer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SettingsContainer_possibleConstructorReturn(this,result)}}function SettingsContainer_possibleConstructorReturn(self,call){if(call&&("object"===SettingsContainer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SettingsContainer_getPrototypeOf(o){return SettingsContainer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},SettingsContainer_getPrototypeOf(o)}var SettingsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SettingsContainer_setPrototypeOf(subClass,superClass)}(SettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=SettingsContainer_createSuper(SettingsContainer);function SettingsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SettingsContainer),(_this=_super.call(this,props)).state={title:"Settings",activeCategory:"settings-general"},_this}return Constructor=SettingsContainer,(protoProps=[{key:"componentDidMount",value:function(){var location=window.location.pathname.replace(/^(\/settings(\/?))/,"");location&&this.setState({activeCategory:"settings-"+location}),this.props.fetchSettings(),helpers_default().resizeAll()}},{key:"onMenuItemClick",value:function(e,category){var _this2=this;this.state.activeCategory!=="settings-"+category&&this.setState({activeCategory:"settings-"+category},(function(){_this2.page&&(_this2.page.scrollTop=0)}))}},{key:"render",value:function(){var _this3=this;return react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"uk-width-1-6 uk-width-xLarge-1-10 message-list full-height","data-offset":"68"},react.createElement("div",{className:"page-title noshadow nopadding-right",style:{borderTop:"none",borderBottom:"none",height:"68px",paddingLeft:"20px"}},react.createElement("div",{style:{position:"relative"}},react.createElement("p",{style:{fontSize:"24px"}},this.state.title))),react.createElement("div",{className:"page-content-left noborder full-height"},react.createElement(Settings_Menu,null,react.createElement(Settings_MenuItem,{title:"General",active:"settings-general"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"general")}}),react.createElement(Settings_MenuItem,{title:"Accounts",active:"settings-accounts"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"accounts")}}),react.createElement(Settings_MenuItem,{title:"Appearance",active:"settings-appearance"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"appearance")}}),react.createElement(Settings_MenuItem,{title:"Permissions",active:"settings-permissions"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"permissions")}}),react.createElement(Settings_MenuItem,{title:"Tickets",active:"settings-tickets"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"tickets")}}),react.createElement(Settings_MenuItem,{title:"Mailer",active:"settings-mailer"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"mailer")}}),react.createElement(Settings_MenuItem,{title:"Elasticsearch",active:"settings-elasticsearch"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"elasticsearch")}}),react.createElement(Settings_MenuItem,{title:"Backup/Restore",active:"settings-backup"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"backup")}}),react.createElement(Settings_MenuItem,{title:"Server",active:"settings-server"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"server")}}),react.createElement(Settings_MenuItem,{title:"Legal",active:"settings-legal"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"legal")}})))),react.createElement("div",{className:"uk-width-5-6 uk-width-xLarge-9-10"},react.createElement("div",{className:"page-title-right noshadow page-title-border-bottom",style:{borderTop:"none",height:"69px"}}),react.createElement("div",{className:"page-wrapper full-height scrollable no-overflow-x",ref:function(i){return _this3.page=i}},react.createElement("div",{className:"settings-wrap"},react.createElement(General,{active:"settings-general"===this.state.activeCategory}),react.createElement(Accounts,{active:"settings-accounts"===this.state.activeCategory}),react.createElement(Appearance,{active:"settings-appearance"===this.state.activeCategory}),react.createElement(Permissions,{active:"settings-permissions"===this.state.activeCategory}),react.createElement(Tickets,{active:"settings-tickets"===this.state.activeCategory}),react.createElement(Mailer,{active:"settings-mailer"===this.state.activeCategory}),react.createElement(Elasticsearch,{active:"settings-elasticsearch"===this.state.activeCategory}),react.createElement(BackupRestore,{active:"settings-backup"===this.state.activeCategory}),react.createElement(Server,{active:"settings-server"===this.state.activeCategory}),react.createElement(Legal,{active:"settings-legal"===this.state.activeCategory})))))}}])&&SettingsContainer_defineProperties(Constructor.prototype,protoProps),staticProps&&SettingsContainer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SettingsContainer}(react.Component);SettingsContainer.propTypes={fetchSettings:prop_types_default().func.isRequired,sidebar:prop_types_default().object.isRequired};const Settings_SettingsContainer=(0,es.$j)((function(state){return{sidebar:state.sidebar}}),{fetchSettings:settings_fetchSettings})(SettingsContainer);function DropdownHeader_typeof(obj){return DropdownHeader_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DropdownHeader_typeof(obj)}function DropdownHeader_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DropdownHeader_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DropdownHeader_setPrototypeOf(o,p){return DropdownHeader_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},DropdownHeader_setPrototypeOf(o,p)}function DropdownHeader_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DropdownHeader_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DropdownHeader_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DropdownHeader_possibleConstructorReturn(this,result)}}function DropdownHeader_possibleConstructorReturn(self,call){if(call&&("object"===DropdownHeader_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DropdownHeader_getPrototypeOf(o){return DropdownHeader_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},DropdownHeader_getPrototypeOf(o)}var DropdownHeader=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DropdownHeader_setPrototypeOf(subClass,superClass)}(DropdownHeader,_React$Component);var Constructor,protoProps,staticProps,_super=DropdownHeader_createSuper(DropdownHeader);function DropdownHeader(){return DropdownHeader_classCallCheck(this,DropdownHeader),_super.apply(this,arguments)}return Constructor=DropdownHeader,(protoProps=[{key:"render",value:function(){return react.createElement("li",{className:"uk-nav-header"},this.props.text)}}])&&DropdownHeader_defineProperties(Constructor.prototype,protoProps),staticProps&&DropdownHeader_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DropdownHeader}(react.Component);DropdownHeader.propTypes={text:prop_types_default().string.isRequired};var containers_Accounts_class,containers_Accounts_class2,containers_Accounts_descriptor,containers_Accounts_descriptor2,Accounts_descriptor3,react_infinite_scroller=__webpack_require__(795),react_infinite_scroller_default=__webpack_require__.n(react_infinite_scroller);function containers_Accounts_typeof(obj){return containers_Accounts_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},containers_Accounts_typeof(obj)}function containers_Accounts_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function containers_Accounts_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function containers_Accounts_setPrototypeOf(o,p){return containers_Accounts_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},containers_Accounts_setPrototypeOf(o,p)}function containers_Accounts_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=containers_Accounts_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=containers_Accounts_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return containers_Accounts_possibleConstructorReturn(this,result)}}function containers_Accounts_possibleConstructorReturn(self,call){if(call&&("object"===containers_Accounts_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return containers_Accounts_assertThisInitialized(self)}function containers_Accounts_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function containers_Accounts_getPrototypeOf(o){return containers_Accounts_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},containers_Accounts_getPrototypeOf(o)}function containers_Accounts_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var AccountsContainer=(0,mobxreact_esm.Pi)((containers_Accounts_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&containers_Accounts_setPrototypeOf(subClass,superClass)}(AccountsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=containers_Accounts_createSuper(AccountsContainer);function AccountsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AccountsContainer),containers_Accounts_initializerDefineProperty(_this=_super.call(this,props),"initialLoad",containers_Accounts_descriptor,containers_Accounts_assertThisInitialized(_this)),containers_Accounts_initializerDefineProperty(_this,"hasMore",containers_Accounts_descriptor2,containers_Accounts_assertThisInitialized(_this)),containers_Accounts_initializerDefineProperty(_this,"pageStart",Accounts_descriptor3,containers_Accounts_assertThisInitialized(_this)),(0,mobx_esm.rC)(containers_Accounts_assertThisInitialized(_this)),_this.getUsersWithPage=_this.getUsersWithPage.bind(containers_Accounts_assertThisInitialized(_this)),_this}return Constructor=AccountsContainer,(protoProps=[{key:"componentDidMount",value:function(){this.initialLoad=!1}},{key:"componentDidUpdate",value:function(){helpers_default().resizeFullHeight()}},{key:"componentWillUnmount",value:function(){this.props.unloadAccounts()}},{key:"onEditAccountClicked",value:function(e,user){e.preventDefault(e);var canEditAccount=helpers_default().hasHierarchyOverRole(user.getIn(["role","_id"]));this.props.showModal("EDIT_ACCOUNT",{edit:canEditAccount,user:user.toJS(),roles:this.props.common.roles,groups:this.props.common.groups})}},{key:"onDeleteAccountClicked",value:function(e,user){e.preventDefault(),this.props.deleteAccount({username:user.get("username")})}},{key:"onEnableAccountClicked",value:function(e,user){e.preventDefault(),this.props.enableAccount({username:user.get("username")})}},{key:"getUsersWithPage",value:function(page){var _this2=this;this.hasMore=!1,this.props.fetchAccounts({page,limit:25,type:this.props.view,showDeleted:!0}).then((function(_ref){var response=_ref.response;_this2.hasMore=response.count>=25}))}},{key:"onSearchKeyUp",value:function(e){var _this3=this,keyCode=e.keyCode||e.which,search=e.target.value;13===keyCode&&(search.length>2?this.props.unloadAccounts().then((function(){_this3.hasMore=!1,_this3.props.fetchAccounts({limit:-1,search}).then((function(_ref2){var response=_ref2.response;_this3.pageStart=-1,_this3.hasMore=response.count>=25}))})):0===search.length&&this.props.unloadAccounts().then((function(){_this3.pageStart=-1,_this3.getUsersWithPage(0)})))}},{key:"render",value:function(){var _this4=this,items=this.props.accountsState.accounts&&this.props.accountsState.accounts.map((function(user){var userImage=user.get("image")||"defaultProfile.jpg",actionMenu=[react.createElement(Dropdown_DropdownItem,{key:0,text:"Edit",onClick:function(e){return _this4.onEditAccountClicked(e,user)}})];user.get("deleted")?actionMenu.push(react.createElement(Dropdown_DropdownItem,{key:2,text:"Enable",onClick:function(e){return _this4.onEnableAccountClicked(e,user)}})):actionMenu.push(react.createElement(Dropdown_DropdownItem,{key:1,text:"Delete",extraClass:"uk-text-danger",onClick:function(e){return _this4.onDeleteAccountClicked(e,user)}}));var isAdmin=user.getIn(["role","isAdmin"])||!1,isAgent=user.getIn(["role","isAgent"])||!1,customer=!isAdmin&&!isAgent,isDeleted=user.get("deleted")||!1;return react.createElement(Grid_GridItem,{key:user.get("_id"),width:"1-5",xLargeWidth:"1-6",extraClass:"mb-25"},react.createElement(components_TruCard,{loaderActive:user.get("loading"),menu:actionMenu,extraHeadClass:(isAdmin?"tru-card-head-admin":"")+(!isAdmin&&isAgent?"tru-card-head-agent":"")+(isDeleted?" tru-card-head-deleted":""),header:react.createElement("div",null,react.createElement("div",{className:"account-image relative uk-display-inline-block"},react.createElement(Avatar_Avatar,{size:82,userId:user.get("_id"),image:userImage,style:{marginTop:10},showBorder:!0,borderColor:"#ffffff",showLargerBubble:!0})),react.createElement("h3",{className:"tru-card-head-text uk-text-center"},user.get("fullname"),react.createElement("span",{className:"uk-text-truncate"},user.get("title")))),content:react.createElement("ul",{className:"tru-list"},react.createElement("li",null,react.createElement("div",{className:"tru-list-content"},react.createElement("span",{className:"tru-list-heading"},"Role"),react.createElement("span",{className:"uk-text-small uk-text-muted"},user.getIn(["role","name"])))),react.createElement("li",null,react.createElement("div",{className:"tru-list-content"},react.createElement("span",{className:"tru-list-heading"},"Email"),react.createElement("span",{className:"uk-text-small uk-text-muted"},react.createElement("a",{href:"mailto:".concat(user.get("email"))},user.get("email"))))),react.createElement("li",null,customer&&user.get("groups")&&react.createElement("div",{className:"tru-list-content"},react.createElement("span",{className:"tru-list-heading"},"Groups"),react.createElement("span",{className:"uk-text-small uk-text-muted uk-text-truncate"},user.get("groups").map((function(group){return group.get("name")+(user.get("groups").toArray().length>1?", ":"")})))),!customer&&user.get("teams")&&react.createElement("div",{className:"tru-list-content"},react.createElement("span",{className:"tru-list-heading"},"Teams"),react.createElement("span",{className:"uk-text-small uk-text-muted uk-text-truncate"},user.get("teams").map((function(team){return team.get("name")+(user.get("teams").toArray().length>1?", ":"")}))))),!customer&&user.get("departments")&&react.createElement("li",null,react.createElement("div",{className:"tru-list-content"},react.createElement("span",{className:"tru-list-heading"},"Departments"),react.createElement("span",{className:"uk-text-small uk-text-muted uk-text-truncate"},user.get("departments").map((function(department){return department.get("name")+(user.get("departments").toArray().length>1?", ":"")}))))))}))}));return react.createElement("div",null,react.createElement(components_PageTitle,{title:this.props.title,rightComponent:react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"uk-width-1-4 uk-push-3-4 mt-15 pr-20 uk-clearfix"},react.createElement(components_ButtonGroup,{classNames:"uk-clearfix uk-float-right"},react.createElement(components_Button,{text:"Create",hasDropdown:!1,flat:!1,small:!0,waves:!1,extraClass:"hover-accent",onClick:function(){return _this4.props.showModal("CREATE_ACCOUNT")}}))))}),react.createElement(components_PageContent,{id:"accounts-page-content"},react.createElement(react_infinite_scroller_default(),{pageStart:this.pageStart,loadMore:this.getUsersWithPage,hasMore:this.hasMore,initialLoad:this.initialLoad,threshold:25,loader:react.createElement("div",{className:"uk-width-1-1 uk-text-center",key:0},react.createElement("i",{className:"uk-icon-refresh uk-icon-spin"})),useWindow:!1,getScrollParent:function(){return document.getElementById("accounts-page-content")}},react.createElement(components_Grid,{gutterSize:"medium"},items))))}}])&&containers_Accounts_defineProperties(Constructor.prototype,protoProps),staticProps&&containers_Accounts_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AccountsContainer}(react.Component),containers_Accounts_descriptor=containers_Accounts_applyDecoratedDescriptor(containers_Accounts_class2.prototype,"initialLoad",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),containers_Accounts_descriptor2=containers_Accounts_applyDecoratedDescriptor(containers_Accounts_class2.prototype,"hasMore",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Accounts_descriptor3=containers_Accounts_applyDecoratedDescriptor(containers_Accounts_class2.prototype,"pageStart",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),containers_Accounts_class=containers_Accounts_class2))||containers_Accounts_class;AccountsContainer.propTypes={title:prop_types_default().string.isRequired,view:prop_types_default().string.isRequired,fetchAccounts:prop_types_default().func.isRequired,deleteAccount:prop_types_default().func.isRequired,enableAccount:prop_types_default().func.isRequired,unloadAccounts:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired,common:prop_types_default().object.isRequired,shared:prop_types_default().object.isRequired,accountsState:prop_types_default().object.isRequired},AccountsContainer.defaultProps={title:"Accounts",view:"customers"};const containers_Accounts=(0,es.$j)((function(state){return{shared:state.shared,accountsState:state.accountsState,common:state.common}}),{fetchAccounts:accounts_fetchAccounts,deleteAccount:accounts_deleteAccount,enableAccount:accounts_enableAccount,unloadAccounts,showModal})(AccountsContainer);__webpack_require__(796),__webpack_require__(797);function StepWizard_typeof(obj){return StepWizard_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},StepWizard_typeof(obj)}function StepWizard_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function StepWizard_setPrototypeOf(o,p){return StepWizard_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},StepWizard_setPrototypeOf(o,p)}function StepWizard_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=StepWizard_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=StepWizard_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return StepWizard_possibleConstructorReturn(this,result)}}function StepWizard_possibleConstructorReturn(self,call){if(call&&("object"===StepWizard_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return StepWizard_assertThisInitialized(self)}function StepWizard_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function StepWizard_getPrototypeOf(o){return StepWizard_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},StepWizard_getPrototypeOf(o)}var StepWizard=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&StepWizard_setPrototypeOf(subClass,superClass)}(StepWizard,_React$Component);var Constructor,protoProps,staticProps,_super=StepWizard_createSuper(StepWizard);function StepWizard(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StepWizard),(_this=_super.call(this,props)).onImportStatusChange=function(data){console.log(data)},_this.init=function(){if(_this.wizard.current){var wizard=jquery_default()(_this.wizard.current);wizard.steps({headerTag:"h3",bodyTag:"section",transitionEffect:"slideLeft",trigger:"change",cssClass:"wizard wizard-green",onInit:function(event,currentIndex){_this.setContentHeight(wizard,currentIndex),wizard.find(".button_next").addClass("disabled").attr("aria-disabled",!0).find("a").attr("disabled",!0),setTimeout((function(){jquery_default()(window).resize()}),100)},onStepChanging:function(event,currentIndex,newIndex){return!(0===currentIndex&&1===newIndex&&!_this.hasUploaded)},onStepChanged:function(event,currentIndex){2===currentIndex&&(wizard.find(".steps ul li").each((function(){jquery_default()(StepWizard_assertThisInitialized(_this)).addClass("disabled")})),wizard.find(".actions ul li").addClass("disabled"),wizard.find(".button_previous").addClass("disabled").attr("aria-disabled",!0),jquery_default()(_this.statusBox.current).find("ul").append("<li>Starting Import...</li>"),_this.disableUIElements(),setTimeout((function(){_this.props.socket.emit("$trudesk:accounts:importer:send_csv")}),1e3));jquery_default()(".steps .current").nextAll().removeClass("done").addClass("disabled"),_this.setContentHeight(wizard,currentIndex)},onFinished:function(){console.log("DONE")}});var progressbar=wizard.find("#progressbar"),bar=progressbar.find(".uk-progress-bar"),self=StepWizard_assertThisInitialized(_this),settings={action:"/accounts/import/csv/upload",allow:"*.csv",loadstart:function(){bar.css("width","0%").text("0%"),progressbar.removeClass("uk-hidden")},progress:function(percent){percent=Math.ceil(percent),bar.css("width",percent+"%").text(percent+"%")},notallowed:function(){helpers_default().UI.showSnackbar("Invalid File Type. Please upload a CSV file.",!0)},error:function(err){console.error(err),helpers_default().UI.showSnackbar("An unknown error occurred. Check Console",!0)},allcomplete:function(response){if(!(response=JSON.parse(response)).success)return console.log(response),helpers_default().UI.showSnackbar("An Error occurred. Check Console",!0),!1;self.hasUploaded=!0,self.addedUsers=response.addedUsers,self.updatedUsers=response.updatedUsers,wizard.find(".review-list").val(self.reviewRender(response.addedUsers,response.updatedUsers)),bar.css("width","100%").text("100%"),setTimeout((function(){progressbar.addClass("uk-hidden"),wizard.steps("setStep",1)}),1e3)}};uikit_combined_min_default().uploadSelect(wizard.find("#upload-select"),settings),uikit_combined_min_default().uploadDrop(wizard.find("#upload-drop"),settings)}},_this.show=function(){_this.container.current&&_this.container.current.classList.remove("uk-hidden")},_this.hide=function(){_this.container.current&&_this.container.current.classList.add("uk-hidden")},_this.onCancelClicked=function(e){"function"==typeof _this.props.onCancelClicked&&_this.props.onCancelClicked(e)},_this.disableUIElements=function(){jquery_default()(".sidebar").css({width:0}),jquery_default()(".side-nav-bottom-panel").css({width:0}),jquery_default()("#page-content").css({marginLeft:0}),jquery_default()(".top-menu").css({display:"none"}),jquery_default()(".js-wizard-select-wrapper").css({display:"none"}),jquery_default()(".js-wizard-cancel").css({display:"none"})},_this.hasUploaded=!1,_this.container=(0,react.createRef)(),_this.wizard=(0,react.createRef)(),_this.statusBox=(0,react.createRef)(),_this.init=_this.init.bind(StepWizard_assertThisInitialized(_this)),_this.show=_this.show.bind(StepWizard_assertThisInitialized(_this)),_this.hide=_this.hide.bind(StepWizard_assertThisInitialized(_this)),_this.onImportStatusChange=_this.onImportStatusChange.bind(StepWizard_assertThisInitialized(_this)),_this}return Constructor=StepWizard,(protoProps=[{key:"componentDidMount",value:function(){this.init(),this.props.socket.on("$trudesk:accounts:import:onStatusChange",this.onImportStatusChange)}},{key:"componentWillUnmount",value:function(){this.props.socket.removeAllListeners("$trudesk:accounts:import:onStatusChange")}},{key:"setContentHeight",value:function(thisWizard,step){var thisHeight=jquery_default()(thisWizard).find(".step-"+step).actual("outerHeight");jquery_default()(thisWizard).children(".content").velocity({height:thisHeight},{duration:140,easing:[.215,.61,.355,1]})}},{key:"reviewRender",value:function(addedUsers,updatedUsers){var addedUsersTemplate=[],updatedUsersTemplate=[];null===addedUsers&&(addedUsers=[]),null===updatedUsers&&(updatedUsers=[]);for(var i=0;i<addedUsers.length;i++)addedUsersTemplate.push(addedUsers[i].username+" | action=add username="+addedUsers[i].username+" name="+addedUsers[i].fullname+" email="+addedUsers[i].email+" title="+addedUsers[i].title);for(var k=0;k<updatedUsers.length;k++)updatedUsersTemplate.push(updatedUsers[k].username+" | action=update username="+updatedUsers[k].username+" name="+updatedUsers[k].fullname+" email="+updatedUsers[k].email+" title="+updatedUsers[k].title);var sep=[];return addedUsersTemplate.length>0&&sep.push("----------------"),(0,lodash.union)(addedUsersTemplate,sep,updatedUsersTemplate).join("\r")}},{key:"render",value:function(){var _this2=this,_this$props=this.props,title=_this$props.title,subtitle=_this$props.subtitle,cancelButtonText=_this$props.cancelButtonText;return react.createElement("div",{ref:this.container,className:"uk-grid uk-margin-small-bottom uk-hidden"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("div",{className:"panel trupanel nopadding no-hover-shadow",style:{position:"relative",minHeight:265}},react.createElement("div",{className:"left"},react.createElement("h6",{style:{padding:"10px 0 0 15px",margin:0,fontSize:16}},title),react.createElement("h5",{style:{padding:"0 0 10px 15px",margin:"-2px 0 0 0",fontSize:12},className:"uk-text-muted"},subtitle)),react.createElement("div",{className:"right",style:{margin:15}},react.createElement("button",{className:"btn md-btn md-btn-warning js-wizard-cancel",onClick:function(e){return _this2.onCancelClicked(e)}},cancelButtonText)),react.createElement("hr",{className:"nomargin"}),react.createElement("form",{className:"uk-form-stacked",id:"wizard_csv_form"},react.createElement("div",{ref:this.wizard},react.createElement("h3",null,"File Upload"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz"},"File Upload",react.createElement("span",{className:"sub-heading"},"Upload csv file containing user data to import.")),react.createElement("hr",{className:"md-hr"}),react.createElement("div",{id:"upload-drop",className:"uk-file-upload"},react.createElement("p",{className:"uk-text"},"Drop file to upload"),react.createElement("p",{className:"uk-text-muted uk-text-small uk-margin-small-bottom"},"or"),react.createElement("button",{className:"uk-form-file md-btn"},"choose file",react.createElement("input",{type:"file",id:"upload-select"}))),react.createElement("div",{id:"progressbar",className:"uk-progress uk-active uk-progress-success uk-hidden"},react.createElement("div",{className:"uk-progress-bar",style:{width:0}}))),react.createElement("h3",null,"Review Uploaded Data"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz"},"Review Uploaded Data",react.createElement("span",{className:"sub-heading"},"Below is the parsed contents of the uploaded csv file.")),react.createElement("textarea",{className:"review-list",disabled:!0})),react.createElement("h3",null,"Import Accounts"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz uk-margin-medium-bottom"},"Importing Accounts..",react.createElement("span",{className:"sub-heading"},"Please wait while your accounts are imported.",react.createElement("br",null),react.createElement("em",null,"Please do not navigate away from this page. Some UI Elements have been disabled."))),react.createElement("div",{ref:this.statusBox,style:{width:"100%",height:300,border:"1px solid #ccc",overflow:"auto",padding:10}},react.createElement("ul",null)),react.createElement("br",null),react.createElement("div",{className:"js-csv-progress uk-progress uk-progress-striped uk-active uk-progress-success",style:{marginBottom:0,boxShadow:"inset 0 0 0 1px rgba(0, 0, 0,.06)",background:"#f4f4f4"}},react.createElement("div",{className:"uk-progress-bar",style:{width:0}}))))))))}}])&&StepWizard_defineProperties(Constructor.prototype,protoProps),staticProps&&StepWizard_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),StepWizard}(react.Component);StepWizard.propTypes={socket:prop_types_default().object.isRequired,title:prop_types_default().string.isRequired,subtitle:prop_types_default().string.isRequired,cancelButtonText:prop_types_default().string,onCancelClicked:prop_types_default().func},StepWizard.defaultProps={cancelButtonText:"Cancel",onCancelClicked:function(){}};const components_StepWizard=(0,es.$j)((function(state){return{socket:state.shared.socket}}),{})(StepWizard);function AccountsImport_typeof(obj){return AccountsImport_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},AccountsImport_typeof(obj)}function AccountsImport_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function AccountsImport_setPrototypeOf(o,p){return AccountsImport_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},AccountsImport_setPrototypeOf(o,p)}function AccountsImport_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=AccountsImport_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=AccountsImport_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return AccountsImport_possibleConstructorReturn(this,result)}}function AccountsImport_possibleConstructorReturn(self,call){if(call&&("object"===AccountsImport_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function AccountsImport_getPrototypeOf(o){return AccountsImport_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},AccountsImport_getPrototypeOf(o)}var AccountsImportContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&AccountsImport_setPrototypeOf(subClass,superClass)}(AccountsImportContainer,_React$Component);var Constructor,protoProps,staticProps,_super=AccountsImport_createSuper(AccountsImportContainer);function AccountsImportContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AccountsImportContainer),(_this=_super.call(this,props)).selectAccountImport=function(event,type){if(_this.csvRef.current&&_this.jsonRef.current&&_this.ldapRef.current&&_this.csvWizardRef.current&&_this.jsonWizardRef.current&&_this.ldapWizardRef.current&&!event.target.classList.contains("card-disabled"))switch(type){case"csv":_this.csvWizardRef.current.show(),_this.jsonRef.current.classList.add("card-disabled"),_this.ldapRef.current.classList.add("card-disabled");break;case"json":_this.jsonWizardRef.current.classList.remove("uk-hidden"),_this.csvRef.current.classList.add("card-disabled"),_this.ldapRef.current.classList.add("card-disabled");break;case"ldap":_this.ldapWizardRef.current.classList.remove("uk-hidden"),_this.csvRef.current.classList.add("card-disabled"),_this.jsonRef.current.classList.add("card-disabled")}},_this.resetWizards=function(){_this.csvRef.current&&_this.jsonRef.current&&_this.ldapRef.current&&_this.csvWizardRef.current&&_this.jsonWizardRef.current&&_this.ldapWizardRef.current&&(_this.csvRef.current.classList.remove("card-disabled"),_this.jsonRef.current.classList.remove("card-disabled"),_this.ldapRef.current.classList.remove("card-disabled"),_this.csvWizardRef.current.hide(),_this.jsonWizardRef.current.classList.add("uk-hidden"),_this.ldapWizardRef.current.classList.add("uk-hidden"))},_this.csvRef=(0,react.createRef)(),_this.jsonRef=(0,react.createRef)(),_this.ldapRef=(0,react.createRef)(),_this.csvWizardRef=(0,react.createRef)(),_this.jsonWizardRef=(0,react.createRef)(),_this.ldapWizardRef=(0,react.createRef)(),_this}return Constructor=AccountsImportContainer,(protoProps=[{key:"render",value:function(){var _this2=this;return react.createElement(react.Fragment,null,react.createElement(components_PageTitle,{title:"Accounts Import"}),react.createElement(components_PageContent,null,react.createElement("div",{className:"uk-grid uk-grid-medium uk-margin-medium-bottom js-wizard-select-wrapper"},react.createElement("div",{className:"uk-width-1-1 uk-margin-small-bottom"},react.createElement("h3",null,"Select Import Type")),react.createElement("div",{className:"uk-width-1-3"},react.createElement("div",{id:"csv-import-selector",ref:this.csvRef,className:"panel trupanel nopadding md-bg-color-green md-color-white cursor-pointer",style:{minHeight:85},onClick:function(e){return _this2.selectAccountImport(e,"csv")}},react.createElement("div",{className:"tru-card-content"},react.createElement("div",{className:"right uk-margin-small-top"},react.createElement("i",{className:"material-icons font-size-40"},"description")),react.createElement("h2",{className:"uk-margin-remove"},react.createElement("span",{className:"md-color-white uk-margin-small-bottom"},"CSV"),react.createElement("span",{className:"md-color-white uk-text-small uk-display-block"},"Import accounts from an uploaded csv"))))),react.createElement("div",{className:"uk-width-1-3"},react.createElement("div",{id:"json-import-selector",ref:this.jsonRef,className:"panel trupanel nopadding md-bg-color-blue-grey md-color-white cursor-pointer",style:{minHeight:85},onClick:function(e){return _this2.selectAccountImport(e,"json")}},react.createElement("div",{className:"tru-card-content"},react.createElement("div",{className:"right uk-margin-small-top"},react.createElement("svg",{style:{width:40,height:40},viewBox:"0 0 24 24"},react.createElement("path",{fill:"#ffffff",d:"M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z"}))),react.createElement("h2",{className:"uk-margin-remove"},react.createElement("span",{className:"md-color-white uk-margin-small-bottom"},"JSON"),react.createElement("span",{className:"md-color-white uk-text-small uk-display-block"},"Import accounts from an uploaded json file"))))),react.createElement("div",{className:"uk-width-1-3"},react.createElement("div",{id:"ldap-import-selector",ref:this.ldapRef,className:"panel trupanel nopadding md-bg-color-blue md-color-white cursor-pointer",style:{minHeight:85},onClick:function(e){return _this2.selectAccountImport(e,"ldap")}},react.createElement("div",{className:"tru-card-content"},react.createElement("div",{className:"right uk-margin-small-top"},react.createElement("i",{className:"material-icons font-size-40"},"")),react.createElement("h2",{className:"uk-margin-remove"},react.createElement("span",{className:"md-color-white uk-margin-small-bottom"},"LDAP"),react.createElement("span",{className:"md-color-white uk-text-small uk-display-block"},"Import accounts from an enterprise ldap server.")))))),react.createElement(components_StepWizard,{title:"CSV Account Import Wizard",subtitle:"This wizard will walk you through importing accounts from a json file.",ref:this.csvWizardRef,onCancelClicked:this.resetWizards}),react.createElement("div",{id:"json_wizard_card",ref:this.jsonWizardRef,className:"uk-grid uk-margin-small-bottom uk-hidden"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("div",{className:"panel trupanel nopadding no-hover-shadow",style:{position:"relative",minHeight:265}},react.createElement("div",{className:"left"},react.createElement("h6",{style:{padding:"10px 0 0 15px",margin:0,fontSize:16}},"JSON Account Import Wizard"),react.createElement("h5",{style:{padding:"0 0 10px 15px",margin:"-2px 0 0 0",fontSize:12},className:"uk-text-muted"},"This wizard will walk you through importing accounts from a json file.")),react.createElement("div",{className:"right",style:{margin:15}},react.createElement("button",{className:"btn md-btn md-btn-warning js-wizard-cancel",onClick:this.resetWizards},"Cancel")),react.createElement("hr",{className:"nomargin"}),react.createElement("form",{className:"uk-form-stacked",id:"wizard_json_form"},react.createElement("div",{id:"wizard_json"},react.createElement("h3",null,"File Upload"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz"},"File Upload",react.createElement("span",{className:"sub-heading"},"Upload json file containing user data to import.")),react.createElement("hr",{className:"md-hr"}),react.createElement("div",{id:"json-upload-drop",className:"uk-file-upload"},react.createElement("p",{className:"uk-text"},"Drop file to upload"),react.createElement("p",{className:"uk-text-muted uk-text-small uk-margin-small-bottom"},"or"),react.createElement("a",{className:"uk-form-file md-btn"},"choose file",react.createElement("input",{type:"file",id:"json-upload-select"}))),react.createElement("div",{id:"json-progressbar",className:"uk-progress uk-active uk-progress-success uk-hidden"},react.createElement("div",{className:"uk-progress-bar",style:{width:0}}))),react.createElement("h3",null,"Review Uploaded Data"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz"},"Review Uploaded Data",react.createElement("span",{className:"sub-heading"},"Below is the parsed contents of the uploaded csv file.")),react.createElement("textarea",{className:"review-list",id:"json-review-list",disabled:!0})),react.createElement("h3",null,"Import Accounts"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz uk-margin-medium-bottom"},"Importing Accounts..",react.createElement("span",{className:"sub-heading"},"Please wait while your accounts are imported.",react.createElement("br",null),react.createElement("em",null,"Please do not navigate away from this page. Some UI Elements have been disabled."))),react.createElement("div",{id:"json-import-status-box",style:{width:"100%",height:300,border:"1px solid #ccc",overflow:"auto",padding:10}},react.createElement("ul",null)),react.createElement("br",null),react.createElement("div",{className:"js-json-progress uk-progress uk-progress-striped uk-active uk-progress-success",style:{marginBottom:0,boxShadow:"inset 0 0 0 1px rgba(0, 0, 0,.06)",background:"#f4f4f4"}},react.createElement("div",{className:"uk-progress-bar",style:{width:0}})))))))),react.createElement("div",{id:"ldap_wizard_card",ref:this.ldapWizardRef,className:"uk-grid uk-margin-small-bottom uk-hidden"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("div",{className:"panel trupanel nopadding no-hover-shadow",style:{position:"relative",minHeight:265}},react.createElement("div",{className:"left"},react.createElement("h6",{style:{padding:"10px 0 0 15px",margin:0,fontSize:16}},"LDAP Account Import Wizard"),react.createElement("h5",{style:{padding:"0 0 10px 15px",margin:"-2px 0 0 0",fontSize:12},className:"uk-text-muted"},"This wizard will walk you through connecting and import users from a LDAP server.")),react.createElement("div",{className:"right",style:{margin:15}},react.createElement("button",{className:"btn md-btn md-btn-warning js-wizard-cancel",onClick:this.resetWizards},"Cancel")),react.createElement("hr",{className:"nomargin"}),react.createElement("div",{className:"card-spinner uk-hidden",style:{opacity:.85}},react.createElement("div",{className:"spinner"})),react.createElement("form",{action:"#",className:"uk-form-stacked",id:"wizard_ldap_connection_form"},react.createElement("div",{id:"wizard_ldap"},react.createElement("h3",null,"Connection Information"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz"},"Connection Information",react.createElement("span",{className:"sub-heading"},"To import users from an LDAP server, we need a little connection information.")),react.createElement("hr",{className:"md-hr",style:{marginTop:"14px !important"}}),react.createElement("div",{className:"uk-grid"},react.createElement("div",{className:"uk-margin-large-bottom uk-width-1-3"},react.createElement("label",{htmlFor:"ldap-server"},"LDAP Server"),react.createElement("input",{id:"ldap-server",type:"text",className:"md-input",name:"ldap-server",required:!0,defaultValue:""})),react.createElement("div",{className:"uk-margin-large-bottom uk-width-1-3"},react.createElement("label",{htmlFor:"ldap-bind-dn"},"Bind DN (CN=Administrator,DC=domain,DC=com)"),react.createElement("input",{type:"text",className:"md-input",name:"ldap-bind-dn",required:!0,defaultValue:""})),react.createElement("div",{className:"uk-margin-large-bottom uk-width-1-3"},react.createElement("label",{htmlFor:"ldap-password"},"Password"),react.createElement("input",{type:"password",className:"md-input",name:"ldap-password",required:!0,defaultValue:""})),react.createElement("div",{className:"uk-margin-large-bottom uk-width-1-2"},react.createElement("label",{htmlFor:"ldap-search-base"},"Search Base"),react.createElement("input",{type:"text",className:"md-input",name:"ldap-search-base",required:!0,defaultValue:""})),react.createElement("div",{className:"uk-margin-large-bottom uk-width-1-2"},react.createElement("label",{htmlFor:"ldap-filter"},"Search Filter (Defaults to Users)"),react.createElement("input",{type:"text",className:"md-input",name:"ldap-filter",required:!0,defaultValue:"(&(objectClass=user)(objectCategory=person))"})))),react.createElement("h3",null,"Verify Connection"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz"},"Verify Connection",react.createElement("span",{id:"wizard_ldap_verify_text",className:"sub-heading"},"Please wait while we try to bind to your ldap server...")),react.createElement("div",{id:"wizard_ldap_verify_spinner",className:"card-spinner uk-hidden",style:{background:"none !important",minHeight:400}},react.createElement("div",{className:"spinner"})),react.createElement("div",{id:"wizard_ldap_verify_icon",className:"md-large-icon md-color-red uk-text-center uk-hidden"},react.createElement("i",{className:"material-icons"},""))),react.createElement("h3",null,"Review Accounts"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz",style:{marginBottom:15}},"Review Accounts",react.createElement("span",{className:"sub-heading"},"Please review the accounts below before proceeding. The next step will import the accounts.")),react.createElement("textarea",{className:"review-list",id:"ldap-review-list",disabled:!0})),react.createElement("h3",null,"Import Accounts"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz uk-margin-medium-bottom"},"Importing Accounts..",react.createElement("span",{className:"sub-heading"},"Please wait while your accounts are imported.",react.createElement("br",null),react.createElement("em",null,"Please do not navigate away from this page. Some UI Elements have been disabled."))),react.createElement("div",{id:"ldap-import-status-box",style:{width:"100%",height:300,border:"1px solid #ccc",overflow:"auto",padding:10}},react.createElement("ul",null)),react.createElement("br",null),react.createElement("div",{className:"js-ldap-progress uk-progress uk-progress-striped uk-active uk-progress-success",style:{marginBottom:0,boxShadow:"inset 0 0 0 1px rgba(0, 0, 0,.06)",background:"#f4f4f4"}},react.createElement("div",{className:"uk-progress-bar",style:{width:0}}))))))))))}}])&&AccountsImport_defineProperties(Constructor.prototype,protoProps),staticProps&&AccountsImport_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AccountsImportContainer}(react.Component);AccountsImportContainer.propTypes={};const AccountsImport=AccountsImportContainer;function Groups_typeof(obj){return Groups_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Groups_typeof(obj)}function Groups_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Groups_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Groups_setPrototypeOf(o,p){return Groups_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Groups_setPrototypeOf(o,p)}function Groups_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Groups_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Groups_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Groups_possibleConstructorReturn(this,result)}}function Groups_possibleConstructorReturn(self,call){if(call&&("object"===Groups_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Groups_getPrototypeOf(o){return Groups_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Groups_getPrototypeOf(o)}var GroupsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Groups_setPrototypeOf(subClass,superClass)}(GroupsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Groups_createSuper(GroupsContainer);function GroupsContainer(){return Groups_classCallCheck(this,GroupsContainer),_super.apply(this,arguments)}return Constructor=GroupsContainer,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchGroups({type:"all"})}},{key:"onCreateGroupClick",value:function(){this.props.showModal("CREATE_GROUP")}},{key:"onEditGroupClick",value:function(group){this.props.showModal("EDIT_GROUP",{group})}},{key:"onDeleteGroupClick",value:function(_id){var _this=this;uikit_combined_min_default().modal.confirm('<h2>Are you sure?</h2>\n        <p style="font-size: 15px;">\n            <span class="uk-text-danger" style="font-size: 15px;">This is a permanent action.</span> \n        </p>\n        <p style="font-size: 12px;">\n            Agents may lose access to resources once this group is deleted.\n        </p>\n        <span>Groups that are associated with ticket cannot be deleted.</span>\n        ',(function(){_this.props.deleteGroup({_id})}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"render",value:function(){var _this2=this,tableItems=this.props.groups.map((function(group){return react.createElement(Table_TableRow,{key:group.get("_id"),className:"vam nbb"},react.createElement(Table_TableCell,{style:{fontWeight:500,padding:"18px 15px"}},group.get("name")),react.createElement(Table_TableCell,{style:{padding:"13px 20px 8px 8px"}},group.get("members")&&group.get("members").size>0&&group.get("members").filter((function(user){return!user.get("deleted")})).map((function(user){var profilePic=user.get("image")||"defaultProfile.jpg";return react.createElement("div",{key:user.get("_id"),className:"uk-float-left uk-position-relative mb-10","data-uk-tooltip":'{pos: "bottom"}',title:user.get("fullname")},react.createElement(Avatar_Avatar,{size:25,style:{marginRight:5},image:profilePic,userId:user.get("_id")}))})),!group.get("members")&&react.createElement("div",null)),react.createElement(Table_TableCell,{style:{textAlign:"right",paddingRight:15}},react.createElement(components_ButtonGroup,null,helpers_default().canUser("groups:update",!0)&&react.createElement(components_Button,{text:"Edit",small:!0,waves:!0,onClick:function(){return _this2.onEditGroupClick(group.toJS())}}),helpers_default().canUser("groups:delete",!0)&&react.createElement(components_Button,{text:"Delete",style:"danger",small:!0,waves:!0,onClick:function(){return _this2.onDeleteGroupClick(group.get("_id"))}}))))}));return react.createElement("div",null,react.createElement(components_PageTitle,{title:"Customer Groups",rightComponent:react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"uk-width-1-1 mt-15 uk-text-right"},react.createElement(components_Button,{text:"Create",flat:!1,small:!0,waves:!1,extraClass:"hover-accent",onClick:function(){return _this2.onCreateGroupClick()}})))}),react.createElement(components_PageContent,{padding:0,paddingBottom:0},react.createElement(components_Table,{headers:[react.createElement(Table_TableHeader,{key:0,width:"25%",height:40,text:"Name",padding:"8px 8px 8px 15px"}),react.createElement(Table_TableHeader,{key:1,width:"50%",text:"Group Members"}),react.createElement(Table_TableHeader,{key:2,width:130,text:"Group Actions"})]},tableItems)))}}])&&Groups_defineProperties(Constructor.prototype,protoProps),staticProps&&Groups_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),GroupsContainer}(react.Component);GroupsContainer.propTypes={groups:prop_types_default().object.isRequired,fetchGroups:prop_types_default().func.isRequired,deleteGroup:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const Groups=(0,es.$j)((function(state){return{groups:state.groupsState.groups}}),{fetchGroups:groups_fetchGroups,deleteGroup:groups_deleteGroup,showModal})(GroupsContainer);function Teams_typeof(obj){return Teams_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Teams_typeof(obj)}function Teams_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Teams_setPrototypeOf(o,p){return Teams_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Teams_setPrototypeOf(o,p)}function Teams_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Teams_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Teams_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Teams_possibleConstructorReturn(this,result)}}function Teams_possibleConstructorReturn(self,call){if(call&&("object"===Teams_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Teams_getPrototypeOf(o){return Teams_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Teams_getPrototypeOf(o)}var TeamsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Teams_setPrototypeOf(subClass,superClass)}(TeamsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Teams_createSuper(TeamsContainer);function TeamsContainer(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TeamsContainer),_super.call(this,props)}return Constructor=TeamsContainer,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchTeams({page:0,limit:1e3})}},{key:"componentDidUpdate",value:function(){helpers_default().resizeFullHeight()}},{key:"componentWillUnmount",value:function(){this.props.unloadTeams()}},{key:"onCreateTeamClick",value:function(e){e.preventDefault(),this.props.showModal("CREATE_TEAM")}},{key:"onEditTeamClick",value:function(team){team.members?team.members=team.members.map((function(m){return m._id})):team.members=[],this.props.showModal("EDIT_TEAM",{team})}},{key:"onDeleteTeamClick",value:function(_id){var _this=this;uikit_combined_min_default().modal.confirm('<h2>Are you sure?</h2>\n        <p style="font-size: 15px;">\n            <span class="uk-text-danger" style="font-size: 15px;">This is a permanent action.</span> \n        </p>\n        <p style="font-size: 12px;">\n            Agents may lose access to resources once this team is deleted.\n        </p>\n        ',(function(){_this.props.deleteTeam({_id})}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"render",value:function(){var _this2=this,tableItems=this.props.teamsState.teams.map((function(team){return react.createElement(Table_TableRow,{key:team.get("_id"),className:"vam nbb"},react.createElement(Table_TableCell,{style:{fontWeight:500,padding:"18px 15px"}},team.get("name")),react.createElement(Table_TableCell,{style:{padding:"13px 8px 8px 8px"}},team.get("members")&&team.get("members").size>0&&team.get("members").filter((function(user){return!user.get("deleted")})).map((function(user){var profilePic=user.get("image")||"defaultProfile.jpg";return react.createElement("div",{key:user.get("_id"),className:"uk-float-left uk-position-relative mb-10","data-uk-tooltip":'{pos: "bottom"}',title:user.get("fullname")},react.createElement(Avatar_Avatar,{image:profilePic,userId:user.get("_id"),size:25,style:{marginRight:5}}))}))),react.createElement(Table_TableCell,{style:{textAlign:"right",paddingRight:15}},react.createElement(components_ButtonGroup,null,helpers_default().canUser("teams:update",!0)&&react.createElement(components_Button,{text:"Edit",small:!0,waves:!0,onClick:function(){return _this2.onEditTeamClick(team.toJS())}}),helpers_default().canUser("teams:delete",!0)&&react.createElement(components_Button,{text:"Delete",style:"danger",small:!0,waves:!0,onClick:function(){return _this2.onDeleteTeamClick(team.get("_id"))}}))))}));return react.createElement("div",null,react.createElement(components_PageTitle,{title:"Teams",shadow:!0,rightComponent:react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"uk-width-1-1 mt-15 uk-text-right"},react.createElement(components_Button,{text:"Create",flat:!1,small:!0,waves:!1,extraClass:"hover-accent",onClick:function(e){return _this2.onCreateTeamClick(e)}})))}),react.createElement(components_PageContent,{id:"teams-page-content",padding:0,paddingBottom:0},react.createElement(components_Table,{headers:[react.createElement(Table_TableHeader,{key:0,width:"25%",height:40,text:"Name",padding:"8px 8px 8px 15px"}),react.createElement(Table_TableHeader,{key:1,width:"50%",text:"Team Members"}),react.createElement(Table_TableHeader,{key:2,width:130,text:"Team Actions"})]},this.props.teamsState.teams.size<1&&react.createElement(Table_TableRow,null,react.createElement(Table_TableCell,{colSpan:3},react.createElement("h5",{style:{paddingLeft:8}},"No Teams"))),tableItems)))}}])&&Teams_defineProperties(Constructor.prototype,protoProps),staticProps&&Teams_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TeamsContainer}(react.Component);TeamsContainer.propTypes={teamsState:prop_types_default().object.isRequired,fetchTeams:prop_types_default().func.isRequired,unloadTeams:prop_types_default().func.isRequired,deleteTeam:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const Teams=(0,es.$j)((function(state){return{teamsState:state.teamsState}}),{fetchTeams:teams_fetchTeams,unloadTeams,deleteTeam:teams_deleteTeam,showModal})(TeamsContainer);function Departments_typeof(obj){return Departments_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Departments_typeof(obj)}function Departments_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Departments_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Departments_setPrototypeOf(o,p){return Departments_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Departments_setPrototypeOf(o,p)}function Departments_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Departments_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Departments_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Departments_possibleConstructorReturn(this,result)}}function Departments_possibleConstructorReturn(self,call){if(call&&("object"===Departments_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Departments_getPrototypeOf(o){return Departments_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Departments_getPrototypeOf(o)}var DepartmentsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Departments_setPrototypeOf(subClass,superClass)}(DepartmentsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Departments_createSuper(DepartmentsContainer);function DepartmentsContainer(){return Departments_classCallCheck(this,DepartmentsContainer),_super.apply(this,arguments)}return Constructor=DepartmentsContainer,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchDepartments()}},{key:"onCreateDepartmentClick",value:function(){this.props.showModal("CREATE_DEPARTMENT")}},{key:"onEditDepartmentClick",value:function(department){this.props.showModal("EDIT_DEPARTMENT",{department})}},{key:"onDeleteDepartmentClick",value:function(_id){var _this=this;uikit_combined_min_default().modal.confirm('<h2>Are you sure?</h2>\n        <p style="font-size: 15px;">\n            <span class="uk-text-danger" style="font-size: 15px;">This is a permanent action.</span> \n        </p>\n        <p style="font-size: 12px;">\n            Agents may lose access to resources once this department is deleted.\n        </p>\n        ',(function(){_this.props.deleteDepartment({_id})}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"render",value:function(){var _this2=this;return react.createElement("div",null,react.createElement(components_PageTitle,{title:"Departments",shadow:!1,rightComponent:react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"uk-width-1-1 mt-15 uk-text-right"},react.createElement(components_Button,{text:"Create",flat:!1,small:!0,waves:!1,extraClass:"hover-accent",onClick:function(){return _this2.onCreateDepartmentClick()}})))}),react.createElement(components_PageContent,{padding:0},react.createElement("table",{className:"uk-table uk-table-striped sticky-header fixed-width"},react.createElement("thead",null,react.createElement("tr",null,react.createElement("th",{style:{width:"35%",verticalAlign:"middle",fontSize:12,textTransform:"uppercase",padding:"8px 8px 8px 27px"}},"Name"),react.createElement("th",{style:{verticalAlign:"middle",fontSize:12,textTransform:"uppercase"}},"Teams"),react.createElement("th",{style:{width:"25%",verticalAlign:"middle",fontSize:12,textTransform:"uppercase"}},"Groups"),react.createElement("th",{style:{width:220,verticalAlign:"middle",fontSize:12,textTransform:"uppercase"}},"Actions"))),react.createElement("tbody",{className:"c91-fix scrollable full-height"},this.props.departments&&this.props.departments.map((function(department){var teams=department.get("teams"),groups=department.get("groups");return react.createElement("tr",{key:department.get("_id")},react.createElement("td",{style:{verticalAlign:"middle",padding:"8px 8px 8px 26px"}},react.createElement("div",{style:{fontWeight:"500"}},department.get("name"))),react.createElement("td",{style:{verticalAlign:"middle"}},teams&&teams.map((function(team){return react.createElement("div",{key:team.get("_id"),style:{marginBottom:4}},team.get("name"))}))),react.createElement("td",{style:{verticalAlign:"middle"}},!0===department.get("allGroups")&&react.createElement("div",null,react.createElement("h6",{className:"text-success",style:{fontWeight:"bold"}},"All Groups")),!0===department.get("publicGroups")&&react.createElement("div",null,react.createElement("h6",{className:"text-success",style:{fontWeight:"bold"}},"All Public Groups")),!0!==department.get("allGroups")&&groups&&groups.map((function(group){return react.createElement("div",{key:group.get("_id"),style:{marginBottom:4}},group.get("name"))}))),react.createElement("td",null,react.createElement(components_ButtonGroup,null,helpers_default().canUser("departments:update",!0)&&react.createElement(components_Button,{text:"Edit",small:!0,waves:!0,onClick:function(){return _this2.onEditDepartmentClick(department)}}),helpers_default().canUser("departments:delete",!0)&&react.createElement(components_Button,{text:"Delete",style:"danger",small:!0,waves:!0,onClick:function(){return _this2.onDeleteDepartmentClick(department.get("_id"))}}))))}))))))}}])&&Departments_defineProperties(Constructor.prototype,protoProps),staticProps&&Departments_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DepartmentsContainer}(react.Component);DepartmentsContainer.propTypes={departments:prop_types_default().object.isRequired,fetchDepartments:prop_types_default().func.isRequired,deleteDepartment:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const Departments=(0,es.$j)((function(state){return{departments:state.departmentsState.departments}}),{fetchDepartments:departments_fetchDepartments,deleteDepartment:departments_deleteDepartment,showModal})(DepartmentsContainer);function NoticeContainer_typeof(obj){return NoticeContainer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},NoticeContainer_typeof(obj)}function NoticeContainer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NoticeContainer_setPrototypeOf(o,p){return NoticeContainer_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},NoticeContainer_setPrototypeOf(o,p)}function NoticeContainer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=NoticeContainer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NoticeContainer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NoticeContainer_possibleConstructorReturn(this,result)}}function NoticeContainer_possibleConstructorReturn(self,call){if(call&&("object"===NoticeContainer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NoticeContainer_getPrototypeOf(o){return NoticeContainer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},NoticeContainer_getPrototypeOf(o)}var NoticeContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NoticeContainer_setPrototypeOf(subClass,superClass)}(NoticeContainer,_React$Component);var Constructor,protoProps,staticProps,_super=NoticeContainer_createSuper(NoticeContainer);function NoticeContainer(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NoticeContainer),_super.call(this,props)}return Constructor=NoticeContainer,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchNotices()}},{key:"componentDidUpdate",value:function(){helpers_default().resizeAll()}},{key:"componentWillUnmount",value:function(){this.props.unloadNotices()}},{key:"onActivateNotice",value:function(noticeId){var _this=this;helpers_default().canUser("notices:activate")?axios_default().put("/api/v2/notices/"+noticeId+"/activate",{active:!0}).then((function(){_this.props.socket.emit(socketEventConsts.NOTICE_SHOW,{noticeId})})).catch((function(err){logger.error(err),helpers_default().UI.showSnackbar(err,!0)})):helpers_default().UI.showSnackbar("Unauthorized",!0)}},{key:"onDeactivateNotice",value:function(){var _this2=this;axios_default().get("/api/v1/notices/clearactive").then((function(){_this2.props.socket.emit(socketEventConsts.NOTICE_CLEAR),helpers_default().UI.showSnackbar("Notice has been deactivated",!1)})).catch((function(err){logger.error(err),helpers_default().UI.showSnackbar(err,!0)}))}},{key:"onEditNotice",value:function(notice){this.props.showModal("EDIT_NOTICE",{notice})}},{key:"onDeleteNotice",value:function(noticeId){var _this3=this;uikit_combined_min_default().modal.confirm('<h2>Are you sure?</h2>\n        <p style="font-size: 15px;">\n            <span class="uk-text-danger" style="font-size: 15px;">This is a permanent action.</span> \n        </p>\n        ',(function(){_this3.props.deleteNotice({_id:noticeId})}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"render",value:function(){var _this4=this,tableItems=this.props.notices.map((function(notice){var formattedDate=helpers_default().formatDate(notice.get("date"),helpers_default().getShortDateFormat())+", "+helpers_default().formatDate(notice.get("date"),helpers_default().getTimeFormat());return react.createElement(Table_TableRow,{key:notice.get("_id"),className:"vam nbb",clickable:!1},react.createElement(Table_TableCell,{style:{padding:"18px 15px"}},react.createElement("span",{style:{display:"block",width:15,height:15,backgroundColor:notice.get("color")}})),react.createElement(Table_TableCell,{style:{fontWeight:500,padding:"18px 5px"}},notice.get("name")),react.createElement(Table_TableCell,{style:{padding:"18px 5px"}},notice.get("message")),react.createElement(Table_TableCell,{style:{padding:"18px 5px"}},formattedDate),react.createElement(Table_TableCell,null,react.createElement(components_ButtonGroup,null,react.createElement(components_Button,{icon:"spatial_audio_off",style:"success",small:!0,waves:!0,onClick:function(){return _this4.onActivateNotice(notice.get("_id"))}}),react.createElement(components_Button,{icon:"edit",extraClass:"hover-primary",small:!0,waves:!0,onClick:function(){return _this4.onEditNotice(notice.toJS())}}),react.createElement(components_Button,{icon:"delete",extraClass:"hover-danger",small:!0,waves:!0,onClick:function(){return _this4.onDeleteNotice(notice.get("_id"))}}))))}));return react.createElement("div",null,react.createElement(components_PageTitle,{title:"Notices",shadow:!1,rightComponent:react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"uk-width-1-1 mt-15 uk-text-right"},helpers_default().canUser("notices:deactivate")&&react.createElement(components_Button,{text:"Deactivate",flat:!1,small:!0,waves:!1,extraClass:"hover-accent",onClick:function(){return _this4.onDeactivateNotice()}}),helpers_default().canUser("notices:create")&&react.createElement(components_Button,{text:"Create",flat:!1,small:!0,waves:!1,extraClass:"hover-success",onClick:function(){_this4.props.showModal("CREATE_NOTICE")}})))}),react.createElement(components_PageContent,{padding:0,paddingBottom:0,extraClass:"uk-position-relative"},react.createElement(components_Table,{style:{margin:0},extraClass:"pDataTable",stickyHeader:!0,striped:!0,headers:[react.createElement(Table_TableHeader,{key:0,width:45,height:50,text:""}),react.createElement(Table_TableHeader,{key:1,width:"20%",text:"Name"}),react.createElement(Table_TableHeader,{key:2,width:"60%",text:"Message"}),react.createElement(Table_TableHeader,{key:3,width:"10%",text:"Date"}),react.createElement(Table_TableHeader,{key:4,width:150,text:""})]},!this.props.loading&&this.props.notices.size<1&&react.createElement(Table_TableRow,{clickable:!1},react.createElement(Table_TableCell,{colSpan:10},react.createElement("h5",{style:{margin:10}},"No Notices Found"))),tableItems)))}}])&&NoticeContainer_defineProperties(Constructor.prototype,protoProps),staticProps&&NoticeContainer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NoticeContainer}(react.Component);NoticeContainer.propTypes={socket:prop_types_default().object.isRequired,notices:prop_types_default().object.isRequired,loading:prop_types_default().bool.isRequired,fetchNotices:prop_types_default().func.isRequired,deleteNotice:prop_types_default().func.isRequired,unloadNotices:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const Notice_NoticeContainer=(0,es.$j)((function(state){return{socket:state.shared.socket,notices:state.noticesState.notices,loading:state.noticesState.loading}}),{fetchNotices:notices_fetchNotices,deleteNotice:notices_deleteNotice,unloadNotices,showModal})(NoticeContainer);__webpack_require__(798);function QRCode_typeof(obj){return QRCode_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},QRCode_typeof(obj)}function QRCode_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function QRCode_setPrototypeOf(o,p){return QRCode_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},QRCode_setPrototypeOf(o,p)}function QRCode_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=QRCode_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=QRCode_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return QRCode_possibleConstructorReturn(this,result)}}function QRCode_possibleConstructorReturn(self,call){if(call&&("object"===QRCode_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function QRCode_getPrototypeOf(o){return QRCode_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},QRCode_getPrototypeOf(o)}var QRCode=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&QRCode_setPrototypeOf(subClass,superClass)}(QRCode,_React$Component);var Constructor,protoProps,staticProps,_super=QRCode_createSuper(QRCode);function QRCode(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,QRCode),(_this=_super.call(this,props)).qrcodeDiv=(0,react.createRef)(),_this}return Constructor=QRCode,(protoProps=[{key:"componentDidMount",value:function(){this.qrcodeDiv.current&&jquery_default()(this.qrcodeDiv.current).qrcode({width:this.props.size,height:this.props.size,text:this.props.code})}},{key:"render",value:function(){var css={};return this.props.css&&(css=this.props.css),react.createElement("div",{style:css},react.createElement("div",{ref:this.qrcodeDiv}))}}])&&QRCode_defineProperties(Constructor.prototype,protoProps),staticProps&&QRCode_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),QRCode}(react.Component);QRCode.propTypes={code:prop_types_default().string.isRequired,size:prop_types_default().number,css:prop_types_default().object},QRCode.defaultProps={size:240};const components_QRCode=QRCode;function TruAccordion_typeof(obj){return TruAccordion_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TruAccordion_typeof(obj)}var TruAccordion_class,TruAccordion_class2,TruAccordion_descriptor,TruAccordion_descriptor2;function TruAccordion_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function TruAccordion_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TruAccordion_setPrototypeOf(o,p){return TruAccordion_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},TruAccordion_setPrototypeOf(o,p)}function TruAccordion_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TruAccordion_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TruAccordion_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TruAccordion_possibleConstructorReturn(this,result)}}function TruAccordion_possibleConstructorReturn(self,call){if(call&&("object"===TruAccordion_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return TruAccordion_assertThisInitialized(self)}function TruAccordion_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function TruAccordion_getPrototypeOf(o){return TruAccordion_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},TruAccordion_getPrototypeOf(o)}function TruAccordion_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var TruAccordion=(0,mobxreact_esm.Pi)((TruAccordion_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TruAccordion_setPrototypeOf(subClass,superClass)}(TruAccordion,_React$Component);var Constructor,protoProps,staticProps,_super=TruAccordion_createSuper(TruAccordion);function TruAccordion(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TruAccordion),TruAccordion_initializerDefineProperty(_this=_super.call(this,props),"expanded",TruAccordion_descriptor,TruAccordion_assertThisInitialized(_this)),TruAccordion_initializerDefineProperty(_this,"expandedContentShown",TruAccordion_descriptor2,TruAccordion_assertThisInitialized(_this)),_this.onHeaderClick=function(e){e.preventDefault(),!1===_this.expanded&&(_this.expandedContentShown=!0),setTimeout((function(){_this.expanded=!_this.expanded}),10),setTimeout((function(){_this.expandedContentShown=_this.expanded}),300),_this.props.onExpandedChange&&_this.props.onExpandedChange(_this.expanded)},(0,mobx_esm.rC)(TruAccordion_assertThisInitialized(_this)),_this}return Constructor=TruAccordion,(protoProps=[{key:"componentDidMount",value:function(){this.expanded=this.props.startExpanded,this.expandedContentShown=this.props.startExpanded}},{key:"render",value:function(){var _this2=this,_this$props=this.props,headerContent=_this$props.headerContent,content=_this$props.content,contentPadding=_this$props.contentPadding,contentStyle={};return void 0!==contentPadding&&(contentStyle.padding=contentPadding),react.createElement("div",{className:(0,clsx_m.Z)("truaccordion-wrapper",this.expanded&&" expanded")},react.createElement("div",{className:"truaccordion-header",role:"button",onClick:function(e){return _this2.onHeaderClick(e)}},react.createElement("div",{className:"truaccordion-header-content"},react.createElement("h4",null,headerContent),react.createElement("div",{className:"arrow"},react.createElement("span",null,react.createElement("i",{className:"material-icons"},"chevron_right"))))),this.expandedContentShown&&react.createElement("div",{className:"truaccordion-content"},react.createElement("div",{className:"truaccordion-content-inner",style:contentStyle},content)))}}])&&TruAccordion_defineProperties(Constructor.prototype,protoProps),staticProps&&TruAccordion_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TruAccordion}(react.Component),TruAccordion_descriptor=TruAccordion_applyDecoratedDescriptor(TruAccordion_class2.prototype,"expanded",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),TruAccordion_descriptor2=TruAccordion_applyDecoratedDescriptor(TruAccordion_class2.prototype,"expandedContentShown",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),TruAccordion_class=TruAccordion_class2))||TruAccordion_class;TruAccordion.propTypes={startExpanded:prop_types_default().bool,onExpandedChange:prop_types_default().func,contentPadding:prop_types_default().number,headerContent:prop_types_default().string.isRequired,content:prop_types_default().node.isRequired},TruAccordion.defaultProps={startExpanded:!1};const components_TruAccordion=TruAccordion;var react_grid_layout=__webpack_require__(799),react_sizeme=__webpack_require__(715),initialLayouts={lg:[{i:"card-tickets-completed",x:4,y:0,w:4,h:1},{i:"card-avg-response-time",x:8,y:0,w:4,h:1}]};function RGrid(_ref){var _ref$size=_ref.size,width=_ref$size.width,height=_ref$size.height;window.onresize=function(){console.log(height)},(0,react.useEffect)((function(){helpers_default().resizeFullHeight()}),[]);return react.createElement(react_grid_layout.Responsive,{className:"uk-height-1-1",layouts:initialLayouts,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:85,width,compactType:null},react.createElement("div",{key:"card-total-tickets","data-grid":{x:0,y:0,w:4,h:1,static:!0}},react.createElement(Widget,{id:"card-total-tickets",backgroundColor:"#867ae9"})),react.createElement("div",{key:"card-tickets-completed"},react.createElement(Widget,{id:"b",backgroundColor:"#fff5ab"})),react.createElement("div",{key:"card-avg-response-time"},react.createElement(Widget,{id:"c",backgroundColor:"#ffcead"})),react.createElement("div",{key:"d"},react.createElement(Widget,{id:"d",backgroundColor:"#c449c2"})))}function Widget(_ref2){var id=_ref2.id;_ref2.backgroundColor;return react.createElement(components_TruCard,{header:null,content:react.createElement("div",null,"Testing ",id),fullSize:!0})}RGrid.propTypes={size:prop_types_default().object.isRequired};(0,react_sizeme.withSize)({refreshMode:"debounce",refreshRate:60,monitorHeight:!0})(RGrid);function Profile_typeof(obj){return Profile_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Profile_typeof(obj)}var Profile_class,Profile_class2,Profile_descriptor,Profile_descriptor2,Profile_descriptor3,Profile_descriptor4,Profile_descriptor5,Profile_descriptor6,Profile_descriptor7,Profile_descriptor8,Profile_descriptor9,Profile_descriptor10,Profile_descriptor11,_descriptor12,_descriptor13,_descriptor14,_descriptor15,_descriptor16,_descriptor17,_descriptor18;function Profile_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function Profile_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Profile_setPrototypeOf(o,p){return Profile_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Profile_setPrototypeOf(o,p)}function Profile_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Profile_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Profile_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Profile_possibleConstructorReturn(this,result)}}function Profile_possibleConstructorReturn(self,call){if(call&&("object"===Profile_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Profile_assertThisInitialized(self)}function Profile_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Profile_getPrototypeOf(o){return Profile_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Profile_getPrototypeOf(o)}function Profile_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var ProfileContainer=(0,mobxreact_esm.Pi)((Profile_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Profile_setPrototypeOf(subClass,superClass)}(ProfileContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Profile_createSuper(ProfileContainer);function ProfileContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ProfileContainer),Profile_initializerDefineProperty(_this=_super.call(this,props),"editingProfile",Profile_descriptor,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"fullname",Profile_descriptor2,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"title",Profile_descriptor3,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"email",Profile_descriptor4,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"workNumber",Profile_descriptor5,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"mobileNumber",Profile_descriptor6,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"companyName",Profile_descriptor7,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"facebookUrl",Profile_descriptor8,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"linkedinUrl",Profile_descriptor9,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"twitterUrl",Profile_descriptor10,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"currentPassword",Profile_descriptor11,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"newPassword",_descriptor12,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"confirmPassword",_descriptor13,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"l2Key",_descriptor14,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"l2URI",_descriptor15,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"l2Step2",_descriptor16,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"l2ShowCantSeeQR",_descriptor17,Profile_assertThisInitialized(_this)),Profile_initializerDefineProperty(_this,"l2VerifyText",_descriptor18,Profile_assertThisInitialized(_this)),_this.onSaveProfileClicked=function(e){e.preventDefault(),(_this.fullname&&_this.fullname.length)>25||_this.email&&_this.email.length>25?helpers_default().UI.showSnackbar("Field length too long",!0):_this._validateEmail(_this.email)?_this.props.saveProfile({_id:_this.props.sessionUser._id,username:_this.props.sessionUser.username,fullname:_this.fullname,title:_this.title,workNumber:_this.workNumber,mobileNumber:_this.mobileNumber,companyName:_this.companyName,facebookUrl:_this.facebookUrl,linkedinUrl:_this.linkedinUrl,twitterUrl:_this.twitterUrl}).then((function(){_this.editingProfile=!1,_this.props.setSessionUser()})):helpers_default().UI.showSnackbar("Invalid Email",!0)},_this.onUpdatePasswordClicked=function(e){e.preventDefault(),_this.currentPassword&&_this.newPassword&&_this.confirmPassword?_this.currentPassword.length>255||_this.newPassword.length>255||_this.confirmPassword.length>255?helpers_default().UI.showSnackbar("Password length is too long"):axios_default().post("/api/v2/accounts/profile/update-password",{currentPassword:_this.currentPassword,newPassword:_this.newPassword,confirmPassword:_this.confirmPassword}).then((function(res){res.data&&res.data.success&&(helpers_default().UI.showSnackbar("Password Updated Successfully"),setTimeout((function(){window.location.reload()}),1e3))})).catch((function(error){var errorMsg="Invalid Request";error&&error.response&&error.response.data&&error.response.data.error&&(errorMsg=error.response.data.error),helpers_default().UI.showSnackbar(errorMsg,!0)})):helpers_default().UI.showSnackbar("Invalid Form Data")},_this.onEnableMFAClicked=function(e){e.preventDefault(),_this.props.genMFA({_id:_this.props.sessionUser._id,username:_this.props.sessionUser.username}).then((function(res){_this.l2Key=res.key,_this.l2URI=res.uri,_this.l2Step2=!0}))},_this.onVerifyMFAClicked=function(e){e.preventDefault(),axios_default().post("/api/v2/accounts/profile/mfa/verify",{tOTPKey:_this.l2Key,code:_this.l2VerifyText}).then((function(res){res.data&&res.data.success&&(_this.props.setSessionUser(),_this.l2Step2=null,_this.l2ShowCantSeeQR=null)})).catch((function(e){e.response&&e.response.data&&e.response.data.error&&helpers_default().UI.showSnackbar(e.response.data.error,!0)}))},_this.onDisableMFAClicked=function(e){e.preventDefault();_this.props.showModal("PASSWORD_PROMPT",{user:_this.props.sessionUser,onVerifyComplete:function(success){success&&(_this.l2Step2=null,_this.l2ShowCantSeeQR=null,_this.props.setSessionUser())}})},(0,mobx_esm.rC)(Profile_assertThisInitialized(_this)),_this}return Constructor=ProfileContainer,(protoProps=[{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){null===prevProps.sessionUser&&null!==this.props.sessionUser&&(this.fullname=this.props.sessionUser.fullname,this.title=this.props.sessionUser.title,this.email=this.props.sessionUser.email,this.workNumber=this.props.sessionUser.workNumber,this.mobileNumber=this.props.sessionUser.mobileNumber,this.companyName=this.props.sessionUser.companyName,this.facebookUrl=this.props.sessionUser.facebookUrl,this.linkedinUrl=this.props.sessionUser.linkedinUrl,this.twitterUrl=this.props.sessionUser.twitterUrl)}},{key:"_validateEmail",value:function(email){return!!email&&email.toString().toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}},{key:"render",value:function(){var _this2=this;if(!this.props.sessionUser)return react.createElement("div",null);var InfoItem=function(_ref){var label=_ref.label,prop=_ref.prop,paddingLeft=_ref.paddingLeft,paddingRight=_ref.paddingRight,isRequired=_ref.isRequired,onUpdate=_ref.onUpdate;return react.createElement("div",{style:{width:"33%",paddingRight,paddingLeft}},react.createElement("label",{style:{cursor:"default",fontSize:"13px",fontWeight:400,marginRight:15}},label,isRequired&&react.createElement("span",{style:{color:"red"}},"*")),react.createElement(components_Spacer,{top:5,bottom:0}),_this2.editingProfile&&react.createElement(components_Input,{defaultValue:prop||"",onChange:onUpdate}),!_this2.editingProfile&&react.createElement("p",{style:{fontSize:"14px",lineHeight:"21px",margin:0,fontWeight:600,textOverflow:"ellipsis",overflow:"hidden"}},prop||"-"))};return react.createElement(react.Fragment,null,react.createElement(components_PageTitle,{title:"Profile"}),react.createElement(components_PageContent,null,react.createElement(components_TruCard,{header:react.createElement("div",null),hover:!1,content:react.createElement(react.Fragment,null,react.createElement("div",{className:"uk-position-relative"},react.createElement(Avatar_Avatar,{userId:this.props.sessionUser._id,image:this.props.sessionUser.image,enableImageUpload:!0,username:this.props.sessionUser.username,socket:this.props.socket,showOnlineBubble:!1,showBorder:!0,size:72}),react.createElement("div",{className:"uk-clearfix",style:{paddingLeft:85}},react.createElement("h2",{className:"ml-15",style:{fontSize:24,lineHeight:"36px",letterSpacing:"0.5px",fontWeight:600}},this.props.sessionUser.fullname),react.createElement("p",{className:"ml-15",style:{lineHeight:"9px"}},react.createElement("span",{style:{marginRight:10}},this.props.sessionUser.email),"|",react.createElement("span",{style:{margin:"0 10px"}},this.props.sessionUser.title),"|",react.createElement("span",{style:{boxSizing:"border-box",margin:"0 10px",padding:"5px 8px",background:"#d9eeda",border:"1px solid #b5dfb7",borderRadius:3,color:"#4caf50"}},this.props.sessionUser.role.name.toUpperCase()))),react.createElement(components_Button,{text:"Edit Profile",small:!0,waves:!0,style:"primary",styleOverride:{position:"absolute",top:"5px",right:5},disabled:this.editingProfile,onClick:function(){_this2.fullname=_this2.props.sessionUser.fullname,_this2.editingProfile=!_this2.editingProfile}})))}),react.createElement(components_Spacer,null),react.createElement(components_TruCard,{hover:!1,content:react.createElement("div",null,react.createElement(TruTabs_TruTabWrapper,{style:{padding:"0"}},react.createElement(TruTabs_TruTabSelectors,{showTrack:!0},react.createElement(TruTabs_TruTabSelector,{selectorId:0,label:"Profile",active:!0}),react.createElement(TruTabs_TruTabSelector,{selectorId:1,label:"Security"})),react.createElement(TruTabs_TruTabSection,{sectionId:0,active:!0,style:{minHeight:480}},react.createElement("div",{style:{maxWidth:900,padding:"10px 25px"}},react.createElement("h4",{style:{marginBottom:15}},"Work Information"),react.createElement("div",{style:{display:"flex"}},react.createElement(InfoItem,{label:"Name",prop:this.props.sessionUser.fullname,paddingLeft:0,paddingRight:30,isRequired:!0,onUpdate:function(val){return _this2.fullname=val}}),react.createElement(InfoItem,{label:"Title",prop:this.props.sessionUser.title,paddingLeft:30,paddingRight:30,onUpdate:function(val){return _this2.title=val}}),react.createElement(InfoItem,{label:"Company Name",prop:this.props.sessionUser.companyName,paddingRight:0,paddingLeft:30,onUpdate:function(val){return _this2.companyName=val}})),react.createElement("div",{style:{display:"flex",marginTop:25}},react.createElement(InfoItem,{label:"Work Number",prop:this.props.sessionUser.workNumber,paddingRight:30,paddingLeft:0,onUpdate:function(val){return _this2.workNumber=val}}),react.createElement(InfoItem,{label:"Mobile Number",prop:this.props.sessionUser.mobileNumber,paddingLeft:30,paddingRight:0,onUpdate:function(val){return _this2.mobileNumber=val}})),react.createElement(components_Spacer,{top:25,bottom:25,showBorder:!0}),react.createElement("h4",{style:{marginBottom:15}},"Other Information"),react.createElement("div",{style:{display:"flex",marginTop:25}},react.createElement(InfoItem,{label:"Facebook Url",prop:this.props.sessionUser.facebookUrl,paddingLeft:0,paddingRight:30,onUpdate:function(val){return _this2.facebookUrl=val}}),react.createElement(InfoItem,{label:"LinkedIn Url",prop:this.props.sessionUser.linkedinUrl,paddingLeft:30,paddingRight:30,onUpdate:function(val){return _this2.linkedinUrl=val}}),react.createElement(InfoItem,{label:"Twitter Url",prop:this.props.sessionUser.twitterUrl,paddingLeft:30,paddingRight:0,onUpdate:function(val){return _this2.twitterUrl=val}})),this.editingProfile&&react.createElement("div",{className:"uk-display-flex uk-margin-large-top"},react.createElement(components_Button,{text:"Save",style:"primary",small:!0,onClick:function(e){return _this2.onSaveProfileClicked(e)}}),react.createElement(components_Button,{text:"Cancel",small:!0,onClick:function(){return _this2.editingProfile=!1}})))),react.createElement(TruTabs_TruTabSection,{sectionId:1,style:{minHeight:480}},react.createElement("div",{style:{maxWidth:600,padding:"25px 0"}},react.createElement(components_TruAccordion,{headerContent:"Change Password",content:react.createElement("div",null,react.createElement("form",{onSubmit:function(e){return _this2.onUpdatePasswordClicked(e)}},react.createElement("div",{className:"uk-alert uk-alert-warning",style:{display:"flex",alignItems:"center"}},react.createElement("i",{className:"material-icons mr-10",style:{opacity:.5}},"info"),react.createElement("p",{style:{lineHeight:"18px"}},"After changing your password, you will be logged out of all sessions.")),react.createElement("div",null,react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Current Password"),react.createElement(components_Input,{type:"password",onChange:function(v){return _this2.currentPassword=v}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"New Password"),react.createElement(components_Input,{type:"password",onChange:function(v){return _this2.newPassword=v}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Confirm Password"),react.createElement(components_Input,{type:"password",onChange:function(v){return _this2.confirmPassword=v}}))),react.createElement("div",null,react.createElement(components_Button,{type:"submit",text:"Update Password",style:"primary",small:!0,extraClass:"uk-width-1-1",onClick:function(e){return _this2.onUpdatePasswordClicked(e)}}))))}),react.createElement(components_TruAccordion,{headerContent:"Two-Factor Authentication",content:react.createElement("div",null,!this.props.sessionUser.hasL2Auth&&react.createElement("div",null,!this.l2Step2&&react.createElement("div",null,react.createElement("h4",{style:{fontWeight:500}},"Two-factor authentication is not enabled yet"),react.createElement("p",{style:{fontSize:"12px",fontWeight:400}},"Enabling two-factor authentication adds an extra layer of security to your accounts. Once enabled, you will be required to enter both your password and an authentication code in order to sign into your account. After you successfully enable two-factor authentication, you will not be able to login unless you enter the correct authentication code."),react.createElement("div",null,react.createElement(components_Button,{text:"Enable",style:"primary",small:!0,waves:!0,onClick:function(e){return _this2.onEnableMFAClicked(e)}}))),this.l2Step2&&react.createElement("div",{style:{display:"flex",justifyContent:"center"}},react.createElement("div",{style:{width:400}},react.createElement("div",{style:{display:"flex",marginTop:15,flexDirection:"column"}},react.createElement("p",{style:{fontWeight:500,marginBottom:40}},"Scan the QR code below using any authenticator app such as Authy, Google Authenticator, LastPass Authenticator, Microsoft Authenticator"),react.createElement("div",{style:{alignSelf:"center",marginBottom:40}},react.createElement("div",null,react.createElement(components_QRCode,{size:180,code:this.l2URI||"INVALID_CODE",css:{marginBottom:5}}),react.createElement("a",{href:"#",style:{display:"inline-block",fontSize:"12px",width:"100%",textAlign:"right"},onClick:function(e){e.preventDefault(),_this2.l2ShowCantSeeQR=!0}},"Can't scan the QR code?"))),this.l2ShowCantSeeQR&&react.createElement("div",{style:{alignSelf:"center",marginBottom:15}},react.createElement("p",{style:{fontSize:"13px"}},"If you are unable to scan the QR code, open the authenticator app and select the option that allows you to enter the below key manually."),react.createElement("p",{style:{textAlign:"center"}},react.createElement("span",{style:{display:"inline-block",padding:"5px 25px",background:"white",color:"black",fontWeight:500,border:"1px solid rgba(0,0,0,0.1)"}},this.l2Key))),react.createElement("p",{style:{fontWeight:500}},"After scanning the QR code, enter the 6-digit verification code below to activate two-factor authentication on your account."),react.createElement("label",null,"Verification Code"),react.createElement(components_Input,{type:"text",onChange:function(val){return _this2.l2VerifyText=val}}),react.createElement("div",{style:{marginTop:25}},react.createElement(components_Button,{text:"Verify and continue",style:"primary",small:!0,waves:!0,extraClass:"uk-width-1-1",onClick:function(e){return _this2.onVerifyMFAClicked(e)}})))))),this.props.sessionUser.hasL2Auth&&react.createElement("div",null,react.createElement("h4",{style:{fontWeight:500}},"Two-factor authentication is"," ",react.createElement("span",{className:"uk-text-success",style:{fontWeight:600}},"enabled")),react.createElement("p",{style:{fontSize:"12px"}},"By disabling two-factor authentication, your account will be protected with only your password."),react.createElement("div",null,react.createElement(components_Button,{text:"Disable",style:"danger",small:!0,onClick:function(e){return _this2.onDisableMFAClicked(e)}}))))})))))})))}}])&&Profile_defineProperties(Constructor.prototype,protoProps),staticProps&&Profile_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ProfileContainer}(react.Component),Profile_descriptor=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"editingProfile",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Profile_descriptor2=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"fullname",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Profile_descriptor3=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"title",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Profile_descriptor4=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"email",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Profile_descriptor5=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"workNumber",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Profile_descriptor6=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"mobileNumber",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Profile_descriptor7=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"companyName",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Profile_descriptor8=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"facebookUrl",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Profile_descriptor9=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"linkedinUrl",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Profile_descriptor10=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"twitterUrl",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Profile_descriptor11=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"currentPassword",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor12=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"newPassword",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor13=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"confirmPassword",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor14=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"l2Key",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor15=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"l2URI",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor16=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"l2Step2",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor17=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"l2ShowCantSeeQR",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor18=Profile_applyDecoratedDescriptor(Profile_class2.prototype,"l2VerifyText",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Profile_class=Profile_class2))||Profile_class;ProfileContainer.propTypes={sessionUser:prop_types_default().object,setSessionUser:prop_types_default().func.isRequired,socket:prop_types_default().object.isRequired,showModal:prop_types_default().func.isRequired,hideModal:prop_types_default().func.isRequired,saveProfile:prop_types_default().func.isRequired,genMFA:prop_types_default().func.isRequired};const Profile=(0,es.$j)((function(state){return{sessionUser:state.shared.sessionUser,socket:state.shared.socket}}),{showModal,hideModal,saveProfile:accounts_saveProfile,setSessionUser:common_setSessionUser,genMFA:accounts_genMFA})(ProfileContainer),messages_fetchConversations=(0,createAction.Z)(FETCH_CONVERSATIONS.ACTION,(payload=>payload),(()=>({thunk:!0}))),messages_unloadConversations=(0,createAction.Z)(UNLOAD_CONVERSATIONS.ACTION,(()=>{}),(()=>({thunk:!0}))),messages_fetchSingleConversation=(0,createAction.Z)(FETCH_SINGLE_CONVERSATION.ACTION,(payload=>payload),(()=>({thunk:!0}))),messages_unloadSingleConversation=(0,createAction.Z)(UNLOAD_SINGLE_CONVERSATION.ACTION,(()=>{}),(()=>({thunk:!0}))),messages_deleteConversation=(0,createAction.Z)(DELETE_CONVERSATION.ACTION,(payload=>payload),(()=>({thunk:!0}))),setCurrentConversation=(0,createAction.Z)(SET_CURRENT_CONVERSATION.SUCCESS,(payload=>payload),(()=>({thunk:!0}))),messages_sendMessage=(0,createAction.Z)(MESSAGES_SEND.ACTION,(payload=>payload),(()=>({thunk:!0}))),receiveMessage=(0,createAction.Z)(MESSAGES_UI_RECEIVE.ACTION,(payload=>payload),(()=>({thunk:!0})));function Messages_typeof(obj){return Messages_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Messages_typeof(obj)}var Messages_class,Messages_class2,Messages_descriptor,Messages_descriptor2,Messages_descriptor3,Messages_descriptor4,Messages_descriptor5,Messages_descriptor6;function Messages_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function Messages_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Messages_setPrototypeOf(o,p){return Messages_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Messages_setPrototypeOf(o,p)}function Messages_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Messages_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Messages_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Messages_possibleConstructorReturn(this,result)}}function Messages_possibleConstructorReturn(self,call){if(call&&("object"===Messages_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Messages_assertThisInitialized(self)}function Messages_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Messages_getPrototypeOf(o){return Messages_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Messages_getPrototypeOf(o)}function Messages_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var MessagesContainer=(0,mobxreact_esm.Pi)((Messages_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Messages_setPrototypeOf(subClass,superClass)}(MessagesContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Messages_createSuper(MessagesContainer);function MessagesContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MessagesContainer),Messages_initializerDefineProperty(_this=_super.call(this,props),"userListShown",Messages_descriptor,Messages_assertThisInitialized(_this)),Messages_initializerDefineProperty(_this,"userListSearchText",Messages_descriptor2,Messages_assertThisInitialized(_this)),Messages_initializerDefineProperty(_this,"mutableUserList",Messages_descriptor3,Messages_assertThisInitialized(_this)),Messages_initializerDefineProperty(_this,"singleConversationLoaded",Messages_descriptor4,Messages_assertThisInitialized(_this)),Messages_initializerDefineProperty(_this,"typingTimers",Messages_descriptor5,Messages_assertThisInitialized(_this)),Messages_initializerDefineProperty(_this,"showNewConvoLoaded",Messages_descriptor6,Messages_assertThisInitialized(_this)),_this.conversationScrollSpy=(0,react.createRef)(),_this.userTypingBubbles=(0,react.createRef)(),_this.messagesContainer=(0,react.createRef)(),(0,mobx_esm.rC)(Messages_assertThisInitialized(_this)),_this.setupContextMenu=_this.setupContextMenu.bind(Messages_assertThisInitialized(_this)),_this.onReceiveMessage=_this.onReceiveMessage.bind(Messages_assertThisInitialized(_this)),_this.onUserIsTyping=_this.onUserIsTyping.bind(Messages_assertThisInitialized(_this)),_this.onUserStopTyping=_this.onUserStopTyping.bind(Messages_assertThisInitialized(_this)),_this._stopTyping=_this._stopTyping.bind(Messages_assertThisInitialized(_this)),_this}return Constructor=MessagesContainer,protoProps=[{key:"componentDidMount",value:function(){var _this2=this;this.props.fetchConversations(),this.props.socket.on(socketEventConsts.MESSAGES_UI_USER_TYPING,this.onUserIsTyping),this.props.socket.on(socketEventConsts.MESSAGES_UI_RECEIVE,this.onReceiveMessage),helpers_default().resizeFullHeight(),this.props.initialConversation&&this.props.fetchSingleConversation({_id:this.props.initialConversation}).then((function(){_this2.scrollToMessagesBottom(!0)}))}},{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){helpers_default().resizeAll(),helpers_default().setupScrollers(),this.setupContextMenu(),prevProps.sessionUser||!this.props.sessionUser||"true"!==this.props.showNewConvo||this.showNewConvoLoaded||(this.showNewConvoLoaded=!0,this.showUserList())}},{key:"componentWillUnmount",value:function(){this.props.unloadAccounts(),this.props.unloadConversations(),this.props.unloadSingleConversation(),this.props.socket.off(socketEventConsts.MESSAGES_UI_USER_TYPING,this.onUserIsTyping),this.props.socket.off(socketEventConsts.MESSAGES_UI_RECEIVE,this.onReceiveMessage)}},{key:"onReceiveMessage",value:function(data){data.isOwner=data.message.owner._id.toString()===this.props.sessionUser._id.toString(),this.props.receiveMessage(data);var currentConversation=this.props.messagesState.currentConversation;!data.isOwner&&currentConversation&&currentConversation.get("_id").toString()===data.message.conversation.toString()&&this.userTypingBubbles.current&&!this.userTypingBubbles.current.classList.contains("hide")&&this.userTypingBubbles.current.classList.add("hide")}},{key:"onUserIsTyping",value:function(data){var typingTimerKey="".concat(data.cid,"_").concat(data.from);this.typingTimers[typingTimerKey]&&clearTimeout(this.typingTimers[typingTimerKey]),this.typingTimers[typingTimerKey]=setTimeout(this._stopTyping,1e4,data.cid,data.from),this.props.messagesState.currentConversation&&this.props.messagesState.currentConversation.get("_id").toString()===data.cid.toString()&&(this.scrollToMessagesBottom(!1),this.userTypingBubbles.current&&this.userTypingBubbles.current.classList.contains("hide")&&this.userTypingBubbles.current.classList.remove("hide"))}},{key:"_stopTyping",value:function(cid,from){var typingTimerKey="".concat(cid,"_").concat(from);this.typingTimers[typingTimerKey]=void 0,this.props.messagesState.currentConversation&&this.props.messagesState.currentConversation.get("_id").toString()===cid.toString()&&this.userTypingBubbles.current&&!this.userTypingBubbles.current.classList.contains("hide")&&this.userTypingBubbles.current.classList.add("hide")}},{key:"onUserStopTyping",value:function(data){console.log(data)}},{key:"showUserList",value:function(e){var _this3=this;e&&e.preventDefault(),this.props.sessionUser.role.isAdmin||this.props.sessionUser.role.isAgent?this.props.fetchAccounts({type:"all",limit:-1}).then((function(){_this3.mutableUserList=_this3.props.accountsState.accounts,_this3.userListShown=!0})):this.props.fetchAccounts({type:"agents"}).then((function(){_this3.mutableUserList=_this3.props.accountsState.accounts,_this3.userListShown=!0}))}},{key:"hideUserList",value:function(e){e&&e.preventDefault(),this.props.unloadAccounts(),this.userListShown=!1}},{key:"onUserListSearchChange",value:function(e){var _this4=this;this.userListSearchText=e.target.value,this.userListSearchText.length>3?this.mutableUserList=this.props.accountsState.accounts.filter((function(i){return i.get("fullname").toLowerCase().includes(_this4.userListSearchText.toLowerCase())})):this.mutableUserList=this.props.accountsState.accounts}},{key:"onUserStartConversationClick",value:function(account){var _this5=this;if(!account||!this.props.sessionUser)return helpers_default().UI.showSnackbar("Invalid participants",!0),!1;startConversation(this.props.sessionUser._id,account.get("_id")).then((function(conversation){_this5.userListShown=!1,_this5.props.unloadAccounts(),_this5.props.unloadConversations().then((function(){_this5.props.fetchConversations()})),_this5.props.unloadSingleConversation().then((function(){_this5.singleConversationLoaded=!1,_this5.props.fetchSingleConversation({_id:conversation._id}).then((function(){_this5.scrollToMessagesBottom(!0)}))}))})).catch((function(err){helpers_default().UI.showSnackbar(err.message,!0)}))}},{key:"setupContextMenu",value:function(){var self=this;helpers_default().setupContextMenu("#conversationList > ul > li",(function(action,target){var $li=jquery_default()(target);$li.is("li")||($li=jquery_default()(target).parents("li"));var convoId=$li.attr("data-conversation-id");"delete"===action.toLowerCase()&&uikit_combined_min_default().modal.confirm("Are you sure you want to delete this conversation?",(function(){self.deleteConversation(convoId)}),(function(){}),{labels:{Ok:"YES"},confirmButtonClass:"md-btn-danger"})}))}},{key:"deleteConversation",value:function(convoId){this.props.deleteConversation({convoId})}},{key:"scrollToMessagesBottom",value:function(hideLoader){var _this6=this;setTimeout((function(){_this6.messagesContainer.current&&helpers_default().scrollToBottom(jquery_default()(_this6.messagesContainer.current),!1),hideLoader&&(_this6.singleConversationLoaded=!0)}),100)}},{key:"onConversationClicked",value:function(id){var _this7=this;this.props.messagesState.currentConversation&&this.props.messagesState.currentConversation.get("_id").toString()===id.toString()||this.props.unloadSingleConversation().then((function(){_this7.singleConversationLoaded=!1,_this7.props.fetchSingleConversation({_id:id}).then((function(){_this7.scrollToMessagesBottom(!0)}))}))}},{key:"onSendMessageKeyDown",value:function(e,cid,to){"Enter"===e.code&&"NumpadEnter"===e.code||this.props.socket.emit(socketEventConsts.MESSAGES_USER_TYPING,{cid,to,from:this.props.sessionUser._id})}},{key:"onSendMessageSubmit",value:function(e,cId,to){var _this8=this;e.preventDefault(),cId&&to&&e.target.chatMessage&&""!==e.target.chatMessage.value&&this.props.sendMessage({cId,owner:this.props.sessionUser._id,body:e.target.chatMessage.value.trim()}).then((function(res){_this8.props.socket.emit(socketEventConsts.MESSAGES_SEND,{to,from:_this8.props.sessionUser._id,message:res.message}),jquery_default()(e.target.chatMessage).val(""),_this8.scrollToMessagesBottom()}))}},{key:"render",value:function(){var _this9=this,currentConversation=this.props.messagesState.currentConversation;return react.createElement("div",null,react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"3-10",extraClass:"full-height"},react.createElement(components_PageTitle,{title:"Conversations",extraClasses:"page-title-border-right",hideBorderBottom:!0,rightComponent:react.createElement("div",{className:"uk-position-relative"},react.createElement("div",{id:"convo-actions",style:{position:"absolute",top:20,right:15}},!this.userListShown&&react.createElement("a",{title:"Start Conversation",className:"no-ajaxy",style:{display:"block",height:28},onClick:function(e){return _this9.showUserList(e)}},react.createElement("i",{className:"material-icons",style:{fontSize:"28px",fontWeight:300}},"add")),this.userListShown&&react.createElement("a",{className:"no-ajaxy",style:{height:28,lineHeight:"30px",fontSize:"16px",fontWeight:300},onClick:function(e){return _this9.hideUserList(e)}},"Cancel")))}),!this.userListShown&&react.createElement("div",{id:"conversationList",className:"page-content-left noborder full-height"},react.createElement("ul",{className:"message-items scrollable"},this.props.messagesState.conversations.map((function(convo){var partnerId=convo.get("partner").get("_id"),partnerImage=convo.get("partner").get("image")||"defaultProfile.jpg",updatedDate=helpers_default().getCalendarDate(convo.get("updatedAt")),isCurrentConversation=!(!_this9.props.messagesState.currentConversation||_this9.props.messagesState.currentConversation.toJS()._id.toString()!==convo.toJS()._id.toString());return react.createElement("li",{key:convo.get("_id"),className:(0,clsx_m.Z)(isCurrentConversation&&"active"),"data-conversation-id":convo.get("_id"),onClick:function(){return _this9.onConversationClicked(convo.get("_id"))}},react.createElement(Avatar_Avatar,{userId:partnerId,image:partnerImage}),react.createElement("div",{className:"convo-info"},react.createElement("span",{className:"message-from"},convo.get("partner").get("fullname")),react.createElement("span",{className:"message-date"},updatedDate),react.createElement("span",{className:"message-subject"},convo.get("recentMessage"))))})))),this.userListShown&&react.createElement("div",{id:"conversationUserList",className:"page-content-left noborder full-height"},react.createElement("div",{className:"search-box"},react.createElement("input",{type:"text",placeholder:"Search",value:this.userListSearchText,onChange:function(e){return _this9.onUserListSearchChange(e)}})),react.createElement("ul",{className:"message-items scrollable"},this.mutableUserList.map((function(account){var accountImage=account.get("image")||"defaultProfile.jpg";return account.get("_id").toString()===_this9.props.sessionUser._id.toString()?null:react.createElement("li",{key:account.get("_id"),onClick:function(){return _this9.onUserStartConversationClick(account)}},react.createElement(Avatar_Avatar,{userId:account.get("_id"),image:accountImage}),react.createElement("div",{className:"convo-info"},react.createElement("span",{className:"message-from"},account.get("fullname")),react.createElement("span",{className:"message-date"},account.get("title")),react.createElement("span",{className:"message-subject"},react.createElement("a",{href:"mailto:".concat(account.get("email"))},account.get("email")))))}))))),currentConversation&&react.createElement(Grid_GridItem,{width:"7-10",extraClass:"nopadding page-message uk-position-relative"},react.createElement(components_SpinLoader,{active:!this.singleConversationLoaded,animate:!0,animateDelay:300}),react.createElement("div",{ref:this.messagesContainer,className:"page-content page-content-right full-height scrollable","data-offset":41,style:{marginBottom:"41px !important"}},react.createElement("span",{className:"conversation-start"},"Conversation Started on ",currentConversation.get("createdAt")),currentConversation.get("requestingUserMeta").get("deletedAt")&&react.createElement("span",{className:"conversation-deleted"},"Conversation Deleted at ",currentConversation.get("requestingUserMeta").get("deletedAt")),react.createElement("div",{ref:this.conversationScrollSpy,className:(0,clsx_m.Z)("uk-text-center","uk-hidden")},react.createElement("i",{className:"uk-icon-refresh uk-icon-spin"})),react.createElement("div",{id:"messages"},currentConversation.get("messages").map((function(message){var ownerImage=message.get("owner").get("image")||"defaultProfile.jpg",isMessageOwner=message.get("owner").get("_id").toString()===_this9.props.sessionUser._id,formattedDate=helpers_default().formatDate(message.get("createdAt"),helpers_default().getShortDateWithTimeFormat());return react.createElement("div",{key:message.get("_id")},!isMessageOwner&&react.createElement("div",{className:"message message-left"},react.createElement("img",{src:"/uploads/users/".concat(ownerImage),alt:"Profile Image",title:formattedDate,"data-uk-tooltip":"{pos: 'left', animation: false}"}),react.createElement("div",{className:"message-body"},message.get("body"))),isMessageOwner&&react.createElement("div",{className:"message message-right"},react.createElement("div",{className:"message-body","data-uk-tooltip":"{pos:'right', animation: false}",title:formattedDate},message.get("body"))))})),react.createElement("div",{ref:this.userTypingBubbles,className:"user-is-typing-wrapper padding-10 uk-clearfix hide"},react.createElement("div",{className:"chat-user-profile smaller",style:{position:"relative",float:"left",left:0}},react.createElement("img",{className:"round profileImage",src:"/uploads/users/".concat(currentConversation.get("partner").get("image")||"defaultProfile.jpg"),alt:""})),react.createElement("div",{className:"user-is-typing hide-arrow",style:{marginLeft:40,marginTop:3,background:"#ddd",border:"none"}},react.createElement("div",{className:"dot"}),react.createElement("div",{className:"dot"}),react.createElement("div",{className:"dot"}))))),react.createElement("div",{className:"message-textbox"},react.createElement("form",{action:"#",onSubmit:function(e){return _this9.onSendMessageSubmit(e,currentConversation.get("_id"),currentConversation.get("partner").get("_id"))}},react.createElement("input",{type:"text",name:"chatMessage",placeholder:"Type your message...",onKeyDown:function(e){return _this9.onSendMessageKeyDown(e,currentConversation.get("_id"),currentConversation.get("partner").get("_id"))}}),react.createElement("button",{type:"submit"},"SEND"))))),react.createElement("ul",{className:"context-menu"},react.createElement("li",{"data-action":"delete",style:{color:"#d32f2f"}},"Delete Conversation")))}}],protoProps&&Messages_defineProperties(Constructor.prototype,protoProps),staticProps&&Messages_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MessagesContainer}(react.Component),Messages_descriptor=Messages_applyDecoratedDescriptor(Messages_class2.prototype,"userListShown",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Messages_descriptor2=Messages_applyDecoratedDescriptor(Messages_class2.prototype,"userListSearchText",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Messages_descriptor3=Messages_applyDecoratedDescriptor(Messages_class2.prototype,"mutableUserList",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Messages_descriptor4=Messages_applyDecoratedDescriptor(Messages_class2.prototype,"singleConversationLoaded",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Messages_descriptor5=Messages_applyDecoratedDescriptor(Messages_class2.prototype,"typingTimers",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Messages_descriptor6=Messages_applyDecoratedDescriptor(Messages_class2.prototype,"showNewConvoLoaded",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Messages_class=Messages_class2))||Messages_class;MessagesContainer.propTypes={sessionUser:prop_types_default().object,socket:prop_types_default().object.isRequired,fetchAccounts:prop_types_default().func.isRequired,unloadAccounts:prop_types_default().func.isRequired,accountsState:prop_types_default().object.isRequired,fetchConversations:prop_types_default().func.isRequired,unloadConversations:prop_types_default().func.isRequired,deleteConversation:prop_types_default().func.isRequired,fetchSingleConversation:prop_types_default().func.isRequired,setCurrentConversation:prop_types_default().func.isRequired,unloadSingleConversation:prop_types_default().func.isRequired,sendMessage:prop_types_default().func.isRequired,receiveMessage:prop_types_default().func.isRequired,messagesState:prop_types_default().object.isRequired,initialConversation:prop_types_default().string,showNewConvo:prop_types_default().string};const Messages=(0,es.$j)((function(state){return{sessionUser:state.shared.sessionUser,socket:state.shared.socket,messagesState:state.messagesState,accountsState:state.accountsState}}),{fetchAccounts:accounts_fetchAccounts,unloadAccounts,fetchConversations:messages_fetchConversations,unloadConversations:messages_unloadConversations,deleteConversation:messages_deleteConversation,fetchSingleConversation:messages_fetchSingleConversation,setCurrentConversation,unloadSingleConversation:messages_unloadSingleConversation,sendMessage:messages_sendMessage,receiveMessage})(MessagesContainer),reports_generateReport=(0,createAction.Z)(GENERATE_REPORT.ACTION,(payload=>payload),(()=>({thunk:!0})));function ticketsByGroups_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return ticketsByGroups_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ticketsByGroups_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ticketsByGroups_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const ticketsByGroups=function(){var groupsState=(0,es.v9)((function(state){return state.groupsState})),dispatch=(0,es.I0)(),_useState2=ticketsByGroups_slicedToArray((0,react.useState)([]),2),groups=_useState2[0],setGroups=_useState2[1],_useState4=ticketsByGroups_slicedToArray((0,react.useState)(""),2),startDate=_useState4[0],setStartDate=_useState4[1],_useState6=ticketsByGroups_slicedToArray((0,react.useState)(""),2),endDate=_useState6[0],setEndDate=_useState6[1],_useState8=ticketsByGroups_slicedToArray((0,react.useState)([]),2),selectedGroups=_useState8[0],setSelectedGroups=_useState8[1];(0,react.useEffect)((function(){helpers_default().UI.inputs(),helpers_default().formvalidator(),dispatch(groups_fetchGroups()),setStartDate(moment_timezone_default()().utc(!0).subtract(30,"days").format(helpers_default().getShortDateFormat())),setEndDate(moment_timezone_default()().utc(!0).format(helpers_default().getShortDateFormat()))}),[]),(0,react.useEffect)((function(){helpers_default().UI.reRenderInputs()}),[startDate,endDate]),(0,react.useEffect)((function(){var g=groupsState.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray();setGroups(g)}),[groupsState]);return react.createElement("div",null,react.createElement(components_TruCard,{hover:!1,header:react.createElement("div",{style:{padding:"10px 15px"}},react.createElement("h4",{style:{width:"100%",textAlign:"left",fontSize:"14px",margin:0}},"Tickets by Groups")),extraContentClass:"nopadding",content:react.createElement("div",null,react.createElement("p",{className:"padding-15 nomargin uk-text-muted"},"Please select the start and end dates and which groups to include in the report."),react.createElement("hr",{className:"uk-margin-large-bottom",style:{marginTop:0}}),react.createElement("div",{className:"padding-15"},react.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),dispatch(reports_generateReport({type:"tickets_by_group",filename:"report_tickets_by_group__".concat(moment_timezone_default()(startDate).format("MMDDYYYY")),startDate,endDate,groups:selectedGroups}))}(e)}},react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("label",{htmlFor:"filterDate_Start",className:"uk-form-label nopadding nomargin"},"Start Date"),react.createElement(components_DatePicker,{name:"filterDate_start",format:helpers_default().getShortDateFormat(),onChange:function(e){setStartDate(e.target.value)},value:startDate})),react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("label",{htmlFor:"filterDate_End",className:"uk-form-label nopadding nomargin"},"End Date"),react.createElement(components_DatePicker,{name:"filterDate_End",format:helpers_default().getShortDateFormat(),onChange:function(e){setEndDate(e.target.value)},value:endDate})),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",{className:"uk-margin-medium-top uk-margin-medium-bottom"},react.createElement("label",{htmlFor:"groups",className:"uk-form-label"},"Groups"),react.createElement(components_SingleSelect,{multiple:!0,items:groups,value:selectedGroups,onSelectChange:function(e,value){setSelectedGroups(value)}})),react.createElement("div",null,react.createElement(components_Button,{text:"Generate",type:"submit",style:"primary",waves:!0,small:!0})))))))}))};function ticketsByPriorities_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return ticketsByPriorities_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ticketsByPriorities_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ticketsByPriorities_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const ticketsByPriorities=function(){var groupsState=(0,es.v9)((function(state){return state.groupsState})),ticketsState=(0,es.v9)((function(state){return state.ticketsState})),dispatch=(0,es.I0)(),_useState2=ticketsByPriorities_slicedToArray((0,react.useState)([]),2),groups=_useState2[0],setGroups=_useState2[1],_useState4=ticketsByPriorities_slicedToArray((0,react.useState)([]),2),priorities=_useState4[0],setPriorities=_useState4[1],_useState6=ticketsByPriorities_slicedToArray((0,react.useState)(!1),2),isLoading=_useState6[0],setIsLoading=_useState6[1],_useState8=ticketsByPriorities_slicedToArray((0,react.useState)(""),2),startDate=_useState8[0],setStartDate=_useState8[1],_useState10=ticketsByPriorities_slicedToArray((0,react.useState)(""),2),endDate=_useState10[0],setEndDate=_useState10[1],_useState12=ticketsByPriorities_slicedToArray((0,react.useState)([]),2),selectedGroups=_useState12[0],setSelectedGroups=_useState12[1],_useState14=ticketsByPriorities_slicedToArray((0,react.useState)([]),2),selectedPriorities=_useState14[0],setSelectedPriorities=_useState14[1];(0,react.useEffect)((function(){return helpers_default().UI.inputs(),helpers_default().formvalidator(),dispatch(groups_fetchGroups()),dispatch(tickets_fetchPriorities()),setStartDate(moment_timezone_default()().utc(!0).subtract(30,"days").format(helpers_default().getShortDateFormat())),setEndDate(moment_timezone_default()().utc(!0).format(helpers_default().getShortDateFormat())),function(){dispatch(unloadGroups())}}),[]),(0,react.useEffect)((function(){helpers_default().UI.reRenderInputs()}),[startDate,endDate]),(0,react.useEffect)((function(){var g=groupsState.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray();g.push({text:"All",value:"all"}),setGroups(g)}),[groupsState]),(0,react.useEffect)((function(){var p=ticketsState.priorities.map((function(priority){return{text:priority.get("name"),value:priority.get("_id")}})).toArray();setPriorities(p)}),[ticketsState]);return react.createElement("div",null,react.createElement(components_TruCard,{hover:!1,header:react.createElement("div",{style:{padding:"10px 15px"}},react.createElement("h4",{style:{width:"100%",textAlign:"left",fontSize:"14px",margin:0}},"Tickets by Priorities")),extraContentClass:"nopadding",content:react.createElement("div",null,react.createElement(components_SpinLoader,{active:isLoading}),react.createElement("p",{className:"padding-15 nomargin uk-text-muted"},"Please select the start and end dates and which groups to include in the report."),react.createElement("hr",{className:"uk-margin-large-bottom",style:{marginTop:0}}),react.createElement("div",{className:"padding-15"},react.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),isLoading||(setIsLoading(!0),dispatch(reports_generateReport({type:"tickets_by_priority",filename:"report_tickets_by_priority__".concat(moment_timezone_default()(startDate).format("MMDDYYYY")),startDate,endDate,groups:selectedGroups,priorities:selectedPriorities})).then((function(){setIsLoading(!1)})))}(e)}},react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("label",{htmlFor:"filterDate_Start",className:"uk-form-label nopadding nomargin"},"Start Date"),react.createElement(components_DatePicker,{name:"filterDate_start",format:helpers_default().getShortDateFormat(),onChange:function(e){setStartDate(e.target.value)},value:startDate})),react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("label",{htmlFor:"filterDate_End",className:"uk-form-label nopadding nomargin"},"End Date"),react.createElement(components_DatePicker,{name:"filterDate_End",format:helpers_default().getShortDateFormat(),onChange:function(e){setEndDate(e.target.value)},value:endDate})),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",{className:"uk-margin-medium-top uk-margin-medium-bottom"},react.createElement("label",{htmlFor:"groups",className:"uk-form-label"},"Groups"),react.createElement(components_SingleSelect,{multiple:!0,items:groups,value:selectedGroups,onSelectChange:function(e,value){setSelectedGroups(value)}}))),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",{className:"uk-margin-medium-top uk-margin-medium-bottom"},react.createElement("label",{htmlFor:"priorities"},"Priorities"),react.createElement(components_SingleSelect,{multiple:!0,items:priorities,value:selectedPriorities,onSelectChange:function(e,value){setSelectedPriorities(value)}}))),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",null,react.createElement(components_Button,{disabled:isLoading,text:"Generate",type:"submit",style:"primary",waves:!0,small:!0})))))))}))};function ticketsByStatus_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return ticketsByStatus_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ticketsByStatus_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ticketsByStatus_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const ticketsByStatus=function(){var groupsState=(0,es.v9)((function(state){return state.groupsState})),dispatch=(0,es.I0)(),_useState2=ticketsByStatus_slicedToArray((0,react.useState)([]),2),groups=_useState2[0],setGroups=_useState2[1],_useState4=ticketsByStatus_slicedToArray((0,react.useState)(!1),2),isLoading=_useState4[0],setIsLoading=_useState4[1],_useState6=ticketsByStatus_slicedToArray((0,react.useState)(""),2),startDate=_useState6[0],setStartDate=_useState6[1],_useState8=ticketsByStatus_slicedToArray((0,react.useState)(""),2),endDate=_useState8[0],setEndDate=_useState8[1],_useState10=ticketsByStatus_slicedToArray((0,react.useState)([]),2),selectedGroups=_useState10[0],setSelectedGroups=_useState10[1],_useState12=ticketsByStatus_slicedToArray((0,react.useState)([]),2),selectedStatuses=_useState12[0],setSelectedStatuses=_useState12[1];(0,react.useEffect)((function(){return helpers_default().UI.inputs(),helpers_default().formvalidator(),dispatch(groups_fetchGroups()),setStartDate(moment_timezone_default()().utc(!0).subtract(30,"days").format(helpers_default().getShortDateFormat())),setEndDate(moment_timezone_default()().utc(!0).format(helpers_default().getShortDateFormat())),function(){dispatch(unloadGroups())}}),[]),(0,react.useEffect)((function(){helpers_default().UI.reRenderInputs()}),[startDate,endDate]),(0,react.useEffect)((function(){var g=groupsState.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray();g.push({text:"All",value:"all"}),setGroups(g)}),[groupsState]);return react.createElement("div",null,react.createElement(components_TruCard,{hover:!1,header:react.createElement("div",{style:{padding:"10px 15px"}},react.createElement("h4",{style:{width:"100%",textAlign:"left",fontSize:"14px",margin:0}},"Tickets by Status")),extraContentClass:"nopadding",content:react.createElement("div",null,react.createElement(components_SpinLoader,{active:isLoading}),react.createElement("p",{className:"padding-15 nomargin uk-text-muted"},"Please select the start and end dates and which groups to include in the report."),react.createElement("hr",{className:"uk-margin-large-bottom",style:{marginTop:0}}),react.createElement("div",{className:"padding-15"},react.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),isLoading||(setIsLoading(!0),dispatch(reports_generateReport({type:"tickets_by_status",filename:"report_tickets_by_status__".concat(moment_timezone_default()(startDate).format("MMDDYYYY")),startDate,endDate,groups:selectedGroups,status:selectedStatuses})).then((function(){setIsLoading(!1)})))}(e)}},react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("label",{htmlFor:"filterDate_Start",className:"uk-form-label nopadding nomargin"},"Start Date"),react.createElement(components_DatePicker,{name:"filterDate_start",format:helpers_default().getShortDateFormat(),onChange:function(e){setStartDate(e.target.value)},value:startDate})),react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("label",{htmlFor:"filterDate_End",className:"uk-form-label nopadding nomargin"},"End Date"),react.createElement(components_DatePicker,{name:"filterDate_End",format:helpers_default().getShortDateFormat(),onChange:function(e){setEndDate(e.target.value)},value:endDate})),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",{className:"uk-margin-medium-top uk-margin-medium-bottom"},react.createElement("label",{htmlFor:"groups",className:"uk-form-label"},"Groups"),react.createElement(components_SingleSelect,{multiple:!0,items:groups,value:selectedGroups,onSelectChange:function(e,value){setSelectedGroups(value)}}))),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",{className:"uk-margin-medium-top uk-margin-medium-bottom"},react.createElement("label",{htmlFor:"status"},"Status"),react.createElement(components_SingleSelect,{id:"status",multiple:!0,items:[{text:"New",value:0},{text:"Open",value:1},{text:"Pending",value:2},{text:"Closed",value:3}],value:selectedStatuses,onSelectChange:function(e,value){setSelectedStatuses(value)}}))),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",null,react.createElement(components_Button,{disabled:isLoading,text:"Generate",type:"submit",style:"primary",waves:!0,small:!0})))))))}))};function ticketsByTags_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return ticketsByTags_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ticketsByTags_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ticketsByTags_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const ticketsByTags=function(){var groupsState=(0,es.v9)((function(state){return state.groupsState})),tagsSettings=(0,es.v9)((function(state){return state.tagsSettings})),dispatch=(0,es.I0)(),_useState2=ticketsByTags_slicedToArray((0,react.useState)([]),2),groups=_useState2[0],setGroups=_useState2[1],_useState4=ticketsByTags_slicedToArray((0,react.useState)([]),2),tags=_useState4[0],setTags=_useState4[1],_useState6=ticketsByTags_slicedToArray((0,react.useState)(!1),2),isLoading=_useState6[0],setIsLoading=_useState6[1],_useState8=ticketsByTags_slicedToArray((0,react.useState)(""),2),startDate=_useState8[0],setStartDate=_useState8[1],_useState10=ticketsByTags_slicedToArray((0,react.useState)(""),2),endDate=_useState10[0],setEndDate=_useState10[1],_useState12=ticketsByTags_slicedToArray((0,react.useState)([]),2),selectedGroups=_useState12[0],setSelectedGroups=_useState12[1],_useState14=ticketsByTags_slicedToArray((0,react.useState)([]),2),selectedTags=_useState14[0],setSelectedTags=_useState14[1];(0,react.useEffect)((function(){return helpers_default().UI.inputs(),helpers_default().formvalidator(),dispatch(groups_fetchGroups()),dispatch(tickets_getTagsWithPage({limit:-1,page:0})),setStartDate(moment_timezone_default()().utc(!0).subtract(30,"days").format(helpers_default().getShortDateFormat())),setEndDate(moment_timezone_default()().utc(!0).format(helpers_default().getShortDateFormat())),function(){dispatch(unloadGroups())}}),[]),(0,react.useEffect)((function(){helpers_default().UI.reRenderInputs()}),[startDate,endDate]),(0,react.useEffect)((function(){var g=groupsState.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray();g.push({text:"All",value:"all"}),setGroups(g)}),[groupsState]),(0,react.useEffect)((function(){var t=tagsSettings.tags.map((function(tag){return{text:tag.get("name"),value:tag.get("_id")}})).toArray();setTags(t)}),[tagsSettings]);return react.createElement("div",null,react.createElement(components_TruCard,{hover:!1,header:react.createElement("div",{style:{padding:"10px 15px"}},react.createElement("h4",{style:{width:"100%",textAlign:"left",fontSize:"14px",margin:0}},"Tickets by Tags")),extraContentClass:"nopadding",content:react.createElement("div",null,react.createElement(components_SpinLoader,{active:isLoading}),react.createElement("p",{className:"padding-15 nomargin uk-text-muted"},"Please select the start and end dates and which groups to include in the report."),react.createElement("hr",{className:"uk-margin-large-bottom",style:{marginTop:0}}),react.createElement("div",{className:"padding-15"},react.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),isLoading||(setIsLoading(!0),dispatch(reports_generateReport({type:"tickets_by_tags",filename:"report_tickets_by_tags__".concat(moment_timezone_default()(startDate).format("MMDDYYYY")),startDate,endDate,groups:selectedGroups,tags:selectedTags})).then((function(){setIsLoading(!1)})))}(e)}},react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("label",{htmlFor:"filterDate_Start",className:"uk-form-label nopadding nomargin"},"Start Date"),react.createElement(components_DatePicker,{name:"filterDate_start",format:helpers_default().getShortDateFormat(),onChange:function(e){setStartDate(e.target.value)},value:startDate})),react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("label",{htmlFor:"filterDate_End",className:"uk-form-label nopadding nomargin"},"End Date"),react.createElement(components_DatePicker,{name:"filterDate_End",format:helpers_default().getShortDateFormat(),onChange:function(e){setEndDate(e.target.value)},value:endDate})),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",{className:"uk-margin-medium-top uk-margin-medium-bottom"},react.createElement("label",{htmlFor:"groups",className:"uk-form-label"},"Groups"),react.createElement(components_SingleSelect,{multiple:!0,items:groups,value:selectedGroups,onSelectChange:function(e,value){setSelectedGroups(value)}}))),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",{className:"uk-margin-medium-top uk-margin-medium-bottom"},react.createElement("label",{htmlFor:"priorities"},"Tags"),react.createElement(components_SingleSelect,{multiple:!0,items:tags,value:selectedTags,onSelectChange:function(e,value){setSelectedTags(value)}}))),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",null,react.createElement(components_Button,{disabled:isLoading,text:"Generate",type:"submit",style:"primary",waves:!0,small:!0})))))))}))};function ticketsByTypes_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return ticketsByTypes_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ticketsByTypes_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ticketsByTypes_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const ticketsByTypes=function(){var groupsState=(0,es.v9)((function(state){return state.groupsState})),ticketsState=(0,es.v9)((function(state){return state.ticketsState})),dispatch=(0,es.I0)(),_useState2=ticketsByTypes_slicedToArray((0,react.useState)([]),2),groups=_useState2[0],setGroups=_useState2[1],_useState4=ticketsByTypes_slicedToArray((0,react.useState)([]),2),types=_useState4[0],setTypes=_useState4[1],_useState6=ticketsByTypes_slicedToArray((0,react.useState)(!1),2),isLoading=_useState6[0],setIsLoading=_useState6[1],_useState8=ticketsByTypes_slicedToArray((0,react.useState)(""),2),startDate=_useState8[0],setStartDate=_useState8[1],_useState10=ticketsByTypes_slicedToArray((0,react.useState)(""),2),endDate=_useState10[0],setEndDate=_useState10[1],_useState12=ticketsByTypes_slicedToArray((0,react.useState)([]),2),selectedGroups=_useState12[0],setSelectedGroups=_useState12[1],_useState14=ticketsByTypes_slicedToArray((0,react.useState)([]),2),selectedTypes=_useState14[0],setSelectedTypes=_useState14[1];(0,react.useEffect)((function(){return helpers_default().UI.inputs(),helpers_default().formvalidator(),dispatch(groups_fetchGroups()),dispatch(tickets_fetchTicketTypes()),setStartDate(moment_timezone_default()().utc(!0).subtract(30,"days").format(helpers_default().getShortDateFormat())),setEndDate(moment_timezone_default()().utc(!0).format(helpers_default().getShortDateFormat())),function(){dispatch(unloadGroups())}}),[]),(0,react.useEffect)((function(){helpers_default().UI.reRenderInputs()}),[startDate,endDate]),(0,react.useEffect)((function(){var g=groupsState.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray();g.push({text:"All",value:"all"}),setGroups(g)}),[groupsState]),(0,react.useEffect)((function(){var t=ticketsState.types.map((function(type){return{text:type.get("name"),value:type.get("_id")}})).toArray();setTypes(t)}),[ticketsState]);return react.createElement("div",null,react.createElement(components_TruCard,{hover:!1,header:react.createElement("div",{style:{padding:"10px 15px"}},react.createElement("h4",{style:{width:"100%",textAlign:"left",fontSize:"14px",margin:0}},"Tickets by Types")),extraContentClass:"nopadding",content:react.createElement("div",null,react.createElement(components_SpinLoader,{active:isLoading}),react.createElement("p",{className:"padding-15 nomargin uk-text-muted"},"Please select the start and end dates and which groups to include in the report."),react.createElement("hr",{className:"uk-margin-large-bottom",style:{marginTop:0}}),react.createElement("div",{className:"padding-15"},react.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),isLoading||(setIsLoading(!0),dispatch(reports_generateReport({type:"tickets_by_type",filename:"report_tickets_by_type__".concat(moment_timezone_default()(startDate).format("MMDDYYYY")),startDate,endDate,groups:selectedGroups,types:selectedTypes})).then((function(){setIsLoading(!1)})))}(e)}},react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("label",{htmlFor:"filterDate_Start",className:"uk-form-label nopadding nomargin"},"Start Date"),react.createElement(components_DatePicker,{name:"filterDate_start",format:helpers_default().getShortDateFormat(),onChange:function(e){setStartDate(e.target.value)},value:startDate})),react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("label",{htmlFor:"filterDate_End",className:"uk-form-label nopadding nomargin"},"End Date"),react.createElement(components_DatePicker,{name:"filterDate_End",format:helpers_default().getShortDateFormat(),onChange:function(e){setEndDate(e.target.value)},value:endDate})),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",{className:"uk-margin-medium-top uk-margin-medium-bottom"},react.createElement("label",{htmlFor:"groups",className:"uk-form-label"},"Groups"),react.createElement(components_SingleSelect,{multiple:!0,items:groups,value:selectedGroups,onSelectChange:function(e,value){setSelectedGroups(value)}}))),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",{className:"uk-margin-medium-top uk-margin-medium-bottom"},react.createElement("label",{htmlFor:"priorities"},"Types"),react.createElement(components_SingleSelect,{multiple:!0,items:types,value:selectedTypes,onSelectChange:function(e,value){setSelectedTypes(value)}}))),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",null,react.createElement(components_Button,{disabled:isLoading,text:"Generate",type:"submit",style:"primary",waves:!0,small:!0})))))))}))};function ticketsByAssignee_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return ticketsByAssignee_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ticketsByAssignee_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ticketsByAssignee_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const ticketsByAssignee=function(){var groupsState=(0,es.v9)((function(state){return state.groupsState})),accountsState=(0,es.v9)((function(state){return state.accountsState})),dispatch=(0,es.I0)(),_useState2=ticketsByAssignee_slicedToArray((0,react.useState)([]),2),groups=_useState2[0],setGroups=_useState2[1],_useState4=ticketsByAssignee_slicedToArray((0,react.useState)([]),2),agents=_useState4[0],setAgents=_useState4[1],_useState6=ticketsByAssignee_slicedToArray((0,react.useState)(!1),2),isLoading=_useState6[0],setIsLoading=_useState6[1],_useState8=ticketsByAssignee_slicedToArray((0,react.useState)(""),2),startDate=_useState8[0],setStartDate=_useState8[1],_useState10=ticketsByAssignee_slicedToArray((0,react.useState)(""),2),endDate=_useState10[0],setEndDate=_useState10[1],_useState12=ticketsByAssignee_slicedToArray((0,react.useState)([]),2),selectedGroups=_useState12[0],setSelectedGroups=_useState12[1],_useState14=ticketsByAssignee_slicedToArray((0,react.useState)([]),2),selectedAssignee=_useState14[0],setSelectedAssignee=_useState14[1];(0,react.useEffect)((function(){return helpers_default().UI.inputs(),helpers_default().formvalidator(),dispatch(groups_fetchGroups()),dispatch(accounts_fetchAccounts({type:"agents"})),setStartDate(moment_timezone_default()().utc(!0).subtract(30,"days").format(helpers_default().getShortDateFormat())),setEndDate(moment_timezone_default()().utc(!0).format(helpers_default().getShortDateFormat())),function(){dispatch(unloadGroups()),dispatch(unloadAccounts())}}),[]),(0,react.useEffect)((function(){helpers_default().UI.reRenderInputs()}),[startDate,endDate]),(0,react.useEffect)((function(){var g=groupsState.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray();g.push({text:"All",value:"all"}),setGroups(g)}),[groupsState]),(0,react.useEffect)((function(){var a=accountsState.accounts.map((function(account){return{text:account.get("fullname"),value:account.get("_id")}})).toArray();setAgents(a)}),[accountsState]);return react.createElement("div",null,react.createElement(components_TruCard,{hover:!1,header:react.createElement("div",{style:{padding:"10px 15px"}},react.createElement("h4",{style:{width:"100%",textAlign:"left",fontSize:"14px",margin:0}},"Tickets by Assignee")),extraContentClass:"nopadding",content:react.createElement("div",null,react.createElement(components_SpinLoader,{active:isLoading}),react.createElement("p",{className:"padding-15 nomargin uk-text-muted"},"Please select the start and end dates and which groups to include in the report."),react.createElement("hr",{className:"uk-margin-large-bottom",style:{marginTop:0}}),react.createElement("div",{className:"padding-15"},react.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),isLoading||(setIsLoading(!0),dispatch(reports_generateReport({type:"tickets_by_assignee",filename:"report_tickets_by_assignee__".concat(moment_timezone_default()(startDate).format("MMDDYYYY")),startDate,endDate,groups:selectedGroups,assignee:selectedAssignee})).then((function(){setIsLoading(!1)})))}(e)}},react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("label",{htmlFor:"filterDate_Start",className:"uk-form-label nopadding nomargin"},"Start Date"),react.createElement(components_DatePicker,{name:"filterDate_start",format:helpers_default().getShortDateFormat(),onChange:function(e){setStartDate(e.target.value)},value:startDate})),react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("label",{htmlFor:"filterDate_End",className:"uk-form-label nopadding nomargin"},"End Date"),react.createElement(components_DatePicker,{name:"filterDate_End",format:helpers_default().getShortDateFormat(),onChange:function(e){setEndDate(e.target.value)},value:endDate})),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",{className:"uk-margin-medium-top uk-margin-medium-bottom"},react.createElement("label",{htmlFor:"groups",className:"uk-form-label"},"Groups"),react.createElement(components_SingleSelect,{multiple:!0,items:groups,value:selectedGroups,onSelectChange:function(e,value){setSelectedGroups(value)}}))),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",{className:"uk-margin-medium-top uk-margin-medium-bottom"},react.createElement("label",{htmlFor:"priorities"},"Assignee"),react.createElement(components_SingleSelect,{multiple:!0,items:agents,value:selectedAssignee,onSelectChange:function(e,value){setSelectedAssignee(value)}}))),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("div",null,react.createElement(components_Button,{disabled:isLoading,text:"Generate",type:"submit",style:"primary",waves:!0,small:!0})))))))}))};function Reports_typeof(obj){return Reports_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Reports_typeof(obj)}var Reports_class,Reports_class2,Reports_descriptor;function Reports_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Reports_setPrototypeOf(o,p){return Reports_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},Reports_setPrototypeOf(o,p)}function Reports_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Reports_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Reports_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Reports_possibleConstructorReturn(this,result)}}function Reports_possibleConstructorReturn(self,call){if(call&&("object"===Reports_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Reports_assertThisInitialized(self)}function Reports_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Reports_getPrototypeOf(o){return Reports_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Reports_getPrototypeOf(o)}var ReportsContainer=(0,mobxreact_esm.Pi)((Reports_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Reports_setPrototypeOf(subClass,superClass)}(ReportsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Reports_createSuper(ReportsContainer);function ReportsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ReportsContainer),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"selectedReport",Reports_descriptor,Reports_assertThisInitialized(_this)),(0,mobx_esm.rC)(Reports_assertThisInitialized(_this)),_this}return Constructor=ReportsContainer,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().resizeFullHeight()}},{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){helpers_default().resizeFullHeight()}},{key:"onSelectReportClicked",value:function(e,type){e.preventDefault(),this.selectedReport=type}},{key:"render",value:function(){var _this2=this;return react.createElement(react.Fragment,null,react.createElement(components_PageTitle,{title:"Generate Report"}),react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"1-4",extraClass:"full-height"},react.createElement(components_TruCard,{fullSize:!0,hover:!1,extraContentClass:"nopadding",content:react.createElement("div",null,react.createElement("h6",{style:{padding:"15px 30px",margin:0,fontSize:"14px"}},"Select Report"),react.createElement("hr",{className:"nomargin"}),react.createElement("div",{style:{padding:"15px 30px"}},react.createElement("ul",{style:{margin:0,padding:0,listStyle:"none"}},react.createElement("li",{style:{marginBottom:5}},react.createElement("a",{href:"#",className:"no-ajaxy",onClick:function(e){return _this2.onSelectReportClicked(e,"tickets_by_groups")}},"Tickets by Groups")),react.createElement("li",null,react.createElement("a",{href:"#",className:"no-ajaxy",onClick:function(e){return _this2.onSelectReportClicked(e,"tickets_by_priorities")}},"Tickets by Priorities")),react.createElement("li",null,react.createElement("a",{href:"#",className:"no-ajaxy",onClick:function(e){return _this2.onSelectReportClicked(e,"tickets_by_status")}},"Tickets by Status")),react.createElement("li",null,react.createElement("a",{href:"#",className:"no-ajaxy",onClick:function(e){return _this2.onSelectReportClicked(e,"tickets_by_tags")}},"Tickets by Tags")),react.createElement("li",null,react.createElement("a",{href:"#",className:"no-ajaxy",onClick:function(e){return _this2.onSelectReportClicked(e,"tickets_by_types")}},"Tickets by Types")),react.createElement("li",null,react.createElement("a",{href:"#",className:"no-ajaxy",onClick:function(e){return _this2.onSelectReportClicked(e,"tickets_by_assignee")}},"Tickets by Assignee")))))})),react.createElement(Grid_GridItem,{width:"3-4",extraClass:"nopadding"},react.createElement("div",{style:{padding:"15px 25px"}},react.createElement("div",null,!this.selectedReport&&react.createElement("h3",{className:"uk-text-muted",style:{fontWeight:300,opacity:.7}},"Please select a report type"),"tickets_by_groups"===this.selectedReport&&react.createElement(ticketsByGroups,null),"tickets_by_priorities"===this.selectedReport&&react.createElement(ticketsByPriorities,null),"tickets_by_status"===this.selectedReport&&react.createElement(ticketsByStatus,null),"tickets_by_tags"===this.selectedReport&&react.createElement(ticketsByTags,null),"tickets_by_types"===this.selectedReport&&react.createElement(ticketsByTypes,null),"tickets_by_assignee"===this.selectedReport&&react.createElement(ticketsByAssignee,null))))))}}])&&Reports_defineProperties(Constructor.prototype,protoProps),staticProps&&Reports_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ReportsContainer}(react.Component),Reports_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(Reports_class2.prototype,"selectedReport",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Reports_class=Reports_class2))||Reports_class;ReportsContainer.propTypes={};const Reports=(0,es.$j)((function(state){return{}}),{})(ReportsContainer);function About_typeof(obj){return About_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},About_typeof(obj)}function About_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function About_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function About_setPrototypeOf(o,p){return About_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},About_setPrototypeOf(o,p)}function About_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=About_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=About_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return About_possibleConstructorReturn(this,result)}}function About_possibleConstructorReturn(self,call){if(call&&("object"===About_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function About_getPrototypeOf(o){return About_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},About_getPrototypeOf(o)}var AboutContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&About_setPrototypeOf(subClass,superClass)}(AboutContainer,_React$Component);var Constructor,protoProps,staticProps,_super=About_createSuper(AboutContainer);function AboutContainer(){return About_classCallCheck(this,AboutContainer),_super.apply(this,arguments)}return Constructor=AboutContainer,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().setupScrollers()}},{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){helpers_default().resizeAll()}},{key:"render",value:function(){var _this=this;return react.createElement("div",{className:"nopadding page-content"},react.createElement("div",{className:"uk-grid full-height scrollable",style:{padding:"0 15px"}},react.createElement("div",{className:"uk-width-1-2 uk-position-relative",style:{padding:"25px 0 0 0"}},react.createElement("span",{style:{position:"absolute",top:7,left:35,fontSize:"11px"},className:"uk-text-muted"},"Powered by"),react.createElement("svg",{version:"1.1",id:"logosvg",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 288.9 70.1",xmlSpace:"preserve",style:{width:150,marginBottom:25,marginLeft:40}},react.createElement("path",{className:"st0",d:"M28.5,28.4c-0.1,1.6-0.7,3.4-1.6,5.4c-2.4-0.3-4.6-0.4-6.8-0.4h-1.7c-2.9,13.9-4.3,22.6-4.3,26.1\r c0,1.8,0.4,2.7,1.2,2.7c0.8,0,2.9-0.8,6.2-2.3l1.7,3.1C17.7,67.7,12.5,70,7.8,70c-2.2,0-4-0.7-5.4-2.1c-1.4-1.4-2.1-3.2-2.1-5.5\r c0-2.3,0.3-4.9,0.8-7.7c0.5-2.9,1.3-6.4,2.2-10.6c0.9-4.2,1.6-7.5,2.1-10.1c-2.3,0.2-4,0.4-5.2,0.6c-0.1-0.8-0.2-1.8-0.2-3\r c0-1.3,0.1-2.3,0.3-3.1h5.9c0.5-3.4,0.8-6.6,0.8-9.6L6.8,16v-0.3c4.9-1.7,9.5-2.5,13.8-2.5c0.2,1.3,0.4,2.8,0.4,4.7\r c0,1.9-0.5,5.4-1.6,10.6H28.5z"}),react.createElement("path",{className:"st0",d:"M29.6,69.1H29c-0.1-0.5-0.2-1.6-0.2-3.4c0-1.8,0.8-6.6,2.5-14.4c1.7-7.8,2.5-12.3,2.5-13.4\r c0-1.9-0.9-4.1-2.6-6.4l-0.8-1.1l0.1-1.2c3.4-0.9,8.8-1.4,16.2-1.4c0.8,1.6,1.1,3.9,1.1,6.8c0.7-1.1,2.1-2.6,4.3-4.5\r c2.2-1.9,4.4-2.8,6.8-2.8c3.4,0,5.1,2.9,5.1,8.8c-0.3,0.4-0.7,0.9-1.3,1.5c-0.5,0.6-1.6,1.4-3.2,2.5c-1.6,1.1-3.1,1.7-4.6,2\r c-0.1,0-0.6-0.8-1.6-2.5c-1-1.7-1.8-2.5-2.3-2.5c-1.6,0.6-2.9,1.5-4.1,2.8c-2.9,12.9-4.3,21.3-4.3,25.1c0,1.4,0,2.3,0.1,2.9\r C40.5,68.7,36.2,69.1,29.6,69.1z"}),react.createElement("path",{className:"st0",d:"M62.7,61.8c0-2.7,0.8-7.2,2.4-13.7c1.6-6.5,2.4-10.4,2.4-11.9c0-1.5-1.1-3.4-3.4-5.9l0.1-1.2\r c4.3-0.9,9.9-1.3,16.8-1.3c0.3,0.8,0.5,2.3,0.5,4.4c0,2.1-0.9,6.7-2.6,13.6c-1.8,6.9-2.6,11.3-2.6,12.9s0.6,2.5,1.9,2.5\r c1.8,0,3.9-0.7,6.3-2c0.3-1.5,0.9-4.4,1.9-8.6c2.3-10,3.4-17.2,3.4-21.5c2.2-0.9,6.1-1.3,11.8-1.3h1.8c0,2.9-0.9,8.7-2.6,17.2\r c-1.8,8.5-2.6,13.5-2.6,15c0,1.5,0.3,2.2,0.9,2.2c0.4,0,2.2-0.8,5.3-2.3l1.8,3c-5.6,4.6-10.4,6.9-14.6,6.9c-2,0-3.7-0.6-5.1-1.7\r c-1.4-1.1-2.2-2.6-2.4-4.4c-5.1,4.1-9.7,6.2-13.8,6.2c-2.2,0-4-0.7-5.4-2.2C63.4,66.5,62.7,64.4,62.7,61.8z"}),react.createElement("path",{className:"st0",d:"M153.2,63.1c-5.3,4.6-10,6.8-14,6.8c-4,0-6.4-2-7-6c-1.9,1.9-4,3.3-6.3,4.4c-2.3,1.1-4.3,1.6-6.1,1.6\r c-3,0-5.6-1.3-7.7-3.9c-2.1-2.6-3.2-6.7-3.2-12.2c0-8.3,1.8-14.7,5.3-19.5c3.5-4.7,7.5-7.1,11.9-7.1c4.4,0,8.1,1,11.1,3\r c1.9-10.1,2.9-18.1,2.9-23.9l-0.5-3.9c4.7-1.6,9.3-2.4,13.8-2.4c0.5,1.1,0.8,2.3,0.8,3.7c0,4.6-1.4,13.8-4.1,27.8\r c-2.8,14-4.1,23.5-4.1,28.5c0,1.5,0.3,2.3,1,2.3c0.4,0,1.6-0.6,3.6-1.8l0.9-0.6L153.2,63.1z M130.6,32.8c-2.2,0-4.1,2.2-5.7,6.5\r c-1.6,4.3-2.4,8.6-2.4,12.8c0,4.2,0.3,6.9,0.9,8.1c0.6,1.2,1.5,1.8,2.7,1.8c2.1,0,4.1-0.8,6.1-2.5c0.2-2.5,1.6-10.8,4.2-25\r C134.3,33.4,132.3,32.8,130.6,32.8z"}),react.createElement("path",{className:"st0",d:"M155.5,52.6c0-7.8,2.4-14,7.1-18.5c4.7-4.5,10.1-6.8,16.1-6.8c3.7,0,6.7,0.9,9.1,2.7c2.4,1.8,3.6,4.2,3.6,7.3\r c0,3-0.8,5.6-2.3,7.6c-1.5,2.1-3.4,3.7-5.6,4.8c-4.4,2.2-8.5,3.6-12.2,4.1l-2.3,0.3c0.4,5.9,2.8,8.8,7.2,8.8c1.5,0,3.1-0.4,4.8-1.1\r c1.7-0.8,3-1.5,3.9-2.3l1.4-1.1l2.3,3c-0.5,0.7-1.5,1.6-3,2.7c-1.5,1.1-2.9,2.1-4.2,2.8c-3.6,2-7.6,3-11.9,3\r c-4.3,0-7.7-1.5-10.2-4.6C156.7,62.3,155.5,58.1,155.5,52.6z M176.5,45.5c1.9-2.1,2.8-4.9,2.8-8.3c0-3.4-1-5.1-3-5.1\r c-2.4,0-4.2,2-5.5,6.1c-1.3,4-1.9,7.8-1.9,11.3C172.1,49,174.6,47.6,176.5,45.5z"}),react.createElement("path",{className:"st0",d:"M223.2,56.6c0,3.9-1.7,7.2-5.2,9.7c-3.5,2.5-7.4,3.8-11.9,3.8c-4.4,0-8-0.9-10.6-2.8c-2.6-1.9-3.9-3.5-3.9-5\r c0-0.9,1.1-2.3,3.3-4.3c2.2-2,4-3.2,5.5-3.6c3.1,2.3,5.7,6,7.7,11c2.3-0.2,3.5-1.3,3.5-3.3c0-2.9-2.5-7-7.6-12.2\r c-5.1-5.3-7.6-9.5-7.6-12.6c0-3.1,1.4-5.5,4.2-7.3c2.8-1.7,6.2-2.6,10.2-2.6c4,0,7,0.7,9,2.1c2,1.4,3,3.3,3,5.7\r c0,2.4-1.9,5.7-5.7,10c0.4,0.4,1,1,1.7,1.7c0.7,0.7,1.6,2.1,2.7,4.1C222.6,52.9,223.2,54.8,223.2,56.6z M218.1,35.2\r c0-2.2-1.5-3.3-4.5-3.3c-1.4,0-2.6,0.3-3.6,0.9c-0.9,0.6-1.4,1.3-1.4,2c0,1.4,1.4,3.3,4.1,5.8l1.4,1.2\r C216.8,39.6,218.1,37.4,218.1,35.2z"}),react.createElement("path",{className:"st0",d:"M238.1,6.9c0-2.1-0.2-3.5-0.6-4.4C242.4,0.8,247,0,251.3,0c0.6,0.6,0.8,2,0.8,4.3c0,5.2-1.7,15.1-5.2,29.8\r c5.6-4.6,11.1-6.8,16.5-6.8c2.4,0,4.5,0.8,6.2,2.3c1.7,1.5,2.5,3.7,2.5,6.6c0,5.4-4.4,9.3-13.2,11.7c2.1,6.5,3.9,10.9,5.4,13.2\r c0.7,1,1.2,1.5,1.5,1.5c0.7,0,2.1-0.5,4.3-1.6l1-0.5l1.5,3.2c-1.5,1.4-3.6,2.8-6.2,4.2c-2.7,1.4-5.1,2.1-7.3,2.1\r c-4.9,0-8.3-4.4-10.2-13.3c-0.9-3.8-1.4-7.4-1.6-10.7c4-0.9,7-2.1,9-3.4c2-1.3,3-3.1,3-5.2c0-2.1-1.1-3.1-3.2-3.1\r c-2.1,0-5.7,2.1-10.7,6.4c-3.1,13.2-4.7,22.2-4.7,27.1c-3.4,1-7.9,1.5-13.4,1.5c-0.1-1.1-0.1-2-0.1-2.8c0-2.7,1.8-11.9,5.4-27.6\r C236.3,23.1,238.1,12.5,238.1,6.9z"}),react.createElement("circle",{className:"st1",cx:"284.9",cy:"64.7",r:"4"})),react.createElement("div",{style:{paddingLeft:40}},react.createElement("h6",null,"Trudesk version ",this.props.viewdata.get("version")),react.createElement("p",{style:{fontSize:"12px"}},"Copyright ©2014-2022 Trudesk, Inc. (Chris Brame) ",react.createElement("br",null)," ",react.createElement("br",null),react.createElement("a",{href:"https://docs.trudesk.io/v1.2/",className:"no-ajaxy",rel:"noreferrer",target:"_blank"},"General Documentation"),react.createElement("br",null),react.createElement("a",{href:"https://docs.trudesk.io/v1/api",className:"no-ajaxy",rel:"noreferrer",target:"_blank"},"API Documentation"),react.createElement("br",null),react.createElement("a",{href:"#",className:"no-ajaxy",onClick:function(e){_this.props.showModal("PRIVACY_POLICY")}},"Privacy Policy")," ",react.createElement("br",null),react.createElement("br",null),'Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at'," ",react.createElement("a",{href:"http://www.apache.org/licenses/LICENSE-2.0",rel:"noreferrer",target:"_blank"},"http://www.apache.org/licenses/LICENSE-2.0"),".",react.createElement("br",null),'Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.'),react.createElement("p",{style:{color:"#55616e",fontSize:"12px"}},"Please support the project by donating. A simple cup of coffee or a good dinner goes a long way.",react.createElement("a",{href:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=USPWFP6P6RTKC",target:"_blank",rel:"noreferrer"},"Donate")),react.createElement("hr",{style:{width:"100%",height:1},className:"bg-accent"}),react.createElement("p",{style:{color:"#55616e",fontSize:"12px",marginBottom:5}},"This software uses the following third party plugins:"),react.createElement("ul",{style:{listStyle:"none",fontSize:"11px",color:"#55616e",padding:0,margin:0}},react.createElement("li",null,"Chosen -"," ",react.createElement("a",{href:"https://harvesthq.github.io/chosen/",target:"_blank",rel:"noreferrer"},"https://harvesthq.github.io/chosen/")),react.createElement("li",null,"D3 -"," ",react.createElement("a",{href:"https://d3js.org/",target:"_blank",rel:"noreferrer"},"https://d3js.org/")),react.createElement("li",null,"Datatables -"," ",react.createElement("a",{href:"https://www.datatables.net/",target:"_blank",rel:"noreferrer"},"https://www.datatables.net/")),react.createElement("li",null,"Easy Pie Chart -"," ",react.createElement("a",{href:"https://rendro.github.io/easy-pie-chart/",target:"_blank",rel:"noreferrer"},"https://rendro.github.io/easy-pie-chart/")),react.createElement("li",null,"jQuery -"," ",react.createElement("a",{href:"https://jquery.com/",target:"_blank",rel:"noreferrer"},"https://jquery.com/")),react.createElement("li",null,"Js-cookie -"," ",react.createElement("a",{href:"https://github.com/js-cookie/js-cookie",target:"_blank",rel:"noreferrer"},"https://github.com/js-cookie/js-cookie")),react.createElement("li",null,"Lodash -"," ",react.createElement("a",{href:"http://lodash.com/",target:"_blank",rel:"noreferrer"},"http://lodash.com/")),react.createElement("li",null,"MetricsGraphics.js -"," ",react.createElement("a",{href:"http://metricsgraphicsjs.org/",target:"_blank",rel:"noreferrer"},"http://metricsgraphicsjs.org/")),react.createElement("li",null,"PACE -"," ",react.createElement("a",{href:"https://codebyzach.github.io/pace/",target:"_blank",rel:"noreferrer"},"https://codebyzach.github.io/pace/")),react.createElement("li",null,"Selectize.js -"," ",react.createElement("a",{href:"http://selectize.github.io/selectize.js/",target:"_blank",rel:"noreferrer"},"http://selectize.github.io/selectize.js/")),react.createElement("li",null,"Snackbar -"," ",react.createElement("a",{href:"http://www.polonel.com/snackbar",target:"_blank",rel:"noreferrer"},"http://www.polonel.com/snackbar")),react.createElement("li",null,"Turndown -"," ",react.createElement("a",{href:"https://github.com/domchristie/to-markdown",target:"_blank",rel:"noreferrer"},"https://github.com/domchristie/to-markdown")),react.createElement("li",null,"UIKit (customized) -"," ",react.createElement("a",{href:"http://getuikit.com",target:"_blank",rel:"noreferrer"},"http://getuikit.com")),react.createElement("li",null,"Webpack -"," ",react.createElement("a",{href:"https://webpack.github.io/",target:"_blank",rel:"noreferrer"},"https://webpack.github.io/")))))))}}])&&About_defineProperties(Constructor.prototype,protoProps),staticProps&&About_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AboutContainer}(react.Component);AboutContainer.propTypes={showModal:prop_types_default().func.isRequired,hideModal:prop_types_default().func.isRequired,viewdata:prop_types_default().object.isRequired};const About=(0,es.$j)((function(state){return{viewdata:state.common.viewdata}}),{showModal,hideModal})(AboutContainer);function renderer(store){if(document.getElementById("dashboard-container")){var DashboardContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Dashboard,null));react_dom.render(DashboardContainerWithProvider,document.getElementById("dashboard-container"))}if(document.getElementById("tickets-container")){var view=document.getElementById("tickets-container").getAttribute("data-view"),page=document.getElementById("tickets-container").getAttribute("data-page"),filter=document.getElementById("tickets-container").getAttribute("data-filter");filter=filter?JSON.parse(filter):{};var TicketsContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Tickets_TicketsContainer,{view,page,filter}));react_dom.render(TicketsContainerWithProvider,document.getElementById("tickets-container"))}if(document.getElementById("single-ticket-container")){var ticketId=document.getElementById("single-ticket-container").getAttribute("data-ticket-id"),ticketUid=document.getElementById("single-ticket-container").getAttribute("data-ticket-uid"),SingleTicketContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Tickets_SingleTicketContainer,{ticketId,ticketUid}));react_dom.render(SingleTicketContainerWithProvider,document.getElementById("single-ticket-container"))}if(document.getElementById("profile-container")){var ProfileContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Profile,null));react_dom.render(ProfileContainerWithProvider,document.getElementById("profile-container"))}if(document.getElementById("accounts-container")){var title=document.getElementById("accounts-container").getAttribute("data-title"),_view=document.getElementById("accounts-container").getAttribute("data-view"),AccountsContainerWithProvider=react.createElement(es.zt,{store},react.createElement(containers_Accounts,{title,view:_view}));react_dom.render(AccountsContainerWithProvider,document.getElementById("accounts-container"))}if(document.getElementById("accounts-import-container")){var AccountsImportContainerWithProvider=react.createElement(es.zt,{store},react.createElement(AccountsImport,null));react_dom.render(AccountsImportContainerWithProvider,document.getElementById("accounts-import-container"))}if(document.getElementById("groups-container")){var GroupsContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Groups,null));react_dom.render(GroupsContainerWithProvider,document.getElementById("groups-container"))}if(document.getElementById("teams-container")){var TeamsContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Teams,null));react_dom.render(TeamsContainerWithProvider,document.getElementById("teams-container"))}if(document.getElementById("departments-container")){var _TeamsContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Departments,null));react_dom.render(_TeamsContainerWithProvider,document.getElementById("departments-container"))}if(document.getElementById("messages-container")){var conversation=document.getElementById("messages-container").getAttribute("data-conversation-id"),showNewConversation=document.getElementById("messages-container").getAttribute("data-show-new-convo"),MessagesContainterWithProvider=react.createElement(es.zt,{store},react.createElement(Messages,{initialConversation:conversation,showNewConvo:showNewConversation}));react_dom.render(MessagesContainterWithProvider,document.getElementById("messages-container"))}if(document.getElementById("notices-container")){var NoticeContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Notice_NoticeContainer,null));react_dom.render(NoticeContainerWithProvider,document.getElementById("notices-container"))}if(document.getElementById("reports-container")){var ReportsContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Reports,null));react_dom.render(ReportsContainerWithProvider,document.getElementById("reports-container"))}if(document.getElementById("settings-container")){var SettingsContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Settings_SettingsContainer,null));react_dom.render(SettingsContainerWithProvider,document.getElementById("settings-container"))}if(document.getElementById("about-container")){var AboutContainerWithProvider=react.createElement(es.zt,{store},react.createElement(About,null));react_dom.render(AboutContainerWithProvider,document.getElementById("about-container"))}}const ticketSocketEvents=function(){var socket=(0,es.v9)((function(state){return state.shared.socket})),viewdata=(0,es.v9)((function(state){return state.common.viewdata}));(0,react.useEffect)((function(){return socket&&ticketCreated(),function(){socket&&socket.removeAllListeners(socketEventConsts.TICKETS_CREATED)}}),[socket,viewdata]);var ticketCreated=function(){socket.removeAllListeners(socketEventConsts.TICKETS_CREATED),socket.on(socketEventConsts.TICKETS_CREATED,(function(ticket){viewdata?viewdata.get("ticketSettings")&&viewdata.get("ticketSettings").get("playNewTicketSound")&&helpers_default().UI.playSound("TICKET_CREATED"):helpers_default().UI.playSound("TICKET_CREATED")}))};return react.createElement("div",null)};var index_esm=__webpack_require__(810);const userIdleTimer=function(){var socket=(0,es.v9)((function(state){return state.shared.socket}));return(0,index_esm.Yp)({timeout:3e5,onIdle:function(){socket&&socket.emit(socketEventConsts.UI_ONLINE_STATUS_SET,{state:"idle"})},onActive:function(){socket&&socket.emit(socketEventConsts.UI_ONLINE_STATUS_SET,{state:"active"})}}),react.createElement("div",null)};function SocketGlobal_typeof(obj){return SocketGlobal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SocketGlobal_typeof(obj)}function SocketGlobal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SocketGlobal_setPrototypeOf(o,p){return SocketGlobal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},SocketGlobal_setPrototypeOf(o,p)}function SocketGlobal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SocketGlobal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SocketGlobal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SocketGlobal_possibleConstructorReturn(this,result)}}function SocketGlobal_possibleConstructorReturn(self,call){if(call&&("object"===SocketGlobal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return SocketGlobal_assertThisInitialized(self)}function SocketGlobal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function SocketGlobal_getPrototypeOf(o){return SocketGlobal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},SocketGlobal_getPrototypeOf(o)}var SocketGlobal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SocketGlobal_setPrototypeOf(subClass,superClass)}(SocketGlobal,_React$Component);var Constructor,protoProps,staticProps,_super=SocketGlobal_createSuper(SocketGlobal);function SocketGlobal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SocketGlobal),(_this=_super.call(this,props)).onSocketInitialized=_this.onSocketInitialized.bind(SocketGlobal_assertThisInitialized(_this)),_this.refreshSocketState=_this.refreshSocketState.bind(SocketGlobal_assertThisInitialized(_this)),_this.onReconnect=_this.onReconnect.bind(SocketGlobal_assertThisInitialized(_this)),_this.onDisconnect=_this.onDisconnect.bind(SocketGlobal_assertThisInitialized(_this)),_this.props.initSocket().then(_this.onSocketInitialized),_this}return Constructor=SocketGlobal,(protoProps=[{key:"componentWillUnmount",value:function(){this.props.socket&&(this.props.socket.off("connect",this.refreshSocketState),this.props.socket.off("connecting",this.refreshSocketState),this.props.socket.io.off("reconnect",this.onReconnect),this.props.socket.off("disconnect",this.onDisconnect))}},{key:"onSocketInitialized",value:function(){this.props.socket.on("connect",this.onReconnect),this.props.socket.on("connecting",this.refreshSocketState),this.props.socket.io.on("reconnect",this.onReconnect),this.props.socket.on("disconnect",this.onDisconnect)}},{key:"onDisconnect",value:function(socket){helpers_default().UI.showDisconnectedOverlay(),this.refreshSocketState({socket});var self=this;this.props.socket.io.removeAllListeners("reconnect_attempt"),this.props.socket.io.on("reconnect_attempt",(function(s){helpers_default().UI.showDisconnectedOverlay(),self.refreshSocketState({socket:s})})),this.props.socket.removeAllListeners("connect_timeout"),this.props.socket.on("connect_timeout",(function(s){helpers_default().UI.showDisconnectedOverlay(),self.refreshSocketState({socket:s})}))}},{key:"onReconnect",value:function(socket){helpers_default().UI.hideDisconnectedOverlay(),this.props.updateSocket({socket})}},{key:"refreshSocketState",value:function(socket){this.props.updateSocket({socket})}},{key:"render",value:function(){return react.createElement(react.Fragment,null,react.createElement(userIdleTimer,null),react.createElement(ticketSocketEvents,null))}}])&&SocketGlobal_defineProperties(Constructor.prototype,protoProps),staticProps&&SocketGlobal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SocketGlobal}(react.Component);SocketGlobal.propTypes={initSocket:prop_types_default().func.isRequired,updateSocket:prop_types_default().func.isRequired,socket:prop_types_default().object.isRequired};const Global_SocketGlobal=(0,es.$j)((function(state){return{socket:state.shared.socket}}),{initSocket:common_initSocket,updateSocket:common_updateSocket})(SocketGlobal);const sessionLoader=function(){var dispatch=(0,es.I0)();return(0,react.useEffect)((function(){dispatch({type:SET_SESSION_USER.ACTION})}),[]),react.createElement(react.Fragment,null)};var esm=__webpack_require__(811);function HotKeysGlobal_typeof(obj){return HotKeysGlobal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},HotKeysGlobal_typeof(obj)}function HotKeysGlobal_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function HotKeysGlobal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function HotKeysGlobal_setPrototypeOf(o,p){return HotKeysGlobal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},HotKeysGlobal_setPrototypeOf(o,p)}function HotKeysGlobal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=HotKeysGlobal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=HotKeysGlobal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return HotKeysGlobal_possibleConstructorReturn(this,result)}}function HotKeysGlobal_possibleConstructorReturn(self,call){if(call&&("object"===HotKeysGlobal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function HotKeysGlobal_getPrototypeOf(o){return HotKeysGlobal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},HotKeysGlobal_getPrototypeOf(o)}var HotKeysGlobal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&HotKeysGlobal_setPrototypeOf(subClass,superClass)}(HotKeysGlobal,_React$Component);var Constructor,protoProps,staticProps,_super=HotKeysGlobal_createSuper(HotKeysGlobal);function HotKeysGlobal(){var _this;HotKeysGlobal_classCallCheck(this,HotKeysGlobal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).keyList=["g+d","g+t","shift+/"],_this}return Constructor=HotKeysGlobal,(protoProps=[{key:"onKeyDown",value:function(keyName,e,handle){"g+d"===keyName&&History.pushState(null,null,"/dashboard"),"g+t"===keyName&&History.pushState(null,null,"/tickets/active"),"ctrl+g"===keyName&&console.log("split key"),"shift+/"===keyName&&console.log("Show shortcut help")}},{key:"render",value:function(){var hasKeyboardShortcutEnabled=!this.props.sessionUser||this.props.sessionUser.preferences.keyboardShortcuts;return react.createElement(react.Fragment,null,hasKeyboardShortcutEnabled&&react.createElement(esm.Z,{keyName:this.keyList.join(","),onKeyDown:this.onKeyDown.bind(this)}))}}])&&HotKeysGlobal_defineProperties(Constructor.prototype,protoProps),staticProps&&HotKeysGlobal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),HotKeysGlobal}(react.Component);HotKeysGlobal.propTypes={sessionUser:prop_types_default().object};(0,es.$j)((function(state){return{sessionUser:state.shared.sessionUser}}),{})(HotKeysGlobal);function BackupRestoreOverlay_typeof(obj){return BackupRestoreOverlay_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},BackupRestoreOverlay_typeof(obj)}var BackupRestoreOverlay_class,BackupRestoreOverlay_class2,BackupRestoreOverlay_descriptor;function BackupRestoreOverlay_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function BackupRestoreOverlay_setPrototypeOf(o,p){return BackupRestoreOverlay_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},BackupRestoreOverlay_setPrototypeOf(o,p)}function BackupRestoreOverlay_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=BackupRestoreOverlay_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=BackupRestoreOverlay_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return BackupRestoreOverlay_possibleConstructorReturn(this,result)}}function BackupRestoreOverlay_possibleConstructorReturn(self,call){if(call&&("object"===BackupRestoreOverlay_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return BackupRestoreOverlay_assertThisInitialized(self)}function BackupRestoreOverlay_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function BackupRestoreOverlay_getPrototypeOf(o){return BackupRestoreOverlay_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},BackupRestoreOverlay_getPrototypeOf(o)}var BackupRestoreOverlay=(0,mobxreact_esm.Pi)((BackupRestoreOverlay_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&BackupRestoreOverlay_setPrototypeOf(subClass,superClass)}(BackupRestoreOverlay,_React$Component);var Constructor,protoProps,staticProps,_super=BackupRestoreOverlay_createSuper(BackupRestoreOverlay);function BackupRestoreOverlay(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BackupRestoreOverlay),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"overlayActive",BackupRestoreOverlay_descriptor,BackupRestoreOverlay_assertThisInitialized(_this)),(0,mobx_esm.rC)(BackupRestoreOverlay_assertThisInitialized(_this)),_this.onShowRestoreOverlay=_this.onShowRestoreOverlay.bind(BackupRestoreOverlay_assertThisInitialized(_this)),_this.onRestoreComplete=_this.onRestoreComplete.bind(BackupRestoreOverlay_assertThisInitialized(_this)),_this}return Constructor=BackupRestoreOverlay,(protoProps=[{key:"componentDidMount",value:function(){this.props.socket.on(socketEventConsts.BACKUP_RESTORE_UI_SHOW_OVERLAY,this.onShowRestoreOverlay),this.props.socket.on(socketEventConsts.BACKUP_RESTORE_UI_COMPLETE,this.onRestoreComplete)}},{key:"componentWillUnmount",value:function(){this.props.socket.off(socketEventConsts.BACKUP_RESTORE_UI_SHOW_OVERLAY,this.onShowRestoreOverlay),this.props.socket.off(socketEventConsts.BACKUP_RESTORE_UI_COMPLETE,this.onRestoreComplete)}},{key:"onShowRestoreOverlay",value:function(){this.overlayActive=!0}},{key:"onRestoreComplete",value:function(){location.reload()}},{key:"render",value:function(){return react.createElement("div",{id:"restoreBackupOverlay",className:(0,clsx_m.Z)("loader-wrapper",!this.overlayActive&&"hide"),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#ddd",zIndex:999998}},react.createElement("div",{className:"page-center"},react.createElement("h1",{className:"text-light",style:{color:"#444"}},"Restore in Progress..."),react.createElement("div",{className:"uk-progress uk-progress-striped uk-progress-accent uk-active",style:{height:"31px"}},react.createElement("div",{className:"uk-progress-bar",style:{width:"100%"}}))))}}])&&BackupRestoreOverlay_defineProperties(Constructor.prototype,protoProps),staticProps&&BackupRestoreOverlay_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),BackupRestoreOverlay}(react.Component),BackupRestoreOverlay_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(BackupRestoreOverlay_class2.prototype,"overlayActive",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),BackupRestoreOverlay_class=BackupRestoreOverlay_class2))||BackupRestoreOverlay_class;BackupRestoreOverlay.propTypes={socket:prop_types_default().object.isRequired},BackupRestoreOverlay.defaultProps={};const Global_BackupRestoreOverlay=(0,es.$j)((function(state){return{socket:state.shared.socket}}),{})(BackupRestoreOverlay);var ChatWindow_class,ChatWindow_class2,ChatWindow_descriptor,ChatWindow_descriptor2;__webpack_require__(812);function ChatWindow_typeof(obj){return ChatWindow_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},ChatWindow_typeof(obj)}function ChatWindow_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function ChatWindow_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ChatWindow_setPrototypeOf(o,p){return ChatWindow_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},ChatWindow_setPrototypeOf(o,p)}function ChatWindow_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=ChatWindow_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=ChatWindow_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return ChatWindow_possibleConstructorReturn(this,result)}}function ChatWindow_possibleConstructorReturn(self,call){if(call&&("object"===ChatWindow_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return ChatWindow_assertThisInitialized(self)}function ChatWindow_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function ChatWindow_getPrototypeOf(o){return ChatWindow_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},ChatWindow_getPrototypeOf(o)}function ChatWindow_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var ChatWindow=(0,mobxreact_esm.Pi)((ChatWindow_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&ChatWindow_setPrototypeOf(subClass,superClass)}(ChatWindow,_React$Component);var Constructor,protoProps,staticProps,_super=ChatWindow_createSuper(ChatWindow);function ChatWindow(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ChatWindow),(_this=_super.call(this,props)).containerRef=(0,react.createRef)(),_this.messageBoxRef=(0,react.createRef)(),_this.messagesRef=(0,react.createRef)(),ChatWindow_initializerDefineProperty(_this,"conversation",ChatWindow_descriptor,ChatWindow_assertThisInitialized(_this)),ChatWindow_initializerDefineProperty(_this,"messagesPage",ChatWindow_descriptor2,ChatWindow_assertThisInitialized(_this)),(0,mobx_esm.rC)(ChatWindow_assertThisInitialized(_this)),_this.onChatTextBoxGrow=_this.onChatTextBoxGrow.bind(ChatWindow_assertThisInitialized(_this)),_this.onUserTyping=_this.onUserTyping.bind(ChatWindow_assertThisInitialized(_this)),_this.onSaveChatWindowComplete=_this.onSaveChatWindowComplete.bind(ChatWindow_assertThisInitialized(_this)),_this}return Constructor=ChatWindow,(protoProps=[{key:"componentDidMount",value:function(){this.getConversation(),this.props.socket.on(socketEventConsts.MESSAGES_UI_USER_TYPING,this.onUserTyping),this.props.socket.on(socketEventConsts.MESSAGES_SAVE_CHAT_WINDOW_COMPLETE,this.onSaveChatWindowComplete)}},{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){if(helpers_default().setupScrollers(),this.messagesRef.current&&helpers_default().scrollToBottom(this.messagesRef.current),this.messageBoxRef.current){var pThis=this;jquery_default()(this.messageBoxRef.current).autogrow({postGrowCallback:this.onChatTextBoxGrow,enterPressed:function(self,v){pThis.onSendMessage(v)}})}}},{key:"componentWillUnmount",value:function(){this.props.socket.off(socketEventConsts.MESSAGES_UI_USER_TYPING,this.onUserTyping),this.props.socket.off(socketEventConsts.MESSAGES_SAVE_CHAT_WINDOW_COMPLETE,this.onSaveChatWindowComplete)}},{key:"onUserTyping",value:function(data){}},{key:"onChatTextBoxGrow",value:function(self,oldHeight,newHeight){if(oldHeight!==newHeight&&this.messagesRef.current){var $messages=jquery_default()(this.messagesRef.current);$messages.css({"min-height":"170px","max-height":"220px"}),self.parent().css({"max-height":"77px","min-height":"16px"}),newHeight<80&&$messages.height($messages.height()-(newHeight-oldHeight)),$messages.scrollTop($messages[0].scrollHeight)}}},{key:"getConversation",value:function(){var _this2=this;this.props.conversationId&&axios_default().get("/api/v2/messages/conversations/".concat(this.props.conversationId)).then((function(res){console.log(res.data),res.data.success&&res.data.conversation&&(_this2.conversation=res.data.conversation)})).catch((function(e){console.log(e)}))}},{key:"onSendMessage",value:function(text){console.log(text)}},{key:"onTitleClicked",value:function(e){if(e.preventDefault(),this.containerRef.current){var topValue=this.containerRef.current.offsetTop;(0,anime_es.Z)({targets:this.containerRef.current,top:-280===topValue?"-29px":"-280px",duration:250,easing:"easeInOutCirc"})}}},{key:"onCloseClicked",value:function(e){e.preventDefault(),this.containerRef.current&&jquery_default()(this.containerRef.current).hide(),this.props.socket.emit(socketEventConsts.MESSAGES_SAVE_CHAT_WINDOW,{userId:this.props.sessionUser._id,convoId:this.props.conversationId,remove:!0})}},{key:"onSaveChatWindowComplete",value:function(){this.props.setSessionUser()}},{key:"render",value:function(){var _this3=this;return this.props.sessionUser&&this.conversation?react.createElement("div",{ref:this.containerRef,className:"chat-box-position"},react.createElement("div",{className:"chat-box"},react.createElement("div",{className:"chat-box-title"},react.createElement("div",{className:"chat-box-title-buttons right"},react.createElement("a",{href:"#",className:"chatCloseBtn no-ajaxy"},react.createElement("i",{className:"material-icons material-icons-small",onClick:function(e){return _this3.onCloseClicked(e)}},"close"))),react.createElement("h4",{className:"chat-box-title-text-wrapper",onClick:function(e){return _this3.onTitleClicked(e)}},react.createElement("a",{href:"#",className:"no-ajaxy"},this.conversation.partner.fullname))),react.createElement("div",{ref:this.messagesRef,className:"chat-box-messages scrollable"},this.conversation.messages.map((function(message){if(message.owner._id.toString()===_this3.props.sessionUser._id.toString())return react.createElement("div",{key:message._id,className:"chat-message chat-message-user uk-clearfix"},react.createElement("div",{className:"chat-text-wrapper"},react.createElement("div",{className:"chat-text chat-text-user"},react.createElement("div",{className:"chat-text-inner"},react.createElement("span",null,message.body.replace(/\n\r?/g,"<br />"))))));var imageUrl=message.owner.image||"defaultProfile.jpg";return react.createElement("div",{key:message._id,className:"chat-message uk-clearfix"},react.createElement("div",{className:"chat-user-profile"},react.createElement("img",{src:"/uploads/users/".concat(imageUrl),alt:message.owner.fullname})),react.createElement("div",{className:"chat-text-wrapper"},react.createElement("div",{className:"chat-text"},react.createElement("div",{className:"chat-text-inner"},react.createElement("span",null,message.body.replace(/\n\r?/g,"<br />"))))))}))),react.createElement("div",{className:"chat-box-text"},react.createElement("textarea",{ref:this.messageBoxRef,rows:"1",className:"textAreaAutogrow autogrow-short"})))):null}}])&&ChatWindow_defineProperties(Constructor.prototype,protoProps),staticProps&&ChatWindow_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ChatWindow}(react.Component),ChatWindow_descriptor=ChatWindow_applyDecoratedDescriptor(ChatWindow_class2.prototype,"conversation",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ChatWindow_descriptor2=ChatWindow_applyDecoratedDescriptor(ChatWindow_class2.prototype,"messagesPage",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ChatWindow_class=ChatWindow_class2))||ChatWindow_class;ChatWindow.propTypes={sessionUser:prop_types_default().object,setSessionUser:prop_types_default().func.isRequired,socket:prop_types_default().object.isRequired,sendMessage:prop_types_default().func.isRequired,conversationId:prop_types_default().string.isRequired};const Global_ChatWindow=(0,es.$j)((function(state){return{sessionUser:state.shared.sessionUser,socket:state.shared.socket}}),{sendMessage:messages_sendMessage,setSessionUser:common_setSessionUser})(ChatWindow);function ChatDock_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return ChatDock_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ChatDock_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ChatDock_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ChatDock(props){var sessionUser=(0,es.v9)((function(state){return state.shared.sessionUser})),socket=(0,es.v9)((function(state){return state.shared.socket})),dispatch=(0,es.I0)(),_useState2=ChatDock_slicedToArray((0,react.useState)([]),2),openChatWindows=_useState2[0],setOpenChatWindows=_useState2[1];(0,react.useEffect)((function(){return socket&&(socket.off(socketEventConsts.MESSAGES_UI_SPAWN_CHAT_WINDOW,onSpawnChatWindow),socket.on(socketEventConsts.MESSAGES_UI_SPAWN_CHAT_WINDOW,onSpawnChatWindow)),function(){socket&&socket.off(socketEventConsts.MESSAGES_UI_SPAWN_CHAT_WINDOW,onSpawnChatWindow)}}),[socket]),(0,react.useEffect)((function(){setOpenChatWindows(sessionUser&&sessionUser.preferences&&sessionUser.preferences.openChatWindows||[])}),[sessionUser]),(0,react.useEffect)((function(){}),[openChatWindows]);var onSpawnChatWindow=function(data){dispatch(common_setSessionUser())};return react.createElement("div",{className:"chat-dock"},react.createElement("div",{className:"chat-box-wrapper clearfix"},openChatWindows.map((function(convoId){return react.createElement(Global_ChatWindow,{key:convoId,conversationId:convoId})}))))}ChatDock.propTypes={};var sagaMiddleware=(0,redux_saga_core_npm_proxy_esm.ZP)(),composeSetup=redux.qC;localStorage.setItem("debug","trudesk:*");var store=(0,redux.MT)(reducers,composeSetup((0,redux.md)(redux_saga_thunk.middleware,sagaMiddleware)));if(window.react.redux={store},sagaMiddleware.run((function*(){yield(0,redux_saga_effects_npm_proxy_esm.$6)([watcher(),dashboard_watcher(),tickets_watcher(),settingsWatcher(),accounts_watcher(),groups_watcher(),teams_watcher(),departments_watcher(),watch(),search_watcher(),messages_watcher(),reports_watch()])})),document.getElementById("globals")){var GlobalsRoot=react.createElement(es.zt,{store},react.createElement(react.Fragment,null,react.createElement(react_singleton_hook_es.p6,null),react.createElement(sessionLoader,null),react.createElement(Global_SocketGlobal,null),react.createElement(ChatDock,null),react.createElement(Global_BackupRestoreOverlay,null)));react_dom.render(GlobalsRoot,document.getElementById("globals"))}var sidebarWithProvider=react.createElement(es.zt,{store},react.createElement(Nav_Sidebar,null));if(react_dom.render(sidebarWithProvider,document.getElementById("sidebar")),document.getElementById("modal-wrapper")){var RootModal=react.createElement(es.zt,{store},react.createElement(Modals,null));react_dom.render(RootModal,document.getElementById("modal-wrapper"))}if(document.getElementById("topbar")){var TopbarRoot=react.createElement(es.zt,{store},react.createElement(Topbar_TopbarContainer,null));react_dom.render(TopbarRoot,document.getElementById("topbar"))}window.react.renderer=renderer,window.react.dom=react_dom,renderer(store)},44:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1),__webpack_require__(4),__webpack_require__(2),__webpack_require__(33)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function($,_,helpers){$(window).on("statechangecomplete",(function(){$("body > .side-nav-sub.tether-element").each((function(){$(this).remove()})),helpers.init(!0),helpers.hideAllUiKitDropdowns(),helpers.UI.initSidebar(),helpers.UI.bindExpand(),window.react.renderer(window.react.redux.store),window.react.redux.store.dispatch({type:"NAV_CHANGE",payload:{activeItem:$("#__sidebar_route").text(),activeSubItem:$("#__sidebar_sub_route").text(),sessionUser:window.trudeskSessionService.getUser()}});_.debounce((function(){$.event.trigger("trudesk:ready")}),100)()}));const History=window.History,document=window.document;if(!History.enabled)return!1;$((function(){let $content=$(".wrapper > .ajaxyContent:first").filter(":first");const contentNode=$content.get(0),$window=$(window),$body=$(document.body),rootUrl=History.getRootUrl(),scrollOptions={duration:800,easing:"swing"};0===$content.length&&($content=$body),$.expr[":"].internal=function(obj){const url=$(obj).attr("href")||"";return url.substring(0,rootUrl.length)===rootUrl||-1===url.indexOf(":")};$.fn.ajaxify=function(){const $this=$(this);return $this.find("a:internal:not(.no-ajaxy):not(.ajaxify-bound):not(.search-choice-close)").addClass("ajaxify-bound").on("click",(function(event){const $this=$(this),url=$this.attr("href"),title=$this.attr("title")||null;return!(2!==event.which&&!event.metaKey)||(History.pushState(null,title,url),event.preventDefault(),!1)})),$this},$body.ajaxify(),$window.bind("statechange",(function(){const url=History.getState().url,relativeUrl=url.replace(rootUrl,"");$body.addClass("loading"),$.ajax({url,success:function(data){const $data=$(function(html){const result=String(html).replace(/<!DOCTYPE[^>]*>/i,"").replace(/<(html|head|body|title|meta|script)([\s>])/gi,'<div class="document-$1"$2').replace(/<\/(html|head|body|title|meta|script)>/gi,"</div>");return $.trim(result)}(data)),$dataContent=$data.find(".document-body:first").find(".wrapper > .ajaxyContent:first").filter(":first"),$scripts=$dataContent.find(".document-script");$scripts.length&&$scripts.detach();const contentHtml=$dataContent.html();if(!contentHtml)return document.location.href=url,!1;$("#page-content").animate({opacity:0},0,(function(){let $oldContent=$("#page-content");$oldContent.find("*").off("click click.chosen mouseup mousemove mousedown change"),document.getElementById("dashboard-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("dashboard-container")),document.getElementById("tickets-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("tickets-container")),document.getElementById("single-ticket-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("single-ticket-container")),document.getElementById("settings-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("settings-container")),document.getElementById("profile-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("profile-container")),document.getElementById("accounts-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("accounts-container")),document.getElementById("accounts-import-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("accounts-import-container")),document.getElementById("groups-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("groups-container")),document.getElementById("teams-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("teams-container")),document.getElementById("departments-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("departments-container")),document.getElementById("notices-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("notices-container")),document.getElementById("messages-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("messages-container")),document.getElementById("reports-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("reports-container")),document.getElementById("about-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("about-container")),$content.stop(!0,!0),$oldContent.find("*").remove(),$oldContent=null,$content.html(contentHtml).ajaxify().css("opacity",1).show(),document.title=$data.find(".document-title:first").text();try{document.getElementsByTagName("title")[0].innerHTML=document.title.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(Exception){console.log("[AJAXIFY] ERROR: SHOULD HAVE NOT HAPPENED!")}$scripts.each((function(){const $script=$(this),scriptText=$script.text(),scriptNode=document.createElement("script");$script.attr("src")&&($script[0].async||(scriptNode.async=!1),scriptNode.src=$script.attr("src")),scriptNode.appendChild(document.createTextNode(scriptText)),contentNode.appendChild(scriptNode)})),$body.ScrollTo&&$body.ScrollTo(scrollOptions),$body.removeClass("loading"),$window.trigger("statechangecomplete"),void 0!==window._gaq&&window._gaq.push(["_trackPageview",relativeUrl])}))},error:function(jqXHR,textStatus,errorThrown){return document.location.href=url,console.log("[trudesk:ajaxify:Load] - Error Loading Document!!!"),console.error(errorThrown),!1}})}))}))}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},812:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{!function($){$.fn.autogrow=function(options){return this.filter("textarea").each((function(){var self=this,$self=$(self),noFlickerPad=$self.hasClass("autogrow-short")?0:parseInt($self.css("lineHeight"))||0,settings=$.extend({preGrowCallback:null,postGrowCallback:null,enterPressed:null,shiftEnterPressed:null},options),shadow=$("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:$self.width(),fontSize:$self.css("fontSize"),fontFamily:$self.css("fontFamily"),fontWeight:$self.css("fontWeight"),lineHeight:$self.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),update=function(event){var val=self.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,(function(space){return function(string,number){for(var i=0,r="";i<number;i++)r+=string;return r}("&nbsp;",space.length-1)+" "}));if(event&&event.data&&"keydown"===event.data.event&&13===event.keyCode&&event.shiftKey)val+="<br />",null!=settings.shiftEnterPressed&&settings.shiftEnterPressed($self);else if(event&&event.data&&"keydown"===event.data.event&&13===event.keyCode){var value=val;return $self.val(""),val="",$self.height(Math.max(shadow.height()+noFlickerPad,16)),null!=settings.enterPressed&&settings.enterPressed($self,value),!1}shadow.css("width",$self.width()),shadow.html(val+(0===noFlickerPad?"...":""));var oldHeight=$self.height(),newHeight=Math.max(shadow.height()+noFlickerPad,16);null!=settings.preGrowCallback&&(newHeight=settings.preGrowCallback($self,shadow,newHeight,16)),$self.height(newHeight),null!=settings.postGrowCallback&&settings.postGrowCallback($self,oldHeight,newHeight)};$self.change(update).keyup(update).keydown({event:"keydown"},update),$(window).resize(update),update()}))}}(__webpack_require__(1))},797:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function($){$.fn.addBack=$.fn.addBack||$.fn.andSelf,$.fn.extend({actual:function(method,options){if(!this[method])throw'$.actual => The jQuery method "'+method+'" you called does not exist';var fix,restore,defaults={absolute:!1,clone:!1,includeMargin:!1,display:"block"},configs=$.extend(defaults,options),$target=this.eq(0);if(!0===configs.clone)fix=function(){var style="position: absolute !important; top: -1000 !important; ";$target=$target.clone().attr("style",style).appendTo("body")},restore=function(){$target.remove()};else{var $hidden,tmp=[],style="";fix=function(){$hidden=$target.parents().addBack().filter(":hidden"),style+="visibility: hidden !important; display: "+configs.display+" !important; ",!0===configs.absolute&&(style+="position: absolute !important; "),$hidden.each((function(){var $this=$(this),thisStyle=$this.attr("style");tmp.push(thisStyle),$this.attr("style",thisStyle?thisStyle+";"+style:style)}))},restore=function(){$hidden.each((function(i){var $this=$(this),_tmp=tmp[i];void 0===_tmp?$this.removeAttr("style"):$this.attr("style",_tmp)}))}}fix();var actual=/(outer)/.test(method)?$target[method](configs.includeMargin):$target[method]();return restore(),actual}})})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},21:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{!function($,undefined){var div,endDrag,lastMousePos,mousePosition,originalDivHeight,originalPos,performDrag,startDrag,wrappedEndDrag,wrappedPerformDrag;$.fn.serializeObject=function(){var obj={};return $.each(this.serializeArray(),(function(i,o){var n=o.name,v=o.value;obj[n]=undefined===obj[n]?v:$.isArray(obj[n])?obj[n].concat(v):[obj[n],v]})),obj},div=void 0,originalPos=void 0,originalDivHeight=void 0,lastMousePos=0,wrappedEndDrag=void 0,wrappedPerformDrag=void 0,startDrag=function(e,opts){return(div=$(e.data.el)).addClass("clear-transitions"),div.blur(),lastMousePos=mousePosition(e).y,originalPos=lastMousePos,originalDivHeight=div.height(),wrappedPerformDrag=function(e){return performDrag(e,opts)},wrappedEndDrag=function(e){return endDrag(e,opts)},$(document).mousemove(wrappedPerformDrag).mouseup(wrappedEndDrag),!1},performDrag=function(e,opts){var size,sizePx,thisMousePos;$(div).trigger("div-resizing"),thisMousePos=mousePosition(e).y,size=originalDivHeight+(originalPos-thisMousePos),lastMousePos=thisMousePos;var maxHeight=$(window).height();return opts.maxHeight&&(maxHeight=opts.maxHeight(maxHeight)),size=Math.min(size,maxHeight),sizePx=(size=Math.max(350,size))+"px","function"==typeof opts.onDrag&&opts.onDrag(sizePx),div.height(sizePx),size<350&&endDrag(e,opts),!1},endDrag=function(e,opts){$(document).unbind("mousemove",wrappedPerformDrag).unbind("mouseup",wrappedEndDrag),div.removeClass("clear-transitions"),div.focus(),"function"==typeof opts.resize&&opts.resize(),$(div).trigger("div-resized"),div=null},mousePosition=function(e){return{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}},$.fn.DivResizer=function(opts){return this.each((function(){var start;(div=$(this)).hasClass("processed")||(div.addClass("processed"),null,start=function(){return function(e){return startDrag(e,opts)}},div.prepend("<div class='grippie'></div>").find(".grippie").bind("mousedown",{el:this},start()))}))}}(__webpack_require__(1))},796:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{!function($,undefined){$.fn.extend({_aria:function(name,value){return this.attr("aria-"+name,value)},_removeAria:function(name){return this.removeAttr("aria-"+name)},_enableAria:function(enable){return null==enable||enable?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(show){return null==show||show?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(select){return null==select||select?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(id){return id?this.attr("id",id):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var args=1===arguments.length&&$.isArray(arguments[0])?arguments[0]:arguments,formattedString=this,i=0;i<args.length;i++){var pattern=new RegExp("\\{"+i+"\\}","gm");formattedString=formattedString.replace(pattern,args[i])}return formattedString});var _uniqueId=0;function analyzeData(wizard,options,state){var stepTitles=wizard.children(options.headerTag),stepContents=wizard.children(options.bodyTag);stepTitles.length>stepContents.length?throwError("One or more corresponding step {0} are missing.","contents"):stepTitles.length<stepContents.length&&throwError("One or more corresponding step {0} are missing.","titles");var startIndex=options.startIndex;if(state.stepCount=stepTitles.length,options.saveState&&$.cookie){var savedState=$.cookie("jQu3ry_5teps_St@te_"+getUniqueId(wizard)),savedIndex=parseInt(savedState,0);!isNaN(savedIndex)&&savedIndex<state.stepCount&&(startIndex=savedIndex)}state.currentIndex=startIndex,stepTitles.each((function(index){var item=$(this),content=stepContents.eq(index),modeData=content.data("mode"),mode=null==modeData?contentMode.html:getValidEnumValue(contentMode,/^\s*$/.test(modeData)||isNaN(modeData)?modeData:parseInt(modeData,0)),contentUrl=mode===contentMode.html||undefined===content.data("url")?"":content.data("url"),contentLoaded=mode!==contentMode.html&&"1"===content.data("loaded"),step=$.extend({},stepModel,{title:item.html(),content:mode===contentMode.html?content.html():"",contentUrl,contentMode:mode,contentLoaded});!function(wizard,step){getSteps(wizard).push(step)}(wizard,step)}))}function finishStep(wizard,state){var currentStep=wizard.find(".steps li").eq(state.currentIndex);wizard.triggerHandler("finishing",[state.currentIndex])?(currentStep.addClass("done").removeClass("error"),wizard.triggerHandler("finished",[state.currentIndex])):currentStep.addClass("error")}function getEventNamespace(wizard){var eventNamespace=wizard.data("eventNamespace");return null==eventNamespace&&(eventNamespace="."+getUniqueId(wizard),wizard.data("eventNamespace",eventNamespace)),eventNamespace}function getStepAnchor(wizard,index){var uniqueId=getUniqueId(wizard);return wizard.find("#"+uniqueId+"-t-"+index)}function getStepPanel(wizard,index){var uniqueId=getUniqueId(wizard);return wizard.find("#"+uniqueId+"-p-"+index)}function getOptions(wizard){return wizard.data("options")}function getState(wizard){return wizard.data("state")}function getSteps(wizard){return wizard.data("steps")}function getStep(wizard,index){var steps=getSteps(wizard);return(index<0||index>=steps.length)&&throwError("Index out of range."),steps[index]}function getUniqueId(wizard){var uniqueId=wizard.data("uid");return null==uniqueId&&(null==(uniqueId=wizard._id())&&(uniqueId="steps-uid-".concat(_uniqueId),wizard._id(uniqueId)),_uniqueId++,wizard.data("uid",uniqueId)),uniqueId}function getValidEnumValue(enumType,keyOrValue){if(validateArgument("enumType",enumType),validateArgument("keyOrValue",keyOrValue),"string"==typeof keyOrValue){var value=enumType[keyOrValue];return undefined===value&&throwError("The enum key '{0}' does not exist.",keyOrValue),value}if("number"==typeof keyOrValue){for(var key in enumType)if(enumType[key]===keyOrValue)return keyOrValue;throwError("Invalid enum value '{0}'.",keyOrValue)}else throwError("Invalid key or value type.")}function goToNextStep(wizard,options,state){return paginationClick(wizard,options,state,function(state,increaseBy){return state.currentIndex+increaseBy}(state,1))}function goToPreviousStep(wizard,options,state){return paginationClick(wizard,options,state,function(state,decreaseBy){return state.currentIndex-decreaseBy}(state,1))}function goToStep(wizard,options,state,index){if((index<0||index>=state.stepCount)&&throwError("Index out of range."),!(options.forceMoveForward&&index<state.currentIndex)){var oldIndex=state.currentIndex;return wizard.triggerHandler("stepChanging",[state.currentIndex,index])?(state.currentIndex=index,saveCurrentStateToCookie(wizard,options,state),refreshStepNavigation(wizard,options,state,oldIndex),refreshPagination(wizard,options,state),loadAsyncContent(wizard,options,state),function(wizard,options,state,index,oldIndex,doneCallback){var stepContents=wizard.find(".content > .body"),effect=getValidEnumValue(transitionEffect,options.transitionEffect),effectSpeed=options.transitionEffectSpeed,newStep=stepContents.eq(index),currentStep=stepContents.eq(oldIndex);switch(effect){case transitionEffect.fade:case transitionEffect.slide:var hide=effect===transitionEffect.fade?"fadeOut":"slideUp",show=effect===transitionEffect.fade?"fadeIn":"slideDown";state.transitionElement=newStep,currentStep[hide](effectSpeed,(function(){var state=getState($(this)._showAria(!1).parent().parent());state.transitionElement&&(state.transitionElement[show](effectSpeed,(function(){$(this)._showAria()})).promise().done(doneCallback),state.transitionElement=null)}));break;case transitionEffect.slideLeft:var outerWidth=currentStep.outerWidth(!0),posFadeOut=index>oldIndex?-outerWidth:outerWidth,posFadeIn=index>oldIndex?outerWidth:-outerWidth;$.when(currentStep.animate({left:posFadeOut},effectSpeed,(function(){$(this)._showAria(!1)})),newStep.css("left",posFadeIn+"px")._showAria().animate({left:0},effectSpeed)).done(doneCallback);break;default:$.when(currentStep._showAria(!1),newStep._showAria()).done(doneCallback)}}(wizard,options,state,index,oldIndex,(function(){wizard.triggerHandler("stepChanged",[index,oldIndex])}))):wizard.find(".steps li").eq(oldIndex).addClass("error"),!0}}function initialize(options){var opts=$.extend(!0,{},defaults,options);return this.each((function(){var wizard=$(this),state={currentIndex:opts.startIndex,currentStep:null,stepCount:0,transitionElement:null};wizard.data("options",opts),wizard.data("state",state),wizard.data("steps",[]),analyzeData(wizard,opts,state),function(wizard,options,state){var wrapperTemplate='<{0} class="{1}">{2}</{0}>',verticalCssClass=getValidEnumValue(stepsOrientation,options.stepsOrientation)===stepsOrientation.vertical?" vertical":"",contentWrapper=$(wrapperTemplate.format(options.contentContainerTag,"content "+options.clearFixCssClass,wizard.html())),stepsWrapper=$(wrapperTemplate.format(options.stepsContainerTag,"steps "+options.clearFixCssClass,'<ul role="tablist"></ul>')),stepTitles=contentWrapper.children(options.headerTag),stepContents=contentWrapper.children(options.bodyTag);wizard.attr("role","application").empty().append(stepsWrapper).append(contentWrapper).addClass(options.cssClass+" "+options.clearFixCssClass+verticalCssClass),stepContents.each((function(index){renderBody(wizard,state,$(this),index)})),stepTitles.each((function(index){renderTitle(wizard,options,state,$(this),index)})),refreshStepNavigation(wizard,options,state),function(wizard,options,state){if(options.enablePagination){var pagination='<{0} class="actions no-ajaxy {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>',buttonTemplate='<li class="button_{0} no-ajaxy"><a href="#{0}" role="menuitem" class="no-ajaxy">{1}</a></li>',buttons="";options.forceMoveForward||(buttons+=buttonTemplate.format("previous",options.labels.previous)),buttons+=buttonTemplate.format("next",options.labels.next),options.enableFinishButton&&(buttons+=buttonTemplate.format("finish",options.labels.finish)),options.enableCancelButton&&(buttons+=buttonTemplate.format("cancel",options.labels.cancel)),wizard.append(pagination.format(options.actionContainerTag,options.clearFixCssClass,options.labels.pagination,buttons)),refreshPagination(wizard,options,state),loadAsyncContent(wizard,options,state)}}(wizard,options,state)}(wizard,opts,state),function(wizard,options){var eventNamespace=getEventNamespace(wizard);wizard.bind("canceled"+eventNamespace,options.onCanceled),wizard.bind("contentLoaded"+eventNamespace,options.onContentLoaded),wizard.bind("finishing"+eventNamespace,options.onFinishing),wizard.bind("finished"+eventNamespace,options.onFinished),wizard.bind("init"+eventNamespace,options.onInit),wizard.bind("stepChanging"+eventNamespace,options.onStepChanging),wizard.bind("stepChanged"+eventNamespace,options.onStepChanged),options.enableKeyNavigation&&wizard.bind("keyup"+eventNamespace,keyUpHandler);wizard.find(".actions a").bind("click"+eventNamespace,paginationClickHandler)}(wizard,opts),opts.autoFocus&&0===_uniqueId&&getStepAnchor(wizard,opts.startIndex).focus(),wizard.triggerHandler("init",[opts.startIndex])}))}function insertStep(wizard,options,state,index,step){(index<0||index>state.stepCount)&&throwError("Index out of range."),function(wizard,index,step){getSteps(wizard).splice(index,0,step)}(wizard,index,step=$.extend({},stepModel,step)),state.currentIndex!==state.stepCount&&state.currentIndex>=index&&(state.currentIndex++,saveCurrentStateToCookie(wizard,options,state)),state.stepCount++;var contentContainer=wizard.find(".content"),header=$("<{0}>{1}</{0}>".format(options.headerTag,step.title)),body=$("<{0}></{0}>".format(options.bodyTag));return null!=step.contentMode&&step.contentMode!==contentMode.html||body.html(step.content),0===index?contentContainer.prepend(body).prepend(header):getStepPanel(wizard,index-1).after(body).after(header),renderBody(wizard,state,body,index),renderTitle(wizard,options,state,header,index),refreshSteps(wizard,options,state,index),index===state.currentIndex&&refreshStepNavigation(wizard,options,state),refreshPagination(wizard,options,state),wizard}function keyUpHandler(event){var wizard=$(this),options=getOptions(wizard),state=getState(wizard);if(options.suppressPaginationOnFocus&&wizard.find(":focus").is(":input"))return event.preventDefault(),!1;var keyCodes_left=37,keyCodes_right=39;event.keyCode===keyCodes_left?(event.preventDefault(),goToPreviousStep(wizard,options,state)):event.keyCode===keyCodes_right&&(event.preventDefault(),goToNextStep(wizard,options,state))}function loadAsyncContent(wizard,options,state){if(state.stepCount>0){var currentIndex=state.currentIndex,currentStep=getStep(wizard,currentIndex);if(!options.enableContentCache||!currentStep.contentLoaded)switch(getValidEnumValue(contentMode,currentStep.contentMode)){case contentMode.iframe:wizard.find(".content > .body").eq(state.currentIndex).empty().html('<iframe src="'+currentStep.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case contentMode.async:var currentStepContent=getStepPanel(wizard,currentIndex)._aria("busy","true").empty().append(renderTemplate(options.loadingTemplate,{text:options.labels.loading}));$.ajax({url:currentStep.contentUrl,cache:!1}).done((function(data){currentStepContent.empty().html(data)._aria("busy","false").data("loaded","1"),wizard.triggerHandler("contentLoaded",[currentIndex])}))}}}function paginationClick(wizard,options,state,index){var oldIndex=state.currentIndex;if(index>=0&&index<state.stepCount&&!(options.forceMoveForward&&index<state.currentIndex)){var anchor=getStepAnchor(wizard,index),parent=anchor.parent(),isDisabled=parent.hasClass("disabled");return parent._enableAria(),anchor.click(),oldIndex!==state.currentIndex||!isDisabled||(parent._enableAria(!1),!1)}return!1}function paginationClickHandler(event){event.preventDefault();var anchor=$(this),wizard=anchor.parent().parent().parent().parent(),options=getOptions(wizard),state=getState(wizard),href=anchor.attr("href");if(anchor.parent().hasClass("disabled"))return!1;switch(href.substring(href.lastIndexOf("#")+1)){case"cancel":!function(wizard){wizard.triggerHandler("canceled")}(wizard);break;case"finish":finishStep(wizard,state);break;case"next":goToNextStep(wizard,options,state);break;case"previous":goToPreviousStep(wizard,options,state)}return!1}function refreshPagination(wizard,options,state){if(options.enablePagination){var finish=wizard.find(".actions a[href$='#finish']").parent(),next=wizard.find(".actions a[href$='#next']").parent();if(!options.forceMoveForward)wizard.find(".actions a[href$='#previous']").parent()._enableAria(state.currentIndex>0);options.enableFinishButton&&options.showFinishButtonAlways?(finish._enableAria(state.stepCount>0),next._enableAria(state.stepCount>1&&state.stepCount>state.currentIndex+1)):(finish._showAria(options.enableFinishButton&&state.stepCount===state.currentIndex+1),next._showAria(0===state.stepCount||state.stepCount>state.currentIndex+1)._enableAria(state.stepCount>state.currentIndex+1||!options.enableFinishButton))}}function refreshStepNavigation(wizard,options,state,oldIndex){var currentOrNewStepAnchor=getStepAnchor(wizard,state.currentIndex),currentInfo=$('<span class="current-info audible">'+options.labels.current+" </span>"),stepTitles=wizard.find(".content > .title");if(null!=oldIndex){var oldStepAnchor=getStepAnchor(wizard,oldIndex);oldStepAnchor.parent().addClass("done").removeClass("error")._selectAria(!1),stepTitles.eq(oldIndex).removeClass("current").next(".body").removeClass("current"),currentInfo=oldStepAnchor.find(".current-info"),currentOrNewStepAnchor.focus()}currentOrNewStepAnchor.prepend(currentInfo).parent()._selectAria().removeClass("done")._enableAria(),stepTitles.eq(state.currentIndex).addClass("current").next(".body").addClass("current")}function refreshSteps(wizard,options,state,index){for(var uniqueId=getUniqueId(wizard),i=index;i<state.stepCount;i++){var uniqueStepId=uniqueId+"-t-"+i,uniqueBodyId=uniqueId+"-p-"+i,uniqueHeaderId=uniqueId+"-h-"+i,title=wizard.find(".title").eq(i)._id(uniqueHeaderId);wizard.find(".steps a").eq(i)._id(uniqueStepId)._aria("controls",uniqueBodyId).attr("href","#"+uniqueHeaderId).html(renderTemplate(options.titleTemplate,{index:i+1,title:title.html()})),wizard.find(".body").eq(i)._id(uniqueBodyId)._aria("labelledby",uniqueHeaderId)}}function removeStep(wizard,options,state,index){return!(index<0||index>=state.stepCount||state.currentIndex===index)&&(function(wizard,index){getSteps(wizard).splice(index,1)}(wizard,index),state.currentIndex>index&&(state.currentIndex--,saveCurrentStateToCookie(wizard,options,state)),state.stepCount--,function(wizard,index){var uniqueId=getUniqueId(wizard);return wizard.find("#"+uniqueId+"-h-"+index)}(wizard,index).remove(),getStepPanel(wizard,index).remove(),getStepAnchor(wizard,index).parent().remove(),0===index&&wizard.find(".steps li").first().addClass("first"),index===state.stepCount&&wizard.find(".steps li").eq(index).addClass("last"),refreshSteps(wizard,options,state,index),refreshPagination(wizard,options,state),!0)}function renderBody(wizard,state,body,index){var uniqueId=getUniqueId(wizard),uniqueBodyId=uniqueId+"-p-"+index,uniqueHeaderId=uniqueId+"-h-"+index;body._id(uniqueBodyId).attr("role","tabpanel")._aria("labelledby",uniqueHeaderId).addClass("body step-"+index).attr("data-step",index)._showAria(state.currentIndex===index)}function renderTemplate(template,substitutes){for(var matches=template.match(/#([a-z]*)#/gi),i=0;i<matches.length;i++){var match=matches[i],key=match.substring(1,match.length-1);undefined===substitutes[key]&&throwError("The key '{0}' does not exist in the substitute collection!",key),template=template.replace(match,substitutes[key])}return template}function renderTitle(wizard,options,state,header,index){var uniqueId=getUniqueId(wizard),uniqueStepId=uniqueId+"-t-"+index,uniqueBodyId=uniqueId+"-p-"+index,uniqueHeaderId=uniqueId+"-h-"+index,stepCollection=wizard.find(".steps > ul"),title=renderTemplate(options.titleTemplate,{index:index+1,title:header.html()}),stepItem=$('<li role="tab"><a id="'+uniqueStepId+'" href="#'+uniqueHeaderId+'" aria-controls="'+uniqueBodyId+'" class="no-ajaxy">'+title+"</a></li>");stepItem._enableAria(options.enableAllSteps||state.currentIndex>index),state.currentIndex>index&&stepItem.addClass("done"),header._id(uniqueHeaderId).attr("tabindex","-1").addClass("title"),0===index?stepCollection.prepend(stepItem):stepCollection.find("li").eq(index-1).after(stepItem),0===index&&stepCollection.find("li").removeClass("first").eq(index).addClass("first"),index===state.stepCount-1&&stepCollection.find("li").removeClass("last").eq(index).addClass("last"),stepItem.children("a").bind("click"+getEventNamespace(wizard),stepClickHandler)}function saveCurrentStateToCookie(wizard,options,state){options.saveState&&$.cookie&&$.cookie("jQu3ry_5teps_St@te_"+getUniqueId(wizard),state.currentIndex)}function stepClickHandler(event){event.preventDefault();var anchor=$(this),wizard=anchor.parent().parent().parent().parent(),options=getOptions(wizard),state=getState(wizard),oldIndex=state.currentIndex;if(anchor.parent().is(":not(.disabled):not(.current)")){var href=anchor.attr("href");goToStep(wizard,options,state,parseInt(href.substring(href.lastIndexOf("-")+1),0))}return oldIndex===state.currentIndex&&(getStepAnchor(wizard,oldIndex).focus(),!1)}function throwError(message){throw arguments.length>1&&(message=message.format(Array.prototype.slice.call(arguments,1))),new Error(message)}function validateArgument(argumentName,argumentValue){null==argumentValue&&throwError("The argument '{0}' is null or undefined.",argumentName)}$.fn.steps=function(method){return $.fn.steps[method]?$.fn.steps[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.steps"):initialize.apply(this,arguments)},$.fn.steps.add=function(step){var state=getState(this);return insertStep(this,getOptions(this),state,state.stepCount,step)},$.fn.steps.count=function(){return getState(this).stepCount},$.fn.steps.destroy=function(){return function(wizard,options){var eventNamespace=getEventNamespace(wizard);wizard.unbind(eventNamespace).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(eventNamespace),wizard.removeClass(options.clearFixCssClass+" vertical");var contents=wizard.find(".content > *");contents.removeData("loaded").removeData("mode").removeData("url"),contents.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),wizard.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var wizardSubstitute=$('<{0} class="{1}"></{0}>'.format(wizard.get(0).tagName,wizard.attr("class"))),wizardId=wizard._id();return null!=wizardId&&""!==wizardId&&wizardSubstitute._id(wizardId),wizardSubstitute.html(wizard.find(".content").html()),wizard.after(wizardSubstitute),wizard.remove(),wizardSubstitute}(this,getOptions(this))},$.fn.steps.finish=function(){finishStep(this,getState(this))},$.fn.steps.getCurrentIndex=function(){return getState(this).currentIndex},$.fn.steps.getCurrentStep=function(){return getStep(this,getState(this).currentIndex)},$.fn.steps.getStep=function(index){return getStep(this,index)},$.fn.steps.insert=function(index,step){return insertStep(this,getOptions(this),getState(this),index,step)},$.fn.steps.next=function(){return goToNextStep(this,getOptions(this),getState(this))},$.fn.steps.previous=function(){return goToPreviousStep(this,getOptions(this),getState(this))},$.fn.steps.remove=function(index){return removeStep(this,getOptions(this),getState(this),index)},$.fn.steps.setStep=function(index){return goToStep(this,getOptions(this),getState(this),index)},$.fn.steps.skip=function(count){throw new Error("Not yet implemented!")};var contentMode=$.fn.steps.contentMode={html:0,iframe:1,async:2},stepsOrientation=$.fn.steps.stepsOrientation={horizontal:0,vertical:1},transitionEffect=$.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},stepModel=$.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:contentMode.html,contentLoaded:!1},defaults=$.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:stepsOrientation.horizontal,titleTemplate:"<span class=\"number\">#index#</span> <span class='title'>#title#</span>",loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:transitionEffect.none,transitionEffectSpeed:280,onStepChanging:function(event,currentIndex,newIndex){return!0},onStepChanged:function(event,currentIndex,priorIndex){},onCanceled:function(event){},onFinishing:function(event,currentIndex){return!0},onFinished:function(event,currentIndex){},onContentLoaded:function(event,currentIndex){},onInit:function(event,currentIndex){},labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next <i class='material-icons'>&#xE315;</i>",previous:"<i class='material-icons'>&#xE314;</i> Previous",loading:"Loading ..."}}}(__webpack_require__(1))},239:function(module,__unused_webpack_exports,__webpack_require__){module.exports=function(){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ChartInternal(api){var $$=this;$$.d3=window.d3?window.d3:__webpack_require__(94),$$.api=api,$$.config=$$.getDefaultConfig(),$$.data={},$$.cache={},$$.axes={}}function Chart(config){var $$=this.internal=new ChartInternal(this);$$.loadConfig(config),$$.beforeInit(config),$$.init(),$$.afterInit(config),function bindThis(fn,target,argThis){Object.keys(fn).forEach((function(key){target[key]=fn[key].bind(argThis),Object.keys(fn[key]).length>0&&bindThis(fn[key],target[key],argThis)}))}(Chart.prototype,this,this)}function AxisInternal(component,params){var internal=this;internal.component=component,internal.params=params||{},internal.d3=component.d3,internal.scale=internal.d3.scaleLinear(),internal.range,internal.orient="bottom",internal.innerTickSize=6,internal.outerTickSize=this.params.withOuterTick?6:0,internal.tickPadding=3,internal.tickValues=null,internal.tickFormat,internal.tickArguments,internal.tickOffset=0,internal.tickCulling=!0,internal.tickCentered,internal.tickTextCharSize,internal.tickTextRotate=internal.params.tickTextRotate,internal.tickLength,internal.axis=internal.generateAxis()}AxisInternal.prototype.axisX=function(selection,x,tickOffset){selection.attr("transform",(function(d){return"translate("+Math.ceil(x(d)+tickOffset)+", 0)"}))},AxisInternal.prototype.axisY=function(selection,y){selection.attr("transform",(function(d){return"translate(0,"+Math.ceil(y(d))+")"}))},AxisInternal.prototype.scaleExtent=function(domain){var start=domain[0],stop=domain[domain.length-1];return start<stop?[start,stop]:[stop,start]},AxisInternal.prototype.generateTicks=function(scale){var i,domain,internal=this,ticks=[];if(scale.ticks)return scale.ticks.apply(scale,internal.tickArguments);for(domain=scale.domain(),i=Math.ceil(domain[0]);i<domain[1];i++)ticks.push(i);return ticks.length>0&&ticks[0]>0&&ticks.unshift(ticks[0]-(ticks[1]-ticks[0])),ticks},AxisInternal.prototype.copyScale=function(){var domain,internal=this,newScale=internal.scale.copy();return internal.params.isCategory&&(domain=internal.scale.domain(),newScale.domain([domain[0],domain[1]-1])),newScale},AxisInternal.prototype.textFormatted=function(v){var internal=this,formatted=internal.tickFormat?internal.tickFormat(v):v;return void 0!==formatted?formatted:""},AxisInternal.prototype.updateRange=function(){var internal=this;return internal.range=internal.scale.rangeExtent?internal.scale.rangeExtent():internal.scaleExtent(internal.scale.range()),internal.range},AxisInternal.prototype.updateTickTextCharSize=function(tick){var internal=this;if(internal.tickTextCharSize)return internal.tickTextCharSize;var size={h:11.5,w:5.5};return tick.select("text").text((function(d){return internal.textFormatted(d)})).each((function(d){var box=this.getBoundingClientRect(),text=internal.textFormatted(d),h=box.height,w=text?box.width/text.length:void 0;h&&w&&(size.h=h,size.w=w)})).text(""),internal.tickTextCharSize=size,size},AxisInternal.prototype.isVertical=function(){return"left"===this.orient||"right"===this.orient},AxisInternal.prototype.tspanData=function(d,i,scale){var internal=this,splitted=internal.params.tickMultiline?internal.splitTickText(d,scale):[].concat(internal.textFormatted(d));return internal.params.tickMultiline&&internal.params.tickMultilineMax>0&&(splitted=internal.ellipsify(splitted,internal.params.tickMultilineMax)),splitted.map((function(s){return{index:i,splitted:s,length:splitted.length}}))},AxisInternal.prototype.splitTickText=function(d,scale){var subtext,spaceIndex,textWidth,internal=this,tickText=internal.textFormatted(d),maxWidth=internal.params.tickWidth,splitted=[];if("[object Array]"===Object.prototype.toString.call(tickText))return tickText;function split(splitted,text){spaceIndex=void 0;for(var i=1;i<text.length;i++)if(" "===text.charAt(i)&&(spaceIndex=i),subtext=text.substr(0,i+1),textWidth=internal.tickTextCharSize.w*subtext.length,maxWidth<textWidth)return split(splitted.concat(text.substr(0,spaceIndex||i)),text.slice(spaceIndex?spaceIndex+1:i));return splitted.concat(text)}return(!maxWidth||maxWidth<=0)&&(maxWidth=internal.isVertical()?95:internal.params.isCategory?Math.ceil(scale(1)-scale(0))-12:110),split(splitted,tickText+"")},AxisInternal.prototype.ellipsify=function(splitted,max){if(splitted.length<=max)return splitted;for(var ellipsified=splitted.slice(0,max),remaining=3,i=max-1;i>=0;i--){var available=ellipsified[i].length;if(ellipsified[i]=ellipsified[i].substr(0,available-remaining).padEnd(available,"."),(remaining-=available)<=0)break}return ellipsified},AxisInternal.prototype.updateTickLength=function(){var internal=this;internal.tickLength=Math.max(internal.innerTickSize,0)+internal.tickPadding},AxisInternal.prototype.lineY2=function(d){var internal=this,tickPosition=internal.scale(d)+(internal.tickCentered?0:internal.tickOffset);return internal.range[0]<tickPosition&&tickPosition<internal.range[1]?internal.innerTickSize:0},AxisInternal.prototype.textY=function(){var internal=this,rotate=internal.tickTextRotate;return rotate?11.5-rotate/15*2.5*(rotate>0?1:-1):internal.tickLength},AxisInternal.prototype.textTransform=function(){var rotate=this.tickTextRotate;return rotate?"rotate("+rotate+")":""},AxisInternal.prototype.textTextAnchor=function(){var rotate=this.tickTextRotate;return rotate?rotate>0?"start":"end":"middle"},AxisInternal.prototype.tspanDx=function(){var rotate=this.tickTextRotate;return rotate?8*Math.sin(Math.PI*(rotate/180)):0},AxisInternal.prototype.tspanDy=function(d,i){var internal=this,dy=internal.tickTextCharSize.h;return 0===i&&(dy=internal.isVertical()?-((d.length-1)*(internal.tickTextCharSize.h/2)-3):".71em"),dy},AxisInternal.prototype.generateAxis=function(){var internal=this,d3=internal.d3,params=internal.params;function axis(g,transition){var self;return g.each((function(){var tickTransform,tickX,tickY,g=axis.g=d3.select(this),scale0=this.__chart__||internal.scale,scale1=this.__chart__=internal.copyScale(),ticksValues=internal.tickValues?internal.tickValues:internal.generateTicks(scale1),ticks=g.selectAll(".tick").data(ticksValues,scale1),tickEnter=ticks.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),tickExit=ticks.exit().remove(),tickUpdate=ticks.merge(tickEnter);params.isCategory?(internal.tickOffset=Math.ceil((scale1(1)-scale1(0))/2),tickX=internal.tickCentered?0:internal.tickOffset,tickY=internal.tickCentered?internal.tickOffset:0):internal.tickOffset=tickX=0,internal.updateRange(),internal.updateTickLength(),internal.updateTickTextCharSize(g.select(".tick"));var lineUpdate=tickUpdate.select("line").merge(tickEnter.append("line")),textUpdate=tickUpdate.select("text").merge(tickEnter.append("text")),tspans=tickUpdate.selectAll("text").selectAll("tspan").data((function(d,i){return internal.tspanData(d,i,scale1)})),tspanUpdate=tspans.enter().append("tspan").merge(tspans).text((function(d){return d.splitted}));tspans.exit().remove();var path=g.selectAll(".domain").data([0]),pathUpdate=path.enter().append("path").merge(path).attr("class","domain");switch(internal.orient){case"bottom":tickTransform=internal.axisX,lineUpdate.attr("x1",tickX).attr("x2",tickX).attr("y2",(function(d,i){return internal.lineY2(d,i)})),textUpdate.attr("x",0).attr("y",(function(d,i){return internal.textY(d,i)})).attr("transform",(function(d,i){return internal.textTransform(d,i)})).style("text-anchor",(function(d,i){return internal.textTextAnchor(d,i)})),tspanUpdate.attr("x",0).attr("dy",(function(d,i){return internal.tspanDy(d,i)})).attr("dx",(function(d,i){return internal.tspanDx(d,i)})),pathUpdate.attr("d","M"+internal.range[0]+","+internal.outerTickSize+"V0H"+internal.range[1]+"V"+internal.outerTickSize);break;case"top":tickTransform=internal.axisX,lineUpdate.attr("x1",tickX).attr("x2",tickX).attr("y2",(function(d,i){return-1*internal.lineY2(d,i)})),textUpdate.attr("x",0).attr("y",(function(d,i){return-1*internal.textY(d,i)-(params.isCategory?2:internal.tickLength-2)})).attr("transform",(function(d,i){return internal.textTransform(d,i)})).style("text-anchor",(function(d,i){return internal.textTextAnchor(d,i)})),tspanUpdate.attr("x",0).attr("dy",(function(d,i){return internal.tspanDy(d,i)})).attr("dx",(function(d,i){return internal.tspanDx(d,i)})),pathUpdate.attr("d","M"+internal.range[0]+","+-internal.outerTickSize+"V0H"+internal.range[1]+"V"+-internal.outerTickSize);break;case"left":tickTransform=internal.axisY,lineUpdate.attr("x2",-internal.innerTickSize).attr("y1",tickY).attr("y2",tickY),textUpdate.attr("x",-internal.tickLength).attr("y",internal.tickOffset).style("text-anchor","end"),tspanUpdate.attr("x",-internal.tickLength).attr("dy",(function(d,i){return internal.tspanDy(d,i)})),pathUpdate.attr("d","M"+-internal.outerTickSize+","+internal.range[0]+"H0V"+internal.range[1]+"H"+-internal.outerTickSize);break;case"right":tickTransform=internal.axisY,lineUpdate.attr("x2",internal.innerTickSize).attr("y1",tickY).attr("y2",tickY),textUpdate.attr("x",internal.tickLength).attr("y",internal.tickOffset).style("text-anchor","start"),tspanUpdate.attr("x",internal.tickLength).attr("dy",(function(d,i){return internal.tspanDy(d,i)})),pathUpdate.attr("d","M"+internal.outerTickSize+","+internal.range[0]+"H0V"+internal.range[1]+"H"+internal.outerTickSize)}if(scale1.rangeBand){var x=scale1,dx=x.rangeBand()/2;scale0=scale1=function(d){return x(d)+dx}}else scale0.rangeBand?scale0=scale1:tickExit.call(tickTransform,scale1,internal.tickOffset);tickEnter.call(tickTransform,scale0,internal.tickOffset),self=(transition?tickUpdate.transition(transition):tickUpdate).style("opacity",1).call(tickTransform,scale1,internal.tickOffset)})),self}return axis.scale=function(x){return arguments.length?(internal.scale=x,axis):internal.scale},axis.orient=function(x){return arguments.length?(internal.orient=x in{top:1,right:1,bottom:1,left:1}?x+"":"bottom",axis):internal.orient},axis.tickFormat=function(format){return arguments.length?(internal.tickFormat=format,axis):internal.tickFormat},axis.tickCentered=function(isCentered){return arguments.length?(internal.tickCentered=isCentered,axis):internal.tickCentered},axis.tickOffset=function(){return internal.tickOffset},axis.tickInterval=function(){var interval;return(interval=params.isCategory?2*internal.tickOffset:(axis.g.select("path.domain").node().getTotalLength()-2*internal.outerTickSize)/axis.g.selectAll("line").size())==1/0?0:interval},axis.ticks=function(){return arguments.length?(internal.tickArguments=arguments,axis):internal.tickArguments},axis.tickCulling=function(culling){return arguments.length?(internal.tickCulling=culling,axis):internal.tickCulling},axis.tickValues=function(x){if("function"==typeof x)internal.tickValues=function(){return x(internal.scale.domain())};else{if(!arguments.length)return internal.tickValues;internal.tickValues=x}return axis},axis};var CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",dragZoom:"c3-drag-zoom",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},asHalfPixel=function(n){return Math.ceil(n)+.5},ceil10=function(v){return 10*Math.ceil(v/10)},diffDomain=function(d){return d[1]-d[0]},getOption=function(options,key,defaultValue){return isDefined(options[key])?options[key]:defaultValue},getPathBox=function(path){var box=path.getBoundingClientRect(),items=[path.pathSegList.getItem(0),path.pathSegList.getItem(1)];return{x:items[0].x,y:Math.min(items[0].y,items[1].y),width:box.width,height:box.height}},hasValue=function(dict,value){var found=!1;return Object.keys(dict).forEach((function(key){dict[key]===value&&(found=!0)})),found},isArray=function(o){return Array.isArray(o)},isDefined=function(v){return void 0!==v},isEmpty=function(o){return null==o||isString(o)&&0===o.length||"object"===_typeof(o)&&0===Object.keys(o).length},isFunction=function(o){return"function"==typeof o},isString=function(o){return"string"==typeof o},isUndefined=function(v){return void 0===v},isValue=function(v){return v||0===v},notEmpty=function(o){return!isEmpty(o)},sanitise=function(str){return"string"==typeof str?str.replace(/</g,"&lt;").replace(/>/g,"&gt;"):str},Axis=function Axis(owner){_classCallCheck(this,Axis),this.owner=owner,this.d3=owner.d3,this.internal=AxisInternal};Axis.prototype.init=function(){var $$=this.owner,config=$$.config,main=$$.main;$$.axes.x=main.append("g").attr("class",CLASS.axis+" "+CLASS.axisX).attr("clip-path",config.axis_x_inner?"":$$.clipPathForXAxis).attr("transform",$$.getTranslate("x")).style("visibility",config.axis_x_show?"visible":"hidden"),$$.axes.x.append("text").attr("class",CLASS.axisXLabel).attr("transform",config.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),$$.axes.y=main.append("g").attr("class",CLASS.axis+" "+CLASS.axisY).attr("clip-path",config.axis_y_inner?"":$$.clipPathForYAxis).attr("transform",$$.getTranslate("y")).style("visibility",config.axis_y_show?"visible":"hidden"),$$.axes.y.append("text").attr("class",CLASS.axisYLabel).attr("transform",config.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),$$.axes.y2=main.append("g").attr("class",CLASS.axis+" "+CLASS.axisY2).attr("transform",$$.getTranslate("y2")).style("visibility",config.axis_y2_show?"visible":"hidden"),$$.axes.y2.append("text").attr("class",CLASS.axisY2Label).attr("transform",config.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},Axis.prototype.getXAxis=function(scale,orient,tickFormat,tickValues,withOuterTick,withoutTransition,withoutRotateTickText){var $$=this.owner,config=$$.config,axisParams={isCategory:$$.isCategorized(),withOuterTick,tickMultiline:config.axis_x_tick_multiline,tickMultilineMax:config.axis_x_tick_multiline?Number(config.axis_x_tick_multilineMax):0,tickWidth:config.axis_x_tick_width,tickTextRotate:withoutRotateTickText?0:config.axis_x_tick_rotate,withoutTransition},axis=new this.internal(this,axisParams).axis.scale(scale).orient(orient);return $$.isTimeSeries()&&tickValues&&"function"!=typeof tickValues&&(tickValues=tickValues.map((function(v){return $$.parseDate(v)}))),axis.tickFormat(tickFormat).tickValues(tickValues),$$.isCategorized()&&(axis.tickCentered(config.axis_x_tick_centered),isEmpty(config.axis_x_tick_culling)&&(config.axis_x_tick_culling=!1)),axis},Axis.prototype.updateXAxisTickValues=function(targets,axis){var tickValues,$$=this.owner,config=$$.config;return(config.axis_x_tick_fit||config.axis_x_tick_count)&&(tickValues=this.generateTickValues($$.mapTargetsToUniqueXs(targets),config.axis_x_tick_count,$$.isTimeSeries())),axis?axis.tickValues(tickValues):($$.xAxis.tickValues(tickValues),$$.subXAxis.tickValues(tickValues)),tickValues},Axis.prototype.getYAxis=function(scale,orient,tickFormat,tickValues,withOuterTick,withoutTransition,withoutRotateTickText){var $$=this.owner,config=$$.config,axisParams={withOuterTick,withoutTransition,tickTextRotate:withoutRotateTickText?0:config.axis_y_tick_rotate},axis=new this.internal(this,axisParams).axis.scale(scale).orient(orient).tickFormat(tickFormat);return $$.isTimeSeriesY()?axis.ticks(config.axis_y_tick_time_type,config.axis_y_tick_time_interval):axis.tickValues(tickValues),axis},Axis.prototype.getId=function(id){var config=this.owner.config;return id in config.data_axes?config.data_axes[id]:"y"},Axis.prototype.getXAxisTickFormat=function(){var $$=this.owner,config=$$.config,format=$$.isTimeSeries()?$$.defaultAxisTimeFormat:$$.isCategorized()?$$.categoryName:function(v){return v};return config.axis_x_tick_format&&(isFunction(config.axis_x_tick_format)?format=config.axis_x_tick_format:$$.isTimeSeries()&&(format=function(date){return date?$$.axisTimeFormat(config.axis_x_tick_format)(date):""})),isFunction(format)?function(v){return format.call($$,v)}:format},Axis.prototype.getTickValues=function(tickValues,axis){return tickValues||(axis?axis.tickValues():void 0)},Axis.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},Axis.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},Axis.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},Axis.prototype.getLabelOptionByAxisId=function(axisId){var option,config=this.owner.config;return"y"===axisId?option=config.axis_y_label:"y2"===axisId?option=config.axis_y2_label:"x"===axisId&&(option=config.axis_x_label),option},Axis.prototype.getLabelText=function(axisId){var option=this.getLabelOptionByAxisId(axisId);return isString(option)?option:option?option.text:null},Axis.prototype.setLabelText=function(axisId,text){var config=this.owner.config,option=this.getLabelOptionByAxisId(axisId);isString(option)?"y"===axisId?config.axis_y_label=text:"y2"===axisId?config.axis_y2_label=text:"x"===axisId&&(config.axis_x_label=text):option&&(option.text=text)},Axis.prototype.getLabelPosition=function(axisId,defaultPosition){var option=this.getLabelOptionByAxisId(axisId),position=option&&"object"===_typeof(option)&&option.position?option.position:defaultPosition;return{isInner:position.indexOf("inner")>=0,isOuter:position.indexOf("outer")>=0,isLeft:position.indexOf("left")>=0,isCenter:position.indexOf("center")>=0,isRight:position.indexOf("right")>=0,isTop:position.indexOf("top")>=0,isMiddle:position.indexOf("middle")>=0,isBottom:position.indexOf("bottom")>=0}},Axis.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},Axis.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},Axis.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},Axis.prototype.getLabelPositionById=function(id){return"y2"===id?this.getY2AxisLabelPosition():"y"===id?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},Axis.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},Axis.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},Axis.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},Axis.prototype.xForAxisLabel=function(forHorizontal,position){var $$=this.owner;return forHorizontal?position.isLeft?0:position.isCenter?$$.width/2:$$.width:position.isBottom?-$$.height:position.isMiddle?-$$.height/2:0},Axis.prototype.dxForAxisLabel=function(forHorizontal,position){return forHorizontal?position.isLeft?"0.5em":position.isRight?"-0.5em":"0":position.isTop?"-0.5em":position.isBottom?"0.5em":"0"},Axis.prototype.textAnchorForAxisLabel=function(forHorizontal,position){return forHorizontal?position.isLeft?"start":position.isCenter?"middle":"end":position.isBottom?"start":position.isMiddle?"middle":"end"},Axis.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},Axis.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},Axis.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},Axis.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},Axis.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},Axis.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},Axis.prototype.dyForXAxisLabel=function(){var $$=this.owner,config=$$.config,position=this.getXAxisLabelPosition();return config.axis_rotated?position.isInner?"1.2em":-25-($$.config.axis_x_inner?0:this.getMaxTickWidth("x")):position.isInner?"-0.5em":config.axis_x_height?config.axis_x_height-10:"3em"},Axis.prototype.dyForYAxisLabel=function(){var $$=this.owner,position=this.getYAxisLabelPosition();return $$.config.axis_rotated?position.isInner?"-0.5em":"3em":position.isInner?"1.2em":-10-($$.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},Axis.prototype.dyForY2AxisLabel=function(){var $$=this.owner,position=this.getY2AxisLabelPosition();return $$.config.axis_rotated?position.isInner?"1.2em":"-2.2em":position.isInner?"-0.5em":15+($$.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},Axis.prototype.textAnchorForXAxisLabel=function(){var $$=this.owner;return this.textAnchorForAxisLabel(!$$.config.axis_rotated,this.getXAxisLabelPosition())},Axis.prototype.textAnchorForYAxisLabel=function(){var $$=this.owner;return this.textAnchorForAxisLabel($$.config.axis_rotated,this.getYAxisLabelPosition())},Axis.prototype.textAnchorForY2AxisLabel=function(){var $$=this.owner;return this.textAnchorForAxisLabel($$.config.axis_rotated,this.getY2AxisLabelPosition())},Axis.prototype.getMaxTickWidth=function(id,withoutRecompute){var targetsToShow,scale,axis,dummy,$$=this.owner,config=$$.config,maxWidth=0;return withoutRecompute&&$$.currentMaxTickWidths[id]||($$.svg&&(targetsToShow=$$.filterTargetsToShow($$.data.targets),"y"===id?(scale=$$.y.copy().domain($$.getYDomain(targetsToShow,"y")),axis=this.getYAxis(scale,$$.yOrient,config.axis_y_tick_format,$$.yAxisTickValues,!1,!0,!0)):"y2"===id?(scale=$$.y2.copy().domain($$.getYDomain(targetsToShow,"y2")),axis=this.getYAxis(scale,$$.y2Orient,config.axis_y2_tick_format,$$.y2AxisTickValues,!1,!0,!0)):(scale=$$.x.copy().domain($$.getXDomain(targetsToShow)),axis=this.getXAxis(scale,$$.xOrient,$$.xAxisTickFormat,$$.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(targetsToShow,axis)),(dummy=$$.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(axis).each((function(){$$.d3.select(this).selectAll("text").each((function(){var box=this.getBoundingClientRect();maxWidth<box.width&&(maxWidth=box.width)})),dummy.remove()}))),$$.currentMaxTickWidths[id]=maxWidth<=0?$$.currentMaxTickWidths[id]:maxWidth),$$.currentMaxTickWidths[id]},Axis.prototype.updateLabels=function(withTransition){var $$=this.owner,axisXLabel=$$.main.select("."+CLASS.axisX+" ."+CLASS.axisXLabel),axisYLabel=$$.main.select("."+CLASS.axisY+" ."+CLASS.axisYLabel),axisY2Label=$$.main.select("."+CLASS.axisY2+" ."+CLASS.axisY2Label);(withTransition?axisXLabel.transition():axisXLabel).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(withTransition?axisYLabel.transition():axisYLabel).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(withTransition?axisY2Label.transition():axisY2Label).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},Axis.prototype.getPadding=function(padding,key,defaultValue,domainLength){var p="number"==typeof padding?padding:padding[key];return isValue(p)?"ratio"===padding.unit?padding[key]*domainLength:this.convertPixelsToAxisPadding(p,domainLength):defaultValue},Axis.prototype.convertPixelsToAxisPadding=function(pixels,domainLength){var $$=this.owner;return domainLength*(pixels/($$.config.axis_rotated?$$.width:$$.height))},Axis.prototype.generateTickValues=function(values,tickCount,forTimeSeries){var targetCount,start,end,count,interval,i,tickValue,tickValues=values;if(tickCount)if(1===(targetCount=isFunction(tickCount)?tickCount():tickCount))tickValues=[values[0]];else if(2===targetCount)tickValues=[values[0],values[values.length-1]];else if(targetCount>2){for(count=targetCount-2,start=values[0],interval=((end=values[values.length-1])-start)/(count+1),tickValues=[start],i=0;i<count;i++)tickValue=+start+interval*(i+1),tickValues.push(forTimeSeries?new Date(tickValue):tickValue);tickValues.push(end)}return forTimeSeries||(tickValues=tickValues.sort((function(a,b){return a-b}))),tickValues},Axis.prototype.generateTransitions=function(duration){var axes=this.owner.axes;return{axisX:duration?axes.x.transition().duration(duration):axes.x,axisY:duration?axes.y.transition().duration(duration):axes.y,axisY2:duration?axes.y2.transition().duration(duration):axes.y2,axisSubX:duration?axes.subx.transition().duration(duration):axes.subx}},Axis.prototype.redraw=function(duration,isHidden){var $$=this.owner,transition=duration?$$.d3.transition().duration(duration):null;$$.axes.x.style("opacity",isHidden?0:1).call($$.xAxis,transition),$$.axes.y.style("opacity",isHidden?0:1).call($$.yAxis,transition),$$.axes.y2.style("opacity",isHidden?0:1).call($$.y2Axis,transition),$$.axes.subx.style("opacity",isHidden?0:1).call($$.subXAxis,transition)};var c3={version:"0.6.12",chart:{fn:Chart.prototype,internal:{fn:ChartInternal.prototype,axis:{fn:Axis.prototype,internal:{fn:AxisInternal.prototype}}}},generate:function(config){return new Chart(config)}};return ChartInternal.prototype.beforeInit=function(){},ChartInternal.prototype.afterInit=function(){},ChartInternal.prototype.init=function(){var $$=this,config=$$.config;if($$.initParams(),config.data_url)$$.convertUrlToData(config.data_url,config.data_mimeType,config.data_headers,config.data_keys,$$.initWithData);else if(config.data_json)$$.initWithData($$.convertJsonToData(config.data_json,config.data_keys));else if(config.data_rows)$$.initWithData($$.convertRowsToData(config.data_rows));else{if(!config.data_columns)throw Error("url or json or rows or columns is required.");$$.initWithData($$.convertColumnsToData(config.data_columns))}},ChartInternal.prototype.initParams=function(){var $$=this,d3=$$.d3,config=$$.config;$$.clipId="c3-"+ +new Date+"-clip",$$.clipIdForXAxis=$$.clipId+"-xaxis",$$.clipIdForYAxis=$$.clipId+"-yaxis",$$.clipIdForGrid=$$.clipId+"-grid",$$.clipIdForSubchart=$$.clipId+"-subchart",$$.clipPath=$$.getClipPath($$.clipId),$$.clipPathForXAxis=$$.getClipPath($$.clipIdForXAxis),$$.clipPathForYAxis=$$.getClipPath($$.clipIdForYAxis),$$.clipPathForGrid=$$.getClipPath($$.clipIdForGrid),$$.clipPathForSubchart=$$.getClipPath($$.clipIdForSubchart),$$.dragStart=null,$$.dragging=!1,$$.flowing=!1,$$.cancelClick=!1,$$.mouseover=!1,$$.transiting=!1,$$.color=$$.generateColor(),$$.levelColor=$$.generateLevelColor(),$$.dataTimeParse=(config.data_xLocaltime?d3.timeParse:d3.utcParse)($$.config.data_xFormat),$$.axisTimeFormat=config.axis_x_localtime?d3.timeFormat:d3.utcFormat,$$.defaultAxisTimeFormat=function(date){return date.getMilliseconds()?d3.timeFormat(".%L")(date):date.getSeconds()?d3.timeFormat(":%S")(date):date.getMinutes()?d3.timeFormat("%I:%M")(date):date.getHours()?d3.timeFormat("%I %p")(date):date.getDay()&&1!==date.getDate()||1!==date.getDate()||date.getMonth()?d3.timeFormat("%-m/%-d")(date):d3.timeFormat("%Y/%-m/%-d")(date)},$$.hiddenTargetIds=[],$$.hiddenLegendIds=[],$$.focusedTargetIds=[],$$.defocusedTargetIds=[],$$.xOrient=config.axis_rotated?config.axis_x_inner?"right":"left":config.axis_x_inner?"top":"bottom",$$.yOrient=config.axis_rotated?config.axis_y_inner?"top":"bottom":config.axis_y_inner?"right":"left",$$.y2Orient=config.axis_rotated?config.axis_y2_inner?"bottom":"top":config.axis_y2_inner?"left":"right",$$.subXOrient=config.axis_rotated?"left":"bottom",$$.isLegendRight="right"===config.legend_position,$$.isLegendInset="inset"===config.legend_position,$$.isLegendTop="top-left"===config.legend_inset_anchor||"top-right"===config.legend_inset_anchor,$$.isLegendLeft="top-left"===config.legend_inset_anchor||"bottom-left"===config.legend_inset_anchor,$$.legendStep=0,$$.legendItemWidth=0,$$.legendItemHeight=0,$$.currentMaxTickWidths={x:0,y:0,y2:0},$$.rotated_padding_left=30,$$.rotated_padding_right=config.axis_rotated&&!config.axis_x_show?0:30,$$.rotated_padding_top=5,$$.withoutFadeIn={},$$.intervalForObserveInserted=void 0,$$.axes.subx=d3.selectAll([])},ChartInternal.prototype.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},ChartInternal.prototype.initWithData=function(data){var defs,main,$$=this,d3=$$.d3,config=$$.config,binding=!0;$$.axis=new Axis($$),config.bindto?"function"==typeof config.bindto.node?$$.selectChart=config.bindto:$$.selectChart=d3.select(config.bindto):$$.selectChart=d3.selectAll([]),$$.selectChart.empty()&&($$.selectChart=d3.select(document.createElement("div")).style("opacity",0),$$.observeInserted($$.selectChart),binding=!1),$$.selectChart.html("").classed("c3",!0),$$.data.xs={},$$.data.targets=$$.convertDataToTargets(data),config.data_filter&&($$.data.targets=$$.data.targets.filter(config.data_filter)),config.data_hide&&$$.addHiddenTargetIds(!0===config.data_hide?$$.mapToIds($$.data.targets):config.data_hide),config.legend_hide&&$$.addHiddenLegendIds(!0===config.legend_hide?$$.mapToIds($$.data.targets):config.legend_hide),$$.updateSizes(),$$.updateScales(),$$.x.domain(d3.extent($$.getXDomain($$.data.targets))),$$.y.domain($$.getYDomain($$.data.targets,"y")),$$.y2.domain($$.getYDomain($$.data.targets,"y2")),$$.subX.domain($$.x.domain()),$$.subY.domain($$.y.domain()),$$.subY2.domain($$.y2.domain()),$$.orgXDomain=$$.x.domain(),$$.svg=$$.selectChart.append("svg").style("overflow","hidden").on("mouseenter",(function(){return config.onmouseover.call($$)})).on("mouseleave",(function(){return config.onmouseout.call($$)})),$$.config.svg_classname&&$$.svg.attr("class",$$.config.svg_classname),defs=$$.svg.append("defs"),$$.clipChart=$$.appendClip(defs,$$.clipId),$$.clipXAxis=$$.appendClip(defs,$$.clipIdForXAxis),$$.clipYAxis=$$.appendClip(defs,$$.clipIdForYAxis),$$.clipGrid=$$.appendClip(defs,$$.clipIdForGrid),$$.clipSubchart=$$.appendClip(defs,$$.clipIdForSubchart),$$.updateSvgSize(),main=$$.main=$$.svg.append("g").attr("transform",$$.getTranslate("main")),$$.initPie&&$$.initPie(),$$.initDragZoom&&$$.initDragZoom(),$$.initSubchart&&$$.initSubchart(),$$.initTooltip&&$$.initTooltip(),$$.initLegend&&$$.initLegend(),$$.initTitle&&$$.initTitle(),$$.initZoom&&$$.initZoom(),$$.initSubchartBrush&&$$.initSubchartBrush(),main.append("text").attr("class",CLASS.text+" "+CLASS.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),$$.initRegion(),$$.initGrid(),main.append("g").attr("clip-path",$$.clipPath).attr("class",CLASS.chart),config.grid_lines_front&&$$.initGridLines(),$$.initEventRect(),$$.initChartElements(),$$.axis.init(),$$.updateTargets($$.data.targets),config.axis_x_selection&&$$.brush.selectionAsValue($$.getDefaultSelection()),binding&&($$.updateDimension(),$$.config.oninit.call($$),$$.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),$$.bindResize(),$$.bindWindowFocus(),$$.api.element=$$.selectChart.node()},ChartInternal.prototype.smoothLines=function(el,type){var $$=this;"grid"===type&&el.each((function(){var g=$$.d3.select(this),x1=g.attr("x1"),x2=g.attr("x2"),y1=g.attr("y1"),y2=g.attr("y2");g.attr({x1:Math.ceil(x1),x2:Math.ceil(x2),y1:Math.ceil(y1),y2:Math.ceil(y2)})}))},ChartInternal.prototype.updateSizes=function(){var $$=this,config=$$.config,legendHeight=$$.legend?$$.getLegendHeight():0,legendWidth=$$.legend?$$.getLegendWidth():0,legendHeightForBottom=$$.isLegendRight||$$.isLegendInset?0:legendHeight,hasArc=$$.hasArcType(),xAxisHeight=config.axis_rotated||hasArc?0:$$.getHorizontalAxisHeight("x"),subchartHeight=config.subchart_show&&!hasArc?config.subchart_size_height+xAxisHeight:0;$$.currentWidth=$$.getCurrentWidth(),$$.currentHeight=$$.getCurrentHeight(),$$.margin=config.axis_rotated?{top:$$.getHorizontalAxisHeight("y2")+$$.getCurrentPaddingTop(),right:hasArc?0:$$.getCurrentPaddingRight(),bottom:$$.getHorizontalAxisHeight("y")+legendHeightForBottom+$$.getCurrentPaddingBottom(),left:subchartHeight+(hasArc?0:$$.getCurrentPaddingLeft())}:{top:4+$$.getCurrentPaddingTop(),right:hasArc?0:$$.getCurrentPaddingRight(),bottom:xAxisHeight+subchartHeight+legendHeightForBottom+$$.getCurrentPaddingBottom(),left:hasArc?0:$$.getCurrentPaddingLeft()},$$.margin2=config.axis_rotated?{top:$$.margin.top,right:NaN,bottom:20+legendHeightForBottom,left:$$.rotated_padding_left}:{top:$$.currentHeight-subchartHeight-legendHeightForBottom,right:NaN,bottom:xAxisHeight+legendHeightForBottom,left:$$.margin.left},$$.margin3={top:0,right:NaN,bottom:0,left:0},$$.updateSizeForLegend&&$$.updateSizeForLegend(legendHeight,legendWidth),$$.width=$$.currentWidth-$$.margin.left-$$.margin.right,$$.height=$$.currentHeight-$$.margin.top-$$.margin.bottom,$$.width<0&&($$.width=0),$$.height<0&&($$.height=0),$$.width2=config.axis_rotated?$$.margin.left-$$.rotated_padding_left-$$.rotated_padding_right:$$.width,$$.height2=config.axis_rotated?$$.height:$$.currentHeight-$$.margin2.top-$$.margin2.bottom,$$.width2<0&&($$.width2=0),$$.height2<0&&($$.height2=0),$$.arcWidth=$$.width-($$.isLegendRight?legendWidth+10:0),$$.arcHeight=$$.height-($$.isLegendRight?0:10),$$.hasType("gauge")&&!config.gauge_fullCircle&&($$.arcHeight+=$$.height-$$.getGaugeLabelHeight()),$$.updateRadius&&$$.updateRadius(),$$.isLegendRight&&hasArc&&($$.margin3.left=$$.arcWidth/2+1.1*$$.radiusExpanded)},ChartInternal.prototype.updateTargets=function(targets){var $$=this;$$.updateTargetsForText(targets),$$.updateTargetsForBar(targets),$$.updateTargetsForLine(targets),$$.hasArcType()&&$$.updateTargetsForArc&&$$.updateTargetsForArc(targets),$$.updateTargetsForSubchart&&$$.updateTargetsForSubchart(targets),$$.showTargets()},ChartInternal.prototype.showTargets=function(){var $$=this;$$.svg.selectAll("."+CLASS.target).filter((function(d){return $$.isTargetToShow(d.id)})).transition().duration($$.config.transition_duration).style("opacity",1)},ChartInternal.prototype.redraw=function(options,transitions){var withY,withSubchart,withTransition,withTransitionForExit,withTransitionForAxis,withTransform,withUpdateXDomain,withUpdateOrgXDomain,withTrimXDomain,withLegend,withEventRect,withDimension,withUpdateXAxis,drawArea,drawBar,drawLine,xForText,yForText,duration,durationForExit,durationForAxis,transitionsToWait,waitForDraw,flow,transition,tickValues,i,intervalForCulling,xDomainForZoom,cx,cy,$$=this,main=$$.main,d3=$$.d3,config=$$.config,areaIndices=$$.getShapeIndices($$.isAreaType),barIndices=$$.getShapeIndices($$.isBarType),lineIndices=$$.getShapeIndices($$.isLineType),hideAxis=$$.hasArcType(),targetsToShow=$$.filterTargetsToShow($$.data.targets),xv=$$.xv.bind($$);if(withY=getOption(options=options||{},"withY",!0),withSubchart=getOption(options,"withSubchart",!0),withTransition=getOption(options,"withTransition",!0),withTransform=getOption(options,"withTransform",!1),withUpdateXDomain=getOption(options,"withUpdateXDomain",!1),withUpdateOrgXDomain=getOption(options,"withUpdateOrgXDomain",!1),withTrimXDomain=getOption(options,"withTrimXDomain",!0),withUpdateXAxis=getOption(options,"withUpdateXAxis",withUpdateXDomain),withLegend=getOption(options,"withLegend",!1),withEventRect=getOption(options,"withEventRect",!0),withDimension=getOption(options,"withDimension",!0),withTransitionForExit=getOption(options,"withTransitionForExit",withTransition),withTransitionForAxis=getOption(options,"withTransitionForAxis",withTransition),duration=withTransition?config.transition_duration:0,durationForExit=withTransitionForExit?duration:0,durationForAxis=withTransitionForAxis?duration:0,transitions=transitions||$$.axis.generateTransitions(durationForAxis),withLegend&&config.legend_show?$$.updateLegend($$.mapToIds($$.data.targets),options,transitions):withDimension&&$$.updateDimension(!0),$$.isCategorized()&&0===targetsToShow.length&&$$.x.domain([0,$$.axes.x.selectAll(".tick").size()]),targetsToShow.length?($$.updateXDomain(targetsToShow,withUpdateXDomain,withUpdateOrgXDomain,withTrimXDomain),config.axis_x_tick_values||(tickValues=$$.axis.updateXAxisTickValues(targetsToShow))):($$.xAxis.tickValues([]),$$.subXAxis.tickValues([])),config.zoom_rescale&&!options.flow&&(xDomainForZoom=$$.x.orgDomain()),$$.y.domain($$.getYDomain(targetsToShow,"y",xDomainForZoom)),$$.y2.domain($$.getYDomain(targetsToShow,"y2",xDomainForZoom)),!config.axis_y_tick_values&&config.axis_y_tick_count&&$$.yAxis.tickValues($$.axis.generateTickValues($$.y.domain(),config.axis_y_tick_count)),!config.axis_y2_tick_values&&config.axis_y2_tick_count&&$$.y2Axis.tickValues($$.axis.generateTickValues($$.y2.domain(),config.axis_y2_tick_count)),$$.axis.redraw(durationForAxis,hideAxis),$$.axis.updateLabels(withTransition),(withUpdateXDomain||withUpdateXAxis)&&targetsToShow.length)if(config.axis_x_tick_culling&&tickValues){for(i=1;i<tickValues.length;i++)if(tickValues.length/i<config.axis_x_tick_culling_max){intervalForCulling=i;break}$$.svg.selectAll("."+CLASS.axisX+" .tick text").each((function(e){var index=tickValues.indexOf(e);index>=0&&d3.select(this).style("display",index%intervalForCulling?"none":"block")}))}else $$.svg.selectAll("."+CLASS.axisX+" .tick text").style("display","block");drawArea=$$.generateDrawArea?$$.generateDrawArea(areaIndices,!1):void 0,drawBar=$$.generateDrawBar?$$.generateDrawBar(barIndices):void 0,drawLine=$$.generateDrawLine?$$.generateDrawLine(lineIndices,!1):void 0,xForText=$$.generateXYForText(areaIndices,barIndices,lineIndices,!0),yForText=$$.generateXYForText(areaIndices,barIndices,lineIndices,!1),$$.updateCircleY(),cx=($$.config.axis_rotated?$$.circleY:$$.circleX).bind($$),cy=($$.config.axis_rotated?$$.circleX:$$.circleY).bind($$),withY&&($$.subY.domain($$.getYDomain(targetsToShow,"y")),$$.subY2.domain($$.getYDomain(targetsToShow,"y2"))),$$.updateXgridFocus(),main.select("text."+CLASS.text+"."+CLASS.empty).attr("x",$$.width/2).attr("y",$$.height/2).text(config.data_empty_label_text).transition().style("opacity",targetsToShow.length?0:1),withEventRect&&$$.redrawEventRect(),$$.updateGrid(duration),$$.updateRegion(duration),$$.updateBar(durationForExit),$$.updateLine(durationForExit),$$.updateArea(durationForExit),$$.updateCircle(cx,cy),$$.hasDataLabel()&&$$.updateText(xForText,yForText,durationForExit),$$.redrawTitle&&$$.redrawTitle(),$$.redrawArc&&$$.redrawArc(duration,durationForExit,withTransform),$$.redrawSubchart&&$$.redrawSubchart(withSubchart,transitions,duration,durationForExit,areaIndices,barIndices,lineIndices),main.selectAll("."+CLASS.selectedCircles).filter($$.isBarType.bind($$)).selectAll("circle").remove(),options.flow&&(flow=$$.generateFlow({targets:targetsToShow,flow:options.flow,duration:options.flow.duration,drawBar,drawLine,drawArea,cx,cy,xv,xForText,yForText})),$$.isTabVisible()&&(duration?(transition=d3.transition().duration(duration),transitionsToWait=[],[$$.redrawBar(drawBar,!0,transition),$$.redrawLine(drawLine,!0,transition),$$.redrawArea(drawArea,!0,transition),$$.redrawCircle(cx,cy,!0,transition),$$.redrawText(xForText,yForText,options.flow,!0,transition),$$.redrawRegion(!0,transition),$$.redrawGrid(!0,transition)].forEach((function(transitions){transitions.forEach((function(transition){transitionsToWait.push(transition)}))})),waitForDraw=$$.generateWait(),transitionsToWait.forEach((function(t){waitForDraw.add(t)})),waitForDraw((function(){flow&&flow(),config.onrendered&&config.onrendered.call($$)}))):($$.redrawBar(drawBar),$$.redrawLine(drawLine),$$.redrawArea(drawArea),$$.redrawCircle(cx,cy),$$.redrawText(xForText,yForText,options.flow),$$.redrawRegion(),$$.redrawGrid(),flow&&flow(),config.onrendered&&config.onrendered.call($$))),$$.mapToIds($$.data.targets).forEach((function(id){$$.withoutFadeIn[id]=!0}))},ChartInternal.prototype.updateAndRedraw=function(options){var transitions,$$=this,config=$$.config;(options=options||{}).withTransition=getOption(options,"withTransition",!0),options.withTransform=getOption(options,"withTransform",!1),options.withLegend=getOption(options,"withLegend",!1),options.withUpdateXDomain=getOption(options,"withUpdateXDomain",!0),options.withUpdateOrgXDomain=getOption(options,"withUpdateOrgXDomain",!0),options.withTransitionForExit=!1,options.withTransitionForTransform=getOption(options,"withTransitionForTransform",options.withTransition),$$.updateSizes(),options.withLegend&&config.legend_show||(transitions=$$.axis.generateTransitions(options.withTransitionForAxis?config.transition_duration:0),$$.updateScales(),$$.updateSvgSize(),$$.transformAll(options.withTransitionForTransform,transitions)),$$.redraw(options,transitions)},ChartInternal.prototype.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},ChartInternal.prototype.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},ChartInternal.prototype.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},ChartInternal.prototype.isCustomX=function(){var $$=this,config=$$.config;return!$$.isTimeSeries()&&(config.data_x||notEmpty(config.data_xs))},ChartInternal.prototype.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},ChartInternal.prototype.getTranslate=function(target){var x,y,$$=this,config=$$.config;return"main"===target?(x=asHalfPixel($$.margin.left),y=asHalfPixel($$.margin.top)):"context"===target?(x=asHalfPixel($$.margin2.left),y=asHalfPixel($$.margin2.top)):"legend"===target?(x=$$.margin3.left,y=$$.margin3.top):"x"===target?(x=0,y=config.axis_rotated?0:$$.height):"y"===target?(x=0,y=config.axis_rotated?$$.height:0):"y2"===target?(x=config.axis_rotated?0:$$.width,y=config.axis_rotated?1:0):"subx"===target?(x=0,y=config.axis_rotated?0:$$.height2):"arc"===target&&(x=$$.arcWidth/2,y=$$.arcHeight/2-($$.hasType("gauge")?6:0)),"translate("+x+","+y+")"},ChartInternal.prototype.initialOpacity=function(d){return null!==d.value&&this.withoutFadeIn[d.id]?1:0},ChartInternal.prototype.initialOpacityForCircle=function(d){return null!==d.value&&this.withoutFadeIn[d.id]?this.opacityForCircle(d):0},ChartInternal.prototype.opacityForCircle=function(d){var opacity=(isFunction(this.config.point_show)?this.config.point_show(d):this.config.point_show)?1:0;return isValue(d.value)?this.isScatterType(d)?.5:opacity:0},ChartInternal.prototype.opacityForText=function(){return this.hasDataLabel()?1:0},ChartInternal.prototype.xx=function(d){return d?this.x(d.x):null},ChartInternal.prototype.xv=function(d){var $$=this,value=d.value;return $$.isTimeSeries()?value=$$.parseDate(d.value):$$.isCategorized()&&"string"==typeof d.value&&(value=$$.config.axis_x_categories.indexOf(d.value)),Math.ceil($$.x(value))},ChartInternal.prototype.yv=function(d){var $$=this,yScale=d.axis&&"y2"===d.axis?$$.y2:$$.y;return Math.ceil(yScale(d.value))},ChartInternal.prototype.subxx=function(d){return d?this.subX(d.x):null},ChartInternal.prototype.transformMain=function(withTransition,transitions){var xAxis,yAxis,y2Axis,$$=this;transitions&&transitions.axisX?xAxis=transitions.axisX:(xAxis=$$.main.select("."+CLASS.axisX),withTransition&&(xAxis=xAxis.transition())),transitions&&transitions.axisY?yAxis=transitions.axisY:(yAxis=$$.main.select("."+CLASS.axisY),withTransition&&(yAxis=yAxis.transition())),transitions&&transitions.axisY2?y2Axis=transitions.axisY2:(y2Axis=$$.main.select("."+CLASS.axisY2),withTransition&&(y2Axis=y2Axis.transition())),(withTransition?$$.main.transition():$$.main).attr("transform",$$.getTranslate("main")),xAxis.attr("transform",$$.getTranslate("x")),yAxis.attr("transform",$$.getTranslate("y")),y2Axis.attr("transform",$$.getTranslate("y2")),$$.main.select("."+CLASS.chartArcs).attr("transform",$$.getTranslate("arc"))},ChartInternal.prototype.transformAll=function(withTransition,transitions){var $$=this;$$.transformMain(withTransition,transitions),$$.config.subchart_show&&$$.transformContext(withTransition,transitions),$$.legend&&$$.transformLegend(withTransition)},ChartInternal.prototype.updateSvgSize=function(){var $$=this,brush=$$.svg.select(".c3-brush .overlay");$$.svg.attr("width",$$.currentWidth).attr("height",$$.currentHeight),$$.svg.selectAll(["#"+$$.clipId,"#"+$$.clipIdForGrid]).select("rect").attr("width",$$.width).attr("height",$$.height),$$.svg.select("#"+$$.clipIdForXAxis).select("rect").attr("x",$$.getXAxisClipX.bind($$)).attr("y",$$.getXAxisClipY.bind($$)).attr("width",$$.getXAxisClipWidth.bind($$)).attr("height",$$.getXAxisClipHeight.bind($$)),$$.svg.select("#"+$$.clipIdForYAxis).select("rect").attr("x",$$.getYAxisClipX.bind($$)).attr("y",$$.getYAxisClipY.bind($$)).attr("width",$$.getYAxisClipWidth.bind($$)).attr("height",$$.getYAxisClipHeight.bind($$)),$$.svg.select("#"+$$.clipIdForSubchart).select("rect").attr("width",$$.width).attr("height",brush.size()?brush.attr("height"):0)},ChartInternal.prototype.updateDimension=function(withoutAxis){var $$=this;withoutAxis||($$.config.axis_rotated?($$.axes.x.call($$.xAxis),$$.axes.subx.call($$.subXAxis)):($$.axes.y.call($$.yAxis),$$.axes.y2.call($$.y2Axis))),$$.updateSizes(),$$.updateScales(),$$.updateSvgSize(),$$.transformAll(!1)},ChartInternal.prototype.observeInserted=function(selection){var observer,$$=this;"undefined"!=typeof MutationObserver?(observer=new MutationObserver((function(mutations){mutations.forEach((function(mutation){"childList"===mutation.type&&mutation.previousSibling&&(observer.disconnect(),$$.intervalForObserveInserted=window.setInterval((function(){selection.node().parentNode&&(window.clearInterval($$.intervalForObserveInserted),$$.updateDimension(),$$.brush&&$$.brush.update(),$$.config.oninit.call($$),$$.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),selection.transition().style("opacity",1))}),10))}))}))).observe(selection.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},ChartInternal.prototype.bindResize=function(){var $$=this,config=$$.config;if($$.resizeFunction=$$.generateResize(),$$.resizeFunction.add((function(){config.onresize.call($$)})),config.resize_auto&&$$.resizeFunction.add((function(){void 0!==$$.resizeTimeout&&window.clearTimeout($$.resizeTimeout),$$.resizeTimeout=window.setTimeout((function(){delete $$.resizeTimeout,$$.updateAndRedraw({withUpdateXDomain:!1,withUpdateOrgXDomain:!1,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),$$.brush&&$$.brush.update()}),100)})),$$.resizeFunction.add((function(){config.onresized.call($$)})),$$.resizeIfElementDisplayed=function(){null!=$$.api&&$$.api.element.offsetParent&&$$.resizeFunction()},window.attachEvent)window.attachEvent("onresize",$$.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",$$.resizeIfElementDisplayed,!1);else{var wrapper=window.onresize;wrapper?wrapper.add&&wrapper.remove||(wrapper=$$.generateResize()).add(window.onresize):wrapper=$$.generateResize(),wrapper.add($$.resizeFunction),window.onresize=function(){$$.api.element.offsetParent&&wrapper()}}},ChartInternal.prototype.bindWindowFocus=function(){var _this=this;this.windowFocusHandler||(this.windowFocusHandler=function(){_this.redraw()},window.addEventListener("focus",this.windowFocusHandler))},ChartInternal.prototype.unbindWindowFocus=function(){window.removeEventListener("focus",this.windowFocusHandler),delete this.windowFocusHandler},ChartInternal.prototype.generateResize=function(){var resizeFunctions=[];function callResizeFunctions(){resizeFunctions.forEach((function(f){f()}))}return callResizeFunctions.add=function(f){resizeFunctions.push(f)},callResizeFunctions.remove=function(f){for(var i=0;i<resizeFunctions.length;i++)if(resizeFunctions[i]===f){resizeFunctions.splice(i,1);break}},callResizeFunctions},ChartInternal.prototype.endall=function(transition,callback){var n=0;transition.each((function(){++n})).on("end",(function(){--n||callback.apply(this,arguments)}))},ChartInternal.prototype.generateWait=function(){var transitionsToWait=[],f=function(callback){var timer=setInterval((function(){var done=0;transitionsToWait.forEach((function(t){if(t.empty())done+=1;else try{t.transition()}catch(e){done+=1}})),done===transitionsToWait.length&&(clearInterval(timer),callback&&callback())}),50)};return f.add=function(transition){transitionsToWait.push(transition)},f},ChartInternal.prototype.parseDate=function(date){var parsedDate;return date instanceof Date?parsedDate=date:"string"==typeof date?parsedDate=this.dataTimeParse(date):"object"===_typeof(date)?parsedDate=new Date(+date):"number"!=typeof date||isNaN(date)||(parsedDate=new Date(+date)),parsedDate&&!isNaN(+parsedDate)||window.console.error("Failed to parse x '"+date+"' to Date object"),parsedDate},ChartInternal.prototype.isTabVisible=function(){return!document.hidden},ChartInternal.prototype.getPathBox=getPathBox,ChartInternal.prototype.CLASS=CLASS,"SVGPathSeg"in window||(window.SVGPathSeg=function(type,typeAsLetter,owningPathSegList){this.pathSegType=type,this.pathSegTypeAsLetter=typeAsLetter,this._owningPathSegList=owningPathSegList},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(owningPathSegList){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",owningPathSegList)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(owningPathSegList,x,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",owningPathSegList),this._x=x,this._y=y},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(owningPathSegList,x,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",owningPathSegList),this._x=x,this._y=y},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(owningPathSegList,x,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",owningPathSegList),this._x=x,this._y=y},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(owningPathSegList,x,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",owningPathSegList),this._x=x,this._y=y},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(owningPathSegList,x,y,x1,y1,x2,y2){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",owningPathSegList),this._x=x,this._y=y,this._x1=x1,this._y1=y1,this._x2=x2,this._y2=y2},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(x1){this._x1=x1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(y1){this._y1=y1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(x2){this._x2=x2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(y2){this._y2=y2,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(owningPathSegList,x,y,x1,y1,x2,y2){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",owningPathSegList),this._x=x,this._y=y,this._x1=x1,this._y1=y1,this._x2=x2,this._y2=y2},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(x1){this._x1=x1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(y1){this._y1=y1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(x2){this._x2=x2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(y2){this._y2=y2,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(owningPathSegList,x,y,x1,y1){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",owningPathSegList),this._x=x,this._y=y,this._x1=x1,this._y1=y1},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(x1){this._x1=x1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(y1){this._y1=y1,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(owningPathSegList,x,y,x1,y1){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",owningPathSegList),this._x=x,this._y=y,this._x1=x1,this._y1=y1},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(x1){this._x1=x1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(y1){this._y1=y1,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(owningPathSegList,x,y,r1,r2,angle,largeArcFlag,sweepFlag){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",owningPathSegList),this._x=x,this._y=y,this._r1=r1,this._r2=r2,this._angle=angle,this._largeArcFlag=largeArcFlag,this._sweepFlag=sweepFlag},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(r1){this._r1=r1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(r2){this._r2=r2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(angle){this._angle=angle,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(largeArcFlag){this._largeArcFlag=largeArcFlag,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(sweepFlag){this._sweepFlag=sweepFlag,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(owningPathSegList,x,y,r1,r2,angle,largeArcFlag,sweepFlag){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",owningPathSegList),this._x=x,this._y=y,this._r1=r1,this._r2=r2,this._angle=angle,this._largeArcFlag=largeArcFlag,this._sweepFlag=sweepFlag},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(r1){this._r1=r1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(r2){this._r2=r2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(angle){this._angle=angle,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(largeArcFlag){this._largeArcFlag=largeArcFlag,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(sweepFlag){this._sweepFlag=sweepFlag,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(owningPathSegList,x){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",owningPathSegList),this._x=x},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(owningPathSegList,x){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",owningPathSegList),this._x=x},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(owningPathSegList,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",owningPathSegList),this._y=y},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(owningPathSegList,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",owningPathSegList),this._y=y},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(owningPathSegList,x,y,x2,y2){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",owningPathSegList),this._x=x,this._y=y,this._x2=x2,this._y2=y2},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(x2){this._x2=x2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(y2){this._y2=y2,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(owningPathSegList,x,y,x2,y2){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",owningPathSegList),this._x=x,this._y=y,this._x2=x2,this._y2=y2},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(x2){this._x2=x2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(y2){this._y2=y2,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(owningPathSegList,x,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",owningPathSegList),this._x=x,this._y=y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(owningPathSegList,x,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",owningPathSegList),this._x=x,this._y=y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(x,y){return new window.SVGPathSegMovetoAbs(void 0,x,y)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(x,y){return new window.SVGPathSegMovetoRel(void 0,x,y)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(x,y){return new window.SVGPathSegLinetoAbs(void 0,x,y)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(x,y){return new window.SVGPathSegLinetoRel(void 0,x,y)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(x,y,x1,y1,x2,y2){return new window.SVGPathSegCurvetoCubicAbs(void 0,x,y,x1,y1,x2,y2)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(x,y,x1,y1,x2,y2){return new window.SVGPathSegCurvetoCubicRel(void 0,x,y,x1,y1,x2,y2)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(x,y,x1,y1){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,x,y,x1,y1)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(x,y,x1,y1){return new window.SVGPathSegCurvetoQuadraticRel(void 0,x,y,x1,y1)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(x,y,r1,r2,angle,largeArcFlag,sweepFlag){return new window.SVGPathSegArcAbs(void 0,x,y,r1,r2,angle,largeArcFlag,sweepFlag)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(x,y,r1,r2,angle,largeArcFlag,sweepFlag){return new window.SVGPathSegArcRel(void 0,x,y,r1,r2,angle,largeArcFlag,sweepFlag)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(x){return new window.SVGPathSegLinetoHorizontalAbs(void 0,x)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(x){return new window.SVGPathSegLinetoHorizontalRel(void 0,x)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(y){return new window.SVGPathSegLinetoVerticalAbs(void 0,y)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(y){return new window.SVGPathSegLinetoVerticalRel(void 0,y)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(x,y,x2,y2){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,x,y,x2,y2)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(x,y,x2,y2){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,x,y,x2,y2)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(x,y){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,x,y)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(x,y){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,x,y)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(distance){if(void 0===distance||!isFinite(distance))throw"Invalid arguments.";var measurementElement=document.createElementNS("http://www.w3.org/2000/svg","path");measurementElement.setAttribute("d",this.getAttribute("d"));var lastPathSegment=measurementElement.pathSegList.numberOfItems-1;if(lastPathSegment<=0)return 0;do{if(measurementElement.pathSegList.removeItem(lastPathSegment),distance>measurementElement.getTotalLength())break;lastPathSegment--}while(lastPathSegment>0);return lastPathSegment})),"SVGPathSegList"in window||(window.SVGPathSegList=function(pathElement){this._pathElement=pathElement,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(mutationRecords){if(this._pathElement){var hasPathMutations=!1;mutationRecords.forEach((function(record){"d"==record.attributeName&&(hasPathMutations=!0)})),hasPathMutations&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(pathSeg){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach((function(pathSeg){pathSeg._owningPathSegList=null})),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(newItem){return this._checkPathSynchronizedToList(),this._list=[newItem],newItem._owningPathSegList=this,this._writeListToPath(),newItem},window.SVGPathSegList.prototype._checkValidIndex=function(index){if(isNaN(index)||index<0||index>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(index){return this._checkPathSynchronizedToList(),this._checkValidIndex(index),this._list[index]},window.SVGPathSegList.prototype.insertItemBefore=function(newItem,index){return this._checkPathSynchronizedToList(),index>this.numberOfItems&&(index=this.numberOfItems),newItem._owningPathSegList&&(newItem=newItem.clone()),this._list.splice(index,0,newItem),newItem._owningPathSegList=this,this._writeListToPath(),newItem},window.SVGPathSegList.prototype.replaceItem=function(newItem,index){return this._checkPathSynchronizedToList(),newItem._owningPathSegList&&(newItem=newItem.clone()),this._checkValidIndex(index),this._list[index]=newItem,newItem._owningPathSegList=this,this._writeListToPath(),newItem},window.SVGPathSegList.prototype.removeItem=function(index){this._checkPathSynchronizedToList(),this._checkValidIndex(index);var item=this._list[index];return this._list.splice(index,1),this._writeListToPath(),item},window.SVGPathSegList.prototype.appendItem=function(newItem){return this._checkPathSynchronizedToList(),newItem._owningPathSegList&&(newItem=newItem.clone()),this._list.push(newItem),newItem._owningPathSegList=this,this._writeListToPath(),newItem},window.SVGPathSegList._pathSegArrayAsString=function(pathSegArray){var string="",first=!0;return pathSegArray.forEach((function(pathSeg){first?(first=!1,string+=pathSeg._asPathString()):string+=" "+pathSeg._asPathString()})),string},window.SVGPathSegList.prototype._parsePath=function(string){if(!string||0==string.length)return[];var owningPathSegList=this,Builder=function(){this.pathSegList=[]};Builder.prototype.appendSegment=function(pathSeg){this.pathSegList.push(pathSeg)};var Source=function(string){this._string=string,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};Source.prototype._isCurrentSpace=function(){var character=this._string[this._currentIndex];return character<=" "&&(" "==character||"\n"==character||"\t"==character||"\r"==character||"\f"==character)},Source.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},Source.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},Source.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},Source.prototype.peekSegmentType=function(){var lookahead=this._string[this._currentIndex];return this._pathSegTypeFromChar(lookahead)},Source.prototype._pathSegTypeFromChar=function(lookahead){switch(lookahead){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},Source.prototype._nextCommandHelper=function(lookahead,previousCommand){return("+"==lookahead||"-"==lookahead||"."==lookahead||lookahead>="0"&&lookahead<="9")&&previousCommand!=window.SVGPathSeg.PATHSEG_CLOSEPATH?previousCommand==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:previousCommand==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:previousCommand:window.SVGPathSeg.PATHSEG_UNKNOWN},Source.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var command=this.peekSegmentType();return command==window.SVGPathSeg.PATHSEG_MOVETO_ABS||command==window.SVGPathSeg.PATHSEG_MOVETO_REL},Source.prototype._parseNumber=function(){var exponent=0,integer=0,frac=1,decimal=0,sign=1,expsign=1,startIndex=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,sign=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))){for(var startIntPartIndex=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=startIntPartIndex)for(var scanIntPartIndex=this._currentIndex-1,multiplier=1;scanIntPartIndex>=startIntPartIndex;)integer+=multiplier*(this._string.charAt(scanIntPartIndex--)-"0"),multiplier*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)frac*=10,decimal+=(this._string.charAt(this._currentIndex)-"0")/frac,this._currentIndex+=1}if(this._currentIndex!=startIndex&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,expsign=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)exponent*=10,exponent+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var number=integer+decimal;if(number*=sign,exponent&&(number*=Math.pow(10,expsign*exponent)),startIndex!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),number}},Source.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var flag=!1,flagChar=this._string.charAt(this._currentIndex++);if("0"==flagChar)flag=!1;else{if("1"!=flagChar)return;flag=!0}return this._skipOptionalSpacesOrDelimiter(),flag}},Source.prototype.parseSegment=function(){var lookahead=this._string[this._currentIndex],command=this._pathSegTypeFromChar(lookahead);if(command==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((command=this._nextCommandHelper(lookahead,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=command,command){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(owningPathSegList,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(owningPathSegList,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(owningPathSegList,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(owningPathSegList,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(owningPathSegList,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(owningPathSegList,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(owningPathSegList,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(owningPathSegList,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(owningPathSegList);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var points={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(owningPathSegList,points.x,points.y,points.x1,points.y1,points.x2,points.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return points={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(owningPathSegList,points.x,points.y,points.x1,points.y1,points.x2,points.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return points={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(owningPathSegList,points.x,points.y,points.x2,points.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return points={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList,points.x,points.y,points.x2,points.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return points={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(owningPathSegList,points.x,points.y,points.x1,points.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return points={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(owningPathSegList,points.x,points.y,points.x1,points.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return points={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(owningPathSegList,points.x,points.y,points.x1,points.y1,points.arcAngle,points.arcLarge,points.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return points={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(owningPathSegList,points.x,points.y,points.x1,points.y1,points.arcAngle,points.arcLarge,points.arcSweep);default:throw"Unknown path seg type."}};var builder=new Builder,source=new Source(string);if(!source.initialCommandIsMoveTo())return[];for(;source.hasMoreData();){var pathSeg=source.parseSegment();if(!pathSeg)return[];builder.appendSegment(pathSeg)}return builder.pathSegList}),String.prototype.padEnd||(String.prototype.padEnd=function(targetLength,padString){return targetLength>>=0,padString=String(void 0!==padString?padString:" "),this.length>targetLength?String(this):((targetLength-=this.length)>padString.length&&(padString+=padString.repeat(targetLength/padString.length)),String(this)+padString.slice(0,targetLength))}),Chart.prototype.axis=function(){},Chart.prototype.axis.labels=function(labels){var $$=this.internal;arguments.length&&(Object.keys(labels).forEach((function(axisId){$$.axis.setLabelText(axisId,labels[axisId])})),$$.axis.updateLabels())},Chart.prototype.axis.max=function(max){var $$=this.internal,config=$$.config;if(!arguments.length)return{x:config.axis_x_max,y:config.axis_y_max,y2:config.axis_y2_max};"object"===_typeof(max)?(isValue(max.x)&&(config.axis_x_max=max.x),isValue(max.y)&&(config.axis_y_max=max.y),isValue(max.y2)&&(config.axis_y2_max=max.y2)):config.axis_y_max=config.axis_y2_max=max,$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},Chart.prototype.axis.min=function(min){var $$=this.internal,config=$$.config;if(!arguments.length)return{x:config.axis_x_min,y:config.axis_y_min,y2:config.axis_y2_min};"object"===_typeof(min)?(isValue(min.x)&&(config.axis_x_min=min.x),isValue(min.y)&&(config.axis_y_min=min.y),isValue(min.y2)&&(config.axis_y2_min=min.y2)):config.axis_y_min=config.axis_y2_min=min,$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},Chart.prototype.axis.range=function(range){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};isDefined(range.max)&&this.axis.max(range.max),isDefined(range.min)&&this.axis.min(range.min)},Chart.prototype.category=function(i,category){var $$=this.internal,config=$$.config;return arguments.length>1&&(config.axis_x_categories[i]=category,$$.redraw()),config.axis_x_categories[i]},Chart.prototype.categories=function(categories){var $$=this.internal,config=$$.config;return arguments.length?(config.axis_x_categories=categories,$$.redraw(),config.axis_x_categories):config.axis_x_categories},Chart.prototype.resize=function(size){var config=this.internal.config;config.size_width=size?size.width:null,config.size_height=size?size.height:null,this.flush()},Chart.prototype.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},Chart.prototype.destroy=function(){var $$=this.internal;if(window.clearInterval($$.intervalForObserveInserted),void 0!==$$.resizeTimeout&&window.clearTimeout($$.resizeTimeout),window.detachEvent)window.detachEvent("onresize",$$.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",$$.resizeIfElementDisplayed);else{var wrapper=window.onresize;wrapper&&wrapper.add&&wrapper.remove&&wrapper.remove($$.resizeFunction)}return $$.resizeFunction.remove(),$$.unbindWindowFocus(),$$.selectChart.classed("c3",!1).html(""),Object.keys($$).forEach((function(key){$$[key]=null})),null},Chart.prototype.color=function(id){return this.internal.color(id)},Chart.prototype.data=function(targetIds){var targets=this.internal.data.targets;return void 0===targetIds?targets:targets.filter((function(t){return[].concat(targetIds).indexOf(t.id)>=0}))},Chart.prototype.data.shown=function(targetIds){return this.internal.filterTargetsToShow(this.data(targetIds))},Chart.prototype.data.values=function(targetId){var targets,values=null;return targetId&&(values=(targets=this.data(targetId))[0]?targets[0].values.map((function(d){return d.value})):null),values},Chart.prototype.data.names=function(names){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",names)},Chart.prototype.data.colors=function(colors){return this.internal.updateDataAttributes("colors",colors)},Chart.prototype.data.axes=function(axes){return this.internal.updateDataAttributes("axes",axes)},Chart.prototype.flow=function(args){var targets,data,domain,baseTarget,baseValue,diff,to,$$=this.internal,notfoundIds=[],orgDataCount=$$.getMaxDataCount(),length=0,tail=0;if(args.json)data=$$.convertJsonToData(args.json,args.keys);else if(args.rows)data=$$.convertRowsToData(args.rows);else{if(!args.columns)return;data=$$.convertColumnsToData(args.columns)}targets=$$.convertDataToTargets(data,!0),$$.data.targets.forEach((function(t){var i,j,found=!1;for(i=0;i<targets.length;i++)if(t.id===targets[i].id){for(found=!0,t.values[t.values.length-1]&&(tail=t.values[t.values.length-1].index+1),length=targets[i].values.length,j=0;j<length;j++)targets[i].values[j].index=tail+j,$$.isTimeSeries()||(targets[i].values[j].x=tail+j);t.values=t.values.concat(targets[i].values),targets.splice(i,1);break}found||notfoundIds.push(t.id)})),$$.data.targets.forEach((function(t){var i,j;for(i=0;i<notfoundIds.length;i++)if(t.id===notfoundIds[i])for(tail=t.values[t.values.length-1].index+1,j=0;j<length;j++)t.values.push({id:t.id,index:tail+j,x:$$.isTimeSeries()?$$.getOtherTargetX(tail+j):tail+j,value:null})})),$$.data.targets.length&&targets.forEach((function(t){var i,missing=[];for(i=$$.data.targets[0].values[0].index;i<tail;i++)missing.push({id:t.id,index:i,x:$$.isTimeSeries()?$$.getOtherTargetX(i):i,value:null});t.values.forEach((function(v){v.index+=tail,$$.isTimeSeries()||(v.x+=tail)})),t.values=missing.concat(t.values)})),$$.data.targets=$$.data.targets.concat(targets),$$.getMaxDataCount(),baseValue=(baseTarget=$$.data.targets[0]).values[0],isDefined(args.to)?(length=0,to=$$.isTimeSeries()?$$.parseDate(args.to):args.to,baseTarget.values.forEach((function(v){v.x<to&&length++}))):isDefined(args.length)&&(length=args.length),orgDataCount?1===orgDataCount&&$$.isTimeSeries()&&(diff=(baseTarget.values[baseTarget.values.length-1].x-baseValue.x)/2,domain=[new Date(+baseValue.x-diff),new Date(+baseValue.x+diff)],$$.updateXDomain(null,!0,!0,!1,domain)):(diff=$$.isTimeSeries()?baseTarget.values.length>1?baseTarget.values[baseTarget.values.length-1].x-baseValue.x:baseValue.x-$$.getXDomain($$.data.targets)[0]:1,domain=[baseValue.x-diff,baseValue.x],$$.updateXDomain(null,!0,!0,!1,domain)),$$.updateTargets($$.data.targets),$$.redraw({flow:{index:baseValue.index,length,duration:isValue(args.duration)?args.duration:$$.config.transition_duration,done:args.done,orgDataCount},withLegend:!0,withTransition:orgDataCount>1,withTrimXDomain:!1,withUpdateXAxis:!0})},ChartInternal.prototype.generateFlow=function(args){var $$=this,config=$$.config,d3=$$.d3;return function(){var translateX,transform,domain,xgrid,xgridLines,mainRegion,mainText,mainBar,mainLine,mainArea,mainCircle,targets=args.targets,flow=args.flow,drawBar=args.drawBar,drawLine=args.drawLine,drawArea=args.drawArea,cx=args.cx,cy=args.cy,xv=args.xv,xForText=args.xForText,yForText=args.yForText,duration=args.duration,flowIndex=flow.index,flowLength=flow.length,flowStart=$$.getValueOnIndex($$.data.targets[0].values,flowIndex),flowEnd=$$.getValueOnIndex($$.data.targets[0].values,flowIndex+flowLength),orgDomain=$$.x.domain(),durationForFlow=flow.duration||duration,done=flow.done||function(){},wait=$$.generateWait();$$.flowing=!0,$$.data.targets.forEach((function(d){d.values.splice(0,flowLength)})),domain=$$.updateXDomain(targets,!0,!0),$$.updateXGrid&&$$.updateXGrid(!0),xgrid=$$.xgrid||d3.selectAll([]),xgridLines=$$.xgridLines||d3.selectAll([]),mainRegion=$$.mainRegion||d3.selectAll([]),mainText=$$.mainText||d3.selectAll([]),mainBar=$$.mainBar||d3.selectAll([]),mainLine=$$.mainLine||d3.selectAll([]),mainArea=$$.mainArea||d3.selectAll([]),mainCircle=$$.mainCircle||d3.selectAll([]),flow.orgDataCount?translateX=1===flow.orgDataCount||(flowStart&&flowStart.x)===(flowEnd&&flowEnd.x)||$$.isTimeSeries()?$$.x(orgDomain[0])-$$.x(domain[0]):$$.x(flowStart.x)-$$.x(flowEnd.x):1!==$$.data.targets[0].values.length?translateX=$$.x(orgDomain[0])-$$.x(domain[0]):$$.isTimeSeries()?(flowStart=$$.getValueOnIndex($$.data.targets[0].values,0),flowEnd=$$.getValueOnIndex($$.data.targets[0].values,$$.data.targets[0].values.length-1),translateX=$$.x(flowStart.x)-$$.x(flowEnd.x)):translateX=diffDomain(domain)/2,transform="translate("+translateX+",0) scale("+diffDomain(orgDomain)/diffDomain(domain)+",1)",$$.hideXGridFocus();var flowTransition=d3.transition().ease(d3.easeLinear).duration(durationForFlow);wait.add($$.xAxis($$.axes.x,flowTransition)),wait.add(mainBar.transition(flowTransition).attr("transform",transform)),wait.add(mainLine.transition(flowTransition).attr("transform",transform)),wait.add(mainArea.transition(flowTransition).attr("transform",transform)),wait.add(mainCircle.transition(flowTransition).attr("transform",transform)),wait.add(mainText.transition(flowTransition).attr("transform",transform)),wait.add(mainRegion.filter($$.isRegionOnX).transition(flowTransition).attr("transform",transform)),wait.add(xgrid.transition(flowTransition).attr("transform",transform)),wait.add(xgridLines.transition(flowTransition).attr("transform",transform)),wait((function(){var i,shapes=[],texts=[];if(flowLength){for(i=0;i<flowLength;i++)shapes.push("."+CLASS.shape+"-"+(flowIndex+i)),texts.push("."+CLASS.text+"-"+(flowIndex+i));$$.svg.selectAll("."+CLASS.shapes).selectAll(shapes).remove(),$$.svg.selectAll("."+CLASS.texts).selectAll(texts).remove(),$$.svg.select("."+CLASS.xgrid).remove()}xgrid.attr("transform",null).attr("x1",$$.xgridAttr.x1).attr("x2",$$.xgridAttr.x2).attr("y1",$$.xgridAttr.y1).attr("y2",$$.xgridAttr.y2).style("opacity",$$.xgridAttr.opacity),xgridLines.attr("transform",null),xgridLines.select("line").attr("x1",config.axis_rotated?0:xv).attr("x2",config.axis_rotated?$$.width:xv),xgridLines.select("text").attr("x",config.axis_rotated?$$.width:0).attr("y",xv),mainBar.attr("transform",null).attr("d",drawBar),mainLine.attr("transform",null).attr("d",drawLine),mainArea.attr("transform",null).attr("d",drawArea),mainCircle.attr("transform",null).attr("cx",cx).attr("cy",cy),mainText.attr("transform",null).attr("x",xForText).attr("y",yForText).style("fill-opacity",$$.opacityForText.bind($$)),mainRegion.attr("transform",null),mainRegion.filter($$.isRegionOnX).attr("x",$$.regionX.bind($$)).attr("width",$$.regionWidth.bind($$)),done(),$$.flowing=!1}))}},Chart.prototype.focus=function(targetIds){var candidates,$$=this.internal;targetIds=$$.mapToTargetIds(targetIds),candidates=$$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow,$$))),this.revert(),this.defocus(),candidates.classed(CLASS.focused,!0).classed(CLASS.defocused,!1),$$.hasArcType()&&$$.expandArc(targetIds),$$.toggleFocusLegend(targetIds,!0),$$.focusedTargetIds=targetIds,$$.defocusedTargetIds=$$.defocusedTargetIds.filter((function(id){return targetIds.indexOf(id)<0}))},Chart.prototype.defocus=function(targetIds){var $$=this.internal;targetIds=$$.mapToTargetIds(targetIds),$$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow,$$))).classed(CLASS.focused,!1).classed(CLASS.defocused,!0),$$.hasArcType()&&$$.unexpandArc(targetIds),$$.toggleFocusLegend(targetIds,!1),$$.focusedTargetIds=$$.focusedTargetIds.filter((function(id){return targetIds.indexOf(id)<0})),$$.defocusedTargetIds=targetIds},Chart.prototype.revert=function(targetIds){var $$=this.internal;targetIds=$$.mapToTargetIds(targetIds),$$.svg.selectAll($$.selectorTargets(targetIds)).classed(CLASS.focused,!1).classed(CLASS.defocused,!1),$$.hasArcType()&&$$.unexpandArc(targetIds),$$.config.legend_show&&($$.showLegend(targetIds.filter($$.isLegendToShow.bind($$))),$$.legend.selectAll($$.selectorLegends(targetIds)).filter((function(){return $$.d3.select(this).classed(CLASS.legendItemFocused)})).classed(CLASS.legendItemFocused,!1)),$$.focusedTargetIds=[],$$.defocusedTargetIds=[]},Chart.prototype.xgrids=function(grids){var $$=this.internal,config=$$.config;return grids?(config.grid_x_lines=grids,$$.redrawWithoutRescale(),config.grid_x_lines):config.grid_x_lines},Chart.prototype.xgrids.add=function(grids){var $$=this.internal;return this.xgrids($$.config.grid_x_lines.concat(grids||[]))},Chart.prototype.xgrids.remove=function(params){this.internal.removeGridLines(params,!0)},Chart.prototype.ygrids=function(grids){var $$=this.internal,config=$$.config;return grids?(config.grid_y_lines=grids,$$.redrawWithoutRescale(),config.grid_y_lines):config.grid_y_lines},Chart.prototype.ygrids.add=function(grids){var $$=this.internal;return this.ygrids($$.config.grid_y_lines.concat(grids||[]))},Chart.prototype.ygrids.remove=function(params){this.internal.removeGridLines(params,!1)},Chart.prototype.groups=function(groups){var $$=this.internal,config=$$.config;return isUndefined(groups)||(config.data_groups=groups,$$.redraw()),config.data_groups},Chart.prototype.legend=function(){},Chart.prototype.legend.show=function(targetIds){var $$=this.internal;$$.showLegend($$.mapToTargetIds(targetIds)),$$.updateAndRedraw({withLegend:!0})},Chart.prototype.legend.hide=function(targetIds){var $$=this.internal;$$.hideLegend($$.mapToTargetIds(targetIds)),$$.updateAndRedraw({withLegend:!1})},Chart.prototype.load=function(args){var $$=this.internal,config=$$.config;args.xs&&$$.addXs(args.xs),"names"in args&&Chart.prototype.data.names.bind(this)(args.names),"classes"in args&&Object.keys(args.classes).forEach((function(id){config.data_classes[id]=args.classes[id]})),"categories"in args&&$$.isCategorized()&&(config.axis_x_categories=args.categories),"axes"in args&&Object.keys(args.axes).forEach((function(id){config.data_axes[id]=args.axes[id]})),"colors"in args&&Object.keys(args.colors).forEach((function(id){config.data_colors[id]=args.colors[id]})),"cacheIds"in args&&$$.hasCaches(args.cacheIds)?$$.load($$.getCaches(args.cacheIds),args.done):"unload"in args?$$.unload($$.mapToTargetIds("boolean"==typeof args.unload&&args.unload?null:args.unload),(function(){$$.loadFromArgs(args)})):$$.loadFromArgs(args)},Chart.prototype.unload=function(args){var $$=this.internal;(args=args||{})instanceof Array?args={ids:args}:"string"==typeof args&&(args={ids:[args]}),$$.unload($$.mapToTargetIds(args.ids),(function(){$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),args.done&&args.done()}))},Chart.prototype.regions=function(regions){var $$=this.internal,config=$$.config;return regions?(config.regions=regions,$$.redrawWithoutRescale(),config.regions):config.regions},Chart.prototype.regions.add=function(regions){var $$=this.internal,config=$$.config;return regions?(config.regions=config.regions.concat(regions),$$.redrawWithoutRescale(),config.regions):config.regions},Chart.prototype.regions.remove=function(options){var duration,classes,regions,$$=this.internal,config=$$.config;return duration=getOption(options=options||{},"duration",config.transition_duration),classes=getOption(options,"classes",[CLASS.region]),regions=$$.main.select("."+CLASS.regions).selectAll(classes.map((function(c){return"."+c}))),(duration?regions.transition().duration(duration):regions).style("opacity",0).remove(),config.regions=config.regions.filter((function(region){var found=!1;return!region.class||(region.class.split(" ").forEach((function(c){classes.indexOf(c)>=0&&(found=!0)})),!found)})),config.regions},Chart.prototype.selected=function(targetId){var $$=this.internal,d3=$$.d3;return d3.merge($$.main.selectAll("."+CLASS.shapes+$$.getTargetSelectorSuffix(targetId)).selectAll("."+CLASS.shape).filter((function(){return d3.select(this).classed(CLASS.SELECTED)})).map((function(d){return d.map((function(d){var data=d.__data__;return data.data?data.data:data}))})))},Chart.prototype.select=function(ids,indices,resetOther){var $$=this.internal,d3=$$.d3,config=$$.config;config.data_selection_enabled&&$$.main.selectAll("."+CLASS.shapes).selectAll("."+CLASS.shape).each((function(d,i){var shape=d3.select(this),id=d.data?d.data.id:d.id,toggle=$$.getToggle(this,d).bind($$),isTargetId=config.data_selection_grouped||!ids||ids.indexOf(id)>=0,isTargetIndex=!indices||indices.indexOf(i)>=0,isSelected=shape.classed(CLASS.SELECTED);shape.classed(CLASS.line)||shape.classed(CLASS.area)||(isTargetId&&isTargetIndex?config.data_selection_isselectable(d)&&!isSelected&&toggle(!0,shape.classed(CLASS.SELECTED,!0),d,i):isDefined(resetOther)&&resetOther&&isSelected&&toggle(!1,shape.classed(CLASS.SELECTED,!1),d,i))}))},Chart.prototype.unselect=function(ids,indices){var $$=this.internal,d3=$$.d3,config=$$.config;config.data_selection_enabled&&$$.main.selectAll("."+CLASS.shapes).selectAll("."+CLASS.shape).each((function(d,i){var shape=d3.select(this),id=d.data?d.data.id:d.id,toggle=$$.getToggle(this,d).bind($$),isTargetId=config.data_selection_grouped||!ids||ids.indexOf(id)>=0,isTargetIndex=!indices||indices.indexOf(i)>=0,isSelected=shape.classed(CLASS.SELECTED);shape.classed(CLASS.line)||shape.classed(CLASS.area)||isTargetId&&isTargetIndex&&config.data_selection_isselectable(d)&&isSelected&&toggle(!1,shape.classed(CLASS.SELECTED,!1),d,i)}))},Chart.prototype.show=function(targetIds,options){var targets,$$=this.internal;targetIds=$$.mapToTargetIds(targetIds),options=options||{},$$.removeHiddenTargetIds(targetIds),(targets=$$.svg.selectAll($$.selectorTargets(targetIds))).transition().style("display","initial","important").style("opacity",1,"important").call($$.endall,(function(){targets.style("opacity",null).style("opacity",1)})),options.withLegend&&$$.showLegend(targetIds),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},Chart.prototype.hide=function(targetIds,options){var targets,$$=this.internal;targetIds=$$.mapToTargetIds(targetIds),options=options||{},$$.addHiddenTargetIds(targetIds),(targets=$$.svg.selectAll($$.selectorTargets(targetIds))).transition().style("opacity",0,"important").call($$.endall,(function(){targets.style("opacity",null).style("opacity",0),targets.style("display","none")})),options.withLegend&&$$.hideLegend(targetIds),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},Chart.prototype.toggle=function(targetIds,options){var that=this,$$=this.internal;$$.mapToTargetIds(targetIds).forEach((function(targetId){$$.isTargetToShow(targetId)?that.hide(targetId,options):that.show(targetId,options)}))},Chart.prototype.tooltip=function(){},Chart.prototype.tooltip.show=function(args){var targets,data,$$=this.internal,mouse={};args.mouse?mouse=args.mouse:(args.data?data=args.data:void 0!==args.x&&(targets=args.id?$$.data.targets.filter((function(t){return t.id===args.id})):$$.data.targets,data=$$.filterByX(targets,args.x).slice(0,1)[0]),mouse=data?$$.getMousePosition(data):null),$$.dispatchEvent("mousemove",mouse),$$.config.tooltip_onshow.call($$,data)},Chart.prototype.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},Chart.prototype.transform=function(type,targetIds){var $$=this.internal,options=["pie","donut"].indexOf(type)>=0?{withTransform:!0}:null;$$.transformTo(targetIds,type,options)},ChartInternal.prototype.transformTo=function(targetIds,type,optionsForRedraw){var $$=this,withTransitionForAxis=!$$.hasArcType(),options=optionsForRedraw||{withTransitionForAxis};options.withTransitionForTransform=!1,$$.transiting=!1,$$.setTargetType(targetIds,type),$$.updateTargets($$.data.targets),$$.updateAndRedraw(options)},Chart.prototype.x=function(x){var $$=this.internal;return arguments.length&&($$.updateTargetX($$.data.targets,x),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),$$.data.xs},Chart.prototype.xs=function(xs){var $$=this.internal;return arguments.length&&($$.updateTargetXs($$.data.targets,xs),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),$$.data.xs},Chart.prototype.zoom=function(domain){var $$=this.internal;return domain?($$.isTimeSeries()&&(domain=domain.map((function(x){return $$.parseDate(x)}))),$$.config.subchart_show?$$.brush.selectionAsValue(domain,!0):($$.updateXDomain(null,!0,!1,!1,domain),$$.redraw({withY:$$.config.zoom_rescale,withSubchart:!1})),$$.config.zoom_onzoom.call(this,$$.x.orgDomain()),domain):$$.x.domain()},Chart.prototype.zoom.enable=function(enabled){var $$=this.internal;$$.config.zoom_enabled=enabled,$$.updateAndRedraw()},Chart.prototype.unzoom=function(){var $$=this.internal;$$.config.subchart_show?$$.brush.clear():($$.updateXDomain(null,!0,!1,!1,$$.subX.domain()),$$.redraw({withY:$$.config.zoom_rescale,withSubchart:!1}))},Chart.prototype.zoom.max=function(max){var $$=this.internal,config=$$.config,d3=$$.d3;if(0!==max&&!max)return config.zoom_x_max;config.zoom_x_max=d3.max([$$.orgXDomain[1],max])},Chart.prototype.zoom.min=function(min){var $$=this.internal,config=$$.config,d3=$$.d3;if(0!==min&&!min)return config.zoom_x_min;config.zoom_x_min=d3.min([$$.orgXDomain[0],min])},Chart.prototype.zoom.range=function(range){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};isDefined(range.max)&&this.domain.max(range.max),isDefined(range.min)&&this.domain.min(range.min)},ChartInternal.prototype.initPie=function(){var $$=this,d3=$$.d3;$$.pie=d3.pie().value((function(d){return d.values.reduce((function(a,b){return a+b.value}),0)}));var orderFct=$$.getOrderFunction();if(orderFct&&($$.isOrderAsc()||$$.isOrderDesc())){var defaultSort=orderFct;orderFct=function(t1,t2){return-1*defaultSort(t1,t2)}}$$.pie.sort(orderFct||null)},ChartInternal.prototype.updateRadius=function(){var $$=this,config=$$.config,w=config.gauge_width||config.donut_width,gaugeArcWidth=$$.filterTargetsToShow($$.data.targets).length*$$.config.gauge_arcs_minWidth;$$.radiusExpanded=Math.min($$.arcWidth,$$.arcHeight)/2*($$.hasType("gauge")?.85:1),$$.radius=.95*$$.radiusExpanded,$$.innerRadiusRatio=w?($$.radius-w)/$$.radius:.6,$$.innerRadius=$$.hasType("donut")||$$.hasType("gauge")?$$.radius*$$.innerRadiusRatio:0,$$.gaugeArcWidth=w||(gaugeArcWidth<=$$.radius-$$.innerRadius?$$.radius-$$.innerRadius:gaugeArcWidth<=$$.radius?gaugeArcWidth:$$.radius)},ChartInternal.prototype.updateArc=function(){var $$=this;$$.svgArc=$$.getSvgArc(),$$.svgArcExpanded=$$.getSvgArcExpanded(),$$.svgArcExpandedSub=$$.getSvgArcExpanded(.98)},ChartInternal.prototype.updateAngle=function(d){var gMin,gMax,gTic,gValue,$$=this,config=$$.config,found=!1,index=0;return config?($$.pie($$.filterTargetsToShow($$.data.targets)).forEach((function(t){found||t.data.id!==d.data.id||(found=!0,(d=t).index=index),index++})),isNaN(d.startAngle)&&(d.startAngle=0),isNaN(d.endAngle)&&(d.endAngle=d.startAngle),$$.isGaugeType(d.data)&&(gMin=config.gauge_min,gMax=config.gauge_max,gTic=Math.PI*(config.gauge_fullCircle?2:1)/(gMax-gMin),gValue=d.value<gMin?0:d.value<gMax?d.value-gMin:gMax-gMin,d.startAngle=config.gauge_startingAngle,d.endAngle=d.startAngle+gTic*gValue),found?d:null):null},ChartInternal.prototype.getSvgArc=function(){var $$=this,hasGaugeType=$$.hasType("gauge"),singleArcWidth=$$.gaugeArcWidth/$$.filterTargetsToShow($$.data.targets).length,arc=$$.d3.arc().outerRadius((function(d){return hasGaugeType?$$.radius-singleArcWidth*d.index:$$.radius})).innerRadius((function(d){return hasGaugeType?$$.radius-singleArcWidth*(d.index+1):$$.innerRadius})),newArc=function(d,withoutUpdate){var updated;return withoutUpdate?arc(d):(updated=$$.updateAngle(d))?arc(updated):"M 0 0"};return newArc.centroid=arc.centroid,newArc},ChartInternal.prototype.getSvgArcExpanded=function(rate){rate=rate||1;var $$=this,hasGaugeType=$$.hasType("gauge"),singleArcWidth=$$.gaugeArcWidth/$$.filterTargetsToShow($$.data.targets).length,expandWidth=Math.min($$.radiusExpanded*rate-$$.radius,.8*singleArcWidth-100*(1-rate)),arc=$$.d3.arc().outerRadius((function(d){return hasGaugeType?$$.radius-singleArcWidth*d.index+expandWidth:$$.radiusExpanded*rate})).innerRadius((function(d){return hasGaugeType?$$.radius-singleArcWidth*(d.index+1):$$.innerRadius}));return function(d){var updated=$$.updateAngle(d);return updated?arc(updated):"M 0 0"}},ChartInternal.prototype.getArc=function(d,withoutUpdate,force){return force||this.isArcType(d.data)?this.svgArc(d,withoutUpdate):"M 0 0"},ChartInternal.prototype.transformForArcLabel=function(d){var c,x,y,h,ratio,$$=this,config=$$.config,updated=$$.updateAngle(d),translate="",hasGauge=$$.hasType("gauge");if(updated&&!hasGauge)c=this.svgArc.centroid(updated),x=isNaN(c[0])?0:c[0],y=isNaN(c[1])?0:c[1],h=Math.sqrt(x*x+y*y),translate="translate("+x*(ratio=$$.hasType("donut")&&config.donut_label_ratio?isFunction(config.donut_label_ratio)?config.donut_label_ratio(d,$$.radius,h):config.donut_label_ratio:$$.hasType("pie")&&config.pie_label_ratio?isFunction(config.pie_label_ratio)?config.pie_label_ratio(d,$$.radius,h):config.pie_label_ratio:$$.radius&&h?(36/$$.radius>.375?1.175-36/$$.radius:.8)*$$.radius/h:0)+","+y*ratio+")";else if(updated&&hasGauge&&$$.filterTargetsToShow($$.data.targets).length>1){var y1=Math.sin(updated.endAngle-Math.PI/2);translate="translate("+(x=Math.cos(updated.endAngle-Math.PI/2)*($$.radiusExpanded+25))+","+(y=y1*($$.radiusExpanded+15-Math.abs(10*y1))+3)+")"}return translate},ChartInternal.prototype.getArcRatio=function(d){var $$=this,config=$$.config,whole=Math.PI*($$.hasType("gauge")&&!config.gauge_fullCircle?1:2);return d?(d.endAngle-d.startAngle)/whole:null},ChartInternal.prototype.convertToArcData=function(d){return this.addName({id:d.data.id,value:d.value,ratio:this.getArcRatio(d),index:d.index})},ChartInternal.prototype.textForArcLabel=function(d){var updated,value,ratio,id,format,$$=this;return $$.shouldShowArcLabel()?(value=(updated=$$.updateAngle(d))?updated.value:null,ratio=$$.getArcRatio(updated),id=d.data.id,$$.hasType("gauge")||$$.meetsArcLabelThreshold(ratio)?(format=$$.getArcLabelFormat())?format(value,ratio,id):$$.defaultArcValueFormat(value,ratio):""):""},ChartInternal.prototype.textForGaugeMinMax=function(value,isMax){var format=this.getGaugeLabelExtents();return format?format(value,isMax):value},ChartInternal.prototype.expandArc=function(targetIds){var interval,$$=this;$$.transiting?interval=window.setInterval((function(){$$.transiting||(window.clearInterval(interval),$$.legend.selectAll(".c3-legend-item-focused").size()>0&&$$.expandArc(targetIds))}),10):(targetIds=$$.mapToTargetIds(targetIds),$$.svg.selectAll($$.selectorTargets(targetIds,"."+CLASS.chartArc)).each((function(d){$$.shouldExpand(d.data.id)&&$$.d3.select(this).selectAll("path").transition().duration($$.expandDuration(d.data.id)).attr("d",$$.svgArcExpanded).transition().duration(2*$$.expandDuration(d.data.id)).attr("d",$$.svgArcExpandedSub).each((function(d){$$.isDonutType(d.data)}))})))},ChartInternal.prototype.unexpandArc=function(targetIds){var $$=this;$$.transiting||(targetIds=$$.mapToTargetIds(targetIds),$$.svg.selectAll($$.selectorTargets(targetIds,"."+CLASS.chartArc)).selectAll("path").transition().duration((function(d){return $$.expandDuration(d.data.id)})).attr("d",$$.svgArc),$$.svg.selectAll("."+CLASS.arc))},ChartInternal.prototype.expandDuration=function(id){var $$=this,config=$$.config;return $$.isDonutType(id)?config.donut_expand_duration:$$.isGaugeType(id)?config.gauge_expand_duration:$$.isPieType(id)?config.pie_expand_duration:50},ChartInternal.prototype.shouldExpand=function(id){var $$=this,config=$$.config;return $$.isDonutType(id)&&config.donut_expand||$$.isGaugeType(id)&&config.gauge_expand||$$.isPieType(id)&&config.pie_expand},ChartInternal.prototype.shouldShowArcLabel=function(){var $$=this,config=$$.config,shouldShow=!0;return $$.hasType("donut")?shouldShow=config.donut_label_show:$$.hasType("pie")&&(shouldShow=config.pie_label_show),shouldShow},ChartInternal.prototype.meetsArcLabelThreshold=function(ratio){var $$=this,config=$$.config;return ratio>=($$.hasType("donut")?config.donut_label_threshold:config.pie_label_threshold)},ChartInternal.prototype.getArcLabelFormat=function(){var $$=this,config=$$.config,format=config.pie_label_format;return $$.hasType("gauge")?format=config.gauge_label_format:$$.hasType("donut")&&(format=config.donut_label_format),format},ChartInternal.prototype.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},ChartInternal.prototype.getArcTitle=function(){var $$=this;return $$.hasType("donut")?$$.config.donut_title:""},ChartInternal.prototype.updateTargetsForArc=function(targets){var mainPieEnter,$$=this,main=$$.main,classChartArc=$$.classChartArc.bind($$),classArcs=$$.classArcs.bind($$),classFocus=$$.classFocus.bind($$);(mainPieEnter=main.select("."+CLASS.chartArcs).selectAll("."+CLASS.chartArc).data($$.pie(targets)).attr("class",(function(d){return classChartArc(d)+classFocus(d.data)})).enter().append("g").attr("class",classChartArc)).append("g").attr("class",classArcs),mainPieEnter.append("text").attr("dy",$$.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},ChartInternal.prototype.initArc=function(){var $$=this;$$.arcs=$$.main.select("."+CLASS.chart).append("g").attr("class",CLASS.chartArcs).attr("transform",$$.getTranslate("arc")),$$.arcs.append("text").attr("class",CLASS.chartArcsTitle).style("text-anchor","middle").text($$.getArcTitle())},ChartInternal.prototype.redrawArc=function(duration,durationForExit,withTransform){var arcs,mainArc,arcLabelLines,mainArcLabelLine,$$=this,d3=$$.d3,config=$$.config,main=$$.main,hasGaugeType=$$.hasType("gauge");if(mainArc=(arcs=main.selectAll("."+CLASS.arcs).selectAll("."+CLASS.arc).data($$.arcData.bind($$))).enter().append("path").attr("class",$$.classArc.bind($$)).style("fill",(function(d){return $$.color(d.data)})).style("cursor",(function(d){return config.interaction_enabled&&config.data_selection_isselectable(d)?"pointer":null})).each((function(d){$$.isGaugeType(d.data)&&(d.startAngle=d.endAngle=config.gauge_startingAngle),this._current=d})).merge(arcs),hasGaugeType&&(mainArcLabelLine=(arcLabelLines=main.selectAll("."+CLASS.arcs).selectAll("."+CLASS.arcLabelLine).data($$.arcData.bind($$))).enter().append("rect").attr("class",(function(d){return CLASS.arcLabelLine+" "+CLASS.target+" "+CLASS.target+"-"+d.data.id})).merge(arcLabelLines),1===$$.filterTargetsToShow($$.data.targets).length?mainArcLabelLine.style("display","none"):mainArcLabelLine.style("fill",(function(d){return $$.levelColor?$$.levelColor(d.data.values[0].value):$$.color(d.data)})).style("display",config.gauge_labelLine_show?"":"none").each((function(d){var lineLength=0,lineThickness=2,x=0,y=0,transform="";if($$.hiddenTargetIds.indexOf(d.data.id)<0){var updated=$$.updateAngle(d),innerLineLength=$$.gaugeArcWidth/$$.filterTargetsToShow($$.data.targets).length*(updated.index+1),lineAngle=updated.endAngle-Math.PI/2,arcInnerRadius=$$.radius-innerLineLength,linePositioningAngle=lineAngle-(0===arcInnerRadius?0:1/arcInnerRadius);lineLength=$$.radiusExpanded-$$.radius+innerLineLength,x=Math.cos(linePositioningAngle)*arcInnerRadius,y=Math.sin(linePositioningAngle)*arcInnerRadius,transform="rotate("+180*lineAngle/Math.PI+", "+x+", "+y+")"}d3.select(this).attr("x",x).attr("y",y).attr("width",lineLength).attr("height",lineThickness).attr("transform",transform).style("stroke-dasharray","0, "+(lineLength+lineThickness)+", 0")}))),mainArc.attr("transform",(function(d){return!$$.isGaugeType(d.data)&&withTransform?"scale(0)":""})).on("mouseover",config.interaction_enabled?function(d){var updated,arcData;$$.transiting||(updated=$$.updateAngle(d))&&(arcData=$$.convertToArcData(updated),$$.expandArc(updated.data.id),$$.api.focus(updated.data.id),$$.toggleFocusLegend(updated.data.id,!0),$$.config.data_onmouseover(arcData,this))}:null).on("mousemove",config.interaction_enabled?function(d){var selectedData,updated=$$.updateAngle(d);updated&&(selectedData=[$$.convertToArcData(updated)],$$.showTooltip(selectedData,this))}:null).on("mouseout",config.interaction_enabled?function(d){var updated,arcData;$$.transiting||(updated=$$.updateAngle(d))&&(arcData=$$.convertToArcData(updated),$$.unexpandArc(updated.data.id),$$.api.revert(),$$.revertLegend(),$$.hideTooltip(),$$.config.data_onmouseout(arcData,this))}:null).on("click",config.interaction_enabled?function(d,i){var arcData,updated=$$.updateAngle(d);updated&&(arcData=$$.convertToArcData(updated),$$.toggleShape&&$$.toggleShape(this,arcData,i),$$.config.data_onclick.call($$.api,arcData,this))}:null).each((function(){$$.transiting=!0})).transition().duration(duration).attrTween("d",(function(d){var interpolate,updated=$$.updateAngle(d);return updated?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),interpolate=d3.interpolate(this._current,updated),this._current=interpolate(0),function(t){var interpolated=interpolate(t);return interpolated.data=d.data,$$.getArc(interpolated,!0)}):function(){return"M 0 0"}})).attr("transform",withTransform?"scale(1)":"").style("fill",(function(d){return $$.levelColor?$$.levelColor(d.data.values[0].value):$$.color(d.data.id)})).call($$.endall,(function(){$$.transiting=!1})),arcs.exit().transition().duration(durationForExit).style("opacity",0).remove(),main.selectAll("."+CLASS.chartArc).select("text").style("opacity",0).attr("class",(function(d){return $$.isGaugeType(d.data)?CLASS.gaugeValue:""})).text($$.textForArcLabel.bind($$)).attr("transform",$$.transformForArcLabel.bind($$)).style("font-size",(function(d){return $$.isGaugeType(d.data)&&1===$$.filterTargetsToShow($$.data.targets).length?Math.round($$.radius/5)+"px":""})).transition().duration(duration).style("opacity",(function(d){return $$.isTargetToShow(d.data.id)&&$$.isArcType(d.data)?1:0})),main.select("."+CLASS.chartArcsTitle).style("opacity",$$.hasType("donut")||hasGaugeType?1:0),hasGaugeType){var index=0,backgroundArc=$$.arcs.select("g."+CLASS.chartArcsBackground).selectAll("path."+CLASS.chartArcsBackground).data($$.data.targets);backgroundArc.enter().append("path").attr("class",(function(d,i){return CLASS.chartArcsBackground+" "+CLASS.chartArcsBackground+"-"+i})).merge(backgroundArc).attr("d",(function(d1){if($$.hiddenTargetIds.indexOf(d1.id)>=0)return"M 0 0";var d={data:[{value:config.gauge_max}],startAngle:config.gauge_startingAngle,endAngle:-1*config.gauge_startingAngle*(config.gauge_fullCircle?Math.PI:1),index:index++};return $$.getArc(d,!0,!0)})),backgroundArc.exit().remove(),$$.arcs.select("."+CLASS.chartArcsGaugeUnit).attr("dy",".75em").text(config.gauge_label_show?config.gauge_units:""),$$.arcs.select("."+CLASS.chartArcsGaugeMin).attr("dx",-1*($$.innerRadius+($$.radius-$$.innerRadius)/(config.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(config.gauge_label_show?$$.textForGaugeMinMax(config.gauge_min,!1):""),$$.arcs.select("."+CLASS.chartArcsGaugeMax).attr("dx",$$.innerRadius+($$.radius-$$.innerRadius)/(config.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(config.gauge_label_show?$$.textForGaugeMinMax(config.gauge_max,!0):"")}},ChartInternal.prototype.initGauge=function(){var arcs=this.arcs;this.hasType("gauge")&&(arcs.append("g").attr("class",CLASS.chartArcsBackground),arcs.append("text").attr("class",CLASS.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),arcs.append("text").attr("class",CLASS.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),arcs.append("text").attr("class",CLASS.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},ChartInternal.prototype.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},ChartInternal.prototype.hasCaches=function(ids){for(var i=0;i<ids.length;i++)if(!(ids[i]in this.cache))return!1;return!0},ChartInternal.prototype.addCache=function(id,target){this.cache[id]=this.cloneTarget(target)},ChartInternal.prototype.getCaches=function(ids){var i,targets=[];for(i=0;i<ids.length;i++)ids[i]in this.cache&&targets.push(this.cloneTarget(this.cache[ids[i]]));return targets},ChartInternal.prototype.categoryName=function(i){var config=this.config;return i<config.axis_x_categories.length?config.axis_x_categories[i]:i},ChartInternal.prototype.generateTargetClass=function(targetId){return targetId||0===targetId?("-"+targetId).replace(/\s/g,"-"):""},ChartInternal.prototype.generateClass=function(prefix,targetId){return" "+prefix+" "+prefix+this.generateTargetClass(targetId)},ChartInternal.prototype.classText=function(d){return this.generateClass(CLASS.text,d.index)},ChartInternal.prototype.classTexts=function(d){return this.generateClass(CLASS.texts,d.id)},ChartInternal.prototype.classShape=function(d){return this.generateClass(CLASS.shape,d.index)},ChartInternal.prototype.classShapes=function(d){return this.generateClass(CLASS.shapes,d.id)},ChartInternal.prototype.classLine=function(d){return this.classShape(d)+this.generateClass(CLASS.line,d.id)},ChartInternal.prototype.classLines=function(d){return this.classShapes(d)+this.generateClass(CLASS.lines,d.id)},ChartInternal.prototype.classCircle=function(d){return this.classShape(d)+this.generateClass(CLASS.circle,d.index)},ChartInternal.prototype.classCircles=function(d){return this.classShapes(d)+this.generateClass(CLASS.circles,d.id)},ChartInternal.prototype.classBar=function(d){return this.classShape(d)+this.generateClass(CLASS.bar,d.index)},ChartInternal.prototype.classBars=function(d){return this.classShapes(d)+this.generateClass(CLASS.bars,d.id)},ChartInternal.prototype.classArc=function(d){return this.classShape(d.data)+this.generateClass(CLASS.arc,d.data.id)},ChartInternal.prototype.classArcs=function(d){return this.classShapes(d.data)+this.generateClass(CLASS.arcs,d.data.id)},ChartInternal.prototype.classArea=function(d){return this.classShape(d)+this.generateClass(CLASS.area,d.id)},ChartInternal.prototype.classAreas=function(d){return this.classShapes(d)+this.generateClass(CLASS.areas,d.id)},ChartInternal.prototype.classRegion=function(d,i){return this.generateClass(CLASS.region,i)+" "+("class"in d?d.class:"")},ChartInternal.prototype.classEvent=function(d){return this.generateClass(CLASS.eventRect,d.index)},ChartInternal.prototype.classTarget=function(id){var $$=this,additionalClassSuffix=$$.config.data_classes[id],additionalClass="";return additionalClassSuffix&&(additionalClass=" "+CLASS.target+"-"+additionalClassSuffix),$$.generateClass(CLASS.target,id)+additionalClass},ChartInternal.prototype.classFocus=function(d){return this.classFocused(d)+this.classDefocused(d)},ChartInternal.prototype.classFocused=function(d){return" "+(this.focusedTargetIds.indexOf(d.id)>=0?CLASS.focused:"")},ChartInternal.prototype.classDefocused=function(d){return" "+(this.defocusedTargetIds.indexOf(d.id)>=0?CLASS.defocused:"")},ChartInternal.prototype.classChartText=function(d){return CLASS.chartText+this.classTarget(d.id)},ChartInternal.prototype.classChartLine=function(d){return CLASS.chartLine+this.classTarget(d.id)},ChartInternal.prototype.classChartBar=function(d){return CLASS.chartBar+this.classTarget(d.id)},ChartInternal.prototype.classChartArc=function(d){return CLASS.chartArc+this.classTarget(d.data.id)},ChartInternal.prototype.getTargetSelectorSuffix=function(targetId){return this.generateTargetClass(targetId).replace(/([?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"\\$1")},ChartInternal.prototype.selectorTarget=function(id,prefix){return(prefix||"")+"."+CLASS.target+this.getTargetSelectorSuffix(id)},ChartInternal.prototype.selectorTargets=function(ids,prefix){var $$=this;return(ids=ids||[]).length?ids.map((function(id){return $$.selectorTarget(id,prefix)})):null},ChartInternal.prototype.selectorLegend=function(id){return"."+CLASS.legendItem+this.getTargetSelectorSuffix(id)},ChartInternal.prototype.selectorLegends=function(ids){var $$=this;return ids&&ids.length?ids.map((function(id){return $$.selectorLegend(id)})):null},ChartInternal.prototype.getClipPath=function(id){return"url("+(window.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0?"":document.URL.split("#")[0])+"#"+id+")"},ChartInternal.prototype.appendClip=function(parent,id){return parent.append("clipPath").attr("id",id).append("rect")},ChartInternal.prototype.getAxisClipX=function(forHorizontal){var left=Math.max(30,this.margin.left);return forHorizontal?-(1+left):-(left-1)},ChartInternal.prototype.getAxisClipY=function(forHorizontal){return forHorizontal?-20:-this.margin.top},ChartInternal.prototype.getXAxisClipX=function(){var $$=this;return $$.getAxisClipX(!$$.config.axis_rotated)},ChartInternal.prototype.getXAxisClipY=function(){var $$=this;return $$.getAxisClipY(!$$.config.axis_rotated)},ChartInternal.prototype.getYAxisClipX=function(){var $$=this;return $$.config.axis_y_inner?-1:$$.getAxisClipX($$.config.axis_rotated)},ChartInternal.prototype.getYAxisClipY=function(){var $$=this;return $$.getAxisClipY($$.config.axis_rotated)},ChartInternal.prototype.getAxisClipWidth=function(forHorizontal){var $$=this,left=Math.max(30,$$.margin.left),right=Math.max(30,$$.margin.right);return forHorizontal?$$.width+2+left+right:$$.margin.left+20},ChartInternal.prototype.getAxisClipHeight=function(forHorizontal){return(forHorizontal?this.margin.bottom:this.margin.top+this.height)+20},ChartInternal.prototype.getXAxisClipWidth=function(){var $$=this;return $$.getAxisClipWidth(!$$.config.axis_rotated)},ChartInternal.prototype.getXAxisClipHeight=function(){var $$=this;return $$.getAxisClipHeight(!$$.config.axis_rotated)},ChartInternal.prototype.getYAxisClipWidth=function(){var $$=this;return $$.getAxisClipWidth($$.config.axis_rotated)+($$.config.axis_y_inner?20:0)},ChartInternal.prototype.getYAxisClipHeight=function(){var $$=this;return $$.getAxisClipHeight($$.config.axis_rotated)},ChartInternal.prototype.generateColor=function(){var $$=this,config=$$.config,d3=$$.d3,colors=config.data_colors,pattern=notEmpty(config.color_pattern)?config.color_pattern:d3.schemeCategory10,callback=config.data_color,ids=[];return function(d){var color,id=d.id||d.data&&d.data.id||d;return colors[id]instanceof Function?color=colors[id](d):colors[id]?color=colors[id]:(ids.indexOf(id)<0&&ids.push(id),color=pattern[ids.indexOf(id)%pattern.length],colors[id]=color),callback instanceof Function?callback(color,d):color}},ChartInternal.prototype.generateLevelColor=function(){var config=this.config,colors=config.color_pattern,threshold=config.color_threshold,asValue="value"===threshold.unit,values=threshold.values&&threshold.values.length?threshold.values:[],max=threshold.max||100;return notEmpty(threshold)&&notEmpty(colors)?function(value){var i,color=colors[colors.length-1];for(i=0;i<values.length;i++)if((asValue?value:100*value/max)<values[i]){color=colors[i];break}return color}:null},ChartInternal.prototype.getDefaultConfig=function(){var config={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_initialRange:void 0,zoom_type:"scroll",zoom_disableDefaultBehavior:!1,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(id){return id},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_selection:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_type:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(d,defaultTitleFormat,defaultValueFormat,color){return this.getTooltipContent?this.getTooltipContent(d,defaultTitleFormat,defaultValueFormat,color):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach((function(key){config[key]=this.additionalConfig[key]}),this),config},ChartInternal.prototype.additionalConfig={},ChartInternal.prototype.loadConfig=function(config){var target,keys,read,this_config=this.config;function find(){var key=keys.shift();return key&&target&&"object"===_typeof(target)&&key in target?(target=target[key],find()):key?void 0:target}Object.keys(this_config).forEach((function(key){target=config,keys=key.split("_"),read=find(),isDefined(read)&&(this_config[key]=read)}))},ChartInternal.prototype.convertUrlToData=function(url,mimeType,headers,keys,done){var f,converter,$$=this,type=mimeType||"csv";"json"===type?(f=$$.d3.json,converter=$$.convertJsonToData):"tsv"===type?(f=$$.d3.tsv,converter=$$.convertXsvToData):(f=$$.d3.csv,converter=$$.convertXsvToData),f(url,headers).then((function(data){done.call($$,converter.call($$,data,keys))})).catch((function(error){throw error}))},ChartInternal.prototype.convertXsvToData=function(xsv){var keys=xsv.columns;return 0===xsv.length?{keys,rows:[keys.reduce((function(row,key){return Object.assign(row,_defineProperty({},key,null))}),{})]}:{keys,rows:[].concat(xsv)}},ChartInternal.prototype.convertJsonToData=function(json,keys){var targetKeys,data,$$=this,new_rows=[];return keys?(keys.x?(targetKeys=keys.value.concat(keys.x),$$.config.data_x=keys.x):targetKeys=keys.value,new_rows.push(targetKeys),json.forEach((function(o){var new_row=[];targetKeys.forEach((function(key){var v=$$.findValueInJson(o,key);isUndefined(v)&&(v=null),new_row.push(v)})),new_rows.push(new_row)})),data=$$.convertRowsToData(new_rows)):(Object.keys(json).forEach((function(key){new_rows.push([key].concat(json[key]))})),data=$$.convertColumnsToData(new_rows)),data},ChartInternal.prototype.findValueInJson=function(object,path){for(var pathArray=(path=(path=path.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0;i<pathArray.length;++i){var k=pathArray[i];if(!(k in object))return;object=object[k]}return object},ChartInternal.prototype.convertRowsToData=function(rows){for(var newRows=[],keys=rows[0],i=1;i<rows.length;i++){for(var newRow={},j=0;j<rows[i].length;j++){if(isUndefined(rows[i][j]))throw new Error("Source data is missing a component at ("+i+","+j+")!");newRow[keys[j]]=rows[i][j]}newRows.push(newRow)}return{keys,rows:newRows}},ChartInternal.prototype.convertColumnsToData=function(columns){for(var newRows=[],keys=[],i=0;i<columns.length;i++){for(var key=columns[i][0],j=1;j<columns[i].length;j++){if(isUndefined(newRows[j-1])&&(newRows[j-1]={}),isUndefined(columns[i][j]))throw new Error("Source data is missing a component at ("+i+","+j+")!");newRows[j-1][key]=columns[i][j]}keys.push(key)}return{keys,rows:newRows}},ChartInternal.prototype.convertDataToTargets=function(data,appendXs){var targets,ids,xs,keys,$$=this,config=$$.config;return isArray(data)?keys=Object.keys(data[0]):(keys=data.keys,data=data.rows),ids=keys.filter($$.isNotX,$$),xs=keys.filter($$.isX,$$),ids.forEach((function(id){var xKey=$$.getXKey(id);$$.isCustomX()||$$.isTimeSeries()?xs.indexOf(xKey)>=0?$$.data.xs[id]=(appendXs&&$$.data.xs[id]?$$.data.xs[id]:[]).concat(data.map((function(d){return d[xKey]})).filter(isValue).map((function(rawX,i){return $$.generateTargetX(rawX,id,i)}))):config.data_x?$$.data.xs[id]=$$.getOtherTargetXs():notEmpty(config.data_xs)&&($$.data.xs[id]=$$.getXValuesOfXKey(xKey,$$.data.targets)):$$.data.xs[id]=data.map((function(d,i){return i}))})),ids.forEach((function(id){if(!$$.data.xs[id])throw new Error('x is not defined for id = "'+id+'".')})),(targets=ids.map((function(id,index){var convertedId=config.data_idConverter(id);return{id:convertedId,id_org:id,values:data.map((function(d,i){var x,rawX=d[$$.getXKey(id)],value=null===d[id]||isNaN(d[id])?null:+d[id];return $$.isCustomX()&&$$.isCategorized()&&!isUndefined(rawX)?(0===index&&0===i&&(config.axis_x_categories=[]),-1===(x=config.axis_x_categories.indexOf(rawX))&&(x=config.axis_x_categories.length,config.axis_x_categories.push(rawX))):x=$$.generateTargetX(rawX,id,i),(isUndefined(d[id])||$$.data.xs[id].length<=i)&&(x=void 0),{x,value,id:convertedId}})).filter((function(v){return isDefined(v.x)}))}}))).forEach((function(t){var i;config.data_xSort&&(t.values=t.values.sort((function(v1,v2){return(v1.x||0===v1.x?v1.x:1/0)-(v2.x||0===v2.x?v2.x:1/0)}))),i=0,t.values.forEach((function(v){v.index=i++})),$$.data.xs[t.id].sort((function(v1,v2){return v1-v2}))})),$$.hasNegativeValue=$$.hasNegativeValueInTargets(targets),$$.hasPositiveValue=$$.hasPositiveValueInTargets(targets),config.data_type&&$$.setTargetType($$.mapToIds(targets).filter((function(id){return!(id in config.data_types)})),config.data_type),targets.forEach((function(d){$$.addCache(d.id_org,d)})),targets},ChartInternal.prototype.isX=function(key){var config=this.config;return config.data_x&&key===config.data_x||notEmpty(config.data_xs)&&hasValue(config.data_xs,key)},ChartInternal.prototype.isNotX=function(key){return!this.isX(key)},ChartInternal.prototype.getXKey=function(id){var config=this.config;return config.data_x?config.data_x:notEmpty(config.data_xs)?config.data_xs[id]:null},ChartInternal.prototype.getXValuesOfXKey=function(key,targets){var xValues,$$=this;return(targets&&notEmpty(targets)?$$.mapToIds(targets):[]).forEach((function(id){$$.getXKey(id)===key&&(xValues=$$.data.xs[id])})),xValues},ChartInternal.prototype.getXValue=function(id,i){var $$=this;return id in $$.data.xs&&$$.data.xs[id]&&isValue($$.data.xs[id][i])?$$.data.xs[id][i]:i},ChartInternal.prototype.getOtherTargetXs=function(){var $$=this,idsForX=Object.keys($$.data.xs);return idsForX.length?$$.data.xs[idsForX[0]]:null},ChartInternal.prototype.getOtherTargetX=function(index){var xs=this.getOtherTargetXs();return xs&&index<xs.length?xs[index]:null},ChartInternal.prototype.addXs=function(xs){var $$=this;Object.keys(xs).forEach((function(id){$$.config.data_xs[id]=xs[id]}))},ChartInternal.prototype.addName=function(data){var name;return data&&(name=this.config.data_names[data.id],data.name=void 0!==name?name:data.id),data},ChartInternal.prototype.getValueOnIndex=function(values,index){var valueOnIndex=values.filter((function(v){return v.index===index}));return valueOnIndex.length?valueOnIndex[0]:null},ChartInternal.prototype.updateTargetX=function(targets,x){var $$=this;targets.forEach((function(t){t.values.forEach((function(v,i){v.x=$$.generateTargetX(x[i],t.id,i)})),$$.data.xs[t.id]=x}))},ChartInternal.prototype.updateTargetXs=function(targets,xs){var $$=this;targets.forEach((function(t){xs[t.id]&&$$.updateTargetX([t],xs[t.id])}))},ChartInternal.prototype.generateTargetX=function(rawX,id,index){var $$=this;return $$.isTimeSeries()?rawX?$$.parseDate(rawX):$$.parseDate($$.getXValue(id,index)):$$.isCustomX()&&!$$.isCategorized()?isValue(rawX)?+rawX:$$.getXValue(id,index):index},ChartInternal.prototype.cloneTarget=function(target){return{id:target.id,id_org:target.id_org,values:target.values.map((function(d){return{x:d.x,value:d.value,id:d.id}}))}},ChartInternal.prototype.getMaxDataCount=function(){var $$=this;return $$.d3.max($$.data.targets,(function(t){return t.values.length}))},ChartInternal.prototype.mapToIds=function(targets){return targets.map((function(d){return d.id}))},ChartInternal.prototype.mapToTargetIds=function(ids){var $$=this;return ids?[].concat(ids):$$.mapToIds($$.data.targets)},ChartInternal.prototype.hasTarget=function(targets,id){var i,ids=this.mapToIds(targets);for(i=0;i<ids.length;i++)if(ids[i]===id)return!0;return!1},ChartInternal.prototype.isTargetToShow=function(targetId){return this.hiddenTargetIds.indexOf(targetId)<0},ChartInternal.prototype.isLegendToShow=function(targetId){return this.hiddenLegendIds.indexOf(targetId)<0},ChartInternal.prototype.filterTargetsToShow=function(targets){var $$=this;return targets.filter((function(t){return $$.isTargetToShow(t.id)}))},ChartInternal.prototype.mapTargetsToUniqueXs=function(targets){var $$=this,xs=$$.d3.set($$.d3.merge(targets.map((function(t){return t.values.map((function(v){return+v.x}))})))).values();return(xs=$$.isTimeSeries()?xs.map((function(x){return new Date(+x)})):xs.map((function(x){return+x}))).sort((function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}))},ChartInternal.prototype.addHiddenTargetIds=function(targetIds){targetIds=targetIds instanceof Array?targetIds:new Array(targetIds);for(var i=0;i<targetIds.length;i++)this.hiddenTargetIds.indexOf(targetIds[i])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(targetIds[i]))},ChartInternal.prototype.removeHiddenTargetIds=function(targetIds){this.hiddenTargetIds=this.hiddenTargetIds.filter((function(id){return targetIds.indexOf(id)<0}))},ChartInternal.prototype.addHiddenLegendIds=function(targetIds){targetIds=targetIds instanceof Array?targetIds:new Array(targetIds);for(var i=0;i<targetIds.length;i++)this.hiddenLegendIds.indexOf(targetIds[i])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(targetIds[i]))},ChartInternal.prototype.removeHiddenLegendIds=function(targetIds){this.hiddenLegendIds=this.hiddenLegendIds.filter((function(id){return targetIds.indexOf(id)<0}))},ChartInternal.prototype.getValuesAsIdKeyed=function(targets){var ys={};return targets.forEach((function(t){ys[t.id]=[],t.values.forEach((function(v){ys[t.id].push(v.value)}))})),ys},ChartInternal.prototype.checkValueInTargets=function(targets,checker){var i,j,values,ids=Object.keys(targets);for(i=0;i<ids.length;i++)for(values=targets[ids[i]].values,j=0;j<values.length;j++)if(checker(values[j].value))return!0;return!1},ChartInternal.prototype.hasNegativeValueInTargets=function(targets){return this.checkValueInTargets(targets,(function(v){return v<0}))},ChartInternal.prototype.hasPositiveValueInTargets=function(targets){return this.checkValueInTargets(targets,(function(v){return v>0}))},ChartInternal.prototype.isOrderDesc=function(){var config=this.config;return"string"==typeof config.data_order&&"desc"===config.data_order.toLowerCase()},ChartInternal.prototype.isOrderAsc=function(){var config=this.config;return"string"==typeof config.data_order&&"asc"===config.data_order.toLowerCase()},ChartInternal.prototype.getOrderFunction=function(){var $$=this,config=$$.config,orderAsc=$$.isOrderAsc(),orderDesc=$$.isOrderDesc();if(orderAsc||orderDesc){var reducer=function(p,c){return p+Math.abs(c.value)};return function(t1,t2){var t1Sum=t1.values.reduce(reducer,0),t2Sum=t2.values.reduce(reducer,0);return orderAsc?t2Sum-t1Sum:t1Sum-t2Sum}}if(isFunction(config.data_order))return config.data_order;if(isArray(config.data_order)){var order=config.data_order;return function(t1,t2){return order.indexOf(t1.id)-order.indexOf(t2.id)}}},ChartInternal.prototype.orderTargets=function(targets){var fct=this.getOrderFunction();return fct&&targets.sort(fct),targets},ChartInternal.prototype.filterByX=function(targets,x){return this.d3.merge(targets.map((function(t){return t.values}))).filter((function(v){return v.x-x==0}))},ChartInternal.prototype.filterRemoveNull=function(data){return data.filter((function(d){return isValue(d.value)}))},ChartInternal.prototype.filterByXDomain=function(targets,xDomain){return targets.map((function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter((function(v){return xDomain[0]<=v.x&&v.x<=xDomain[1]}))}}))},ChartInternal.prototype.hasDataLabel=function(){var config=this.config;return!("boolean"!=typeof config.data_labels||!config.data_labels)||!("object"!==_typeof(config.data_labels)||!notEmpty(config.data_labels))},ChartInternal.prototype.getDataLabelLength=function(min,max,key){var $$=this,lengths=[0,0],paddingCoef=1.3;return $$.selectChart.select("svg").selectAll(".dummy").data([min,max]).enter().append("text").text((function(d){return $$.dataLabelFormat(d.id)(d)})).each((function(d,i){lengths[i]=this.getBoundingClientRect()[key]*paddingCoef})).remove(),lengths},ChartInternal.prototype.isNoneArc=function(d){return this.hasTarget(this.data.targets,d.id)},ChartInternal.prototype.isArc=function(d){return"data"in d&&this.hasTarget(this.data.targets,d.data.id)},ChartInternal.prototype.findClosestFromTargets=function(targets,pos){var candidates,$$=this;return candidates=targets.map((function(target){return $$.findClosest(target.values,pos)})),$$.findClosest(candidates,pos)},ChartInternal.prototype.findClosest=function(values,pos){var closest,$$=this,minDist=$$.config.point_sensitivity;return values.filter((function(v){return v&&$$.isBarType(v.id)})).forEach((function(v){var shape=$$.main.select("."+CLASS.bars+$$.getTargetSelectorSuffix(v.id)+" ."+CLASS.bar+"-"+v.index).node();!closest&&$$.isWithinBar($$.d3.mouse(shape),shape)&&(closest=v)})),values.filter((function(v){return v&&!$$.isBarType(v.id)})).forEach((function(v){var d=$$.dist(v,pos);d<minDist&&(minDist=d,closest=v)})),closest},ChartInternal.prototype.dist=function(data,pos){var $$=this,config=$$.config,xIndex=config.axis_rotated?1:0,yIndex=config.axis_rotated?0:1,y=$$.circleY(data,data.index),x=$$.x(data.x);return Math.sqrt(Math.pow(x-pos[xIndex],2)+Math.pow(y-pos[yIndex],2))},ChartInternal.prototype.convertValuesToStep=function(values){var i,converted=[].concat(values);if(!this.isCategorized())return values;for(i=values.length+1;0<i;i--)converted[i]=converted[i-1];return converted[0]={x:converted[0].x-1,value:converted[0].value,id:converted[0].id},converted[values.length+1]={x:converted[values.length].x+1,value:converted[values.length].value,id:converted[values.length].id},converted},ChartInternal.prototype.updateDataAttributes=function(name,attrs){var $$=this,current=$$.config["data_"+name];return void 0===attrs||(Object.keys(attrs).forEach((function(id){current[id]=attrs[id]})),$$.redraw({withLegend:!0})),current},ChartInternal.prototype.load=function(targets,args){var $$=this;targets&&(args.filter&&(targets=targets.filter(args.filter)),(args.type||args.types)&&targets.forEach((function(t){var type=args.types&&args.types[t.id]?args.types[t.id]:args.type;$$.setTargetType(t.id,type)})),$$.data.targets.forEach((function(d){for(var i=0;i<targets.length;i++)if(d.id===targets[i].id){d.values=targets[i].values,targets.splice(i,1);break}})),$$.data.targets=$$.data.targets.concat(targets)),$$.updateTargets($$.data.targets),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),args.done&&args.done()},ChartInternal.prototype.loadFromArgs=function(args){var $$=this;args.data?$$.load($$.convertDataToTargets(args.data),args):args.url?$$.convertUrlToData(args.url,args.mimeType,args.headers,args.keys,(function(data){$$.load($$.convertDataToTargets(data),args)})):args.json?$$.load($$.convertDataToTargets($$.convertJsonToData(args.json,args.keys)),args):args.rows?$$.load($$.convertDataToTargets($$.convertRowsToData(args.rows)),args):args.columns?$$.load($$.convertDataToTargets($$.convertColumnsToData(args.columns)),args):$$.load(null,args)},ChartInternal.prototype.unload=function(targetIds,done){var $$=this;done||(done=function(){}),(targetIds=targetIds.filter((function(id){return $$.hasTarget($$.data.targets,id)})))&&0!==targetIds.length?($$.svg.selectAll(targetIds.map((function(id){return $$.selectorTarget(id)}))).transition().style("opacity",0).remove().call($$.endall,done),targetIds.forEach((function(id){$$.withoutFadeIn[id]=!1,$$.legend&&$$.legend.selectAll("."+CLASS.legendItem+$$.getTargetSelectorSuffix(id)).remove(),$$.data.targets=$$.data.targets.filter((function(t){return t.id!==id}))}))):done()},ChartInternal.prototype.getYDomainMin=function(targets){var j,k,baseId,idsInGroup,id,hasNegativeValue,$$=this,config=$$.config,ids=$$.mapToIds(targets),ys=$$.getValuesAsIdKeyed(targets);if(config.data_groups.length>0)for(hasNegativeValue=$$.hasNegativeValueInTargets(targets),j=0;j<config.data_groups.length;j++)if(idsInGroup=config.data_groups[j].filter((function(id){return ids.indexOf(id)>=0})),0!==idsInGroup.length)for(baseId=idsInGroup[0],hasNegativeValue&&ys[baseId]&&ys[baseId].forEach((function(v,i){ys[baseId][i]=v<0?v:0})),k=1;k<idsInGroup.length;k++)id=idsInGroup[k],ys[id]&&ys[id].forEach((function(v,i){$$.axis.getId(id)!==$$.axis.getId(baseId)||!ys[baseId]||hasNegativeValue&&+v>0||(ys[baseId][i]+=+v)}));return $$.d3.min(Object.keys(ys).map((function(key){return $$.d3.min(ys[key])})))},ChartInternal.prototype.getYDomainMax=function(targets){var j,k,baseId,idsInGroup,id,hasPositiveValue,$$=this,config=$$.config,ids=$$.mapToIds(targets),ys=$$.getValuesAsIdKeyed(targets);if(config.data_groups.length>0)for(hasPositiveValue=$$.hasPositiveValueInTargets(targets),j=0;j<config.data_groups.length;j++)if(idsInGroup=config.data_groups[j].filter((function(id){return ids.indexOf(id)>=0})),0!==idsInGroup.length)for(baseId=idsInGroup[0],hasPositiveValue&&ys[baseId]&&ys[baseId].forEach((function(v,i){ys[baseId][i]=v>0?v:0})),k=1;k<idsInGroup.length;k++)id=idsInGroup[k],ys[id]&&ys[id].forEach((function(v,i){$$.axis.getId(id)!==$$.axis.getId(baseId)||!ys[baseId]||hasPositiveValue&&+v<0||(ys[baseId][i]+=+v)}));return $$.d3.max(Object.keys(ys).map((function(key){return $$.d3.max(ys[key])})))},ChartInternal.prototype.getYDomain=function(targets,axisId,xDomain){var domain,domainLength,padding_top,padding_bottom,yDomainAbs,lengths,diff,ratio,isAllPositive,isAllNegative,$$=this,config=$$.config,targetsByAxisId=targets.filter((function(t){return $$.axis.getId(t.id)===axisId})),yTargets=xDomain?$$.filterByXDomain(targetsByAxisId,xDomain):targetsByAxisId,yMin="y2"===axisId?config.axis_y2_min:config.axis_y_min,yMax="y2"===axisId?config.axis_y2_max:config.axis_y_max,yDomainMin=$$.getYDomainMin(yTargets),yDomainMax=$$.getYDomainMax(yTargets),center="y2"===axisId?config.axis_y2_center:config.axis_y_center,isZeroBased=$$.hasType("bar",yTargets)&&config.bar_zerobased||$$.hasType("area",yTargets)&&config.area_zerobased,isInverted="y2"===axisId?config.axis_y2_inverted:config.axis_y_inverted,showHorizontalDataLabel=$$.hasDataLabel()&&config.axis_rotated,showVerticalDataLabel=$$.hasDataLabel()&&!config.axis_rotated;return yDomainMin=isValue(yMin)?yMin:isValue(yMax)?yDomainMin<yMax?yDomainMin:yMax-10:yDomainMin,yDomainMax=isValue(yMax)?yMax:isValue(yMin)?yMin<yDomainMax?yDomainMax:yMin+10:yDomainMax,0===yTargets.length?"y2"===axisId?$$.y2.domain():$$.y.domain():(isNaN(yDomainMin)&&(yDomainMin=0),isNaN(yDomainMax)&&(yDomainMax=yDomainMin),yDomainMin===yDomainMax&&(yDomainMin<0?yDomainMax=0:yDomainMin=0),isAllPositive=yDomainMin>=0&&yDomainMax>=0,isAllNegative=yDomainMin<=0&&yDomainMax<=0,(isValue(yMin)&&isAllPositive||isValue(yMax)&&isAllNegative)&&(isZeroBased=!1),isZeroBased&&(isAllPositive&&(yDomainMin=0),isAllNegative&&(yDomainMax=0)),padding_top=padding_bottom=.1*(domainLength=Math.abs(yDomainMax-yDomainMin)),void 0!==center&&(yDomainMax=center+(yDomainAbs=Math.max(Math.abs(yDomainMin),Math.abs(yDomainMax))),yDomainMin=center-yDomainAbs),showHorizontalDataLabel?(lengths=$$.getDataLabelLength(yDomainMin,yDomainMax,"width"),diff=diffDomain($$.y.range()),padding_top+=domainLength*((ratio=[lengths[0]/diff,lengths[1]/diff])[1]/(1-ratio[0]-ratio[1])),padding_bottom+=domainLength*(ratio[0]/(1-ratio[0]-ratio[1]))):showVerticalDataLabel&&(lengths=$$.getDataLabelLength(yDomainMin,yDomainMax,"height"),padding_top+=$$.axis.convertPixelsToAxisPadding(lengths[1],domainLength),padding_bottom+=$$.axis.convertPixelsToAxisPadding(lengths[0],domainLength)),"y"===axisId&&notEmpty(config.axis_y_padding)&&(padding_top=$$.axis.getPadding(config.axis_y_padding,"top",padding_top,domainLength),padding_bottom=$$.axis.getPadding(config.axis_y_padding,"bottom",padding_bottom,domainLength)),"y2"===axisId&&notEmpty(config.axis_y2_padding)&&(padding_top=$$.axis.getPadding(config.axis_y2_padding,"top",padding_top,domainLength),padding_bottom=$$.axis.getPadding(config.axis_y2_padding,"bottom",padding_bottom,domainLength)),isZeroBased&&(isAllPositive&&(padding_bottom=yDomainMin),isAllNegative&&(padding_top=-yDomainMax)),domain=[yDomainMin-padding_bottom,yDomainMax+padding_top],isInverted?domain.reverse():domain)},ChartInternal.prototype.getXDomainMin=function(targets){var $$=this,config=$$.config;return isDefined(config.axis_x_min)?$$.isTimeSeries()?this.parseDate(config.axis_x_min):config.axis_x_min:$$.d3.min(targets,(function(t){return $$.d3.min(t.values,(function(v){return v.x}))}))},ChartInternal.prototype.getXDomainMax=function(targets){var $$=this,config=$$.config;return isDefined(config.axis_x_max)?$$.isTimeSeries()?this.parseDate(config.axis_x_max):config.axis_x_max:$$.d3.max(targets,(function(t){return $$.d3.max(t.values,(function(v){return v.x}))}))},ChartInternal.prototype.getXDomainPadding=function(domain){var maxDataCount,padding,paddingLeft,paddingRight,$$=this,config=$$.config,diff=domain[1]-domain[0];return padding=$$.isCategorized()?0:$$.hasType("bar")?(maxDataCount=$$.getMaxDataCount())>1?diff/(maxDataCount-1)/2:.5:.01*diff,"object"===_typeof(config.axis_x_padding)&&notEmpty(config.axis_x_padding)?(paddingLeft=isValue(config.axis_x_padding.left)?config.axis_x_padding.left:padding,paddingRight=isValue(config.axis_x_padding.right)?config.axis_x_padding.right:padding):paddingLeft=paddingRight="number"==typeof config.axis_x_padding?config.axis_x_padding:padding,{left:paddingLeft,right:paddingRight}},ChartInternal.prototype.getXDomain=function(targets){var $$=this,xDomain=[$$.getXDomainMin(targets),$$.getXDomainMax(targets)],firstX=xDomain[0],lastX=xDomain[1],padding=$$.getXDomainPadding(xDomain),min=0,max=0;return firstX-lastX!=0||$$.isCategorized()||($$.isTimeSeries()?(firstX=new Date(.5*firstX.getTime()),lastX=new Date(1.5*lastX.getTime())):(firstX=0===firstX?1:.5*firstX,lastX=0===lastX?-1:1.5*lastX)),(firstX||0===firstX)&&(min=$$.isTimeSeries()?new Date(firstX.getTime()-padding.left):firstX-padding.left),(lastX||0===lastX)&&(max=$$.isTimeSeries()?new Date(lastX.getTime()+padding.right):lastX+padding.right),[min,max]},ChartInternal.prototype.updateXDomain=function(targets,withUpdateXDomain,withUpdateOrgXDomain,withTrim,domain){var $$=this,config=$$.config;return withUpdateOrgXDomain&&($$.x.domain(domain||$$.d3.extent($$.getXDomain(targets))),$$.orgXDomain=$$.x.domain(),config.zoom_enabled&&$$.zoom.update(),$$.subX.domain($$.x.domain()),$$.brush&&$$.brush.updateScale($$.subX)),withUpdateXDomain&&$$.x.domain(domain||(!$$.brush||$$.brush.empty()?$$.orgXDomain:$$.brush.selectionAsValue())),withTrim&&$$.x.domain($$.trimXDomain($$.x.orgDomain())),$$.x.domain()},ChartInternal.prototype.trimXDomain=function(domain){var zoomDomain=this.getZoomDomain(),min=zoomDomain[0],max=zoomDomain[1];return domain[0]<=min&&(domain[1]=+domain[1]+(min-domain[0]),domain[0]=min),max<=domain[1]&&(domain[0]=+domain[0]-(domain[1]-max),domain[1]=max),domain},ChartInternal.prototype.drag=function(mouse){var sx,sy,mx,my,minX,maxX,minY,maxY,$$=this,config=$$.config,main=$$.main,d3=$$.d3;$$.hasArcType()||config.data_selection_enabled&&config.data_selection_multiple&&(sx=$$.dragStart[0],sy=$$.dragStart[1],mx=mouse[0],my=mouse[1],minX=Math.min(sx,mx),maxX=Math.max(sx,mx),minY=config.data_selection_grouped?$$.margin.top:Math.min(sy,my),maxY=config.data_selection_grouped?$$.height:Math.max(sy,my),main.select("."+CLASS.dragarea).attr("x",minX).attr("y",minY).attr("width",maxX-minX).attr("height",maxY-minY),main.selectAll("."+CLASS.shapes).selectAll("."+CLASS.shape).filter((function(d){return config.data_selection_isselectable(d)})).each((function(d,i){var _x,_y,_w,_h,toggle,box,shape=d3.select(this),isSelected=shape.classed(CLASS.SELECTED),isIncluded=shape.classed(CLASS.INCLUDED),isWithin=!1;if(shape.classed(CLASS.circle))_x=1*shape.attr("cx"),_y=1*shape.attr("cy"),toggle=$$.togglePoint,isWithin=minX<_x&&_x<maxX&&minY<_y&&_y<maxY;else{if(!shape.classed(CLASS.bar))return;_x=(box=getPathBox(this)).x,_y=box.y,_w=box.width,_h=box.height,toggle=$$.togglePath,isWithin=!(maxX<_x||_x+_w<minX||maxY<_y||_y+_h<minY)}isWithin^isIncluded&&(shape.classed(CLASS.INCLUDED,!isIncluded),shape.classed(CLASS.SELECTED,!isSelected),toggle.call($$,!isSelected,shape,d,i))})))},ChartInternal.prototype.dragstart=function(mouse){var $$=this,config=$$.config;$$.hasArcType()||config.data_selection_enabled&&($$.dragStart=mouse,$$.main.select("."+CLASS.chart).append("rect").attr("class",CLASS.dragarea).style("opacity",.1),$$.dragging=!0)},ChartInternal.prototype.dragend=function(){var $$=this,config=$$.config;$$.hasArcType()||config.data_selection_enabled&&($$.main.select("."+CLASS.dragarea).transition().duration(100).style("opacity",0).remove(),$$.main.selectAll("."+CLASS.shape).classed(CLASS.INCLUDED,!1),$$.dragging=!1)},ChartInternal.prototype.getYFormat=function(forArc){var $$=this,formatForY=forArc&&!$$.hasType("gauge")?$$.defaultArcValueFormat:$$.yFormat,formatForY2=forArc&&!$$.hasType("gauge")?$$.defaultArcValueFormat:$$.y2Format;return function(v,ratio,id){return("y2"===$$.axis.getId(id)?formatForY2:formatForY).call($$,v,ratio)}},ChartInternal.prototype.yFormat=function(v){var $$=this,config=$$.config;return(config.axis_y_tick_format?config.axis_y_tick_format:$$.defaultValueFormat)(v)},ChartInternal.prototype.y2Format=function(v){var $$=this,config=$$.config;return(config.axis_y2_tick_format?config.axis_y2_tick_format:$$.defaultValueFormat)(v)},ChartInternal.prototype.defaultValueFormat=function(v){return isValue(v)?+v:""},ChartInternal.prototype.defaultArcValueFormat=function(v,ratio){return(100*ratio).toFixed(1)+"%"},ChartInternal.prototype.dataLabelFormat=function(targetId){var data_labels=this.config.data_labels,defaultFormat=function(v){return isValue(v)?+v:""};return"function"==typeof data_labels.format?data_labels.format:"object"===_typeof(data_labels.format)?data_labels.format[targetId]?!0===data_labels.format[targetId]?defaultFormat:data_labels.format[targetId]:function(){return""}:defaultFormat},ChartInternal.prototype.initGrid=function(){var $$=this,config=$$.config,d3=$$.d3;$$.grid=$$.main.append("g").attr("clip-path",$$.clipPathForGrid).attr("class",CLASS.grid),config.grid_x_show&&$$.grid.append("g").attr("class",CLASS.xgrids),config.grid_y_show&&$$.grid.append("g").attr("class",CLASS.ygrids),config.grid_focus_show&&$$.grid.append("g").attr("class",CLASS.xgridFocus).append("line").attr("class",CLASS.xgridFocus),$$.xgrid=d3.selectAll([]),config.grid_lines_front||$$.initGridLines()},ChartInternal.prototype.initGridLines=function(){var $$=this,d3=$$.d3;$$.gridLines=$$.main.append("g").attr("clip-path",$$.clipPathForGrid).attr("class",CLASS.grid+" "+CLASS.gridLines),$$.gridLines.append("g").attr("class",CLASS.xgridLines),$$.gridLines.append("g").attr("class",CLASS.ygridLines),$$.xgridLines=d3.selectAll([])},ChartInternal.prototype.updateXGrid=function(withoutUpdate){var $$=this,config=$$.config,d3=$$.d3,xgridData=$$.generateGridData(config.grid_x_type,$$.x),tickOffset=$$.isCategorized()?$$.xAxis.tickOffset():0;$$.xgridAttr=config.axis_rotated?{x1:0,x2:$$.width,y1:function(d){return $$.x(d)-tickOffset},y2:function(d){return $$.x(d)-tickOffset}}:{x1:function(d){return $$.x(d)+tickOffset},x2:function(d){return $$.x(d)+tickOffset},y1:0,y2:$$.height},$$.xgridAttr.opacity=function(){return+d3.select(this).attr(config.axis_rotated?"y1":"x1")===(config.axis_rotated?$$.height:0)?0:1};var xgrid=$$.main.select("."+CLASS.xgrids).selectAll("."+CLASS.xgrid).data(xgridData),xgridEnter=xgrid.enter().append("line").attr("class",CLASS.xgrid).attr("x1",$$.xgridAttr.x1).attr("x2",$$.xgridAttr.x2).attr("y1",$$.xgridAttr.y1).attr("y2",$$.xgridAttr.y2).style("opacity",0);$$.xgrid=xgridEnter.merge(xgrid),withoutUpdate||$$.xgrid.attr("x1",$$.xgridAttr.x1).attr("x2",$$.xgridAttr.x2).attr("y1",$$.xgridAttr.y1).attr("y2",$$.xgridAttr.y2).style("opacity",$$.xgridAttr.opacity),xgrid.exit().remove()},ChartInternal.prototype.updateYGrid=function(){var $$=this,config=$$.config,gridValues=$$.yAxis.tickValues()||$$.y.ticks(config.grid_y_ticks),ygrid=$$.main.select("."+CLASS.ygrids).selectAll("."+CLASS.ygrid).data(gridValues),ygridEnter=ygrid.enter().append("line").attr("class",CLASS.ygrid);$$.ygrid=ygridEnter.merge(ygrid),$$.ygrid.attr("x1",config.axis_rotated?$$.y:0).attr("x2",config.axis_rotated?$$.y:$$.width).attr("y1",config.axis_rotated?0:$$.y).attr("y2",config.axis_rotated?$$.height:$$.y),ygrid.exit().remove(),$$.smoothLines($$.ygrid,"grid")},ChartInternal.prototype.gridTextAnchor=function(d){return d.position?d.position:"end"},ChartInternal.prototype.gridTextDx=function(d){return"start"===d.position?4:"middle"===d.position?0:-4},ChartInternal.prototype.xGridTextX=function(d){return"start"===d.position?-this.height:"middle"===d.position?-this.height/2:0},ChartInternal.prototype.yGridTextX=function(d){return"start"===d.position?0:"middle"===d.position?this.width/2:this.width},ChartInternal.prototype.updateGrid=function(duration){var xgridLine,xgridLineEnter,ygridLine,ygridLineEnter,$$=this,main=$$.main,config=$$.config,xv=$$.xv.bind($$),yv=$$.yv.bind($$),xGridTextX=$$.xGridTextX.bind($$),yGridTextX=$$.yGridTextX.bind($$);$$.grid.style("visibility",$$.hasArcType()?"hidden":"visible"),main.select("line."+CLASS.xgridFocus).style("visibility","hidden"),config.grid_x_show&&$$.updateXGrid(),(xgridLineEnter=(xgridLine=main.select("."+CLASS.xgridLines).selectAll("."+CLASS.xgridLine).data(config.grid_x_lines)).enter().append("g").attr("class",(function(d){return CLASS.xgridLine+(d.class?" "+d.class:"")}))).append("line").attr("x1",config.axis_rotated?0:xv).attr("x2",config.axis_rotated?$$.width:xv).attr("y1",config.axis_rotated?xv:0).attr("y2",config.axis_rotated?xv:$$.height).style("opacity",0),xgridLineEnter.append("text").attr("text-anchor",$$.gridTextAnchor).attr("transform",config.axis_rotated?"":"rotate(-90)").attr("x",config.axis_rotated?yGridTextX:xGridTextX).attr("y",xv).attr("dx",$$.gridTextDx).attr("dy",-5).style("opacity",0),$$.xgridLines=xgridLineEnter.merge(xgridLine),xgridLine.exit().transition().duration(duration).style("opacity",0).remove(),config.grid_y_show&&$$.updateYGrid(),(ygridLineEnter=(ygridLine=main.select("."+CLASS.ygridLines).selectAll("."+CLASS.ygridLine).data(config.grid_y_lines)).enter().append("g").attr("class",(function(d){return CLASS.ygridLine+(d.class?" "+d.class:"")}))).append("line").attr("x1",config.axis_rotated?yv:0).attr("x2",config.axis_rotated?yv:$$.width).attr("y1",config.axis_rotated?0:yv).attr("y2",config.axis_rotated?$$.height:yv).style("opacity",0),ygridLineEnter.append("text").attr("text-anchor",$$.gridTextAnchor).attr("transform",config.axis_rotated?"rotate(-90)":"").attr("x",config.axis_rotated?xGridTextX:yGridTextX).attr("y",yv).attr("dx",$$.gridTextDx).attr("dy",-5).style("opacity",0),$$.ygridLines=ygridLineEnter.merge(ygridLine),$$.ygridLines.select("line").transition().duration(duration).attr("x1",config.axis_rotated?yv:0).attr("x2",config.axis_rotated?yv:$$.width).attr("y1",config.axis_rotated?0:yv).attr("y2",config.axis_rotated?$$.height:yv).style("opacity",1),$$.ygridLines.select("text").transition().duration(duration).attr("x",config.axis_rotated?$$.xGridTextX.bind($$):$$.yGridTextX.bind($$)).attr("y",yv).text((function(d){return d.text})).style("opacity",1),ygridLine.exit().transition().duration(duration).style("opacity",0).remove()},ChartInternal.prototype.redrawGrid=function(withTransition,transition){var $$=this,config=$$.config,xv=$$.xv.bind($$),lines=$$.xgridLines.select("line"),texts=$$.xgridLines.select("text");return[(withTransition?lines.transition(transition):lines).attr("x1",config.axis_rotated?0:xv).attr("x2",config.axis_rotated?$$.width:xv).attr("y1",config.axis_rotated?xv:0).attr("y2",config.axis_rotated?xv:$$.height).style("opacity",1),(withTransition?texts.transition(transition):texts).attr("x",config.axis_rotated?$$.yGridTextX.bind($$):$$.xGridTextX.bind($$)).attr("y",xv).text((function(d){return d.text})).style("opacity",1)]},ChartInternal.prototype.showXGridFocus=function(selectedData){var $$=this,config=$$.config,dataToShow=selectedData.filter((function(d){return d&&isValue(d.value)})),focusEl=$$.main.selectAll("line."+CLASS.xgridFocus),xx=$$.xx.bind($$);config.tooltip_show&&($$.hasType("scatter")||$$.hasArcType()||(focusEl.style("visibility","visible").data([dataToShow[0]]).attr(config.axis_rotated?"y1":"x1",xx).attr(config.axis_rotated?"y2":"x2",xx),$$.smoothLines(focusEl,"grid")))},ChartInternal.prototype.hideXGridFocus=function(){this.main.select("line."+CLASS.xgridFocus).style("visibility","hidden")},ChartInternal.prototype.updateXgridFocus=function(){var $$=this,config=$$.config;$$.main.select("line."+CLASS.xgridFocus).attr("x1",config.axis_rotated?0:-10).attr("x2",config.axis_rotated?$$.width:-10).attr("y1",config.axis_rotated?-10:0).attr("y2",config.axis_rotated?-10:$$.height)},ChartInternal.prototype.generateGridData=function(type,scale){var xDomain,firstYear,lastYear,i,$$=this,gridData=[],tickNum=$$.main.select("."+CLASS.axisX).selectAll(".tick").size();if("year"===type)for(firstYear=(xDomain=$$.getXDomain())[0].getFullYear(),lastYear=xDomain[1].getFullYear(),i=firstYear;i<=lastYear;i++)gridData.push(new Date(i+"-01-01 00:00:00"));else(gridData=scale.ticks(10)).length>tickNum&&(gridData=gridData.filter((function(d){return(""+d).indexOf(".")<0})));return gridData},ChartInternal.prototype.getGridFilterToRemove=function(params){return params?function(line){var found=!1;return[].concat(params).forEach((function(param){("value"in param&&line.value===param.value||"class"in param&&line.class===param.class)&&(found=!0)})),found}:function(){return!0}},ChartInternal.prototype.removeGridLines=function(params,forX){var $$=this,config=$$.config,toRemove=$$.getGridFilterToRemove(params),toShow=function(line){return!toRemove(line)},classLines=forX?CLASS.xgridLines:CLASS.ygridLines,classLine=forX?CLASS.xgridLine:CLASS.ygridLine;$$.main.select("."+classLines).selectAll("."+classLine).filter(toRemove).transition().duration(config.transition_duration).style("opacity",0).remove(),forX?config.grid_x_lines=config.grid_x_lines.filter(toShow):config.grid_y_lines=config.grid_y_lines.filter(toShow)},ChartInternal.prototype.initEventRect=function(){var $$=this,config=$$.config;$$.main.select("."+CLASS.chart).append("g").attr("class",CLASS.eventRects).style("fill-opacity",0),$$.eventRect=$$.main.select("."+CLASS.eventRects).append("rect").attr("class",CLASS.eventRect),config.zoom_enabled&&$$.zoom&&($$.eventRect.call($$.zoom).on("dblclick.zoom",null),config.zoom_initialRange&&$$.eventRect.transition().duration(0).call($$.zoom.transform,$$.zoomTransform(config.zoom_initialRange)))},ChartInternal.prototype.redrawEventRect=function(){var x,y,w,h,$$=this,d3=$$.d3,config=$$.config;function mouseout(){$$.svg.select("."+CLASS.eventRect).style("cursor",null),$$.hideXGridFocus(),$$.hideTooltip(),$$.unexpandCircles(),$$.unexpandBars()}x=0,y=0,w=$$.width,h=$$.height,$$.main.select("."+CLASS.eventRects).style("cursor",config.zoom_enabled?config.axis_rotated?"ns-resize":"ew-resize":null),$$.eventRect.attr("x",x).attr("y",y).attr("width",w).attr("height",h).on("mouseout",config.interaction_enabled?function(){config&&($$.hasArcType()||mouseout())}:null).on("mousemove",config.interaction_enabled?function(){var targetsToShow,mouse,closest,selectedData;$$.dragging||$$.hasArcType(targetsToShow)||(targetsToShow=$$.filterTargetsToShow($$.data.targets),mouse=d3.mouse(this),closest=$$.findClosestFromTargets(targetsToShow,mouse),!$$.mouseover||closest&&closest.id===$$.mouseover.id||(config.data_onmouseout.call($$.api,$$.mouseover),$$.mouseover=void 0),closest?(selectedData=($$.isScatterType(closest)||!config.tooltip_grouped?[closest]:$$.filterByX(targetsToShow,closest.x)).map((function(d){return $$.addName(d)})),$$.showTooltip(selectedData,this),config.point_focus_expand_enabled&&($$.unexpandCircles(),selectedData.forEach((function(d){$$.expandCircles(d.index,d.id,!1)}))),$$.expandBars(closest.index,closest.id,!0),$$.showXGridFocus(selectedData),($$.isBarType(closest.id)||$$.dist(closest,mouse)<config.point_sensitivity)&&($$.svg.select("."+CLASS.eventRect).style("cursor","pointer"),$$.mouseover||(config.data_onmouseover.call($$.api,closest),$$.mouseover=closest))):mouseout())}:null).on("click",config.interaction_enabled?function(){var targetsToShow,mouse,closest;$$.hasArcType(targetsToShow)||(targetsToShow=$$.filterTargetsToShow($$.data.targets),mouse=d3.mouse(this),(closest=$$.findClosestFromTargets(targetsToShow,mouse))&&($$.isBarType(closest.id)||$$.dist(closest,mouse)<config.point_sensitivity)&&($$.isScatterType(closest)||!config.data_selection_grouped?[closest]:$$.filterByX(targetsToShow,closest.x)).forEach((function(d){$$.main.selectAll("."+CLASS.shapes+$$.getTargetSelectorSuffix(d.id)).selectAll("."+CLASS.shape+"-"+d.index).each((function(){(config.data_selection_grouped||$$.isWithinShape(this,d))&&($$.toggleShape(this,d,d.index),config.data_onclick.call($$.api,d,this))}))})))}:null).call(config.interaction_enabled&&config.data_selection_draggable&&$$.drag?d3.drag().on("drag",(function(){$$.drag(d3.mouse(this))})).on("start",(function(){$$.dragstart(d3.mouse(this))})).on("end",(function(){$$.dragend()})):function(){})},ChartInternal.prototype.getMousePosition=function(data){var $$=this;return[$$.x(data.x),$$.getYScale(data.id)(data.value)]},ChartInternal.prototype.dispatchEvent=function(type,mouse){var $$=this,selector="."+CLASS.eventRect,eventRect=$$.main.select(selector).node(),box=eventRect.getBoundingClientRect(),x=box.left+(mouse?mouse[0]:0),y=box.top+(mouse?mouse[1]:0),event=document.createEvent("MouseEvents");event.initMouseEvent(type,!0,!0,window,0,x,y,x,y,!1,!1,!1,!1,0,null),eventRect.dispatchEvent(event)},ChartInternal.prototype.initLegend=function(){var $$=this;if($$.legendItemTextBox={},$$.legendHasRendered=!1,$$.legend=$$.svg.append("g").attr("transform",$$.getTranslate("legend")),!$$.config.legend_show)return $$.legend.style("visibility","hidden"),void($$.hiddenLegendIds=$$.mapToIds($$.data.targets));$$.updateLegendWithDefaults()},ChartInternal.prototype.updateLegendWithDefaults=function(){var $$=this;$$.updateLegend($$.mapToIds($$.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},ChartInternal.prototype.updateSizeForLegend=function(legendHeight,legendWidth){var $$=this,config=$$.config,insetLegendPosition={top:$$.isLegendTop?$$.getCurrentPaddingTop()+config.legend_inset_y+5.5:$$.currentHeight-legendHeight-$$.getCurrentPaddingBottom()-config.legend_inset_y,left:$$.isLegendLeft?$$.getCurrentPaddingLeft()+config.legend_inset_x+.5:$$.currentWidth-legendWidth-$$.getCurrentPaddingRight()-config.legend_inset_x+.5};$$.margin3={top:$$.isLegendRight?0:$$.isLegendInset?insetLegendPosition.top:$$.currentHeight-legendHeight,right:NaN,bottom:0,left:$$.isLegendRight?$$.currentWidth-legendWidth:$$.isLegendInset?insetLegendPosition.left:0}},ChartInternal.prototype.transformLegend=function(withTransition){var $$=this;(withTransition?$$.legend.transition():$$.legend).attr("transform",$$.getTranslate("legend"))},ChartInternal.prototype.updateLegendStep=function(step){this.legendStep=step},ChartInternal.prototype.updateLegendItemWidth=function(w){this.legendItemWidth=w},ChartInternal.prototype.updateLegendItemHeight=function(h){this.legendItemHeight=h},ChartInternal.prototype.getLegendWidth=function(){var $$=this;return $$.config.legend_show?$$.isLegendRight||$$.isLegendInset?$$.legendItemWidth*($$.legendStep+1):$$.currentWidth:0},ChartInternal.prototype.getLegendHeight=function(){var $$=this,h=0;return $$.config.legend_show&&(h=$$.isLegendRight?$$.currentHeight:Math.max(20,$$.legendItemHeight)*($$.legendStep+1)),h},ChartInternal.prototype.opacityForLegend=function(legendItem){return legendItem.classed(CLASS.legendItemHidden)?null:1},ChartInternal.prototype.opacityForUnfocusedLegend=function(legendItem){return legendItem.classed(CLASS.legendItemHidden)?null:.3},ChartInternal.prototype.toggleFocusLegend=function(targetIds,focus){var $$=this;targetIds=$$.mapToTargetIds(targetIds),$$.legend.selectAll("."+CLASS.legendItem).filter((function(id){return targetIds.indexOf(id)>=0})).classed(CLASS.legendItemFocused,focus).transition().duration(100).style("opacity",(function(){return(focus?$$.opacityForLegend:$$.opacityForUnfocusedLegend).call($$,$$.d3.select(this))}))},ChartInternal.prototype.revertLegend=function(){var $$=this,d3=$$.d3;$$.legend.selectAll("."+CLASS.legendItem).classed(CLASS.legendItemFocused,!1).transition().duration(100).style("opacity",(function(){return $$.opacityForLegend(d3.select(this))}))},ChartInternal.prototype.showLegend=function(targetIds){var $$=this,config=$$.config;config.legend_show||(config.legend_show=!0,$$.legend.style("visibility","visible"),$$.legendHasRendered||$$.updateLegendWithDefaults()),$$.removeHiddenLegendIds(targetIds),$$.legend.selectAll($$.selectorLegends(targetIds)).style("visibility","visible").transition().style("opacity",(function(){return $$.opacityForLegend($$.d3.select(this))}))},ChartInternal.prototype.hideLegend=function(targetIds){var $$=this,config=$$.config;config.legend_show&&isEmpty(targetIds)&&(config.legend_show=!1,$$.legend.style("visibility","hidden")),$$.addHiddenLegendIds(targetIds),$$.legend.selectAll($$.selectorLegends(targetIds)).style("opacity",0).style("visibility","hidden")},ChartInternal.prototype.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},ChartInternal.prototype.updateLegend=function(targetIds,options,transitions){var xForLegend,xForLegendText,xForLegendRect,yForLegend,yForLegendText,yForLegendRect,x1ForLegendTile,x2ForLegendTile,yForLegendTile,l,withTransition,withTransitionForTransform,texts,rects,tiles,background,$$=this,config=$$.config,paddingTop=4,paddingRight=10,maxWidth=0,maxHeight=0,posMin=10,tileWidth=config.legend_item_tile_width+5,totalLength=0,offsets={},widths={},heights={},margins=[0],steps={},step=0;function getTextBox(textElement,id){return $$.legendItemTextBox[id]||($$.legendItemTextBox[id]=$$.getTextRect(textElement.textContent,CLASS.legendItem,textElement)),$$.legendItemTextBox[id]}function updatePositions(textElement,id,index){var margin,maxLength,reset=0===index,isLast=index===targetIds.length-1,box=getTextBox(textElement,id),itemWidth=box.width+tileWidth+(!isLast||$$.isLegendRight||$$.isLegendInset?paddingRight:0)+config.legend_padding,itemHeight=box.height+paddingTop,itemLength=$$.isLegendRight||$$.isLegendInset?itemHeight:itemWidth,areaLength=$$.isLegendRight||$$.isLegendInset?$$.getLegendHeight():$$.getLegendWidth();function updateValues(id,withoutStep){withoutStep||(margin=(areaLength-totalLength-itemLength)/2)<posMin&&(margin=(areaLength-itemLength)/2,totalLength=0,step++),steps[id]=step,margins[step]=$$.isLegendInset?10:margin,offsets[id]=totalLength,totalLength+=itemLength}reset&&(totalLength=0,step=0,maxWidth=0,maxHeight=0),!config.legend_show||$$.isLegendToShow(id)?(widths[id]=itemWidth,heights[id]=itemHeight,(!maxWidth||itemWidth>=maxWidth)&&(maxWidth=itemWidth),(!maxHeight||itemHeight>=maxHeight)&&(maxHeight=itemHeight),maxLength=$$.isLegendRight||$$.isLegendInset?maxHeight:maxWidth,config.legend_equally?(Object.keys(widths).forEach((function(id){widths[id]=maxWidth})),Object.keys(heights).forEach((function(id){heights[id]=maxHeight})),(margin=(areaLength-maxLength*targetIds.length)/2)<posMin?(totalLength=0,step=0,targetIds.forEach((function(id){updateValues(id)}))):updateValues(id,!0)):updateValues(id)):widths[id]=heights[id]=steps[id]=offsets[id]=0}targetIds=targetIds.filter((function(id){return!isDefined(config.data_names[id])||null!==config.data_names[id]})),withTransition=getOption(options=options||{},"withTransition",!0),withTransitionForTransform=getOption(options,"withTransitionForTransform",!0),$$.isLegendInset&&(step=config.legend_inset_step?config.legend_inset_step:targetIds.length,$$.updateLegendStep(step)),$$.isLegendRight?(xForLegend=function(id){return maxWidth*steps[id]},yForLegend=function(id){return margins[steps[id]]+offsets[id]}):$$.isLegendInset?(xForLegend=function(id){return maxWidth*steps[id]+10},yForLegend=function(id){return margins[steps[id]]+offsets[id]}):(xForLegend=function(id){return margins[steps[id]]+offsets[id]},yForLegend=function(id){return maxHeight*steps[id]}),xForLegendText=function(id,i){return xForLegend(id,i)+4+config.legend_item_tile_width},yForLegendText=function(id,i){return yForLegend(id,i)+9},xForLegendRect=function(id,i){return xForLegend(id,i)},yForLegendRect=function(id,i){return yForLegend(id,i)-5},x1ForLegendTile=function(id,i){return xForLegend(id,i)-2},x2ForLegendTile=function(id,i){return xForLegend(id,i)-2+config.legend_item_tile_width},yForLegendTile=function(id,i){return yForLegend(id,i)+4},(l=$$.legend.selectAll("."+CLASS.legendItem).data(targetIds).enter().append("g").attr("class",(function(id){return $$.generateClass(CLASS.legendItem,id)})).style("visibility",(function(id){return $$.isLegendToShow(id)?"visible":"hidden"})).style("cursor","pointer").on("click",(function(id){config.legend_item_onclick?config.legend_item_onclick.call($$,id):$$.d3.event.altKey?($$.api.hide(),$$.api.show(id)):($$.api.toggle(id),$$.isTargetToShow(id)?$$.api.focus(id):$$.api.revert())})).on("mouseover",(function(id){config.legend_item_onmouseover?config.legend_item_onmouseover.call($$,id):($$.d3.select(this).classed(CLASS.legendItemFocused,!0),!$$.transiting&&$$.isTargetToShow(id)&&$$.api.focus(id))})).on("mouseout",(function(id){config.legend_item_onmouseout?config.legend_item_onmouseout.call($$,id):($$.d3.select(this).classed(CLASS.legendItemFocused,!1),$$.api.revert())}))).append("text").text((function(id){return isDefined(config.data_names[id])?config.data_names[id]:id})).each((function(id,i){updatePositions(this,id,i)})).style("pointer-events","none").attr("x",$$.isLegendRight||$$.isLegendInset?xForLegendText:-200).attr("y",$$.isLegendRight||$$.isLegendInset?-200:yForLegendText),l.append("rect").attr("class",CLASS.legendItemEvent).style("fill-opacity",0).attr("x",$$.isLegendRight||$$.isLegendInset?xForLegendRect:-200).attr("y",$$.isLegendRight||$$.isLegendInset?-200:yForLegendRect),l.append("line").attr("class",CLASS.legendItemTile).style("stroke",$$.color).style("pointer-events","none").attr("x1",$$.isLegendRight||$$.isLegendInset?x1ForLegendTile:-200).attr("y1",$$.isLegendRight||$$.isLegendInset?-200:yForLegendTile).attr("x2",$$.isLegendRight||$$.isLegendInset?x2ForLegendTile:-200).attr("y2",$$.isLegendRight||$$.isLegendInset?-200:yForLegendTile).attr("stroke-width",config.legend_item_tile_height),background=$$.legend.select("."+CLASS.legendBackground+" rect"),$$.isLegendInset&&maxWidth>0&&0===background.size()&&(background=$$.legend.insert("g","."+CLASS.legendItem).attr("class",CLASS.legendBackground).append("rect")),texts=$$.legend.selectAll("text").data(targetIds).text((function(id){return isDefined(config.data_names[id])?config.data_names[id]:id})).each((function(id,i){updatePositions(this,id,i)})),(withTransition?texts.transition():texts).attr("x",xForLegendText).attr("y",yForLegendText),rects=$$.legend.selectAll("rect."+CLASS.legendItemEvent).data(targetIds),(withTransition?rects.transition():rects).attr("width",(function(id){return widths[id]})).attr("height",(function(id){return heights[id]})).attr("x",xForLegendRect).attr("y",yForLegendRect),tiles=$$.legend.selectAll("line."+CLASS.legendItemTile).data(targetIds),(withTransition?tiles.transition():tiles).style("stroke",$$.levelColor?function(id){return $$.levelColor($$.cache[id].values[0].value)}:$$.color).attr("x1",x1ForLegendTile).attr("y1",yForLegendTile).attr("x2",x2ForLegendTile).attr("y2",yForLegendTile),background&&(withTransition?background.transition():background).attr("height",$$.getLegendHeight()-12).attr("width",maxWidth*(step+1)+10),$$.legend.selectAll("."+CLASS.legendItem).classed(CLASS.legendItemHidden,(function(id){return!$$.isTargetToShow(id)})),$$.updateLegendItemWidth(maxWidth),$$.updateLegendItemHeight(maxHeight),$$.updateLegendStep(step),$$.updateSizes(),$$.updateScales(),$$.updateSvgSize(),$$.transformAll(withTransitionForTransform,transitions),$$.legendHasRendered=!0},ChartInternal.prototype.initRegion=function(){var $$=this;$$.region=$$.main.append("g").attr("clip-path",$$.clipPath).attr("class",CLASS.regions)},ChartInternal.prototype.updateRegion=function(duration){var $$=this,config=$$.config;$$.region.style("visibility",$$.hasArcType()?"hidden":"visible");var mainRegion=$$.main.select("."+CLASS.regions).selectAll("."+CLASS.region).data(config.regions),mainRegionEnter=mainRegion.enter().append("rect").attr("x",$$.regionX.bind($$)).attr("y",$$.regionY.bind($$)).attr("width",$$.regionWidth.bind($$)).attr("height",$$.regionHeight.bind($$)).style("fill-opacity",0);$$.mainRegion=mainRegionEnter.merge(mainRegion).attr("class",$$.classRegion.bind($$)),mainRegion.exit().transition().duration(duration).style("opacity",0).remove()},ChartInternal.prototype.redrawRegion=function(withTransition,transition){var $$=this,regions=$$.mainRegion;return[(withTransition?regions.transition(transition):regions).attr("x",$$.regionX.bind($$)).attr("y",$$.regionY.bind($$)).attr("width",$$.regionWidth.bind($$)).attr("height",$$.regionHeight.bind($$)).style("fill-opacity",(function(d){return isValue(d.opacity)?d.opacity:.1}))]},ChartInternal.prototype.regionX=function(d){var $$=this,config=$$.config,yScale="y"===d.axis?$$.y:$$.y2;return"y"===d.axis||"y2"===d.axis?config.axis_rotated&&"start"in d?yScale(d.start):0:config.axis_rotated?0:"start"in d?$$.x($$.isTimeSeries()?$$.parseDate(d.start):d.start):0},ChartInternal.prototype.regionY=function(d){var $$=this,config=$$.config,yScale="y"===d.axis?$$.y:$$.y2;return"y"===d.axis||"y2"===d.axis?config.axis_rotated?0:"end"in d?yScale(d.end):0:config.axis_rotated&&"start"in d?$$.x($$.isTimeSeries()?$$.parseDate(d.start):d.start):0},ChartInternal.prototype.regionWidth=function(d){var end,$$=this,config=$$.config,start=$$.regionX(d),yScale="y"===d.axis?$$.y:$$.y2;return(end="y"===d.axis||"y2"===d.axis?config.axis_rotated&&"end"in d?yScale(d.end):$$.width:config.axis_rotated?$$.width:"end"in d?$$.x($$.isTimeSeries()?$$.parseDate(d.end):d.end):$$.width)<start?0:end-start},ChartInternal.prototype.regionHeight=function(d){var end,$$=this,config=$$.config,start=this.regionY(d),yScale="y"===d.axis?$$.y:$$.y2;return(end="y"===d.axis||"y2"===d.axis?config.axis_rotated?$$.height:"start"in d?yScale(d.start):$$.height:config.axis_rotated&&"end"in d?$$.x($$.isTimeSeries()?$$.parseDate(d.end):d.end):$$.height)<start?0:end-start},ChartInternal.prototype.isRegionOnX=function(d){return!d.axis||"x"===d.axis},ChartInternal.prototype.getScale=function(min,max,forTimeseries){return(forTimeseries?this.d3.scaleTime():this.d3.scaleLinear()).range([min,max])},ChartInternal.prototype.getX=function(min,max,domain,offset){var key,$$=this,scale=$$.getScale(min,max,$$.isTimeSeries()),_scale=domain?scale.domain(domain):scale;for(key in $$.isCategorized()?(offset=offset||function(){return 0},scale=function(d,raw){var v=_scale(d)+offset(d);return raw?v:Math.ceil(v)}):scale=function(d,raw){var v=_scale(d);return raw?v:Math.ceil(v)},_scale)scale[key]=_scale[key];return scale.orgDomain=function(){return _scale.domain()},$$.isCategorized()&&(scale.domain=function(domain){return arguments.length?(_scale.domain(domain),scale):[(domain=this.orgDomain())[0],domain[1]+1]}),scale},ChartInternal.prototype.getY=function(min,max,domain){var scale=this.getScale(min,max,this.isTimeSeriesY());return domain&&scale.domain(domain),scale},ChartInternal.prototype.getYScale=function(id){return"y2"===this.axis.getId(id)?this.y2:this.y},ChartInternal.prototype.getSubYScale=function(id){return"y2"===this.axis.getId(id)?this.subY2:this.subY},ChartInternal.prototype.updateScales=function(){var $$=this,config=$$.config,forInit=!$$.x;$$.xMin=config.axis_rotated?1:0,$$.xMax=config.axis_rotated?$$.height:$$.width,$$.yMin=config.axis_rotated?0:$$.height,$$.yMax=config.axis_rotated?$$.width:1,$$.subXMin=$$.xMin,$$.subXMax=$$.xMax,$$.subYMin=config.axis_rotated?0:$$.height2,$$.subYMax=config.axis_rotated?$$.width2:1,$$.x=$$.getX($$.xMin,$$.xMax,forInit?void 0:$$.x.orgDomain(),(function(){return $$.xAxis.tickOffset()})),$$.y=$$.getY($$.yMin,$$.yMax,forInit?config.axis_y_default:$$.y.domain()),$$.y2=$$.getY($$.yMin,$$.yMax,forInit?config.axis_y2_default:$$.y2.domain()),$$.subX=$$.getX($$.xMin,$$.xMax,$$.orgXDomain,(function(d){return d%1?0:$$.subXAxis.tickOffset()})),$$.subY=$$.getY($$.subYMin,$$.subYMax,forInit?config.axis_y_default:$$.subY.domain()),$$.subY2=$$.getY($$.subYMin,$$.subYMax,forInit?config.axis_y2_default:$$.subY2.domain()),$$.xAxisTickFormat=$$.axis.getXAxisTickFormat(),$$.xAxisTickValues=$$.axis.getXAxisTickValues(),$$.yAxisTickValues=$$.axis.getYAxisTickValues(),$$.y2AxisTickValues=$$.axis.getY2AxisTickValues(),$$.xAxis=$$.axis.getXAxis($$.x,$$.xOrient,$$.xAxisTickFormat,$$.xAxisTickValues,config.axis_x_tick_outer),$$.subXAxis=$$.axis.getXAxis($$.subX,$$.subXOrient,$$.xAxisTickFormat,$$.xAxisTickValues,config.axis_x_tick_outer),$$.yAxis=$$.axis.getYAxis($$.y,$$.yOrient,config.axis_y_tick_format,$$.yAxisTickValues,config.axis_y_tick_outer),$$.y2Axis=$$.axis.getYAxis($$.y2,$$.y2Orient,config.axis_y2_tick_format,$$.y2AxisTickValues,config.axis_y2_tick_outer),forInit||$$.brush&&$$.brush.updateScale($$.subX),$$.updateArc&&$$.updateArc()},ChartInternal.prototype.selectPoint=function(target,d,i){var $$=this,config=$$.config,cx=(config.axis_rotated?$$.circleY:$$.circleX).bind($$),cy=(config.axis_rotated?$$.circleX:$$.circleY).bind($$),r=$$.pointSelectR.bind($$);config.data_onselected.call($$.api,d,target.node()),$$.main.select("."+CLASS.selectedCircles+$$.getTargetSelectorSuffix(d.id)).selectAll("."+CLASS.selectedCircle+"-"+i).data([d]).enter().append("circle").attr("class",(function(){return $$.generateClass(CLASS.selectedCircle,i)})).attr("cx",cx).attr("cy",cy).attr("stroke",(function(){return $$.color(d)})).attr("r",(function(d){return 1.4*$$.pointSelectR(d)})).transition().duration(100).attr("r",r)},ChartInternal.prototype.unselectPoint=function(target,d,i){var $$=this;$$.config.data_onunselected.call($$.api,d,target.node()),$$.main.select("."+CLASS.selectedCircles+$$.getTargetSelectorSuffix(d.id)).selectAll("."+CLASS.selectedCircle+"-"+i).transition().duration(100).attr("r",0).remove()},ChartInternal.prototype.togglePoint=function(selected,target,d,i){selected?this.selectPoint(target,d,i):this.unselectPoint(target,d,i)},ChartInternal.prototype.selectPath=function(target,d){var $$=this;$$.config.data_onselected.call($$,d,target.node()),$$.config.interaction_brighten&&target.transition().duration(100).style("fill",(function(){return $$.d3.rgb($$.color(d)).brighter(.75)}))},ChartInternal.prototype.unselectPath=function(target,d){var $$=this;$$.config.data_onunselected.call($$,d,target.node()),$$.config.interaction_brighten&&target.transition().duration(100).style("fill",(function(){return $$.color(d)}))},ChartInternal.prototype.togglePath=function(selected,target,d,i){selected?this.selectPath(target,d,i):this.unselectPath(target,d,i)},ChartInternal.prototype.getToggle=function(that,d){var toggle,$$=this;return"circle"===that.nodeName?toggle=$$.isStepType(d)?function(){}:$$.togglePoint:"path"===that.nodeName&&(toggle=$$.togglePath),toggle},ChartInternal.prototype.toggleShape=function(that,d,i){var $$=this,d3=$$.d3,config=$$.config,shape=d3.select(that),isSelected=shape.classed(CLASS.SELECTED),toggle=$$.getToggle(that,d).bind($$);config.data_selection_enabled&&config.data_selection_isselectable(d)&&(config.data_selection_multiple||$$.main.selectAll("."+CLASS.shapes+(config.data_selection_grouped?$$.getTargetSelectorSuffix(d.id):"")).selectAll("."+CLASS.shape).each((function(d,i){var shape=d3.select(this);shape.classed(CLASS.SELECTED)&&toggle(!1,shape.classed(CLASS.SELECTED,!1),d,i)})),shape.classed(CLASS.SELECTED,!isSelected),toggle(!isSelected,shape,d,i))},ChartInternal.prototype.initBar=function(){this.main.select("."+CLASS.chart).append("g").attr("class",CLASS.chartBars)},ChartInternal.prototype.updateTargetsForBar=function(targets){var $$=this,config=$$.config,classChartBar=$$.classChartBar.bind($$),classBars=$$.classBars.bind($$),classFocus=$$.classFocus.bind($$);$$.main.select("."+CLASS.chartBars).selectAll("."+CLASS.chartBar).data(targets).attr("class",(function(d){return classChartBar(d)+classFocus(d)})).enter().append("g").attr("class",classChartBar).style("pointer-events","none").append("g").attr("class",classBars).style("cursor",(function(d){return config.data_selection_isselectable(d)?"pointer":null}))},ChartInternal.prototype.updateBar=function(durationForExit){var $$=this,barData=$$.barData.bind($$),classBar=$$.classBar.bind($$),initialOpacity=$$.initialOpacity.bind($$),color=function(d){return $$.color(d.id)},mainBar=$$.main.selectAll("."+CLASS.bars).selectAll("."+CLASS.bar).data(barData),mainBarEnter=mainBar.enter().append("path").attr("class",classBar).style("stroke",color).style("fill",color);$$.mainBar=mainBarEnter.merge(mainBar).style("opacity",initialOpacity),mainBar.exit().transition().duration(durationForExit).style("opacity",0)},ChartInternal.prototype.redrawBar=function(drawBar,withTransition,transition){return[(withTransition?this.mainBar.transition(transition):this.mainBar).attr("d",drawBar).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},ChartInternal.prototype.getBarW=function(axis,barTargetsNum){var config=this.config,w="number"==typeof config.bar_width?config.bar_width:barTargetsNum?axis.tickInterval()*config.bar_width_ratio/barTargetsNum:0;return config.bar_width_max&&w>config.bar_width_max?config.bar_width_max:w},ChartInternal.prototype.getBars=function(i,id){var $$=this;return(id?$$.main.selectAll("."+CLASS.bars+$$.getTargetSelectorSuffix(id)):$$.main).selectAll("."+CLASS.bar+(isValue(i)?"-"+i:""))},ChartInternal.prototype.expandBars=function(i,id,reset){var $$=this;reset&&$$.unexpandBars(),$$.getBars(i,id).classed(CLASS.EXPANDED,!0)},ChartInternal.prototype.unexpandBars=function(i){this.getBars(i).classed(CLASS.EXPANDED,!1)},ChartInternal.prototype.generateDrawBar=function(barIndices,isSub){var $$=this,config=$$.config,getPoints=$$.generateGetBarPoints(barIndices,isSub);return function(d,i){var points=getPoints(d,i),indexX=config.axis_rotated?1:0,indexY=config.axis_rotated?0:1;return"M "+points[0][indexX]+","+points[0][indexY]+" L"+points[1][indexX]+","+points[1][indexY]+" L"+points[2][indexX]+","+points[2][indexY]+" L"+points[3][indexX]+","+points[3][indexY]+" z"}},ChartInternal.prototype.generateGetBarPoints=function(barIndices,isSub){var $$=this,axis=isSub?$$.subXAxis:$$.xAxis,barTargetsNum=barIndices.__max__+1,barW=$$.getBarW(axis,barTargetsNum),barX=$$.getShapeX(barW,barTargetsNum,barIndices,!!isSub),barY=$$.getShapeY(!!isSub),barOffset=$$.getShapeOffset($$.isBarType,barIndices,!!isSub),barSpaceOffset=barW*($$.config.bar_space/2),yScale=isSub?$$.getSubYScale:$$.getYScale;return function(d,i){var y0=yScale.call($$,d.id)(0),offset=barOffset(d,i)||y0,posX=barX(d),posY=barY(d);return $$.config.axis_rotated&&(0<d.value&&posY<y0||d.value<0&&y0<posY)&&(posY=y0),[[posX+barSpaceOffset,offset],[posX+barSpaceOffset,posY-(y0-offset)],[posX+barW-barSpaceOffset,posY-(y0-offset)],[posX+barW-barSpaceOffset,offset]]}},ChartInternal.prototype.isWithinBar=function(mouse,that){var box=that.getBoundingClientRect(),seg0=that.pathSegList.getItem(0),seg1=that.pathSegList.getItem(1),x=Math.min(seg0.x,seg1.x),y=Math.min(seg0.y,seg1.y),offset=2,ex=x+box.width+offset,sy=y+box.height+offset,ey=y-offset;return x-offset<mouse[0]&&mouse[0]<ex&&ey<mouse[1]&&mouse[1]<sy},ChartInternal.prototype.getShapeIndices=function(typeFilter){var j,k,$$=this,config=$$.config,indices={},i=0;return $$.filterTargetsToShow($$.data.targets.filter(typeFilter,$$)).forEach((function(d){for(j=0;j<config.data_groups.length;j++)if(!(config.data_groups[j].indexOf(d.id)<0))for(k=0;k<config.data_groups[j].length;k++)if(config.data_groups[j][k]in indices){indices[d.id]=indices[config.data_groups[j][k]];break}isUndefined(indices[d.id])&&(indices[d.id]=i++)})),indices.__max__=i-1,indices},ChartInternal.prototype.getShapeX=function(offset,targetsNum,indices,isSub){var $$=this,scale=isSub?$$.subX:$$.x;return function(d){var index=d.id in indices?indices[d.id]:0;return d.x||0===d.x?scale(d.x)-offset*(targetsNum/2-index):0}},ChartInternal.prototype.getShapeY=function(isSub){var $$=this;return function(d){return(isSub?$$.getSubYScale(d.id):$$.getYScale(d.id))(d.value)}},ChartInternal.prototype.getShapeOffset=function(typeFilter,indices,isSub){var $$=this,targets=$$.orderTargets($$.filterTargetsToShow($$.data.targets.filter(typeFilter,$$))),targetIds=targets.map((function(t){return t.id}));return function(d,i){var scale=isSub?$$.getSubYScale(d.id):$$.getYScale(d.id),y0=scale(0),offset=y0;return targets.forEach((function(t){var values=$$.isStepType(d)?$$.convertValuesToStep(t.values):t.values;t.id!==d.id&&indices[t.id]===indices[d.id]&&targetIds.indexOf(t.id)<targetIds.indexOf(d.id)&&(void 0!==values[i]&&+values[i].x==+d.x||(i=-1,values.forEach((function(v,j){v.x===d.x&&(i=j)}))),i in values&&values[i].value*d.value>=0&&(offset+=scale(values[i].value)-y0))})),offset}},ChartInternal.prototype.isWithinShape=function(that,d){var isWithin,$$=this,shape=$$.d3.select(that);return $$.isTargetToShow(d.id)?"circle"===that.nodeName?isWithin=$$.isStepType(d)?$$.isWithinStep(that,$$.getYScale(d.id)(d.value)):$$.isWithinCircle(that,1.5*$$.pointSelectR(d)):"path"===that.nodeName&&(isWithin=!shape.classed(CLASS.bar)||$$.isWithinBar($$.d3.mouse(that),that)):isWithin=!1,isWithin},ChartInternal.prototype.getInterpolate=function(d){var $$=this,d3=$$.d3,types={linear:d3.curveLinear,"linear-closed":d3.curveLinearClosed,basis:d3.curveBasis,"basis-open":d3.curveBasisOpen,"basis-closed":d3.curveBasisClosed,bundle:d3.curveBundle,cardinal:d3.curveCardinal,"cardinal-open":d3.curveCardinalOpen,"cardinal-closed":d3.curveCardinalClosed,monotone:d3.curveMonotoneX,step:d3.curveStep,"step-before":d3.curveStepBefore,"step-after":d3.curveStepAfter};return $$.isSplineType(d)?types[$$.config.spline_interpolation_type]||types.cardinal:$$.isStepType(d)?types[$$.config.line_step_type]:types.linear},ChartInternal.prototype.initLine=function(){this.main.select("."+CLASS.chart).append("g").attr("class",CLASS.chartLines)},ChartInternal.prototype.updateTargetsForLine=function(targets){var mainLineEnter,$$=this,config=$$.config,classChartLine=$$.classChartLine.bind($$),classLines=$$.classLines.bind($$),classAreas=$$.classAreas.bind($$),classCircles=$$.classCircles.bind($$),classFocus=$$.classFocus.bind($$);(mainLineEnter=$$.main.select("."+CLASS.chartLines).selectAll("."+CLASS.chartLine).data(targets).attr("class",(function(d){return classChartLine(d)+classFocus(d)})).enter().append("g").attr("class",classChartLine).style("opacity",0).style("pointer-events","none")).append("g").attr("class",classLines),mainLineEnter.append("g").attr("class",classAreas),mainLineEnter.append("g").attr("class",(function(d){return $$.generateClass(CLASS.selectedCircles,d.id)})),mainLineEnter.append("g").attr("class",classCircles).style("cursor",(function(d){return config.data_selection_isselectable(d)?"pointer":null})),targets.forEach((function(t){$$.main.selectAll("."+CLASS.selectedCircles+$$.getTargetSelectorSuffix(t.id)).selectAll("."+CLASS.selectedCircle).each((function(d){d.value=t.values[d.index].value}))}))},ChartInternal.prototype.updateLine=function(durationForExit){var $$=this,mainLine=$$.main.selectAll("."+CLASS.lines).selectAll("."+CLASS.line).data($$.lineData.bind($$)),mainLineEnter=mainLine.enter().append("path").attr("class",$$.classLine.bind($$)).style("stroke",$$.color);$$.mainLine=mainLineEnter.merge(mainLine).style("opacity",$$.initialOpacity.bind($$)).style("shape-rendering",(function(d){return $$.isStepType(d)?"crispEdges":""})).attr("transform",null),mainLine.exit().transition().duration(durationForExit).style("opacity",0)},ChartInternal.prototype.redrawLine=function(drawLine,withTransition,transition){return[(withTransition?this.mainLine.transition(transition):this.mainLine).attr("d",drawLine).style("stroke",this.color).style("opacity",1)]},ChartInternal.prototype.generateDrawLine=function(lineIndices,isSub){var $$=this,config=$$.config,line=$$.d3.line(),getPoints=$$.generateGetLinePoints(lineIndices,isSub),yScaleGetter=isSub?$$.getSubYScale:$$.getYScale,xValue=function(d){return(isSub?$$.subxx:$$.xx).call($$,d)},yValue=function(d,i){return config.data_groups.length>0?getPoints(d,i)[0][1]:yScaleGetter.call($$,d.id)(d.value)};return line=config.axis_rotated?line.x(yValue).y(xValue):line.x(xValue).y(yValue),config.line_connectNull||(line=line.defined((function(d){return null!=d.value}))),function(d){var path,values=config.line_connectNull?$$.filterRemoveNull(d.values):d.values,x=isSub?$$.subX:$$.x,y=yScaleGetter.call($$,d.id),x0=0,y0=0;return $$.isLineType(d)?config.data_regions[d.id]?path=$$.lineWithRegions(values,x,y,config.data_regions[d.id]):($$.isStepType(d)&&(values=$$.convertValuesToStep(values)),path=line.curve($$.getInterpolate(d))(values)):(values[0]&&(x0=x(values[0].x),y0=y(values[0].value)),path=config.axis_rotated?"M "+y0+" "+x0:"M "+x0+" "+y0),path||"M 0 0"}},ChartInternal.prototype.generateGetLinePoints=function(lineIndices,isSub){var $$=this,config=$$.config,lineTargetsNum=lineIndices.__max__+1,x=$$.getShapeX(0,lineTargetsNum,lineIndices,!!isSub),y=$$.getShapeY(!!isSub),lineOffset=$$.getShapeOffset($$.isLineType,lineIndices,!!isSub),yScale=isSub?$$.getSubYScale:$$.getYScale;return function(d,i){var y0=yScale.call($$,d.id)(0),offset=lineOffset(d,i)||y0,posX=x(d),posY=y(d);return config.axis_rotated&&(0<d.value&&posY<y0||d.value<0&&y0<posY)&&(posY=y0),[[posX,posY-(y0-offset)],[posX,posY-(y0-offset)],[posX,posY-(y0-offset)],[posX,posY-(y0-offset)]]}},ChartInternal.prototype.lineWithRegions=function(d,x,y,_regions){var i,j,sWithRegion,xp,yp,dx,dy,diff,diffx2,xValue,yValue,$$=this,config=$$.config,s="M",xOffset=$$.isCategorized()?.5:0,regions=[];function isWithinRegions(x,regions){var i;for(i=0;i<regions.length;i++)if(regions[i].start<x&&x<=regions[i].end)return!0;return!1}if(isDefined(_regions))for(i=0;i<_regions.length;i++)regions[i]={},isUndefined(_regions[i].start)?regions[i].start=d[0].x:regions[i].start=$$.isTimeSeries()?$$.parseDate(_regions[i].start):_regions[i].start,isUndefined(_regions[i].end)?regions[i].end=d[d.length-1].x:regions[i].end=$$.isTimeSeries()?$$.parseDate(_regions[i].end):_regions[i].end;function generateM(points){return"M"+points[0][0]+" "+points[0][1]+" "+points[1][0]+" "+points[1][1]}for(xValue=config.axis_rotated?function(d){return y(d.value)}:function(d){return x(d.x)},yValue=config.axis_rotated?function(d){return x(d.x)}:function(d){return y(d.value)},sWithRegion=$$.isTimeSeries()?function(d0,d1,j,diff){var x0=d0.x.getTime(),x_diff=d1.x-d0.x,xv0=new Date(x0+x_diff*j),xv1=new Date(x0+x_diff*(j+diff));return generateM(config.axis_rotated?[[y(yp(j)),x(xv0)],[y(yp(j+diff)),x(xv1)]]:[[x(xv0),y(yp(j))],[x(xv1),y(yp(j+diff))]])}:function(d0,d1,j,diff){return generateM(config.axis_rotated?[[y(yp(j),!0),x(xp(j))],[y(yp(j+diff),!0),x(xp(j+diff))]]:[[x(xp(j),!0),y(yp(j))],[x(xp(j+diff),!0),y(yp(j+diff))]])},i=0;i<d.length;i++){if(isUndefined(regions)||!isWithinRegions(d[i].x,regions))s+=" "+xValue(d[i])+" "+yValue(d[i]);else for(xp=$$.getScale(d[i-1].x+xOffset,d[i].x+xOffset,$$.isTimeSeries()),yp=$$.getScale(d[i-1].value,d[i].value),dx=x(d[i].x)-x(d[i-1].x),dy=y(d[i].value)-y(d[i-1].value),diffx2=2*(diff=2/Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2))),j=diff;j<=1;j+=diffx2)s+=sWithRegion(d[i-1],d[i],j,diff);d[i].x}return s},ChartInternal.prototype.updateArea=function(durationForExit){var $$=this,d3=$$.d3,mainArea=$$.main.selectAll("."+CLASS.areas).selectAll("."+CLASS.area).data($$.lineData.bind($$)),mainAreaEnter=mainArea.enter().append("path").attr("class",$$.classArea.bind($$)).style("fill",$$.color).style("opacity",(function(){return $$.orgAreaOpacity=+d3.select(this).style("opacity"),0}));$$.mainArea=mainAreaEnter.merge(mainArea).style("opacity",$$.orgAreaOpacity),mainArea.exit().transition().duration(durationForExit).style("opacity",0)},ChartInternal.prototype.redrawArea=function(drawArea,withTransition,transition){return[(withTransition?this.mainArea.transition(transition):this.mainArea).attr("d",drawArea).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},ChartInternal.prototype.generateDrawArea=function(areaIndices,isSub){var $$=this,config=$$.config,area=$$.d3.area(),getPoints=$$.generateGetAreaPoints(areaIndices,isSub),yScaleGetter=isSub?$$.getSubYScale:$$.getYScale,xValue=function(d){return(isSub?$$.subxx:$$.xx).call($$,d)},value0=function(d,i){return config.data_groups.length>0?getPoints(d,i)[0][1]:yScaleGetter.call($$,d.id)($$.getAreaBaseValue(d.id))},value1=function(d,i){return config.data_groups.length>0?getPoints(d,i)[1][1]:yScaleGetter.call($$,d.id)(d.value)};return area=config.axis_rotated?area.x0(value0).x1(value1).y(xValue):area.x(xValue).y0(config.area_above?0:value0).y1(value1),config.line_connectNull||(area=area.defined((function(d){return null!==d.value}))),function(d){var path,values=config.line_connectNull?$$.filterRemoveNull(d.values):d.values,x0=0,y0=0;return $$.isAreaType(d)?($$.isStepType(d)&&(values=$$.convertValuesToStep(values)),path=area.curve($$.getInterpolate(d))(values)):(values[0]&&(x0=$$.x(values[0].x),y0=$$.getYScale(d.id)(values[0].value)),path=config.axis_rotated?"M "+y0+" "+x0:"M "+x0+" "+y0),path||"M 0 0"}},ChartInternal.prototype.getAreaBaseValue=function(){return 0},ChartInternal.prototype.generateGetAreaPoints=function(areaIndices,isSub){var $$=this,config=$$.config,areaTargetsNum=areaIndices.__max__+1,x=$$.getShapeX(0,areaTargetsNum,areaIndices,!!isSub),y=$$.getShapeY(!!isSub),areaOffset=$$.getShapeOffset($$.isAreaType,areaIndices,!!isSub),yScale=isSub?$$.getSubYScale:$$.getYScale;return function(d,i){var y0=yScale.call($$,d.id)(0),offset=areaOffset(d,i)||y0,posX=x(d),posY=y(d);return config.axis_rotated&&(0<d.value&&posY<y0||d.value<0&&y0<posY)&&(posY=y0),[[posX,offset],[posX,posY-(y0-offset)],[posX,posY-(y0-offset)],[posX,offset]]}},ChartInternal.prototype.updateCircle=function(cx,cy){var $$=this,mainCircle=$$.main.selectAll("."+CLASS.circles).selectAll("."+CLASS.circle).data($$.lineOrScatterData.bind($$)),mainCircleEnter=mainCircle.enter().append("circle").attr("class",$$.classCircle.bind($$)).attr("cx",cx).attr("cy",cy).attr("r",$$.pointR.bind($$)).style("fill",$$.color);$$.mainCircle=mainCircleEnter.merge(mainCircle).style("opacity",$$.initialOpacityForCircle.bind($$)),mainCircle.exit().style("opacity",0)},ChartInternal.prototype.redrawCircle=function(cx,cy,withTransition,transition){var $$=this,selectedCircles=$$.main.selectAll("."+CLASS.selectedCircle);return[(withTransition?$$.mainCircle.transition(transition):$$.mainCircle).style("opacity",this.opacityForCircle.bind($$)).style("fill",$$.color).attr("cx",cx).attr("cy",cy),(withTransition?selectedCircles.transition(transition):selectedCircles).attr("cx",cx).attr("cy",cy)]},ChartInternal.prototype.circleX=function(d){return d.x||0===d.x?this.x(d.x):null},ChartInternal.prototype.updateCircleY=function(){var lineIndices,getPoints,$$=this;$$.config.data_groups.length>0?(lineIndices=$$.getShapeIndices($$.isLineType),getPoints=$$.generateGetLinePoints(lineIndices),$$.circleY=function(d,i){return getPoints(d,i)[0][1]}):$$.circleY=function(d){return $$.getYScale(d.id)(d.value)}},ChartInternal.prototype.getCircles=function(i,id){var $$=this;return(id?$$.main.selectAll("."+CLASS.circles+$$.getTargetSelectorSuffix(id)):$$.main).selectAll("."+CLASS.circle+(isValue(i)?"-"+i:""))},ChartInternal.prototype.expandCircles=function(i,id,reset){var $$=this,r=$$.pointExpandedR.bind($$);reset&&$$.unexpandCircles(),$$.getCircles(i,id).classed(CLASS.EXPANDED,!0).attr("r",r)},ChartInternal.prototype.unexpandCircles=function(i){var $$=this,r=$$.pointR.bind($$);$$.getCircles(i).filter((function(){return $$.d3.select(this).classed(CLASS.EXPANDED)})).classed(CLASS.EXPANDED,!1).attr("r",r)},ChartInternal.prototype.pointR=function(d){var $$=this,config=$$.config;return $$.isStepType(d)?0:isFunction(config.point_r)?config.point_r(d):config.point_r},ChartInternal.prototype.pointExpandedR=function(d){var $$=this,config=$$.config;return config.point_focus_expand_enabled?isFunction(config.point_focus_expand_r)?config.point_focus_expand_r(d):config.point_focus_expand_r?config.point_focus_expand_r:1.75*$$.pointR(d):$$.pointR(d)},ChartInternal.prototype.pointSelectR=function(d){var $$=this,config=$$.config;return isFunction(config.point_select_r)?config.point_select_r(d):config.point_select_r?config.point_select_r:4*$$.pointR(d)},ChartInternal.prototype.isWithinCircle=function(that,r){var d3=this.d3,mouse=d3.mouse(that),d3_this=d3.select(that),cx=+d3_this.attr("cx"),cy=+d3_this.attr("cy");return Math.sqrt(Math.pow(cx-mouse[0],2)+Math.pow(cy-mouse[1],2))<r},ChartInternal.prototype.isWithinStep=function(that,y){return Math.abs(y-this.d3.mouse(that)[1])<30},ChartInternal.prototype.getCurrentWidth=function(){var $$=this,config=$$.config;return config.size_width?config.size_width:$$.getParentWidth()},ChartInternal.prototype.getCurrentHeight=function(){var $$=this,config=$$.config,h=config.size_height?config.size_height:$$.getParentHeight();return h>0?h:320/($$.hasType("gauge")&&!config.gauge_fullCircle?2:1)},ChartInternal.prototype.getCurrentPaddingTop=function(){var $$=this,config=$$.config,padding=isValue(config.padding_top)?config.padding_top:0;return $$.title&&$$.title.node()&&(padding+=$$.getTitlePadding()),padding},ChartInternal.prototype.getCurrentPaddingBottom=function(){var config=this.config;return isValue(config.padding_bottom)?config.padding_bottom:0},ChartInternal.prototype.getCurrentPaddingLeft=function(withoutRecompute){var $$=this,config=$$.config;return isValue(config.padding_left)?config.padding_left:config.axis_rotated?!config.axis_x_show||config.axis_x_inner?1:Math.max(ceil10($$.getAxisWidthByAxisId("x",withoutRecompute)),40):!config.axis_y_show||config.axis_y_inner?$$.axis.getYAxisLabelPosition().isOuter?30:1:ceil10($$.getAxisWidthByAxisId("y",withoutRecompute))},ChartInternal.prototype.getCurrentPaddingRight=function(){var $$=this,config=$$.config,defaultPadding=10,legendWidthOnRight=$$.isLegendRight?$$.getLegendWidth()+20:0;return isValue(config.padding_right)?config.padding_right+1:config.axis_rotated?defaultPadding+legendWidthOnRight:!config.axis_y2_show||config.axis_y2_inner?2+legendWidthOnRight+($$.axis.getY2AxisLabelPosition().isOuter?20:0):ceil10($$.getAxisWidthByAxisId("y2"))+legendWidthOnRight},ChartInternal.prototype.getParentRectValue=function(key){for(var v,parent=this.selectChart.node();parent&&"BODY"!==parent.tagName;){try{v=parent.getBoundingClientRect()[key]}catch(e){"width"===key&&(v=parent.offsetWidth)}if(v)break;parent=parent.parentNode}return v},ChartInternal.prototype.getParentWidth=function(){return this.getParentRectValue("width")},ChartInternal.prototype.getParentHeight=function(){return this.getParentRectValue("height")},ChartInternal.prototype.getSvgLeft=function(withoutRecompute){var $$=this,config=$$.config,hasLeftAxisRect=config.axis_rotated||!config.axis_rotated&&!config.axis_y_inner,leftAxisClass=config.axis_rotated?CLASS.axisX:CLASS.axisY,leftAxis=$$.main.select("."+leftAxisClass).node(),svgRect=leftAxis&&hasLeftAxisRect?leftAxis.getBoundingClientRect():{right:0},chartRect=$$.selectChart.node().getBoundingClientRect(),hasArc=$$.hasArcType(),svgLeft=svgRect.right-chartRect.left-(hasArc?0:$$.getCurrentPaddingLeft(withoutRecompute));return svgLeft>0?svgLeft:0},ChartInternal.prototype.getAxisWidthByAxisId=function(id,withoutRecompute){var $$=this,position=$$.axis.getLabelPositionById(id);return $$.axis.getMaxTickWidth(id,withoutRecompute)+(position.isInner?20:40)},ChartInternal.prototype.getHorizontalAxisHeight=function(axisId){var $$=this,config=$$.config,h=30;return"x"!==axisId||config.axis_x_show?"x"===axisId&&config.axis_x_height?config.axis_x_height:"y"!==axisId||config.axis_y_show?"y2"!==axisId||config.axis_y2_show?("x"===axisId&&!config.axis_rotated&&config.axis_x_tick_rotate&&(h=30+$$.axis.getMaxTickWidth(axisId)*Math.cos(Math.PI*(90-Math.abs(config.axis_x_tick_rotate))/180)),"y"===axisId&&config.axis_rotated&&config.axis_y_tick_rotate&&(h=30+$$.axis.getMaxTickWidth(axisId)*Math.cos(Math.PI*(90-Math.abs(config.axis_y_tick_rotate))/180)),h+($$.axis.getLabelPositionById(axisId).isInner?0:10)+("y2"===axisId?-10:0)):$$.rotated_padding_top:!config.legend_show||$$.isLegendRight||$$.isLegendInset?1:10:8},ChartInternal.prototype.initBrush=function(scale){var $$=this,d3=$$.d3;return $$.brush=($$.config.axis_rotated?d3.brushY():d3.brushX()).on("brush",(function(){var event=d3.event.sourceEvent;event&&"zoom"===event.type||$$.redrawForBrush()})).on("end",(function(){var event=d3.event.sourceEvent;event&&"zoom"===event.type||$$.brush.empty()&&event&&"end"!==event.type&&$$.brush.clear()})),$$.brush.updateExtent=function(){var extent,range=this.scale.range();return extent=$$.config.axis_rotated?[[0,range[0]],[$$.width2,range[1]]]:[[range[0],0],[range[1],$$.height2]],this.extent(extent),this},$$.brush.updateScale=function(scale){return this.scale=scale,this},$$.brush.update=function(scale){this.updateScale(scale||$$.subX).updateExtent(),$$.context.select("."+CLASS.brush).call(this)},$$.brush.clear=function(){$$.context.select("."+CLASS.brush).call($$.brush.move,null)},$$.brush.selection=function(){return d3.brushSelection($$.context.select("."+CLASS.brush).node())},$$.brush.selectionAsValue=function(selectionAsValue,withTransition){var selection,brush;return selectionAsValue?($$.context&&(selection=[this.scale(selectionAsValue[0]),this.scale(selectionAsValue[1])],brush=$$.context.select("."+CLASS.brush),withTransition&&(brush=brush.transition()),$$.brush.move(brush,selection)),[]):(selection=$$.brush.selection()||[0,0],[this.scale.invert(selection[0]),this.scale.invert(selection[1])])},$$.brush.empty=function(){var selection=$$.brush.selection();return!selection||selection[0]===selection[1]},$$.brush.updateScale(scale)},ChartInternal.prototype.initSubchart=function(){var $$=this,config=$$.config,context=$$.context=$$.svg.append("g").attr("transform",$$.getTranslate("context")),visibility=config.subchart_show?"visible":"hidden";context.style("visibility",visibility),context.append("g").attr("clip-path",$$.clipPathForSubchart).attr("class",CLASS.chart),context.select("."+CLASS.chart).append("g").attr("class",CLASS.chartBars),context.select("."+CLASS.chart).append("g").attr("class",CLASS.chartLines),context.append("g").attr("clip-path",$$.clipPath).attr("class",CLASS.brush),$$.axes.subx=context.append("g").attr("class",CLASS.axisX).attr("transform",$$.getTranslate("subx")).attr("clip-path",config.axis_rotated?"":$$.clipPathForXAxis)},ChartInternal.prototype.initSubchartBrush=function(){var $$=this;$$.initBrush($$.subX).updateExtent(),$$.context.select("."+CLASS.brush).call($$.brush)},ChartInternal.prototype.updateTargetsForSubchart=function(targets){var contextLineEnter,contextLine,contextBarEnter,contextBar,$$=this,context=$$.context,config=$$.config,classChartBar=$$.classChartBar.bind($$),classBars=$$.classBars.bind($$),classChartLine=$$.classChartLine.bind($$),classLines=$$.classLines.bind($$),classAreas=$$.classAreas.bind($$);config.subchart_show&&((contextBarEnter=(contextBar=context.select("."+CLASS.chartBars).selectAll("."+CLASS.chartBar).data(targets)).enter().append("g").style("opacity",0)).merge(contextBar).attr("class",classChartBar),contextBarEnter.append("g").attr("class",classBars),(contextLineEnter=(contextLine=context.select("."+CLASS.chartLines).selectAll("."+CLASS.chartLine).data(targets)).enter().append("g").style("opacity",0)).merge(contextLine).attr("class",classChartLine),contextLineEnter.append("g").attr("class",classLines),contextLineEnter.append("g").attr("class",classAreas),context.selectAll("."+CLASS.brush+" rect").attr(config.axis_rotated?"width":"height",config.axis_rotated?$$.width2:$$.height2))},ChartInternal.prototype.updateBarForSubchart=function(durationForExit){var $$=this,contextBar=$$.context.selectAll("."+CLASS.bars).selectAll("."+CLASS.bar).data($$.barData.bind($$)),contextBarEnter=contextBar.enter().append("path").attr("class",$$.classBar.bind($$)).style("stroke","none").style("fill",$$.color);contextBar.exit().transition().duration(durationForExit).style("opacity",0).remove(),$$.contextBar=contextBarEnter.merge(contextBar).style("opacity",$$.initialOpacity.bind($$))},ChartInternal.prototype.redrawBarForSubchart=function(drawBarOnSub,withTransition,duration){(withTransition?this.contextBar.transition(Math.random().toString()).duration(duration):this.contextBar).attr("d",drawBarOnSub).style("opacity",1)},ChartInternal.prototype.updateLineForSubchart=function(durationForExit){var $$=this,contextLine=$$.context.selectAll("."+CLASS.lines).selectAll("."+CLASS.line).data($$.lineData.bind($$)),contextLineEnter=contextLine.enter().append("path").attr("class",$$.classLine.bind($$)).style("stroke",$$.color);contextLine.exit().transition().duration(durationForExit).style("opacity",0).remove(),$$.contextLine=contextLineEnter.merge(contextLine).style("opacity",$$.initialOpacity.bind($$))},ChartInternal.prototype.redrawLineForSubchart=function(drawLineOnSub,withTransition,duration){(withTransition?this.contextLine.transition(Math.random().toString()).duration(duration):this.contextLine).attr("d",drawLineOnSub).style("opacity",1)},ChartInternal.prototype.updateAreaForSubchart=function(durationForExit){var $$=this,d3=$$.d3,contextArea=$$.context.selectAll("."+CLASS.areas).selectAll("."+CLASS.area).data($$.lineData.bind($$)),contextAreaEnter=contextArea.enter().append("path").attr("class",$$.classArea.bind($$)).style("fill",$$.color).style("opacity",(function(){return $$.orgAreaOpacity=+d3.select(this).style("opacity"),0}));contextArea.exit().transition().duration(durationForExit).style("opacity",0).remove(),$$.contextArea=contextAreaEnter.merge(contextArea).style("opacity",0)},ChartInternal.prototype.redrawAreaForSubchart=function(drawAreaOnSub,withTransition,duration){(withTransition?this.contextArea.transition(Math.random().toString()).duration(duration):this.contextArea).attr("d",drawAreaOnSub).style("fill",this.color).style("opacity",this.orgAreaOpacity)},ChartInternal.prototype.redrawSubchart=function(withSubchart,transitions,duration,durationForExit,areaIndices,barIndices,lineIndices){var drawAreaOnSub,drawBarOnSub,drawLineOnSub,$$=this,d3=$$.d3,config=$$.config;$$.context.style("visibility",config.subchart_show?"visible":"hidden"),config.subchart_show&&(d3.event&&"zoom"===d3.event.type&&$$.brush.selectionAsValue($$.x.orgDomain()),withSubchart&&($$.brush.empty()||$$.brush.selectionAsValue($$.x.orgDomain()),drawAreaOnSub=$$.generateDrawArea(areaIndices,!0),drawBarOnSub=$$.generateDrawBar(barIndices,!0),drawLineOnSub=$$.generateDrawLine(lineIndices,!0),$$.updateBarForSubchart(duration),$$.updateLineForSubchart(duration),$$.updateAreaForSubchart(duration),$$.redrawBarForSubchart(drawBarOnSub,duration,duration),$$.redrawLineForSubchart(drawLineOnSub,duration,duration),$$.redrawAreaForSubchart(drawAreaOnSub,duration,duration)))},ChartInternal.prototype.redrawForBrush=function(){var s,$$=this,x=$$.x,d3=$$.d3;$$.redraw({withTransition:!1,withY:$$.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withEventRect:!1,withDimension:!1}),s=d3.event.selection||$$.brush.scale.range(),$$.main.select("."+CLASS.eventRect).call($$.zoom.transform,d3.zoomIdentity.scale($$.width/(s[1]-s[0])).translate(-s[0],0)),$$.config.subchart_onbrush.call($$.api,x.orgDomain())},ChartInternal.prototype.transformContext=function(withTransition,transitions){var subXAxis,$$=this;transitions&&transitions.axisSubX?subXAxis=transitions.axisSubX:(subXAxis=$$.context.select("."+CLASS.axisX),withTransition&&(subXAxis=subXAxis.transition())),$$.context.attr("transform",$$.getTranslate("context")),subXAxis.attr("transform",$$.getTranslate("subx"))},ChartInternal.prototype.getDefaultSelection=function(){var $$=this,config=$$.config,selection=isFunction(config.axis_x_selection)?config.axis_x_selection($$.getXDomain($$.data.targets)):config.axis_x_selection;return $$.isTimeSeries()&&(selection=[$$.parseDate(selection[0]),$$.parseDate(selection[1])]),selection},ChartInternal.prototype.initText=function(){var $$=this;$$.main.select("."+CLASS.chart).append("g").attr("class",CLASS.chartTexts),$$.mainText=$$.d3.selectAll([])},ChartInternal.prototype.updateTargetsForText=function(targets){var $$=this,classChartText=$$.classChartText.bind($$),classTexts=$$.classTexts.bind($$),classFocus=$$.classFocus.bind($$),mainText=$$.main.select("."+CLASS.chartTexts).selectAll("."+CLASS.chartText).data(targets),mainTextEnter=mainText.enter().append("g").attr("class",classChartText).style("opacity",0).style("pointer-events","none");mainTextEnter.append("g").attr("class",classTexts),mainTextEnter.merge(mainText).attr("class",(function(d){return classChartText(d)+classFocus(d)}))},ChartInternal.prototype.updateText=function(xForText,yForText,durationForExit){var $$=this,config=$$.config,barOrLineData=$$.barOrLineData.bind($$),classText=$$.classText.bind($$),mainText=$$.main.selectAll("."+CLASS.texts).selectAll("."+CLASS.text).data(barOrLineData),mainTextEnter=mainText.enter().append("text").attr("class",classText).attr("text-anchor",(function(d){return config.axis_rotated?d.value<0?"end":"start":"middle"})).style("stroke","none").attr("x",xForText).attr("y",yForText).style("fill",(function(d){return $$.color(d)})).style("fill-opacity",0);$$.mainText=mainTextEnter.merge(mainText).text((function(d,i,j){return $$.dataLabelFormat(d.id)(d.value,d.id,i,j)})),mainText.exit().transition().duration(durationForExit).style("fill-opacity",0).remove()},ChartInternal.prototype.redrawText=function(xForText,yForText,forFlow,withTransition,transition){return[(withTransition?this.mainText.transition(transition):this.mainText).attr("x",xForText).attr("y",yForText).style("fill",this.color).style("fill-opacity",forFlow?0:this.opacityForText.bind(this))]},ChartInternal.prototype.getTextRect=function(text,cls,element){var rect,dummy=this.d3.select("body").append("div").classed("c3",!0),svg=dummy.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),font=this.d3.select(element).style("font");return svg.selectAll(".dummy").data([text]).enter().append("text").classed(cls||"",!0).style("font",font).text(text).each((function(){rect=this.getBoundingClientRect()})),dummy.remove(),rect},ChartInternal.prototype.generateXYForText=function(areaIndices,barIndices,lineIndices,forX){var $$=this,getAreaPoints=$$.generateGetAreaPoints(areaIndices,!1),getBarPoints=$$.generateGetBarPoints(barIndices,!1),getLinePoints=$$.generateGetLinePoints(lineIndices,!1),getter=forX?$$.getXForText:$$.getYForText;return function(d,i){var getPoints=$$.isAreaType(d)?getAreaPoints:$$.isBarType(d)?getBarPoints:getLinePoints;return getter.call($$,getPoints(d,i),d,this)}},ChartInternal.prototype.getXForText=function(points,d,textElement){var xPos,padding,$$=this,box=textElement.getBoundingClientRect();return $$.config.axis_rotated?(padding=$$.isBarType(d)?4:6,xPos=points[2][1]+padding*(d.value<0?-1:1)):xPos=$$.hasType("bar")?(points[2][0]+points[0][0])/2:points[0][0],null===d.value&&(xPos>$$.width?xPos=$$.width-box.width:xPos<0&&(xPos=4)),xPos},ChartInternal.prototype.getYForText=function(points,d,textElement){var yPos,$$=this,box=textElement.getBoundingClientRect();return $$.config.axis_rotated?yPos=(points[0][0]+points[2][0]+.6*box.height)/2:(yPos=points[2][1],d.value<0||0===d.value&&!$$.hasPositiveValue?(yPos+=box.height,$$.isBarType(d)&&$$.isSafari()?yPos-=3:!$$.isBarType(d)&&$$.isChrome()&&(yPos+=3)):yPos+=$$.isBarType(d)?-3:-6),null!==d.value||$$.config.axis_rotated||(yPos<box.height?yPos=box.height:yPos>this.height&&(yPos=this.height-4)),yPos},ChartInternal.prototype.initTitle=function(){var $$=this;$$.title=$$.svg.append("text").text($$.config.title_text).attr("class",$$.CLASS.title)},ChartInternal.prototype.redrawTitle=function(){var $$=this;$$.title.attr("x",$$.xForTitle.bind($$)).attr("y",$$.yForTitle.bind($$))},ChartInternal.prototype.xForTitle=function(){var $$=this,config=$$.config,position=config.title_position||"left";return position.indexOf("right")>=0?$$.currentWidth-$$.getTextRect($$.title.node().textContent,$$.CLASS.title,$$.title.node()).width-config.title_padding.right:position.indexOf("center")>=0?($$.currentWidth-$$.getTextRect($$.title.node().textContent,$$.CLASS.title,$$.title.node()).width)/2:config.title_padding.left},ChartInternal.prototype.yForTitle=function(){var $$=this;return $$.config.title_padding.top+$$.getTextRect($$.title.node().textContent,$$.CLASS.title,$$.title.node()).height},ChartInternal.prototype.getTitlePadding=function(){var $$=this;return $$.yForTitle()+$$.config.title_padding.bottom},ChartInternal.prototype.initTooltip=function(){var i,$$=this,config=$$.config;if($$.tooltip=$$.selectChart.style("position","relative").append("div").attr("class",CLASS.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),config.tooltip_init_show){if($$.isTimeSeries()&&isString(config.tooltip_init_x)){for(config.tooltip_init_x=$$.parseDate(config.tooltip_init_x),i=0;i<$$.data.targets[0].values.length&&$$.data.targets[0].values[i].x-config.tooltip_init_x!=0;i++);config.tooltip_init_x=i}$$.tooltip.html(config.tooltip_contents.call($$,$$.data.targets.map((function(d){return $$.addName(d.values[config.tooltip_init_x])})),$$.axis.getXAxisTickFormat(),$$.getYFormat($$.hasArcType()),$$.color)),$$.tooltip.style("top",config.tooltip_init_position.top).style("left",config.tooltip_init_position.left).style("display","block")}},ChartInternal.prototype.getTooltipSortFunction=function(){var $$=this,config=$$.config;if(0!==config.data_groups.length&&void 0===config.tooltip_order){var ids=$$.orderTargets($$.data.targets).map((function(i){return i.id}));return($$.isOrderAsc()||$$.isOrderDesc())&&(ids=ids.reverse()),function(a,b){return ids.indexOf(a.id)-ids.indexOf(b.id)}}var order=config.tooltip_order;void 0===order&&(order=config.data_order);var valueOf=function(obj){return obj?obj.value:null};if(isString(order)&&"asc"===order.toLowerCase())return function(a,b){return valueOf(a)-valueOf(b)};if(isString(order)&&"desc"===order.toLowerCase())return function(a,b){return valueOf(b)-valueOf(a)};if(isFunction(order)){var sortFunction=order;return void 0===config.tooltip_order&&(sortFunction=function(a,b){return order(a?{id:a.id,values:[a]}:null,b?{id:b.id,values:[b]}:null)}),sortFunction}return isArray(order)?function(a,b){return order.indexOf(a.id)-order.indexOf(b.id)}:void 0},ChartInternal.prototype.getTooltipContent=function(d,defaultTitleFormat,defaultValueFormat,color){var text,i,title,value,name,bgcolor,$$=this,config=$$.config,titleFormat=config.tooltip_format_title||defaultTitleFormat,nameFormat=config.tooltip_format_name||function(name){return name},valueFormat=config.tooltip_format_value||defaultValueFormat,tooltipSortFunction=this.getTooltipSortFunction();for(tooltipSortFunction&&d.sort(tooltipSortFunction),i=0;i<d.length;i++)if(d[i]&&(d[i].value||0===d[i].value)&&(text||(title=sanitise(titleFormat?titleFormat(d[i].x,d[i].index):d[i].x),text="<table class='"+$$.CLASS.tooltip+"'>"+(title||0===title?"<tr><th colspan='2'>"+title+"</th></tr>":"")),void 0!==(value=sanitise(valueFormat(d[i].value,d[i].ratio,d[i].id,d[i].index,d))))){if(null===d[i].name)continue;name=sanitise(nameFormat(d[i].name,d[i].ratio,d[i].id,d[i].index)),bgcolor=$$.levelColor?$$.levelColor(d[i].value):color(d[i].id),text+="<tr class='"+$$.CLASS.tooltipName+"-"+$$.getTargetSelectorSuffix(d[i].id)+"'>",text+="<td class='name'><span style='background-color:"+bgcolor+"'></span>"+name+"</td>",text+="<td class='value'>"+value+"</td>",text+="</tr>"}return text+"</table>"},ChartInternal.prototype.tooltipPosition=function(dataToShow,tWidth,tHeight,element){var svgLeft,tooltipLeft,tooltipRight,tooltipTop,chartRight,$$=this,config=$$.config,d3=$$.d3,forArc=$$.hasArcType(),mouse=d3.mouse(element);return forArc?(tooltipLeft=($$.width-($$.isLegendRight?$$.getLegendWidth():0))/2+mouse[0],tooltipTop=($$.hasType("gauge")?$$.height:$$.height/2)+mouse[1]+20):(svgLeft=$$.getSvgLeft(!0),config.axis_rotated?(tooltipRight=(tooltipLeft=svgLeft+mouse[0]+100)+tWidth,chartRight=$$.currentWidth-$$.getCurrentPaddingRight(),tooltipTop=$$.x(dataToShow[0].x)+20):(tooltipRight=(tooltipLeft=svgLeft+$$.getCurrentPaddingLeft(!0)+$$.x(dataToShow[0].x)+20)+tWidth,chartRight=svgLeft+$$.currentWidth-$$.getCurrentPaddingRight(),tooltipTop=mouse[1]+15),tooltipRight>chartRight&&(tooltipLeft-=tooltipRight-chartRight+20),tooltipTop+tHeight>$$.currentHeight&&(tooltipTop-=tHeight+30)),tooltipTop<0&&(tooltipTop=0),{top:tooltipTop,left:tooltipLeft}},ChartInternal.prototype.showTooltip=function(selectedData,element){var tWidth,tHeight,position,$$=this,config=$$.config,forArc=$$.hasArcType(),dataToShow=selectedData.filter((function(d){return d&&isValue(d.value)})),positionFunction=config.tooltip_position||ChartInternal.prototype.tooltipPosition;0!==dataToShow.length&&config.tooltip_show&&($$.tooltip.html(config.tooltip_contents.call($$,selectedData,$$.axis.getXAxisTickFormat(),$$.getYFormat(forArc),$$.color)).style("display","block"),tWidth=$$.tooltip.property("offsetWidth"),tHeight=$$.tooltip.property("offsetHeight"),position=positionFunction.call(this,dataToShow,tWidth,tHeight,element),$$.tooltip.style("top",position.top+"px").style("left",position.left+"px"))},ChartInternal.prototype.hideTooltip=function(){this.tooltip.style("display","none")},ChartInternal.prototype.setTargetType=function(targetIds,type){var $$=this,config=$$.config;$$.mapToTargetIds(targetIds).forEach((function(id){$$.withoutFadeIn[id]=type===config.data_types[id],config.data_types[id]=type})),targetIds||(config.data_type=type)},ChartInternal.prototype.hasType=function(type,targets){var $$=this,types=$$.config.data_types,has=!1;return(targets=targets||$$.data.targets)&&targets.length?targets.forEach((function(target){var t=types[target.id];(t&&t.indexOf(type)>=0||!t&&"line"===type)&&(has=!0)})):Object.keys(types).length?Object.keys(types).forEach((function(id){types[id]===type&&(has=!0)})):has=$$.config.data_type===type,has},ChartInternal.prototype.hasArcType=function(targets){return this.hasType("pie",targets)||this.hasType("donut",targets)||this.hasType("gauge",targets)},ChartInternal.prototype.isLineType=function(d){var config=this.config,id=isString(d)?d:d.id;return!config.data_types[id]||["line","spline","area","area-spline","step","area-step"].indexOf(config.data_types[id])>=0},ChartInternal.prototype.isStepType=function(d){var id=isString(d)?d:d.id;return["step","area-step"].indexOf(this.config.data_types[id])>=0},ChartInternal.prototype.isSplineType=function(d){var id=isString(d)?d:d.id;return["spline","area-spline"].indexOf(this.config.data_types[id])>=0},ChartInternal.prototype.isAreaType=function(d){var id=isString(d)?d:d.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[id])>=0},ChartInternal.prototype.isBarType=function(d){var id=isString(d)?d:d.id;return"bar"===this.config.data_types[id]},ChartInternal.prototype.isScatterType=function(d){var id=isString(d)?d:d.id;return"scatter"===this.config.data_types[id]},ChartInternal.prototype.isPieType=function(d){var id=isString(d)?d:d.id;return"pie"===this.config.data_types[id]},ChartInternal.prototype.isGaugeType=function(d){var id=isString(d)?d:d.id;return"gauge"===this.config.data_types[id]},ChartInternal.prototype.isDonutType=function(d){var id=isString(d)?d:d.id;return"donut"===this.config.data_types[id]},ChartInternal.prototype.isArcType=function(d){return this.isPieType(d)||this.isDonutType(d)||this.isGaugeType(d)},ChartInternal.prototype.lineData=function(d){return this.isLineType(d)?[d]:[]},ChartInternal.prototype.arcData=function(d){return this.isArcType(d.data)?[d]:[]},ChartInternal.prototype.barData=function(d){return this.isBarType(d)?d.values:[]},ChartInternal.prototype.lineOrScatterData=function(d){return this.isLineType(d)||this.isScatterType(d)?d.values:[]},ChartInternal.prototype.barOrLineData=function(d){return this.isBarType(d)||this.isLineType(d)?d.values:[]},ChartInternal.prototype.isSafari=function(){var ua=window.navigator.userAgent;return ua.indexOf("Safari")>=0&&ua.indexOf("Chrome")<0},ChartInternal.prototype.isChrome=function(){return window.navigator.userAgent.indexOf("Chrome")>=0},ChartInternal.prototype.initZoom=function(){var startEvent,$$=this,d3=$$.d3,config=$$.config;return $$.zoom=d3.zoom().on("start",(function(){if("scroll"===config.zoom_type){var e=d3.event.sourceEvent;e&&"brush"===e.type||(startEvent=e,config.zoom_onzoomstart.call($$.api,e))}})).on("zoom",(function(){if("scroll"===config.zoom_type){var e=d3.event.sourceEvent;e&&"brush"===e.type||($$.redrawForZoom(),config.zoom_onzoom.call($$.api,$$.x.orgDomain()))}})).on("end",(function(){if("scroll"===config.zoom_type){var e=d3.event.sourceEvent;e&&"brush"===e.type||e&&startEvent.clientX===e.clientX&&startEvent.clientY===e.clientY||config.zoom_onzoomend.call($$.api,$$.x.orgDomain())}})),$$.zoom.updateDomain=function(){return d3.event&&d3.event.transform&&$$.x.domain(d3.event.transform.rescaleX($$.subX).domain()),this},$$.zoom.updateExtent=function(){return this.scaleExtent([1,1/0]).translateExtent([[0,0],[$$.width,$$.height]]).extent([[0,0],[$$.width,$$.height]]),this},$$.zoom.update=function(){return this.updateExtent().updateDomain()},$$.zoom.updateExtent()},ChartInternal.prototype.zoomTransform=function(range){var $$=this,s=[$$.x(range[0]),$$.x(range[1])];return $$.d3.zoomIdentity.scale($$.width/(s[1]-s[0])).translate(-s[0],0)},ChartInternal.prototype.initDragZoom=function(){var $$=this,d3=$$.d3,config=$$.config,context=$$.context=$$.svg,brushXPos=$$.margin.left+20.5,brushYPos=$$.margin.top+.5;if("drag"===config.zoom_type&&config.zoom_enabled){var getZoomedDomain=function(selection){return selection&&selection.map((function(x){return $$.x.invert(x)}))},brush=$$.dragZoomBrush=d3.brushX().on("start",(function(){$$.api.unzoom(),$$.svg.select("."+CLASS.dragZoom).classed("disabled",!1),config.zoom_onzoomstart.call($$.api,d3.event.sourceEvent)})).on("brush",(function(){config.zoom_onzoom.call($$.api,getZoomedDomain(d3.event.selection))})).on("end",(function(){if(null!=d3.event.selection){var zoomedDomain=getZoomedDomain(d3.event.selection);config.zoom_disableDefaultBehavior||$$.api.zoom(zoomedDomain),$$.svg.select("."+CLASS.dragZoom).classed("disabled",!0),config.zoom_onzoomend.call($$.api,zoomedDomain)}}));context.append("g").classed(CLASS.dragZoom,!0).attr("clip-path",$$.clipPath).attr("transform","translate("+brushXPos+","+brushYPos+")").call(brush)}},ChartInternal.prototype.getZoomDomain=function(){var $$=this,config=$$.config,d3=$$.d3;return[d3.min([$$.orgXDomain[0],config.zoom_x_min]),d3.max([$$.orgXDomain[1],config.zoom_x_max])]},ChartInternal.prototype.redrawForZoom=function(){var $$=this,d3=$$.d3,config=$$.config,zoom=$$.zoom,x=$$.x;config.zoom_enabled&&0!==$$.filterTargetsToShow($$.data.targets).length&&(zoom.update(),config.zoom_disableDefaultBehavior||($$.isCategorized()&&x.orgDomain()[0]===$$.orgXDomain[0]&&x.domain([$$.orgXDomain[0]-1e-10,x.orgDomain()[1]]),$$.redraw({withTransition:!1,withY:config.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),d3.event.sourceEvent&&"mousemove"===d3.event.sourceEvent.type&&($$.cancelClick=!0)))},c3}()},94:function(__unused_webpack_module,exports){!function(t){"use strict";function n(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function e(t){var e;return 1===t.length&&(e=t,t=function(t,r){return n(e(t),r)}),{left:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}var r=e(n),i=r.right,o=r.left;function a(t,n){return[t,n]}function u(t){return null===t?NaN:+t}function c(t,n){var e,r,i=t.length,o=0,a=-1,c=0,f=0;if(null==n)for(;++a<i;)isNaN(e=u(t[a]))||(f+=(r=e-c)*(e-(c+=r/++o)));else for(;++a<i;)isNaN(e=u(n(t[a],a,t)))||(f+=(r=e-c)*(e-(c+=r/++o)));if(o>1)return f/(o-1)}function f(t,n){var e=c(t,n);return e?Math.sqrt(e):e}function s(t,n){var e,r,i,o=t.length,a=-1;if(null==n){for(;++a<o;)if(null!=(e=t[a])&&e>=e)for(r=i=e;++a<o;)null!=(e=t[a])&&(r>e&&(r=e),i<e&&(i=e))}else for(;++a<o;)if(null!=(e=n(t[a],a,t))&&e>=e)for(r=i=e;++a<o;)null!=(e=n(t[a],a,t))&&(r>e&&(r=e),i<e&&(i=e));return[r,i]}var l=Array.prototype,h=l.slice,d=l.map;function p(t){return function(){return t}}function v(t){return t}function g(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}var y=Math.sqrt(50),_=Math.sqrt(10),b=Math.sqrt(2);function m(t,n,e){var r,i,o,a,u=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=x(t,n,e))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),n=Math.floor(n/a),o=new Array(i=Math.ceil(n-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),n=Math.ceil(n*a),o=new Array(i=Math.ceil(t-n+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o}function x(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=y?10:o>=_?5:o>=b?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=y?10:o>=_?5:o>=b?2:1)}function w(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=y?i*=10:o>=_?i*=5:o>=b&&(i*=2),n<t?-i:i}function M(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function N(t,n,e){if(null==e&&(e=u),r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,o=Math.floor(i),a=+e(t[o],o,t);return a+(+e(t[o+1],o+1,t)-a)*(i-o)}}function A(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&e>r&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&e>r&&(r=e);return r}function S(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);--i>=0;)for(n=(r=t[i]).length;--n>=0;)e[--a]=r[n];return e}function k(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&r>e&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&r>e&&(r=e);return r}function T(t){if(!(i=t.length))return[];for(var n=-1,e=k(t,E),r=new Array(e);++n<e;)for(var i,o=-1,a=r[n]=new Array(i);++o<i;)a[o]=t[o][n];return r}function E(t){return t.length}var C=Array.prototype.slice;function P(t){return t}var z=1,R=2,D=3,q=4,L=1e-6;function U(t){return"translate("+(t+.5)+",0)"}function O(t){return"translate(0,"+(t+.5)+")"}function B(){return!this.__axis}function Y(t,n){var e=[],r=null,i=null,o=6,a=6,u=3,c=t===z||t===q?-1:1,f=t===q||t===R?"x":"y",s=t===z||t===D?U:O;function l(l){var h=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,d=null==i?n.tickFormat?n.tickFormat.apply(n,e):P:i,p=Math.max(o,0)+u,v=n.range(),g=+v[0]+.5,y=+v[v.length-1]+.5,_=(n.bandwidth?function(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(e){return+t(e)+n}}:function(t){return function(n){return+t(n)}})(n.copy()),b=l.selection?l.selection():l,m=b.selectAll(".domain").data([null]),x=b.selectAll(".tick").data(h,n).order(),w=x.exit(),M=x.enter().append("g").attr("class","tick"),N=x.select("line"),A=x.select("text");m=m.merge(m.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(M),N=N.merge(M.append("line").attr("stroke","currentColor").attr(f+"2",c*o)),A=A.merge(M.append("text").attr("fill","currentColor").attr(f,c*p).attr("dy",t===z?"0em":t===D?"0.71em":"0.32em")),l!==b&&(m=m.transition(l),x=x.transition(l),N=N.transition(l),A=A.transition(l),w=w.transition(l).attr("opacity",L).attr("transform",(function(t){return isFinite(t=_(t))?s(t):this.getAttribute("transform")})),M.attr("opacity",L).attr("transform",(function(t){var n=this.parentNode.__axis;return s(n&&isFinite(n=n(t))?n:_(t))}))),w.remove(),m.attr("d",t===q||t==R?a?"M"+c*a+","+g+"H0.5V"+y+"H"+c*a:"M0.5,"+g+"V"+y:a?"M"+g+","+c*a+"V0.5H"+y+"V"+c*a:"M"+g+",0.5H"+y),x.attr("opacity",1).attr("transform",(function(t){return s(_(t))})),N.attr(f+"2",c*o),A.attr(f,c*p).text(d),b.filter(B).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===R?"start":t===q?"end":"middle"),b.each((function(){this.__axis=_}))}return l.scale=function(t){return arguments.length?(n=t,l):n},l.ticks=function(){return e=C.call(arguments),l},l.tickArguments=function(t){return arguments.length?(e=null==t?[]:C.call(t),l):e.slice()},l.tickValues=function(t){return arguments.length?(r=null==t?null:C.call(t),l):r&&r.slice()},l.tickFormat=function(t){return arguments.length?(i=t,l):i},l.tickSize=function(t){return arguments.length?(o=a=+t,l):o},l.tickSizeInner=function(t){return arguments.length?(o=+t,l):o},l.tickSizeOuter=function(t){return arguments.length?(a=+t,l):a},l.tickPadding=function(t){return arguments.length?(u=+t,l):u},l}var F={value:function(){}};function I(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new j(r)}function j(t){this._=t}function H(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function X(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=F,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}j.prototype=I.prototype={constructor:j,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))),a=-1,u=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<u;)if(e=(t=o[a]).type)i[e]=X(i[e],t.name,n);else if(null==n)for(e in i)i[e]=X(i[e],t.name,null);return this}for(;++a<u;)if((e=(t=o[a]).type)&&(e=H(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new j(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var G="http://www.w3.org/1999/xhtml",V={svg:"http://www.w3.org/2000/svg",xhtml:G,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),V.hasOwnProperty(n)?{space:V[n],local:t}:t}function W(t){var n=$(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===G&&n.documentElement.namespaceURI===G?n.createElement(t):n.createElementNS(e,t)}})(n)}function Z(){}function Q(t){return null==t?Z:function(){return this.querySelector(t)}}function J(){return[]}function K(t){return null==t?J:function(){return this.querySelectorAll(t)}}function tt(t){return function(){return this.matches(t)}}function nt(t){return new Array(t.length)}function et(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}et.prototype={constructor:et,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var rt="$";function it(t,n,e,r,i,o){for(var a,u=0,c=n.length,f=o.length;u<f;++u)(a=n[u])?(a.__data__=o[u],r[u]=a):e[u]=new et(t,o[u]);for(;u<c;++u)(a=n[u])&&(i[u]=a)}function ot(t,n,e,r,i,o,a){var u,c,f,s={},l=n.length,h=o.length,d=new Array(l);for(u=0;u<l;++u)(c=n[u])&&(d[u]=f=rt+a.call(c,c.__data__,u,n),f in s?i[u]=c:s[f]=c);for(u=0;u<h;++u)(c=s[f=rt+a.call(t,o[u],u,o)])?(r[u]=c,c.__data__=o[u],s[f]=null):e[u]=new et(t,o[u]);for(u=0;u<l;++u)(c=n[u])&&s[d[u]]===c&&(i[u]=c)}function at(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function ut(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ct(t,n){return t.style.getPropertyValue(n)||ut(t).getComputedStyle(t,null).getPropertyValue(n)}function ft(t){return t.trim().split(/^|\s+/)}function st(t){return t.classList||new lt(t)}function lt(t){this._node=t,this._names=ft(t.getAttribute("class")||"")}function ht(t,n){for(var e=st(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function dt(t,n){for(var e=st(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function pt(){this.textContent=""}function vt(){this.innerHTML=""}function gt(){this.nextSibling&&this.parentNode.appendChild(this)}function yt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _t(){return null}function bt(){var t=this.parentNode;t&&t.removeChild(this)}function mt(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function xt(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}lt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var wt={};function Mt(t,n,e){return t=Nt(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function Nt(n,e,r){return function(i){var o=t.event;t.event=i;try{n.call(this,this.__data__,e,r)}finally{t.event=o}}}function At(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function St(t,n,e){var r=wt.hasOwnProperty(t.type)?Mt:Nt;return function(i,o,a){var u,c=this.__on,f=r(n,o,a);if(c)for(var s=0,l=c.length;s<l;++s)if((u=c[s]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=f,u.capture=e),void(u.value=n);this.addEventListener(t.type,f,e),u={type:t.type,name:t.name,value:n,listener:f,capture:e},c?c.push(u):this.__on=[u]}}function kt(n,e,r,i){var o=t.event;n.sourceEvent=t.event,t.event=n;try{return e.apply(r,i)}finally{t.event=o}}function Tt(t,n,e){var r=ut(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}t.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(wt={mouseenter:"mouseover",mouseleave:"mouseout"}));var Et=[null];function Ct(t,n){this._groups=t,this._parents=n}function Pt(){return new Ct([[document.documentElement]],Et)}function zt(t){return"string"==typeof t?new Ct([[document.querySelector(t)]],[document.documentElement]):new Ct([[t]],Et)}Ct.prototype=Pt.prototype={constructor:Ct,select:function(t){"function"!=typeof t&&(t=Q(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,u=n[i],c=u.length,f=r[i]=new Array(c),s=0;s<c;++s)(o=u[s])&&(a=t.call(o,o.__data__,s,u))&&("__data__"in o&&(a.__data__=o.__data__),f[s]=a);return new Ct(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=K(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,u=n[o],c=u.length,f=0;f<c;++f)(a=u[f])&&(r.push(t.call(a,a.__data__,f,u)),i.push(a));return new Ct(r,i)},filter:function(t){"function"!=typeof t&&(t=tt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,c=r[i]=[],f=0;f<u;++f)(o=a[f])&&t.call(o,o.__data__,f,a)&&c.push(o);return new Ct(r,this._parents)},data:function(t,n){if(!t)return p=new Array(this.size()),s=-1,this.each((function(t){p[++s]=t})),p;var e,r=n?ot:it,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var a=o.length,u=new Array(a),c=new Array(a),f=new Array(a),s=0;s<a;++s){var l=i[s],h=o[s],d=h.length,p=t.call(l,l&&l.__data__,s,i),v=p.length,g=c[s]=new Array(v),y=u[s]=new Array(v);r(l,h,g,y,f[s]=new Array(d),p,n);for(var _,b,m=0,x=0;m<v;++m)if(_=g[m]){for(m>=x&&(x=m+1);!(b=y[x])&&++x<v;);_._next=b||null}}return(u=new Ct(u,i))._enter=c,u._exit=f,u},enter:function(){return new Ct(this._enter||this._groups.map(nt),this._parents)},exit:function(){return new Ct(this._exit||this._groups.map(nt),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,f=n[u],s=e[u],l=f.length,h=a[u]=new Array(l),d=0;d<l;++d)(c=f[d]||s[d])&&(h[d]=c);for(;u<r;++u)a[u]=n[u];return new Ct(a,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=at);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,u=e[o],c=u.length,f=i[o]=new Array(c),s=0;s<c;++s)(a=u[s])&&(f[s]=a);f.sort(n)}return new Ct(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each((function(){t[++n]=this})),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=$(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):ct(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=ft(t+"");if(arguments.length<2){for(var r=st(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?ht:dt)(this,t)}}:n?function(t){return function(){ht(this,t)}}:function(t){return function(){dt(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?pt:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?vt:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(gt)},lower:function(){return this.each(yt)},append:function(t){var n="function"==typeof t?t:W(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:W(t),r=null==n?_t:"function"==typeof n?n:Q(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(bt)},clone:function(t){return this.select(t?xt:mt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(u=n?St:At,null==e&&(e=!1),r=0;r<a;++r)this.each(u(o[r],n,e));return this}var u=this.node().__on;if(u)for(var c,f=0,s=u.length;f<s;++f)for(r=0,c=u[f];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return Tt(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return Tt(this,t,n)}})(t,n))}};var Rt=0;function Dt(){return new qt}function qt(){this._="@"+(++Rt).toString(36)}function Lt(){for(var n,e=t.event;n=e.sourceEvent;)e=n;return e}function Ut(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}function Ot(t){var n=Lt();return n.changedTouches&&(n=n.changedTouches[0]),Ut(t,n)}function Bt(t,n,e){arguments.length<3&&(e=n,n=Lt().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return Ut(t,r);return null}function Yt(){t.event.stopImmediatePropagation()}function Ft(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function It(t){var n=t.document.documentElement,e=zt(t).on("dragstart.drag",Ft,!0);"onselectstart"in n?e.on("selectstart.drag",Ft,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function jt(t,n){var e=t.document.documentElement,r=zt(t).on("dragstart.drag",null);n&&(r.on("click.drag",Ft,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function Ht(t){return function(){return t}}function Xt(t,n,e,r,i,o,a,u,c,f){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=c,this._=f}function Gt(){return!t.event.button}function Vt(){return this.parentNode}function $t(n){return null==n?{x:t.event.x,y:t.event.y}:n}function Wt(){return"ontouchstart"in this}function Zt(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Qt(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Jt(){}qt.prototype=Dt.prototype={constructor:qt,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},Xt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Kt="\\s*([+-]?\\d+)\\s*",tn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",nn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",en=/^#([0-9a-f]{3})$/,rn=/^#([0-9a-f]{6})$/,on=new RegExp("^rgb\\("+[Kt,Kt,Kt]+"\\)$"),an=new RegExp("^rgb\\("+[nn,nn,nn]+"\\)$"),un=new RegExp("^rgba\\("+[Kt,Kt,Kt,tn]+"\\)$"),cn=new RegExp("^rgba\\("+[nn,nn,nn,tn]+"\\)$"),fn=new RegExp("^hsl\\("+[tn,nn,nn]+"\\)$"),sn=new RegExp("^hsla\\("+[tn,nn,nn,tn]+"\\)$"),ln={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hn(t){var n;return t=(t+"").trim().toLowerCase(),(n=en.exec(t))?new yn((n=parseInt(n[1],16))>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):(n=rn.exec(t))?dn(parseInt(n[1],16)):(n=on.exec(t))?new yn(n[1],n[2],n[3],1):(n=an.exec(t))?new yn(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=un.exec(t))?pn(n[1],n[2],n[3],n[4]):(n=cn.exec(t))?pn(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=fn.exec(t))?bn(n[1],n[2]/100,n[3]/100,1):(n=sn.exec(t))?bn(n[1],n[2]/100,n[3]/100,n[4]):ln.hasOwnProperty(t)?dn(ln[t]):"transparent"===t?new yn(NaN,NaN,NaN,0):null}function dn(t){return new yn(t>>16&255,t>>8&255,255&t,1)}function pn(t,n,e,r){return r<=0&&(t=n=e=NaN),new yn(t,n,e,r)}function vn(t){return t instanceof Jt||(t=hn(t)),t?new yn((t=t.rgb()).r,t.g,t.b,t.opacity):new yn}function gn(t,n,e,r){return 1===arguments.length?vn(t):new yn(t,n,e,null==r?1:r)}function yn(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function _n(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function bn(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new xn(t,n,e,r)}function mn(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof xn)return new xn(t.h,t.s,t.l,t.opacity);if(t instanceof Jt||(t=hn(t)),!t)return new xn;if(t instanceof xn)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,u=o-i,c=(o+i)/2;return u?(a=n===o?(e-r)/u+6*(e<r):e===o?(r-n)/u+2:(n-e)/u+4,u/=c<.5?o+i:2-o-i,a*=60):u=c>0&&c<1?0:a,new xn(a,u,c,t.opacity)}(t):new xn(t,n,e,null==r?1:r)}function xn(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function wn(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}Zt(Jt,hn,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Zt(yn,gn,Qt(Jt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new yn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new yn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+_n(this.r)+_n(this.g)+_n(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Zt(xn,mn,Qt(Jt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new xn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new xn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new yn(wn(t>=240?t-240:t+120,i,r),wn(t,i,r),wn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Mn=Math.PI/180,Nn=180/Math.PI,An=.96422,Sn=1,kn=.82521,Tn=4/29,En=6/29,Cn=3*En*En,Pn=En*En*En;function zn(t){if(t instanceof Dn)return new Dn(t.l,t.a,t.b,t.opacity);if(t instanceof Fn){if(isNaN(t.h))return new Dn(t.l,0,0,t.opacity);var n=t.h*Mn;return new Dn(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof yn||(t=vn(t));var e,r,i=On(t.r),o=On(t.g),a=On(t.b),u=qn((.2225045*i+.7168786*o+.0606169*a)/Sn);return i===o&&o===a?e=r=u:(e=qn((.4360747*i+.3850649*o+.1430804*a)/An),r=qn((.0139322*i+.0971045*o+.7141733*a)/kn)),new Dn(116*u-16,500*(e-u),200*(u-r),t.opacity)}function Rn(t,n,e,r){return 1===arguments.length?zn(t):new Dn(t,n,e,null==r?1:r)}function Dn(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function qn(t){return t>Pn?Math.pow(t,1/3):t/Cn+Tn}function Ln(t){return t>En?t*t*t:Cn*(t-Tn)}function Un(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function On(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Bn(t){if(t instanceof Fn)return new Fn(t.h,t.c,t.l,t.opacity);if(t instanceof Dn||(t=zn(t)),0===t.a&&0===t.b)return new Fn(NaN,0,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Nn;return new Fn(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Yn(t,n,e,r){return 1===arguments.length?Bn(t):new Fn(t,n,e,null==r?1:r)}function Fn(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}Zt(Dn,Rn,Qt(Jt,{brighter:function(t){return new Dn(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Dn(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new yn(Un(3.1338561*(n=An*Ln(n))-1.6168667*(t=Sn*Ln(t))-.4906146*(e=kn*Ln(e))),Un(-.9787684*n+1.9161415*t+.033454*e),Un(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),Zt(Fn,Yn,Qt(Jt,{brighter:function(t){return new Fn(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Fn(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return zn(this).rgb()}}));var In=-.14861,jn=1.78277,Hn=-.29227,Xn=-.90649,Gn=1.97294,Vn=Gn*Xn,$n=Gn*jn,Wn=jn*Hn-Xn*In;function Zn(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Qn)return new Qn(t.h,t.s,t.l,t.opacity);t instanceof yn||(t=vn(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(Wn*r+Vn*n-$n*e)/(Wn+Vn-$n),o=r-i,a=(Gn*(e-i)-Hn*o)/Xn,u=Math.sqrt(a*a+o*o)/(Gn*i*(1-i)),c=u?Math.atan2(a,o)*Nn-120:NaN;return new Qn(c<0?c+360:c,u,i,t.opacity)}(t):new Qn(t,n,e,null==r?1:r)}function Qn(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Jn(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}function Kn(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,u=r<n-1?t[r+2]:2*o-i;return Jn((e-r/n)*n,a,i,o,u)}}function te(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],a=t[(r+1)%n],u=t[(r+2)%n];return Jn((e-r/n)*n,i,o,a,u)}}function ne(t){return function(){return t}}function ee(t,n){return function(e){return t+e*n}}function re(t,n){var e=n-t;return e?ee(t,e>180||e<-180?e-360*Math.round(e/360):e):ne(isNaN(t)?n:t)}function ie(t){return 1==(t=+t)?oe:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):ne(isNaN(n)?e:n)}}function oe(t,n){var e=n-t;return e?ee(t,e):ne(isNaN(t)?n:t)}Zt(Qn,Zn,Qt(Jt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Qn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Qn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Mn,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new yn(255*(n+e*(In*r+jn*i)),255*(n+e*(Hn*r+Xn*i)),255*(n+e*(Gn*r)),this.opacity)}}));var ae=function t(n){var e=ie(n);function r(t,n){var r=e((t=gn(t)).r,(n=gn(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=oe(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function ue(t){return function(n){var e,r,i=n.length,o=new Array(i),a=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=gn(n[e]),o[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return o=t(o),a=t(a),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=u(t),r+""}}}var ce=ue(Kn),fe=ue(te);function se(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=ye(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}function le(t,n){var e=new Date;return n-=t=+t,function(r){return e.setTime(t+n*r),e}}function he(t,n){return n-=t=+t,function(e){return t+n*e}}function de(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=ye(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var pe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ve=new RegExp(pe.source,"g");function ge(t,n){var e,r,i,o=pe.lastIndex=ve.lastIndex=0,a=-1,u=[],c=[];for(t+="",n+="";(e=pe.exec(t))&&(r=ve.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:he(e,r)})),o=ve.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function(t){return function(n){return t(n)+""}}(c[0].x):function(t){return function(){return t}}(n):(n=c.length,function(t){for(var e,r=0;r<n;++r)u[(e=c[r]).i]=e.x(t);return u.join("")})}function ye(t,n){var e,r=typeof n;return null==n||"boolean"===r?ne(n):("number"===r?he:"string"===r?(e=hn(n))?(n=e,ae):ge:n instanceof hn?ae:n instanceof Date?le:Array.isArray(n)?se:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?de:he)(t,n)}function _e(t,n){return n-=t=+t,function(e){return Math.round(t+n*e)}}var be,me,xe,we,Me=180/Math.PI,Ne={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ae(t,n,e,r,i,o){var a,u,c;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,c/=u),t*r<n*e&&(t=-t,n=-n,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Me,skewX:Math.atan(c)*Me,scaleX:a,scaleY:u}}function Se(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],c=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var c=a.push("translate(",null,n,null,e);u.push({i:c-4,x:he(t,i)},{i:c-2,x:he(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,u,c),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:he(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,u,c),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:he(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,u,c),function(t,n,e,r,o,a){if(t!==e||n!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:he(t,e)},{i:u-2,x:he(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,c),o=a=null,function(t){for(var n,e=-1,r=c.length;++e<r;)u[(n=c[e]).i]=n.x(t);return u.join("")}}}var ke=Se((function(t){return"none"===t?Ne:(be||(be=document.createElement("DIV"),me=document.documentElement,xe=document.defaultView),be.style.transform=t,t=xe.getComputedStyle(me.appendChild(be),null).getPropertyValue("transform"),me.removeChild(be),Ae(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Te=Se((function(t){return null==t?Ne:(we||(we=document.createElementNS("http://www.w3.org/2000/svg","g")),we.setAttribute("transform",t),(t=we.transform.baseVal.consolidate())?Ae((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ne)}),", ",")",")"),Ee=Math.SQRT2,Ce=2,Pe=4,ze=1e-12;function Re(t){return((t=Math.exp(t))+1/t)/2}function De(t,n){var e,r,i=t[0],o=t[1],a=t[2],u=n[0],c=n[1],f=n[2],s=u-i,l=c-o,h=s*s+l*l;if(h<ze)r=Math.log(f/a)/Ee,e=function(t){return[i+t*s,o+t*l,a*Math.exp(Ee*t*r)]};else{var d=Math.sqrt(h),p=(f*f-a*a+Pe*h)/(2*a*Ce*d),v=(f*f-a*a-Pe*h)/(2*f*Ce*d),g=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(v*v+1)-v);r=(y-g)/Ee,e=function(t){var n,e=t*r,u=Re(g),c=a/(Ce*d)*(u*(n=Ee*e+g,((n=Math.exp(2*n))-1)/(n+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+c*s,o+c*l,a*u/Re(Ee*e+g)]}}return e.duration=1e3*r,e}function qe(t){return function(n,e){var r=t((n=mn(n)).h,(e=mn(e)).h),i=oe(n.s,e.s),o=oe(n.l,e.l),a=oe(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=o(t),n.opacity=a(t),n+""}}}var Le=qe(re),Ue=qe(oe);function Oe(t){return function(n,e){var r=t((n=Yn(n)).h,(e=Yn(e)).h),i=oe(n.c,e.c),o=oe(n.l,e.l),a=oe(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=o(t),n.opacity=a(t),n+""}}}var Be=Oe(re),Ye=Oe(oe);function Fe(t){return function n(e){function r(n,r){var i=t((n=Zn(n)).h,(r=Zn(r)).h),o=oe(n.s,r.s),a=oe(n.l,r.l),u=oe(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(Math.pow(t,e)),n.opacity=u(t),n+""}}return e=+e,r.gamma=n,r}(1)}var He,Xe,Ie=Fe(re),je=Fe(oe),Ge=0,Ve=0,$e=0,We=1e3,Ze=0,Qe=0,Je=0,Ke="object"==typeof performance&&performance.now?performance:Date,tr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function nr(){return Qe||(tr(er),Qe=Ke.now()+Je)}function er(){Qe=0}function rr(){this._call=this._time=this._next=null}function ir(t,n,e){var r=new rr;return r.restart(t,n,e),r}function or(){nr(),++Ge;for(var t,n=He;n;)(t=Qe-n._time)>=0&&n._call.call(null,t),n=n._next;--Ge}function ar(){Qe=(Ze=Ke.now())+Je,Ge=Ve=0;try{or()}finally{Ge=0,function(){for(var t,n,e=He,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:He=n);Xe=t,cr(r)}(),Qe=0}}function ur(){var t=Ke.now(),n=t-Ze;n>We&&(Je-=n,Ze=t)}function cr(t){Ge||(Ve&&(Ve=clearTimeout(Ve)),t-Qe>24?(t<1/0&&(Ve=setTimeout(ar,t-Ke.now()-Je)),$e&&($e=clearInterval($e))):($e||(Ze=Ke.now(),$e=setInterval(ur,We)),Ge=1,tr(ar)))}function fr(t,n,e){var r=new rr;return n=null==n?0:+n,r.restart((function(e){r.stop(),t(e+n)}),n,e),r}rr.prototype=ir.prototype={constructor:rr,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?nr():+e)+(null==n?0:+n),this._next||Xe===this||(Xe?Xe._next=this:He=this,Xe=this),this._call=t,this._time=e,cr()},stop:function(){this._call&&(this._call=null,this._time=1/0,cr())}};var sr=I("start","end","cancel","interrupt"),lr=[],hr=0,dr=1,pr=2,vr=3,gr=4,yr=5,_r=6;function br(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(c){var f,s,l,h;if(e.state!==dr)return u();for(f in i)if((h=i[f]).name===e.name){if(h.state===vr)return fr(o);h.state===gr?(h.state=_r,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[f]):+f<n&&(h.state=_r,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[f])}if(fr((function(){e.state===vr&&(e.state=gr,e.timer.restart(a,e.delay,e.time),a(c))})),e.state=pr,e.on.call("start",t,t.__data__,e.index,e.group),e.state===pr){for(e.state=vr,r=new Array(l=e.tween.length),f=0,s=-1;f<l;++f)(h=e.tween[f].value.call(t,t.__data__,e.index,e.group))&&(r[++s]=h);r.length=s+1}}function a(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=yr,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);e.state===yr&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){for(var r in e.state=_r,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=ir((function(t){e.state=dr,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)}),0,e.time)}(t,e,{name:n,index:r,group:i,on:sr,tween:lr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:hr})}function mr(t,n){var e=wr(t,n);if(e.state>hr)throw new Error("too late; already scheduled");return e}function xr(t,n){var e=wr(t,n);if(e.state>vr)throw new Error("too late; already running");return e}function wr(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Mr(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>pr&&e.state<yr,e.state=_r,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}function Nr(t,n,e){var r=t._id;return t.each((function(){var t=xr(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return wr(t,r).value[n]}}function Ar(t,n){var e;return("number"==typeof n?he:n instanceof hn?ae:(e=hn(n))?(n=e,ae):ge)(t,n)}var Sr=Pt.prototype.constructor;function kr(t){return function(){this.style.removeProperty(t)}}var Tr=0;function Er(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Cr(t){return Pt().transition(t)}function Pr(){return++Tr}var zr=Pt.prototype;function Rr(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Dr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Er.prototype=Cr.prototype={constructor:Er,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Q(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,c,f=r[a],s=f.length,l=o[a]=new Array(s),h=0;h<s;++h)(u=f[h])&&(c=t.call(u,u.__data__,h,f))&&("__data__"in u&&(c.__data__=u.__data__),l[h]=c,br(l[h],n,e,h,l,wr(u,e)));return new Er(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=K(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var c,f=r[u],s=f.length,l=0;l<s;++l)if(c=f[l]){for(var h,d=t.call(c,c.__data__,l,f),p=wr(c,e),v=0,g=d.length;v<g;++v)(h=d[v])&&br(h,n,e,v,d,p);o.push(d),a.push(c)}return new Er(o,a,n,e)},filter:function(t){"function"!=typeof t&&(t=tt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,c=r[i]=[],f=0;f<u;++f)(o=a[f])&&t.call(o,o.__data__,f,a)&&c.push(o);return new Er(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,f=n[u],s=e[u],l=f.length,h=a[u]=new Array(l),d=0;d<l;++d)(c=f[d]||s[d])&&(h[d]=c);for(;u<r;++u)a[u]=n[u];return new Er(a,this._parents,this._name,this._id)},selection:function(){return new Sr(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=Pr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,f=0;f<c;++f)if(a=u[f]){var s=wr(a,n);br(a,t,e,f,u,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new Er(r,this._parents,t,e)},call:zr.call,nodes:zr.nodes,node:zr.node,size:zr.size,empty:zr.empty,each:zr.each,on:function(t,n){var e=this._id;return arguments.length<2?wr(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}(n)?mr:xr;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(n,e),a.on=i}}(e,t,n))},attr:function(t,n){var e=$(t),r="transform"===e?Te:Ar;return this.attrTween(t,"function"==typeof n?(e.local?function(t,n,e){var r,i,o;return function(){var a,u,c=e(this);if(null!=c)return(a=this.getAttributeNS(t.space,t.local))===(u=c+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,c));this.removeAttributeNS(t.space,t.local)}}:function(t,n,e){var r,i,o;return function(){var a,u,c=e(this);if(null!=c)return(a=this.getAttribute(t))===(u=c+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,c));this.removeAttribute(t)}})(e,r,Nr(this,"attr."+t,n)):null==n?(e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(e):(e.local?function(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=n(r=a,e)}}:function(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=n(r=a,e)}})(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=$(t);return this.tween(e,(r.local?function(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttributeNS(t.space,t.local,n(e))}}(t,i)),e}return i._value=n,i}:function(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttribute(t,n(e))}}(t,i)),e}return i._value=n,i})(r,n))},style:function(t,n,e){var r="transform"==(t+="")?ke:Ar;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=ct(this,t),a=(this.style.removeProperty(t),ct(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}(t,r)).on("end.style."+t,kr(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,o;return function(){var a=ct(this,t),u=e(this),c=u+"";return null==u&&(this.style.removeProperty(t),c=u=ct(this,t)),a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,u))}}(t,r,Nr(this,"style."+t,n))).each(function(t,n){var e,r,i,o,a="style."+n,u="end."+a;return function(){var c=xr(this,t),f=c.on,s=null==c.value[a]?o||(o=kr(n)):void 0;f===e&&i===s||(r=(e=f).copy()).on(u,i=s),c.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,o=e+"";return function(){var a=ct(this,t);return a===o?null:a===r?i:i=n(r=a,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,n,e){return function(r){this.style.setProperty(t,n(r),e)}}(t,o,e)),r}return o._value=n,o}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(Nr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",(t=this._id,function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}));var t},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=wr(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?function(t,n){var e,r;return function(){var i=xr(this,t),o=i.tween;if(o!==e)for(var a=0,u=(r=e=o).length;a<u;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=xr(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:n,value:e},c=0,f=i.length;c<f;++c)if(i[c].name===n){i[c]=u;break}c===f&&i.push(u)}o.tween=i}})(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){mr(this,t).delay=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){mr(this,t).delay=n}})(n,t)):wr(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){xr(this,t).duration=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){xr(this,t).duration=n}})(n,t)):wr(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){xr(this,t).ease=n}}(n,t)):wr(this.node(),n).ease},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise((function(o,a){var u={value:a},c={value:function(){0==--i&&o()}};e.each((function(){var e=xr(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(u),n._.interrupt.push(u),n._.end.push(c)),e.on=n}))}))}};var qr=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(3),Lr=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(3),Ur=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(3),Or=Math.PI,Br=Or/2;function Yr(t){return(1-Math.cos(Or*t))/2}function Fr(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Ir(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var jr=4/11,Hr=6/11,Xr=8/11,Gr=.75,Vr=9/11,$r=10/11,Wr=.9375,Zr=21/22,Qr=63/64,Jr=1/jr/jr;function Kr(t){return(t=+t)<jr?Jr*t*t:t<Xr?Jr*(t-=Hr)*t+Gr:t<$r?Jr*(t-=Vr)*t+Wr:Jr*(t-=Zr)*t+Qr}var ti=function t(n){function e(t){return t*t*((n+1)*t-n)}return n=+n,e.overshoot=t,e}(1.70158),ni=function t(n){function e(t){return--t*t*((n+1)*t+n)+1}return n=+n,e.overshoot=t,e}(1.70158),ei=function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(1.70158),ri=2*Math.PI,ii=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=ri);function i(t){return n*Math.pow(2,10*--t)*Math.sin((r-t)/e)}return i.amplitude=function(n){return t(n,e*ri)},i.period=function(e){return t(n,e)},i}(1,.3),oi=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=ri);function i(t){return 1-n*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/e)}return i.amplitude=function(n){return t(n,e*ri)},i.period=function(e){return t(n,e)},i}(1,.3),ai=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=ri);function i(t){return((t=2*t-1)<0?n*Math.pow(2,10*t)*Math.sin((r-t)/e):2-n*Math.pow(2,-10*t)*Math.sin((r+t)/e))/2}return i.amplitude=function(n){return t(n,e*ri)},i.period=function(e){return t(n,e)},i}(1,.3),ui={time:null,delay:0,duration:250,ease:Dr};function ci(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return ui.time=nr(),ui;return e}Pt.prototype.interrupt=function(t){return this.each((function(){Mr(this,t)}))},Pt.prototype.transition=function(t){var n,e;t instanceof Er?(n=t._id,t=t._name):(n=Pr(),(e=ui).time=nr(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,f=0;f<c;++f)(a=u[f])&&br(a,t,n,f,u,e||ci(a,n));return new Er(r,this._parents,t,n)};var fi=[null];function si(t){return function(){return t}}function li(t,n,e){this.target=t,this.type=n,this.selection=e}function hi(){t.event.stopImmediatePropagation()}function di(){t.event.preventDefault(),t.event.stopImmediatePropagation()}var pi={name:"drag"},vi={name:"space"},gi={name:"handle"},yi={name:"center"},_i={name:"x",handles:["e","w"].map(Si),input:function(t,n){return t&&[[t[0],n[0][1]],[t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},bi={name:"y",handles:["n","s"].map(Si),input:function(t,n){return t&&[[n[0][0],t[0]],[n[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},mi={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Si),input:function(t){return t},output:function(t){return t}},xi={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},wi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Mi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ni={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ai={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Si(t){return{type:t}}function ki(){return!t.event.button}function Ti(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ei(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ci(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Pi(n){var e,r=Ti,i=ki,o=I(u,"start","brush","end"),a=6;function u(t){var e=t.property("__brush",h).selectAll(".overlay").data([Si("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",xi.overlay).merge(e).each((function(){var t=Ei(this).extent;zt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),t.selectAll(".selection").data([Si("selection")]).enter().append("rect").attr("class","selection").attr("cursor",xi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(n.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return xi[t.type]})),t.each(c).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",l)}function c(){var t=zt(this),n=Ei(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?n[1][0]-a/2:n[0][0]-a/2})).attr("y",(function(t){return"s"===t.type[0]?n[1][1]-a/2:n[0][1]-a/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+a:a})).attr("height",(function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+a:a}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(t,n){return t.__brush.emitter||new s(t,n)}function s(t,n){this.that=t,this.args=n,this.state=t.__brush,this.active=0}function l(){if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return di()}else if(e)return;if(i.apply(this,arguments)){var r,o,a,u,s,l,h,d,p,v,g,y,_,b=this,m=t.event.target.__data__.type,x="selection"===(t.event.metaKey?m="overlay":m)?pi:t.event.altKey?yi:gi,w=n===bi?null:Ni[m],M=n===_i?null:Ai[m],N=Ei(b),A=N.extent,S=N.selection,k=A[0][0],T=A[0][1],E=A[1][0],C=A[1][1],P=w&&M&&t.event.shiftKey,z=Ot(b),R=z,D=f(b,arguments).beforestart();"overlay"===m?N.selection=S=[[r=n===bi?k:z[0],a=n===_i?T:z[1]],[s=n===bi?E:r,h=n===_i?C:a]]:(r=S[0][0],a=S[0][1],s=S[1][0],h=S[1][1]),o=r,u=a,l=s,d=h;var q=zt(b).attr("pointer-events","none"),L=q.selectAll(".overlay").attr("cursor",xi[m]);if(t.event.touches)q.on("touchmove.brush",O,!0).on("touchend.brush touchcancel.brush",Y,!0);else{var U=zt(t.event.view).on("keydown.brush",(function(){switch(t.event.keyCode){case 16:P=w&&M;break;case 18:x===gi&&(w&&(s=l-p*w,r=o+p*w),M&&(h=d-v*M,a=u+v*M),x=yi,B());break;case 32:x!==gi&&x!==yi||(w<0?s=l-p:w>0&&(r=o-p),M<0?h=d-v:M>0&&(a=u-v),x=vi,L.attr("cursor",xi.selection),B());break;default:return}di()}),!0).on("keyup.brush",(function(){switch(t.event.keyCode){case 16:P&&(y=_=P=!1,B());break;case 18:x===yi&&(w<0?s=l:w>0&&(r=o),M<0?h=d:M>0&&(a=u),x=gi,B());break;case 32:x===vi&&(t.event.altKey?(w&&(s=l-p*w,r=o+p*w),M&&(h=d-v*M,a=u+v*M),x=yi):(w<0?s=l:w>0&&(r=o),M<0?h=d:M>0&&(a=u),x=gi),L.attr("cursor",xi[m]),B());break;default:return}di()}),!0).on("mousemove.brush",O,!0).on("mouseup.brush",Y,!0);It(t.event.view)}hi(),Mr(b),c.call(b),D.start()}function O(){var t=Ot(b);!P||y||_||(Math.abs(t[0]-R[0])>Math.abs(t[1]-R[1])?_=!0:y=!0),R=t,g=!0,di(),B()}function B(){var t;switch(p=R[0]-z[0],v=R[1]-z[1],x){case vi:case pi:w&&(p=Math.max(k-r,Math.min(E-s,p)),o=r+p,l=s+p),M&&(v=Math.max(T-a,Math.min(C-h,v)),u=a+v,d=h+v);break;case gi:w<0?(p=Math.max(k-r,Math.min(E-r,p)),o=r+p,l=s):w>0&&(p=Math.max(k-s,Math.min(E-s,p)),o=r,l=s+p),M<0?(v=Math.max(T-a,Math.min(C-a,v)),u=a+v,d=h):M>0&&(v=Math.max(T-h,Math.min(C-h,v)),u=a,d=h+v);break;case yi:w&&(o=Math.max(k,Math.min(E,r-p*w)),l=Math.max(k,Math.min(E,s+p*w))),M&&(u=Math.max(T,Math.min(C,a-v*M)),d=Math.max(T,Math.min(C,h+v*M)))}l<o&&(w*=-1,t=r,r=s,s=t,t=o,o=l,l=t,m in wi&&L.attr("cursor",xi[m=wi[m]])),d<u&&(M*=-1,t=a,a=h,h=t,t=u,u=d,d=t,m in Mi&&L.attr("cursor",xi[m=Mi[m]])),N.selection&&(S=N.selection),y&&(o=S[0][0],l=S[1][0]),_&&(u=S[0][1],d=S[1][1]),S[0][0]===o&&S[0][1]===u&&S[1][0]===l&&S[1][1]===d||(N.selection=[[o,u],[l,d]],c.call(b),D.brush())}function Y(){if(hi(),t.event.touches){if(t.event.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500),q.on("touchmove.brush touchend.brush touchcancel.brush",null)}else jt(t.event.view,g),U.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);q.attr("pointer-events","all"),L.attr("cursor",xi.overlay),N.selection&&(S=N.selection),Ci(S)&&(N.selection=null,c.call(b)),D.end()}}function h(){var t=this.__brush||{selection:null};return t.extent=r.apply(this,arguments),t.dim=n,t}return u.move=function(t,e){t.selection?t.on("start.brush",(function(){f(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){f(this,arguments).end()})).tween("brush",(function(){var t=this,r=t.__brush,i=f(t,arguments),o=r.selection,a=n.input("function"==typeof e?e.apply(this,arguments):e,r.extent),u=ye(o,a);function s(n){r.selection=1===n&&Ci(a)?null:u(n),c.call(t),i.brush()}return o&&a?s:s(1)})):t.each((function(){var t=arguments,r=this.__brush,i=n.input("function"==typeof e?e.apply(this,t):e,r.extent),o=f(this,t).beforestart();Mr(this),r.selection=null==i||Ci(i)?null:i,c.call(this),o.start().brush().end()}))},s.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){kt(new li(u,t,n.output(this.state.selection)),o.apply,o,[t,this.that,this.args])}},u.extent=function(t){return arguments.length?(r="function"==typeof t?t:si([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),u):r},u.filter=function(t){return arguments.length?(i="function"==typeof t?t:si(!!t),u):i},u.handleSize=function(t){return arguments.length?(a=+t,u):a},u.on=function(){var t=o.on.apply(o,arguments);return t===o?u:t},u}var zi=Math.cos,Ri=Math.sin,Di=Math.PI,qi=Di/2,Li=2*Di,Ui=Math.max,Oi=Array.prototype.slice;function Bi(t){return function(){return t}}var Yi=Math.PI,Fi=2*Yi,Ii=Fi-1e-6;function ji(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Hi(){return new ji}function Xi(t){return t.source}function Gi(t){return t.target}function Vi(t){return t.radius}function $i(t){return t.startAngle}function Wi(t){return t.endAngle}function Zi(){}function Qi(t,n){var e=new Zi;if(t instanceof Zi)t.each((function(t,n){e.set(n,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var a in t)e.set(a,t[a]);return e}function Ji(){return{}}function Ki(t,n,e){t[n]=e}function to(){return Qi()}function no(t,n,e){t.set(n,e)}function eo(){}ji.prototype=Hi.prototype={constructor:ji,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,a=this._y1,u=e-t,c=r-n,f=o-t,s=a-n,l=f*f+s*s;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(l>1e-6)if(Math.abs(s*u-c*f)>1e-6&&i){var h=e-o,d=r-a,p=u*u+c*c,v=h*h+d*d,g=Math.sqrt(p),y=Math.sqrt(l),_=i*Math.tan((Yi-Math.acos((p+l-v)/(2*g*y)))/2),b=_/y,m=_/g;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*f)+","+(n+b*s)),this._+="A"+i+","+i+",0,0,"+ +(s*h>f*d)+","+(this._x1=t+m*u)+","+(this._y1=n+m*c)}else this._+="L"+(this._x1=t)+","+(this._y1=n)},arc:function(t,n,e,r,i,o){t=+t,n=+n;var a=(e=+e)*Math.cos(r),u=e*Math.sin(r),c=t+a,f=n+u,s=1^o,l=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+c+","+f:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+c+","+f),e&&(l<0&&(l=l%Fi+Fi),l>Ii?this._+="A"+e+","+e+",0,1,"+s+","+(t-a)+","+(n-u)+"A"+e+","+e+",0,1,"+s+","+(this._x1=c)+","+(this._y1=f):l>1e-6&&(this._+="A"+e+","+e+",0,"+ +(l>=Yi)+","+s+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}},Zi.prototype=Qi.prototype={constructor:Zi,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,n){return this["$"+t]=n,this},remove:function(t){var n="$"+t;return n in this&&delete this[n]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)"$"===n[0]&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)"$"===n[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var n in this)"$"===n[0]&&t(this[n],n.slice(1),this)}};var ro=Qi.prototype;function io(t,n){var e=new eo;if(t instanceof eo)t.each((function(t){e.add(t)}));else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}eo.prototype=io.prototype={constructor:eo,has:ro.has,add:function(t){return this["$"+(t+="")]=t,this},remove:ro.remove,clear:ro.clear,values:ro.keys,size:ro.size,empty:ro.empty,each:ro.each};var oo=Array.prototype.slice;function ao(t,n){return t-n}function uo(t){return function(){return t}}function co(t,n){for(var e,r=-1,i=n.length;++r<i;)if(e=fo(t,n[r]))return e;return 0}function fo(t,n){for(var e=n[0],r=n[1],i=-1,o=0,a=t.length,u=a-1;o<a;u=o++){var c=t[o],f=c[0],s=c[1],l=t[u],h=l[0],d=l[1];if(so(c,l,n))return 0;s>r!=d>r&&e<(h-f)*(r-s)/(d-s)+f&&(i=-i)}return i}function so(t,n,e){var r,i,o,a;return function(t,n,e){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])}(t,n,e)&&(i=t[r=+(t[0]===n[0])],o=e[r],a=n[r],i<=o&&o<=a||a<=o&&o<=i)}function lo(){}var ho=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function po(){var t=1,n=1,e=M,r=u;function i(t){var n=e(t);if(Array.isArray(n))n=n.slice().sort(ao);else{var r=s(t),i=r[0],a=r[1];n=w(i,a,n),n=g(Math.floor(i/n)*n,Math.floor(a/n)*n,n)}return n.map((function(n){return o(t,n)}))}function o(e,i){var o=[],u=[];return function(e,r,i){var o,u,c,f,s,l,h=new Array,d=new Array;for(o=u=-1,f=e[0]>=r,ho[f<<1].forEach(p);++o<t-1;)c=f,f=e[o+1]>=r,ho[c|f<<1].forEach(p);for(ho[f<<0].forEach(p);++u<n-1;){for(o=-1,f=e[u*t+t]>=r,s=e[u*t]>=r,ho[f<<1|s<<2].forEach(p);++o<t-1;)c=f,f=e[u*t+t+o+1]>=r,l=s,s=e[u*t+o+1]>=r,ho[c|f<<1|s<<2|l<<3].forEach(p);ho[f|s<<3].forEach(p)}for(o=-1,s=e[u*t]>=r,ho[s<<2].forEach(p);++o<t-1;)l=s,s=e[u*t+o+1]>=r,ho[s<<2|l<<3].forEach(p);function p(t){var n,e,r=[t[0][0]+o,t[0][1]+u],c=[t[1][0]+o,t[1][1]+u],f=a(r),s=a(c);(n=d[f])?(e=h[s])?(delete d[n.end],delete h[e.start],n===e?(n.ring.push(c),i(n.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[n.end],n.ring.push(c),d[n.end=s]=n):(n=h[s])?(e=d[f])?(delete h[n.start],delete d[e.end],n===e?(n.ring.push(c),i(n.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete h[n.start],n.ring.unshift(r),h[n.start=f]=n):h[f]=d[s]={start:f,end:s,ring:[r,c]}}ho[s<<3].forEach(p)}(e,i,(function(t){r(t,e,i),function(t){for(var n=0,e=t.length,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r}(t)>0?o.push([t]):u.push(t)})),u.forEach((function(t){for(var n,e=0,r=o.length;e<r;++e)if(-1!==co((n=o[e])[0],t))return void n.push(t)})),{type:"MultiPolygon",value:i,coordinates:o}}function a(n){return 2*n[0]+n[1]*(t+1)*4}function u(e,r,i){e.forEach((function(e){var o,a=e[0],u=e[1],c=0|a,f=0|u,s=r[f*t+c];a>0&&a<t&&c===a&&(o=r[f*t+c-1],e[0]=a+(i-o)/(s-o)-.5),u>0&&u<n&&f===u&&(o=r[(f-1)*t+c],e[1]=u+(i-o)/(s-o)-.5)}))}return i.contour=o,i.size=function(e){if(!arguments.length)return[t,n];var r=Math.ceil(e[0]),o=Math.ceil(e[1]);if(!(r>0&&o>0))throw new Error("invalid size");return t=r,n=o,i},i.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?uo(oo.call(t)):uo(t),i):e},i.smooth=function(t){return arguments.length?(r=t?u:lo,i):r===u},i}function vo(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<i;++a)for(var u=0,c=0;u<r+e;++u)u<r&&(c+=t.data[u+a*r]),u>=e&&(u>=o&&(c-=t.data[u-o+a*r]),n.data[u-e+a*r]=c/Math.min(u+1,r-1+o-u,o))}function go(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<r;++a)for(var u=0,c=0;u<i+e;++u)u<i&&(c+=t.data[a+u*r]),u>=e&&(u>=o&&(c-=t.data[a+(u-o)*r]),n.data[a+(u-e)*r]=c/Math.min(u+1,i-1+o-u,o))}function yo(t){return t[0]}function _o(t){return t[1]}function bo(){return 1}var mo={},xo={},wo=34,Mo=10,No=13;function Ao(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+"]"})).join(",")+"}")}function So(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function ko(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],o=t.length,a=0,u=0,c=o<=0,f=!1;function s(){if(c)return xo;if(f)return f=!1,mo;var n,r,i=a;if(t.charCodeAt(i)===wo){for(;a++<o&&t.charCodeAt(a)!==wo||t.charCodeAt(++a)===wo;);return(n=a)>=o?c=!0:(r=t.charCodeAt(a++))===Mo?f=!0:r===No&&(f=!0,t.charCodeAt(a)===Mo&&++a),t.slice(i+1,n-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(n=a++))===Mo)f=!0;else if(r===No)f=!0,t.charCodeAt(a)===Mo&&++a;else if(r!==e)continue;return t.slice(i,n)}return c=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===Mo&&--o,t.charCodeAt(o-1)===No&&--o;(r=s())!==xo;){for(var l=[];r!==mo&&r!==xo;)l.push(r),r=s();n&&null==(l=n(l,u++))||i.push(l)}return i}function i(n,e){return n.map((function(n){return e.map((function(t){return a(n[t])})).join(t)}))}function o(n){return n.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?t.toISOString():n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,o=r(t,(function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=Ao(t);return function(r,i){return n(e(r),i,t)}}(t,n):Ao(t)}));return o.columns=i||[],o},parseRows:r,format:function(n,e){return null==e&&(e=So(n)),[e.map(a).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=So(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(o).join("\n")}}}var To=ko(","),Eo=To.parse,Co=To.parseRows,Po=To.format,zo=To.formatBody,Ro=To.formatRows,Do=ko("\t"),qo=Do.parse,Lo=Do.parseRows,Uo=Do.format,Oo=Do.formatBody,Bo=Do.formatRows;function Yo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Fo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function Io(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function jo(t,n){return fetch(t,n).then(Io)}function Ho(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=void 0),jo(n,e).then((function(n){return t(n,r)}))}}var Xo=Ho(Eo),Go=Ho(qo);function Vo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function $o(t){return function(n,e){return jo(n,e).then((function(n){return(new DOMParser).parseFromString(n,t)}))}}var Wo=$o("application/xml"),Zo=$o("text/html"),Qo=$o("image/svg+xml");function Jo(t){return function(){return t}}function Ko(){return 1e-6*(Math.random()-.5)}function ta(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,a,u,c,f,s,l,h,d=t._root,p={data:r},v=t._x0,g=t._y0,y=t._x1,_=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((f=n>=(o=(v+y)/2))?v=o:y=o,(s=e>=(a=(g+_)/2))?g=a:_=a,i=d,!(d=d[l=s<<1|f]))return i[l]=p,t;if(u=+t._x.call(null,d.data),c=+t._y.call(null,d.data),n===u&&e===c)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(f=n>=(o=(v+y)/2))?v=o:y=o,(s=e>=(a=(g+_)/2))?g=a:_=a}while((l=s<<1|f)==(h=(c>=a)<<1|u>=o));return i[h]=d,i[l]=p,t}function na(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function ea(t){return t[0]}function ra(t){return t[1]}function ia(t,n,e){var r=new oa(null==n?ea:n,null==e?ra:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function oa(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function aa(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var ua=ia.prototype=oa.prototype;function ca(t){return t.x+t.vx}function fa(t){return t.y+t.vy}function sa(t){return t.index}function la(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}function ha(t){return t.x}function da(t){return t.y}ua.copy=function(){var t,n,e=new oa(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=aa(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=aa(n));return e},ua.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return ta(this.cover(n,e),n,e,t)},ua.addAll=function(t){var n,e,r,i,o=t.length,a=new Array(o),u=new Array(o),c=1/0,f=1/0,s=-1/0,l=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(a[e]=r,u[e]=i,r<c&&(c=r),r>s&&(s=r),i<f&&(f=i),i>l&&(l=i));for(s<c&&(c=this._x0,s=this._x1),l<f&&(f=this._y0,l=this._y1),this.cover(c,f).cover(s,l),e=0;e<o;++e)ta(this,a[e],u[e],t[e]);return this},ua.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{if(!(e>t||t>i||r>n||n>o))return this;var a,u,c=i-e,f=this._root;switch(u=(n<(r+o)/2)<<1|t<(e+i)/2){case 0:do{(a=new Array(4))[u]=f,f=a}while(o=r+(c*=2),t>(i=e+c)||n>o);break;case 1:do{(a=new Array(4))[u]=f,f=a}while(o=r+(c*=2),(e=i-c)>t||n>o);break;case 2:do{(a=new Array(4))[u]=f,f=a}while(r=o-(c*=2),t>(i=e+c)||r>n);break;case 3:do{(a=new Array(4))[u]=f,f=a}while(r=o-(c*=2),(e=i-c)>t||r>n)}this._root&&this._root.length&&(this._root=f)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},ua.data=function(){var t=[];return this.visit((function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)})),t},ua.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ua.find=function(t,n,e){var r,i,o,a,u,c,f,s=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new na(v,s,l,h,d)),null==e?e=1/0:(s=t-e,l=n-e,h=t+e,d=n+e,e*=e);c=p.pop();)if(!(!(v=c.node)||(i=c.x0)>h||(o=c.y0)>d||(a=c.x1)<s||(u=c.y1)<l))if(v.length){var g=(i+a)/2,y=(o+u)/2;p.push(new na(v[3],g,y,a,u),new na(v[2],i,y,g,u),new na(v[1],g,o,a,y),new na(v[0],i,o,g,y)),(f=(n>=y)<<1|t>=g)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-f],p[p.length-1-f]=c)}else{var _=t-+this._x.call(null,v.data),b=n-+this._y.call(null,v.data),m=_*_+b*b;if(m<e){var x=Math.sqrt(e=m);s=t-x,l=n-x,h=t+x,d=n+x,r=v.data}}return r},ua.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var n,e,r,i,o,a,u,c,f,s,l,h,d=this._root,p=this._x0,v=this._y0,g=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((f=o>=(u=(p+g)/2))?p=u:g=u,(s=a>=(c=(v+y)/2))?v=c:y=c,n=d,!(d=d[l=s<<1|f]))return this;if(!d.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(e=n,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):n?(i?n[l]=i:delete n[l],(d=n[0]||n[1]||n[2]||n[3])&&d===(n[3]||n[2]||n[1]||n[0])&&!d.length&&(e?e[h]=d:this._root=d),this):(this._root=i,this)},ua.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},ua.root=function(){return this._root},ua.size=function(){var t=0;return this.visit((function(n){if(!n.length)do{++t}while(n=n.next)})),t},ua.visit=function(t){var n,e,r,i,o,a,u=[],c=this._root;for(c&&u.push(new na(c,this._x0,this._y0,this._x1,this._y1));n=u.pop();)if(!t(c=n.node,r=n.x0,i=n.y0,o=n.x1,a=n.y1)&&c.length){var f=(r+o)/2,s=(i+a)/2;(e=c[3])&&u.push(new na(e,f,s,o,a)),(e=c[2])&&u.push(new na(e,r,s,f,a)),(e=c[1])&&u.push(new na(e,f,i,o,s)),(e=c[0])&&u.push(new na(e,r,i,f,s))}return this},ua.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new na(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,a=n.x0,u=n.y0,c=n.x1,f=n.y1,s=(a+c)/2,l=(u+f)/2;(o=i[0])&&e.push(new na(o,a,u,s,l)),(o=i[1])&&e.push(new na(o,s,u,c,l)),(o=i[2])&&e.push(new na(o,a,l,s,f)),(o=i[3])&&e.push(new na(o,s,l,c,f))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},ua.x=function(t){return arguments.length?(this._x=t,this):this._x},ua.y=function(t){return arguments.length?(this._y=t,this):this._y};var pa=10,va=Math.PI*(3-Math.sqrt(5));function ga(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function ya(t){return(t=ga(Math.abs(t)))?t[1]:NaN}var _a,ba=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ma(t){return new xa(t)}function xa(t){if(!(n=ba.exec(t)))throw new Error("invalid format: "+t);var n;this.fill=n[1]||" ",this.align=n[2]||">",this.sign=n[3]||"-",this.symbol=n[4]||"",this.zero=!!n[5],this.width=n[6]&&+n[6],this.comma=!!n[7],this.precision=n[8]&&+n[8].slice(1),this.trim=!!n[9],this.type=n[10]||""}function wa(t,n){var e=ga(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ma.prototype=xa.prototype,xa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ma={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return wa(100*t,n)},r:wa,s:function(t,n){var e=ga(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(_a=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ga(t,Math.max(0,n+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Na(t){return t}var Aa,Sa=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ka(t){var n,e,r=t.grouping&&t.thousands?(n=t.grouping,e=t.thousands,function(t,r){for(var i=t.length,o=[],a=0,u=n[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),o.push(t.substring(i-=u,i+u)),!((c+=u+1)>r));)u=n[a=(a+1)%n.length];return o.reverse().join(e)}):Na,i=t.currency,o=t.decimal,a=t.numerals?function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(t.numerals):Na,u=t.percent||"%";function c(t){var n=(t=ma(t)).fill,e=t.align,c=t.sign,f=t.symbol,s=t.zero,l=t.width,h=t.comma,d=t.precision,p=t.trim,v=t.type;"n"===v?(h=!0,v="g"):Ma[v]||(null==d&&(d=12),p=!0,v="g"),(s||"0"===n&&"="===e)&&(s=!0,n="0",e="=");var g="$"===f?i[0]:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",y="$"===f?i[1]:/[%p]/.test(v)?u:"",_=Ma[v],b=/[defgprs%]/.test(v);function m(t){var i,u,f,m=g,x=y;if("c"===v)x=_(t)+x,t="";else{var w=(t=+t)<0;if(t=_(Math.abs(t),d),p&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),w&&0==+t&&(w=!1),m=(w?"("===c?c:"-":"-"===c||"("===c?"":c)+m,x=("s"===v?Sa[8+_a/3]:"")+x+(w&&"("===c?")":""),b)for(i=-1,u=t.length;++i<u;)if(48>(f=t.charCodeAt(i))||f>57){x=(46===f?o+t.slice(i+1):t.slice(i))+x,t=t.slice(0,i);break}}h&&!s&&(t=r(t,1/0));var M=m.length+t.length+x.length,N=M<l?new Array(l-M+1).join(n):"";switch(h&&s&&(t=r(N+t,N.length?l-x.length:1/0),N=""),e){case"<":t=m+t+x+N;break;case"=":t=m+N+t+x;break;case"^":t=N.slice(0,M=N.length>>1)+m+t+x+N.slice(M);break;default:t=N+m+t+x}return a(t)}return d=null==d?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),m.toString=function(){return t+""},m}return{format:c,formatPrefix:function(t,n){var e=c(((t=ma(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(ya(n)/3))),i=Math.pow(10,-r),o=Sa[8+r/3];return function(t){return e(i*t)+o}}}}function Ta(n){return Aa=ka(n),t.format=Aa.format,t.formatPrefix=Aa.formatPrefix,Aa}function Ea(t){return Math.max(0,-ya(Math.abs(t)))}function Ca(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ya(n)/3)))-ya(Math.abs(t)))}function Pa(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,ya(n)-ya(t))+1}function za(){return new Ra}function Ra(){this.reset()}Ta({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Ra.prototype={constructor:Ra,reset:function(){this.s=this.t=0},add:function(t){qa(Da,t,this.t),qa(this,Da.s,this.s),this.s?this.t+=Da.t:this.s=Da.t},valueOf:function(){return this.s}};var Da=new Ra;function qa(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}var La=1e-6,Ua=1e-12,Oa=Math.PI,Ba=Oa/2,Ya=Oa/4,Fa=2*Oa,Ia=180/Oa,ja=Oa/180,Ha=Math.abs,Xa=Math.atan,Ga=Math.atan2,Va=Math.cos,$a=Math.ceil,Wa=Math.exp,Za=Math.log,Qa=Math.pow,Ja=Math.sin,Ka=Math.sign||function(t){return t>0?1:t<0?-1:0},tu=Math.sqrt,nu=Math.tan;function eu(t){return t>1?0:t<-1?Oa:Math.acos(t)}function ru(t){return t>1?Ba:t<-1?-Ba:Math.asin(t)}function iu(t){return(t=Ja(t/2))*t}function ou(){}function au(t,n){t&&cu.hasOwnProperty(t.type)&&cu[t.type](t,n)}var uu={Feature:function(t,n){au(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)au(e[r].geometry,n)}},cu={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){fu(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)fu(e[r],n,0)},Polygon:function(t,n){su(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)su(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)au(e[r],n)}};function fu(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function su(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)fu(t[e],n,1);n.polygonEnd()}function lu(t,n){t&&uu.hasOwnProperty(t.type)?uu[t.type](t,n):au(t,n)}var hu,du,pu,vu,gu,yu=za(),_u=za(),bu={point:ou,lineStart:ou,lineEnd:ou,polygonStart:function(){yu.reset(),bu.lineStart=mu,bu.lineEnd=xu},polygonEnd:function(){var t=+yu;_u.add(t<0?Fa+t:t),this.lineStart=this.lineEnd=this.point=ou},sphere:function(){_u.add(Fa)}};function mu(){bu.point=wu}function xu(){Mu(hu,du)}function wu(t,n){bu.point=Mu,hu=t,du=n,pu=t*=ja,vu=Va(n=(n*=ja)/2+Ya),gu=Ja(n)}function Mu(t,n){var e=(t*=ja)-pu,r=e>=0?1:-1,i=r*e,o=Va(n=(n*=ja)/2+Ya),a=Ja(n),u=gu*a,c=vu*o+u*Va(i),f=u*r*Ja(i);yu.add(Ga(f,c)),pu=t,vu=o,gu=a}function Nu(t){return[Ga(t[1],t[0]),ru(t[2])]}function Au(t){var n=t[0],e=t[1],r=Va(e);return[r*Va(n),r*Ja(n),Ja(e)]}function Su(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function ku(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Tu(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Eu(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Cu(t){var n=tu(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var Pu,zu,Ru,Du,qu,Lu,Uu,Ou,Bu,Yu,Fu,Iu,ju,Hu,Xu,Gu,Vu,$u,Wu,Zu,Qu,Ju,Ku,tc,nc,ec,rc=za(),ic={point:oc,lineStart:uc,lineEnd:cc,polygonStart:function(){ic.point=fc,ic.lineStart=sc,ic.lineEnd=lc,rc.reset(),bu.polygonStart()},polygonEnd:function(){bu.polygonEnd(),ic.point=oc,ic.lineStart=uc,ic.lineEnd=cc,yu<0?(Pu=-(Ru=180),zu=-(Du=90)):rc>La?Du=90:rc<-La&&(zu=-90),Yu[0]=Pu,Yu[1]=Ru}};function oc(t,n){Bu.push(Yu=[Pu=t,Ru=t]),n<zu&&(zu=n),n>Du&&(Du=n)}function ac(t,n){var e=Au([t*ja,n*ja]);if(Ou){var r=ku(Ou,e),i=ku([r[1],-r[0],0],r);Cu(i),i=Nu(i);var o,a=t-qu,u=a>0?1:-1,c=i[0]*Ia*u,f=Ha(a)>180;f^(u*qu<c&&c<u*t)?(o=i[1]*Ia)>Du&&(Du=o):f^(u*qu<(c=(c+360)%360-180)&&c<u*t)?(o=-i[1]*Ia)<zu&&(zu=o):(n<zu&&(zu=n),n>Du&&(Du=n)),f?t<qu?hc(Pu,t)>hc(Pu,Ru)&&(Ru=t):hc(t,Ru)>hc(Pu,Ru)&&(Pu=t):Ru>=Pu?(t<Pu&&(Pu=t),t>Ru&&(Ru=t)):t>qu?hc(Pu,t)>hc(Pu,Ru)&&(Ru=t):hc(t,Ru)>hc(Pu,Ru)&&(Pu=t)}else Bu.push(Yu=[Pu=t,Ru=t]);n<zu&&(zu=n),n>Du&&(Du=n),Ou=e,qu=t}function uc(){ic.point=ac}function cc(){Yu[0]=Pu,Yu[1]=Ru,ic.point=oc,Ou=null}function fc(t,n){if(Ou){var e=t-qu;rc.add(Ha(e)>180?e+(e>0?360:-360):e)}else Lu=t,Uu=n;bu.point(t,n),ac(t,n)}function sc(){bu.lineStart()}function lc(){fc(Lu,Uu),bu.lineEnd(),Ha(rc)>La&&(Pu=-(Ru=180)),Yu[0]=Pu,Yu[1]=Ru,Ou=null}function hc(t,n){return(n-=t)<0?n+360:n}function dc(t,n){return t[0]-n[0]}function pc(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var vc={sphere:ou,point:gc,lineStart:_c,lineEnd:xc,polygonStart:function(){vc.lineStart=wc,vc.lineEnd=Mc},polygonEnd:function(){vc.lineStart=_c,vc.lineEnd=xc}};function gc(t,n){t*=ja;var e=Va(n*=ja);yc(e*Va(t),e*Ja(t),Ja(n))}function yc(t,n,e){ju+=(t-ju)/++Fu,Hu+=(n-Hu)/Fu,Xu+=(e-Xu)/Fu}function _c(){vc.point=bc}function bc(t,n){t*=ja;var e=Va(n*=ja);tc=e*Va(t),nc=e*Ja(t),ec=Ja(n),vc.point=mc,yc(tc,nc,ec)}function mc(t,n){t*=ja;var e=Va(n*=ja),r=e*Va(t),i=e*Ja(t),o=Ja(n),a=Ga(tu((a=nc*o-ec*i)*a+(a=ec*r-tc*o)*a+(a=tc*i-nc*r)*a),tc*r+nc*i+ec*o);Iu+=a,Gu+=a*(tc+(tc=r)),Vu+=a*(nc+(nc=i)),$u+=a*(ec+(ec=o)),yc(tc,nc,ec)}function xc(){vc.point=gc}function wc(){vc.point=Nc}function Mc(){Ac(Ju,Ku),vc.point=gc}function Nc(t,n){Ju=t,Ku=n,t*=ja,n*=ja,vc.point=Ac;var e=Va(n);tc=e*Va(t),nc=e*Ja(t),ec=Ja(n),yc(tc,nc,ec)}function Ac(t,n){t*=ja;var e=Va(n*=ja),r=e*Va(t),i=e*Ja(t),o=Ja(n),a=nc*o-ec*i,u=ec*r-tc*o,c=tc*i-nc*r,f=tu(a*a+u*u+c*c),s=ru(f),l=f&&-s/f;Wu+=l*a,Zu+=l*u,Qu+=l*c,Iu+=s,Gu+=s*(tc+(tc=r)),Vu+=s*(nc+(nc=i)),$u+=s*(ec+(ec=o)),yc(tc,nc,ec)}function Sc(t){return function(){return t}}function kc(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function Tc(t,n){return[Ha(t)>Oa?t+Math.round(-t/Fa)*Fa:t,n]}function Ec(t,n,e){return(t%=Fa)?n||e?kc(Pc(t),zc(n,e)):Pc(t):n||e?zc(n,e):Tc}function Cc(t){return function(n,e){return[(n+=t)>Oa?n-Fa:n<-Oa?n+Fa:n,e]}}function Pc(t){var n=Cc(t);return n.invert=Cc(-t),n}function zc(t,n){var e=Va(t),r=Ja(t),i=Va(n),o=Ja(n);function a(t,n){var a=Va(n),u=Va(t)*a,c=Ja(t)*a,f=Ja(n),s=f*e+u*r;return[Ga(c*i-s*o,u*e-f*r),ru(s*i+c*o)]}return a.invert=function(t,n){var a=Va(n),u=Va(t)*a,c=Ja(t)*a,f=Ja(n),s=f*i-c*o;return[Ga(c*i+f*o,u*e+s*r),ru(s*e-u*r)]},a}function Rc(t){function n(n){return(n=t(n[0]*ja,n[1]*ja))[0]*=Ia,n[1]*=Ia,n}return t=Ec(t[0]*ja,t[1]*ja,t.length>2?t[2]*ja:0),n.invert=function(n){return(n=t.invert(n[0]*ja,n[1]*ja))[0]*=Ia,n[1]*=Ia,n},n}function Dc(t,n,e,r,i,o){if(e){var a=Va(n),u=Ja(n),c=r*e;null==i?(i=n+r*Fa,o=n-c/2):(i=qc(a,i),o=qc(a,o),(r>0?i<o:i>o)&&(i+=r*Fa));for(var f,s=i;r>0?s>o:s<o;s-=c)f=Nu([a,-u*Va(s),-u*Ja(s)]),t.point(f[0],f[1])}}function qc(t,n){(n=Au(n))[0]-=t,Cu(n);var e=eu(-n[1]);return((-n[2]<0?-e:e)+Fa-La)%Fa}function Lc(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:ou,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Uc(t,n){return Ha(t[0]-n[0])<La&&Ha(t[1]-n[1])<La}function Oc(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Bc(t,n,e,r,i){var o,a,u=[],c=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(Uc(r,a)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else u.push(e=new Oc(r,t,null,!0)),c.push(e.o=new Oc(r,null,e,!1)),u.push(e=new Oc(a,t,null,!1)),c.push(e.o=new Oc(a,null,e,!0))}})),u.length){for(c.sort(n),Yc(u),Yc(c),o=0,a=c.length;o<a;++o)c[o].e=e=!e;for(var f,s,l=u[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;f=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=f.length;o<a;++o)i.point((s=f[o])[0],s[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(f=h.p.z,o=f.length-1;o>=0;--o)i.point((s=f[o])[0],s[1]);else r(h.x,h.p.x,-1,i);h=h.p}f=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function Yc(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}Tc.invert=Tc;var Fc=za();function Ic(t,n){var e=n[0],r=n[1],i=Ja(r),o=[Ja(e),-Va(e),0],a=0,u=0;Fc.reset(),1===i?r=Ba+La:-1===i&&(r=-Ba-La);for(var c=0,f=t.length;c<f;++c)if(l=(s=t[c]).length)for(var s,l,h=s[l-1],d=h[0],p=h[1]/2+Ya,v=Ja(p),g=Va(p),y=0;y<l;++y,d=b,v=x,g=w,h=_){var _=s[y],b=_[0],m=_[1]/2+Ya,x=Ja(m),w=Va(m),M=b-d,N=M>=0?1:-1,A=N*M,S=A>Oa,k=v*x;if(Fc.add(Ga(k*N*Ja(A),g*w+k*Va(A))),a+=S?M+N*Fa:M,S^d>=e^b>=e){var T=ku(Au(h),Au(_));Cu(T);var E=ku(o,T);Cu(E);var C=(S^M>=0?-1:1)*ru(E[2]);(r>C||r===C&&(T[0]||T[1]))&&(u+=S^M>=0?1:-1)}}return(a<-La||a<La&&Fc<-La)^1&u}function jc(t,n,e,r){return function(i){var o,a,u,c=n(i),f=Lc(),s=n(f),l=!1,h={point:d,lineStart:v,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=_,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=v,h.lineEnd=g,a=S(a);var t=Ic(o,r);a.length?(l||(i.polygonStart(),l=!0),Bc(a,Xc,t,e,i)):t&&(l||(i.polygonStart(),l=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(n,e){t(n,e)&&i.point(n,e)}function p(t,n){c.point(t,n)}function v(){h.point=p,c.lineStart()}function g(){h.point=d,c.lineEnd()}function y(t,n){u.push([t,n]),s.point(t,n)}function _(){s.lineStart(),u=[]}function b(){y(u[0][0],u[0][1]),s.lineEnd();var t,n,e,r,c=s.clean(),h=f.result(),d=h.length;if(u.pop(),o.push(u),u=null,d)if(1&c){if((n=(e=h[0]).length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else d>1&&2&c&&h.push(h.pop().concat(h.shift())),a.push(h.filter(Hc))}return h}}function Hc(t){return t.length>1}function Xc(t,n){return((t=t.x)[0]<0?t[1]-Ba-La:Ba-t[1])-((n=n.x)[0]<0?n[1]-Ba-La:Ba-n[1])}var Gc=jc((function(){return!0}),(function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?Oa:-Oa,c=Ha(o-e);Ha(c-Oa)<La?(t.point(e,r=(r+a)/2>0?Ba:-Ba),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&c>=Oa&&(Ha(e-i)<La&&(e-=i*La),Ha(o-u)<La&&(o-=u*La),r=function(t,n,e,r){var i,o,a=Ja(t-e);return Ha(a)>La?Xa((Ja(n)*(o=Va(r))*Ja(e)-Ja(r)*(i=Va(n))*Ja(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var i;if(null==t)i=e*Ba,r.point(-Oa,i),r.point(0,i),r.point(Oa,i),r.point(Oa,0),r.point(Oa,-i),r.point(0,-i),r.point(-Oa,-i),r.point(-Oa,0),r.point(-Oa,i);else if(Ha(t[0]-n[0])>La){var o=t[0]<n[0]?Oa:-Oa;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}),[-Oa,-Ba]);function Vc(t){var n=Va(t),e=6*ja,r=n>0,i=Ha(n)>La;function o(t,e){return Va(t)*Va(e)>n}function a(t,e,r){var i=[1,0,0],o=ku(Au(t),Au(e)),a=Su(o,o),u=o[0],c=a-u*u;if(!c)return!r&&t;var f=n*a/c,s=-n*u/c,l=ku(i,o),h=Eu(i,f);Tu(h,Eu(o,s));var d=l,p=Su(h,d),v=Su(d,d),g=p*p-v*(Su(h,h)-1);if(!(g<0)){var y=tu(g),_=Eu(d,(-p-y)/v);if(Tu(_,h),_=Nu(_),!r)return _;var b,m=t[0],x=e[0],w=t[1],M=e[1];x<m&&(b=m,m=x,x=b);var N=x-m,A=Ha(N-Oa)<La;if(!A&&M<w&&(b=w,w=M,M=b),A||N<La?A?w+M>0^_[1]<(Ha(_[0]-m)<La?w:M):w<=_[1]&&_[1]<=M:N>Oa^(m<=_[0]&&_[0]<=x)){var S=Eu(d,(-p+y)/v);return Tu(S,h),[_,Nu(S)]}}}function u(n,e){var i=r?t:Oa-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return jc(o,(function(t){var n,e,c,f,s;return{lineStart:function(){f=c=!1,s=1},point:function(l,h){var d,p=[l,h],v=o(l,h),g=r?v?0:u(l,h):v?u(l+(l<0?Oa:-Oa),h):0;if(!n&&(f=c=v)&&t.lineStart(),v!==c&&(!(d=a(n,p))||Uc(n,d)||Uc(p,d))&&(p[0]+=La,p[1]+=La,v=o(p[0],p[1])),v!==c)s=0,v?(t.lineStart(),d=a(p,n),t.point(d[0],d[1])):(d=a(n,p),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(i&&n&&r^v){var y;g&e||!(y=a(p,n,!0))||(s=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!v||n&&Uc(n,p)||t.point(p[0],p[1]),n=p,c=v,e=g},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return s|(f&&c)<<1}}}),(function(n,r,i,o){Dc(o,t,e,i,n,r)}),r?[0,-t]:[-Oa,t-Oa])}var $c=1e9,Wc=-$c;function Zc(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,u,f){var s=0,l=0;if(null==i||(s=a(i,u))!==(l=a(o,u))||c(i,o)<0^u>0)do{f.point(0===s||3===s?t:e,s>1?r:n)}while((s=(s+u+4)%4)!==l);else f.point(o[0],o[1])}function a(r,i){return Ha(r[0]-t)<La?i>0?0:3:Ha(r[0]-e)<La?i>0?2:1:Ha(r[1]-n)<La?i>0?1:0:i>0?3:2}function u(t,n){return c(t.x,n.x)}function c(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var c,f,s,l,h,d,p,v,g,y,_,b=a,m=Lc(),x={point:w,lineStart:function(){x.point=M,f&&f.push(s=[]),y=!0,g=!1,p=v=NaN},lineEnd:function(){c&&(M(l,h),d&&g&&m.rejoin(),c.push(m.result())),x.point=w,g&&b.lineEnd()},polygonStart:function(){b=m,c=[],f=[],_=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=f.length;e<i;++e)for(var o,a,u=f[e],c=1,s=u.length,l=u[0],h=l[0],d=l[1];c<s;++c)o=h,a=d,h=(l=u[c])[0],d=l[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++n:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--n;return n}(),e=_&&n,i=(c=S(c)).length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Bc(c,u,n,o,a),a.polygonEnd()),b=a,c=f=s=null}};function w(t,n){i(t,n)&&b.point(t,n)}function M(o,a){var u=i(o,a);if(f&&s.push([o,a]),y)l=o,h=a,d=u,y=!1,u&&(b.lineStart(),b.point(o,a));else if(u&&g)b.point(o,a);else{var c=[p=Math.max(Wc,Math.min($c,p)),v=Math.max(Wc,Math.min($c,v))],m=[o=Math.max(Wc,Math.min($c,o)),a=Math.max(Wc,Math.min($c,a))];!function(t,n,e,r,i,o){var a,u=t[0],c=t[1],f=0,s=1,l=n[0]-u,h=n[1]-c;if(a=e-u,l||!(a>0)){if(a/=l,l<0){if(a<f)return;a<s&&(s=a)}else if(l>0){if(a>s)return;a>f&&(f=a)}if(a=i-u,l||!(a<0)){if(a/=l,l<0){if(a>s)return;a>f&&(f=a)}else if(l>0){if(a<f)return;a<s&&(s=a)}if(a=r-c,h||!(a>0)){if(a/=h,h<0){if(a<f)return;a<s&&(s=a)}else if(h>0){if(a>s)return;a>f&&(f=a)}if(a=o-c,h||!(a<0)){if(a/=h,h<0){if(a>s)return;a>f&&(f=a)}else if(h>0){if(a<f)return;a<s&&(s=a)}return f>0&&(t[0]=u+f*l,t[1]=c+f*h),s<1&&(n[0]=u+s*l,n[1]=c+s*h),!0}}}}}(c,m,t,n,e,r)?u&&(b.lineStart(),b.point(o,a),_=!1):(g||(b.lineStart(),b.point(c[0],c[1])),b.point(m[0],m[1]),u||b.lineEnd(),_=!1)}p=o,v=a,g=u}return x}}var Qc,Jc,Kc,tf=za(),nf={sphere:ou,point:ou,lineStart:function(){nf.point=rf,nf.lineEnd=ef},lineEnd:ou,polygonStart:ou,polygonEnd:ou};function ef(){nf.point=nf.lineEnd=ou}function rf(t,n){Qc=t*=ja,Jc=Ja(n*=ja),Kc=Va(n),nf.point=of}function of(t,n){t*=ja;var e=Ja(n*=ja),r=Va(n),i=Ha(t-Qc),o=Va(i),a=r*Ja(i),u=Kc*e-Jc*r*o,c=Jc*e+Kc*r*o;tf.add(Ga(tu(a*a+u*u),c)),Qc=t,Jc=e,Kc=r}function af(t){return tf.reset(),lu(t,nf),+tf}var uf=[null,null],cf={type:"LineString",coordinates:uf};function ff(t,n){return uf[0]=t,uf[1]=n,af(cf)}var sf={Feature:function(t,n){return hf(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(hf(e[r].geometry,n))return!0;return!1}},lf={Sphere:function(){return!0},Point:function(t,n){return df(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(df(e[r],n))return!0;return!1},LineString:function(t,n){return pf(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(pf(e[r],n))return!0;return!1},Polygon:function(t,n){return vf(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(vf(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(hf(e[r],n))return!0;return!1}};function hf(t,n){return!(!t||!lf.hasOwnProperty(t.type))&&lf[t.type](t,n)}function df(t,n){return 0===ff(t,n)}function pf(t,n){var e=ff(t[0],t[1]);return ff(t[0],n)+ff(n,t[1])<=e+La}function vf(t,n){return!!Ic(t.map(gf),yf(n))}function gf(t){return(t=t.map(yf)).pop(),t}function yf(t){return[t[0]*ja,t[1]*ja]}function _f(t,n,e){var r=g(t,n-La,e).concat(n);return function(t){return r.map((function(n){return[t,n]}))}}function bf(t,n,e){var r=g(t,n-La,e).concat(n);return function(t){return r.map((function(n){return[n,t]}))}}function mf(){var t,n,e,r,i,o,a,u,c,f,s,l,h=10,d=h,p=90,v=360,y=2.5;function _(){return{type:"MultiLineString",coordinates:b()}}function b(){return g($a(r/p)*p,e,p).map(s).concat(g($a(u/v)*v,a,v).map(l)).concat(g($a(n/h)*h,t,h).filter((function(t){return Ha(t%p)>La})).map(c)).concat(g($a(o/d)*d,i,d).filter((function(t){return Ha(t%v)>La})).map(f))}return _.lines=function(){return b().map((function(t){return{type:"LineString",coordinates:t}}))},_.outline=function(){return{type:"Polygon",coordinates:[s(r).concat(l(a).slice(1),s(e).reverse().slice(1),l(u).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.extentMajor(t).extentMinor(t):_.extentMinor()},_.extentMajor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],u=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),u>a&&(t=u,u=a,a=t),_.precision(y)):[[r,u],[e,a]]},_.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],n>t&&(e=n,n=t,t=e),o>i&&(e=o,o=i,i=e),_.precision(y)):[[n,o],[t,i]]},_.step=function(t){return arguments.length?_.stepMajor(t).stepMinor(t):_.stepMinor()},_.stepMajor=function(t){return arguments.length?(p=+t[0],v=+t[1],_):[p,v]},_.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],_):[h,d]},_.precision=function(h){return arguments.length?(y=+h,c=_f(o,i,90),f=bf(n,t,y),s=_f(u,a,90),l=bf(r,e,y),_):y},_.extentMajor([[-180,-90+La],[180,90-La]]).extentMinor([[-180,-80-La],[180,80+La]])}function xf(t){return t}var wf,Mf,Nf,Af,Sf=za(),kf=za(),Tf={point:ou,lineStart:ou,lineEnd:ou,polygonStart:function(){Tf.lineStart=Ef,Tf.lineEnd=zf},polygonEnd:function(){Tf.lineStart=Tf.lineEnd=Tf.point=ou,Sf.add(Ha(kf)),kf.reset()},result:function(){var t=Sf/2;return Sf.reset(),t}};function Ef(){Tf.point=Cf}function Cf(t,n){Tf.point=Pf,wf=Nf=t,Mf=Af=n}function Pf(t,n){kf.add(Af*t-Nf*n),Nf=t,Af=n}function zf(){Pf(wf,Mf)}var Of,Bf,Yf,Ff,Rf=1/0,Df=Rf,qf=-Rf,Lf=qf,Uf={point:function(t,n){t<Rf&&(Rf=t),t>qf&&(qf=t),n<Df&&(Df=n),n>Lf&&(Lf=n)},lineStart:ou,lineEnd:ou,polygonStart:ou,polygonEnd:ou,result:function(){var t=[[Rf,Df],[qf,Lf]];return qf=Lf=-(Df=Rf=1/0),t}},If=0,jf=0,Hf=0,Xf=0,Gf=0,Vf=0,$f=0,Wf=0,Zf=0,Qf={point:Jf,lineStart:Kf,lineEnd:es,polygonStart:function(){Qf.lineStart=rs,Qf.lineEnd=is},polygonEnd:function(){Qf.point=Jf,Qf.lineStart=Kf,Qf.lineEnd=es},result:function(){var t=Zf?[$f/Zf,Wf/Zf]:Vf?[Xf/Vf,Gf/Vf]:Hf?[If/Hf,jf/Hf]:[NaN,NaN];return If=jf=Hf=Xf=Gf=Vf=$f=Wf=Zf=0,t}};function Jf(t,n){If+=t,jf+=n,++Hf}function Kf(){Qf.point=ts}function ts(t,n){Qf.point=ns,Jf(Yf=t,Ff=n)}function ns(t,n){var e=t-Yf,r=n-Ff,i=tu(e*e+r*r);Xf+=i*(Yf+t)/2,Gf+=i*(Ff+n)/2,Vf+=i,Jf(Yf=t,Ff=n)}function es(){Qf.point=Jf}function rs(){Qf.point=os}function is(){as(Of,Bf)}function os(t,n){Qf.point=as,Jf(Of=Yf=t,Bf=Ff=n)}function as(t,n){var e=t-Yf,r=n-Ff,i=tu(e*e+r*r);Xf+=i*(Yf+t)/2,Gf+=i*(Ff+n)/2,Vf+=i,$f+=(i=Ff*t-Yf*n)*(Yf+t),Wf+=i*(Ff+n),Zf+=3*i,Jf(Yf=t,Ff=n)}function us(t){this._context=t}us.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Fa)}},result:ou};var cs,fs,ss,ls,hs,ds=za(),ps={point:ou,lineStart:function(){ps.point=vs},lineEnd:function(){cs&&gs(fs,ss),ps.point=ou},polygonStart:function(){cs=!0},polygonEnd:function(){cs=null},result:function(){var t=+ds;return ds.reset(),t}};function vs(t,n){ps.point=gs,fs=ls=t,ss=hs=n}function gs(t,n){ls-=t,hs-=n,ds.add(tu(ls*ls+hs*hs)),ls=t,hs=n}function ys(){this._string=[]}function _s(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function bs(t){return function(n){var e=new ms;for(var r in t)e[r]=t[r];return e.stream=n,e}}function ms(){}function xs(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),lu(e,t.stream(Uf)),n(Uf.result()),null!=r&&t.clipExtent(r),t}function ws(t,n,e){return xs(t,(function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,u])}),e)}function Ms(t,n,e){return ws(t,[[0,0],n],e)}function Ns(t,n,e){return xs(t,(function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])}),e)}function As(t,n,e){return xs(t,(function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])}),e)}ys.prototype={_radius:4.5,_circle:_s(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=_s(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},ms.prototype={constructor:ms,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ss=16,ks=Va(30*ja);function Ts(t,n){return+n?function(t,n){function e(r,i,o,a,u,c,f,s,l,h,d,p,v,g){var y=f-r,_=s-i,b=y*y+_*_;if(b>4*n&&v--){var m=a+h,x=u+d,w=c+p,M=tu(m*m+x*x+w*w),N=ru(w/=M),A=Ha(Ha(w)-1)<La||Ha(o-l)<La?(o+l)/2:Ga(x,m),S=t(A,N),k=S[0],T=S[1],E=k-r,C=T-i,P=_*E-y*C;(P*P/b>n||Ha((y*E+_*C)/b-.5)>.3||a*h+u*d+c*p<ks)&&(e(r,i,o,a,u,c,k,T,A,m/=M,x/=M,w,v,g),g.point(k,T),e(k,T,A,m,x,w,f,s,l,h,d,p,v,g))}}return function(n){var r,i,o,a,u,c,f,s,l,h,d,p,v={point:g,lineStart:y,lineEnd:b,polygonStart:function(){n.polygonStart(),v.lineStart=m},polygonEnd:function(){n.polygonEnd(),v.lineStart=y}};function g(e,r){e=t(e,r),n.point(e[0],e[1])}function y(){s=NaN,v.point=_,n.lineStart()}function _(r,i){var o=Au([r,i]),a=t(r,i);e(s,l,f,h,d,p,s=a[0],l=a[1],f=r,h=o[0],d=o[1],p=o[2],Ss,n),n.point(s,l)}function b(){v.point=g,n.lineEnd()}function m(){y(),v.point=x,v.lineEnd=w}function x(t,n){_(r=t,n),i=s,o=l,a=h,u=d,c=p,v.point=_}function w(){e(s,l,f,h,d,p,i,o,r,a,u,c,Ss,n),v.lineEnd=b,b()}return v}}(t,n):function(t){return bs({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var Es=bs({point:function(t,n){this.stream.point(t*ja,n*ja)}});function Cs(t,n,e,r){var i=Va(r),o=Ja(r),a=i*t,u=o*t,c=i/t,f=o/t,s=(o*e-i*n)/t,l=(o*n+i*e)/t;function h(t,r){return[a*t-u*r+n,e-u*t-a*r]}return h.invert=function(t,n){return[c*t-f*n+s,l-f*t-c*n]},h}function Ps(t){return zs((function(){return t}))()}function zs(t){var n,e,r,i,o,a,u,c,f,s,l=150,h=480,d=250,p=0,v=0,g=0,y=0,_=0,b=0,m=null,x=Gc,w=null,M=xf,N=.5;function A(t){return c(t[0]*ja,t[1]*ja)}function S(t){return(t=c.invert(t[0],t[1]))&&[t[0]*Ia,t[1]*Ia]}function k(){var t=Cs(l,0,0,b).apply(null,n(p,v)),r=(b?Cs:function(t,n,e){function r(r,i){return[n+t*r,e-t*i]}return r.invert=function(r,i){return[(r-n)/t,(e-i)/t]},r})(l,h-t[0],d-t[1],b);return e=Ec(g,y,_),u=kc(n,r),c=kc(e,u),a=Ts(u,N),T()}function T(){return f=s=null,A}return A.stream=function(t){return f&&s===t?f:f=Es(function(t){return bs({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(x(a(M(s=t)))))},A.preclip=function(t){return arguments.length?(x=t,m=void 0,T()):x},A.postclip=function(t){return arguments.length?(M=t,w=r=i=o=null,T()):M},A.clipAngle=function(t){return arguments.length?(x=+t?Vc(m=t*ja):(m=null,Gc),T()):m*Ia},A.clipExtent=function(t){return arguments.length?(M=null==t?(w=r=i=o=null,xf):Zc(w=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),T()):null==w?null:[[w,r],[i,o]]},A.scale=function(t){return arguments.length?(l=+t,k()):l},A.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],k()):[h,d]},A.center=function(t){return arguments.length?(p=t[0]%360*ja,v=t[1]%360*ja,k()):[p*Ia,v*Ia]},A.rotate=function(t){return arguments.length?(g=t[0]%360*ja,y=t[1]%360*ja,_=t.length>2?t[2]%360*ja:0,k()):[g*Ia,y*Ia,_*Ia]},A.angle=function(t){return arguments.length?(b=t%360*ja,k()):b*Ia},A.precision=function(t){return arguments.length?(a=Ts(u,N=t*t),T()):tu(N)},A.fitExtent=function(t,n){return ws(A,t,n)},A.fitSize=function(t,n){return Ms(A,t,n)},A.fitWidth=function(t,n){return Ns(A,t,n)},A.fitHeight=function(t,n){return As(A,t,n)},function(){return n=t.apply(this,arguments),A.invert=n.invert&&S,k()}}function Rs(t){var n=0,e=Oa/3,r=zs(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*ja,e=t[1]*ja):[n*Ia,e*Ia]},i}function Ds(t,n){var e=Ja(t),r=(e+Ja(n))/2;if(Ha(r)<La)return function(t){var n=Va(t);function e(t,e){return[t*n,Ja(e)/n]}return e.invert=function(t,e){return[t/n,ru(e*n)]},e}(t);var i=1+e*(2*r-e),o=tu(i)/r;function a(t,n){var e=tu(i-2*r*Ja(n))/r;return[e*Ja(t*=r),o-e*Va(t)]}return a.invert=function(t,n){var e=o-n;return[Ga(t,Ha(e))/r*Ka(e),ru((i-(t*t+e*e)*r*r)/(2*r))]},a}function qs(){return Rs(Ds).scale(155.424).center([0,33.6442])}function Ls(){return qs().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Us(t){return function(n,e){var r=Va(n),i=Va(e),o=t(r*i);return[o*i*Ja(n),o*Ja(e)]}}function Os(t){return function(n,e){var r=tu(n*n+e*e),i=t(r),o=Ja(i),a=Va(i);return[Ga(n*o,r*a),ru(r&&e*o/r)]}}var Bs=Us((function(t){return tu(2/(1+t))}));Bs.invert=Os((function(t){return 2*ru(t/2)}));var Ys=Us((function(t){return(t=eu(t))&&t/Ja(t)}));function Fs(t,n){return[t,Za(nu((Ba+n)/2))]}function Is(t){var n,e,r,i=Ps(t),o=i.center,a=i.scale,u=i.translate,c=i.clipExtent,f=null;function s(){var o=Oa*a(),u=i(Rc(i.rotate()).invert([0,0]));return c(null==f?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:t===Fs?[[Math.max(u[0]-o,f),n],[Math.min(u[0]+o,e),r]]:[[f,Math.max(u[1]-o,n)],[e,Math.min(u[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),s()):a()},i.translate=function(t){return arguments.length?(u(t),s()):u()},i.center=function(t){return arguments.length?(o(t),s()):o()},i.clipExtent=function(t){return arguments.length?(null==t?f=n=e=r=null:(f=+t[0][0],n=+t[0][1],e=+t[1][0],r=+t[1][1]),s()):null==f?null:[[f,n],[e,r]]},s()}function js(t){return nu((Ba+t)/2)}function Hs(t,n){var e=Va(t),r=t===n?Ja(t):Za(e/Va(n))/Za(js(n)/js(t)),i=e*Qa(js(t),r)/r;if(!r)return Fs;function o(t,n){i>0?n<-Ba+La&&(n=-Ba+La):n>Ba-La&&(n=Ba-La);var e=i/Qa(js(n),r);return[e*Ja(r*t),i-e*Va(r*t)]}return o.invert=function(t,n){var e=i-n,o=Ka(r)*tu(t*t+e*e);return[Ga(t,Ha(e))/r*Ka(e),2*Xa(Qa(i/o,1/r))-Ba]},o}function Xs(t,n){return[t,n]}function Gs(t,n){var e=Va(t),r=t===n?Ja(t):(e-Va(n))/(n-t),i=e/r+t;if(Ha(r)<La)return Xs;function o(t,n){var e=i-n,o=r*t;return[e*Ja(o),i-e*Va(o)]}return o.invert=function(t,n){var e=i-n;return[Ga(t,Ha(e))/r*Ka(e),i-Ka(r)*tu(t*t+e*e)]},o}Ys.invert=Os((function(t){return t})),Fs.invert=function(t,n){return[t,2*Xa(Wa(n))-Ba]},Xs.invert=Xs;var Vs=1.340264,$s=-.081106,Ws=893e-6,Zs=.003796,Qs=tu(3)/2;function Js(t,n){var e=ru(Qs*Ja(n)),r=e*e,i=r*r*r;return[t*Va(e)/(Qs*(Vs+3*$s*r+i*(7*Ws+9*Zs*r))),e*(Vs+$s*r+i*(Ws+Zs*r))]}function Ks(t,n){var e=Va(n),r=Va(t)*e;return[e*Ja(t)/r,Ja(n)/r]}function tl(t,n,e,r){return 1===t&&1===n&&0===e&&0===r?xf:bs({point:function(i,o){this.stream.point(i*t+e,o*n+r)}})}function nl(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function el(t,n){return[Va(n)*Ja(t),Ja(n)]}function rl(t,n){var e=Va(n),r=1+Va(t)*e;return[e*Ja(t)/r,Ja(n)/r]}function il(t,n){return[Za(nu((Ba+n)/2)),-t]}function ol(t,n){return t.parent===n.parent?1:2}function al(t,n){return t+n.x}function ul(t,n){return Math.max(t,n.y)}function cl(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}function fl(t,n){var e,r,i,o,a,u=new dl(t),c=+t.value&&(u.value=t.value),f=[u];for(null==n&&(n=sl);e=f.pop();)if(c&&(e.value=+e.data.value),(i=n(e.data))&&(a=i.length))for(e.children=new Array(a),o=a-1;o>=0;--o)f.push(r=e.children[o]=new dl(i[o])),r.parent=e,r.depth=e.depth+1;return u.eachBefore(hl)}function sl(t){return t.children}function ll(t){t.data=t.data.data}function hl(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function dl(t){this.data=t,this.depth=this.height=0,this.parent=null}Js.invert=function(t,n){for(var e,r=n,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=e=(r*(Vs+$s*i+o*(Ws+Zs*i))-n)/(Vs+3*$s*i+o*(7*Ws+9*Zs*i)))*r)*i*i,!(Ha(e)<Ua));++a);return[Qs*t*(Vs+3*$s*i+o*(7*Ws+9*Zs*i))/Va(r),ru(Ja(r)/Qs)]},Ks.invert=Os(Xa),nl.invert=function(t,n){var e,r=n,i=25;do{var o=r*r,a=o*o;r-=e=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-n)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Ha(e)>La&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},el.invert=Os(ru),rl.invert=Os((function(t){return 2*Xa(t)})),il.invert=function(t,n){return[-n,2*Xa(Wa(t))-Ba]},dl.prototype=fl.prototype={constructor:dl,count:function(){return this.eachAfter(cl)},each:function(t){var n,e,r,i,o=this,a=[o];do{for(n=a.reverse(),a=[];o=n.pop();)if(t(o),e=o.children)for(r=0,i=e.length;r<i;++r)a.push(e[r])}while(a.length);return this},eachAfter:function(t){for(var n,e,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var n,e,r=this,i=[r];r=i.pop();)if(t(r),n=r.children)for(e=n.length-1;e>=0;--e)i.push(n[e]);return this},sum:function(t){return this.eachAfter((function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e}))},sort:function(t){return this.eachBefore((function(n){n.children&&n.children.sort(t)}))},path:function(t){for(var n=this,e=function(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},descendants:function(){var t=[];return this.each((function(n){t.push(n)})),t},leaves:function(){var t=[];return this.eachBefore((function(n){n.children||t.push(n)})),t},links:function(){var t=this,n=[];return t.each((function(e){e!==t&&n.push({source:e.parent,target:e})})),n},copy:function(){return fl(this).eachBefore(ll)}};var pl=Array.prototype.slice;function vl(t){for(var n,e,r=0,i=(t=function(t){for(var n,e,r=t.length;r;)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t}(pl.call(t))).length,o=[];r<i;)n=t[r],e&&_l(e,n)?++r:(e=ml(o=gl(o,n)),r=0);return e}function gl(t,n){var e,r;if(bl(n,t))return[n];for(e=0;e<t.length;++e)if(yl(n,t[e])&&bl(xl(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(yl(xl(t[e],t[r]),n)&&yl(xl(t[e],n),t[r])&&yl(xl(t[r],n),t[e])&&bl(wl(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function yl(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function _l(t,n){var e=t.r-n.r+1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function bl(t,n){for(var e=0;e<n.length;++e)if(!_l(t,n[e]))return!1;return!0}function ml(t){switch(t.length){case 1:return{x:(n=t[0]).x,y:n.y,r:n.r};case 2:return xl(t[0],t[1]);case 3:return wl(t[0],t[1],t[2])}var n}function xl(t,n){var e=t.x,r=t.y,i=t.r,o=n.x,a=n.y,u=n.r,c=o-e,f=a-r,s=u-i,l=Math.sqrt(c*c+f*f);return{x:(e+o+c/l*s)/2,y:(r+a+f/l*s)/2,r:(l+i+u)/2}}function wl(t,n,e){var r=t.x,i=t.y,o=t.r,a=n.x,u=n.y,c=n.r,f=e.x,s=e.y,l=e.r,h=r-a,d=r-f,p=i-u,v=i-s,g=c-o,y=l-o,_=r*r+i*i-o*o,b=_-a*a-u*u+c*c,m=_-f*f-s*s+l*l,x=d*p-h*v,w=(p*m-v*b)/(2*x)-r,M=(v*g-p*y)/x,N=(d*b-h*m)/(2*x)-i,A=(h*y-d*g)/x,S=M*M+A*A-1,k=2*(o+w*M+N*A),T=w*w+N*N-o*o,E=-(S?(k+Math.sqrt(k*k-4*S*T))/(2*S):T/k);return{x:r+w+M*E,y:i+N+A*E,r:E}}function Ml(t,n,e){var r,i,o,a,u=t.x-n.x,c=t.y-n.y,f=u*u+c*c;f?(i=n.r+e.r,i*=i,a=t.r+e.r,i>(a*=a)?(r=(f+a-i)/(2*f),o=Math.sqrt(Math.max(0,a/f-r*r)),e.x=t.x-r*u-o*c,e.y=t.y-r*c+o*u):(r=(f+i-a)/(2*f),o=Math.sqrt(Math.max(0,i/f-r*r)),e.x=n.x+r*u-o*c,e.y=n.y+r*c+o*u)):(e.x=n.x+e.r,e.y=n.y)}function Nl(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function Al(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,o=(n.y*e.r+e.y*n.r)/r;return i*i+o*o}function Sl(t){this._=t,this.next=null,this.previous=null}function kl(t){if(!(i=t.length))return 0;var n,e,r,i,o,a,u,c,f,s,l;if((n=t[0]).x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;Ml(e,n,r=t[2]),n=new Sl(n),e=new Sl(e),r=new Sl(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(u=3;u<i;++u){Ml(n._,e._,r=t[u]),r=new Sl(r),c=e.next,f=n.previous,s=e._.r,l=n._.r;do{if(s<=l){if(Nl(c._,r._)){e=c,n.next=e,e.previous=n,--u;continue t}s+=c._.r,c=c.next}else{if(Nl(f._,r._)){(n=f).next=e,e.previous=n,--u;continue t}l+=f._.r,f=f.previous}}while(c!==f.next);for(r.previous=n,r.next=e,n.next=e.previous=e=r,o=Al(n);(r=r.next)!==e;)(a=Al(r))<o&&(n=r,o=a);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=vl(n),u=0;u<i;++u)(n=t[u]).x-=r.x,n.y-=r.y;return r.r}function Tl(t){if("function"!=typeof t)throw new Error;return t}function El(){return 0}function Cl(t){return function(){return t}}function Pl(t){return Math.sqrt(t.value)}function zl(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Rl(t,n){return function(e){if(r=e.children){var r,i,o,a=r.length,u=t(e)*n||0;if(u)for(i=0;i<a;++i)r[i].r+=u;if(o=kl(r),u)for(i=0;i<a;++i)r[i].r-=u;e.r=o+u}}}function Dl(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function ql(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Ll(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,f=t.value&&(r-n)/t.value;++u<c;)(o=a[u]).y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*f}var Ul="$",Ol={depth:-1},Bl={};function Yl(t){return t.id}function Fl(t){return t.parentId}function Il(t,n){return t.parent===n.parent?1:2}function jl(t){var n=t.children;return n?n[0]:t.t}function Hl(t){var n=t.children;return n?n[n.length-1]:t.t}function Xl(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Gl(t,n,e){return t.a.parent===n.parent?t.a:e}function Vl(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function $l(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,f=t.value&&(i-e)/t.value;++u<c;)(o=a[u]).x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*f}Vl.prototype=Object.create(dl.prototype);var Wl=(1+Math.sqrt(5))/2;function Zl(t,n,e,r,i,o){for(var a,u,c,f,s,l,h,d,p,v,g,y=[],_=n.children,b=0,m=0,x=_.length,w=n.value;b<x;){c=i-e,f=o-r;do{s=_[m++].value}while(!s&&m<x);for(l=h=s,g=s*s*(v=Math.max(f/c,c/f)/(w*t)),p=Math.max(h/g,g/l);m<x;++m){if(s+=u=_[m].value,u<l&&(l=u),u>h&&(h=u),g=s*s*v,(d=Math.max(h/g,g/l))>p){s-=u;break}p=d}y.push(a={value:s,dice:c<f,children:_.slice(b,m)}),a.dice?Ll(a,e,r,i,w?r+=f*s/w:o):$l(a,e,r,w?e+=c*s/w:i,o),w-=s,b=m}return y}var Ql=function t(n){function e(t,e,r,i,o){Zl(n,t,e,r,i,o)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(Wl),Jl=function t(n){function e(t,e,r,i,o){if((a=t._squarify)&&a.ratio===n)for(var a,u,c,f,s,l=-1,h=a.length,d=t.value;++l<h;){for(c=(u=a[l]).children,f=u.value=0,s=c.length;f<s;++f)u.value+=c[f].value;u.dice?Ll(u,e,r,i,r+=(o-r)*u.value/d):$l(u,e,r,e+=(i-e)*u.value/d,o),d-=u.value}else t._squarify=a=Zl(n,t,e,r,i,o),a.ratio=n}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(Wl);function Kl(t,n){return t[0]-n[0]||t[1]-n[1]}function th(t){for(var n,e,r,i=t.length,o=[0,1],a=2,u=2;u<i;++u){for(;a>1&&(n=t[o[a-2]],e=t[o[a-1]],r=t[u],(e[0]-n[0])*(r[1]-n[1])-(e[1]-n[1])*(r[0]-n[0])<=0);)--a;o[a++]=u}return o.slice(0,a)}function nh(){return Math.random()}var eh=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(nh),rh=function t(n){function e(t,e){var r,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var o;if(null!=r)o=r,r=null;else do{r=2*n()-1,o=2*n()-1,i=r*r+o*o}while(!i||i>1);return t+e*o*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(nh),ih=function t(n){function e(){var t=rh.source(n).apply(this,arguments);return function(){return Math.exp(t())}}return e.source=t,e}(nh),oh=function t(n){function e(t){return function(){for(var e=0,r=0;r<t;++r)e+=n();return e}}return e.source=t,e}(nh),ah=function t(n){function e(t){var e=oh.source(n)(t);return function(){return e()/t}}return e.source=t,e}(nh),uh=function t(n){function e(t){return function(){return-Math.log(1-n())/t}}return e.source=t,e}(nh);function ch(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function fh(t,n){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(n).domain(t)}return this}var sh=Array.prototype,lh=sh.map,hh=sh.slice,dh={name:"implicit"};function ph(){var t=Qi(),n=[],e=[],r=dh;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==dh)return r;t.set(o,a=n.push(i))}return e[(a-1)%e.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=Qi();for(var r,o,a=-1,u=e.length;++a<u;)t.has(o=(r=e[a])+"")||t.set(o,n.push(r));return i},i.range=function(t){return arguments.length?(e=hh.call(t),i):e.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return ph(n,e).unknown(r)},ch.apply(i,arguments),i}function vh(){var t,n,e=ph().unknown(void 0),r=e.domain,i=e.range,o=[0,1],a=!1,u=0,c=0,f=.5;function s(){var e=r().length,s=o[1]<o[0],l=o[s-0],h=o[1-s];t=(h-l)/Math.max(1,e-u+2*c),a&&(t=Math.floor(t)),l+=(h-l-t*(e-u))*f,n=t*(1-u),a&&(l=Math.round(l),n=Math.round(n));var d=g(e).map((function(n){return l+t*n}));return i(s?d.reverse():d)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),s()):r()},e.range=function(t){return arguments.length?(o=[+t[0],+t[1]],s()):o.slice()},e.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,s()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(a=!!t,s()):a},e.padding=function(t){return arguments.length?(u=Math.min(1,c=+t),s()):u},e.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),s()):u},e.paddingOuter=function(t){return arguments.length?(c=+t,s()):c},e.align=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),s()):f},e.copy=function(){return vh(r(),o).round(a).paddingInner(u).paddingOuter(c).align(f)},ch.apply(s(),arguments)}function gh(t){return+t}var yh=[0,1];function _h(t){return t}function bh(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function mh(t){var n,e=t[0],r=t[t.length-1];return e>r&&(n=e,e=r,r=n),function(t){return Math.max(e,Math.min(r,t))}}function xh(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=bh(i,r),o=e(a,o)):(r=bh(r,i),o=e(o,a)),function(t){return o(r(t))}}function wh(t,n,e){var r=Math.min(t.length,n.length)-1,o=new Array(r),a=new Array(r),u=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++u<r;)o[u]=bh(t[u],t[u+1]),a[u]=e(n[u],n[u+1]);return function(n){var e=i(t,n,1,r)-1;return a[e](o[e](n))}}function Mh(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Nh(){var t,n,e,r,i,o,a=yh,u=yh,c=ye,f=_h;function s(){return r=Math.min(a.length,u.length)>2?wh:xh,i=o=null,l}function l(n){return isNaN(n=+n)?e:(i||(i=r(a.map(t),u,c)))(t(f(n)))}return l.invert=function(e){return f(n((o||(o=r(u,a.map(t),he)))(e)))},l.domain=function(t){return arguments.length?(a=lh.call(t,gh),f===_h||(f=mh(a)),s()):a.slice()},l.range=function(t){return arguments.length?(u=hh.call(t),s()):u.slice()},l.rangeRound=function(t){return u=hh.call(t),c=_e,s()},l.clamp=function(t){return arguments.length?(f=t?mh(a):_h,l):f!==_h},l.interpolate=function(t){return arguments.length?(c=t,s()):c},l.unknown=function(t){return arguments.length?(e=t,l):e},function(e,r){return t=e,n=r,s()}}function Ah(t,n){return Nh()(t,n)}function Sh(n,e,r,i){var o,a=w(n,e,r);switch((i=ma(null==i?",f":i)).type){case"s":var u=Math.max(Math.abs(n),Math.abs(e));return null!=i.precision||isNaN(o=Ca(a,u))||(i.precision=o),t.formatPrefix(i,u);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=Pa(a,Math.max(Math.abs(n),Math.abs(e))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=Ea(a))||(i.precision=o-2*("%"===i.type))}return t.format(i)}function kh(t){var n=t.domain;return t.ticks=function(t){var e=n();return m(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return Sh(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i=n(),o=0,a=i.length-1,u=i[o],c=i[a];return c<u&&(r=u,u=c,c=r,r=o,o=a,a=r),(r=x(u,c,e))>0?r=x(u=Math.floor(u/r)*r,c=Math.ceil(c/r)*r,e):r<0&&(r=x(u=Math.ceil(u*r)/r,c=Math.floor(c*r)/r,e)),r>0?(i[o]=Math.floor(u/r)*r,i[a]=Math.ceil(c/r)*r,n(i)):r<0&&(i[o]=Math.ceil(u*r)/r,i[a]=Math.floor(c*r)/r,n(i)),t},t}function Th(t,n){var e,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function Eh(t){return Math.log(t)}function Ch(t){return Math.exp(t)}function Ph(t){return-Math.log(-t)}function zh(t){return-Math.exp(-t)}function Rh(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Dh(t){return function(n){return-t(-n)}}function qh(n){var e,r,i=n(Eh,Ch),o=i.domain,a=10;function u(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(n){return Math.log(n)/t})}(a),r=function(t){return 10===t?Rh:t===Math.E?Math.exp:function(n){return Math.pow(t,n)}}(a),o()[0]<0?(e=Dh(e),r=Dh(r),n(Ph,zh)):n(Eh,Ch),i}return i.base=function(t){return arguments.length?(a=+t,u()):a},i.domain=function(t){return arguments.length?(o(t),u()):o()},i.ticks=function(t){var n,i=o(),u=i[0],c=i[i.length-1];(n=c<u)&&(h=u,u=c,c=h);var f,s,l,h=e(u),d=e(c),p=null==t?10:+t,v=[];if(!(a%1)&&d-h<p){if(h=Math.round(h)-1,d=Math.round(d)+1,u>0){for(;h<d;++h)for(s=1,f=r(h);s<a;++s)if(!((l=f*s)<u)){if(l>c)break;v.push(l)}}else for(;h<d;++h)for(s=a-1,f=r(h);s>=1;--s)if(!((l=f*s)<u)){if(l>c)break;v.push(l)}}else v=m(h,d,Math.min(d-h,p)).map(r);return n?v.reverse():v},i.tickFormat=function(n,o){if(null==o&&(o=10===a?".0e":","),"function"!=typeof o&&(o=t.format(o)),n===1/0)return o;null==n&&(n=10);var u=Math.max(1,a*n/i.ticks().length);return function(t){var n=t/r(Math.round(e(t)));return n*a<a-.5&&(n*=a),n<=u?o(t):""}},i.nice=function(){return o(Th(o(),{floor:function(t){return r(Math.floor(e(t)))},ceil:function(t){return r(Math.ceil(e(t)))}}))},i}function Lh(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function Uh(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function Oh(t){var n=1,e=t(Lh(n),Uh(n));return e.constant=function(e){return arguments.length?t(Lh(n=+e),Uh(n)):n},kh(e)}function Bh(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function Yh(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Fh(t){return t<0?-t*t:t*t}function Ih(t){var n=t(_h,_h),e=1;return n.exponent=function(n){return arguments.length?1==(e=+n)?t(_h,_h):.5===e?t(Yh,Fh):t(Bh(e),Bh(1/e)):e},kh(n)}function jh(){var t=Ih(Nh());return t.copy=function(){return Mh(t,jh()).exponent(t.exponent())},ch.apply(t,arguments),t}var Hh=new Date,Xh=new Date;function Gh(t,n,e,r){function i(n){return t(n=new Date(+n)),n}return i.floor=i,i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var a,u=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return u;do{u.push(a=new Date(+e)),n(e,o),t(e)}while(a<e&&e<r);return u},i.filter=function(e){return Gh((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(i.count=function(n,r){return Hh.setTime(+n),Xh.setTime(+r),t(Hh),t(Xh),Math.floor(e(Hh,Xh))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}var Vh=Gh((function(){}),(function(t,n){t.setTime(+t+n)}),(function(t,n){return n-t}));Vh.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Gh((function(n){n.setTime(Math.floor(n/t)*t)}),(function(n,e){n.setTime(+n+e*t)}),(function(n,e){return(e-n)/t})):Vh:null};var $h=Vh.range,Wh=6e4,Zh=6048e5,Qh=Gh((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,n){t.setTime(+t+1e3*n)}),(function(t,n){return(n-t)/1e3}),(function(t){return t.getUTCSeconds()})),Jh=Qh.range,Kh=Gh((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,n){t.setTime(+t+n*Wh)}),(function(t,n){return(n-t)/Wh}),(function(t){return t.getMinutes()})),td=Kh.range,nd=Gh((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*Wh)}),(function(t,n){t.setTime(+t+36e5*n)}),(function(t,n){return(n-t)/36e5}),(function(t){return t.getHours()})),ed=nd.range,rd=Gh((function(t){t.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Wh)/864e5}),(function(t){return t.getDate()-1})),id=rd.range;function od(t){return Gh((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Wh)/Zh}))}var ad=od(0),ud=od(1),cd=od(2),fd=od(3),sd=od(4),ld=od(5),hd=od(6),dd=ad.range,pd=ud.range,vd=cd.range,gd=fd.range,yd=sd.range,_d=ld.range,bd=hd.range,md=Gh((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),xd=md.range,wd=Gh((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));wd.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Gh((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};var Md=wd.range,Nd=Gh((function(t){t.setUTCSeconds(0,0)}),(function(t,n){t.setTime(+t+n*Wh)}),(function(t,n){return(n-t)/Wh}),(function(t){return t.getUTCMinutes()})),Ad=Nd.range,Sd=Gh((function(t){t.setUTCMinutes(0,0,0)}),(function(t,n){t.setTime(+t+36e5*n)}),(function(t,n){return(n-t)/36e5}),(function(t){return t.getUTCHours()})),kd=Sd.range,Td=Gh((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/864e5}),(function(t){return t.getUTCDate()-1})),Ed=Td.range;function Cd(t){return Gh((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/Zh}))}var Pd=Cd(0),zd=Cd(1),Rd=Cd(2),Dd=Cd(3),qd=Cd(4),Ld=Cd(5),Ud=Cd(6),Od=Pd.range,Bd=zd.range,Yd=Rd.range,Fd=Dd.range,Id=qd.range,jd=Ld.range,Hd=Ud.range,Xd=Gh((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCMonth(t.getUTCMonth()+n)}),(function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Gd=Xd.range,Vd=Gh((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Vd.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Gh((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};var $d=Vd.range;function Wd(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Zd(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qd(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function Jd(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,u=t.months,c=t.shortMonths,f=ap(i),s=up(i),l=ap(o),h=up(o),d=ap(a),p=up(a),v=ap(u),g=up(u),y=ap(c),_=up(c),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:kp,e:kp,f:zp,H:Tp,I:Ep,j:Cp,L:Pp,m:Rp,M:Dp,p:function(t){return i[+(t.getHours()>=12)]},Q:cv,s:fv,S:qp,u:Lp,U:Up,V:Op,w:Bp,W:Yp,x:null,X:null,y:Fp,Y:Ip,Z:jp,"%":uv},m={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:Hp,e:Hp,f:Wp,H:Xp,I:Gp,j:Vp,L:$p,m:Zp,M:Qp,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:cv,s:fv,S:Jp,u:Kp,U:tv,V:nv,w:ev,W:rv,x:null,X:null,y:iv,Y:ov,Z:av,"%":uv},x={a:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=p[r[0].toLowerCase()],e+r[0].length):-1},A:function(t,n,e){var r=l.exec(n.slice(e));return r?(t.w=h[r[0].toLowerCase()],e+r[0].length):-1},b:function(t,n,e){var r=y.exec(n.slice(e));return r?(t.m=_[r[0].toLowerCase()],e+r[0].length):-1},B:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=g[r[0].toLowerCase()],e+r[0].length):-1},c:function(t,e,r){return N(t,n,e,r)},d:yp,e:yp,f:Mp,H:bp,I:bp,j:_p,L:wp,m:gp,M:mp,p:function(t,n,e){var r=f.exec(n.slice(e));return r?(t.p=s[r[0].toLowerCase()],e+r[0].length):-1},Q:Ap,s:Sp,S:xp,u:fp,U:sp,V:lp,w:cp,W:hp,x:function(t,n,r){return N(t,e,n,r)},X:function(t,n,e){return N(t,r,n,e)},y:pp,Y:dp,Z:vp,"%":Np};function w(t,n){return function(e){var r,i,o,a=[],u=-1,c=0,f=t.length;for(e instanceof Date||(e=new Date(+e));++u<f;)37===t.charCodeAt(u)&&(a.push(t.slice(c,u)),null!=(i=tp[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),a.push(r),c=u+1);return a.push(t.slice(c,u)),a.join("")}}function M(t,n){return function(e){var r,i,o=Qd(1900);if(N(o,t,e+="",0)!=e.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Zd(Qd(o.y))).getUTCDay(),r=i>4||0===i?zd.ceil(r):zd(r),r=Td.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=n(Qd(o.y))).getDay(),r=i>4||0===i?ud.ceil(r):ud(r),r=rd.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Zd(Qd(o.y)).getUTCDay():n(Qd(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Zd(o)):n(o)}}function N(t,n,e,r){for(var i,o,a=0,u=n.length,c=e.length;a<u;){if(r>=c)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=x[i in tp?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return b.x=w(e,b),b.X=w(r,b),b.c=w(n,b),m.x=w(e,m),m.X=w(r,m),m.c=w(n,m),{format:function(t){var n=w(t+="",b);return n.toString=function(){return t},n},parse:function(t){var n=M(t+="",Wd);return n.toString=function(){return t},n},utcFormat:function(t){var n=w(t+="",m);return n.toString=function(){return t},n},utcParse:function(t){var n=M(t,Zd);return n.toString=function(){return t},n}}}var Kd,tp={"-":"",_:" ",0:"0"},np=/^\s*\d+/,ep=/^%/,rp=/[\\^$*+?|[\]().{}]/g;function ip(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function op(t){return t.replace(rp,"\\$&")}function ap(t){return new RegExp("^(?:"+t.map(op).join("|")+")","i")}function up(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function cp(t,n,e){var r=np.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function fp(t,n,e){var r=np.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function sp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function lp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function hp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function dp(t,n,e){var r=np.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function pp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function vp(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function gp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function yp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function _p(t,n,e){var r=np.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function bp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function mp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function xp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function wp(t,n,e){var r=np.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function Mp(t,n,e){var r=np.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function Np(t,n,e){var r=ep.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function Ap(t,n,e){var r=np.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function Sp(t,n,e){var r=np.exec(n.slice(e));return r?(t.Q=1e3*+r[0],e+r[0].length):-1}function kp(t,n){return ip(t.getDate(),n,2)}function Tp(t,n){return ip(t.getHours(),n,2)}function Ep(t,n){return ip(t.getHours()%12||12,n,2)}function Cp(t,n){return ip(1+rd.count(wd(t),t),n,3)}function Pp(t,n){return ip(t.getMilliseconds(),n,3)}function zp(t,n){return Pp(t,n)+"000"}function Rp(t,n){return ip(t.getMonth()+1,n,2)}function Dp(t,n){return ip(t.getMinutes(),n,2)}function qp(t,n){return ip(t.getSeconds(),n,2)}function Lp(t){var n=t.getDay();return 0===n?7:n}function Up(t,n){return ip(ad.count(wd(t),t),n,2)}function Op(t,n){var e=t.getDay();return t=e>=4||0===e?sd(t):sd.ceil(t),ip(sd.count(wd(t),t)+(4===wd(t).getDay()),n,2)}function Bp(t){return t.getDay()}function Yp(t,n){return ip(ud.count(wd(t),t),n,2)}function Fp(t,n){return ip(t.getFullYear()%100,n,2)}function Ip(t,n){return ip(t.getFullYear()%1e4,n,4)}function jp(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+ip(n/60|0,"0",2)+ip(n%60,"0",2)}function Hp(t,n){return ip(t.getUTCDate(),n,2)}function Xp(t,n){return ip(t.getUTCHours(),n,2)}function Gp(t,n){return ip(t.getUTCHours()%12||12,n,2)}function Vp(t,n){return ip(1+Td.count(Vd(t),t),n,3)}function $p(t,n){return ip(t.getUTCMilliseconds(),n,3)}function Wp(t,n){return $p(t,n)+"000"}function Zp(t,n){return ip(t.getUTCMonth()+1,n,2)}function Qp(t,n){return ip(t.getUTCMinutes(),n,2)}function Jp(t,n){return ip(t.getUTCSeconds(),n,2)}function Kp(t){var n=t.getUTCDay();return 0===n?7:n}function tv(t,n){return ip(Pd.count(Vd(t),t),n,2)}function nv(t,n){var e=t.getUTCDay();return t=e>=4||0===e?qd(t):qd.ceil(t),ip(qd.count(Vd(t),t)+(4===Vd(t).getUTCDay()),n,2)}function ev(t){return t.getUTCDay()}function rv(t,n){return ip(zd.count(Vd(t),t),n,2)}function iv(t,n){return ip(t.getUTCFullYear()%100,n,2)}function ov(t,n){return ip(t.getUTCFullYear()%1e4,n,4)}function av(){return"+0000"}function uv(){return"%"}function cv(t){return+t}function fv(t){return Math.floor(+t/1e3)}function sv(n){return Kd=Jd(n),t.timeFormat=Kd.format,t.timeParse=Kd.parse,t.utcFormat=Kd.utcFormat,t.utcParse=Kd.utcParse,Kd}sv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var lv=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),hv=+new Date("2000-01-01T00:00:00.000Z")?function(t){var n=new Date(t);return isNaN(n)?null:n}:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),dv=1e3,pv=60*dv,vv=60*pv,gv=24*vv,yv=7*gv,_v=30*gv,bv=365*gv;function mv(t){return new Date(t)}function xv(t){return t instanceof Date?+t:+new Date(+t)}function wv(t,n,r,i,o,a,u,c,f){var s=Ah(_h,_h),l=s.invert,h=s.domain,d=f(".%L"),p=f(":%S"),v=f("%I:%M"),g=f("%I %p"),y=f("%a %d"),_=f("%b %d"),b=f("%B"),m=f("%Y"),x=[[u,1,dv],[u,5,5*dv],[u,15,15*dv],[u,30,30*dv],[a,1,pv],[a,5,5*pv],[a,15,15*pv],[a,30,30*pv],[o,1,vv],[o,3,3*vv],[o,6,6*vv],[o,12,12*vv],[i,1,gv],[i,2,2*gv],[r,1,yv],[n,1,_v],[n,3,3*_v],[t,1,bv]];function M(e){return(u(e)<e?d:a(e)<e?p:o(e)<e?v:i(e)<e?g:n(e)<e?r(e)<e?y:_:t(e)<e?b:m)(e)}function N(n,r,i,o){if(null==n&&(n=10),"number"==typeof n){var a=Math.abs(i-r)/n,u=e((function(t){return t[2]})).right(x,a);u===x.length?(o=w(r/bv,i/bv,n),n=t):u?(o=(u=x[a/x[u-1][2]<x[u][2]/a?u-1:u])[1],n=u[0]):(o=Math.max(w(r,i,n),1),n=c)}return null==o?n:n.every(o)}return s.invert=function(t){return new Date(l(t))},s.domain=function(t){return arguments.length?h(lh.call(t,xv)):h().map(mv)},s.ticks=function(t,n){var e,r=h(),i=r[0],o=r[r.length-1],a=o<i;return a&&(e=i,i=o,o=e),e=(e=N(t,i,o,n))?e.range(i,o+1):[],a?e.reverse():e},s.tickFormat=function(t,n){return null==n?M:f(n)},s.nice=function(t,n){var e=h();return(t=N(t,e[0],e[e.length-1],n))?h(Th(e,t)):s},s.copy=function(){return Mh(s,wv(t,n,r,i,o,a,u,c,f))},s}function Mv(){var t,n,e,r,i,o=0,a=1,u=_h,c=!1;function f(n){return isNaN(n=+n)?i:u(0===e?.5:(n=(r(n)-t)*e,c?Math.max(0,Math.min(1,n)):n))}return f.domain=function(i){return arguments.length?(t=r(o=+i[0]),n=r(a=+i[1]),e=t===n?0:1/(n-t),f):[o,a]},f.clamp=function(t){return arguments.length?(c=!!t,f):c},f.interpolator=function(t){return arguments.length?(u=t,f):u},f.unknown=function(t){return arguments.length?(i=t,f):i},function(i){return r=i,t=i(o),n=i(a),e=t===n?0:1/(n-t),f}}function Nv(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Av(){var t=Ih(Mv());return t.copy=function(){return Nv(t,Av()).exponent(t.exponent())},fh.apply(t,arguments)}function Sv(){var t,n,e,r,i,o,a,u=0,c=.5,f=1,s=_h,l=!1;function h(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-n)*(t<n?r:i),s(l?Math.max(0,Math.min(1,t)):t))}return h.domain=function(a){return arguments.length?(t=o(u=+a[0]),n=o(c=+a[1]),e=o(f=+a[2]),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),h):[u,c,f]},h.clamp=function(t){return arguments.length?(l=!!t,h):l},h.interpolator=function(t){return arguments.length?(s=t,h):s},h.unknown=function(t){return arguments.length?(a=t,h):a},function(a){return o=a,t=a(u),n=a(c),e=a(f),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),h}}function kv(){var t=Ih(Sv());return t.copy=function(){return Nv(t,kv()).exponent(t.exponent())},fh.apply(t,arguments)}function Tv(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}var Ev=Tv("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Cv=Tv("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Pv=Tv("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),zv=Tv("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Rv=Tv("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Dv=Tv("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),qv=Tv("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Lv=Tv("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Uv=Tv("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Ov(t){return ce(t[t.length-1])}var Bv=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Tv),Yv=Ov(Bv),Fv=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Tv),Iv=Ov(Fv),jv=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Tv),Hv=Ov(jv),Xv=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Tv),Gv=Ov(Xv),Vv=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Tv),$v=Ov(Vv),Wv=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Tv),Zv=Ov(Wv),Qv=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Tv),Jv=Ov(Qv),Kv=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Tv),tg=Ov(Kv),ng=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Tv),eg=Ov(ng),rg=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Tv),ig=Ov(rg),og=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Tv),ag=Ov(og),ug=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Tv),cg=Ov(ug),fg=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Tv),sg=Ov(fg),lg=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Tv),hg=Ov(lg),dg=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Tv),pg=Ov(dg),vg=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Tv),gg=Ov(vg),yg=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Tv),_g=Ov(yg),bg=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Tv),mg=Ov(bg),xg=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Tv),wg=Ov(xg),Mg=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Tv),Ng=Ov(Mg),Ag=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Tv),Sg=Ov(Ag),kg=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Tv),Tg=Ov(kg),Eg=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Tv),Cg=Ov(Eg),Pg=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Tv),zg=Ov(Pg),Rg=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Tv),Dg=Ov(Rg),qg=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Tv),Lg=Ov(qg),Ug=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Tv),Og=Ov(Ug),Bg=je(Zn(300,.5,0),Zn(-240,.5,1)),Yg=je(Zn(-100,.75,.35),Zn(80,1.5,.8)),Fg=je(Zn(260,.75,.35),Zn(80,1.5,.8)),Ig=Zn(),jg=gn(),Hg=Math.PI/3,Xg=2*Math.PI/3;function Gg(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}var Vg=Gg(Tv("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),$g=Gg(Tv("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Wg=Gg(Tv("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Zg=Gg(Tv("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Qg(t){return function(){return t}}var Jg=Math.abs,Kg=Math.atan2,ty=Math.cos,ny=Math.max,ey=Math.min,ry=Math.sin,iy=Math.sqrt,oy=1e-12,ay=Math.PI,uy=ay/2,cy=2*ay;function fy(t){return t>=1?uy:t<=-1?-uy:Math.asin(t)}function sy(t){return t.innerRadius}function ly(t){return t.outerRadius}function hy(t){return t.startAngle}function dy(t){return t.endAngle}function py(t){return t&&t.padAngle}function vy(t,n,e,r,i,o,a){var u=t-e,c=n-r,f=(a?o:-o)/iy(u*u+c*c),s=f*c,l=-f*u,h=t+s,d=n+l,p=e+s,v=r+l,g=(h+p)/2,y=(d+v)/2,_=p-h,b=v-d,m=_*_+b*b,x=i-o,w=h*v-p*d,M=(b<0?-1:1)*iy(ny(0,x*x*m-w*w)),N=(w*b-_*M)/m,A=(-w*_-b*M)/m,S=(w*b+_*M)/m,k=(-w*_+b*M)/m,T=N-g,E=A-y,C=S-g,P=k-y;return T*T+E*E>C*C+P*P&&(N=S,A=k),{cx:N,cy:A,x01:-s,y01:-l,x11:N*(i/x-1),y11:A*(i/x-1)}}function gy(t){this._context=t}function yy(t){return new gy(t)}function _y(t){return t[0]}function by(t){return t[1]}function my(){var t=_y,n=by,e=Qg(!0),r=null,i=yy,o=null;function a(a){var u,c,f,s=a.length,l=!1;for(null==r&&(o=i(f=Hi())),u=0;u<=s;++u)!(u<s&&e(c=a[u],u,a))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(c,u,a),+n(c,u,a));if(f)return o=null,f+""||null}return a.x=function(n){return arguments.length?(t="function"==typeof n?n:Qg(+n),a):t},a.y=function(t){return arguments.length?(n="function"==typeof t?t:Qg(+t),a):n},a.defined=function(t){return arguments.length?(e="function"==typeof t?t:Qg(!!t),a):e},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function xy(){var t=_y,n=null,e=Qg(0),r=by,i=Qg(!0),o=null,a=yy,u=null;function c(c){var f,s,l,h,d,p=c.length,v=!1,g=new Array(p),y=new Array(p);for(null==o&&(u=a(d=Hi())),f=0;f<=p;++f){if(!(f<p&&i(h=c[f],f,c))===v)if(v=!v)s=f,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),l=f-1;l>=s;--l)u.point(g[l],y[l]);u.lineEnd(),u.areaEnd()}v&&(g[f]=+t(h,f,c),y[f]=+e(h,f,c),u.point(n?+n(h,f,c):g[f],r?+r(h,f,c):y[f]))}if(d)return u=null,d+""||null}function f(){return my().defined(i).curve(a).context(o)}return c.x=function(e){return arguments.length?(t="function"==typeof e?e:Qg(+e),n=null,c):t},c.x0=function(n){return arguments.length?(t="function"==typeof n?n:Qg(+n),c):t},c.x1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:Qg(+t),c):n},c.y=function(t){return arguments.length?(e="function"==typeof t?t:Qg(+t),r=null,c):e},c.y0=function(t){return arguments.length?(e="function"==typeof t?t:Qg(+t),c):e},c.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Qg(+t),c):r},c.lineX0=c.lineY0=function(){return f().x(t).y(e)},c.lineY1=function(){return f().x(t).y(r)},c.lineX1=function(){return f().x(n).y(e)},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:Qg(!!t),c):i},c.curve=function(t){return arguments.length?(a=t,null!=o&&(u=a(o)),c):a},c.context=function(t){return arguments.length?(null==t?o=u=null:u=a(o=t),c):o},c}function wy(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function My(t){return t}gy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var Ny=Sy(yy);function Ay(t){this._curve=t}function Sy(t){function n(n){return new Ay(t(n))}return n._curve=t,n}function ky(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(Sy(t)):n()._curve},t}function Ty(){return ky(my().curve(Ny))}function Ey(){var t=xy().curve(Ny),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return ky(e())},delete t.lineX0,t.lineEndAngle=function(){return ky(r())},delete t.lineX1,t.lineInnerRadius=function(){return ky(i())},delete t.lineY0,t.lineOuterRadius=function(){return ky(o())},delete t.lineY1,t.curve=function(t){return arguments.length?n(Sy(t)):n()._curve},t}function Cy(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}Ay.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};var Py=Array.prototype.slice;function zy(t){return t.source}function Ry(t){return t.target}function Dy(t){var n=zy,e=Ry,r=_y,i=by,o=null;function a(){var a,u=Py.call(arguments),c=n.apply(this,u),f=e.apply(this,u);if(o||(o=a=Hi()),t(o,+r.apply(this,(u[0]=c,u)),+i.apply(this,u),+r.apply(this,(u[0]=f,u)),+i.apply(this,u)),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(n=t,a):n},a.target=function(t){return arguments.length?(e=t,a):e},a.x=function(t){return arguments.length?(r="function"==typeof t?t:Qg(+t),a):r},a.y=function(t){return arguments.length?(i="function"==typeof t?t:Qg(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}function qy(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n=(n+r)/2,e,n,i,r,i)}function Ly(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n,e=(e+i)/2,r,e,r,i)}function Uy(t,n,e,r,i){var o=Cy(n,e),a=Cy(n,e=(e+i)/2),u=Cy(r,e),c=Cy(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],u[0],u[1],c[0],c[1])}var Oy={draw:function(t,n){var e=Math.sqrt(n/ay);t.moveTo(e,0),t.arc(0,0,e,0,cy)}},By={draw:function(t,n){var e=Math.sqrt(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},Yy=Math.sqrt(1/3),Fy=2*Yy,Iy={draw:function(t,n){var e=Math.sqrt(n/Fy),r=e*Yy;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}},jy=Math.sin(ay/10)/Math.sin(7*ay/10),Hy=Math.sin(cy/10)*jy,Xy=-Math.cos(cy/10)*jy,Gy={draw:function(t,n){var e=Math.sqrt(.8908130915292852*n),r=Hy*e,i=Xy*e;t.moveTo(0,-e),t.lineTo(r,i);for(var o=1;o<5;++o){var a=cy*o/5,u=Math.cos(a),c=Math.sin(a);t.lineTo(c*e,-u*e),t.lineTo(u*r-c*i,c*r+u*i)}t.closePath()}},Vy={draw:function(t,n){var e=Math.sqrt(n),r=-e/2;t.rect(r,r,e,e)}},$y=Math.sqrt(3),Wy={draw:function(t,n){var e=-Math.sqrt(n/(3*$y));t.moveTo(0,2*e),t.lineTo(-$y*e,-e),t.lineTo($y*e,-e),t.closePath()}},Zy=Math.sqrt(3)/2,Qy=1/Math.sqrt(12),Jy=3*(Qy/2+1),Ky={draw:function(t,n){var e=Math.sqrt(n/Jy),r=e/2,i=e*Qy,o=r,a=e*Qy+e,u=-o,c=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(u,c),t.lineTo(-.5*r-Zy*i,Zy*r+-.5*i),t.lineTo(-.5*o-Zy*a,Zy*o+-.5*a),t.lineTo(-.5*u-Zy*c,Zy*u+-.5*c),t.lineTo(-.5*r+Zy*i,-.5*i-Zy*r),t.lineTo(-.5*o+Zy*a,-.5*a-Zy*o),t.lineTo(-.5*u+Zy*c,-.5*c-Zy*u),t.closePath()}},t_=[Oy,By,Iy,Vy,Gy,Wy,Ky];function n_(){}function e_(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function r_(t){this._context=t}function i_(t){this._context=t}function o_(t){this._context=t}function a_(t,n){this._basis=new r_(t),this._beta=n}r_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:e_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:e_(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},i_.prototype={areaStart:n_,areaEnd:n_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:e_(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},o_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:e_(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},a_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],o=n[0],a=t[e]-i,u=n[e]-o,c=-1;++c<=e;)r=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*a),this._beta*n[c]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var u_=function t(n){function e(t){return 1===n?new r_(t):new a_(t,n)}return e.beta=function(n){return t(+n)},e}(.85);function c_(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function f_(t,n){this._context=t,this._k=(1-n)/6}f_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:c_(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:c_(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var s_=function t(n){function e(t){return new f_(t,n)}return e.tension=function(n){return t(+n)},e}(0);function l_(t,n){this._context=t,this._k=(1-n)/6}l_.prototype={areaStart:n_,areaEnd:n_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:c_(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var h_=function t(n){function e(t){return new l_(t,n)}return e.tension=function(n){return t(+n)},e}(0);function d_(t,n){this._context=t,this._k=(1-n)/6}d_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:c_(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var p_=function t(n){function e(t){return new d_(t,n)}return e.tension=function(n){return t(+n)},e}(0);function v_(t,n,e){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>oy){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>oy){var f=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,s=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*f+t._x1*t._l23_2a-n*t._l12_2a)/s,a=(a*f+t._y1*t._l23_2a-e*t._l12_2a)/s}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function g_(t,n){this._context=t,this._alpha=n}g_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:v_(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var y_=function t(n){function e(t){return n?new g_(t,n):new f_(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function __(t,n){this._context=t,this._alpha=n}__.prototype={areaStart:n_,areaEnd:n_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:v_(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var b_=function t(n){function e(t){return n?new __(t,n):new l_(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function m_(t,n){this._context=t,this._alpha=n}m_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:v_(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var x_=function t(n){function e(t){return n?new m_(t,n):new d_(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function w_(t){this._context=t}function M_(t){return t<0?-1:1}function N_(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(M_(o)+M_(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function A_(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function S_(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*n,o-u,a-u*e,o,a)}function k_(t){this._context=t}function T_(t){this._context=new E_(t)}function E_(t){this._context=t}function C_(t){this._context=t}function P_(t){var n,e,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,o[n]=4,a[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/o[n-1],o[n]-=e,a[n]-=e*a[n-1];for(i[r-1]=a[r-1]/o[r-1],n=r-2;n>=0;--n)i[n]=(a[n]-i[n+1])/o[n];for(o[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function z_(t,n){this._context=t,this._t=n}function R_(t,n){if((i=t.length)>1)for(var e,r,i,o=1,a=t[n[0]],u=a.length;o<i;++o)for(r=a,a=t[n[o]],e=0;e<u;++e)a[e][1]+=a[e][0]=isNaN(r[e][1])?r[e][0]:r[e][1]}function D_(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}function q_(t,n){return t[n]}function L_(t){var n=t.map(U_);return D_(t).sort((function(t,e){return n[t]-n[e]}))}function U_(t){for(var n,e=-1,r=0,i=t.length,o=-1/0;++e<i;)(n=+t[e][1])>o&&(o=n,r=e);return r}function O_(t){var n=t.map(B_);return D_(t).sort((function(t,e){return n[t]-n[e]}))}function B_(t){for(var n,e=0,r=-1,i=t.length;++r<i;)(n=+t[r][1])&&(e+=n);return e}function Y_(t){return function(){return t}}function F_(t){return t[0]}function I_(t){return t[1]}function j_(){this._=null}function H_(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function X_(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function G_(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function V_(t){for(;t.L;)t=t.L;return t}function $_(t,n,e,r){var i=[null,null],o=_b.push(i)-1;return i.left=t,i.right=n,e&&Z_(i,t,n,e),r&&Z_(i,n,t,r),gb[t.index].halfedges.push(o),gb[n.index].halfedges.push(o),i}function W_(t,n,e){var r=[n,e];return r.left=t,r}function Z_(t,n,e,r){t[0]||t[1]?t.left===e?t[1]=r:t[0]=r:(t[0]=r,t.left=n,t.right=e)}function Q_(t,n,e,r,i){var o,a=t[0],u=t[1],c=a[0],f=a[1],s=0,l=1,h=u[0]-c,d=u[1]-f;if(o=n-c,h||!(o>0)){if(o/=h,h<0){if(o<s)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>s&&(s=o)}if(o=r-c,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>s&&(s=o)}else if(h>0){if(o<s)return;o<l&&(l=o)}if(o=e-f,d||!(o>0)){if(o/=d,d<0){if(o<s)return;o<l&&(l=o)}else if(d>0){if(o>l)return;o>s&&(s=o)}if(o=i-f,d||!(o<0)){if(o/=d,d<0){if(o>l)return;o>s&&(s=o)}else if(d>0){if(o<s)return;o<l&&(l=o)}return!(s>0||l<1)||(s>0&&(t[0]=[c+s*h,f+s*d]),l<1&&(t[1]=[c+l*h,f+l*d]),!0)}}}}}function J_(t,n,e,r,i){var o=t[1];if(o)return!0;var a,u,c=t[0],f=t.left,s=t.right,l=f[0],h=f[1],d=s[0],p=s[1],v=(l+d)/2,g=(h+p)/2;if(p===h){if(v<n||v>=r)return;if(l>d){if(c){if(c[1]>=i)return}else c=[v,e];o=[v,i]}else{if(c){if(c[1]<e)return}else c=[v,i];o=[v,e]}}else if(u=g-(a=(l-d)/(p-h))*v,a<-1||a>1)if(l>d){if(c){if(c[1]>=i)return}else c=[(e-u)/a,e];o=[(i-u)/a,i]}else{if(c){if(c[1]<e)return}else c=[(i-u)/a,i];o=[(e-u)/a,e]}else if(h<p){if(c){if(c[0]>=r)return}else c=[n,a*n+u];o=[r,a*r+u]}else{if(c){if(c[0]<n)return}else c=[r,a*r+u];o=[n,a*n+u]}return t[0]=c,t[1]=o,!0}function K_(t,n){var e=t.site,r=n.left,i=n.right;return e===i&&(i=r,r=e),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(e===r?(r=n[1],i=n[0]):(r=n[0],i=n[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function tb(t,n){return n[+(n.left!==t.site)]}function nb(t,n){return n[+(n.left===t.site)]}w_.prototype={areaStart:n_,areaEnd:n_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},k_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:S_(this,this._t0,A_(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,S_(this,A_(this,e=N_(this,t,n)),e);break;default:S_(this,this._t0,e=N_(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(T_.prototype=Object.create(k_.prototype)).point=function(t,n){k_.prototype.point.call(this,n,t)},E_.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}},C_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=P_(t),i=P_(n),o=0,a=1;a<e;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],n[a]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},z_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}},j_.prototype={constructor:j_,insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=V_(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)e===(r=e.U).L?(i=r.R)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(X_(this,e),e=(t=e).U),e.C=!1,r.C=!0,G_(this,r)):(i=r.L)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(G_(this,e),e=(t=e).U),e.C=!1,r.C=!0,X_(this,r)),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,a=t.R;if(e=o?a?V_(a):o:a,i?i.L===t?i.L=e:i.R=e:this._=e,o&&a?(r=e.C,e.C=t.C,e.L=o,o.U=e,e!==a?(i=e.U,e.U=t.U,t=e.R,i.L=t,e.R=a,a.U=e):(e.U=i,i=e,t=e.R)):(r=t.C,t=e),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((n=i.R).C&&(n.C=!1,i.C=!0,X_(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,G_(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,X_(this,i),t=this._;break}}else if((n=i.L).C&&(n.C=!1,i.C=!0,G_(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,X_(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,G_(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var eb,rb=[];function ib(){H_(this),this.x=this.y=this.arc=this.site=this.cy=null}function ob(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var a=i[0],u=i[1],c=r[0]-a,f=r[1]-u,s=o[0]-a,l=o[1]-u,h=2*(c*l-f*s);if(!(h>=-mb)){var d=c*c+f*f,p=s*s+l*l,v=(l*d-f*p)/h,g=(c*p-s*d)/h,y=rb.pop()||new ib;y.arc=t,y.site=i,y.x=v+a,y.y=(y.cy=g+u)+Math.sqrt(v*v+g*g),t.circle=y;for(var _=null,b=yb._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){_=b.P;break}b=b.L}else{if(!b.R){_=b;break}b=b.R}yb.insert(_,y),_||(eb=y)}}}}function ab(t){var n=t.circle;n&&(n.P||(eb=n.N),yb.remove(n),rb.push(n),H_(n),t.circle=null)}var ub=[];function cb(){H_(this),this.edge=this.site=this.circle=null}function fb(t){var n=ub.pop()||new cb;return n.site=t,n}function sb(t){ab(t),vb.remove(t),ub.push(t),H_(t)}function lb(t){var n=t.circle,e=n.x,r=n.cy,i=[e,r],o=t.P,a=t.N,u=[t];sb(t);for(var c=o;c.circle&&Math.abs(e-c.circle.x)<bb&&Math.abs(r-c.circle.cy)<bb;)o=c.P,u.unshift(c),sb(c),c=o;u.unshift(c),ab(c);for(var f=a;f.circle&&Math.abs(e-f.circle.x)<bb&&Math.abs(r-f.circle.cy)<bb;)a=f.N,u.push(f),sb(f),f=a;u.push(f),ab(f);var s,l=u.length;for(s=1;s<l;++s)f=u[s],c=u[s-1],Z_(f.edge,c.site,f.site,i);c=u[0],(f=u[l-1]).edge=$_(c.site,f.site,null,i),ob(c),ob(f)}function hb(t){for(var n,e,r,i,o=t[0],a=t[1],u=vb._;u;)if((r=db(u,a)-o)>bb)u=u.L;else{if(!((i=o-pb(u,a))>bb)){r>-bb?(n=u.P,e=u):i>-bb?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}!function(t){gb[t.index]={site:t,halfedges:[]}}(t);var c=fb(t);if(vb.insert(n,c),n||e){if(n===e)return ab(n),e=fb(n.site),vb.insert(c,e),c.edge=e.edge=$_(n.site,c.site),ob(n),void ob(e);if(e){ab(n),ab(e);var f=n.site,s=f[0],l=f[1],h=t[0]-s,d=t[1]-l,p=e.site,v=p[0]-s,g=p[1]-l,y=2*(h*g-d*v),_=h*h+d*d,b=v*v+g*g,m=[(g*_-d*b)/y+s,(h*b-v*_)/y+l];Z_(e.edge,f,p,m),c.edge=$_(f,t,null,m),e.edge=$_(t,p,null,m),ob(n),ob(e)}else c.edge=$_(n.site,c.site)}}function db(t,n){var e=t.site,r=e[0],i=e[1],o=i-n;if(!o)return r;var a=t.P;if(!a)return-1/0;var u=(e=a.site)[0],c=e[1],f=c-n;if(!f)return u;var s=u-r,l=1/o-1/f,h=s/f;return l?(-h+Math.sqrt(h*h-2*l*(s*s/(-2*f)-c+f/2+i-o/2)))/l+r:(r+u)/2}function pb(t,n){var e=t.N;if(e)return db(e,n);var r=t.site;return r[1]===n?r[0]:1/0}var vb,gb,yb,_b,bb=1e-6,mb=1e-12;function xb(t,n){return n[1]-t[1]||n[0]-t[0]}function wb(t,n){var e,r,i,o=t.sort(xb).pop();for(_b=[],gb=new Array(t.length),vb=new j_,yb=new j_;;)if(i=eb,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===e&&o[1]===r||(hb(o),e=o[0],r=o[1]),o=t.pop();else{if(!i)break;lb(i.arc)}if(function(){for(var t,n,e,r,i=0,o=gb.length;i<o;++i)if((t=gb[i])&&(r=(n=t.halfedges).length)){var a=new Array(r),u=new Array(r);for(e=0;e<r;++e)a[e]=e,u[e]=K_(t,_b[n[e]]);for(a.sort((function(t,n){return u[n]-u[t]})),e=0;e<r;++e)u[e]=n[a[e]];for(e=0;e<r;++e)n[e]=u[e]}}(),n){var a=+n[0][0],u=+n[0][1],c=+n[1][0],f=+n[1][1];!function(t,n,e,r){for(var i,o=_b.length;o--;)J_(i=_b[o],t,n,e,r)&&Q_(i,t,n,e,r)&&(Math.abs(i[0][0]-i[1][0])>bb||Math.abs(i[0][1]-i[1][1])>bb)||delete _b[o]}(a,u,c,f),function(t,n,e,r){var i,o,a,u,c,f,s,l,h,d,p,v,g=gb.length,y=!0;for(i=0;i<g;++i)if(o=gb[i]){for(a=o.site,u=(c=o.halfedges).length;u--;)_b[c[u]]||c.splice(u,1);for(u=0,f=c.length;u<f;)p=(d=nb(o,_b[c[u]]))[0],v=d[1],l=(s=tb(o,_b[c[++u%f]]))[0],h=s[1],(Math.abs(p-l)>bb||Math.abs(v-h)>bb)&&(c.splice(u,0,_b.push(W_(a,d,Math.abs(p-t)<bb&&r-v>bb?[t,Math.abs(l-t)<bb?h:r]:Math.abs(v-r)<bb&&e-p>bb?[Math.abs(h-r)<bb?l:e,r]:Math.abs(p-e)<bb&&v-n>bb?[e,Math.abs(l-e)<bb?h:n]:Math.abs(v-n)<bb&&p-t>bb?[Math.abs(h-n)<bb?l:t,n]:null))-1),++f);f&&(y=!1)}if(y){var _,b,m,x=1/0;for(i=0,y=null;i<g;++i)(o=gb[i])&&(m=(_=(a=o.site)[0]-t)*_+(b=a[1]-n)*b)<x&&(x=m,y=o);if(y){var w=[t,n],M=[t,r],N=[e,r],A=[e,n];y.halfedges.push(_b.push(W_(a=y.site,w,M))-1,_b.push(W_(a,M,N))-1,_b.push(W_(a,N,A))-1,_b.push(W_(a,A,w))-1)}}for(i=0;i<g;++i)(o=gb[i])&&(o.halfedges.length||delete gb[i])}(a,u,c,f)}this.edges=_b,this.cells=gb,vb=yb=_b=gb=null}function Mb(t){return function(){return t}}function Nb(t,n,e){this.target=t,this.type=n,this.transform=e}function Ab(t,n,e){this.k=t,this.x=n,this.y=e}wb.prototype={constructor:wb,polygons:function(){var t=this.edges;return this.cells.map((function(n){var e=n.halfedges.map((function(e){return tb(n,t[e])}));return e.data=n.site.data,e}))},triangles:function(){var t=[],n=this.edges;return this.cells.forEach((function(e,r){if(o=(i=e.halfedges).length)for(var i,o,a,u,c,f,s=e.site,l=-1,h=n[i[o-1]],d=h.left===s?h.right:h.left;++l<o;)a=d,d=(h=n[i[l]]).left===s?h.right:h.left,a&&d&&r<a.index&&r<d.index&&(c=a,f=d,((u=s)[0]-f[0])*(c[1]-u[1])-(u[0]-c[0])*(f[1]-u[1])<0)&&t.push([s.data,a.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,n,e){for(var r,i,o=this,a=o._found||0,u=o.cells.length;!(i=o.cells[a]);)if(++a>=u)return null;var c=t-i.site[0],f=n-i.site[1],s=c*c+f*f;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(e){var r=o.edges[e],u=r.left;if(u!==i.site&&u||(u=r.right)){var c=t-u[0],f=n-u[1],l=c*c+f*f;l<s&&(s=l,a=u.index)}}))}while(null!==a);return o._found=r,null==e||s<=e*e?i.site:null}},Ab.prototype={constructor:Ab,scale:function(t){return 1===t?this:new Ab(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Ab(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Sb=new Ab(1,0,0);function kb(t){return t.__zoom||Sb}function Tb(){t.event.stopImmediatePropagation()}function Eb(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Cb(){return!t.event.button}function Pb(){var t,n,e=this;return e instanceof SVGElement?(t=(e=e.ownerSVGElement||e).width.baseVal.value,n=e.height.baseVal.value):(t=e.clientWidth,n=e.clientHeight),[[0,0],[t,n]]}function zb(){return this.__zoom||Sb}function Rb(){return-t.event.deltaY*(t.event.deltaMode?120:1)/500}function Db(){return"ontouchstart"in this}function qb(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}kb.prototype=Ab.prototype,t.version="5.9.0",t.bisect=i,t.bisectRight=i,t.bisectLeft=o,t.ascending=n,t.bisector=e,t.cross=function(t,n,e){var r,i,o,u,c=t.length,f=n.length,s=new Array(c*f);for(null==e&&(e=a),r=o=0;r<c;++r)for(u=t[r],i=0;i<f;++i,++o)s[o]=e(u,n[i]);return s},t.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},t.deviation=f,t.extent=s,t.histogram=function(){var t=v,n=s,e=M;function r(r){var o,a,u=r.length,c=new Array(u);for(o=0;o<u;++o)c[o]=t(r[o],o,r);var f=n(c),s=f[0],l=f[1],h=e(c,s,l);Array.isArray(h)||(h=w(s,l,h),h=g(Math.ceil(s/h)*h,l,h));for(var d=h.length;h[0]<=s;)h.shift(),--d;for(;h[d-1]>l;)h.pop(),--d;var p,v=new Array(d+1);for(o=0;o<=d;++o)(p=v[o]=[]).x0=o>0?h[o-1]:s,p.x1=o<d?h[o]:l;for(o=0;o<u;++o)s<=(a=c[o])&&a<=l&&v[i(h,a,0,d)].push(r[o]);return v}return r.value=function(n){return arguments.length?(t="function"==typeof n?n:p(n),r):t},r.domain=function(t){return arguments.length?(n="function"==typeof t?t:p([t[0],t[1]]),r):n},r.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?p(h.call(t)):p(t),r):e},r},t.thresholdFreedmanDiaconis=function(t,e,r){return t=d.call(t,u).sort(n),Math.ceil((r-e)/(2*(N(t,.75)-N(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,n,e){return Math.ceil((e-n)/(3.5*f(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=M,t.max=A,t.mean=function(t,n){var e,r=t.length,i=r,o=-1,a=0;if(null==n)for(;++o<r;)isNaN(e=u(t[o]))?--i:a+=e;else for(;++o<r;)isNaN(e=u(n(t[o],o,t)))?--i:a+=e;if(i)return a/i},t.median=function(t,e){var r,i=t.length,o=-1,a=[];if(null==e)for(;++o<i;)isNaN(r=u(t[o]))||a.push(r);else for(;++o<i;)isNaN(r=u(e(t[o],o,t)))||a.push(r);return N(a.sort(n),.5)},t.merge=S,t.min=k,t.pairs=function(t,n){null==n&&(n=a);for(var e=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);e<r;)o[e]=n(i,i=t[++e]);return o},t.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},t.quantile=N,t.range=g,t.scan=function(t,e){if(r=t.length){var r,i,o=0,a=0,u=t[a];for(null==e&&(e=n);++o<r;)(e(i=t[o],u)<0||0!==e(u,u))&&(u=i,a=o);return 0===e(u,u)?a:void 0}},t.shuffle=function(t,n,e){for(var r,i,o=(null==e?t.length:e)-(n=null==n?0:+n);o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},t.sum=function(t,n){var e,r=t.length,i=-1,o=0;if(null==n)for(;++i<r;)(e=+t[i])&&(o+=e);else for(;++i<r;)(e=+n(t[i],i,t))&&(o+=e);return o},t.ticks=m,t.tickIncrement=x,t.tickStep=w,t.transpose=T,t.variance=c,t.zip=function(){return T(arguments)},t.axisTop=function(t){return Y(z,t)},t.axisRight=function(t){return Y(R,t)},t.axisBottom=function(t){return Y(D,t)},t.axisLeft=function(t){return Y(q,t)},t.brush=function(){return Pi(mi)},t.brushX=function(){return Pi(_i)},t.brushY=function(){return Pi(bi)},t.brushSelection=function(t){var n=t.__brush;return n?n.dim.output(n.selection):null},t.chord=function(){var t=0,n=null,e=null,r=null;function i(i){var o,a,u,c,f,s,l=i.length,h=[],d=g(l),p=[],v=[],y=v.groups=new Array(l),_=new Array(l*l);for(o=0,f=-1;++f<l;){for(a=0,s=-1;++s<l;)a+=i[f][s];h.push(a),p.push(g(l)),o+=a}for(n&&d.sort((function(t,e){return n(h[t],h[e])})),e&&p.forEach((function(t,n){t.sort((function(t,r){return e(i[n][t],i[n][r])}))})),c=(o=Ui(0,Li-t*l)/o)?t:Li/l,a=0,f=-1;++f<l;){for(u=a,s=-1;++s<l;){var b=d[f],m=p[b][s],x=i[b][m],w=a,M=a+=x*o;_[m*l+b]={index:b,subindex:m,startAngle:w,endAngle:M,value:x}}y[b]={index:b,startAngle:u,endAngle:a,value:h[b]},a+=c}for(f=-1;++f<l;)for(s=f-1;++s<l;){var N=_[s*l+f],A=_[f*l+s];(N.value||A.value)&&v.push(N.value<A.value?{source:A,target:N}:{source:N,target:A})}return r?v.sort(r):v}return i.padAngle=function(n){return arguments.length?(t=Ui(0,n),i):t},i.sortGroups=function(t){return arguments.length?(n=t,i):n},i.sortSubgroups=function(t){return arguments.length?(e=t,i):e},i.sortChords=function(t){return arguments.length?(null==t?r=null:(n=t,r=function(t,e){return n(t.source.value+t.target.value,e.source.value+e.target.value)})._=t,i):r&&r._;var n},i},t.ribbon=function(){var t=Xi,n=Gi,e=Vi,r=$i,i=Wi,o=null;function a(){var a,u=Oi.call(arguments),c=t.apply(this,u),f=n.apply(this,u),s=+e.apply(this,(u[0]=c,u)),l=r.apply(this,u)-qi,h=i.apply(this,u)-qi,d=s*zi(l),p=s*Ri(l),v=+e.apply(this,(u[0]=f,u)),g=r.apply(this,u)-qi,y=i.apply(this,u)-qi;if(o||(o=a=Hi()),o.moveTo(d,p),o.arc(0,0,s,l,h),l===g&&h===y||(o.quadraticCurveTo(0,0,v*zi(g),v*Ri(g)),o.arc(0,0,v,g,y)),o.quadraticCurveTo(0,0,d,p),o.closePath(),a)return o=null,a+""||null}return a.radius=function(t){return arguments.length?(e="function"==typeof t?t:Bi(+t),a):e},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Bi(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Bi(+t),a):i},a.source=function(n){return arguments.length?(t=n,a):t},a.target=function(t){return arguments.length?(n=t,a):n},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a},t.nest=function(){var t,n,e,r=[],i=[];function o(e,i,a,u){if(i>=r.length)return null!=t&&e.sort(t),null!=n?n(e):e;for(var c,f,s,l=-1,h=e.length,d=r[i++],p=Qi(),v=a();++l<h;)(s=p.get(c=d(f=e[l])+""))?s.push(f):p.set(c,[f]);return p.each((function(t,n){u(v,n,o(t,i,a,u))})),v}return e={object:function(t){return o(t,0,Ji,Ki)},map:function(t){return o(t,0,to,no)},entries:function(t){return function t(e,o){if(++o>r.length)return e;var a,u=i[o-1];return null!=n&&o>=r.length?a=e.entries():(a=[],e.each((function(n,e){a.push({key:e,values:t(n,o)})}))),null!=u?a.sort((function(t,n){return u(t.key,n.key)})):a}(o(t,0,to,no),0)},key:function(t){return r.push(t),e},sortKeys:function(t){return i[r.length-1]=t,e},sortValues:function(n){return t=n,e},rollup:function(t){return n=t,e}}},t.set=io,t.map=Qi,t.keys=function(t){var n=[];for(var e in t)n.push(e);return n},t.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},t.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},t.color=hn,t.rgb=gn,t.hsl=mn,t.lab=Rn,t.hcl=Yn,t.lch=function(t,n,e,r){return 1===arguments.length?Bn(t):new Fn(e,n,t,null==r?1:r)},t.gray=function(t,n){return new Dn(t,0,0,null==n?1:n)},t.cubehelix=Zn,t.contours=po,t.contourDensity=function(){var t=yo,n=_o,e=bo,r=960,i=500,o=20,a=2,u=3*o,c=r+2*u>>a,f=i+2*u>>a,s=uo(20);function l(r){var i=new Float32Array(c*f),l=new Float32Array(c*f);r.forEach((function(r,o,s){var l=+t(r,o,s)+u>>a,h=+n(r,o,s)+u>>a,d=+e(r,o,s);l>=0&&l<c&&h>=0&&h<f&&(i[l+h*c]+=d)})),vo({width:c,height:f,data:i},{width:c,height:f,data:l},o>>a),go({width:c,height:f,data:l},{width:c,height:f,data:i},o>>a),vo({width:c,height:f,data:i},{width:c,height:f,data:l},o>>a),go({width:c,height:f,data:l},{width:c,height:f,data:i},o>>a),vo({width:c,height:f,data:i},{width:c,height:f,data:l},o>>a),go({width:c,height:f,data:l},{width:c,height:f,data:i},o>>a);var d=s(i);if(!Array.isArray(d)){var p=A(i);d=w(0,p,d),(d=g(0,Math.floor(p/d)*d,d)).shift()}return po().thresholds(d).size([c,f])(i).map(h)}function h(t){return t.value*=Math.pow(2,-2*a),t.coordinates.forEach(d),t}function d(t){t.forEach(p)}function p(t){t.forEach(v)}function v(t){t[0]=t[0]*Math.pow(2,a)-u,t[1]=t[1]*Math.pow(2,a)-u}function y(){return c=r+2*(u=3*o)>>a,f=i+2*u>>a,l}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:uo(+n),l):t},l.y=function(t){return arguments.length?(n="function"==typeof t?t:uo(+t),l):n},l.weight=function(t){return arguments.length?(e="function"==typeof t?t:uo(+t),l):e},l.size=function(t){if(!arguments.length)return[r,i];var n=Math.ceil(t[0]),e=Math.ceil(t[1]);if(!(n>=0||n>=0))throw new Error("invalid size");return r=n,i=e,y()},l.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),y()},l.thresholds=function(t){return arguments.length?(s="function"==typeof t?t:Array.isArray(t)?uo(oo.call(t)):uo(t),l):s},l.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*t*t+1)-1)/2),y()},l},t.dispatch=I,t.drag=function(){var n,e,r,i,o=Gt,a=Vt,u=$t,c=Wt,f={},s=I("start","drag","end"),l=0,h=0;function d(t){t.on("mousedown.drag",p).filter(c).on("touchstart.drag",y).on("touchmove.drag",_).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(){if(!i&&o.apply(this,arguments)){var u=m("mouse",a.apply(this,arguments),Ot,this,arguments);u&&(zt(t.event.view).on("mousemove.drag",v,!0).on("mouseup.drag",g,!0),It(t.event.view),Yt(),r=!1,n=t.event.clientX,e=t.event.clientY,u("start"))}}function v(){if(Ft(),!r){var i=t.event.clientX-n,o=t.event.clientY-e;r=i*i+o*o>h}f.mouse("drag")}function g(){zt(t.event.view).on("mousemove.drag mouseup.drag",null),jt(t.event.view,r),Ft(),f.mouse("end")}function y(){if(o.apply(this,arguments)){var n,e,r=t.event.changedTouches,i=a.apply(this,arguments),u=r.length;for(n=0;n<u;++n)(e=m(r[n].identifier,i,Bt,this,arguments))&&(Yt(),e("start"))}}function _(){var n,e,r=t.event.changedTouches,i=r.length;for(n=0;n<i;++n)(e=f[r[n].identifier])&&(Ft(),e("drag"))}function b(){var n,e,r=t.event.changedTouches,o=r.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),n=0;n<o;++n)(e=f[r[n].identifier])&&(Yt(),e("end"))}function m(n,e,r,i,o){var a,c,h,p=r(e,n),v=s.copy();if(kt(new Xt(d,"beforestart",a,n,l,p[0],p[1],0,0,v),(function(){return null!=(t.event.subject=a=u.apply(i,o))&&(c=a.x-p[0]||0,h=a.y-p[1]||0,!0)})))return function t(u){var s,g=p;switch(u){case"start":f[n]=t,s=l++;break;case"end":delete f[n],--l;case"drag":p=r(e,n),s=l}kt(new Xt(d,u,a,n,s,p[0]+c,p[1]+h,p[0]-g[0],p[1]-g[1],v),v.apply,v,[u,i,o])}}return d.filter=function(t){return arguments.length?(o="function"==typeof t?t:Ht(!!t),d):o},d.container=function(t){return arguments.length?(a="function"==typeof t?t:Ht(t),d):a},d.subject=function(t){return arguments.length?(u="function"==typeof t?t:Ht(t),d):u},d.touchable=function(t){return arguments.length?(c="function"==typeof t?t:Ht(!!t),d):c},d.on=function(){var t=s.on.apply(s,arguments);return t===s?d:t},d.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,d):Math.sqrt(h)},d},t.dragDisable=It,t.dragEnable=jt,t.dsvFormat=ko,t.csvParse=Eo,t.csvParseRows=Co,t.csvFormat=Po,t.csvFormatBody=zo,t.csvFormatRows=Ro,t.tsvParse=qo,t.tsvParseRows=Lo,t.tsvFormat=Uo,t.tsvFormatBody=Oo,t.tsvFormatRows=Bo,t.autoType=function(t){for(var n in t){var e,r=t[n].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(e=+r)){if(!/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/.test(r))continue;r=new Date(r)}else r=e;else r=null;t[n]=r}return t},t.easeLinear=function(t){return+t},t.easeQuad=Rr,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=Rr,t.easeCubic=Dr,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=Dr,t.easePoly=Ur,t.easePolyIn=qr,t.easePolyOut=Lr,t.easePolyInOut=Ur,t.easeSin=Yr,t.easeSinIn=function(t){return 1-Math.cos(t*Br)},t.easeSinOut=function(t){return Math.sin(t*Br)},t.easeSinInOut=Yr,t.easeExp=Fr,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=Fr,t.easeCircle=Ir,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=Ir,t.easeBounce=Kr,t.easeBounceIn=function(t){return 1-Kr(1-t)},t.easeBounceOut=Kr,t.easeBounceInOut=function(t){return((t*=2)<=1?1-Kr(1-t):Kr(t-1)+1)/2},t.easeBack=ei,t.easeBackIn=ti,t.easeBackOut=ni,t.easeBackInOut=ei,t.easeElastic=oi,t.easeElasticIn=ii,t.easeElasticOut=oi,t.easeElasticInOut=ai,t.blob=function(t,n){return fetch(t,n).then(Yo)},t.buffer=function(t,n){return fetch(t,n).then(Fo)},t.dsv=function(t,n,e,r){3===arguments.length&&"function"==typeof e&&(r=e,e=void 0);var i=ko(t);return jo(n,e).then((function(t){return i.parse(t,r)}))},t.csv=Xo,t.tsv=Go,t.image=function(t,n){return new Promise((function(e,r){var i=new Image;for(var o in n)i[o]=n[o];i.onerror=r,i.onload=function(){e(i)},i.src=t}))},t.json=function(t,n){return fetch(t,n).then(Vo)},t.text=jo,t.xml=Wo,t.html=Zo,t.svg=Qo,t.forceCenter=function(t,n){var e;function r(){var r,i,o=e.length,a=0,u=0;for(r=0;r<o;++r)a+=(i=e[r]).x,u+=i.y;for(a=a/o-t,u=u/o-n,r=0;r<o;++r)(i=e[r]).x-=a,i.y-=u}return null==t&&(t=0),null==n&&(n=0),r.initialize=function(t){e=t},r.x=function(n){return arguments.length?(t=+n,r):t},r.y=function(t){return arguments.length?(n=+t,r):n},r},t.forceCollide=function(t){var n,e,r=1,i=1;function o(){for(var t,o,u,c,f,s,l,h=n.length,d=0;d<i;++d)for(o=ia(n,ca,fa).visitAfter(a),t=0;t<h;++t)u=n[t],s=e[u.index],l=s*s,c=u.x+u.vx,f=u.y+u.vy,o.visit(p);function p(t,n,e,i,o){var a=t.data,h=t.r,d=s+h;if(!a)return n>c+d||i<c-d||e>f+d||o<f-d;if(a.index>u.index){var p=c-a.x-a.vx,v=f-a.y-a.vy,g=p*p+v*v;g<d*d&&(0===p&&(g+=(p=Ko())*p),0===v&&(g+=(v=Ko())*v),g=(d-(g=Math.sqrt(g)))/g*r,u.vx+=(p*=g)*(d=(h*=h)/(l+h)),u.vy+=(v*=g)*d,a.vx-=p*(d=1-d),a.vy-=v*d)}}}function a(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function u(){if(n){var r,i,o=n.length;for(e=new Array(o),r=0;r<o;++r)i=n[r],e[i.index]=+t(i,r,n)}}return"function"!=typeof t&&(t=Jo(null==t?1:+t)),o.initialize=function(t){n=t,u()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(n){return arguments.length?(t="function"==typeof n?n:Jo(+n),u(),o):t},o},t.forceLink=function(t){var n,e,r,i,o,a=sa,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},c=Jo(30),f=1;function s(r){for(var i=0,a=t.length;i<f;++i)for(var u,c,s,l,h,d,p,v=0;v<a;++v)c=(u=t[v]).source,l=(s=u.target).x+s.vx-c.x-c.vx||Ko(),h=s.y+s.vy-c.y-c.vy||Ko(),l*=d=((d=Math.sqrt(l*l+h*h))-e[v])/d*r*n[v],h*=d,s.vx-=l*(p=o[v]),s.vy-=h*p,c.vx+=l*(p=1-p),c.vy+=h*p}function l(){if(r){var u,c,f=r.length,s=t.length,l=Qi(r,a);for(u=0,i=new Array(f);u<s;++u)(c=t[u]).index=u,"object"!=typeof c.source&&(c.source=la(l,c.source)),"object"!=typeof c.target&&(c.target=la(l,c.target)),i[c.source.index]=(i[c.source.index]||0)+1,i[c.target.index]=(i[c.target.index]||0)+1;for(u=0,o=new Array(s);u<s;++u)c=t[u],o[u]=i[c.source.index]/(i[c.source.index]+i[c.target.index]);n=new Array(s),h(),e=new Array(s),d()}}function h(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+c(t[n],n,t)}return null==t&&(t=[]),s.initialize=function(t){r=t,l()},s.links=function(n){return arguments.length?(t=n,l(),s):t},s.id=function(t){return arguments.length?(a=t,s):a},s.iterations=function(t){return arguments.length?(f=+t,s):f},s.strength=function(t){return arguments.length?(u="function"==typeof t?t:Jo(+t),h(),s):u},s.distance=function(t){return arguments.length?(c="function"==typeof t?t:Jo(+t),d(),s):c},s},t.forceManyBody=function(){var t,n,e,r,i=Jo(-30),o=1,a=1/0,u=.81;function c(r){var i,o=t.length,a=ia(t,ha,da).visitAfter(s);for(e=r,i=0;i<o;++i)n=t[i],a.visit(l)}function f(){if(t){var n,e,o=t.length;for(r=new Array(o),n=0;n<o;++n)e=t[n],r[e.index]=+i(e,n,t)}}function s(t){var n,e,i,o,a,u=0,c=0;if(t.length){for(i=o=a=0;a<4;++a)(n=t[a])&&(e=Math.abs(n.value))&&(u+=n.value,c+=e,i+=e*n.x,o+=e*n.y);t.x=i/c,t.y=o/c}else{(n=t).x=n.data.x,n.y=n.data.y;do{u+=r[n.data.index]}while(n=n.next)}t.value=u}function l(t,i,c,f){if(!t.value)return!0;var s=t.x-n.x,l=t.y-n.y,h=f-i,d=s*s+l*l;if(h*h/u<d)return d<a&&(0===s&&(d+=(s=Ko())*s),0===l&&(d+=(l=Ko())*l),d<o&&(d=Math.sqrt(o*d)),n.vx+=s*t.value*e/d,n.vy+=l*t.value*e/d),!0;if(!(t.length||d>=a)){(t.data!==n||t.next)&&(0===s&&(d+=(s=Ko())*s),0===l&&(d+=(l=Ko())*l),d<o&&(d=Math.sqrt(o*d)));do{t.data!==n&&(h=r[t.data.index]*e/d,n.vx+=s*h,n.vy+=l*h)}while(t=t.next)}}return c.initialize=function(n){t=n,f()},c.strength=function(t){return arguments.length?(i="function"==typeof t?t:Jo(+t),f(),c):i},c.distanceMin=function(t){return arguments.length?(o=t*t,c):Math.sqrt(o)},c.distanceMax=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.theta=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c},t.forceRadial=function(t,n,e){var r,i,o,a=Jo(.1);function u(t){for(var a=0,u=r.length;a<u;++a){var c=r[a],f=c.x-n||1e-6,s=c.y-e||1e-6,l=Math.sqrt(f*f+s*s),h=(o[a]-l)*i[a]*t/l;c.vx+=f*h,c.vy+=s*h}}function c(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)o[n]=+t(r[n],n,r),i[n]=isNaN(o[n])?0:+a(r[n],n,r)}}return"function"!=typeof t&&(t=Jo(+t)),null==n&&(n=0),null==e&&(e=0),u.initialize=function(t){r=t,c()},u.strength=function(t){return arguments.length?(a="function"==typeof t?t:Jo(+t),c(),u):a},u.radius=function(n){return arguments.length?(t="function"==typeof n?n:Jo(+n),c(),u):t},u.x=function(t){return arguments.length?(n=+t,u):n},u.y=function(t){return arguments.length?(e=+t,u):e},u},t.forceSimulation=function(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,u=Qi(),c=ir(s),f=I("tick","end");function s(){l(),f.call("tick",n),e<r&&(c.stop(),f.call("end",n))}function l(r){var c,f,s=t.length;void 0===r&&(r=1);for(var l=0;l<r;++l)for(e+=(o-e)*i,u.each((function(t){t(e)})),c=0;c<s;++c)null==(f=t[c]).fx?f.x+=f.vx*=a:(f.x=f.fx,f.vx=0),null==f.fy?f.y+=f.vy*=a:(f.y=f.fy,f.vy=0);return n}function h(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,isNaN(n.fx)||(n.x=n.fx),isNaN(n.fy)||(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=pa*Math.sqrt(e),o=e*va;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function d(n){return n.initialize&&n.initialize(t),n}return null==t&&(t=[]),h(),n={tick:l,restart:function(){return c.restart(s),n},stop:function(){return c.stop(),n},nodes:function(e){return arguments.length?(t=e,h(),u.each(d),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(a=1-t,n):1-a},force:function(t,e){return arguments.length>1?(null==e?u.remove(t):u.set(t,d(e)),n):u.get(t)},find:function(n,e,r){var i,o,a,u,c,f=0,s=t.length;for(null==r?r=1/0:r*=r,f=0;f<s;++f)(a=(i=n-(u=t[f]).x)*i+(o=e-u.y)*o)<r&&(c=u,r=a);return c},on:function(t,e){return arguments.length>1?(f.on(t,e),n):f.on(t)}}},t.forceX=function(t){var n,e,r,i=Jo(.1);function o(t){for(var i,o=0,a=n.length;o<a;++o)(i=n[o]).vx+=(r[o]-i.x)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),r=new Array(a),o=0;o<a;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=Jo(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Jo(+t),a(),o):i},o.x=function(n){return arguments.length?(t="function"==typeof n?n:Jo(+n),a(),o):t},o},t.forceY=function(t){var n,e,r,i=Jo(.1);function o(t){for(var i,o=0,a=n.length;o<a;++o)(i=n[o]).vy+=(r[o]-i.y)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),r=new Array(a),o=0;o<a;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=Jo(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Jo(+t),a(),o):i},o.y=function(n){return arguments.length?(t="function"==typeof n?n:Jo(+n),a(),o):t},o},t.formatDefaultLocale=Ta,t.formatLocale=ka,t.formatSpecifier=ma,t.precisionFixed=Ea,t.precisionPrefix=Ca,t.precisionRound=Pa,t.geoArea=function(t){return _u.reset(),lu(t,bu),2*_u},t.geoBounds=function(t){var n,e,r,i,o,a,u;if(Du=Ru=-(Pu=zu=1/0),Bu=[],lu(t,ic),e=Bu.length){for(Bu.sort(dc),n=1,o=[r=Bu[0]];n<e;++n)pc(r,(i=Bu[n])[0])||pc(r,i[1])?(hc(r[0],i[1])>hc(r[0],r[1])&&(r[1]=i[1]),hc(i[0],r[1])>hc(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=0,r=o[e=o.length-1];n<=e;r=i,++n)i=o[n],(u=hc(r[1],i[0]))>a&&(a=u,Pu=i[0],Ru=r[1])}return Bu=Yu=null,Pu===1/0||zu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Pu,zu],[Ru,Du]]},t.geoCentroid=function(t){Fu=Iu=ju=Hu=Xu=Gu=Vu=$u=Wu=Zu=Qu=0,lu(t,vc);var n=Wu,e=Zu,r=Qu,i=n*n+e*e+r*r;return i<Ua&&(n=Gu,e=Vu,r=$u,Iu<La&&(n=ju,e=Hu,r=Xu),(i=n*n+e*e+r*r)<Ua)?[NaN,NaN]:[Ga(e,n)*Ia,ru(r/tu(i))*Ia]},t.geoCircle=function(){var t,n,e=Sc([0,0]),r=Sc(90),i=Sc(6),o={point:function(e,r){t.push(e=n(e,r)),e[0]*=Ia,e[1]*=Ia}};function a(){var a=e.apply(this,arguments),u=r.apply(this,arguments)*ja,c=i.apply(this,arguments)*ja;return t=[],n=Ec(-a[0]*ja,-a[1]*ja,0).invert,Dc(o,u,c,1),a={type:"Polygon",coordinates:[t]},t=n=null,a}return a.center=function(t){return arguments.length?(e="function"==typeof t?t:Sc([+t[0],+t[1]]),a):e},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:Sc(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:Sc(+t),a):i},a},t.geoClipAntimeridian=Gc,t.geoClipCircle=Vc,t.geoClipExtent=function(){var t,n,e,r=0,i=0,o=960,a=500;return e={stream:function(e){return t&&n===e?t:t=Zc(r,i,o,a)(n=e)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],o=+u[1][0],a=+u[1][1],t=n=null,e):[[r,i],[o,a]]}}},t.geoClipRectangle=Zc,t.geoContains=function(t,n){return(t&&sf.hasOwnProperty(t.type)?sf[t.type]:hf)(t,n)},t.geoDistance=ff,t.geoGraticule=mf,t.geoGraticule10=function(){return mf()()},t.geoInterpolate=function(t,n){var e=t[0]*ja,r=t[1]*ja,i=n[0]*ja,o=n[1]*ja,a=Va(r),u=Ja(r),c=Va(o),f=Ja(o),s=a*Va(e),l=a*Ja(e),h=c*Va(i),d=c*Ja(i),p=2*ru(tu(iu(o-r)+a*c*iu(i-e))),v=Ja(p),g=p?function(t){var n=Ja(t*=p)/v,e=Ja(p-t)/v,r=e*s+n*h,i=e*l+n*d,o=e*u+n*f;return[Ga(i,r)*Ia,Ga(o,tu(r*r+i*i))*Ia]}:function(){return[e*Ia,r*Ia]};return g.distance=p,g},t.geoLength=af,t.geoPath=function(t,n){var e,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),lu(t,e(r))),r.result()}return o.area=function(t){return lu(t,e(Tf)),Tf.result()},o.measure=function(t){return lu(t,e(ps)),ps.result()},o.bounds=function(t){return lu(t,e(Uf)),Uf.result()},o.centroid=function(t){return lu(t,e(Qf)),Qf.result()},o.projection=function(n){return arguments.length?(e=null==n?(t=null,xf):(t=n).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(n=null,new ys):new us(n=t),"function"!=typeof i&&r.pointRadius(i),o):n},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(n)},t.geoAlbers=Ls,t.geoAlbersUsa=function(){var t,n,e,r,i,o,a=Ls(),u=qs().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=qs().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(t,n){o=[t,n]}};function s(t){var n=t[0],a=t[1];return o=null,e.point(n,a),o||(r.point(n,a),o)||(i.point(n,a),o)}function l(){return t=n=null,s}return s.invert=function(t){var n=a.scale(),e=a.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?u:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:a).invert(t)},s.stream=function(e){return t&&n===e?t:(r=[a.stream(n=e),u.stream(e),c.stream(e)],i=r.length,t={point:function(t,n){for(var e=-1;++e<i;)r[e].point(t,n)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},s.precision=function(t){return arguments.length?(a.precision(t),u.precision(t),c.precision(t),l()):a.precision()},s.scale=function(t){return arguments.length?(a.scale(t),u.scale(.35*t),c.scale(t),s.translate(a.translate())):a.scale()},s.translate=function(t){if(!arguments.length)return a.translate();var n=a.scale(),o=+t[0],s=+t[1];return e=a.translate(t).clipExtent([[o-.455*n,s-.238*n],[o+.455*n,s+.238*n]]).stream(f),r=u.translate([o-.307*n,s+.201*n]).clipExtent([[o-.425*n+La,s+.12*n+La],[o-.214*n-La,s+.234*n-La]]).stream(f),i=c.translate([o-.205*n,s+.212*n]).clipExtent([[o-.214*n+La,s+.166*n+La],[o-.115*n-La,s+.234*n-La]]).stream(f),l()},s.fitExtent=function(t,n){return ws(s,t,n)},s.fitSize=function(t,n){return Ms(s,t,n)},s.fitWidth=function(t,n){return Ns(s,t,n)},s.fitHeight=function(t,n){return As(s,t,n)},s.scale(1070)},t.geoAzimuthalEqualArea=function(){return Ps(Bs).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Bs,t.geoAzimuthalEquidistant=function(){return Ps(Ys).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Ys,t.geoConicConformal=function(){return Rs(Hs).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=Hs,t.geoConicEqualArea=qs,t.geoConicEqualAreaRaw=Ds,t.geoConicEquidistant=function(){return Rs(Gs).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=Gs,t.geoEqualEarth=function(){return Ps(Js).scale(177.158)},t.geoEqualEarthRaw=Js,t.geoEquirectangular=function(){return Ps(Xs).scale(152.63)},t.geoEquirectangularRaw=Xs,t.geoGnomonic=function(){return Ps(Ks).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=Ks,t.geoIdentity=function(){var t,n,e,r,i,o,a=1,u=0,c=0,f=1,s=1,l=xf,h=null,d=xf;function p(){return r=i=null,o}return o={stream:function(t){return r&&i===t?r:r=l(d(i=t))},postclip:function(r){return arguments.length?(d=r,h=t=n=e=null,p()):d},clipExtent:function(r){return arguments.length?(d=null==r?(h=t=n=e=null,xf):Zc(h=+r[0][0],t=+r[0][1],n=+r[1][0],e=+r[1][1]),p()):null==h?null:[[h,t],[n,e]]},scale:function(t){return arguments.length?(l=tl((a=+t)*f,a*s,u,c),p()):a},translate:function(t){return arguments.length?(l=tl(a*f,a*s,u=+t[0],c=+t[1]),p()):[u,c]},reflectX:function(t){return arguments.length?(l=tl(a*(f=t?-1:1),a*s,u,c),p()):f<0},reflectY:function(t){return arguments.length?(l=tl(a*f,a*(s=t?-1:1),u,c),p()):s<0},fitExtent:function(t,n){return ws(o,t,n)},fitSize:function(t,n){return Ms(o,t,n)},fitWidth:function(t,n){return Ns(o,t,n)},fitHeight:function(t,n){return As(o,t,n)}}},t.geoProjection=Ps,t.geoProjectionMutator=zs,t.geoMercator=function(){return Is(Fs).scale(961/Fa)},t.geoMercatorRaw=Fs,t.geoNaturalEarth1=function(){return Ps(nl).scale(175.295)},t.geoNaturalEarth1Raw=nl,t.geoOrthographic=function(){return Ps(el).scale(249.5).clipAngle(90+La)},t.geoOrthographicRaw=el,t.geoStereographic=function(){return Ps(rl).scale(250).clipAngle(142)},t.geoStereographicRaw=rl,t.geoTransverseMercator=function(){var t=Is(il),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=il,t.geoRotation=Rc,t.geoStream=lu,t.geoTransform=function(t){return{stream:bs(t)}},t.cluster=function(){var t=ol,n=1,e=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(n){var e=n.children;e?(n.x=function(t){return t.reduce(al,0)/t.length}(e),n.y=function(t){return 1+t.reduce(ul,0)}(e)):(n.x=o?a+=t(n,o):0,n.y=0,o=n)}));var u=function(t){for(var n;n=t.children;)t=n[0];return t}(i),c=function(t){for(var n;n=t.children;)t=n[n.length-1];return t}(i),f=u.x-t(u,c)/2,s=c.x+t(c,u)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*n,t.y=(i.y-t.y)*e}:function(t){t.x=(t.x-f)/(s-f)*n,t.y=(1-(i.y?t.y/i.y:1))*e})}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i},t.hierarchy=fl,t.pack=function(){var t=null,n=1,e=1,r=El;function i(i){return i.x=n/2,i.y=e/2,t?i.eachBefore(zl(t)).eachAfter(Rl(r,.5)).eachBefore(Dl(1)):i.eachBefore(zl(Pl)).eachAfter(Rl(El,1)).eachAfter(Rl(r,i.r/Math.min(n,e))).eachBefore(Dl(Math.min(n,e)/(2*i.r))),i}return i.radius=function(n){return arguments.length?(t=null==(e=n)?null:Tl(e),i):t;var e},i.size=function(t){return arguments.length?(n=+t[0],e=+t[1],i):[n,e]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Cl(+t),i):r},i},t.packSiblings=function(t){return kl(t),t},t.packEnclose=vl,t.partition=function(){var t=1,n=1,e=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=e,i.x1=t,i.y1=n/o,i.eachBefore(function(t,n){return function(r){r.children&&Ll(r,r.x0,t*(r.depth+1)/n,r.x1,t*(r.depth+2)/n);var i=r.x0,o=r.y0,a=r.x1-e,u=r.y1-e;a<i&&(i=a=(i+a)/2),u<o&&(o=u=(o+u)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=u}}(n,o)),r&&i.eachBefore(ql),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(t){return arguments.length?(e=+t,i):e},i},t.stratify=function(){var t=Yl,n=Fl;function e(e){var r,i,o,a,u,c,f,s=e.length,l=new Array(s),h={};for(i=0;i<s;++i)r=e[i],u=l[i]=new dl(r),null!=(c=t(r,i,e))&&(c+="")&&(h[f=Ul+(u.id=c)]=f in h?Bl:u);for(i=0;i<s;++i)if(u=l[i],null!=(c=n(e[i],i,e))&&(c+="")){if(!(a=h[Ul+c]))throw new Error("missing: "+c);if(a===Bl)throw new Error("ambiguous: "+c);a.children?a.children.push(u):a.children=[u],u.parent=a}else{if(o)throw new Error("multiple roots");o=u}if(!o)throw new Error("no root");if(o.parent=Ol,o.eachBefore((function(t){t.depth=t.parent.depth+1,--s})).eachBefore(hl),o.parent=null,s>0)throw new Error("cycle");return o}return e.id=function(n){return arguments.length?(t=Tl(n),e):t},e.parentId=function(t){return arguments.length?(n=Tl(t),e):n},e},t.tree=function(){var t=Il,n=1,e=1,r=null;function i(i){var c=function(t){for(var n,e,r,i,o,a=new Vl(t,0),u=[a];n=u.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;i>=0;--i)u.push(e=n.children[i]=new Vl(r[i],i)),e.parent=n;return(a.parent=new Vl(null,0)).children=[a],a}(i);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(a),r)i.eachBefore(u);else{var f=i,s=i,l=i;i.eachBefore((function(t){t.x<f.x&&(f=t),t.x>s.x&&(s=t),t.depth>l.depth&&(l=t)}));var h=f===s?1:t(f,s)/2,d=h-f.x,p=n/(s.x+h+d),v=e/(l.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*v}))}return i}function o(n){var e=n.children,r=n.parent.children,i=n.i?r[n.i-1]:null;if(e){!function(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)(n=i[o]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(n);var o=(e[0].z+e[e.length-1].z)/2;i?(n.z=i.z+t(n._,i._),n.m=n.z-o):n.z=o}else i&&(n.z=i.z+t(n._,i._));n.parent.A=function(n,e,r){if(e){for(var i,o=n,a=n,u=e,c=o.parent.children[0],f=o.m,s=a.m,l=u.m,h=c.m;u=Hl(u),o=jl(o),u&&o;)c=jl(c),(a=Hl(a)).a=n,(i=u.z+l-o.z-f+t(u._,o._))>0&&(Xl(Gl(u,n,r),n,i),f+=i,s+=i),l+=u.m,f+=o.m,h+=c.m,s+=a.m;u&&!Hl(a)&&(a.t=u,a.m+=l-s),o&&!jl(c)&&(c.t=o,c.m+=f-h,r=n)}return r}(n,i,n.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=n,t.y=t.depth*e}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i},t.treemap=function(){var t=Ql,n=!1,e=1,r=1,i=[0],o=El,a=El,u=El,c=El,f=El;function s(t){return t.x0=t.y0=0,t.x1=e,t.y1=r,t.eachBefore(l),i=[0],n&&t.eachBefore(ql),t}function l(n){var e=i[n.depth],r=n.x0+e,s=n.y0+e,l=n.x1-e,h=n.y1-e;l<r&&(r=l=(r+l)/2),h<s&&(s=h=(s+h)/2),n.x0=r,n.y0=s,n.x1=l,n.y1=h,n.children&&(e=i[n.depth+1]=o(n)/2,r+=f(n)-e,s+=a(n)-e,(l-=u(n)-e)<r&&(r=l=(r+l)/2),(h-=c(n)-e)<s&&(s=h=(s+h)/2),t(n,r,s,l,h))}return s.round=function(t){return arguments.length?(n=!!t,s):n},s.size=function(t){return arguments.length?(e=+t[0],r=+t[1],s):[e,r]},s.tile=function(n){return arguments.length?(t=Tl(n),s):t},s.padding=function(t){return arguments.length?s.paddingInner(t).paddingOuter(t):s.paddingInner()},s.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Cl(+t),s):o},s.paddingOuter=function(t){return arguments.length?s.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):s.paddingTop()},s.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:Cl(+t),s):a},s.paddingRight=function(t){return arguments.length?(u="function"==typeof t?t:Cl(+t),s):u},s.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:Cl(+t),s):c},s.paddingLeft=function(t){return arguments.length?(f="function"==typeof t?t:Cl(+t),s):f},s},t.treemapBinary=function(t,n,e,r,i){var o,a,u=t.children,c=u.length,f=new Array(c+1);for(f[0]=a=o=0;o<c;++o)f[o+1]=a+=u[o].value;!function t(n,e,r,i,o,a,c){if(n>=e-1){var s=u[n];return s.x0=i,s.y0=o,s.x1=a,void(s.y1=c)}for(var l=f[n],h=r/2+l,d=n+1,p=e-1;d<p;){var v=d+p>>>1;f[v]<h?d=v+1:p=v}h-f[d-1]<f[d]-h&&n+1<d&&--d;var g=f[d]-l,y=r-g;if(a-i>c-o){var _=(i*y+a*g)/r;t(n,d,g,i,o,_,c),t(d,e,y,_,o,a,c)}else{var b=(o*y+c*g)/r;t(n,d,g,i,o,a,b),t(d,e,y,i,b,a,c)}}(0,c,t.value,n,e,r,i)},t.treemapDice=Ll,t.treemapSlice=$l,t.treemapSliceDice=function(t,n,e,r,i){(1&t.depth?$l:Ll)(t,n,e,r,i)},t.treemapSquarify=Ql,t.treemapResquarify=Jl,t.interpolate=ye,t.interpolateArray=se,t.interpolateBasis=Kn,t.interpolateBasisClosed=te,t.interpolateDate=le,t.interpolateDiscrete=function(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}},t.interpolateHue=function(t,n){var e=re(+t,+n);return function(t){var n=e(t);return n-360*Math.floor(n/360)}},t.interpolateNumber=he,t.interpolateObject=de,t.interpolateRound=_e,t.interpolateString=ge,t.interpolateTransformCss=ke,t.interpolateTransformSvg=Te,t.interpolateZoom=De,t.interpolateRgb=ae,t.interpolateRgbBasis=ce,t.interpolateRgbBasisClosed=fe,t.interpolateHsl=Le,t.interpolateHslLong=Ue,t.interpolateLab=function(t,n){var e=oe((t=Rn(t)).l,(n=Rn(n)).l),r=oe(t.a,n.a),i=oe(t.b,n.b),o=oe(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=o(n),t+""}},t.interpolateHcl=Be,t.interpolateHclLong=Ye,t.interpolateCubehelix=Ie,t.interpolateCubehelixLong=je,t.piecewise=function(t,n){for(var e=0,r=n.length-1,i=n[0],o=new Array(r<0?0:r);e<r;)o[e]=t(i,i=n[++e]);return function(t){var n=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[n](t-n)}},t.quantize=function(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e},t.path=Hi,t.polygonArea=function(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[1]*i[0]-n[0]*i[1];return o/2},t.polygonCentroid=function(t){for(var n,e,r=-1,i=t.length,o=0,a=0,u=t[i-1],c=0;++r<i;)n=u,u=t[r],c+=e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o/(c*=3),a/c]},t.polygonHull=function(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),i=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];for(r.sort(Kl),n=0;n<e;++n)i[n]=[r[n][0],-r[n][1]];var o=th(r),a=th(i),u=a[0]===o[0],c=a[a.length-1]===o[o.length-1],f=[];for(n=o.length-1;n>=0;--n)f.push(t[r[o[n]][2]]);for(n=+u;n<a.length-c;++n)f.push(t[r[a[n]][2]]);return f},t.polygonContains=function(t,n){for(var e,r,i=t.length,o=t[i-1],a=n[0],u=n[1],c=o[0],f=o[1],s=!1,l=0;l<i;++l)e=(o=t[l])[0],(r=o[1])>u!=f>u&&a<(c-e)*(u-r)/(f-r)+e&&(s=!s),c=e,f=r;return s},t.polygonLength=function(t){for(var n,e,r=-1,i=t.length,o=t[i-1],a=o[0],u=o[1],c=0;++r<i;)n=a,e=u,n-=a=(o=t[r])[0],e-=u=o[1],c+=Math.sqrt(n*n+e*e);return c},t.quadtree=ia,t.randomUniform=eh,t.randomNormal=rh,t.randomLogNormal=ih,t.randomBates=ah,t.randomIrwinHall=oh,t.randomExponential=uh,t.scaleBand=vh,t.scalePoint=function(){return function t(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return t(e())},n}(vh.apply(null,arguments).paddingInner(1))},t.scaleIdentity=function t(n){var e;function r(t){return isNaN(t=+t)?e:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(n=lh.call(t,gh),r):n.slice()},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return t(n).unknown(e)},n=arguments.length?lh.call(n,gh):[0,1],kh(r)},t.scaleLinear=function t(){var n=Ah(_h,_h);return n.copy=function(){return Mh(n,t())},ch.apply(n,arguments),kh(n)},t.scaleLog=function t(){var n=qh(Nh()).domain([1,10]);return n.copy=function(){return Mh(n,t()).base(n.base())},ch.apply(n,arguments),n},t.scaleSymlog=function t(){var n=Oh(Nh());return n.copy=function(){return Mh(n,t()).constant(n.constant())},ch.apply(n,arguments)},t.scaleOrdinal=ph,t.scaleImplicit=dh,t.scalePow=jh,t.scaleSqrt=function(){return jh.apply(null,arguments).exponent(.5)},t.scaleQuantile=function t(){var e,r=[],o=[],a=[];function u(){var t=0,n=Math.max(1,o.length);for(a=new Array(n-1);++t<n;)a[t-1]=N(r,t/n);return c}function c(t){return isNaN(t=+t)?e:o[i(a,t)]}return c.invertExtent=function(t){var n=o.indexOf(t);return n<0?[NaN,NaN]:[n>0?a[n-1]:r[0],n<a.length?a[n]:r[r.length-1]]},c.domain=function(t){if(!arguments.length)return r.slice();r=[];for(var e,i=0,o=t.length;i<o;++i)null==(e=t[i])||isNaN(e=+e)||r.push(e);return r.sort(n),u()},c.range=function(t){return arguments.length?(o=hh.call(t),u()):o.slice()},c.unknown=function(t){return arguments.length?(e=t,c):e},c.quantiles=function(){return a.slice()},c.copy=function(){return t().domain(r).range(o).unknown(e)},ch.apply(c,arguments)},t.scaleQuantize=function t(){var n,e=0,r=1,o=1,a=[.5],u=[0,1];function c(t){return t<=t?u[i(a,t,0,o)]:n}function f(){var t=-1;for(a=new Array(o);++t<o;)a[t]=((t+1)*r-(t-o)*e)/(o+1);return c}return c.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],f()):[e,r]},c.range=function(t){return arguments.length?(o=(u=hh.call(t)).length-1,f()):u.slice()},c.invertExtent=function(t){var n=u.indexOf(t);return n<0?[NaN,NaN]:n<1?[e,a[0]]:n>=o?[a[o-1],r]:[a[n-1],a[n]]},c.unknown=function(t){return arguments.length?(n=t,c):c},c.thresholds=function(){return a.slice()},c.copy=function(){return t().domain([e,r]).range(u).unknown(n)},ch.apply(kh(c),arguments)},t.scaleThreshold=function t(){var n,e=[.5],r=[0,1],o=1;function a(t){return t<=t?r[i(e,t,0,o)]:n}return a.domain=function(t){return arguments.length?(e=hh.call(t),o=Math.min(e.length,r.length-1),a):e.slice()},a.range=function(t){return arguments.length?(r=hh.call(t),o=Math.min(e.length,r.length-1),a):r.slice()},a.invertExtent=function(t){var n=r.indexOf(t);return[e[n-1],e[n]]},a.unknown=function(t){return arguments.length?(n=t,a):n},a.copy=function(){return t().domain(e).range(r).unknown(n)},ch.apply(a,arguments)},t.scaleTime=function(){return ch.apply(wv(wd,md,ad,rd,nd,Kh,Qh,Vh,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},t.scaleUtc=function(){return ch.apply(wv(Vd,Xd,Pd,Td,Sd,Nd,Qh,Vh,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},t.scaleSequential=function t(){var n=kh(Mv()(_h));return n.copy=function(){return Nv(n,t())},fh.apply(n,arguments)},t.scaleSequentialLog=function t(){var n=qh(Mv()).domain([1,10]);return n.copy=function(){return Nv(n,t()).base(n.base())},fh.apply(n,arguments)},t.scaleSequentialPow=Av,t.scaleSequentialSqrt=function(){return Av.apply(null,arguments).exponent(.5)},t.scaleSequentialSymlog=function t(){var n=Oh(Mv());return n.copy=function(){return Nv(n,t()).constant(n.constant())},fh.apply(n,arguments)},t.scaleSequentialQuantile=function t(){var e=[],r=_h;function o(t){if(!isNaN(t=+t))return r((i(e,t)-1)/(e.length-1))}return o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var r,i=0,a=t.length;i<a;++i)null==(r=t[i])||isNaN(r=+r)||e.push(r);return e.sort(n),o},o.interpolator=function(t){return arguments.length?(r=t,o):r},o.copy=function(){return t(r).domain(e)},fh.apply(o,arguments)},t.scaleDiverging=function t(){var n=kh(Sv()(_h));return n.copy=function(){return Nv(n,t())},fh.apply(n,arguments)},t.scaleDivergingLog=function t(){var n=qh(Sv()).domain([.1,1,10]);return n.copy=function(){return Nv(n,t()).base(n.base())},fh.apply(n,arguments)},t.scaleDivergingPow=kv,t.scaleDivergingSqrt=function(){return kv.apply(null,arguments).exponent(.5)},t.scaleDivergingSymlog=function t(){var n=Oh(Sv());return n.copy=function(){return Nv(n,t()).constant(n.constant())},fh.apply(n,arguments)},t.tickFormat=Sh,t.schemeCategory10=Ev,t.schemeAccent=Cv,t.schemeDark2=Pv,t.schemePaired=zv,t.schemePastel1=Rv,t.schemePastel2=Dv,t.schemeSet1=qv,t.schemeSet2=Lv,t.schemeSet3=Uv,t.interpolateBrBG=Yv,t.schemeBrBG=Bv,t.interpolatePRGn=Iv,t.schemePRGn=Fv,t.interpolatePiYG=Hv,t.schemePiYG=jv,t.interpolatePuOr=Gv,t.schemePuOr=Xv,t.interpolateRdBu=$v,t.schemeRdBu=Vv,t.interpolateRdGy=Zv,t.schemeRdGy=Wv,t.interpolateRdYlBu=Jv,t.schemeRdYlBu=Qv,t.interpolateRdYlGn=tg,t.schemeRdYlGn=Kv,t.interpolateSpectral=eg,t.schemeSpectral=ng,t.interpolateBuGn=ig,t.schemeBuGn=rg,t.interpolateBuPu=ag,t.schemeBuPu=og,t.interpolateGnBu=cg,t.schemeGnBu=ug,t.interpolateOrRd=sg,t.schemeOrRd=fg,t.interpolatePuBuGn=hg,t.schemePuBuGn=lg,t.interpolatePuBu=pg,t.schemePuBu=dg,t.interpolatePuRd=gg,t.schemePuRd=vg,t.interpolateRdPu=_g,t.schemeRdPu=yg,t.interpolateYlGnBu=mg,t.schemeYlGnBu=bg,t.interpolateYlGn=wg,t.schemeYlGn=xg,t.interpolateYlOrBr=Ng,t.schemeYlOrBr=Mg,t.interpolateYlOrRd=Sg,t.schemeYlOrRd=Ag,t.interpolateBlues=Tg,t.schemeBlues=kg,t.interpolateGreens=Cg,t.schemeGreens=Eg,t.interpolateGreys=zg,t.schemeGreys=Pg,t.interpolatePurples=Dg,t.schemePurples=Rg,t.interpolateReds=Lg,t.schemeReds=qg,t.interpolateOranges=Og,t.schemeOranges=Ug,t.interpolateCubehelixDefault=Bg,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return Ig.h=360*t-100,Ig.s=1.5-1.5*n,Ig.l=.8-.9*n,Ig+""},t.interpolateWarm=Yg,t.interpolateCool=Fg,t.interpolateSinebow=function(t){var n;return t=(.5-t)*Math.PI,jg.r=255*(n=Math.sin(t))*n,jg.g=255*(n=Math.sin(t+Hg))*n,jg.b=255*(n=Math.sin(t+Xg))*n,jg+""},t.interpolateViridis=Vg,t.interpolateMagma=$g,t.interpolateInferno=Wg,t.interpolatePlasma=Zg,t.create=function(t){return zt(W(t).call(document.documentElement))},t.creator=W,t.local=Dt,t.matcher=tt,t.mouse=Ot,t.namespace=$,t.namespaces=V,t.clientPoint=Ut,t.select=zt,t.selectAll=function(t){return"string"==typeof t?new Ct([document.querySelectorAll(t)],[document.documentElement]):new Ct([null==t?[]:t],Et)},t.selection=Pt,t.selector=Q,t.selectorAll=K,t.style=ct,t.touch=Bt,t.touches=function(t,n){null==n&&(n=Lt().touches);for(var e=0,r=n?n.length:0,i=new Array(r);e<r;++e)i[e]=Ut(t,n[e]);return i},t.window=ut,t.customEvent=kt,t.arc=function(){var t=sy,n=ly,e=Qg(0),r=null,i=hy,o=dy,a=py,u=null;function c(){var c,f,s,l=+t.apply(this,arguments),h=+n.apply(this,arguments),d=i.apply(this,arguments)-uy,p=o.apply(this,arguments)-uy,v=Jg(p-d),g=p>d;if(u||(u=c=Hi()),h<l&&(f=h,h=l,l=f),h>oy)if(v>cy-oy)u.moveTo(h*ty(d),h*ry(d)),u.arc(0,0,h,d,p,!g),l>oy&&(u.moveTo(l*ty(p),l*ry(p)),u.arc(0,0,l,p,d,g));else{var y,_,b=d,m=p,x=d,w=p,M=v,N=v,A=a.apply(this,arguments)/2,S=A>oy&&(r?+r.apply(this,arguments):iy(l*l+h*h)),k=ey(Jg(h-l)/2,+e.apply(this,arguments)),T=k,E=k;if(S>oy){var C=fy(S/l*ry(A)),P=fy(S/h*ry(A));(M-=2*C)>oy?(x+=C*=g?1:-1,w-=C):(M=0,x=w=(d+p)/2),(N-=2*P)>oy?(b+=P*=g?1:-1,m-=P):(N=0,b=m=(d+p)/2)}var z=h*ty(b),R=h*ry(b),D=l*ty(w),q=l*ry(w);if(k>oy){var L,U=h*ty(m),O=h*ry(m),B=l*ty(x),Y=l*ry(x);if(v<ay&&(L=function(t,n,e,r,i,o,a,u){var c=e-t,f=r-n,s=a-i,l=u-o,h=l*c-s*f;if(!(h*h<oy))return[t+(h=(s*(n-o)-l*(t-i))/h)*c,n+h*f]}(z,R,B,Y,U,O,D,q))){var F=z-L[0],I=R-L[1],j=U-L[0],H=O-L[1],X=1/ry(((s=(F*j+I*H)/(iy(F*F+I*I)*iy(j*j+H*H)))>1?0:s<-1?ay:Math.acos(s))/2),G=iy(L[0]*L[0]+L[1]*L[1]);T=ey(k,(l-G)/(X-1)),E=ey(k,(h-G)/(X+1))}}N>oy?E>oy?(y=vy(B,Y,z,R,h,E,g),_=vy(U,O,D,q,h,E,g),u.moveTo(y.cx+y.x01,y.cy+y.y01),E<k?u.arc(y.cx,y.cy,E,Kg(y.y01,y.x01),Kg(_.y01,_.x01),!g):(u.arc(y.cx,y.cy,E,Kg(y.y01,y.x01),Kg(y.y11,y.x11),!g),u.arc(0,0,h,Kg(y.cy+y.y11,y.cx+y.x11),Kg(_.cy+_.y11,_.cx+_.x11),!g),u.arc(_.cx,_.cy,E,Kg(_.y11,_.x11),Kg(_.y01,_.x01),!g))):(u.moveTo(z,R),u.arc(0,0,h,b,m,!g)):u.moveTo(z,R),l>oy&&M>oy?T>oy?(y=vy(D,q,U,O,l,-T,g),_=vy(z,R,B,Y,l,-T,g),u.lineTo(y.cx+y.x01,y.cy+y.y01),T<k?u.arc(y.cx,y.cy,T,Kg(y.y01,y.x01),Kg(_.y01,_.x01),!g):(u.arc(y.cx,y.cy,T,Kg(y.y01,y.x01),Kg(y.y11,y.x11),!g),u.arc(0,0,l,Kg(y.cy+y.y11,y.cx+y.x11),Kg(_.cy+_.y11,_.cx+_.x11),g),u.arc(_.cx,_.cy,T,Kg(_.y11,_.x11),Kg(_.y01,_.x01),!g))):u.arc(0,0,l,w,x,g):u.lineTo(D,q)}else u.moveTo(0,0);if(u.closePath(),c)return u=null,c+""||null}return c.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-ay/2;return[ty(r)*e,ry(r)*e]},c.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:Qg(+n),c):t},c.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Qg(+t),c):n},c.cornerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Qg(+t),c):e},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Qg(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Qg(+t),c):i},c.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Qg(+t),c):o},c.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Qg(+t),c):a},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c},t.area=xy,t.line=my,t.pie=function(){var t=My,n=wy,e=null,r=Qg(0),i=Qg(cy),o=Qg(0);function a(a){var u,c,f,s,l,h=a.length,d=0,p=new Array(h),v=new Array(h),g=+r.apply(this,arguments),y=Math.min(cy,Math.max(-cy,i.apply(this,arguments)-g)),_=Math.min(Math.abs(y)/h,o.apply(this,arguments)),b=_*(y<0?-1:1);for(u=0;u<h;++u)(l=v[p[u]=u]=+t(a[u],u,a))>0&&(d+=l);for(null!=n?p.sort((function(t,e){return n(v[t],v[e])})):null!=e&&p.sort((function(t,n){return e(a[t],a[n])})),u=0,f=d?(y-h*b)/d:0;u<h;++u,g=s)c=p[u],s=g+((l=v[c])>0?l*f:0)+b,v[c]={data:a[c],index:u,value:l,startAngle:g,endAngle:s,padAngle:_};return v}return a.value=function(n){return arguments.length?(t="function"==typeof n?n:Qg(+n),a):t},a.sortValues=function(t){return arguments.length?(n=t,e=null,a):n},a.sort=function(t){return arguments.length?(e=t,n=null,a):e},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Qg(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Qg(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Qg(+t),a):o},a},t.areaRadial=Ey,t.radialArea=Ey,t.lineRadial=Ty,t.radialLine=Ty,t.pointRadial=Cy,t.linkHorizontal=function(){return Dy(qy)},t.linkVertical=function(){return Dy(Ly)},t.linkRadial=function(){var t=Dy(Uy);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){var t=Qg(Oy),n=Qg(64),e=null;function r(){var r;if(e||(e=r=Hi()),t.apply(this,arguments).draw(e,+n.apply(this,arguments)),r)return e=null,r+""||null}return r.type=function(n){return arguments.length?(t="function"==typeof n?n:Qg(n),r):t},r.size=function(t){return arguments.length?(n="function"==typeof t?t:Qg(+t),r):n},r.context=function(t){return arguments.length?(e=null==t?null:t,r):e},r},t.symbols=t_,t.symbolCircle=Oy,t.symbolCross=By,t.symbolDiamond=Iy,t.symbolSquare=Vy,t.symbolStar=Gy,t.symbolTriangle=Wy,t.symbolWye=Ky,t.curveBasisClosed=function(t){return new i_(t)},t.curveBasisOpen=function(t){return new o_(t)},t.curveBasis=function(t){return new r_(t)},t.curveBundle=u_,t.curveCardinalClosed=h_,t.curveCardinalOpen=p_,t.curveCardinal=s_,t.curveCatmullRomClosed=b_,t.curveCatmullRomOpen=x_,t.curveCatmullRom=y_,t.curveLinearClosed=function(t){return new w_(t)},t.curveLinear=yy,t.curveMonotoneX=function(t){return new k_(t)},t.curveMonotoneY=function(t){return new T_(t)},t.curveNatural=function(t){return new C_(t)},t.curveStep=function(t){return new z_(t,.5)},t.curveStepAfter=function(t){return new z_(t,1)},t.curveStepBefore=function(t){return new z_(t,0)},t.stack=function(){var t=Qg([]),n=D_,e=R_,r=q_;function i(i){var o,a,u=t.apply(this,arguments),c=i.length,f=u.length,s=new Array(f);for(o=0;o<f;++o){for(var l,h=u[o],d=s[o]=new Array(c),p=0;p<c;++p)d[p]=l=[0,+r(i[p],h,p,i)],l.data=i[p];d.key=h}for(o=0,a=n(s);o<f;++o)s[a[o]].index=o;return e(s,a),s}return i.keys=function(n){return arguments.length?(t="function"==typeof n?n:Qg(Py.call(n)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:Qg(+t),i):r},i.order=function(t){return arguments.length?(n=null==t?D_:"function"==typeof t?t:Qg(Py.call(t)),i):n},i.offset=function(t){return arguments.length?(e=null==t?R_:t,i):e},i},t.stackOffsetExpand=function(t,n){if((r=t.length)>0){for(var e,r,i,o=0,a=t[0].length;o<a;++o){for(i=e=0;e<r;++e)i+=t[e][o][1]||0;if(i)for(e=0;e<r;++e)t[e][o][1]/=i}R_(t,n)}},t.stackOffsetDiverging=function(t,n){if((u=t.length)>1)for(var e,r,i,o,a,u,c=0,f=t[n[0]].length;c<f;++c)for(o=a=0,e=0;e<u;++e)(i=(r=t[n[e]][c])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},t.stackOffsetNone=R_,t.stackOffsetSilhouette=function(t,n){if((e=t.length)>0){for(var e,r=0,i=t[n[0]],o=i.length;r<o;++r){for(var a=0,u=0;a<e;++a)u+=t[a][r][1]||0;i[r][1]+=i[r][0]=-u/2}R_(t,n)}},t.stackOffsetWiggle=function(t,n){if((i=t.length)>0&&(r=(e=t[n[0]]).length)>0){for(var e,r,i,o=0,a=1;a<r;++a){for(var u=0,c=0,f=0;u<i;++u){for(var s=t[n[u]],l=s[a][1]||0,h=(l-(s[a-1][1]||0))/2,d=0;d<u;++d){var p=t[n[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}c+=l,f+=h*l}e[a-1][1]+=e[a-1][0]=o,c&&(o-=f/c)}e[a-1][1]+=e[a-1][0]=o,R_(t,n)}},t.stackOrderAppearance=L_,t.stackOrderAscending=O_,t.stackOrderDescending=function(t){return O_(t).reverse()},t.stackOrderInsideOut=function(t){var n,e,r=t.length,i=t.map(B_),o=L_(t),a=0,u=0,c=[],f=[];for(n=0;n<r;++n)e=o[n],a<u?(a+=i[e],c.push(e)):(u+=i[e],f.push(e));return f.reverse().concat(c)},t.stackOrderNone=D_,t.stackOrderReverse=function(t){return D_(t).reverse()},t.timeInterval=Gh,t.timeMillisecond=Vh,t.timeMilliseconds=$h,t.utcMillisecond=Vh,t.utcMilliseconds=$h,t.timeSecond=Qh,t.timeSeconds=Jh,t.utcSecond=Qh,t.utcSeconds=Jh,t.timeMinute=Kh,t.timeMinutes=td,t.timeHour=nd,t.timeHours=ed,t.timeDay=rd,t.timeDays=id,t.timeWeek=ad,t.timeWeeks=dd,t.timeSunday=ad,t.timeSundays=dd,t.timeMonday=ud,t.timeMondays=pd,t.timeTuesday=cd,t.timeTuesdays=vd,t.timeWednesday=fd,t.timeWednesdays=gd,t.timeThursday=sd,t.timeThursdays=yd,t.timeFriday=ld,t.timeFridays=_d,t.timeSaturday=hd,t.timeSaturdays=bd,t.timeMonth=md,t.timeMonths=xd,t.timeYear=wd,t.timeYears=Md,t.utcMinute=Nd,t.utcMinutes=Ad,t.utcHour=Sd,t.utcHours=kd,t.utcDay=Td,t.utcDays=Ed,t.utcWeek=Pd,t.utcWeeks=Od,t.utcSunday=Pd,t.utcSundays=Od,t.utcMonday=zd,t.utcMondays=Bd,t.utcTuesday=Rd,t.utcTuesdays=Yd,t.utcWednesday=Dd,t.utcWednesdays=Fd,t.utcThursday=qd,t.utcThursdays=Id,t.utcFriday=Ld,t.utcFridays=jd,t.utcSaturday=Ud,t.utcSaturdays=Hd,t.utcMonth=Xd,t.utcMonths=Gd,t.utcYear=Vd,t.utcYears=$d,t.timeFormatDefaultLocale=sv,t.timeFormatLocale=Jd,t.isoFormat=lv,t.isoParse=hv,t.now=nr,t.timer=ir,t.timerFlush=or,t.timeout=fr,t.interval=function(t,n,e){var r=new rr,i=n;return null==n?(r.restart(t,n,e),r):(n=+n,e=null==e?nr():+e,r.restart((function o(a){a+=i,r.restart(o,i+=n,e),t(a)}),n,e),r)},t.transition=Cr,t.active=function(t,n){var e,r,i=t.__transition;if(i)for(r in n=null==n?null:n+"",i)if((e=i[r]).state>dr&&e.name===n)return new Er([[t]],fi,n,+r);return null},t.interrupt=Mr,t.voronoi=function(){var t=F_,n=I_,e=null;function r(r){return new wb(r.map((function(e,i){var o=[Math.round(t(e,i,r)/bb)*bb,Math.round(n(e,i,r)/bb)*bb];return o.index=i,o.data=e,o})),e)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(n){return arguments.length?(t="function"==typeof n?n:Y_(+n),r):t},r.y=function(t){return arguments.length?(n="function"==typeof t?t:Y_(+t),r):n},r.extent=function(t){return arguments.length?(e=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):e&&[[e[0][0],e[0][1]],[e[1][0],e[1][1]]]},r.size=function(t){return arguments.length?(e=null==t?null:[[0,0],[+t[0],+t[1]]],r):e&&[e[1][0]-e[0][0],e[1][1]-e[0][1]]},r},t.zoom=function(){var n,e,r=Cb,i=Pb,o=qb,a=Rb,u=Db,c=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],s=250,l=De,h=[],d=I("start","zoom","end"),p=500,v=150,g=0;function y(t){t.property("__zoom",zb).on("wheel.zoom",N).on("mousedown.zoom",A).on("dblclick.zoom",S).filter(u).on("touchstart.zoom",k).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(t,n){return(n=Math.max(c[0],Math.min(c[1],n)))===t.k?t:new Ab(n,t.x,t.y)}function b(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new Ab(t.k,r,i)}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,n,e){t.on("start.zoom",(function(){w(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).end()})).tween("zoom",(function(){var t=arguments,r=w(this,t),o=i.apply(this,t),a=e||m(o),u=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),c=this.__zoom,f="function"==typeof n?n.apply(this,t):n,s=l(c.invert(a).concat(u/c.k),f.invert(a).concat(u/f.k));return function(t){if(1===t)t=f;else{var n=s(t),e=u/n[2];t=new Ab(e,a[0]-n[0]*e,a[1]-n[1]*e)}r.zoom(null,t)}}))}function w(t,n){for(var e,r=0,i=h.length;r<i;++r)if((e=h[r]).that===t)return e;return new M(t,n)}function M(t,n){this.that=t,this.args=n,this.index=-1,this.active=0,this.extent=i.apply(t,n)}function N(){if(r.apply(this,arguments)){var t=w(this,arguments),n=this.__zoom,e=Math.max(c[0],Math.min(c[1],n.k*Math.pow(2,a.apply(this,arguments)))),i=Ot(this);if(t.wheel)t.mouse[0][0]===i[0]&&t.mouse[0][1]===i[1]||(t.mouse[1]=n.invert(t.mouse[0]=i)),clearTimeout(t.wheel);else{if(n.k===e)return;t.mouse=[i,n.invert(i)],Mr(this),t.start()}Eb(),t.wheel=setTimeout((function(){t.wheel=null,t.end()}),v),t.zoom("mouse",o(b(_(n,e),t.mouse[0],t.mouse[1]),t.extent,f))}}function A(){if(!e&&r.apply(this,arguments)){var n=w(this,arguments),i=zt(t.event.view).on("mousemove.zoom",(function(){if(Eb(),!n.moved){var e=t.event.clientX-u,r=t.event.clientY-c;n.moved=e*e+r*r>g}n.zoom("mouse",o(b(n.that.__zoom,n.mouse[0]=Ot(n.that),n.mouse[1]),n.extent,f))}),!0).on("mouseup.zoom",(function(){i.on("mousemove.zoom mouseup.zoom",null),jt(t.event.view,n.moved),Eb(),n.end()}),!0),a=Ot(this),u=t.event.clientX,c=t.event.clientY;It(t.event.view),Tb(),n.mouse=[a,this.__zoom.invert(a)],Mr(this),n.start()}}function S(){if(r.apply(this,arguments)){var n=this.__zoom,e=Ot(this),a=n.invert(e),u=n.k*(t.event.shiftKey?.5:2),c=o(b(_(n,u),e,a),i.apply(this,arguments),f);Eb(),s>0?zt(this).transition().duration(s).call(x,c,e):zt(this).call(y.transform,c)}}function k(){if(r.apply(this,arguments)){var e,i,o,a,u=w(this,arguments),c=t.event.changedTouches,f=c.length;for(Tb(),i=0;i<f;++i)a=[a=Bt(this,c,(o=c[i]).identifier),this.__zoom.invert(a),o.identifier],u.touch0?u.touch1||(u.touch1=a):(u.touch0=a,e=!0);if(n&&(n=clearTimeout(n),!u.touch1))return u.end(),void((a=zt(this).on("dblclick.zoom"))&&a.apply(this,arguments));e&&(n=setTimeout((function(){n=null}),p),Mr(this),u.start())}}function T(){var e,r,i,a,u=w(this,arguments),c=t.event.changedTouches,s=c.length;for(Eb(),n&&(n=clearTimeout(n)),e=0;e<s;++e)i=Bt(this,c,(r=c[e]).identifier),u.touch0&&u.touch0[2]===r.identifier?u.touch0[0]=i:u.touch1&&u.touch1[2]===r.identifier&&(u.touch1[0]=i);if(r=u.that.__zoom,u.touch1){var l=u.touch0[0],h=u.touch0[1],d=u.touch1[0],p=u.touch1[1],v=(v=d[0]-l[0])*v+(v=d[1]-l[1])*v,g=(g=p[0]-h[0])*g+(g=p[1]-h[1])*g;r=_(r,Math.sqrt(v/g)),i=[(l[0]+d[0])/2,(l[1]+d[1])/2],a=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!u.touch0)return;i=u.touch0[0],a=u.touch0[1]}u.zoom("touch",o(b(r,i,a),u.extent,f))}function E(){var n,r,i=w(this,arguments),o=t.event.changedTouches,a=o.length;for(Tb(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),p),n=0;n<a;++n)r=o[n],i.touch0&&i.touch0[2]===r.identifier?delete i.touch0:i.touch1&&i.touch1[2]===r.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):i.end()}return y.transform=function(t,n){var e=t.selection?t.selection():t;e.property("__zoom",zb),t!==e?x(t,n):e.interrupt().each((function(){w(this,arguments).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()}))},y.scaleBy=function(t,n){y.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)}))},y.scaleTo=function(t,n){y.transform(t,(function(){var t=i.apply(this,arguments),e=this.__zoom,r=m(t),a=e.invert(r),u="function"==typeof n?n.apply(this,arguments):n;return o(b(_(e,u),r,a),t,f)}))},y.translateBy=function(t,n,e){y.transform(t,(function(){return o(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof e?e.apply(this,arguments):e),i.apply(this,arguments),f)}))},y.translateTo=function(t,n,e){y.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,a=m(t);return o(Sb.translate(a[0],a[1]).scale(r.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof e?-e.apply(this,arguments):-e),t,f)}))},M.prototype={start:function(){return 1==++this.active&&(this.index=h.push(this)-1,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(h.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){kt(new Nb(y,t,this.that.__zoom),d.apply,d,[t,this.that,this.args])}},y.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:Mb(+t),y):a},y.filter=function(t){return arguments.length?(r="function"==typeof t?t:Mb(!!t),y):r},y.touchable=function(t){return arguments.length?(u="function"==typeof t?t:Mb(!!t),y):u},y.extent=function(t){return arguments.length?(i="function"==typeof t?t:Mb([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),y):i},y.scaleExtent=function(t){return arguments.length?(c[0]=+t[0],c[1]=+t[1],y):[c[0],c[1]]},y.translateExtent=function(t){return arguments.length?(f[0][0]=+t[0][0],f[1][0]=+t[1][0],f[0][1]=+t[0][1],f[1][1]=+t[1][1],y):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},y.constrain=function(t){return arguments.length?(o=t,y):o},y.duration=function(t){return arguments.length?(s=+t,y):s},y.interpolate=function(t){return arguments.length?(l=t,y):l},y.on=function(){var t=d.on.apply(d,arguments);return t===d?y:t},y.clickDistance=function(t){return arguments.length?(g=(t=+t)*t,y):Math.sqrt(g)},y},t.zoomTransform=kb,t.zoomIdentity=Sb,Object.defineProperty(t,"__esModule",{value:!0})}(exports)},518:function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=function(){var _scriptName="d3pie",_version="0.1.6",_uniqueIDCounter=0,defaultSettings={header:{title:{text:"",color:"#333333",fontSize:18,font:"arial"},subtitle:{text:"",color:"#666666",fontSize:14,font:"arial"},location:"top-center",titleSubtitlePadding:8},footer:{text:"",color:"#666666",fontSize:14,font:"arial",location:"left"},size:{canvasHeight:500,canvasWidth:500,pieInnerRadius:"0%",pieOuterRadius:null},data:{sortOrder:"none",ignoreSmallSegments:{enabled:!1,valueType:"percentage",value:null},smallSegmentGrouping:{enabled:!1,value:1,valueType:"percentage",label:"Other",color:"#cccccc"},content:[]},labels:{outer:{format:"label",hideWhenLessThanPercentage:null,pieDistance:30},inner:{format:"percentage",hideWhenLessThanPercentage:null},mainLabel:{color:"#333333",font:"arial",fontSize:10},percentage:{color:"#dddddd",font:"arial",fontSize:10,decimalPlaces:0},value:{color:"#cccc44",font:"arial",fontSize:10},lines:{enabled:!0,style:"curved",color:"segment"},truncation:{enabled:!1,truncateLength:30},formatter:null},effects:{load:{effect:"default",speed:1e3},pullOutSegmentOnClick:{effect:"bounce",speed:300,size:10},highlightSegmentOnMouseover:!0,highlightLuminosity:-.2},tooltips:{enabled:!1,type:"placeholder",string:"",placeholderParser:null,styles:{fadeInSpeed:250,backgroundColor:"#000000",backgroundOpacity:.5,color:"#efefef",borderRadius:2,font:"arial",fontSize:10,padding:4}},misc:{colors:{background:null,segments:["#2484c1","#65a620","#7b6888","#a05d56","#961a1a","#d8d23a","#e98125","#d0743c","#635222","#6ada6a","#0c6197","#7d9058","#207f33","#44b9b0","#bca44a","#e4a14b","#a3acb2","#8cc3e9","#69a6f9","#5b388f","#546e91","#8bde95","#d2ab58","#273c71","#98bf6e","#4daa4b","#98abc5","#cc1010","#31383b","#006391","#c2643f","#b0a474","#a5a39c","#a9c2bc","#22af8c","#7fcecf","#987ac6","#3d3b87","#b77b1c","#c9c2b6","#807ece","#8db27c","#be66a2","#9ed3c6","#00644b","#005064","#77979f","#77e079","#9c73ab","#1f79a7"],segmentStroke:"#ffffff"},gradient:{enabled:!1,percentage:95,color:"#000000"},canvasPadding:{top:5,right:5,bottom:5,left:5},pieCenterOffset:{x:0,y:0},cssPrefix:null},callbacks:{onload:null,onMouseoverSegment:null,onMouseoutSegment:null,onClickSegment:null}},validate={initialCheck:function(pie){var cssPrefix=pie.cssPrefix,element=pie.element,options=pie.options;if(!window.d3||!window.d3.hasOwnProperty("version"))return console.error("d3pie error: d3 is not available"),!1;if(!(element instanceof HTMLElement||element instanceof SVGElement))return console.error("d3pie error: the first d3pie() param must be a valid DOM element (not jQuery) or a ID string."),!1;if(!/[a-zA-Z][a-zA-Z0-9_-]*$/.test(cssPrefix))return console.error("d3pie error: invalid options.misc.cssPrefix"),!1;if(!helpers.isArray(options.data.content))return console.error("d3pie error: invalid config structure: missing data.content property."),!1;if(0===options.data.content.length)return console.error("d3pie error: no data supplied."),!1;for(var data=[],i=0;i<options.data.content.length;i++)"number"!=typeof options.data.content[i].value||isNaN(options.data.content[i].value)?console.log("not valid: ",options.data.content[i]):options.data.content[i].value<=0?console.log("not valid - should have positive value: ",options.data.content[i]):data.push(options.data.content[i]);return pie.options.data.content=data,!0}},helpers={addSVGSpace:function(pie){var element=pie.element,canvasWidth=pie.options.size.canvasWidth,canvasHeight=pie.options.size.canvasHeight,backgroundColor=pie.options.misc.colors.background,svg=d3.select(element).append("svg:svg").attr("width",canvasWidth).attr("height",canvasHeight);return"transparent"!==backgroundColor&&svg.style("background-color",(function(){return backgroundColor})),svg},whenIdExists:function(id,callback){var inc=1,giveupIterationCount=1e3,interval=setInterval((function(){document.getElementById(id)&&(clearInterval(interval),callback()),inc>giveupIterationCount&&clearInterval(interval),inc++}),1)},whenElementsExist:function(els,callback){var inc=1,giveupIterationCount=1e3,interval=setInterval((function(){for(var allExist=!0,i=0;i<els.length;i++)if(!document.getElementById(els[i])){allExist=!1;break}allExist&&(clearInterval(interval),callback()),inc>giveupIterationCount&&clearInterval(interval),inc++}),1)},shuffleArray:function(array){for(var tmpVal,randomIndex,currentIndex=array.length;0!==currentIndex;)randomIndex=Math.floor(Math.random()*currentIndex),tmpVal=array[currentIndex-=1],array[currentIndex]=array[randomIndex],array[randomIndex]=tmpVal;return array},processObj:function(obj,is,value){return"string"==typeof is?helpers.processObj(obj,is.split("."),value):1===is.length&&void 0!==value?(obj[is[0]]=value,obj[is[0]]):0===is.length?obj:helpers.processObj(obj[is[0]],is.slice(1),value)},getDimensions:function(id){var el=document.getElementById(id),w=0,h=0;if(el){var dimensions=el.getBBox();w=dimensions.width,h=dimensions.height}else console.log("error: getDimensions() "+id+" not found.");return{w,h}},rectIntersect:function(r1,r2){return!(r2.x>r1.x+r1.w||r2.x+r2.w<r1.x||r2.y+r2.h<r1.y||r2.y>r1.y+r1.h)},getColorShade:function(hex,lum){(hex=String(hex).replace(/[^0-9a-f]/gi,"")).length<6&&(hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]),lum=lum||0;for(var newHex="#",i=0;i<3;i++){var c=parseInt(hex.substr(2*i,2),16);newHex+=("00"+(c=Math.round(Math.min(Math.max(0,c+c*lum),255)).toString(16))).substr(c.length)}return newHex},initSegmentColors:function(pie){for(var data=pie.options.data.content,colors=pie.options.misc.colors.segments,finalColors=[],i=0;i<data.length;i++)data[i].hasOwnProperty("color")?finalColors.push(data[i].color):finalColors.push(colors[i]);return finalColors},applySmallSegmentGrouping:function(data,smallSegmentGrouping){var totalSize;"percentage"===smallSegmentGrouping.valueType&&(totalSize=math.getTotalPieSize(data));for(var newData=[],groupedData=[],totalGroupedData=0,i=0;i<data.length;i++)if("percentage"===smallSegmentGrouping.valueType){if(data[i].value/totalSize*100<=smallSegmentGrouping.value){groupedData.push(data[i]),totalGroupedData+=data[i].value;continue}data[i].isGrouped=!1,newData.push(data[i])}else{if(data[i].value<=smallSegmentGrouping.value){groupedData.push(data[i]),totalGroupedData+=data[i].value;continue}data[i].isGrouped=!1,newData.push(data[i])}return groupedData.length&&newData.push({color:smallSegmentGrouping.color,label:smallSegmentGrouping.label,value:totalGroupedData,isGrouped:!0,groupedData}),newData},showPoint:function(svg,x,y){svg.append("circle").attr("cx",x).attr("cy",y).attr("r",2).style("fill","black")},isFunction:function(functionToCheck){return functionToCheck&&"[object Function]"==={}.toString.call(functionToCheck)},isArray:function(o){return"[object Array]"===Object.prototype.toString.call(o)}},extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,class2type={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},jQuery={isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!==obj&&obj===obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return null===obj?String(obj):class2type[toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||"object"!==jQuery.type(obj)||obj.nodeType)return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var key;for(key in obj);return void 0===key||hasOwn.call(obj,key)}};for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),"object"==typeof target||jQuery.isFunction(target)||(target={}),length===i&&(target=this,--i);i<length;i++)if(null!==(options=arguments[i]))for(name in options)src=target[name],target!==(copy=options[name])&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},math={toRadians:function(degrees){return degrees*(Math.PI/180)},toDegrees:function(radians){return radians*(180/Math.PI)},computePieRadius:function(pie){var size=pie.options.size,canvasPadding=pie.options.misc.canvasPadding,w=size.canvasWidth-canvasPadding.left-canvasPadding.right,h=size.canvasHeight-canvasPadding.top-canvasPadding.bottom;"pie-center"!==pie.options.header.location&&(h-=pie.textComponents.headerHeight),pie.textComponents.footer.exists&&(h-=pie.textComponents.footer.h);var innerRadius,percent,outerRadius=(w<(h=h<0?0:h)?w:h)/3;if(null!==size.pieOuterRadius)if(/%/.test(size.pieOuterRadius)){percent=(percent=(percent=parseInt(size.pieOuterRadius.replace(/[\D]/,""),10))>99?99:percent)<0?0:percent;var smallestDimension=w<h?w:h;if("none"!==pie.options.labels.outer.format){var pieDistanceSpace=2*parseInt(pie.options.labels.outer.pieDistance,10);smallestDimension-pieDistanceSpace>0&&(smallestDimension-=pieDistanceSpace)}outerRadius=Math.floor(smallestDimension/100*percent)/2}else outerRadius=parseInt(size.pieOuterRadius,10);/%/.test(size.pieInnerRadius)?(percent=(percent=(percent=parseInt(size.pieInnerRadius.replace(/[\D]/,""),10))>99?99:percent)<0?0:percent,innerRadius=Math.floor(outerRadius/100*percent)):innerRadius=parseInt(size.pieInnerRadius,10),pie.innerRadius=innerRadius,pie.outerRadius=outerRadius},getTotalPieSize:function(data){for(var totalSize=0,i=0;i<data.length;i++)totalSize+=data[i].value;return totalSize},sortPieData:function(pie){var data=pie.options.data.content;switch(pie.options.data.sortOrder){case"none":break;case"random":data=helpers.shuffleArray(data);break;case"value-asc":data.sort((function(a,b){return a.value<b.value?-1:1}));break;case"value-desc":data.sort((function(a,b){return a.value<b.value?1:-1}));break;case"label-asc":data.sort((function(a,b){return a.label.toLowerCase()>b.label.toLowerCase()?1:-1}));break;case"label-desc":data.sort((function(a,b){return a.label.toLowerCase()<b.label.toLowerCase()?1:-1}))}return data},getPieTranslateCenter:function(pieCenter){return"translate("+pieCenter.x+","+pieCenter.y+")"},calculatePieCenter:function(pie){var pieCenterOffset=pie.options.misc.pieCenterOffset,hasTopTitle=pie.textComponents.title.exists&&"pie-center"!==pie.options.header.location,hasTopSubtitle=pie.textComponents.subtitle.exists&&"pie-center"!==pie.options.header.location,headerOffset=pie.options.misc.canvasPadding.top;hasTopTitle&&hasTopSubtitle?headerOffset+=pie.textComponents.title.h+pie.options.header.titleSubtitlePadding+pie.textComponents.subtitle.h:hasTopTitle?headerOffset+=pie.textComponents.title.h:hasTopSubtitle&&(headerOffset+=pie.textComponents.subtitle.h);var footerOffset=0;pie.textComponents.footer.exists&&(footerOffset=pie.textComponents.footer.h+pie.options.misc.canvasPadding.bottom);var x=(pie.options.size.canvasWidth-pie.options.misc.canvasPadding.left-pie.options.misc.canvasPadding.right)/2+pie.options.misc.canvasPadding.left,y=(pie.options.size.canvasHeight-footerOffset-headerOffset)/2+headerOffset;x+=pieCenterOffset.x,y+=pieCenterOffset.y,pie.pieCenter={x,y}},rotate:function(x,y,xm,ym,a){a=a*Math.PI/180;var cos=Math.cos,sin=Math.sin;return{x:(x-xm)*cos(a)-(y-ym)*sin(a)+xm,y:(x-xm)*sin(a)+(y-ym)*cos(a)+ym}},translate:function(x,y,d,a){var rads=math.toRadians(a);return{x:x+d*Math.sin(rads),y:y-d*Math.cos(rads)}},pointIsInArc:function(pt,ptData,d3Arc){var r1=d3Arc.innerRadius()(ptData),r2=d3Arc.outerRadius()(ptData),theta1=d3Arc.startAngle()(ptData),theta2=d3Arc.endAngle()(ptData),dist=pt.x*pt.x+pt.y*pt.y,angle=Math.atan2(pt.x,-pt.y);return angle=angle<0?angle+2*Math.PI:angle,r1*r1<=dist&&dist<=r2*r2&&theta1<=angle&&angle<=theta2}},labels={add:function(pie,section,sectionDisplayType){var include=labels.getIncludes(sectionDisplayType),settings=pie.options.labels,labelGroup=pie.svg.insert("g","."+pie.cssPrefix+"labels-"+section).attr("class",pie.cssPrefix+"labels-"+section).selectAll("."+pie.cssPrefix+"labelGroup-"+section).data(pie.options.data.content).enter().append("g").attr("id",(function(d,i){return pie.cssPrefix+"labelGroup"+i+"-"+section})).attr("data-index",(function(d,i){return i})).attr("class",pie.cssPrefix+"labelGroup-"+section).style("opacity",0),formatterContext={section,sectionDisplayType};include.mainLabel&&labelGroup.append("text").attr("id",(function(d,i){return pie.cssPrefix+"segmentMainLabel"+i+"-"+section})).attr("class",pie.cssPrefix+"segmentMainLabel-"+section).text((function(d,i){var str=d.label;return settings.formatter?(formatterContext.index=i,formatterContext.part="mainLabel",formatterContext.value=d.value,formatterContext.label=str,str=settings.formatter(formatterContext)):settings.truncation.enabled&&d.label.length>settings.truncation.truncateLength&&(str=d.label.substring(0,settings.truncation.truncateLength)+"..."),str})).style("font-size",settings.mainLabel.fontSize+"px").style("font-family",settings.mainLabel.font).style("fill",settings.mainLabel.color),include.percentage&&labelGroup.append("text").attr("id",(function(d,i){return pie.cssPrefix+"segmentPercentage"+i+"-"+section})).attr("class",pie.cssPrefix+"segmentPercentage-"+section).text((function(d,i){var percentage=segments.getPercentage(pie,i,pie.options.labels.percentage.decimalPlaces);return settings.formatter?(formatterContext.index=i,formatterContext.part="percentage",formatterContext.value=d.value,formatterContext.label=percentage,percentage=settings.formatter(formatterContext)):percentage+="%",percentage})).style("font-size",settings.percentage.fontSize+"px").style("font-family",settings.percentage.font).style("fill",settings.percentage.color),include.value&&labelGroup.append("text").attr("id",(function(d,i){return pie.cssPrefix+"segmentValue"+i+"-"+section})).attr("class",pie.cssPrefix+"segmentValue-"+section).text((function(d,i){return formatterContext.index=i,formatterContext.part="value",formatterContext.value=d.value,formatterContext.label=d.value,settings.formatter?settings.formatter(formatterContext,d.value):d.value})).style("font-size",settings.value.fontSize+"px").style("font-family",settings.value.font).style("fill",settings.value.color)},positionLabelElements:function(pie,section,sectionDisplayType){labels["dimensions-"+section]=[],d3.selectAll("."+pie.cssPrefix+"labelGroup-"+section).each((function(d,i){var mainLabel=d3.select(this).selectAll("."+pie.cssPrefix+"segmentMainLabel-"+section),percentage=d3.select(this).selectAll("."+pie.cssPrefix+"segmentPercentage-"+section),value=d3.select(this).selectAll("."+pie.cssPrefix+"segmentValue-"+section);labels["dimensions-"+section].push({mainLabel:null!==mainLabel.node()?mainLabel.node().getBBox():null,percentage:null!==percentage.node()?percentage.node().getBBox():null,value:null!==value.node()?value.node().getBBox():null})}));var singleLinePad=5,dims=labels["dimensions-"+section];switch(sectionDisplayType){case"label-value1":d3.selectAll("."+pie.cssPrefix+"segmentValue-"+section).attr("dx",(function(d,i){return dims[i].mainLabel.width+singleLinePad}));break;case"label-value2":d3.selectAll("."+pie.cssPrefix+"segmentValue-"+section).attr("dy",(function(d,i){return dims[i].mainLabel.height}));break;case"label-percentage1":d3.selectAll("."+pie.cssPrefix+"segmentPercentage-"+section).attr("dx",(function(d,i){return dims[i].mainLabel.width+singleLinePad}));break;case"label-percentage2":d3.selectAll("."+pie.cssPrefix+"segmentPercentage-"+section).attr("dx",(function(d,i){return dims[i].mainLabel.width/2-dims[i].percentage.width/2})).attr("dy",(function(d,i){return dims[i].mainLabel.height}))}},computeLabelLinePositions:function(pie){pie.lineCoordGroups=[],d3.selectAll("."+pie.cssPrefix+"labelGroup-outer").each((function(d,i){return labels.computeLinePosition(pie,i)}))},computeLinePosition:function(pie,i){var x2,y2,x3,y3,angle=segments.getSegmentAngle(i,pie.options.data.content,pie.totalSize,{midpoint:!0}),originCoords=math.rotate(pie.pieCenter.x,pie.pieCenter.y-pie.outerRadius,pie.pieCenter.x,pie.pieCenter.y,angle),heightOffset=pie.outerLabelGroupData[i].h/5,labelXMargin=6,quarter=Math.floor(angle/90),midPoint=4;switch(2===quarter&&180===angle&&(quarter=1),quarter){case 0:x2=pie.outerLabelGroupData[i].x-labelXMargin-(pie.outerLabelGroupData[i].x-labelXMargin-originCoords.x)/2,y2=pie.outerLabelGroupData[i].y+(originCoords.y-pie.outerLabelGroupData[i].y)/midPoint,x3=pie.outerLabelGroupData[i].x-labelXMargin,y3=pie.outerLabelGroupData[i].y-heightOffset;break;case 1:x2=originCoords.x+(pie.outerLabelGroupData[i].x-originCoords.x)/midPoint,y2=originCoords.y+(pie.outerLabelGroupData[i].y-originCoords.y)/midPoint,x3=pie.outerLabelGroupData[i].x-labelXMargin,y3=pie.outerLabelGroupData[i].y-heightOffset;break;case 2:var startOfLabelX=pie.outerLabelGroupData[i].x+pie.outerLabelGroupData[i].w+labelXMargin;x2=originCoords.x-(originCoords.x-startOfLabelX)/midPoint,y2=originCoords.y+(pie.outerLabelGroupData[i].y-originCoords.y)/midPoint,x3=pie.outerLabelGroupData[i].x+pie.outerLabelGroupData[i].w+labelXMargin,y3=pie.outerLabelGroupData[i].y-heightOffset;break;case 3:var startOfLabel=pie.outerLabelGroupData[i].x+pie.outerLabelGroupData[i].w+labelXMargin;x2=startOfLabel+(originCoords.x-startOfLabel)/midPoint,y2=pie.outerLabelGroupData[i].y+(originCoords.y-pie.outerLabelGroupData[i].y)/midPoint,x3=pie.outerLabelGroupData[i].x+pie.outerLabelGroupData[i].w+labelXMargin,y3=pie.outerLabelGroupData[i].y-heightOffset}"straight"===pie.options.labels.lines.style?pie.lineCoordGroups[i]=[{x:originCoords.x,y:originCoords.y},{x:x3,y:y3}]:pie.lineCoordGroups[i]=[{x:originCoords.x,y:originCoords.y},{x:x2,y:y2},{x:x3,y:y3}]},addLabelLines:function(pie){var lineGroup=pie.svg.insert("g","."+pie.cssPrefix+"pieChart").attr("class",pie.cssPrefix+"lineGroups").style("opacity",0).selectAll("."+pie.cssPrefix+"lineGroup").data(pie.lineCoordGroups).enter().append("g").attr("class",pie.cssPrefix+"lineGroup"),lineFunction=d3.svg.line().interpolate("basis").x((function(d){return d.x})).y((function(d){return d.y}));lineGroup.append("path").attr("d",lineFunction).attr("stroke",(function(d,i){return"segment"===pie.options.labels.lines.color?pie.options.colors[i]:pie.options.labels.lines.color})).attr("stroke-width",1).attr("fill","none").style("opacity",(function(d,i){var percentage=pie.options.labels.outer.hideWhenLessThanPercentage,segmentPercentage=segments.getPercentage(pie,i,pie.options.labels.percentage.decimalPlaces);return null!==percentage&&segmentPercentage<percentage||""===pie.options.data.content[i].label?0:1}))},positionLabelGroups:function(pie,section){"none"!==pie.options.labels[section].format&&d3.selectAll("."+pie.cssPrefix+"labelGroup-"+section).style("opacity",0).attr("transform",(function(d,i){var x,y;if("outer"===section)x=pie.outerLabelGroupData[i].x,y=pie.outerLabelGroupData[i].y;else{var pieCenterCopy=extend(!0,{},pie.pieCenter);if(pie.innerRadius>0){var angle=segments.getSegmentAngle(i,pie.options.data.content,pie.totalSize,{midpoint:!0}),newCoords=math.translate(pie.pieCenter.x,pie.pieCenter.y,pie.innerRadius,angle);pieCenterCopy.x=newCoords.x,pieCenterCopy.y=newCoords.y}var dims=helpers.getDimensions(pie.cssPrefix+"labelGroup"+i+"-inner"),xOffset=dims.w/2,yOffset=dims.h/4;x=pieCenterCopy.x+(pie.lineCoordGroups[i][0].x-pieCenterCopy.x)/1.8,y=pieCenterCopy.y+(pie.lineCoordGroups[i][0].y-pieCenterCopy.y)/1.8,x-=xOffset,y+=yOffset}return"translate("+x+","+y+")"}))},fadeInLabelsAndLines:function(pie){var loadSpeed="default"===pie.options.effects.load.effect?pie.options.effects.load.speed:1;setTimeout((function(){var labelFadeInTime="default"===pie.options.effects.load.effect?400:1;d3.selectAll("."+pie.cssPrefix+"labelGroup-outer").transition().duration(labelFadeInTime).style("opacity",(function(d,i){var percentage=pie.options.labels.outer.hideWhenLessThanPercentage,segmentPercentage=segments.getPercentage(pie,i,pie.options.labels.percentage.decimalPlaces);return null!==percentage&&segmentPercentage<percentage?0:1})),d3.selectAll("."+pie.cssPrefix+"labelGroup-inner").transition().duration(labelFadeInTime).style("opacity",(function(d,i){var percentage=pie.options.labels.inner.hideWhenLessThanPercentage,segmentPercentage=segments.getPercentage(pie,i,pie.options.labels.percentage.decimalPlaces);return null!==percentage&&segmentPercentage<percentage?0:1})),d3.selectAll("g."+pie.cssPrefix+"lineGroups").transition().duration(labelFadeInTime).style("opacity",1),helpers.isFunction(pie.options.callbacks.onload)&&setTimeout((function(){try{pie.options.callbacks.onload()}catch(e){}}),labelFadeInTime)}),loadSpeed)},getIncludes:function(val){var addMainLabel=!1,addValue=!1,addPercentage=!1;switch(val){case"label":addMainLabel=!0;break;case"value":addValue=!0;break;case"percentage":addPercentage=!0;break;case"label-value1":case"label-value2":addMainLabel=!0,addValue=!0;break;case"label-percentage1":case"label-percentage2":addMainLabel=!0,addPercentage=!0}return{mainLabel:addMainLabel,value:addValue,percentage:addPercentage}},computeOuterLabelCoords:function(pie){pie.svg.selectAll("."+pie.cssPrefix+"labelGroup-outer").each((function(d,i){return labels.getIdealOuterLabelPositions(pie,i)})),labels.resolveOuterLabelCollisions(pie)},resolveOuterLabelCollisions:function(pie){if("none"!==pie.options.labels.outer.format){var size=pie.options.data.content.length;labels.checkConflict(pie,0,"clockwise",size),labels.checkConflict(pie,size-1,"anticlockwise",size)}},checkConflict:function(pie,currIndex,direction,size){var i,curr;if(!(size<=1)){var currIndexHemisphere=pie.outerLabelGroupData[currIndex].hs;if(!("clockwise"===direction&&"right"!==currIndexHemisphere||"anticlockwise"===direction&&"left"!==currIndexHemisphere)){var nextIndex="clockwise"===direction?currIndex+1:currIndex-1,currLabelGroup=pie.outerLabelGroupData[currIndex],examinedLabelGroup=pie.outerLabelGroupData[nextIndex],info={labelHeights:pie.outerLabelGroupData[0].h,center:pie.pieCenter,lineLength:pie.outerRadius+pie.options.labels.outer.pieDistance,heightChange:pie.outerLabelGroupData[0].h+1};if("clockwise"===direction){for(i=0;i<=currIndex;i++)if(curr=pie.outerLabelGroupData[i],helpers.rectIntersect(curr,examinedLabelGroup)){labels.adjustLabelPos(pie,nextIndex,currLabelGroup,info);break}}else for(i=size-1;i>=currIndex;i--)if(curr=pie.outerLabelGroupData[i],helpers.rectIntersect(curr,examinedLabelGroup)){labels.adjustLabelPos(pie,nextIndex,currLabelGroup,info);break}labels.checkConflict(pie,nextIndex,direction,size)}}},adjustLabelPos:function(pie,nextIndex,lastCorrectlyPositionedLabel,info){var xDiff,yDiff,newXPos,newYPos;newYPos=lastCorrectlyPositionedLabel.y+info.heightChange,yDiff=info.center.y-newYPos,xDiff=Math.abs(info.lineLength)>Math.abs(yDiff)?Math.sqrt(info.lineLength*info.lineLength-yDiff*yDiff):Math.sqrt(yDiff*yDiff-info.lineLength*info.lineLength),newXPos="right"===lastCorrectlyPositionedLabel.hs?info.center.x+xDiff:info.center.x-xDiff-pie.outerLabelGroupData[nextIndex].w,pie.outerLabelGroupData[nextIndex].x=newXPos,pie.outerLabelGroupData[nextIndex].y=newYPos},getIdealOuterLabelPositions:function(pie,i){var labelGroupNode=d3.select("#"+pie.cssPrefix+"labelGroup"+i+"-outer").node();if(labelGroupNode){var labelGroupDims=labelGroupNode.getBBox(),angle=segments.getSegmentAngle(i,pie.options.data.content,pie.totalSize,{midpoint:!0}),originalX=pie.pieCenter.x,originalY=pie.pieCenter.y-(pie.outerRadius+pie.options.labels.outer.pieDistance),newCoords=math.rotate(originalX,originalY,pie.pieCenter.x,pie.pieCenter.y,angle),hemisphere="right";angle>180?(newCoords.x-=labelGroupDims.width+8,hemisphere="left"):newCoords.x+=8,pie.outerLabelGroupData[i]={x:newCoords.x,y:newCoords.y,w:labelGroupDims.width,h:labelGroupDims.height,hs:hemisphere}}}},segments={create:function(pie){var pieCenter=pie.pieCenter,colors=pie.options.colors,loadEffects=pie.options.effects.load,segmentStroke=pie.options.misc.colors.segmentStroke,pieChartElement=pie.svg.insert("g","#"+pie.cssPrefix+"title").attr("transform",(function(){return math.getPieTranslateCenter(pieCenter)})).attr("class",pie.cssPrefix+"pieChart"),arc=d3.svg.arc().innerRadius(pie.innerRadius).outerRadius(pie.outerRadius).startAngle(0).endAngle((function(d){return d.value/pie.totalSize*2*Math.PI})),g=pieChartElement.selectAll("."+pie.cssPrefix+"arc").data(pie.options.data.content).enter().append("g").attr("class",pie.cssPrefix+"arc"),loadSpeed=loadEffects.speed;"none"===loadEffects.effect&&(loadSpeed=0),g.append("path").attr("id",(function(d,i){return pie.cssPrefix+"segment"+i})).attr("fill",(function(d,i){var color=colors[i];return pie.options.misc.gradient.enabled&&(color="url(#"+pie.cssPrefix+"grad"+i+")"),color})).style("stroke",segmentStroke).style("stroke-width",1).transition().ease("cubic-in-out").duration(loadSpeed).attr("data-index",(function(d,i){return i})).attrTween("d",(function(b){var i=d3.interpolate({value:0},b);return function(t){return pie.arc(i(t))}})),pie.svg.selectAll("g."+pie.cssPrefix+"arc").attr("transform",(function(d,i){var angle=0;return i>0&&(angle=segments.getSegmentAngle(i-1,pie.options.data.content,pie.totalSize)),"rotate("+angle+")"})),pie.arc=arc},addGradients:function(pie){var grads=pie.svg.append("defs").selectAll("radialGradient").data(pie.options.data.content).enter().append("radialGradient").attr("gradientUnits","userSpaceOnUse").attr("cx",0).attr("cy",0).attr("r","120%").attr("id",(function(d,i){return pie.cssPrefix+"grad"+i}));grads.append("stop").attr("offset","0%").style("stop-color",(function(d,i){return pie.options.colors[i]})),grads.append("stop").attr("offset",pie.options.misc.gradient.percentage+"%").style("stop-color",pie.options.misc.gradient.color)},addSegmentEventHandlers:function(pie){var arc=d3.selectAll("."+pie.cssPrefix+"arc,."+pie.cssPrefix+"labelGroup-inner,."+pie.cssPrefix+"labelGroup-outer");arc.on("click",(function(){var segment,currentEl=d3.select(this);if(currentEl.attr("class")===pie.cssPrefix+"arc")segment=currentEl.select("path");else{var index=currentEl.attr("data-index");segment=d3.select("#"+pie.cssPrefix+"segment"+index)}var isExpanded=segment.attr("class")===pie.cssPrefix+"expanded";segments.onSegmentEvent(pie,pie.options.callbacks.onClickSegment,segment,isExpanded),"none"!==pie.options.effects.pullOutSegmentOnClick.effect&&(isExpanded?segments.closeSegment(pie,segment.node()):segments.openSegment(pie,segment.node()))})),arc.on("mouseover",(function(){var segment,index,currentEl=d3.select(this);if(currentEl.attr("class")===pie.cssPrefix+"arc"?segment=currentEl.select("path"):(index=currentEl.attr("data-index"),segment=d3.select("#"+pie.cssPrefix+"segment"+index)),pie.options.effects.highlightSegmentOnMouseover){index=segment.attr("data-index");var segColor=pie.options.colors[index];segment.style("fill",helpers.getColorShade(segColor,pie.options.effects.highlightLuminosity))}pie.options.tooltips.enabled&&(index=segment.attr("data-index"),tt.showTooltip(pie,index));var isExpanded=segment.attr("class")===pie.cssPrefix+"expanded";segments.onSegmentEvent(pie,pie.options.callbacks.onMouseoverSegment,segment,isExpanded)})),arc.on("mousemove",(function(){tt.moveTooltip(pie)})),arc.on("mouseout",(function(){var segment,index,currentEl=d3.select(this);if(currentEl.attr("class")===pie.cssPrefix+"arc"?segment=currentEl.select("path"):(index=currentEl.attr("data-index"),segment=d3.select("#"+pie.cssPrefix+"segment"+index)),pie.options.effects.highlightSegmentOnMouseover){index=segment.attr("data-index");var color=pie.options.colors[index];pie.options.misc.gradient.enabled&&(color="url(#"+pie.cssPrefix+"grad"+index+")"),segment.style("fill",color)}pie.options.tooltips.enabled&&(index=segment.attr("data-index"),tt.hideTooltip(pie,index));var isExpanded=segment.attr("class")===pie.cssPrefix+"expanded";segments.onSegmentEvent(pie,pie.options.callbacks.onMouseoutSegment,segment,isExpanded)}))},onSegmentEvent:function(pie,func,segment,isExpanded){if(helpers.isFunction(func)){var index=parseInt(segment.attr("data-index"),10);func({segment:segment.node(),index,expanded:isExpanded,data:pie.options.data.content[index]})}},openSegment:function(pie,segment){pie.isOpeningSegment||(pie.isOpeningSegment=!0,d3.selectAll("."+pie.cssPrefix+"expanded").length>0&&segments.closeSegment(pie,d3.select("."+pie.cssPrefix+"expanded").node()),d3.select(segment).transition().ease(pie.options.effects.pullOutSegmentOnClick.effect).duration(pie.options.effects.pullOutSegmentOnClick.speed).attr("transform",(function(d,i){var c=pie.arc.centroid(d),x=c[0],y=c[1],h=Math.sqrt(x*x+y*y),pullOutSize=parseInt(pie.options.effects.pullOutSegmentOnClick.size,10);return"translate("+x/h*pullOutSize+","+y/h*pullOutSize+")"})).each("end",(function(d,i){pie.currentlyOpenSegment=segment,pie.isOpeningSegment=!1,d3.select(this).attr("class",pie.cssPrefix+"expanded")})))},closeSegment:function(pie,segment){d3.select(segment).transition().duration(400).attr("transform","translate(0,0)").each("end",(function(d,i){d3.select(this).attr("class",""),pie.currentlyOpenSegment=null}))},getCentroid:function(el){var bbox=el.getBBox();return{x:bbox.x+bbox.width/2,y:bbox.y+bbox.height/2}},getSegmentAngle:function(index,data,totalSize,opts){var fullValue,options=extend({compounded:!0,midpoint:!1},opts),currValue=data[index].value;if(options.compounded){fullValue=0;for(var i=0;i<=index;i++)fullValue+=data[i].value}void 0===fullValue&&(fullValue=currValue);var angle=fullValue/totalSize*360;return options.midpoint&&(angle-=currValue/totalSize*360/2),angle},getPercentage:function(pie,index,decimalPlaces){var relativeAmount=pie.options.data.content[index].value/pie.totalSize;return decimalPlaces<=0?Math.round(100*relativeAmount):(100*relativeAmount).toFixed(decimalPlaces)}},text={offscreenCoord:-1e4,addTitle:function(pie){pie.svg.selectAll("."+pie.cssPrefix+"title").data([pie.options.header.title]).enter().append("text").text((function(d){return d.text})).attr({id:pie.cssPrefix+"title",class:pie.cssPrefix+"title",x:text.offscreenCoord,y:text.offscreenCoord}).attr("text-anchor",(function(){return"top-center"===pie.options.header.location||"pie-center"===pie.options.header.location?"middle":"left"})).attr("fill",(function(d){return d.color})).style("font-size",(function(d){return d.fontSize+"px"})).style("font-family",(function(d){return d.font}))},positionTitle:function(pie){var x,textComponents=pie.textComponents,headerLocation=pie.options.header.location,canvasPadding=pie.options.misc.canvasPadding,canvasWidth=pie.options.size.canvasWidth,titleSubtitlePadding=pie.options.header.titleSubtitlePadding;x="top-left"===headerLocation?canvasPadding.left:(canvasWidth-canvasPadding.right)/2+canvasPadding.left,x+=pie.options.misc.pieCenterOffset.x;var y=canvasPadding.top+textComponents.title.h;"pie-center"===headerLocation&&(y=pie.pieCenter.y,textComponents.subtitle.exists?y=y-(textComponents.title.h+titleSubtitlePadding+textComponents.subtitle.h)/2+textComponents.title.h:y+=textComponents.title.h/4),pie.svg.select("#"+pie.cssPrefix+"title").attr("x",x).attr("y",y)},addSubtitle:function(pie){var headerLocation=pie.options.header.location;pie.svg.selectAll("."+pie.cssPrefix+"subtitle").data([pie.options.header.subtitle]).enter().append("text").text((function(d){return d.text})).attr("x",text.offscreenCoord).attr("y",text.offscreenCoord).attr("id",pie.cssPrefix+"subtitle").attr("class",pie.cssPrefix+"subtitle").attr("text-anchor",(function(){return"top-center"===headerLocation||"pie-center"===headerLocation?"middle":"left"})).attr("fill",(function(d){return d.color})).style("font-size",(function(d){return d.fontSize+"px"})).style("font-family",(function(d){return d.font}))},positionSubtitle:function(pie){var x,canvasPadding=pie.options.misc.canvasPadding,canvasWidth=pie.options.size.canvasWidth;x="top-left"===pie.options.header.location?canvasPadding.left:(canvasWidth-canvasPadding.right)/2+canvasPadding.left,x+=pie.options.misc.pieCenterOffset.x;var y=text.getHeaderHeight(pie);pie.svg.select("#"+pie.cssPrefix+"subtitle").attr("x",x).attr("y",y)},addFooter:function(pie){pie.svg.selectAll("."+pie.cssPrefix+"footer").data([pie.options.footer]).enter().append("text").text((function(d){return d.text})).attr("x",text.offscreenCoord).attr("y",text.offscreenCoord).attr("id",pie.cssPrefix+"footer").attr("class",pie.cssPrefix+"footer").attr("text-anchor",(function(){var location="left";return"bottom-center"===pie.options.footer.location?location="middle":"bottom-right"===pie.options.footer.location&&(location="left"),location})).attr("fill",(function(d){return d.color})).style("font-size",(function(d){return d.fontSize+"px"})).style("font-family",(function(d){return d.font}))},positionFooter:function(pie){var x,footerLocation=pie.options.footer.location,footerWidth=pie.textComponents.footer.w,canvasWidth=pie.options.size.canvasWidth,canvasHeight=pie.options.size.canvasHeight,canvasPadding=pie.options.misc.canvasPadding;x="bottom-left"===footerLocation?canvasPadding.left:"bottom-right"===footerLocation?canvasWidth-footerWidth-canvasPadding.right:canvasWidth/2,pie.svg.select("#"+pie.cssPrefix+"footer").attr("x",x).attr("y",canvasHeight-canvasPadding.bottom)},getHeaderHeight:function(pie){var h;if(pie.textComponents.title.exists){var totalTitleHeight=pie.textComponents.title.h+pie.options.header.titleSubtitlePadding+pie.textComponents.subtitle.h;h="pie-center"===pie.options.header.location?pie.pieCenter.y-totalTitleHeight/2+totalTitleHeight:totalTitleHeight+pie.options.misc.canvasPadding.top}else if("pie-center"===pie.options.header.location){var footerPlusPadding=pie.options.misc.canvasPadding.bottom+pie.textComponents.footer.h;h=(pie.options.size.canvasHeight-footerPlusPadding)/2+pie.options.misc.canvasPadding.top+pie.textComponents.subtitle.h/2}else h=pie.options.misc.canvasPadding.top+pie.textComponents.subtitle.h;return h}},tt={addTooltips:function(pie){var tooltips=pie.svg.insert("g").attr("class",pie.cssPrefix+"tooltips");tooltips.selectAll("."+pie.cssPrefix+"tooltip").data(pie.options.data.content).enter().append("g").attr("class",pie.cssPrefix+"tooltip").attr("id",(function(d,i){return pie.cssPrefix+"tooltip"+i})).style("opacity",0).append("rect").attr({rx:pie.options.tooltips.styles.borderRadius,ry:pie.options.tooltips.styles.borderRadius,x:-pie.options.tooltips.styles.padding,opacity:pie.options.tooltips.styles.backgroundOpacity}).style("fill",pie.options.tooltips.styles.backgroundColor),tooltips.selectAll("."+pie.cssPrefix+"tooltip").data(pie.options.data.content).append("text").attr("fill",(function(d){return pie.options.tooltips.styles.color})).style("font-size",(function(d){return pie.options.tooltips.styles.fontSize})).style("font-family",(function(d){return pie.options.tooltips.styles.font})).text((function(d,i){var caption=pie.options.tooltips.string;return"caption"===pie.options.tooltips.type&&(caption=d.caption),tt.replacePlaceholders(pie,caption,i,{label:d.label,value:d.value,percentage:segments.getPercentage(pie,i,pie.options.labels.percentage.decimalPlaces)})})),tooltips.selectAll("."+pie.cssPrefix+"tooltip rect").attr({width:function(d,i){return helpers.getDimensions(pie.cssPrefix+"tooltip"+i).w+2*pie.options.tooltips.styles.padding},height:function(d,i){return helpers.getDimensions(pie.cssPrefix+"tooltip"+i).h+2*pie.options.tooltips.styles.padding},y:function(d,i){return-helpers.getDimensions(pie.cssPrefix+"tooltip"+i).h/2+1}})},showTooltip:function(pie,index){var fadeInSpeed=pie.options.tooltips.styles.fadeInSpeed;tt.currentTooltip===index&&(fadeInSpeed=1),tt.currentTooltip=index,d3.select("#"+pie.cssPrefix+"tooltip"+index).transition().duration(fadeInSpeed).style("opacity",(function(){return 1})),tt.moveTooltip(pie)},moveTooltip:function(pie){d3.selectAll("#"+pie.cssPrefix+"tooltip"+tt.currentTooltip).attr("transform",(function(d){var mouseCoords=d3.mouse(this.parentNode);return"translate("+(mouseCoords[0]+pie.options.tooltips.styles.padding+2)+","+(mouseCoords[1]-2*pie.options.tooltips.styles.padding-2)+")"}))},hideTooltip:function(pie,index){d3.select("#"+pie.cssPrefix+"tooltip"+index).style("opacity",(function(){return 0})),d3.select("#"+pie.cssPrefix+"tooltip"+tt.currentTooltip).attr("transform",(function(d,i){return"translate("+(pie.options.size.canvasWidth+1e3)+","+(pie.options.size.canvasHeight+1e3)+")"}))},replacePlaceholders:function(pie,str,index,replacements){helpers.isFunction(pie.options.tooltips.placeholderParser)&&pie.options.tooltips.placeholderParser(index,replacements);var replacer=function(){return function(match){var placeholder=arguments[1];return replacements.hasOwnProperty(placeholder)?replacements[arguments[1]]:arguments[0]}};return str.replace(/\{(\w+)\}/g,replacer(replacements))}},d3pie=function(element,options){if(this.element=element,"string"==typeof element){var el=element.replace(/^#/,"");this.element=document.getElementById(el)}var opts={};extend(!0,opts,defaultSettings,options),this.options=opts,null!==this.options.misc.cssPrefix?this.cssPrefix=this.options.misc.cssPrefix:(this.cssPrefix="p"+_uniqueIDCounter+"_",_uniqueIDCounter++),validate.initialCheck(this)&&(d3.select(this.element).attr(_scriptName,_version),this.options.data.content=math.sortPieData(this),this.options.data.smallSegmentGrouping.enabled&&(this.options.data.content=helpers.applySmallSegmentGrouping(this.options.data.content,this.options.data.smallSegmentGrouping)),this.options.colors=helpers.initSegmentColors(this),this.totalSize=math.getTotalPieSize(this.options.data.content),_init.call(this))};d3pie.prototype.recreate=function(){validate.initialCheck(this)&&(this.options.data.content=math.sortPieData(this),this.options.data.smallSegmentGrouping.enabled&&(this.options.data.content=helpers.applySmallSegmentGrouping(this.options.data.content,this.options.data.smallSegmentGrouping)),this.options.colors=helpers.initSegmentColors(this),this.totalSize=math.getTotalPieSize(this.options.data.content),_init.call(this))},d3pie.prototype.redraw=function(){this.element.innerHTML="",_init.call(this)},d3pie.prototype.destroy=function(){this.element.innerHTML="",d3.select(this.element).attr(_scriptName,null)},d3pie.prototype.getOpenSegment=function(){var segment=this.currentlyOpenSegment;if(null!=segment){var index=parseInt(d3.select(segment).attr("data-index"),10);return{element:segment,index,data:this.options.data.content[index]}}return null},d3pie.prototype.openSegment=function(index){(index=parseInt(index,10))<0||index>this.options.data.content.length-1||segments.openSegment(this,d3.select("#"+this.cssPrefix+"segment"+index).node())},d3pie.prototype.closeSegment=function(){var segment=this.currentlyOpenSegment;segment&&segments.closeSegment(this,segment)},d3pie.prototype.updateProp=function(propKey,value){switch(propKey){case"header.title.text":var oldVal=helpers.processObj(this.options,propKey);helpers.processObj(this.options,propKey,value),d3.select("#"+this.cssPrefix+"title").html(value),(""===oldVal&&""!==value||""!==oldVal&&""===value)&&this.redraw();break;case"header.subtitle.text":var oldValue=helpers.processObj(this.options,propKey);helpers.processObj(this.options,propKey,value),d3.select("#"+this.cssPrefix+"subtitle").html(value),(""===oldValue&&""!==value||""!==oldValue&&""===value)&&this.redraw();break;case"callbacks.onload":case"callbacks.onMouseoverSegment":case"callbacks.onMouseoutSegment":case"callbacks.onClickSegment":case"effects.pullOutSegmentOnClick.effect":case"effects.pullOutSegmentOnClick.speed":case"effects.pullOutSegmentOnClick.size":case"effects.highlightSegmentOnMouseover":case"effects.highlightLuminosity":helpers.processObj(this.options,propKey,value);break;default:helpers.processObj(this.options,propKey,value),this.destroy(),this.recreate()}};var _init=function(){this.svg=helpers.addSVGSpace(this),this.textComponents={headerHeight:0,title:{exists:""!==this.options.header.title.text,h:0,w:0},subtitle:{exists:""!==this.options.header.subtitle.text,h:0,w:0},footer:{exists:""!==this.options.footer.text,h:0,w:0}},this.outerLabelGroupData=[],this.textComponents.title.exists&&text.addTitle(this),this.textComponents.subtitle.exists&&text.addSubtitle(this),text.addFooter(this);var self=this;helpers.whenIdExists(this.cssPrefix+"footer",(function(){text.positionFooter(self);var d3=helpers.getDimensions(self.cssPrefix+"footer");self.textComponents.footer.h=d3.h,self.textComponents.footer.w=d3.w}));var reqEls=[];this.textComponents.title.exists&&reqEls.push(this.cssPrefix+"title"),this.textComponents.subtitle.exists&&reqEls.push(this.cssPrefix+"subtitle"),this.textComponents.footer.exists&&reqEls.push(this.cssPrefix+"footer"),helpers.whenElementsExist(reqEls,(function(){if(self.textComponents.title.exists){var d1=helpers.getDimensions(self.cssPrefix+"title");self.textComponents.title.h=d1.h,self.textComponents.title.w=d1.w}if(self.textComponents.subtitle.exists){var d2=helpers.getDimensions(self.cssPrefix+"subtitle");self.textComponents.subtitle.h=d2.h,self.textComponents.subtitle.w=d2.w}if(self.textComponents.title.exists||self.textComponents.subtitle.exists){var headerHeight=0;self.textComponents.title.exists&&(headerHeight+=self.textComponents.title.h,self.textComponents.subtitle.exists&&(headerHeight+=self.options.header.titleSubtitlePadding)),self.textComponents.subtitle.exists&&(headerHeight+=self.textComponents.subtitle.h),self.textComponents.headerHeight=headerHeight}math.computePieRadius(self),math.calculatePieCenter(self),text.positionTitle(self),text.positionSubtitle(self),self.options.misc.gradient.enabled&&segments.addGradients(self),segments.create(self),labels.add(self,"inner",self.options.labels.inner.format),labels.add(self,"outer",self.options.labels.outer.format),labels.positionLabelElements(self,"inner",self.options.labels.inner.format),labels.positionLabelElements(self,"outer",self.options.labels.outer.format),labels.computeOuterLabelCoords(self),labels.positionLabelGroups(self,"outer"),labels.computeLabelLinePositions(self),self.options.labels.lines.enabled&&"none"!==self.options.labels.outer.format&&labels.addLabelLines(self),labels.positionLabelGroups(self,"inner"),labels.fadeInLabelsAndLines(self),self.options.tooltips.enabled&&tt.addTooltips(self),segments.addSegmentEventHandlers(self)}))};return d3pie},void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},748:()=>{!function(){"use strict";var codeMirrorEditor=function(instance){if(!instance.getWrapperElement)throw"Invalid CodeMirror object given";this.codeMirror=instance};codeMirrorEditor.prototype.getValue=function(){return this.codeMirror.getValue()},codeMirrorEditor.prototype.insertValue=function(val){this.codeMirror.replaceSelection(val)},codeMirrorEditor.prototype.setValue=function(val){var cursor=this.codeMirror.getCursor();this.codeMirror.setValue(val),this.codeMirror.setCursor(cursor)},codeMirrorEditor.attach=function(codeMirror,options){options=options||{};var editor=new codeMirrorEditor(codeMirror),inlineattach=new inlineAttachment(options,editor);codeMirror.getWrapperElement().addEventListener("paste",(function(e){inlineattach.onPaste(e)}),!1),codeMirror.setOption("onDragEvent",(function(data,e){if("drop"===e.type)return e.stopPropagation(),e.preventDefault(),inlineattach.onDrop(e)}))};var codeMirrorEditor4=function(instance){codeMirrorEditor.call(this,instance)};codeMirrorEditor4.attach=function(codeMirror,options){options=options||{};var editor=new codeMirrorEditor(codeMirror),inlineattach=new inlineAttachment(options,editor);codeMirror.getWrapperElement().addEventListener("paste",(function(e){inlineattach.onPaste(e)}),!1),codeMirror.on("drop",(function(data,e){return!!inlineattach.onDrop(e)&&(e.stopPropagation(),e.preventDefault(),!0)}))},inlineAttachment.editors.codemirror4=codeMirrorEditor4}()},503:(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=function o(a,l,s){function c(t,e){if(!l[t]){if(!a[t]){if(u)return u(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=l[t]={exports:{}};a[t][0].call(i.exports,(function(e){return c(a[t][1][e]||e)}),i,i.exports,o,a,l,s)}return l[t].exports}for(var u=void 0,e=0;e<s.length;e++)c(s[e]);return c}({1:[function(e,t,n){"use strict";n.byteLength=function(e){var t=d(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){for(var t,n=d(e),r=n[0],i=n[1],o=new f(3*(r+(u=i))/4-u),a=0,l=0<i?r-4:r,s=0;s<l;s+=4)t=h[e.charCodeAt(s)]<<18|h[e.charCodeAt(s+1)]<<12|h[e.charCodeAt(s+2)]<<6|h[e.charCodeAt(s+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=255&t;var u;return 2===i&&(t=h[e.charCodeAt(s)]<<2|h[e.charCodeAt(s+1)]>>4,o[a++]=255&t),1===i&&(t=h[e.charCodeAt(s)]<<10|h[e.charCodeAt(s+1)]<<4|h[e.charCodeAt(s+2)]>>2,o[a++]=t>>8&255,o[a++]=255&t),o},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(s(e,o,a<o+16383?a:o+16383));return 1===r?(t=e[n-1],i.push(l[t>>2]+l[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")),i.join("")};for(var l=[],h=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)l[i]=r[i],h[r.charCodeAt(i)]=i;function d(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function s(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(l[(i=r)>>18&63]+l[i>>12&63]+l[i>>6&63]+l[63&i]);return o.join("")}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){"use strict";var r=e("base64-js"),o=e("ieee754");n.Buffer=h,n.SlowBuffer=function(e){return+e!=e&&(e=0),h.alloc(+e)},n.INSPECT_MAX_BYTES=50;var i=2147483647;function a(e){if(i<e)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=h.prototype,t}function h(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(e)}return l(e,t,n)}function l(e,t,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return B(e)||e&&B(e.buffer)?function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=h.prototype,r}(e,t,n):"string"==typeof e?function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!h.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|d(e,t),r=a(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t):function(e){if(h.isBuffer(e)){var t=0|f(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(e){if(ArrayBuffer.isView(e)||"length"in e)return"number"!=typeof e.length||W(e.length)?a(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e){return s(e),a(e<0?0:0|f(e))}function u(e){for(var t=e.length<0?0:0|f(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e){if(i<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function d(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return D(e).length;t=(""+t).toLowerCase(),r=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),W(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=h.from(t,r)),h.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,a=1,l=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;l/=a=2,s/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(o=n;o<l;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===s)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(l<n+s&&(n=l-s),o=n;0<=o;o--){for(var h=!0,f=0;f<s;f++)if(c(e,o+f)!==c(t,f)){h=!1;break}if(h)return o}return-1}function v(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?i<(r=Number(r))&&(r=i):r=i;var o=t.length;o/2<r&&(r=o/2);for(var a=0;a<r;++a){var l=parseInt(t.substr(2*a,2),16);if(W(l))return a;e[n+a]=l}return a}function y(e,t,n,r){return R(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function b(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,l,s,c=e[i],u=null,h=239<c?4:223<c?3:191<c?2:1;if(i+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&127<(s=(31&c)<<6|63&o)&&(u=s);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(s=(15&c)<<12|(63&o)<<6|63&a)&&(s<55296||57343<s)&&(u=s);break;case 4:o=e[i+1],a=e[i+2],l=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&l)&&65535<(s=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&l)&&s<1114112&&(u=s)}null===u?(u=65533,h=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=h}return function(e){var t=e.length;if(t<=w)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=w));return n}(r)}n.kMaxLength=i,(h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{get:function(){if(this instanceof h)return this.buffer}}),Object.defineProperty(h.prototype,"offset",{get:function(){if(this instanceof h)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(e,t,n){return l(e,t,n)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(e,t,n){return i=t,o=n,s(r=e),r<=0?a(r):void 0!==i?"string"==typeof o?a(r).fill(i,o):a(r).fill(i):a(r);var r,i,o},h.allocUnsafe=function(e){return c(e)},h.allocUnsafeSlow=function(e){return c(e)},h.isBuffer=function(e){return null!=e&&!0===e._isBuffer},h.compare=function(e,t){if(!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var r=h.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(ArrayBuffer.isView(o)&&(o=h.from(o)),!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},h.byteLength=d,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?b(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return b(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return S(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},h.prototype.compare=function(e,t,n,r,i){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),l=Math.min(o,a),s=this.slice(r,i),c=e.slice(t,n),u=0;u<l;++u)if(s[u]!==c[u]){o=s[u],a=c[u];break}return o<a?-1:a<o?1:0},h.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},h.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},h.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},h.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o,a,l,s,c,u,h,f,d,p=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return f=t,d=n,R(D(e,(h=this).length-f),h,f,d);case"ascii":case"latin1":case"binary":return y(this,e,t,n);case"base64":return s=this,c=t,u=n,R(H(e),s,c,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=t,l=n,R(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,(o=this).length-a),o,a,l);default:if(p)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function S(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=I(e[o]);return i}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,o){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function A(e,t,n,r,i){return t=+t,n>>>=0,i||N(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function E(e,t,n,r,i){return t=+t,n>>>=0,i||N(e,0,n,8),o.write(e,t,n,r,52,8),n+8}h.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=h.prototype,r},h.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},h.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},h.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},h.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},h.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),o.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),o.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),o.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),o.read(this,e,!1,52,8)},h.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},h.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},h.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=0,a=1,l=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===l&&0!==this[t+o-1]&&(l=1),this[t+o]=(e/a>>0)-l&255;return t+n},h.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=n-1,a=1,l=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)e<0&&0===l&&0!==this[t+o+1]&&(l=1),this[t+o]=(e/a>>0)-l&255;return t+n},h.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},h.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},h.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},h.prototype.writeDoubleLE=function(e,t,n){return E(this,e,t,!0,n)},h.prototype.writeDoubleBE=function(e,t,n){return E(this,e,t,!1,n)},h.prototype.copy=function(e,t,n,r){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=i-1;0<=o;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},h.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=h.isBuffer(e)?e:new h(e,r),l=a.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%l]}return this};var O=/[^+/0-9A-Za-z-_]/g;function I(e){return e<16?"0"+e.toString(16):e.toString(16)}function D(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function R(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function B(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function W(e){return e!=e}},{"base64-js":1,ieee754:15}],4:[function(e,t,n){"use strict";var l=e("typo-js");function s(a){"function"==typeof(a=a||{}).codeMirrorInstance&&"function"==typeof a.codeMirrorInstance.defineMode?(String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),a.codeMirrorInstance.defineMode("spell-checker",(function(e){if(!s.aff_loading){s.aff_loading=!0;var t=new XMLHttpRequest;t.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),t.onload=function(){4===t.readyState&&200===t.status&&(s.aff_data=t.responseText,2==++s.num_loaded&&(s.typo=new l("en_US",s.aff_data,s.dic_data,{platform:"any"})))},t.send(null)}if(!s.dic_loading){s.dic_loading=!0;var n=new XMLHttpRequest;n.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),n.onload=function(){4===n.readyState&&200===n.status&&(s.dic_data=n.responseText,2==++s.num_loaded&&(s.typo=new l("en_US",s.aff_data,s.dic_data,{platform:"any"})))},n.send(null)}var r='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',i={token:function(e){var t=e.peek(),n="";if(r.includes(t))return e.next(),null;for(;null!=(t=e.peek())&&!r.includes(t);)n+=t,e.next();return s.typo&&!s.typo.check(n)?"spell-error":null}},o=a.codeMirrorInstance.getMode(e,e.backdrop||"text/plain");return a.codeMirrorInstance.overlayMode(o,i,!0)}))):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}s.num_loaded=0,s.aff_loading=!1,s.dic_loading=!1,s.aff_data="",s.dic_data="",t.exports=s},{"typo-js":17}],5:[function(e,t,n){!function(o){"use strict";o.defineOption("fullScreen",!1,(function(e,t,n){var r,i;n==o.Init&&(n=!1),!n!=!t&&(t?(i=(r=e).getWrapperElement(),r.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:i.style.width,height:i.style.height},i.style.width="",i.style.height="auto",i.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",r.refresh()):function(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var n=e.state.fullScreenRestore;t.style.width=n.width,t.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),e.refresh()}(e))}))}("object"==typeof n&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],6:[function(e,t,n){!function(o){function a(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function r(e){a(e);var t=e.state.placeholder=document.createElement("pre");t.style.cssText="height: 0; overflow: visible",t.style.direction=e.getOption("direction"),t.className="CodeMirror-placeholder";var n=e.getOption("placeholder");"string"==typeof n&&(n=document.createTextNode(n)),t.appendChild(n),e.display.lineSpace.insertBefore(t,e.display.lineSpace.firstChild)}function l(e){i(e)&&r(e)}function s(e){var t=e.getWrapperElement(),n=i(e);t.className=t.className.replace(" CodeMirror-empty","")+(n?" CodeMirror-empty":""),n?r(e):a(e)}function i(e){return 1===e.lineCount()&&""===e.getLine(0)}o.defineOption("placeholder","",(function(e,t,n){var r=n&&n!=o.Init;if(t&&!r)e.on("blur",l),e.on("change",s),e.on("swapDoc",s),s(e);else if(!t&&r){e.off("blur",l),e.off("change",s),e.off("swapDoc",s),a(e);var i=e.getWrapperElement();i.className=i.className.replace(" CodeMirror-empty","")}t&&!e.hasFocus()&&l(e)}))}("object"==typeof n&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],7:[function(e,t,n){!function(m){"use strict";var g=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,v=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,y=/[*+-]\s/;function x(e,t){var n=t.line,r=0,i=0,o=g.exec(e.getLine(n)),a=o[1];do{var l=n+(r+=1),s=e.getLine(l),c=g.exec(s);if(c){var u=c[1],h=parseInt(o[3],10)+r-i,f=parseInt(c[3],10),d=f;if(a!==u||isNaN(f)){if(a.length>u.length)return;if(a.length<u.length&&1===r)return;i+=1}else h===f&&(d=f+1),f<h&&(d=h+1),e.replaceRange(s.replace(g,u+d+c[4]+c[5]),{line:l,ch:0},{line:l,ch:s.length})}}while(c)}m.commands.newlineAndIndentContinueMarkdownList=function(e){if(e.getOption("disableInput"))return m.Pass;for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var i=t[r].head,o=e.getStateAfter(i.line),a=!1!==o.list,l=0!==o.quote,s=e.getLine(i.line),c=g.exec(s),u=/^\s*$/.test(s.slice(0,i.ch));if(!t[r].empty()||!a&&!l||!c||u)return void e.execCommand("newlineAndIndent");if(v.test(s))/>\s*$/.test(s)||e.replaceRange("",{line:i.line,ch:0},{line:i.line,ch:i.ch+1}),n[r]="\n";else{var h=c[1],f=c[5],d=!(y.test(c[2])||0<=c[2].indexOf(">")),p=d?parseInt(c[3],10)+1+c[4]:c[2].replace("x"," ");n[r]="\n"+h+p+f,d&&x(e,i)}}e.replaceSelections(n)}}("object"==typeof n&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],8:[function(e,t,n){!function(t){"use strict";t.overlayMode=function(r,i,o){return{startState:function(){return{base:t.startState(r),overlay:t.startState(i),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(e){return{base:t.copyState(r,e.base),overlay:t.copyState(i,e.overlay),basePos:e.basePos,baseCur:null,overlayPos:e.overlayPos,overlayCur:null}},token:function(e,t){return(e!=t.streamSeen||Math.min(t.basePos,t.overlayPos)<e.start)&&(t.streamSeen=e,t.basePos=t.overlayPos=e.start),e.start==t.basePos&&(t.baseCur=r.token(e,t.base),t.basePos=e.pos),e.start==t.overlayPos&&(e.pos=e.start,t.overlayCur=i.token(e,t.overlay),t.overlayPos=e.pos),e.pos=Math.min(t.basePos,t.overlayPos),null==t.overlayCur?t.baseCur:null!=t.baseCur&&t.overlay.combineTokens||o&&null==t.overlay.combineTokens?t.baseCur+" "+t.overlayCur:t.overlayCur},indent:r.indent&&function(e,t){return r.indent(e.base,t)},electricChars:r.electricChars,innerMode:function(e){return{state:e.base,mode:r}},blankLine:function(e){var t,n;return r.blankLine&&(t=r.blankLine(e.base)),i.blankLine&&(n=i.blankLine(e.overlay)),null==n?t:o&&null!=t?t+" "+n:n}}}}("object"==typeof n&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],9:[function(e,t,n){!function(i){"use strict";function o(e){e.state.markedSelection&&e.operation((function(){!function(e){if(!e.somethingSelected())return s(e);if(1<e.listSelections().length)return c(e);var t=e.getCursor("start"),n=e.getCursor("end"),r=e.state.markedSelection;if(!r.length)return l(e,t,n);var i=r[0].find(),o=r[r.length-1].find();if(!i||!o||n.line-t.line<=f||0<=p(t,o.to)||p(n,i.from)<=0)return c(e);for(;0<p(t,i.from);)r.shift().clear(),i=r[0].find();for(p(t,i.from)<0&&(i.to.line-t.line<f?(r.shift().clear(),l(e,t,i.to,0)):l(e,t,i.from,0));p(n,o.to)<0;)r.pop().clear(),o=r[r.length-1].find();0<p(n,o.to)&&(n.line-o.from.line<f?(r.pop().clear(),l(e,o.from,n)):l(e,o.to,n))}(e)}))}function a(e){e.state.markedSelection&&e.state.markedSelection.length&&e.operation((function(){s(e)}))}i.defineOption("styleSelectedText",!1,(function(e,t,n){var r=n&&n!=i.Init;t&&!r?(e.state.markedSelection=[],e.state.markedSelectionStyle="string"==typeof t?t:"CodeMirror-selectedtext",c(e),e.on("cursorActivity",o),e.on("change",a)):!t&&r&&(e.off("cursorActivity",o),e.off("change",a),s(e),e.state.markedSelection=e.state.markedSelectionStyle=null)}));var f=8,d=i.Pos,p=i.cmpPos;function l(e,t,n,r){if(0!=p(t,n))for(var i=e.state.markedSelection,o=e.state.markedSelectionStyle,a=t.line;;){var l=a==t.line?t:d(a,0),s=a+f,c=s>=n.line,u=c?n:d(s,0),h=e.markText(l,u,{className:o});if(null==r?i.push(h):i.splice(r++,0,h),c)break;a=s}}function s(e){for(var t=e.state.markedSelection,n=0;n<t.length;++n)t[n].clear();t.length=0}function c(e){s(e);for(var t=e.listSelections(),n=0;n<t.length;n++)l(e,t[n].from(),t[n].to())}}("object"==typeof n&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],10:[function(e,t,n){var r,i;r=this,i=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,m=/gecko\/\d/i.test(e),n=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),i=/Edge\/(\d+)/.exec(e),w=n||r||i,k=w&&(n?document.documentMode||6:+(i||r)[1]),x=!i&&/WebKit\//.test(e),o=x&&/Qt\/\d+\.\d+/.test(e),a=!i&&/Chrome\//.test(e),g=/Opera\//.test(e),s=/Apple Computer/.test(navigator.vendor),l=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),c=/PhantomJS/.test(e),u=!i&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),h=/Android/.test(e),f=u||h||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=u||/Mac/.test(t),d=/\bCrOS\b/.test(e),p=/win/i.test(t),v=g&&e.match(/Version\/(\d*\.\d*)/);v&&(v=Number(v[1])),v&&15<=v&&(x=!(g=!1));var y=b&&(o||g&&(null==v||v<12.11)),S=m||w&&9<=k;function C(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var L,T=function(e,t){var n=e.className,r=C(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function M(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function N(e,t){return M(e).appendChild(t)}function E(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function A(e,t,n,r){var i=E(e,t,n,r);return i.setAttribute("role","presentation"),i}function O(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function I(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function D(e,t){var n=e.className;C(t).test(n)||(e.className+=(n?" ":"")+t)}function H(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!C(n[r]).test(t)&&(t+=" "+n[r]);return t}L=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var R=function(e){e.select()};function B(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function W(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function F(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,a=i||0;;){var l=e.indexOf("\t",o);if(l<0||t<=l)return a+(t-o);a+=l-o,a+=n-a%n,o=l+1}}u?R=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:w&&(R=function(e){try{e.select()}catch(e){}});var z=function(){this.id=null};function P(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}z.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var _=30,j={toString:function(){return"CodeMirror.Pass"}},q={scroll:!1},U={origin:"*mouse"},$={origin:"+move"};function G(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||t<=i+a)return r+Math.min(a,t-i);if(i+=o-r,r=o+1,t<=(i+=n-i%n))return r}}var V=[""];function X(e){for(;V.length<=e;)V.push(K(V)+" ");return V[e]}function K(e){return e[e.length-1]}function Y(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Z(){}function J(e,t){var n;return Object.create?n=Object.create(e):(Z.prototype=e,n=new Z),t&&W(t,n),n}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(e){return/\w/.test(e)||""<e&&(e.toUpperCase()!=e.toLowerCase()||Q.test(e))}function te(e,t){return t?!!(-1<t.source.indexOf("\\w")&&ee(e))||t.test(e):ee(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return 768<=e.charCodeAt(0)&&re.test(e)}function oe(e,t,n){for(;(n<0?0<t:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function ae(e,t,n){for(var r=n<t?-1:1;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+r}}function le(e,t,n){var r=this;this.input=n,r.scrollbarFiller=E("div",null,"CodeMirror-scrollbar-filler"),r.scrollbarFiller.setAttribute("cm-not-content","true"),r.gutterFiller=E("div",null,"CodeMirror-gutter-filler"),r.gutterFiller.setAttribute("cm-not-content","true"),r.lineDiv=A("div",null,"CodeMirror-code"),r.selectionDiv=E("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=E("div",null,"CodeMirror-cursors"),r.measure=E("div",null,"CodeMirror-measure"),r.lineMeasure=E("div",null,"CodeMirror-measure"),r.lineSpace=A("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none");var i=A("div",[r.lineSpace],"CodeMirror-lines");r.mover=E("div",[i],null,"position: relative"),r.sizer=E("div",[r.mover],"CodeMirror-sizer"),r.sizerWidth=null,r.heightForcer=E("div",null,null,"position: absolute; height: "+_+"px; width: 1px;"),r.gutters=E("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=E("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=E("div",[r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),w&&k<8&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),x||m&&f||(r.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(r.wrapper):e(r.wrapper)),r.viewFrom=r.viewTo=t.first,r.reportedViewFrom=r.reportedViewTo=t.first,r.view=[],r.renderedView=null,r.externalMeasured=null,r.viewOffset=0,r.lastWrapHeight=r.lastWrapWidth=0,r.updateLineNumbers=null,r.nativeBarWidth=r.barHeight=r.barWidth=0,r.scrollbarsClipped=!1,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.alignWidgets=!1,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null,r.activeTouch=null,n.init(r)}function se(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function ce(e,n,r){var i=[],o=n.line;return e.iter(n.line,r.line+1,(function(e){var t=e.text;o==r.line&&(t=t.slice(0,r.ch)),o==n.line&&(t=t.slice(n.ch)),i.push(t),++o})),i}function ue(e,t,n){var r=[];return e.iter(t,n,(function(e){r.push(e.text)})),r}function he(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function fe(e){if(null==e.parent)return null;for(var t=e.parent,n=P(t.lines,e),r=t.parent;r;r=(t=r).parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function de(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var l=e.lines[a].height;if(t<l)break;t-=l}return n+a}function pe(e,t){return t>=e.first&&t<e.first+e.size}function me(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ge(e,t,n){if(void 0===n&&(n=null),!(this instanceof ge))return new ge(e,t,n);this.line=e,this.ch=t,this.sticky=n}function ve(e,t){return e.line-t.line||e.ch-t.ch}function ye(e,t){return e.sticky==t.sticky&&0==ve(e,t)}function xe(e){return ge(e.line,e.ch)}function be(e,t){return ve(e,t)<0?t:e}function we(e,t){return ve(e,t)<0?e:t}function ke(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Se(e,t){if(t.line<e.first)return ge(e.first,0);var n,r,i,o=e.first+e.size-1;return t.line>o?ge(o,se(e,o).text.length):(r=se(e,(n=t).line).text.length,null==(i=n.ch)||r<i?ge(n.line,r):i<0?ge(n.line,0):n)}function Ce(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=Se(e,t[r]);return n}var Le=!1,Te=!1;function Me(e,t,n){this.marker=e,this.from=t,this.to=n}function Ne(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Ae(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Ee(e,t){if(t.full)return null;var n=pe(e,t.from.line)&&se(e,t.from.line).markedSpans,r=pe(e,t.to.line)&&se(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==ve(t.from,t.to),l=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Me(a,o.from,l?null:o.to))}}return r}(n,i,a),s=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Me(a,l?null:o.from-t,null==o.to?null:o.to-t))}}return r}(r,o,a),c=1==t.text.length,u=K(t.text).length+(c?i:0);if(l)for(var h=0;h<l.length;++h){var f=l[h];if(null==f.to){var d=Ne(s,f.marker);d?c&&(f.to=null==d.to?null:d.to+u):f.to=i}}if(s)for(var p=0;p<s.length;++p){var m=s[p];null!=m.to&&(m.to+=u),null==m.from?Ne(l,m.marker)||(m.from=u,c&&(l||(l=[])).push(m)):(m.from+=u,c&&(l||(l=[])).push(m))}l&&(l=Oe(l)),s&&s!=l&&(s=Oe(s));var g=[l];if(!c){var v,y=t.text.length-2;if(0<y&&l)for(var x=0;x<l.length;++x)null==l[x].to&&(v||(v=[])).push(new Me(l[x].marker,null,null));for(var b=0;b<y;++b)g.push(v);g.push(s)}return g}function Oe(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ie(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function De(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function He(e){return e.inclusiveLeft?-1:0}function Re(e){return e.inclusiveRight?1:0}function Be(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=ve(r.from,i.from)||He(e)-He(t);return o?-o:ve(r.to,i.to)||Re(e)-Re(t)||t.id-e.id}function We(e,t){var n,r=Te&&e.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||Be(n,i.marker)<0)&&(n=i.marker);return n}function Fe(e){return We(e,!0)}function ze(e){return We(e,!1)}function Pe(e,t){var n,r=Te&&e.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||Be(n,o.marker)<0)&&(n=o.marker)}return n}function _e(e,t,n,r,i){var o=se(e,t),a=Te&&o.markedSpans;if(a)for(var l=0;l<a.length;++l){var s=a[l];if(s.marker.collapsed){var c=s.marker.find(0),u=ve(c.from,n)||He(s.marker)-He(i),h=ve(c.to,r)||Re(s.marker)-Re(i);if(!(0<=u&&h<=0||u<=0&&0<=h)&&(u<=0&&(s.marker.inclusiveRight&&i.inclusiveLeft?0<=ve(c.to,n):0<ve(c.to,n))||0<=u&&(s.marker.inclusiveRight&&i.inclusiveLeft?ve(c.from,r)<=0:ve(c.from,r)<0)))return!0}}}function je(e){for(var t;t=Fe(e);)e=t.find(-1,!0).line;return e}function qe(e,t){var n=se(e,t),r=je(n);return n==r?t:fe(r)}function Ue(e,t){if(t>e.lastLine())return t;var n,r=se(e,t);if(!$e(e,r))return t;for(;n=ze(r);)r=n.find(1,!0).line;return fe(r)+1}function $e(e,t){var n=Te&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Ge(e,t,r))return!0}}function Ge(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return Ge(e,r.line,Ne(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Ge(e,t,i))return!0}function Ve(e){for(var t=0,n=(e=je(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var l=o.children[a];if(l==n)break;t+=l.height}return t}function Xe(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Fe(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=ze(r);){var o=t.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function Ke(e){var n=e.display,t=e.doc;n.maxLine=se(t,t.first),n.maxLineLength=Xe(n.maxLine),n.maxLineChanged=!0,t.iter((function(e){var t=Xe(e);t>n.maxLineLength&&(n.maxLineLength=t,n.maxLine=e)}))}var Ye=null;function Ze(e,t,n){var r;Ye=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==n?r=i:Ye=i),o.from==t&&(o.from!=o.to&&"before"!=n?r=i:Ye=i)}return null!=r?r:Ye}var Je=function(){var W="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",F="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",z=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,P=/[stwN]/,_=/[LRr]/,j=/[Lb1n]/,q=/[1n]/;function U(e,t,n){this.level=e,this.from=t,this.to=n}return function(e,t){var n="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!z.test(e))return!1;for(var r,i=e.length,o=[],a=0;a<i;++a)o.push((r=e.charCodeAt(a))<=247?W.charAt(r):1424<=r&&r<=1524?"R":1536<=r&&r<=1785?F.charAt(r-1536):1774<=r&&r<=2220?"r":8192<=r&&r<=8203?"w":8204==r?"b":"L");for(var l=0,s=n;l<i;++l){var c=o[l];"m"==c?o[l]=s:s=c}for(var u=0,h=n;u<i;++u){var f=o[u];"1"==f&&"r"==h?o[u]="n":_.test(f)&&"r"==(h=f)&&(o[u]="R")}for(var d=1,p=o[0];d<i-1;++d){var m=o[d];"+"==m&&"1"==p&&"1"==o[d+1]?o[d]="1":","!=m||p!=o[d+1]||"1"!=p&&"n"!=p||(o[d]=p),p=m}for(var g=0;g<i;++g){var v=o[g];if(","==v)o[g]="N";else if("%"==v){var y=void 0;for(y=g+1;y<i&&"%"==o[y];++y);for(var x=g&&"!"==o[g-1]||y<i&&"1"==o[y]?"1":"N",b=g;b<y;++b)o[b]=x;g=y-1}}for(var w=0,k=n;w<i;++w){var S=o[w];"L"==k&&"1"==S?o[w]="L":_.test(S)&&(k=S)}for(var C=0;C<i;++C)if(P.test(o[C])){var L=void 0;for(L=C+1;L<i&&P.test(o[L]);++L);for(var T="L"==(C?o[C-1]:n),M=T==("L"==(L<i?o[L]:n))?T?"L":"R":n,N=C;N<L;++N)o[N]=M;C=L-1}for(var A,E=[],O=0;O<i;)if(j.test(o[O])){var I=O;for(++O;O<i&&j.test(o[O]);++O);E.push(new U(0,I,O))}else{var D=O,H=E.length;for(++O;O<i&&"L"!=o[O];++O);for(var R=D;R<O;)if(q.test(o[R])){D<R&&E.splice(H,0,new U(1,D,R));var B=R;for(++R;R<O&&q.test(o[R]);++R);E.splice(H,0,new U(2,B,R)),D=R}else++R;D<O&&E.splice(H,0,new U(1,D,O))}return"ltr"==t&&(1==E[0].level&&(A=e.match(/^\s+/))&&(E[0].from=A[0].length,E.unshift(new U(0,0,A[0].length))),1==K(E).level&&(A=e.match(/\s+$/))&&(K(E).to-=A[0].length,E.push(new U(0,i-A[0].length,i)))),"rtl"==t?E.reverse():E}}();function Qe(e,t){var n=e.order;return null==n&&(n=e.order=Je(e.text,t)),n}var et=[],tt=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||et).concat(n)}};function nt(e,t){return e._handlers&&e._handlers[t]||et}function rt(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=P(i,n);-1<o&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function it(e,t){var n=nt(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function ot(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),it(e,n||t.type,e,t),ht(t)||t.codemirrorIgnore}function at(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==P(n,t[r])&&n.push(t[r])}function lt(e,t){return 0<nt(e,t).length}function st(e){e.prototype.on=function(e,t){tt(this,e,t)},e.prototype.off=function(e,t){rt(this,e,t)}}function ct(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ut(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ht(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ft(e){ct(e),ut(e)}function dt(e){return e.target||e.srcElement}function pt(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var mt,gt,vt=function(){if(w&&k<9)return!1;var e=E("div");return"draggable"in e||"dragDrop"in e}();function yt(e){if(null==mt){var t=E("span","​");N(e,E("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(mt=t.offsetWidth<=1&&2<t.offsetHeight&&!(w&&k<8))}var n=mt?E("span","​"):E("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function xt(e){if(null!=gt)return gt;var t=N(e,document.createTextNode("AخA")),n=L(t,0,1).getBoundingClientRect(),r=L(t,1,2).getBoundingClientRect();return M(e),!(!n||n.left==n.right)&&(gt=r.right-n.right<3)}var bt,wt=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},kt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},St="oncopy"in(bt=E("div"))||(bt.setAttribute("oncopy","return;"),"function"==typeof bt.oncopy),Ct=null,Lt={},Tt={};function Mt(e){if("string"==typeof e&&Tt.hasOwnProperty(e))e=Tt[e];else if(e&&"string"==typeof e.name&&Tt.hasOwnProperty(e.name)){var t=Tt[e.name];"string"==typeof t&&(t={name:t}),(e=J(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Mt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Mt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Nt(e,t){t=Mt(t);var n=Lt[t.name];if(!n)return Nt(e,"text/plain");var r=n(e,t);if(At.hasOwnProperty(t.name)){var i=At[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)r[a]=t.modeProps[a];return r}var At={};function Et(e,t){W(t,At.hasOwnProperty(e)?At[e]:At[e]={})}function Ot(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function It(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Dt(e,t,n){return!e.startState||e.startState(t,n)}var Ht=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};Ht.prototype.eol=function(){return this.pos>=this.string.length},Ht.prototype.sol=function(){return this.pos==this.lineStart},Ht.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ht.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ht.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Ht.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ht.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ht.prototype.skipToEnd=function(){this.pos=this.string.length},Ht.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(-1<t)return this.pos=t,!0},Ht.prototype.backUp=function(e){this.pos-=e},Ht.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=F(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},Ht.prototype.indentation=function(){return F(this.string,null,this.tabSize)-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},Ht.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&0<r.index?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},Ht.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ht.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ht.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ht.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Rt=function(e,t){this.state=e,this.lookAhead=t},Bt=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function Wt(t,n,r,e){var s=[t.state.modeGen],i={};Gt(t,n.text,t.doc.mode,r,(function(e,t){return s.push(e,t)}),i,e);for(var c=r.state,o=function(e){r.baseTokens=s;var o=t.state.overlays[e],a=1,l=0;r.state=!0,Gt(t,n.text,o.mode,r,(function(e,t){for(var n=a;l<e;){var r=s[a];e<r&&s.splice(a,1,e,s[a+1],r),a+=2,l=Math.min(e,r)}if(t)if(o.opaque)s.splice(n,a-n,e,"overlay "+t),a=n+2;else for(;n<a;n+=2){var i=s[n+1];s[n+1]=(i?i+" ":"")+"overlay "+t}}),i),r.state=c,r.baseTokens=null,r.baseTokenPos=1},a=0;a<t.state.overlays.length;++a)o(a);return{styles:s,classes:i.bgClass||i.textClass?i:null}}function Ft(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=zt(e,fe(t)),i=t.text.length>e.options.maxHighlightLength&&Ot(e.doc.mode,r.state),o=Wt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function zt(n,r,e){var t=n.doc,i=n.display;if(!t.mode.startState)return new Bt(t,!0,r);var o=function(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),l=t;a<l;--l){if(l<=o.first)return o.first;var s=se(o,l-1),c=s.stateAfter;if(c&&(!n||l+(c instanceof Rt?c.lookAhead:0)<=o.modeFrontier))return l;var u=F(s.text,null,e.options.tabSize);(null==i||u<r)&&(i=l-1,r=u)}return i}(n,r,e),a=o>t.first&&se(t,o-1).stateAfter,l=a?Bt.fromSaved(t,a,o):new Bt(t,Dt(t.mode),o);return t.iter(o,r,(function(e){Pt(n,e.text,l);var t=l.line;e.stateAfter=t==r-1||t%5==0||t>=i.viewFrom&&t<i.viewTo?l.save():null,l.nextLine()})),e&&(t.modeFrontier=l.line),l}function Pt(e,t,n,r){var i=e.doc.mode,o=new Ht(t,e.options.tabSize,n);for(o.start=o.pos=r||0,""==t&&_t(i,n.state);!o.eol();)jt(i,o,n.state),o.start=o.pos}function _t(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=It(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function jt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=It(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}Bt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Bt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Bt.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},Bt.fromSaved=function(e,t,n){return t instanceof Rt?new Bt(e,Ot(e.mode,t.state),n,t.lookAhead):new Bt(e,Ot(e.mode,t),n)},Bt.prototype.save=function(e){var t=!1!==e?Ot(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new Rt(t,this.maxLookAhead):t};var qt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Ut(e,t,n,r){var i,o,a=e.doc,l=a.mode,s=se(a,(t=Se(a,t)).line),c=zt(e,t.line,n),u=new Ht(s.text,e.options.tabSize,c);for(r&&(o=[]);(r||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=jt(l,u,c.state),r&&o.push(new qt(u,i,Ot(a.mode,c.state)));return r?o:new qt(u,i,c.state)}function $t(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function Gt(e,t,n,r,i,o,a){var l=n.flattenSpans;null==l&&(l=e.options.flattenSpans);var s,c=0,u=null,h=new Ht(t,e.options.tabSize,r),f=e.options.addModeClass&&[null];for(""==t&&$t(_t(n,r.state),o);!h.eol();){if(h.pos>e.options.maxHighlightLength?(l=!1,a&&Pt(e,t,r,h.pos),h.pos=t.length,s=null):s=$t(jt(n,h,r.state,f),o),f){var d=f[0].name;d&&(s="m-"+(s?d+" "+s:d))}if(!l||u!=s){for(;c<h.start;)i(c=Math.min(h.start,c+5e3),u);u=s}h.start=h.pos}for(;c<h.pos;){var p=Math.min(h.pos,c+5e3);i(p,u),c=p}}var Vt=function(e,t,n){this.text=e,De(this,t),this.height=n?n(this):1};Vt.prototype.lineNo=function(){return fe(this)},st(Vt);var Xt={},Kt={};function Yt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Kt:Xt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Zt(e,t){var n=A("span",null,null,x?"padding-right: .1px":null),r={pre:A("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(w||x)&&e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,a=void 0;r.pos=0,r.addToken=Qt,xt(e.display.measure)&&(a=Qe(o,e.doc.direction))&&(r.addToken=en(r.addToken,a)),r.map=[],nn(o,r,Ft(e,o,t!=e.display.externalMeasured&&fe(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=H(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=H(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(yt(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(x){var l=r.content.lastChild;(/\bcm-tab\b/.test(l.className)||l.querySelector&&l.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return it(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=H(r.pre.className,r.textClass||"")),r}function Jt(e){var t=E("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Qt(e,t,n,r,i,o,a){if(t){var l,s=e.splitSpaces?function(e,t){if(1<e.length&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=" "),r+=o,n=" "==o}return r}(t,e.trailingSpace):t,c=e.cm.state.specialChars,u=!1;if(c.test(t)){l=document.createDocumentFragment();for(var h=0;;){c.lastIndex=h;var f=c.exec(t),d=f?f.index-h:t.length-h;if(d){var p=document.createTextNode(s.slice(h,h+d));w&&k<9?l.appendChild(E("span",[p])):l.appendChild(p),e.map.push(e.pos,e.pos+d,p),e.col+=d,e.pos+=d}if(!f)break;h+=d+1;var m=void 0;if("\t"==f[0]){var g=e.cm.options.tabSize,v=g-e.col%g;(m=l.appendChild(E("span",X(v),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),e.col+=v}else"\r"==f[0]||"\n"==f[0]?(m=l.appendChild(E("span","\r"==f[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",f[0]):((m=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),w&&k<9?l.appendChild(E("span",[m])):l.appendChild(m)),e.col+=1;e.map.push(e.pos,e.pos+1,m),e.pos++}}else e.col+=t.length,l=document.createTextNode(s),e.map.push(e.pos,e.pos+t.length,l),w&&k<9&&(u=!0),e.pos+=t.length;if(e.trailingSpace=32==s.charCodeAt(t.length-1),n||r||i||u||a){var y=n||"";r&&(y+=r),i&&(y+=i);var x=E("span",[l],y,a);return o&&(x.title=o),e.content.appendChild(x)}e.content.appendChild(l)}}function en(h,f){return function(e,t,n,r,i,o,a){n=n?n+" cm-force-border":"cm-force-border";for(var l=e.pos,s=l+t.length;;){for(var c=void 0,u=0;u<f.length&&!((c=f[u]).to>l&&c.from<=l);u++);if(c.to>=s)return h(e,t,n,r,i,o,a);h(e,t.slice(0,c.to-l),n,r,null,o,a),r=null,t=t.slice(c.to-l),l=c.to}}}function tn(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function nn(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,l,s,c,u,h,f,d=i.length,p=0,m=1,g="",v=0;;){if(v==p){s=c=u=h=l="",f=null,v=1/0;for(var y=[],x=void 0,b=0;b<r.length;++b){var w=r[b],k=w.marker;"bookmark"==k.type&&w.from==p&&k.widgetNode?y.push(k):w.from<=p&&(null==w.to||w.to>p||k.collapsed&&w.to==p&&w.from==p)?(null!=w.to&&w.to!=p&&v>w.to&&(v=w.to,c=""),k.className&&(s+=" "+k.className),k.css&&(l=(l?l+";":"")+k.css),k.startStyle&&w.from==p&&(u+=" "+k.startStyle),k.endStyle&&w.to==v&&(x||(x=[])).push(k.endStyle,w.to),k.title&&!h&&(h=k.title),k.collapsed&&(!f||Be(f.marker,k)<0)&&(f=w)):w.from>p&&v>w.from&&(v=w.from)}if(x)for(var S=0;S<x.length;S+=2)x[S+1]==v&&(c+=" "+x[S]);if(!f||f.from==p)for(var C=0;C<y.length;++C)tn(t,0,y[C]);if(f&&(f.from||0)==p){if(tn(t,(null==f.to?d+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(d<=p)break;for(var L=Math.min(d,v);;){if(g){var T=p+g.length;if(!f){var M=L<T?g.slice(0,L-p):g;t.addToken(t,M,a?a+s:s,u,p+M.length==v?c:"",h,l)}if(L<=T){g=g.slice(L-p),p=L;break}p=T,u=""}g=i.slice(o,o=n[m++]),a=Yt(n[m++],t.cm.options)}}else for(var N=1;N<n.length;N+=2)t.addToken(t,i.slice(o,o=n[N]),Yt(n[N+1],t.cm.options))}function rn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=ze(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?fe(K(this.rest))-n+1:1,this.node=this.text=null,this.hidden=$e(e,t)}function on(e,t,n){for(var r,i=[],o=t;o<n;o=r){var a=new rn(e.doc,se(e.doc,o),o);r=o+a.size,i.push(a)}return i}var an=null,ln=null;function sn(e,t){var n=nt(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);an?r=an.delayedCallbacks:ln?r=ln:(r=ln=[],setTimeout(cn,0));for(var o=function(e){r.push((function(){return n[e].apply(null,i)}))},a=0;a<n.length;++a)o(a)}}function cn(){var e=ln;ln=null;for(var t=0;t<e.length;++t)e[t]()}function un(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?dn(e,t):"gutter"==o?mn(e,t,n,r):"class"==o?pn(e,t):"widget"==o&&gn(e,t,r)}t.changes=null}function hn(e){return e.node==e.text&&(e.node=E("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),w&&k<8&&(e.node.style.zIndex=2)),e.node}function fn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Zt(e,t)}function dn(e,t){var n=t.text.className,r=fn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,pn(e,t)):n&&(t.text.className=n)}function pn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=hn(t);t.background=r.insertBefore(E("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?hn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function mn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=hn(t);t.gutterBackground=E("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=hn(t),l=t.gutter=E("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(l),a.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(E("div",me(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var s=0;s<e.options.gutters.length;++s){var c=e.options.gutters[s],u=o.hasOwnProperty(c)&&o[c];u&&l.appendChild(E("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function gn(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);vn(e,t,n)}function vn(e,t,n){if(yn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)yn(e,t.rest[r],t,n,!1)}function yn(e,t,n,r,i){if(t.widgets)for(var o=hn(n),a=0,l=t.widgets;a<l.length;++a){var s=l[a],c=E("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),xn(s,c,n,r),e.display.input.setUneditable(c),i&&s.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),sn(s,"redraw")}}function xn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function bn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!O(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),N(t.display.measure,E("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function wn(e,t){for(var n=dt(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function kn(e){return e.lineSpace.offsetTop}function Sn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Cn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=N(e.measure,E("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Ln(e){return _-e.display.nativeBarWidth}function Tn(e){return e.display.scroller.clientWidth-Ln(e)-e.display.barWidth}function Mn(e){return e.display.scroller.clientHeight-Ln(e)-e.display.barHeight}function Nn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(fe(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function An(e,t,n,r){return In(e,On(e,t),n,r)}function En(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[lr(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function On(e,t){var n=fe(t),r=En(e,n);r&&!r.text?r=null:r&&r.changes&&(un(e,r,n,nr(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=fe(t=je(t)),r=e.display.externalMeasured=new rn(e.doc,t,n);r.lineN=n;var i=r.built=Zt(e,r);return r.text=i.pre,N(e.display.lineMeasure,i.pre),r}(e,t));var i=Nn(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function In(e,t,n,r,i){t.before&&(n=-1);var o,a=n+(r||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&Tn(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),l=0;l<a.length-1;l++){var s=a[l],c=a[l+1];2<Math.abs(s.bottom-c.bottom)&&o.push((s.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,r){var i,o=Rn(t.map,n,r),a=o.node,l=o.start,s=o.end,c=o.collapse;if(3==a.nodeType){for(var u=0;u<4;u++){for(;l&&ie(t.line.text.charAt(o.coverStart+l));)--l;for(;o.coverStart+s<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+s));)++s;if((i=w&&k<9&&0==l&&s==o.coverEnd-o.coverStart?a.parentNode.getBoundingClientRect():Bn(L(a,l,s).getClientRects(),r)).left||i.right||0==l)break;s=l,l-=1,c="right"}w&&k<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Ct)return Ct;var t=N(e,E("span","x")),n=t.getBoundingClientRect(),r=L(t,0,1).getBoundingClientRect();return Ct=1<Math.abs(n.left-r.left)}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var h;0<l&&(c=r="right"),i=e.options.lineWrapping&&1<(h=a.getClientRects()).length?h["right"==r?h.length-1:0]:a.getBoundingClientRect()}if(w&&k<9&&!l&&(!i||!i.left&&!i.right)){var f=a.parentNode.getClientRects()[0];i=f?{left:f.left,right:f.left+tr(e.display),top:f.top,bottom:f.bottom}:Hn}for(var d=i.top-t.rect.top,p=i.bottom-t.rect.top,m=(d+p)/2,g=t.view.measure.heights,v=0;v<g.length-1&&!(m<g[v]);v++);var y=v?g[v-1]:0,x=g[v],b={left:("right"==c?i.right:i.left)-t.rect.left,right:("left"==c?i.left:i.right)-t.rect.left,top:y,bottom:x};return i.left||i.right||(b.bogus=!0),e.options.singleCursorHeightPerLine||(b.rtop=d,b.rbottom=p),b}(e,t,n,r)).bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Dn,Hn={left:0,right:0,top:0,bottom:0};function Rn(e,t,n){for(var r,i,o,a,l,s,c=0;c<e.length;c+=3)if(l=e[c],s=e[c+1],t<l?(i=0,o=1,a="left"):t<s?o=1+(i=t-l):(c==e.length-3||t==s&&e[c+3]>t)&&(i=(o=s-l)-1,s<=t&&(a="right")),null!=i){if(r=e[c+2],l==s&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],a="left";if("right"==n&&i==s-l)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],a="right";break}return{node:r,start:i,end:o,collapse:a,coverStart:l,coverEnd:s}}function Bn(e,t){var n=Hn;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;0<=i&&(n=e[i]).left==n.right;i--);return n}function Wn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Fn(e){e.display.externalMeasure=null,M(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Wn(e.display.view[t])}function zn(e){Fn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Pn(){return a&&h?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function _n(){return a&&h?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function jn(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=bn(e.widgets[n]));return t}function qn(e,t,n,r,i){if(!i){var o=jn(t);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=Ve(t);if("local"==r?a+=kn(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var l=e.display.lineSpace.getBoundingClientRect();a+=l.top+("window"==r?0:_n());var s=l.left+("window"==r?0:Pn());n.left+=s,n.right+=s}return n.top+=a,n.bottom+=a,n}function Un(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=Pn(),i-=_n();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function $n(e,t,n,r,i){return r||(r=se(e.doc,t.line)),qn(e,r,An(e,r,t.ch,i),n)}function Gn(r,e,i,o,a,l){function s(e,t){var n=In(r,a,e,t?"right":"left",l);return t?n.left=n.right:n.right=n.left,qn(r,o,n,i)}o=o||se(r.doc,e.line),a||(a=On(r,o));var c=Qe(o,r.doc.direction),t=e.ch,n=e.sticky;if(t>=o.text.length?(t=o.text.length,n="before"):t<=0&&(t=0,n="after"),!c)return s("before"==n?t-1:t,"before"==n);function u(e,t,n){return s(n?e-1:e,1==c[t].level!=n)}var h=Ze(c,t,n),f=Ye,d=u(t,h,"before"==n);return null!=f&&(d.other=u(t,f,"before"!=n)),d}function Vn(e,t){var n=0;t=Se(e.doc,t),e.options.lineWrapping||(n=tr(e.display)*t.ch);var r=se(e.doc,t.line),i=Ve(r)+kn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Xn(e,t,n,r,i){var o=ge(e,t,n);return o.xRel=i,r&&(o.outside=!0),o}function Kn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Xn(r.first,0,null,!0,-1);var i=de(r,n),o=r.first+r.size-1;if(o<i)return Xn(r.first+r.size-1,se(r,o).text.length,null,!0,1);t<0&&(t=0);for(var a=se(r,i);;){var l=Qn(e,a,i,t,n),s=Pe(a,l.ch+(0<l.xRel?1:0));if(!s)return l;var c=s.find(1);if(c.line==i)return c;a=se(r,i=c.line)}}function Yn(t,e,n,r){r-=jn(e);var i=e.text.length,o=ae((function(e){return In(t,n,e-1).bottom<=r}),i,0);return{begin:o,end:i=ae((function(e){return In(t,n,e).top>r}),o,i)}}function Zn(e,t,n,r){return n||(n=On(e,t)),Yn(e,t,n,qn(e,t,In(e,n,r),"line").top)}function Jn(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function Qn(n,e,t,r,i){i-=Ve(e);var o=On(n,e),a=jn(e),l=0,s=e.text.length,c=!0,u=Qe(e,n.doc.direction);if(u){var h=(n.options.lineWrapping?function(e,t,n,r,i,o,a){var l=Yn(e,t,r,a),s=l.begin,c=l.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,h=null,f=0;f<i.length;f++){var d=i[f];if(!(d.from>=c||d.to<=s)){var m=In(e,r,1!=d.level?Math.min(c,d.to)-1:Math.max(s,d.from)).right,g=m<o?o-m+1e9:m-o;(!u||g<h)&&(u=d,h=g)}}return u||(u=i[i.length-1]),u.from<s&&(u={from:s,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}:function(r,i,o,a,l,s,c){var e=ae((function(e){var t=l[e],n=1!=t.level;return Jn(Gn(r,ge(o,n?t.to:t.from,n?"before":"after"),"line",i,a),s,c,!0)}),0,l.length-1),t=l[e];if(0<e){var n=1!=t.level,u=Gn(r,ge(o,n?t.from:t.to,n?"after":"before"),"line",i,a);Jn(u,s,c,!0)&&u.top>c&&(t=l[e-1])}return t})(n,e,t,o,u,r,i);l=(c=1!=h.level)?h.from:h.to-1,s=c?h.to:h.from-1}var f,d,p=null,m=null,g=ae((function(e){var t=In(n,o,e);return t.top+=a,t.bottom+=a,!!Jn(t,r,i,!1)&&(t.top<=i&&t.left<=r&&(p=e,m=t),!0)}),l,s),v=!1;if(m){var y=r-m.left<m.right-r,x=y==c;g=p+(x?0:1),d=x?"after":"before",f=y?m.left:m.right}else{c||g!=s&&g!=l||g++,d=0==g?"after":g==e.text.length?"before":In(n,o,g-(c?1:0)).bottom+a<=i==c?"after":"before";var b=Gn(n,ge(t,g,d),"line",e,o);f=b.left,v=i<b.top||i>=b.bottom}return Xn(t,g=oe(e.text,g,1),d,v,r-f)}function er(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Dn){Dn=E("pre");for(var t=0;t<49;++t)Dn.appendChild(document.createTextNode("x")),Dn.appendChild(E("br"));Dn.appendChild(document.createTextNode("x"))}N(e.measure,Dn);var n=Dn.offsetHeight/50;return 3<n&&(e.cachedTextHeight=n),M(e.measure),n||1}function tr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=E("span","xxxxxxxxxx"),n=E("pre",[t]);N(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return 2<i&&(e.cachedCharWidth=i),i||10}function nr(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)n[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+i,r[e.options.gutters[a]]=o.clientWidth;return{fixedPos:rr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function rr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ir(r){var i=er(r.display),o=r.options.lineWrapping,a=o&&Math.max(5,r.display.scroller.clientWidth/tr(r.display)-3);return function(e){if($e(r.doc,e))return 0;var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;n++)e.widgets[n].height&&(t+=e.widgets[n].height);return o?t+(Math.ceil(e.text.length/a)||1)*i:t+i}}function or(e){var t=e.doc,n=ir(e);t.iter((function(e){var t=n(e);t!=e.height&&he(e,t)}))}function ar(e,t,n,r){var i=e.display;if(!n&&"true"==dt(t).getAttribute("cm-not-content"))return null;var o,a,l=i.lineSpace.getBoundingClientRect();try{o=t.clientX-l.left,a=t.clientY-l.top}catch(t){return null}var s,c=Kn(e,o,a);if(r&&1==c.xRel&&(s=se(e.doc,c.line).text).length==c.ch){var u=F(s,s.length,e.options.tabSize)-s.length;c=ge(c.line,Math.max(0,Math.round((o-Cn(e.display).left)/tr(e.display))-u))}return c}function lr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function sr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function cr(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var l=n.sel.ranges[a];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var s=l.empty();(s||e.options.showCursorWhenSelecting)&&ur(e,l.head,i),s||fr(e,l,o)}}return r}function ur(e,t,n){var r=Gn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(E("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(E("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function hr(e,t){return e.top-t.top||e.left-t.left}function fr(a,e,t){var n=a.display,r=a.doc,i=document.createDocumentFragment(),o=Cn(a.display),T=o.left,M=Math.max(n.sizerWidth,Tn(a)-n.sizer.offsetLeft)-o.right,N="ltr"==r.direction;function A(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),i.appendChild(E("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?M-e:n)+"px;\n                             height: "+(r-t)+"px"))}function l(n,y,x){var b,w,o=se(r,n),k=o.text.length;function S(e,t){return $n(a,ge(n,e),"div",o,t)}function C(e,t,n){var r=Zn(a,o,null,e),i="ltr"==t==("after"==n)?"left":"right";return S("after"==n?r.begin:r.end-(/\s/.test(o.text.charAt(r.end-1))?2:1),i)[i]}var L=Qe(o,r.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),i=!0)}i||r(t,n,"ltr")}(L,y||0,null==x?k:x,(function(e,t,n,r){var i="ltr"==n,o=S(e,i?"left":"right"),a=S(t-1,i?"right":"left"),l=null==y&&0==e,s=null==x&&t==k,c=0==r,u=!L||r==L.length-1;if(a.top-o.top<=3){var h=(N?s:l)&&u,f=(N?l:s)&&c?T:(i?o:a).left,d=h?M:(i?a:o).right;A(f,o.top,d-f,o.bottom)}else{var p,m,g,v;i?(p=N&&l&&c?T:o.left,m=N?M:C(e,n,"before"),g=N?T:C(t,n,"after"),v=N&&s&&u?M:a.right):(p=N?C(e,n,"before"):T,m=!N&&l&&c?M:o.right,g=!N&&s&&u?T:a.left,v=N?C(t,n,"after"):M),A(p,o.top,m-p,o.bottom),o.bottom<a.top&&A(T,o.bottom,null,a.top),A(g,a.top,v-g,a.bottom)}(!b||hr(o,b)<0)&&(b=o),hr(a,b)<0&&(b=a),(!w||hr(o,w)<0)&&(w=o),hr(a,w)<0&&(w=a)})),{start:b,end:w}}var s=e.from(),c=e.to();if(s.line==c.line)l(s.line,s.ch,c.ch);else{var u=se(r,s.line),h=se(r,c.line),f=je(u)==je(h),d=l(s.line,s.ch,f?u.text.length+1:null).end,p=l(c.line,f?0:null,c.ch).start;f&&(d.top<p.top-2?(A(d.right,d.top,null,d.bottom),A(T,p.top,p.left,p.bottom)):A(d.right,d.top,p.left-d.right,d.bottom)),d.bottom<p.top&&A(T,d.bottom,null,p.top)}t.appendChild(i)}function dr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval((function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function pr(e){e.state.focused||(e.display.input.focus(),gr(e))}function mr(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,vr(e))}),100)}function gr(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(it(e,"focus",e,t),e.state.focused=!0,D(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),x&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),dr(e))}function vr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(it(e,"blur",e,t),e.state.focused=!1,T(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function yr(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],o=void 0;if(!i.hidden){if(w&&k<8){var a=i.node.offsetTop+i.node.offsetHeight;o=a-n,n=a}else{var l=i.node.getBoundingClientRect();o=l.bottom-l.top}var s=i.line.height-o;if(o<2&&(o=er(t)),(.005<s||s<-.005)&&(he(i.line,o),xr(i.line),i.rest))for(var c=0;c<i.rest.length;c++)xr(i.rest[c])}}}function xr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function br(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-kn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=de(t,r),a=de(t,i);if(n&&n.ensure){var l=n.ensure.from.line,s=n.ensure.to.line;l<o?a=de(t,Ve(se(t,o=l))+e.wrapper.clientHeight):Math.min(s,t.lastLine())>=a&&(o=de(t,Ve(se(t,s))-e.wrapper.clientHeight),a=s)}return{from:o,to:Math.max(a,o+1)}}function wr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=rr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var l=n[a].alignable;if(l)for(var s=0;s<l.length;s++)l[s].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function kr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=me(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(E("div",[E("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",li(e),!0}return!1}function Sr(e,t){var n=e.display,r=er(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Mn(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var l=e.doc.height+Sn(n),s=t.top<r,c=t.bottom>l-r;if(t.top<i)a.scrollTop=s?0:t.top;else if(t.bottom>i+o){var u=Math.min(t.top,(c?l:t.bottom)-o);u!=i&&(a.scrollTop=u)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,f=Tn(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),d=t.right-t.left>f;return d&&(t.right=t.left+f),t.left<10?a.scrollLeft=0:t.left<h?a.scrollLeft=Math.max(0,t.left-(d?0:10)):t.right>f+h-3&&(a.scrollLeft=t.right+(d?0:10)-f),a}function Cr(e,t){null!=t&&(Mr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Lr(e){Mr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Tr(e,t,n){null==t&&null==n||Mr(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Mr(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Nr(e,Vn(e,t.from),Vn(e,t.to),t.margin))}function Nr(e,t,n,r){var i=Sr(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Tr(e,i.scrollLeft,i.scrollTop)}function Ar(e,t){Math.abs(e.doc.scrollTop-t)<2||(m||ai(e,{top:t}),Er(e,t,!0),m&&ai(e),ti(e,100))}function Er(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Or(e,t,n,r){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,wr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Ir(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+Sn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Ln(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Dr=function(e,t,n){this.cm=n;var r=this.vert=E("div",[E("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=E("div",[E("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),tt(r,"scroll",(function(){r.clientHeight&&t(r.scrollTop,"vertical")})),tt(i,"scroll",(function(){i.clientWidth&&t(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,w&&k<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Dr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<e.clientHeight&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Dr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Dr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Dr.prototype.zeroWidthHack=function(){var e=b&&!l?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new z,this.disableVert=new z},Dr.prototype.enableZeroWidthBar=function(n,r,i){n.style.pointerEvents="auto",r.set(1e3,(function e(){var t=n.getBoundingClientRect();("vert"==i?document.elementFromPoint(t.right-1,(t.top+t.bottom)/2):document.elementFromPoint((t.right+t.left)/2,t.bottom-1))!=n?n.style.pointerEvents="none":r.set(1e3,e)}))},Dr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Hr=function(){};function Rr(e,t){t||(t=Ir(e));var n=e.display.barWidth,r=e.display.barHeight;Br(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&yr(e),Br(e,Ir(e)),n=e.display.barWidth,r=e.display.barHeight}function Br(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Hr.prototype.update=function(){return{bottom:0,right:0}},Hr.prototype.setScrollLeft=function(){},Hr.prototype.setScrollTop=function(){},Hr.prototype.clear=function(){};var Wr={native:Dr,null:Hr};function Fr(n){n.display.scrollbars&&(n.display.scrollbars.clear(),n.display.scrollbars.addClass&&T(n.display.wrapper,n.display.scrollbars.addClass)),n.display.scrollbars=new Wr[n.options.scrollbarStyle]((function(e){n.display.wrapper.insertBefore(e,n.display.scrollbarFiller),tt(e,"mousedown",(function(){n.state.focused&&setTimeout((function(){return n.display.input.focus()}),0)})),e.setAttribute("cm-not-content","true")}),(function(e,t){"horizontal"==t?Or(n,e):Ar(n,e)}),n),n.display.scrollbars.addClass&&D(n.display.wrapper,n.display.scrollbars.addClass)}var zr=0;function Pr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++zr},t=e.curOp,an?an.ops.push(t):t.ownsGroup=an={ops:[t],delayedCallbacks:[]}}function _r(e){!function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{an=null,t(n)}}(e.curOp,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)jr(t[n]);for(var r=0;r<t.length;r++)(i=t[r]).updatedDisplay=i.mustUpdate&&ii(i.cm,i.update);for(var i,o=0;o<t.length;o++)qr(t[o]);for(var a=0;a<t.length;a++)Ur(t[a]);for(var l=0;l<t.length;l++)$r(t[l])}(e)}))}function jr(e){var t,n,r=e.cm,i=r.display;!(n=(t=r).display).scrollbarsClipped&&n.scroller.offsetWidth&&(n.nativeBarWidth=n.scroller.offsetWidth-n.scroller.clientWidth,n.heightForcer.style.height=Ln(t)+"px",n.sizer.style.marginBottom=-n.nativeBarWidth+"px",n.sizer.style.borderRightWidth=Ln(t)+"px",n.scrollbarsClipped=!0),e.updateMaxLine&&Ke(r),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&r.options.lineWrapping,e.update=e.mustUpdate&&new ri(r,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function qr(e){var t=e.cm,n=t.display;e.updatedDisplay&&yr(t),e.barMeasure=Ir(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=An(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Ln(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Tn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Ur(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Or(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==I();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Rr(t,e.barMeasure),e.updatedDisplay&&si(t,e.barMeasure),e.selectionChanged&&dr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&pr(e.cm)}function $r(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&oi(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Er(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Or(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!ot(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!c){var o=E("div","​",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-kn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Ln(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?ge(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?ge(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var a=!1,l=Gn(e,t),s=n&&n!=t?Gn(e,n):l,c=Sr(e,i={left:Math.min(l.left,s.left),top:Math.min(l.top,s.top)-r,right:Math.max(l.left,s.left),bottom:Math.max(l.bottom,s.bottom)+r}),u=e.doc.scrollTop,h=e.doc.scrollLeft;if(null!=c.scrollTop&&(Ar(e,c.scrollTop),1<Math.abs(e.doc.scrollTop-u)&&(a=!0)),null!=c.scrollLeft&&(Or(e,c.scrollLeft),1<Math.abs(e.doc.scrollLeft-h)&&(a=!0)),!a)break}return i}(t,Se(r,e.scrollToPos.from),Se(r,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||it(i[a],"hide");if(o)for(var l=0;l<o.length;++l)o[l].lines.length&&it(o[l],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&it(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Gr(e,t){if(e.curOp)return t();Pr(e);try{return t()}finally{_r(e)}}function Vr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Pr(e);try{return t.apply(e,arguments)}finally{_r(e)}}}function Xr(e){return function(){if(this.curOp)return e.apply(this,arguments);Pr(this);try{return e.apply(this,arguments)}finally{_r(this)}}}function Kr(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Pr(e);try{return t.apply(this,arguments)}finally{_r(e)}}}function Yr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Te&&qe(e.doc,t)<i.viewTo&&Jr(e);else if(n<=i.viewFrom)Te&&Ue(e.doc,n+r)>i.viewFrom?Jr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Jr(e);else if(t<=i.viewFrom){var o=Qr(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):Jr(e)}else if(n>=i.viewTo){var a=Qr(e,t,t,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):Jr(e)}else{var l=Qr(e,t,t,-1),s=Qr(e,n,n+r,1);l&&s?(i.view=i.view.slice(0,l.index).concat(on(e,l.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=r):Jr(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function Zr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[lr(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==P(a,n)&&a.push(n)}}}function Jr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Qr(e,t,n,r){var i,o=lr(e,t),a=e.display.view;if(!Te||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var l=e.display.viewFrom,s=0;s<o;s++)l+=a[s].size;if(l!=t){if(0<r){if(o==a.length-1)return null;i=l+a[o].size-t,o++}else i=l-t;t+=i,n+=i}for(;qe(e.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function ei(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function ti(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,B(ni,e))}function ni(s){var c=s.doc;if(!(c.highlightFrontier>=s.display.viewTo)){var u=+new Date+s.options.workTime,h=zt(s,c.highlightFrontier),f=[];c.iter(h.line,Math.min(c.first+c.size,s.display.viewTo+500),(function(e){if(h.line>=s.display.viewFrom){var t=e.styles,n=e.text.length>s.options.maxHighlightLength?Ot(c.mode,h.state):null,r=Wt(s,e,h,!0);n&&(h.state=n),e.styles=r.styles;var i=e.styleClasses,o=r.classes;o?e.styleClasses=o:i&&(e.styleClasses=null);for(var a=!t||t.length!=e.styles.length||i!=o&&(!i||!o||i.bgClass!=o.bgClass||i.textClass!=o.textClass),l=0;!a&&l<t.length;++l)a=t[l]!=e.styles[l];a&&f.push(h.line),e.stateAfter=h.save(),h.nextLine()}else e.text.length<=s.options.maxHighlightLength&&Pt(s,e.text,h),e.stateAfter=h.line%5==0?h.save():null,h.nextLine();if(+new Date>u)return ti(s,s.options.workDelay),!0})),c.highlightFrontier=h.line,c.modeFrontier=Math.max(c.modeFrontier,h.line),f.length&&Gr(s,(function(){for(var e=0;e<f.length;e++)Zr(s,f[e],"text")}))}}var ri=function(e,t,n){var r=e.display;this.viewport=t,this.visible=br(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Tn(e),this.force=n,this.dims=nr(e),this.events=[]};function ii(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Jr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ei(e))return!1;kr(e)&&(Jr(e),t.dims=nr(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),Te&&(o=qe(e.doc,o),a=Ue(e.doc,a));var l,s,c,u,h=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;s=o,c=a,0==(u=(l=e).display).view.length||s>=u.viewTo||c<=u.viewFrom?(u.view=on(l,s,c),u.viewFrom=s):(u.viewFrom>s?u.view=on(l,s,u.viewFrom).concat(u.view):u.viewFrom<s&&(u.view=u.view.slice(lr(l,s))),u.viewFrom=s,u.viewTo<c?u.view=u.view.concat(on(l,u.viewTo,c)):u.viewTo>c&&(u.view=u.view.slice(0,lr(l,c)))),u.viewTo=c,n.viewOffset=Ve(se(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var f=ei(e);if(!h&&0==f&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var d=function(e){if(e.hasFocus())return null;var t=I();if(!t||!O(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&O(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return 4<f&&(n.lineDiv.style.display="none"),function(n,e,t){var p,m,g,v,y,r=n.display,i=n.options.lineNumbers,o=r.lineDiv,a=o.firstChild;function l(e){var t=e.nextSibling;return x&&b&&n.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),t}for(var s=r.view,c=r.viewFrom,u=0;u<s.length;u++){var h=s[u];if(h.hidden);else if(h.node&&h.node.parentNode==o){for(;a!=h.node;)a=l(a);var f=i&&null!=e&&e<=c&&h.lineNumber;h.changes&&(-1<P(h.changes,"gutter")&&(f=!1),un(n,h,c,t)),f&&(M(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(me(n.options,c)))),a=h.node.nextSibling}else{var d=(g=c,v=t,y=fn(p=n,m=h),m.text=m.node=y.pre,y.bgClass&&(m.bgClass=y.bgClass),y.textClass&&(m.textClass=y.textClass),pn(p,m),mn(p,m,g,v),vn(p,m,v),m.node);o.insertBefore(d,a)}c+=h.size}for(;a;)a=l(a)}(e,n.updateLineNumbers,t.dims),4<f&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=I()&&(e.activeElt.focus(),e.anchorNode&&O(document.body,e.anchorNode)&&O(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(d),M(n.cursorDiv),M(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,h&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ti(e,400)),!(n.updateLineNumbers=null)}function oi(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Tn(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Sn(e.display)-Mn(e),n.top)}),t.visible=br(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&ii(e,t);r=!1){yr(e);var i=Ir(e);sr(e),Rr(e,i),si(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ai(e,t){var n=new ri(e,t);if(ii(e,n)){yr(e),oi(e,n);var r=Ir(e);sr(e),Rr(e,r),si(e,r),n.finish()}}function li(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function si(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Ln(e)+"px"}function ci(e){var t=e.display.gutters,n=e.options.gutters;M(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(E("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&((e.display.lineGutter=o).style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",li(e)}function ui(e){var t=P(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):-1<t&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}ri.prototype.signal=function(e,t){lt(e,t)&&this.events.push(arguments)},ri.prototype.finish=function(){for(var e=0;e<this.events.length;e++)it.apply(null,this.events[e])};var hi=0,fi=null;function di(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function pi(e){var t=di(e);return t.x*=fi,t.y*=fi,t}function mi(e,t){var n=di(t),r=n.x,i=n.y,o=e.display,a=o.scroller,l=a.scrollWidth>a.clientWidth,s=a.scrollHeight>a.clientHeight;if(r&&l||i&&s){if(i&&b&&x)e:for(var c=t.target,u=o.view;c!=a;c=c.parentNode)for(var h=0;h<u.length;h++)if(u[h].node==c){e.display.currentWheelTarget=c;break e}if(r&&!m&&!g&&null!=fi)return i&&s&&Ar(e,Math.max(0,a.scrollTop+i*fi)),Or(e,Math.max(0,a.scrollLeft+r*fi)),(!i||i&&s)&&ct(t),void(o.wheelStartX=null);if(i&&null!=fi){var f=i*fi,d=e.doc.scrollTop,p=d+o.wrapper.clientHeight;f<0?d=Math.max(0,d+f-50):p=Math.min(e.doc.height,p+f+50),ai(e,{top:d,bottom:p})}hi<20&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=r,o.wheelDY=i,setTimeout((function(){if(null!=o.wheelStartX){var e=a.scrollLeft-o.wheelStartX,t=a.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(fi=(fi*hi+n)/(hi+1),++hi)}}),200)):(o.wheelDX+=r,o.wheelDY+=i))}}w?fi=-.53:m?fi=15:a?fi=-.7:s&&(fi=-1/3);var gi=function(e,t){this.ranges=e,this.primIndex=t};gi.prototype.primary=function(){return this.ranges[this.primIndex]},gi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!ye(n.anchor,r.anchor)||!ye(n.head,r.head))return!1}return!0},gi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new vi(xe(this.ranges[t].anchor),xe(this.ranges[t].head));return new gi(e,this.primIndex)},gi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},gi.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(0<=ve(t,r.from())&&ve(e,r.to())<=0)return n}return-1};var vi=function(e,t){this.anchor=e,this.head=t};function yi(e,t){var n=e[t];e.sort((function(e,t){return ve(e.from(),t.from())})),t=P(e,n);for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];if(0<=ve(o.to(),i.from())){var a=we(o.from(),i.from()),l=be(o.to(),i.to()),s=o.empty()?i.from()==i.head:o.from()==o.head;r<=t&&--t,e.splice(--r,2,new vi(s?l:a,s?a:l))}}return new gi(e,t)}function xi(e,t){return new gi([new vi(e,t||e)],0)}function bi(e){return e.text?ge(e.from.line+e.text.length-1,K(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function wi(e,t){if(ve(e,t.from)<0)return e;if(ve(e,t.to)<=0)return bi(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=bi(t).ch-t.to.ch),ge(n,r)}function ki(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new vi(wi(i.anchor,t),wi(i.head,t)))}return yi(n,e.sel.primIndex)}function Si(e,t,n){return e.line==t.line?ge(n.line,e.ch-t.ch+n.ch):ge(n.line+(e.line-t.line),e.ch)}function Ci(e){e.doc.mode=Nt(e.options,e.doc.modeOption),Li(e)}function Li(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ti(e,100),e.state.modeGen++,e.curOp&&Yr(e)}function Ti(e,t){return 0==t.from.ch&&0==t.to.ch&&""==K(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Mi(e,r,t,i){function o(e){return t?t[e]:null}function n(e,t,n){!function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ie(e),De(e,n);var i=r?r(e):1;i!=e.height&&he(e,i)}(e,t,n,i),sn(e,"change",e,r)}function a(e,t){for(var n=[],r=e;r<t;++r)n.push(new Vt(c[r],o(r),i));return n}var l=r.from,s=r.to,c=r.text,u=se(e,l.line),h=se(e,s.line),f=K(c),d=o(c.length-1),p=s.line-l.line;if(r.full)e.insert(0,a(0,c.length)),e.remove(c.length,e.size-c.length);else if(Ti(e,r)){var m=a(0,c.length-1);n(h,h.text,d),p&&e.remove(l.line,p),m.length&&e.insert(l.line,m)}else if(u==h)if(1==c.length)n(u,u.text.slice(0,l.ch)+f+u.text.slice(s.ch),d);else{var g=a(1,c.length-1);g.push(new Vt(f+u.text.slice(s.ch),d,i)),n(u,u.text.slice(0,l.ch)+c[0],o(0)),e.insert(l.line+1,g)}else if(1==c.length)n(u,u.text.slice(0,l.ch)+c[0]+h.text.slice(s.ch),o(0)),e.remove(l.line+1,p);else{n(u,u.text.slice(0,l.ch)+c[0],o(0)),n(h,f+h.text.slice(s.ch),d);var v=a(1,c.length-1);1<p&&e.remove(l.line+1,p-1),e.insert(l.line+1,v)}sn(e,"change",e,r)}function Ni(e,l,s){!function e(t,n,r){if(t.linked)for(var i=0;i<t.linked.length;++i){var o=t.linked[i];if(o.doc!=n){var a=r&&o.sharedHist;s&&!a||(l(o.doc,a),e(o.doc,t,a))}}}(e,null,!0)}function Ai(e,t){if(t.cm)throw new Error("This document is already in use.");or((e.doc=t).cm=e),Ci(e),Ei(e),e.options.lineWrapping||Ke(e),e.options.mode=t.modeOption,Yr(e)}function Ei(e){("rtl"==e.doc.direction?D:T)(e.display.lineDiv,"CodeMirror-rtl")}function Oi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Ii(e,t){var n={from:xe(t.from),to:bi(t),text:ce(e,t.from,t.to)};return Wi(e,n,t.from.line,t.to.line+1),Ni(e,(function(e){return Wi(e,n,t.from.line,t.to.line+1)}),!0),n}function Di(e){for(;e.length&&K(e).ranges;)e.pop()}function Hi(e,t,n,r){var i=e.history;i.undone.length=0;var o,a,l,s=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=(l=i).lastOp==r?(Di(l.done),K(l.done)):l.done.length&&!K(l.done).ranges?K(l.done):1<l.done.length&&!l.done[l.done.length-2].ranges?(l.done.pop(),K(l.done)):void 0))a=K(o.changes),0==ve(t.from,t.to)&&0==ve(t.from,a.to)?a.to=bi(t):o.changes.push(Ii(e,t));else{var c=K(i.done);for(c&&c.ranges||Bi(e.sel,i.done),o={changes:[Ii(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,a||it(e,"historyAdded")}function Ri(e,t,n,r){var i,o,a,l,s,c=e.history,u=r&&r.origin;n==c.lastSelOp||u&&c.lastSelOrigin==u&&(c.lastModTime==c.lastSelTime&&c.lastOrigin==u||(i=e,o=u,a=K(c.done),l=t,"*"==(s=o.charAt(0))||"+"==s&&a.ranges.length==l.ranges.length&&a.somethingSelected()==l.somethingSelected()&&new Date-i.history.lastSelTime<=(i.cm?i.cm.options.historyEventDelay:500)))?c.done[c.done.length-1]=t:Bi(t,c.done),c.lastSelTime=+new Date,c.lastSelOrigin=u,c.lastSelOp=n,r&&!1!==r.clearRedo&&Di(c.undone)}function Bi(e,t){var n=K(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Wi(t,n,e,r){var i=n["spans_"+t.id],o=0;t.iter(Math.max(t.first,e),Math.min(t.first+t.size,r),(function(e){e.markedSpans&&((i||(i=n["spans_"+t.id]={}))[o]=e.markedSpans),++o}))}function Fi(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function zi(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Fi(n[i]));return r}(e,t),r=Ee(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var l=0;l<a.length;++l){for(var s=a[l],c=0;c<o.length;++c)if(o[c].marker==s.marker)continue e;o.push(s)}else a&&(n[i]=a)}return n}function Pi(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?gi.prototype.deepCopy.call(o):o);else{var a=o.changes,l=[];r.push({changes:l});for(var s=0;s<a.length;++s){var c=a[s],u=void 0;if(l.push({from:c.from,to:c.to,text:c.text}),t)for(var h in c)(u=h.match(/^spans_(\d+)$/))&&-1<P(t,Number(u[1]))&&(K(l)[h]=c[h],delete c[h])}}}return r}function _i(e,t,n,r){if(r){var i=e.anchor;if(n){var o=ve(t,i)<0;o!=ve(n,i)<0?(i=t,t=n):o!=ve(t,n)<0&&(t=n)}return new vi(i,t)}return new vi(n||t,t)}function ji(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Vi(e,new gi([_i(e.sel.primary(),t,n,i)],0),r)}function qi(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=_i(e.sel.ranges[o],t[o],null,i);Vi(e,yi(r,e.sel.primIndex),n)}function Ui(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Vi(e,yi(i,e.sel.primIndex),r)}function $i(e,t,n,r){Vi(e,xi(t,n),r)}function Gi(e,t,n){var r=e.history.done,i=K(r);i&&i.ranges?Xi(e,r[r.length-1]=t,n):Vi(e,t,n)}function Vi(e,t,n){Xi(e,t,n),Ri(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Xi(e,t,n){var r,i,o,a;(lt(e,"beforeSelectionChange")||e.cm&&lt(e.cm,"beforeSelectionChange"))&&(r=e,o=n,a={ranges:(i=t).ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new vi(Se(r,e[t].anchor),Se(r,e[t].head))},origin:o&&o.origin},it(r,"beforeSelectionChange",r,a),r.cm&&it(r.cm,"beforeSelectionChange",r.cm,a),t=a.ranges!=i.ranges?yi(a.ranges,a.ranges.length-1):i),Ki(e,Zi(e,t,n&&n.bias||(ve(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!e.cm||Lr(e.cm)}function Ki(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,at(e.cm)),sn(e,"cursorActivity",e))}function Yi(e){Ki(e,Zi(e,e.sel,null,!1))}function Zi(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],s=Qi(e,a.anchor,l&&l.anchor,n,r),c=Qi(e,a.head,l&&l.head,n,r);(i||s!=a.anchor||c!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new vi(s,c))}return i?yi(i,t.primIndex):t}function Ji(e,t,n,r,i){var o=se(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var l=o.markedSpans[a],s=l.marker;if((null==l.from||(s.inclusiveLeft?l.from<=t.ch:l.from<t.ch))&&(null==l.to||(s.inclusiveRight?l.to>=t.ch:l.to>t.ch))){if(i&&(it(s,"beforeCursorEnter"),s.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!s.atomic)continue;if(n){var c=s.find(r<0?1:-1),u=void 0;if((r<0?s.inclusiveRight:s.inclusiveLeft)&&(c=eo(e,c,-r,c&&c.line==t.line?o:null)),c&&c.line==t.line&&(u=ve(c,n))&&(r<0?u<0:0<u))return Ji(e,c,t,r,i)}var h=s.find(r<0?-1:1);return(r<0?s.inclusiveLeft:s.inclusiveRight)&&(h=eo(e,h,r,h.line==t.line?o:null)),h?Ji(e,h,t,r,i):null}}return t}function Qi(e,t,n,r,i){var o=r||1;return Ji(e,t,n,o,i)||!i&&Ji(e,t,n,o,!0)||Ji(e,t,n,-o,i)||!i&&Ji(e,t,n,-o,!0)||(e.cantEdit=!0,ge(e.first,0))}function eo(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?Se(e,ge(t.line-1)):null:0<n&&t.ch==(r||se(e,t.line)).text.length?t.line<e.first+e.size-1?ge(t.line+1,0):null:new ge(t.line,t.ch+n)}function to(e){e.setSelection(ge(e.firstLine(),0),ge(e.lastLine()),q)}function no(i,e,t){var o={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return o.canceled=!0}};return t&&(o.update=function(e,t,n,r){e&&(o.from=Se(i,e)),t&&(o.to=Se(i,t)),n&&(o.text=n),void 0!==r&&(o.origin=r)}),it(i,"beforeChange",i,o),i.cm&&it(i.cm,"beforeChange",i.cm,o),o.canceled?null:{from:o.from,to:o.to,text:o.text,origin:o.origin}}function ro(e,t,n){if(e.cm){if(!e.cm.curOp)return Vr(e.cm,ro)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(lt(e,"beforeChange")||e.cm&&lt(e.cm,"beforeChange"))||(t=no(e,t,!0))){var r=Le&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=P(r,n)||(r||(r=[])).push(n)}})),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],l=a.find(0),s=0;s<i.length;++s){var c=i[s];if(!(ve(c.to,l.from)<0||0<ve(c.from,l.to))){var u=[s,1],h=ve(c.from,l.from),f=ve(c.to,l.to);(h<0||!a.inclusiveLeft&&!h)&&u.push({from:c.from,to:l.from}),(0<f||!a.inclusiveRight&&!f)&&u.push({from:l.to,to:c.to}),i.splice.apply(i,u),s+=u.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;0<=i;--i)io(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else io(e,t)}}function io(e,n){if(1!=n.text.length||""!=n.text[0]||0!=ve(n.from,n.to)){var t=ki(e,n);Hi(e,n,t,e.cm?e.cm.curOp.id:NaN),lo(e,n,t,Ee(e,n));var r=[];Ni(e,(function(e,t){t||-1!=P(r,e.history)||(ho(e.history,n),r.push(e.history)),lo(e,n,null,Ee(e,n))}))}}function oo(i,o,e){var t=i.cm&&i.cm.state.suppressEdits;if(!t||e){for(var a,n=i.history,r=i.sel,l="undo"==o?n.done:n.undone,s="undo"==o?n.undone:n.done,c=0;c<l.length&&(a=l[c],e?!a.ranges||a.equals(i.sel):a.ranges);c++);if(c!=l.length){for(n.lastOrigin=n.lastSelOrigin=null;;){if(!(a=l.pop()).ranges){if(t)return void l.push(a);break}if(Bi(a,s),e&&!a.equals(i.sel))return void Vi(i,a,{clearRedo:!1});r=a}var u=[];Bi(r,s),s.push({changes:u,generation:n.generation}),n.generation=a.generation||++n.maxGeneration;for(var h=lt(i,"beforeChange")||i.cm&&lt(i.cm,"beforeChange"),f=function(e){var n=a.changes[e];if(n.origin=o,h&&!no(i,n,!1))return l.length=0,{};u.push(Ii(i,n));var t=e?ki(i,n):K(l);lo(i,n,t,zi(i,n)),!e&&i.cm&&i.cm.scrollIntoView({from:n.from,to:bi(n)});var r=[];Ni(i,(function(e,t){t||-1!=P(r,e.history)||(ho(e.history,n),r.push(e.history)),lo(e,n,null,zi(e,n))}))},d=a.changes.length-1;0<=d;--d){var p=f(d);if(p)return p.v}}}}function ao(e,t){if(0!=t&&(e.first+=t,e.sel=new gi(Y(e.sel.ranges,(function(e){return new vi(ge(e.anchor.line+t,e.anchor.ch),ge(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){Yr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Zr(e.cm,r,"gutter")}}function lo(e,t,n,r){if(e.cm&&!e.cm.curOp)return Vr(e.cm,lo)(e,t,n,r);if(t.to.line<e.first)ao(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);ao(e,i),t={from:ge(e.first,0),to:ge(t.to.line+i,t.to.ch),text:[K(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ge(o,se(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=ce(e,t.from,t.to),n||(n=ki(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,o=t.from,a=t.to,l=!1,s=o.line;e.options.lineWrapping||(s=fe(je(se(r,o.line))),r.iter(s,a.line+1,(function(e){if(e==i.maxLine)return l=!0}))),-1<r.sel.contains(t.from,t.to)&&at(e),Mi(r,t,n,ir(e)),e.options.lineWrapping||(r.iter(s,o.line+t.text.length,(function(e){var t=Xe(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,l=!1)})),l&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;n<r;r--){var i=se(e,r).stateAfter;if(i&&(!(i instanceof Rt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,o.line),ti(e,400);var c=t.text.length-(a.line-o.line)-1;t.full?Yr(e):o.line!=a.line||1!=t.text.length||Ti(e.doc,t)?Yr(e,o.line,a.line+1,c):Zr(e,o.line,"text");var u=lt(e,"changes"),h=lt(e,"change");if(h||u){var f={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};h&&sn(e,"change",e,f),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}(e.cm,t,r):Mi(e,t,r),Xi(e,n,q)}}function so(e,t,n,r,i){var o;r||(r=n),ve(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof t&&(t=e.splitLines(t)),ro(e,{from:n,to:r,text:t,origin:i})}function co(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function uo(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var l=0;l<o.ranges.length;l++)co(o.ranges[l].anchor,t,n,r),co(o.ranges[l].head,t,n,r)}else{for(var s=0;s<o.changes.length;++s){var c=o.changes[s];if(n<c.from.line)c.from=ge(c.from.line+r,c.from.ch),c.to=ge(c.to.line+r,c.to.ch);else if(t<=c.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function ho(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;uo(e.done,n,r,i),uo(e.undone,n,r,i)}function fo(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=se(e,ke(e,t)):i=fe(t),null==i?null:(r(o,i)&&e.cm&&Zr(e.cm,i,n),o)}function po(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function mo(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}vi.prototype.from=function(){return we(this.anchor,this.head)},vi.prototype.to=function(){return be(this.anchor,this.head)},vi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},po.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n,r=e,i=e+t;r<i;++r){var o=this.lines[r];this.height-=o.height,(n=o).parent=null,Ie(n),sn(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},mo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof po))){var l=[];this.collapse(l),this.children=[new po(l)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&50<i.lines.length){for(var a=i.lines.length%25+25,l=a;l<i.lines.length;){var s=new po(i.lines.slice(l,l+=25));i.height-=s.height,this.children.splice(++r,0,s),s.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new mo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=P(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var r=new mo(e.children);(r.parent=e).children=[r,t],e=r}t.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var go=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function vo(e,t,n){Ve(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Cr(e,n)}go.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=fe(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=bn(this);he(n,Math.max(0,n.height-o)),e&&(Gr(e,(function(){vo(e,n,-o),Zr(e,r,"widget")})),sn(e,"lineWidgetCleared",e,this,r))}},go.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=bn(this)-t;i&&(he(r,r.height+i),n&&Gr(n,(function(){n.curOp.forceUpdate=!0,vo(n,r,i),sn(n,"lineWidgetChanged",n,e,fe(r))})))},st(go);var yo=0,xo=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++yo};function bo(t,r,i,e,n){if(e&&e.shared)return function(e,n,r,i,o){(i=W(i)).shared=!1;var a=[bo(e,n,r,i,o)],l=a[0],s=i.widgetNode;return Ni(e,(function(e){s&&(i.widgetNode=s.cloneNode(!0)),a.push(bo(e,Se(e,n),Se(e,r),i,o));for(var t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;l=K(a)})),new wo(a,l)}(t,r,i,e,n);if(t.cm&&!t.cm.curOp)return Vr(t.cm,bo)(t,r,i,e,n);var o=new xo(t,n),a=ve(r,i);if(e&&W(e,o,!1),0<a||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=A("span",[o.replacedWith],"CodeMirror-widget"),e.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),e.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(_e(t,r.line,r,i,o)||r.line!=i.line&&_e(t,i.line,r,i,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Te=!0}o.addToHistory&&Hi(t,{from:r,to:i,origin:"markText"},t.sel,NaN);var l,s=r.line,c=t.cm;if(t.iter(s,i.line+1,(function(e){var t,n;c&&o.collapsed&&!c.options.lineWrapping&&je(e)==c.display.maxLine&&(l=!0),o.collapsed&&s!=r.line&&he(e,0),t=e,n=new Me(o,s==r.line?r.ch:null,s==i.line?i.ch:null),t.markedSpans=t.markedSpans?t.markedSpans.concat([n]):[n],n.marker.attachLine(t),++s})),o.collapsed&&t.iter(r.line,i.line+1,(function(e){$e(t,e)&&he(e,0)})),o.clearOnEnter&&tt(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(Le=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++yo,o.atomic=!0),c){if(l&&(c.curOp.updateMaxLine=!0),o.collapsed)Yr(c,r.line,i.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=r.line;u<=i.line;u++)Zr(c,u,"text");o.atomic&&Yi(c.doc),sn(c,"markerAdded",c,o)}return o}xo.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){var t=this.doc.cm,n=t&&!t.curOp;if(n&&Pr(t),lt(this,"clear")){var r=this.find();r&&sn(this,"clear",r.from,r.to)}for(var i=null,o=null,a=0;a<this.lines.length;++a){var l=e.lines[a],s=Ne(l.markedSpans,e);t&&!e.collapsed?Zr(t,fe(l),"text"):t&&(null!=s.to&&(o=fe(l)),null!=s.from&&(i=fe(l))),l.markedSpans=Ae(l.markedSpans,s),null==s.from&&e.collapsed&&!$e(e.doc,l)&&t&&he(l,er(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var u=je(e.lines[c]),h=Xe(u);h>t.display.maxLineLength&&(t.display.maxLine=u,t.display.maxLineLength=h,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&Yr(t,i,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Yi(t.doc)),t&&sn(t,"markerCleared",t,this,i,o),n&&_r(t),this.parent&&this.parent.clear()}},xo.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],a=Ne(o.markedSpans,this);if(null!=a.from&&(n=ge(t?o:fe(o),a.from),-1==e))return n;if(null!=a.to&&(r=ge(t?o:fe(o),a.to),1==e))return r}return n&&{from:n,to:r}},xo.prototype.changed=function(){var o=this,a=this.find(-1,!0),l=this,s=this.doc.cm;a&&s&&Gr(s,(function(){var e=a.line,t=fe(a.line),n=En(s,t);if(n&&(Wn(n),s.curOp.selectionChanged=s.curOp.forceUpdate=!0),s.curOp.updateMaxLine=!0,!$e(l.doc,e)&&null!=l.height){var r=l.height;l.height=null;var i=bn(l)-r;i&&he(e,e.height+i)}sn(s,"markerChanged",s,o)}))},xo.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=P(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},xo.prototype.detachLine=function(e){if(this.lines.splice(P(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},st(xo);var wo=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function ko(e){return e.findMarks(ge(e.first,0),e.clipPos(ge(e.lastLine())),(function(e){return e.parent}))}function So(o){for(var e=function(e){var t=o[e],n=[t.primary.doc];Ni(t.primary.doc,(function(e){return n.push(e)}));for(var r=0;r<t.markers.length;r++){var i=t.markers[r];-1==P(n,i.doc)&&(i.parent=null,t.markers.splice(r--,1))}},t=0;t<o.length;t++)e(t)}wo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();sn(this,"clear")}},wo.prototype.find=function(e,t){return this.primary.find(e,t)},st(wo);var Co=0,Lo=function(e,t,n,r,i){if(!(this instanceof Lo))return new Lo(e,t,n,r,i);null==n&&(n=0),mo.call(this,[new po([new Vt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=ge(n,0);this.sel=xi(o),this.history=new Oi(null),this.id=++Co,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Mi(this,{from:o,to:o,text:e}),Vi(this,xi(o),q)};Lo.prototype=J(mo.prototype,{constructor:Lo,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ue(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Kr((function(e){var t=ge(this.first,0),n=this.first+this.size-1;ro(this,{from:t,to:ge(n,se(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Tr(this.cm,0,0),Vi(this,xi(t),q)})),replaceRange:function(e,t,n,r){so(this,e,t=Se(this,t),n=n?Se(this,n):t,r)},getRange:function(e,t,n){var r=ce(this,Se(this,e),Se(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(pe(this,e))return se(this,e)},getLineNumber:function(e){return fe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=se(this,e)),je(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Se(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Kr((function(e,t,n){$i(this,Se(this,"number"==typeof e?ge(e,t||0):e),null,n)})),setSelection:Kr((function(e,t,n){$i(this,Se(this,e),Se(this,t||e),n)})),extendSelection:Kr((function(e,t,n){ji(this,Se(this,e),t&&Se(this,t),n)})),extendSelections:Kr((function(e,t){qi(this,Ce(this,e),t)})),extendSelectionsBy:Kr((function(e,t){qi(this,Ce(this,Y(this.sel.ranges,e)),t)})),setSelections:Kr((function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new vi(Se(this,e[i].anchor),Se(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Vi(this,yi(r,t),n)}})),addSelection:Kr((function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new vi(Se(this,e),Se(this,t||e))),Vi(this,yi(r,r.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=ce(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=ce(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Kr((function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}for(var l=t&&"end"!=t&&function(e,t,n){for(var r=[],i=ge(e.first,0),o=i,a=0;a<t.length;a++){var l=t[a],s=Si(l.from,i,o),c=Si(bi(l),i,o);if(i=l.to,o=c,"around"==n){var u=e.sel.ranges[a],h=ve(u.head,u.anchor)<0;r[a]=new vi(h?c:s,h?s:c)}else r[a]=new vi(s,s)}return new gi(r,e.sel.primIndex)}(this,r,t),s=r.length-1;0<=s;s--)ro(this,r[s]);l?Gi(this,l):this.cm&&Lr(this.cm)})),undo:Kr((function(){oo(this,"undo")})),redo:Kr((function(){oo(this,"redo")})),undoSelection:Kr((function(){oo(this,"undo",!0)})),redoSelection:Kr((function(){oo(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Oi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Pi(this.history.done),undone:Pi(this.history.undone)}},setHistory:function(e){var t=this.history=new Oi(this.history.maxGeneration);t.done=Pi(e.done.slice(0),null,!0),t.undone=Pi(e.undone.slice(0),null,!0)},setGutterMarker:Kr((function(e,n,r){return fo(this,e,"gutter",(function(e){var t=e.gutterMarkers||(e.gutterMarkers={});return!(t[n]=r)&&ne(t)&&(e.gutterMarkers=null),!0}))})),clearGutter:Kr((function(t){var n=this;this.iter((function(e){e.gutterMarkers&&e.gutterMarkers[t]&&fo(n,e,"gutter",(function(){return e.gutterMarkers[t]=null,ne(e.gutterMarkers)&&(e.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!pe(this,e))return null;if(!(e=se(this,t=e)))return null}else if(null==(t=fe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Kr((function(e,n,r){return fo(this,e,"gutter"==n?"gutter":"class",(function(e){var t="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(e[t]){if(C(r).test(e[t]))return!1;e[t]+=" "+r}else e[t]=r;return!0}))})),removeLineClass:Kr((function(e,o,a){return fo(this,e,"gutter"==o?"gutter":"class",(function(e){var t="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass",n=e[t];if(!n)return!1;if(null==a)e[t]=null;else{var r=n.match(C(a));if(!r)return!1;var i=r.index+r[0].length;e[t]=n.slice(0,r.index)+(r.index&&i!=n.length?" ":"")+n.slice(i)||null}return!0}))})),addLineWidget:Kr((function(e,t,n){return i=e,o=new go(r=this,t,n),(a=r.cm)&&o.noHScroll&&(a.display.alignWidgets=!0),fo(r,i,"widget",(function(e){var t=e.widgets||(e.widgets=[]);if(null==o.insertAt?t.push(o):t.splice(Math.min(t.length-1,Math.max(0,o.insertAt)),0,o),o.line=e,a&&!$e(r,e)){var n=Ve(e)<r.scrollTop;he(e,e.height+bn(o)),n&&Cr(a,o.height),a.curOp.forceUpdate=!0}return!0})),a&&sn(a,"lineWidgetAdded",a,o,"number"==typeof i?i:fe(i)),o;var r,i,o,a})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return bo(this,Se(this,e),Se(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return bo(this,e=Se(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=se(this,(e=Se(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(i,o,a){i=Se(this,i),o=Se(this,o);var l=[],s=i.line;return this.iter(i.line,o.line+1,(function(e){var t=e.markedSpans;if(t)for(var n=0;n<t.length;n++){var r=t[n];null!=r.to&&s==i.line&&i.ch>=r.to||null==r.from&&s!=i.line||null!=r.from&&s==o.line&&r.from>=o.ch||a&&!a(r.marker)||l.push(r.marker.parent||r.marker)}++s})),l},getAllMarks:function(){var r=[];return this.iter((function(e){var t=e.markedSpans;if(t)for(var n=0;n<t.length;++n)null!=t[n].from&&r.push(t[n].marker)})),r},posFromIndex:function(n){var r,i=this.first,o=this.lineSeparator().length;return this.iter((function(e){var t=e.text.length+o;if(n<t)return r=n,!0;n-=t,++i})),Se(this,ge(i,r))},indexFromPos:function(e){var t=(e=Se(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Lo(ue(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Lo(ue(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(ve(o,a)){var l=bo(e,o,a,r.primary,r.primary.type);r.markers.push(l),l.parent=r}}}(r,ko(this)),r},unlinkDoc:function(e){if(e instanceof ka&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),So(ko(this));break}if(e.history==this.history){var n=[e.id];Ni(e,(function(e){return n.push(e.id)}),!0),e.history=new Oi(null),e.history.done=Pi(this.history.done,n),e.history.undone=Pi(this.history.undone,n)}},iterLinkedDocs:function(e){Ni(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):wt(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Kr((function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&Gr(t=this.cm,(function(){Ei(t),Yr(t)})))}))}),Lo.prototype.eachLine=Lo.prototype.iter;var To=0;function Mo(e){var i=this;if(No(i),!ot(i,e)&&!wn(i.display,e)){ct(e),w&&(To=+new Date);var o=ar(i,e,!0),t=e.dataTransfer.files;if(o&&!i.isReadOnly())if(t&&t.length&&window.FileReader&&window.File)for(var a=t.length,l=Array(a),s=0,n=function(e,n){if(!i.options.allowDropFileTypes||-1!=P(i.options.allowDropFileTypes,e.type)){var r=new FileReader;r.onload=Vr(i,(function(){var e=r.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),l[n]=e,++s==a){var t={from:o=Se(i.doc,o),to:o,text:i.doc.splitLines(l.join(i.doc.lineSeparator())),origin:"paste"};ro(i.doc,t),Gi(i.doc,xi(o,bi(t)))}})),r.readAsText(e)}},r=0;r<a;++r)n(t[r],r);else{if(i.state.draggingText&&-1<i.doc.sel.contains(o))return i.state.draggingText(e),void setTimeout((function(){return i.display.input.focus()}),20);try{var c=e.dataTransfer.getData("Text");if(c){var u;if(i.state.draggingText&&!i.state.draggingText.copy&&(u=i.listSelections()),Xi(i.doc,xi(o,o)),u)for(var h=0;h<u.length;++h)so(i.doc,"",u[h].anchor,u[h].head,"drag");i.replaceSelection(c,"around","paste"),i.display.input.focus()}}catch(e){}}}}function No(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ao(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}var Eo=!1;function Oo(){var e;Eo||(tt(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Ao(Io)}),100))})),tt(window,"blur",(function(){return Ao(vr)})),Eo=!0)}function Io(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Do={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ho=0;Ho<10;Ho++)Do[Ho+48]=Do[Ho+96]=String(Ho);for(var Ro=65;Ro<=90;Ro++)Do[Ro]=String.fromCharCode(Ro);for(var Bo=1;Bo<=12;Bo++)Do[Bo+111]=Do[Bo+63235]="F"+Bo;var Wo={};function Fo(e){var t,n,r,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else{if(!/^s(hift)?$/i.test(l))throw new Error("Unrecognized modifier name: "+l);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function zo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=Y(n.split(" "),Fo),o=0;o<i.length;o++){var a=void 0,l=void 0;o==i.length-1?(l=i.join(" "),a=r):(l=i.slice(0,o+1).join(" "),a="...");var s=t[l];if(s){if(s!=a)throw new Error("Inconsistent bindings for "+l)}else t[l]=a}delete e[n]}for(var c in t)e[c]=t[c];return e}function Po(e,t,n,r){var i=(t=Uo(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Po(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var a=Po(e,t.fallthrough[o],n,r);if(a)return a}}}function _o(e){var t="string"==typeof e?e:Do[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function jo(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(y?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(y?t.ctrlKey:t.metaKey)&&"Cmd"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function qo(e,t){if(g&&34==e.keyCode&&e.char)return!1;var n=Do[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),jo(n,e,t))}function Uo(e){return"string"==typeof e?Wo[e]:e}function $o(t,e){for(var n=t.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=e(n[i]);r.length&&ve(o.from,K(r).to)<=0;){var a=r.pop();if(ve(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}Gr(t,(function(){for(var e=r.length-1;0<=e;e--)so(t.doc,"",r[e].from,r[e].to,"+delete");Lr(t)}))}function Go(e,t,n){var r=oe(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Vo(e,t,n){var r=Go(e,t.ch,n);return null==r?null:new ge(t.line,r,n<0?"after":"before")}function Xo(e,t,n,r,i){if(e){var o=Qe(n,t.doc.direction);if(o){var a,l=i<0?K(o):o[0],s=i<0==(1==l.level)?"after":"before";if(0<l.level||"rtl"==t.doc.direction){var c=On(t,n);a=i<0?n.text.length-1:0;var u=In(t,c,a).top;a=ae((function(e){return In(t,c,e).top==u}),i<0==(1==l.level)?l.from:l.to-1,a),"before"==s&&(a=Go(n,a,1))}else a=i<0?l.to:l.from;return new ge(r,a,s)}}return new ge(r,i<0?n.text.length:0,i<0?"before":"after")}Wo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Wo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Wo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Wo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Wo.default=b?Wo.macDefault:Wo.pcDefault;var Ko={selectAll:to,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),q)},killLine:function(n){return $o(n,(function(e){if(e.empty()){var t=se(n.doc,e.head.line).text.length;return e.head.ch==t&&e.head.line<n.lastLine()?{from:e.head,to:ge(e.head.line+1,0)}:{from:e.head,to:ge(e.head.line,t)}}return{from:e.from(),to:e.to()}}))},deleteLine:function(t){return $o(t,(function(e){return{from:ge(e.from().line,0),to:Se(t.doc,ge(e.to().line+1,0))}}))},delLineLeft:function(e){return $o(e,(function(e){return{from:ge(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(n){return $o(n,(function(e){var t=n.charCoords(e.head,"div").top+5;return{from:n.coordsChar({left:0,top:t},"div"),to:e.from()}}))},delWrappedLineRight:function(r){return $o(r,(function(e){var t=r.charCoords(e.head,"div").top+5,n=r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:t},"div");return{from:e.from(),to:n}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ge(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ge(e.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy((function(e){return Yo(t,e.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy((function(e){return Zo(t,e.head)}),{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy((function(e){return function(e,t){var n=se(e.doc,t),r=function(e){for(var t;t=ze(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=fe(r)),Xo(!0,e,n,t,-1)}(t,e.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(n){return n.extendSelectionsBy((function(e){var t=n.cursorCoords(e.head,"div").top+5;return n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:t},"div")}),$)},goLineLeft:function(n){return n.extendSelectionsBy((function(e){var t=n.cursorCoords(e.head,"div").top+5;return n.coordsChar({left:0,top:t},"div")}),$)},goLineLeftSmart:function(r){return r.extendSelectionsBy((function(e){var t=r.cursorCoords(e.head,"div").top+5,n=r.coordsChar({left:0,top:t},"div");return n.ch<r.getLine(n.line).search(/\S/)?Zo(r,e.head):n}),$)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=F(e.getLine(o.line),o.ch,r);t.push(X(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(a){return Gr(a,(function(){for(var e=a.listSelections(),t=[],n=0;n<e.length;n++)if(e[n].empty()){var r=e[n].head,i=se(a.doc,r.line).text;if(i)if(r.ch==i.length&&(r=new ge(r.line,r.ch-1)),0<r.ch)r=new ge(r.line,r.ch+1),a.replaceRange(i.charAt(r.ch-1)+i.charAt(r.ch-2),ge(r.line,r.ch-2),r,"+transpose");else if(r.line>a.doc.first){var o=se(a.doc,r.line-1).text;o&&(r=new ge(r.line,1),a.replaceRange(i.charAt(0)+a.doc.lineSeparator()+o.charAt(o.length-1),ge(r.line-1,o.length-1),r,"+transpose"))}t.push(new vi(r,r))}a.setSelections(t)}))},newlineAndIndent:function(r){return Gr(r,(function(){for(var e=r.listSelections(),t=e.length-1;0<=t;t--)r.replaceRange(r.doc.lineSeparator(),e[t].anchor,e[t].head,"+input");e=r.listSelections();for(var n=0;n<e.length;n++)r.indentLine(e[n].from().line,null,!0);Lr(r)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Yo(e,t){var n=se(e.doc,t),r=je(n);return r!=n&&(t=fe(r)),Xo(!0,e,r,t,1)}function Zo(e,t){var n=Yo(e,t.line),r=se(e.doc,n.line),i=Qe(r,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return ge(n.line,a?0:o,n.sticky)}return n}function Jo(e,t,n){if("string"==typeof t&&!(t=Ko[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=j}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var Qo=new z;function ea(e,t,n,r){var i=e.state.keySeq;if(i){if(_o(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Qo.set(50,(function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())})),ta(e,i+" "+t,n,r))return!0}return ta(e,t,n,r)}function ta(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Po(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Po(t,e.options.extraKeys,n,e)||Po(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&sn(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(ct(n),dr(e)),!!i}function na(t,e){var n=qo(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?ea(t,"Shift-"+n,e,(function(e){return Jo(t,e,!0)}))||ea(t,n,e,(function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return Jo(t,e)})):ea(t,n,e,(function(e){return Jo(t,e)})))}var ra=null;function ia(e){if(this.curOp.focus=I(),!ot(this,e)){w&&k<11&&27==e.keyCode&&(e.returnValue=!1);var t=e.keyCode;this.display.shift=16==t||e.shiftKey;var n=na(this,e);g&&(ra=n?t:null,!n&&88==t&&!St&&(b?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),18!=t||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(T(t,"CodeMirror-crosshair"),rt(document,"keyup",n),rt(document,"mouseover",n))}D(t,"CodeMirror-crosshair"),tt(document,"keyup",n),tt(document,"mouseover",n)}(this)}}function oa(e){16==e.keyCode&&(this.doc.sel.shift=!1),ot(this,e)}function aa(e){if(!(wn(this.display,e)||ot(this,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var t=e.keyCode,n=e.charCode;if(g&&t==ra)return ra=null,void ct(e);if(!g||e.which&&!(e.which<10)||!na(this,e)){var r,i=String.fromCharCode(null==n?t:n);"\b"!=i&&(ea(r=this,"'"+i+"'",e,(function(e){return Jo(r,e,!0)}))||this.display.input.onKeyPress(e))}}}var la,sa,ca=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ua(e){var t=this,n=t.display;if(!(ot(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,wn(n,e))x||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!da(t,e)){var r,i,o,a=ar(t,e),l=pt(e),s=a?(r=a,i=l,o=+new Date,sa&&sa.compare(o,r,i)?(la=sa=null,"triple"):la&&la.compare(o,r,i)?(sa=new ca(o,r,i),la=null,"double"):(la=new ca(o,r,i),sa=null,"single")):"single";window.focus(),1==l&&t.state.selectingText&&t.state.selectingText(e),a&&function(n,e,r,t,i){var o="Click";return"double"==t?o="Double"+o:"triple"==t&&(o="Triple"+o),ea(n,jo(o=(1==e?"Left":2==e?"Middle":"Right")+o,i),i,(function(e){if("string"==typeof e&&(e=Ko[e]),!e)return!1;var t=!1;try{n.isReadOnly()&&(n.state.suppressEdits=!0),t=e(n,r)!=j}finally{n.state.suppressEdits=!1}return t}))}(t,l,a,s,e)||(1==l?a?function(e,t,n,r){w?setTimeout(B(pr,e),0):e.curOp.focus=I();var i,o=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(null==i.unit){var o=d?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=b?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(b?n.altKey:n.ctrlKey)),i}(e,n,r),a=e.doc.sel;e.options.dragDrop&&vt&&!e.isReadOnly()&&"single"==n&&-1<(i=a.contains(t))&&(ve((i=a.ranges[i]).from(),t)<0||0<t.xRel)&&(0<ve(i.to(),t)||t.xRel<0)?function(t,n,r,i){var o=t.display,a=!1,l=Vr(t,(function(e){x&&(o.scroller.draggable=!1),t.state.draggingText=!1,rt(o.wrapper.ownerDocument,"mouseup",l),rt(o.wrapper.ownerDocument,"mousemove",s),rt(o.scroller,"dragstart",c),rt(o.scroller,"drop",l),a||(ct(e),i.addNew||ji(t.doc,r,null,null,i.extend),x||w&&9==k?setTimeout((function(){o.wrapper.ownerDocument.body.focus(),o.input.focus()}),20):o.input.focus())})),s=function(e){a=a||10<=Math.abs(n.clientX-e.clientX)+Math.abs(n.clientY-e.clientY)},c=function(){return a=!0};x&&(o.scroller.draggable=!0),(t.state.draggingText=l).copy=!i.moveOnDrag,o.scroller.dragDrop&&o.scroller.dragDrop(),tt(o.wrapper.ownerDocument,"mouseup",l),tt(o.wrapper.ownerDocument,"mousemove",s),tt(o.scroller,"dragstart",c),tt(o.scroller,"drop",l),mr(t),setTimeout((function(){return o.input.focus()}),20)}(e,r,t,o):function(g,e,v,y){var a=g.display,x=g.doc;ct(e);var b,w,k=x.sel,t=k.ranges;if(y.addNew&&!y.extend?(w=x.sel.contains(v),b=-1<w?t[w]:new vi(v,v)):(b=x.sel.primary(),w=x.sel.primIndex),"rectangle"==y.unit)y.addNew||(b=new vi(v,v)),v=ar(g,e,!0,!0),w=-1;else{var n=ha(g,v,y.unit);b=y.extend?_i(b,n.anchor,n.head,y.extend):n}y.addNew?-1==w?(w=t.length,Vi(x,yi(t.concat([b]),w),{scroll:!1,origin:"*mouse"})):1<t.length&&t[w].empty()&&"char"==y.unit&&!y.extend?(Vi(x,yi(t.slice(0,w).concat(t.slice(w+1)),0),{scroll:!1,origin:"*mouse"}),k=x.sel):Ui(x,w,b,U):(Vi(x,new gi([b],w=0),U),k=x.sel);var S=v;function l(e){if(0!=ve(S,e))if(S=e,"rectangle"==y.unit){for(var t=[],n=g.options.tabSize,r=F(se(x,v.line).text,v.ch,n),i=F(se(x,e.line).text,e.ch,n),o=Math.min(r,i),a=Math.max(r,i),l=Math.min(v.line,e.line),s=Math.min(g.lastLine(),Math.max(v.line,e.line));l<=s;l++){var c=se(x,l).text,u=G(c,o,n);o==a?t.push(new vi(ge(l,u),ge(l,u))):c.length>u&&t.push(new vi(ge(l,u),ge(l,G(c,a,n))))}t.length||t.push(new vi(v,v)),Vi(x,yi(k.ranges.slice(0,w).concat(t),w),{origin:"*mouse",scroll:!1}),g.scrollIntoView(e)}else{var h,f=b,d=ha(g,e,y.unit),p=f.anchor;0<ve(d.anchor,p)?(h=d.head,p=we(f.from(),d.anchor)):(h=d.anchor,p=be(f.to(),d.head));var m=k.ranges.slice(0);m[w]=function(e,t){var n=t.anchor,r=t.head,i=se(e.doc,n.line);if(0==ve(n,r)&&n.sticky==r.sticky)return t;var o=Qe(i);if(!o)return t;var a=Ze(o,n.ch,n.sticky),l=o[a];if(l.from!=n.ch&&l.to!=n.ch)return t;var s,c=a+(l.from==n.ch==(1!=l.level)?0:1);if(0==c||c==o.length)return t;if(r.line!=n.line)s=0<(r.line-n.line)*("ltr"==e.doc.direction?1:-1);else{var u=Ze(o,r.ch,r.sticky),h=u-a||(r.ch-n.ch)*(1==l.level?-1:1);s=u==c-1||u==c?h<0:0<h}var f=o[c+(s?-1:0)],d=s==(1==f.level),p=d?f.from:f.to,m=d?"after":"before";return n.ch==p&&n.sticky==m?t:new vi(new ge(n.line,p,m),r)}(g,new vi(Se(x,p),h)),Vi(x,yi(m,w),U)}}var s=a.wrapper.getBoundingClientRect(),c=0;function r(e){g.state.selectingText=!1,c=1/0,ct(e),a.input.focus(),rt(a.wrapper.ownerDocument,"mousemove",i),rt(a.wrapper.ownerDocument,"mouseup",o),x.history.lastSelOrigin=null}var i=Vr(g,(function(e){0!==e.buttons&&pt(e)?function e(t){var n=++c,r=ar(g,t,!0,"rectangle"==y.unit);if(r)if(0!=ve(r,S)){g.curOp.focus=I(),l(r);var i=br(a,x);(r.line>=i.to||r.line<i.from)&&setTimeout(Vr(g,(function(){c==n&&e(t)})),150)}else{var o=t.clientY<s.top?-20:t.clientY>s.bottom?20:0;o&&setTimeout(Vr(g,(function(){c==n&&(a.scroller.scrollTop+=o,e(t))})),50)}}(e):r(e)})),o=Vr(g,r);g.state.selectingText=o,tt(a.wrapper.ownerDocument,"mousemove",i),tt(a.wrapper.ownerDocument,"mouseup",o)}(e,r,t,o)}(t,a,s,e):dt(e)==n.scroller&&ct(e):2==l?(a&&ji(t.doc,a),setTimeout((function(){return n.input.focus()}),20)):3==l&&(S?pa(t,e):mr(t)))}}function ha(e,t,n){if("char"==n)return new vi(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new vi(ge(t.line,0),Se(e.doc,ge(t.line+1,0)));var r=n(e,t);return new vi(r.from,r.to)}function fa(e,t,n,r){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ct(t);var a=e.display,l=a.lineDiv.getBoundingClientRect();if(o>l.bottom||!lt(e,n))return ht(t);o-=l.top-a.viewOffset;for(var s=0;s<e.options.gutters.length;++s){var c=a.gutters.childNodes[s];if(c&&c.getBoundingClientRect().right>=i)return it(e,n,e,de(e.doc,o),e.options.gutters[s],t),ht(t)}}function da(e,t){return fa(e,t,"gutterClick",!0)}function pa(e,t){wn(e.display,t)||function(e,t){return!!lt(e,"gutterContextMenu")&&fa(e,t,"gutterContextMenu",!1)}(e,t)||ot(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function ma(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),zn(e)}ca.prototype.compare=function(e,t,n){return this.time+400>e&&0==ve(t,this.pos)&&n==this.button};var ga={toString:function(){return"CodeMirror.Init"}},va={},ya={};function xa(e){ci(e),Yr(e),wr(e)}function ba(e,t,n){if(!t!=!(n&&n!=ga)){var r=e.display.dragFunctions,i=t?tt:rt;i(e.display.scroller,"dragstart",r.start),i(e.display.scroller,"dragenter",r.enter),i(e.display.scroller,"dragover",r.over),i(e.display.scroller,"dragleave",r.leave),i(e.display.scroller,"drop",r.drop)}}function wa(e){e.options.lineWrapping?(D(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(T(e.display.wrapper,"CodeMirror-wrap"),Ke(e)),or(e),Yr(e),zn(e),setTimeout((function(){return Rr(e)}),100)}function ka(e,t){var n=this;if(!(this instanceof ka))return new ka(e,t);this.options=t=t?W(t):{},W(va,t,!1),ui(t);var r=t.value;"string"==typeof r&&(r=new Lo(r,t.mode,null,t.lineSeparator,t.direction)),this.doc=r;var i=new ka.inputStyles[t.inputStyle](this),o=this.display=new le(e,r,i);for(var a in ci(o.wrapper.CodeMirror=this),ma(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Fr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new z,keySeq:null,specialChars:null},t.autofocus&&!f&&o.input.focus(),w&&k<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(i){var o=i.display;tt(o.scroller,"mousedown",Vr(i,ua)),tt(o.scroller,"dblclick",w&&k<11?Vr(i,(function(e){if(!ot(i,e)){var t=ar(i,e);if(t&&!da(i,e)&&!wn(i.display,e)){ct(e);var n=i.findWordAt(t);ji(i.doc,n.anchor,n.head)}}})):function(e){return ot(i,e)||ct(e)}),S||tt(o.scroller,"contextmenu",(function(e){return pa(i,e)}));var n,r={end:0};function a(){o.activeTouch&&(n=setTimeout((function(){return o.activeTouch=null}),1e3),(r=o.activeTouch).end=+new Date)}function l(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return 400<n*n+r*r}tt(o.scroller,"touchstart",(function(e){if(!ot(i,e)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(e)&&!da(i,e)){o.input.ensurePolled(),clearTimeout(n);var t=+new Date;o.activeTouch={start:t,moved:!1,prev:t-r.end<=300?r:null},1==e.touches.length&&(o.activeTouch.left=e.touches[0].pageX,o.activeTouch.top=e.touches[0].pageY)}})),tt(o.scroller,"touchmove",(function(){o.activeTouch&&(o.activeTouch.moved=!0)})),tt(o.scroller,"touchend",(function(e){var t=o.activeTouch;if(t&&!wn(o,e)&&null!=t.left&&!t.moved&&new Date-t.start<300){var n,r=i.coordsChar(o.activeTouch,"page");n=!t.prev||l(t,t.prev)?new vi(r,r):!t.prev.prev||l(t,t.prev.prev)?i.findWordAt(r):new vi(ge(r.line,0),Se(i.doc,ge(r.line+1,0))),i.setSelection(n.anchor,n.head),i.focus(),ct(e)}a()})),tt(o.scroller,"touchcancel",a),tt(o.scroller,"scroll",(function(){o.scroller.clientHeight&&(Ar(i,o.scroller.scrollTop),Or(i,o.scroller.scrollLeft,!0),it(i,"scroll",i))})),tt(o.scroller,"mousewheel",(function(e){return mi(i,e)})),tt(o.scroller,"DOMMouseScroll",(function(e){return mi(i,e)})),tt(o.wrapper,"scroll",(function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0})),o.dragFunctions={enter:function(e){ot(i,e)||ft(e)},over:function(e){ot(i,e)||(function(e,t){var n=ar(e,t);if(n){var r=document.createDocumentFragment();ur(e,n,r),e.display.dragCursor||(e.display.dragCursor=E("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),N(e.display.dragCursor,r)}}(i,e),ft(e))},start:function(e){return function(e,t){if(w&&(!e.state.draggingText||+new Date-To<100))ft(t);else if(!ot(e,t)&&!wn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!s)){var n=E("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",g&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),g&&n.parentNode.removeChild(n)}}(i,e)},drop:Vr(i,Mo),leave:function(e){ot(i,e)||No(i)}};var e=o.input.getField();tt(e,"keyup",(function(e){return oa.call(i,e)})),tt(e,"keydown",Vr(i,ia)),tt(e,"keypress",Vr(i,aa)),tt(e,"focus",(function(e){return gr(i,e)})),tt(e,"blur",(function(e){return vr(i,e)}))}(this),Oo(),Pr(this),this.curOp.forceUpdate=!0,Ai(this,r),t.autofocus&&!f||this.hasFocus()?setTimeout(B(gr,this),20):vr(this),ya)ya.hasOwnProperty(a)&&ya[a](n,t[a],ga);kr(this),t.finishInit&&t.finishInit(this);for(var l=0;l<Sa.length;++l)Sa[l](n);_r(this),x&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}ka.defaults=va,ka.optionHandlers=ya;var Sa=[];function Ca(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=zt(e,t).state:n="prev");var a=e.options.tabSize,l=se(o,t),s=F(l.text,null,a);l.stateAfter&&(l.stateAfter=null);var c,u=l.text.match(/^\s*/)[0];if(r||/\S/.test(l.text)){if("smart"==n&&((c=o.mode.indent(i,l.text.slice(u.length),l.text))==j||150<c)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?F(se(o,t-1).text,null,a):0:"add"==n?c=s+e.options.indentUnit:"subtract"==n?c=s-e.options.indentUnit:"number"==typeof n&&(c=s+n),c=Math.max(0,c);var h="",f=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/a);d;--d)f+=a,h+="\t";if(f<c&&(h+=X(c-f)),h!=u)return so(o,h,ge(t,0),ge(t,u.length),"+input"),!(l.stateAfter=null);for(var p=0;p<o.sel.ranges.length;p++){var m=o.sel.ranges[p];if(m.head.line==t&&m.head.ch<u.length){var g=ge(t,u.length);Ui(o,p,new vi(g,g));break}}}ka.defineInitHook=function(e){return Sa.push(e)};var La=null;function Ta(e){La=e}function Ma(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var a,l=e.state.pasteIncoming||"paste"==i,s=wt(t),c=null;if(l&&1<r.ranges.length)if(La&&La.text.join("\n")==t){if(r.ranges.length%La.text.length==0){c=[];for(var u=0;u<La.text.length;u++)c.push(o.splitLines(La.text[u]))}}else s.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=Y(s,(function(e){return[e]})));for(var h=r.ranges.length-1;0<=h;h--){var f=r.ranges[h],d=f.from(),p=f.to();f.empty()&&(n&&0<n?d=ge(d.line,d.ch-n):e.state.overwrite&&!l?p=ge(p.line,Math.min(se(o,p.line).text.length,p.ch+K(s).length)):La&&La.lineWise&&La.text.join("\n")==t&&(d=p=ge(d.line,0))),a=e.curOp.updateInput;var m={from:d,to:p,text:c?c[h%c.length]:s,origin:i||(l?"paste":e.state.cutIncoming?"cut":"+input")};ro(e.doc,m),sn(e,"inputRead",e,m)}t&&!l&&Aa(e,t),Lr(e),e.curOp.updateInput=a,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Na(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Gr(t,(function(){return Ma(t,n,0,null,"paste")})),!0}function Aa(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;0<=r;r--){var i=n.ranges[r];if(!(100<i.head.ch||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),a=!1;if(o.electricChars){for(var l=0;l<o.electricChars.length;l++)if(-1<t.indexOf(o.electricChars.charAt(l))){a=Ca(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(se(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Ca(e,i.head.line,"smart"));a&&sn(e,"electricInput",e,i.head.line)}}}function Ea(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:ge(i,0),head:ge(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Oa(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Ia(){var e=E("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=E("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return x?e.style.width="1000px":e.setAttribute("wrap","off"),u&&(e.style.border="1px solid black"),Oa(e),t}function Da(r,i,o,e,a){var t=i,n=o,l=se(r,i.line);function s(e){var t,n;if(null==(t=a?function(t,n,l,e){var s=Qe(n,t.doc.direction);if(!s)return Vo(n,l,e);l.ch>=n.text.length?(l.ch=n.text.length,l.sticky="before"):l.ch<=0&&(l.ch=0,l.sticky="after");var r=Ze(s,l.ch,l.sticky),i=s[r];if("ltr"==t.doc.direction&&i.level%2==0&&(0<e?i.to>l.ch:i.from<l.ch))return Vo(n,l,e);var o,c=function(e,t){return Go(n,e instanceof ge?e.ch:e,t)},a=function(e){return t.options.lineWrapping?(o=o||On(t,n),Zn(t,n,o,e)):{begin:0,end:n.text.length}},u=a("before"==l.sticky?c(l,-1):l.ch);if("rtl"==t.doc.direction||1==i.level){var h=1==i.level==e<0,f=c(l,h?1:-1);if(null!=f&&(h?f<=i.to&&f<=u.end:f>=i.from&&f>=u.begin)){var d=h?"before":"after";return new ge(l.line,f,d)}}var p=function(e,t,n){for(var r=function(e,t){return t?new ge(l.line,c(e,1),"before"):new ge(l.line,e,"after")};0<=e&&e<s.length;e+=t){var i=s[e],o=0<t==(1!=i.level),a=o?n.begin:c(n.end,-1);if(i.from<=a&&a<i.to)return r(a,o);if(a=o?i.from:c(i.to,-1),n.begin<=a&&a<n.end)return r(a,o)}},m=p(r+e,e,u);if(m)return m;var g=0<e?u.end:c(u.begin,-1);return null==g||0<e&&g==n.text.length||!(m=p(0<e?0:s.length-1,e,a(g)))?null:m}(r.cm,l,i,o):Vo(l,i,o))){if(e||(n=i.line+o)<r.first||n>=r.first+r.size||(i=new ge(n,i.ch,i.sticky),!(l=se(r,n))))return!1;i=Xo(a,r.cm,l,i.line,o)}else i=t;return!0}if("char"==e)s();else if("column"==e)s(!0);else if("word"==e||"group"==e)for(var c=null,u="group"==e,h=r.cm&&r.cm.getHelper(i,"wordChars"),f=!0;!(o<0)||s(!f);f=!1){var d=l.text.charAt(i.ch)||"\n",p=te(d,h)?"w":u&&"\n"==d?"n":!u||/\s/.test(d)?null:"p";if(!u||f||p||(p="s"),c&&c!=p){o<0&&(o=1,s(),i.sticky="after");break}if(p&&(c=p),0<o&&!s(!f))break}var m=Qi(r,i,t,n,!0);return ye(t,m)&&(m.hitSide=!0),m}function Ha(e,t,n,r){var i,o,a=e.doc,l=t.left;if("page"==r){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(s-.5*er(e.display),3);i=(0<n?t.bottom:t.top)+n*c}else"line"==r&&(i=0<n?t.bottom+3:t.top-3);for(;(o=Kn(e,l,i)).outside;){if(n<0?i<=0:i>=a.height){o.hitSide=!0;break}i+=5*n}return o}var Ra=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new z,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ba(e,t){var n=En(e,t.line);if(!n||n.hidden)return null;var r=se(e.doc,t.line),i=Nn(n,r,t.line),o=Qe(r,e.doc.direction),a="left";o&&(a=Ze(o,t.ch)%2?"right":"left");var l=Rn(i.map,t.ch,a);return l.offset="right"==l.collapse?l.end:l.start,l}function Wa(e,t){return t&&(e.bad=!0),e}function Fa(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return Wa(e.clipPos(ge(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return za(o,t,n)}}function za(c,e,t){var n=c.text.firstChild,r=!1;if(!e||!O(n,e))return Wa(ge(fe(c.line),0),!0);if(e==n&&(r=!0,e=n.childNodes[t],t=0,!e)){var i=c.rest?K(c.rest):c.line;return Wa(ge(fe(i),i.text.length),r)}var o=3==e.nodeType?e:null,a=e;for(o||1!=e.childNodes.length||3!=e.firstChild.nodeType||(o=e.firstChild,t&&(t=o.nodeValue.length));a.parentNode!=n;)a=a.parentNode;var u=c.measure,h=u.maps;function l(e,t,n){for(var r=-1;r<(h?h.length:0);r++)for(var i=r<0?u.map:h[r],o=0;o<i.length;o+=3){var a=i[o+2];if(a==e||a==t){var l=fe(r<0?c.line:c.rest[r]),s=i[o]+n;return(n<0||a!=e)&&(s=i[o+(n?1:0)]),ge(l,s)}}}var s=l(o,a,t);if(s)return Wa(s,r);for(var f=a.nextSibling,d=o?o.nodeValue.length-t:0;f;f=f.nextSibling){if(s=l(f,f.firstChild,0))return Wa(ge(s.line,s.ch-d),r);d+=f.textContent.length}for(var p=a.previousSibling,m=t;p;p=p.previousSibling){if(s=l(p,p.firstChild,-1))return Wa(ge(s.line,s.ch+m),r);m+=p.textContent.length}}Ra.prototype.init=function(e){var t=this,a=this,l=a.cm,s=a.div=e.lineDiv;function n(e){if(!ot(l,e)){if(l.somethingSelected())Ta({lineWise:!1,text:l.getSelections()}),"cut"==e.type&&l.replaceSelection("",null,"cut");else{if(!l.options.lineWiseCopyCut)return;var t=Ea(l);Ta({lineWise:!0,text:t.text}),"cut"==e.type&&l.operation((function(){l.setSelections(t.ranges,0,q),l.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var n=La.text.join("\n");if(e.clipboardData.setData("Text",n),e.clipboardData.getData("Text")==n)return void e.preventDefault()}var r=Ia(),i=r.firstChild;l.display.lineSpace.insertBefore(r,l.display.lineSpace.firstChild),i.value=La.text.join("\n");var o=document.activeElement;R(i),setTimeout((function(){l.display.lineSpace.removeChild(r),o.focus(),o==s&&a.showPrimarySelection()}),50)}}Oa(s,l.options.spellcheck),tt(s,"paste",(function(e){ot(l,e)||Na(e,l)||k<=11&&setTimeout(Vr(l,(function(){return t.updateFromDOM()})),20)})),tt(s,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),tt(s,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),tt(s,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),tt(s,"touchstart",(function(){return a.forceCompositionEnd()})),tt(s,"input",(function(){t.composing||t.readFromDOMSoon()})),tt(s,"copy",n),tt(s,"cut",n)},Ra.prototype.prepareSelection=function(){var e=cr(this.cm,!1);return e.focus=this.cm.state.focused,e},Ra.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ra.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ra.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),r=n.from(),i=n.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||i.line<t.display.viewFrom)e.removeAllRanges();else{var o=Fa(t,e.anchorNode,e.anchorOffset),a=Fa(t,e.focusNode,e.focusOffset);if(!o||o.bad||!a||a.bad||0!=ve(we(o,a),r)||0!=ve(be(o,a),i)){var l=t.display.view,s=r.line>=t.display.viewFrom&&Ba(t,r)||{node:l[0].measure.map[2],offset:0},c=i.line<t.display.viewTo&&Ba(t,i);if(!c){var u=l[l.length-1].measure,h=u.maps?u.maps[u.maps.length-1]:u.map;c={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(s&&c){var f,d=e.rangeCount&&e.getRangeAt(0);try{f=L(s.node,s.offset,c.offset,c.node)}catch(e){}f&&(!m&&t.state.focused?(e.collapse(s.node,s.offset),f.collapsed||(e.removeAllRanges(),e.addRange(f))):(e.removeAllRanges(),e.addRange(f)),d&&null==e.anchorNode?e.addRange(d):m&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Ra.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Ra.prototype.showMultipleSelections=function(e){N(this.cm.display.cursorDiv,e.cursors),N(this.cm.display.selectionDiv,e.selection)},Ra.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ra.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return O(this.div,t)},Ra.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ra.prototype.blur=function(){this.div.blur()},Ra.prototype.getField=function(){return this.div},Ra.prototype.supportsTouch=function(){return!0},Ra.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():Gr(this.cm,(function(){return t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}))},Ra.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ra.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(h&&a&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Fa(t,e.anchorNode,e.anchorOffset),r=Fa(t,e.focusNode,e.focusOffset);n&&r&&Gr(t,(function(){Vi(t.doc,xi(n,r),q),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))}}},Ra.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),a=o.from(),l=o.to();if(0==a.ch&&a.line>r.firstLine()&&(a=ge(a.line-1,se(r.doc,a.line-1).length)),l.ch==se(r.doc,l.line).text.length&&l.line<r.lastLine()&&(l=ge(l.line+1,0)),a.line<i.viewFrom||l.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(e=lr(r,a.line))?(t=fe(i.view[0].line),n=i.view[0].node):(t=fe(i.view[e].line),n=i.view[e-1].node.nextSibling);var s,c,u=lr(r,l.line);if(u==i.view.length-1?(s=i.viewTo-1,c=i.lineDiv.lastChild):(s=fe(i.view[u+1].line)-1,c=i.view[u+1].node.previousSibling),!n)return!1;for(var h=r.doc.splitLines(function(s,e,t,c,u){var n="",h=!1,f=s.doc.lineSeparator(),d=!1;function p(){h&&(n+=f,d&&(n+=f),h=d=!1)}function m(e){e&&(p(),n+=e)}function g(e){if(1==e.nodeType){var t=e.getAttribute("cm-text");if(t)return void m(t);var n,r=e.getAttribute("cm-marker");if(r){var i=s.findMarks(ge(c,0),ge(u+1,0),(l=+r,function(e){return e.id==l}));return void(i.length&&(n=i[0].find(0))&&m(ce(s.doc,n.from,n.to).join(f)))}if("false"==e.getAttribute("contenteditable"))return;var o=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;o&&p();for(var a=0;a<e.childNodes.length;a++)g(e.childNodes[a]);/^(pre|p)$/i.test(e.nodeName)&&(d=!0),o&&(h=!0)}else 3==e.nodeType&&m(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var l}for(;g(e),e!=t;)e=e.nextSibling,d=!1;return n}(r,n,c,t,s)),f=ce(r.doc,ge(t,0),ge(s,se(r.doc,s).text.length));1<h.length&&1<f.length;)if(K(h)==K(f))h.pop(),f.pop(),s--;else{if(h[0]!=f[0])break;h.shift(),f.shift(),t++}for(var d=0,p=0,m=h[0],g=f[0],v=Math.min(m.length,g.length);d<v&&m.charCodeAt(d)==g.charCodeAt(d);)++d;for(var y=K(h),x=K(f),b=Math.min(y.length-(1==h.length?d:0),x.length-(1==f.length?d:0));p<b&&y.charCodeAt(y.length-p-1)==x.charCodeAt(x.length-p-1);)++p;if(1==h.length&&1==f.length&&t==a.line)for(;d&&d>a.ch&&y.charCodeAt(y.length-p-1)==x.charCodeAt(x.length-p-1);)d--,p++;h[h.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),h[0]=h[0].slice(d).replace(/\u200b+$/,"");var w=ge(t,d),k=ge(s,f.length?K(f).length-p:0);return 1<h.length||h[0]||ve(w,k)?(so(r.doc,h,w,k,"+input"),!0):void 0},Ra.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ra.prototype.reset=function(){this.forceCompositionEnd()},Ra.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ra.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Ra.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Gr(this.cm,(function(){return Yr(e.cm)}))},Ra.prototype.setUneditable=function(e){e.contentEditable="false"},Ra.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Vr(this.cm,Ma)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Ra.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Ra.prototype.onContextMenu=function(){},Ra.prototype.resetPosition=function(){},Ra.prototype.needsContentAttribute=!0;var Pa,_a,ja,qa=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new z,this.hasSelection=!1,this.composing=null};qa.prototype.init=function(t){var e=this,n=this,r=this.cm;this.createField(t);var i=this.textarea;function o(e){if(!ot(r,e)){if(r.somethingSelected())Ta({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Ea(r);Ta({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,q):(n.prevInput="",i.value=t.text.join("\n"),R(i))}"cut"==e.type&&(r.state.cutIncoming=!0)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),u&&(i.style.width="0px"),tt(i,"input",(function(){w&&9<=k&&e.hasSelection&&(e.hasSelection=null),n.poll()})),tt(i,"paste",(function(e){ot(r,e)||Na(e,r)||(r.state.pasteIncoming=!0,n.fastPoll())})),tt(i,"cut",o),tt(i,"copy",o),tt(t.scroller,"paste",(function(e){wn(t,e)||ot(r,e)||(r.state.pasteIncoming=!0,n.focus())})),tt(t.lineSpace,"selectstart",(function(e){wn(t,e)||ct(e)})),tt(i,"compositionstart",(function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}})),tt(i,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},qa.prototype.createField=function(e){this.wrapper=Ia(),this.textarea=this.wrapper.firstChild},qa.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=cr(e);if(e.options.moveInputWithCursor){var i=Gn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},qa.prototype.showSelection=function(e){var t=this.cm.display;N(t.cursorDiv,e.cursors),N(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},qa.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&R(this.textarea),w&&9<=k&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",w&&9<=k&&(this.hasSelection=null))}},qa.prototype.getField=function(){return this.textarea},qa.prototype.supportsTouch=function(){return!1},qa.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!f||I()!=this.textarea))try{this.textarea.focus()}catch(e){}},qa.prototype.blur=function(){this.textarea.blur()},qa.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},qa.prototype.receivedFocus=function(){this.slowPoll()},qa.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},qa.prototype.fastPoll=function(){var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,(function e(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}))},qa.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||kt(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(w&&9<=k&&this.hasSelection===i||b&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var a=0,l=Math.min(r.length,i.length);a<l&&r.charCodeAt(a)==i.charCodeAt(a);)++a;return Gr(t,(function(){Ma(t,i.slice(a),r.length-a,null,e.composing?"*compose":null),1e3<i.length||-1<i.indexOf("\n")?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},qa.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},qa.prototype.onKeyPress=function(){w&&9<=k&&(this.hasSelection=null),this.fastPoll()},qa.prototype.onContextMenu=function(e){var n=this,r=n.cm,i=r.display,o=n.textarea,t=ar(r,e),a=i.scroller.scrollTop;if(t&&!g){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(t)&&Vr(r,Vi)(r.doc,xi(t),q);var l=o.style.cssText,s=n.wrapper.style.cssText;n.wrapper.style.cssText="position: absolute";var c,u=n.wrapper.getBoundingClientRect();if(o.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-u.top-5)+"px; left: "+(e.clientX-u.left-5)+"px;\n      z-index: 1000; background: "+(w?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",x&&(c=window.scrollY),i.input.focus(),x&&window.scrollTo(null,c),i.input.reset(),r.somethingSelected()||(o.value=n.prevInput=" "),n.contextMenuPending=!0,i.selForContextMenu=r.doc.sel,clearTimeout(i.detectingSelectAll),w&&9<=k&&f(),S){ft(e);var h=function(){rt(window,"mouseup",h),setTimeout(d,20)};tt(window,"mouseup",h)}else setTimeout(d,50)}function f(){if(null!=o.selectionStart){var e=r.somethingSelected(),t="​"+(e?o.value:"");o.value="⇚",o.value=t,n.prevInput=e?"":"​",o.selectionStart=1,o.selectionEnd=t.length,i.selForContextMenu=r.doc.sel}}function d(){if(n.contextMenuPending=!1,n.wrapper.style.cssText=s,o.style.cssText=l,w&&k<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=a),null!=o.selectionStart){(!w||w&&k<9)&&f();var e=0,t=function(){i.selForContextMenu==r.doc.sel&&0==o.selectionStart&&0<o.selectionEnd&&"​"==n.prevInput?Vr(r,to)(r):e++<10?i.detectingSelectAll=setTimeout(t,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(t,200)}}},qa.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},qa.prototype.setUneditable=function(){},qa.prototype.needsContentAttribute=!1,function(i){var o=i.optionHandlers;function e(e,t,r,n){i.defaults[e]=t,r&&(o[e]=n?function(e,t,n){n!=ga&&r(e,t,n)}:r)}i.defineOption=e,i.Init=ga,e("value","",(function(e,t){return e.setValue(t)}),!0),e("mode",null,(function(e,t){e.doc.modeOption=t,Ci(e)}),!0),e("indentUnit",2,Ci,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,(function(e){Li(e),zn(e),Yr(e)}),!0),e("lineSeparator",null,(function(e,r){if(e.doc.lineSep=r){var i=[],o=e.doc.first;e.doc.iter((function(e){for(var t=0;;){var n=e.text.indexOf(r,t);if(-1==n)break;t=n+r.length,i.push(ge(o,n))}o++}));for(var t=i.length-1;0<=t;t--)so(e.doc,r,i[t],ge(i[t].line,i[t].ch+r.length))}})),e("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=ga&&e.refresh()})),e("specialCharPlaceholder",Jt,(function(e){return e.refresh()}),!0),e("electricChars",!0),e("inputStyle",f?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),e("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),e("rtlMoveVisually",!p),e("wholeLineUpdateBefore",!0),e("theme","default",(function(e){ma(e),xa(e)}),!0),e("keyMap","default",(function(e,t,n){var r=Uo(t),i=n!=ga&&Uo(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)})),e("extraKeys",null),e("configureMouse",null),e("lineWrapping",!1,wa,!0),e("gutters",[],(function(e){ui(e.options),xa(e)}),!0),e("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?rr(e.display)+"px":"0",e.refresh()}),!0),e("coverGutterNextToScrollbar",!1,(function(e){return Rr(e)}),!0),e("scrollbarStyle","native",(function(e){Fr(e),Rr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),e("lineNumbers",!1,(function(e){ui(e.options),xa(e)}),!0),e("firstLineNumber",1,xa,!0),e("lineNumberFormatter",(function(e){return e}),xa,!0),e("showCursorWhenSelecting",!1,sr,!0),e("resetSelectionOnContextMenu",!0),e("lineWiseCopyCut",!0),e("pasteLinesPerSelection",!0),e("readOnly",!1,(function(e,t){"nocursor"==t&&(vr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),e("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),e("dragDrop",!0,ba),e("allowDropFileTypes",null),e("cursorBlinkRate",530),e("cursorScrollMargin",0),e("cursorHeight",1,sr,!0),e("singleCursorHeightPerLine",!0,sr,!0),e("workTime",100),e("workDelay",100),e("flattenSpans",!0,Li,!0),e("addModeClass",!1,Li,!0),e("pollInterval",100),e("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),e("historyEventDelay",1250),e("viewportMargin",10,(function(e){return e.refresh()}),!0),e("maxHighlightLength",1e4,Li,!0),e("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),e("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),e("autofocus",null),e("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0)}(ka),_a=(Pa=ka).optionHandlers,ja=Pa.helpers={},Pa.prototype={constructor:Pa,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var n=this.options,r=n[e];n[e]==t&&"mode"!=e||(n[e]=t,_a.hasOwnProperty(e)&&Vr(this,_a[e])(this,t,r),it(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Uo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Xr((function(e,t){var n=e.token?e:Pa.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:n,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},(function(e){return e.priority})),this.state.modeGen++,Yr(this)})),removeOverlay:Xr((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void Yr(this)}})),indentLine:Xr((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),pe(this.doc,e)&&Ca(this,e,t,n)})),indentSelection:Xr((function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(Ca(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Lr(this));else{var o=i.from(),a=i.to(),l=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var s=l;s<n;++s)Ca(this,s,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&0<c[r].from().ch&&Ui(this.doc,r,new vi(o,c[r].to()),q)}}})),getTokenAt:function(e,t){return Ut(this,e,t)},getLineTokens:function(e,t){return Ut(this,ge(e),t,!0)},getTokenTypeAt:function(e){e=Se(this.doc,e);var t,n=Ft(this,se(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var l=t?t.indexOf("overlay "):-1;return l<0?t:0==l?null:t.slice(0,l-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?Pa.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!ja.hasOwnProperty(t))return n;var r=ja[t],i=this.getModeAt(e);if("string"==typeof i[t])r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var a=r[i[t][o]];a&&n.push(a)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(var l=0;l<r._global.length;l++){var s=r._global[l];s.pred(i,this)&&-1==P(n,s.val)&&n.push(s.val)}return n},getStateAfter:function(e,t){var n=this.doc;return zt(this,(e=ke(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Gn(this,null==e?n.head:"object"==typeof e?Se(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return $n(this,Se(this.doc,e),t||"page")},coordsChar:function(e,t){return Kn(this,(e=Un(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Un(this,{top:e,left:0},t||"page").top,de(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:o<e&&(e=o,i=!0),r=se(this.doc,e)}else r=e;return qn(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Ve(r):0)},defaultTextHeight:function(){return er(this.display)},defaultCharWidth:function(){return tr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o,l,s=this.display,c=(e=Gn(this,Se(this.doc,e))).bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==r)c=e.top;else if("above"==r||"near"==r){var h=Math.max(s.wrapper.clientHeight,this.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>h)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=h&&(c=e.bottom),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==i?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&(null!=(l=Sr(o=this,{left:u,top:c,right:u+t.offsetWidth,bottom:c+t.offsetHeight})).scrollTop&&Ar(o,l.scrollTop),null!=l.scrollLeft&&Or(o,l.scrollLeft))},triggerOnKeyDown:Xr(ia),triggerOnKeyPress:Xr(aa),triggerOnKeyUp:oa,triggerOnMouseDown:Xr(ua),execCommand:function(e){if(Ko.hasOwnProperty(e))return Ko[e].call(null,this)},triggerElectric:Xr((function(e){Aa(this,e)})),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=Se(this.doc,e),a=0;a<t&&!(o=Da(this.doc,o,i,n,r)).hitSide;++a);return o},moveH:Xr((function(t,n){var r=this;this.extendSelectionsBy((function(e){return r.display.shift||r.doc.extend||e.empty()?Da(r.doc,e.head,t,n,r.options.rtlMoveVisually):t<0?e.from():e.to()}),$)})),deleteH:Xr((function(n,r){var e=this.doc.sel,i=this.doc;e.somethingSelected()?i.replaceSelection("",null,"+delete"):$o(this,(function(e){var t=Da(i,e.head,n,r,!1);return n<0?{from:t,to:e.head}:{from:e.head,to:t}}))})),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var a=Se(this.doc,e),l=0;l<t;++l){var s=Gn(this,a,"div");if(null==o?o=s.left:s.left=o,(a=Ha(this,s,i,n)).hitSide)break}return a},moveV:Xr((function(r,i){var o=this,a=this.doc,l=[],s=!this.display.shift&&!a.extend&&a.sel.somethingSelected();if(a.extendSelectionsBy((function(e){if(s)return r<0?e.from():e.to();var t=Gn(o,e.head,"div");null!=e.goalColumn&&(t.left=e.goalColumn),l.push(t.left);var n=Ha(o,t,r,i);return"page"==i&&e==a.sel.primary()&&Cr(o,$n(o,n,"div").top-t.top),n}),$),l.length)for(var e=0;e<a.sel.ranges.length;e++)a.sel.ranges[e].goalColumn=l[e]})),findWordAt:function(e){var t=se(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!n?++r:--n;for(var o=t.charAt(n),a=te(o,i)?function(e){return te(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!te(e)};0<n&&a(t.charAt(n-1));)--n;for(;r<t.length&&a(t.charAt(r));)++r}return new vi(ge(e.line,n),ge(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?D(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite"),it(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==I()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Xr((function(e,t){Tr(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ln(this)-this.display.barHeight,width:e.scrollWidth-Ln(this)-this.display.barWidth,clientHeight:Mn(this),clientWidth:Tn(this)}},scrollIntoView:Xr((function(e,t){var n,r;null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ge(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?(r=e,Mr(n=this),n.curOp.scrollToPos=r):Nr(this,e.from,e.to,e.margin)})),setSize:Xr((function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&Fn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Zr(n,i,"widget");break}++i})),this.curOp.forceUpdate=!0,it(this,"refresh",this)})),operation:function(e){return Gr(this,e)},startOperation:function(){return Pr(this)},endOperation:function(){return _r(this)},refresh:Xr((function(){var e=this.display.cachedTextHeight;Yr(this),this.curOp.forceUpdate=!0,zn(this),Tr(this,this.doc.scrollLeft,this.doc.scrollTop),li(this),(null==e||.5<Math.abs(e-er(this.display)))&&or(this),it(this,"refresh",this)})),swapDoc:Xr((function(e){var t=this.doc;return t.cm=null,Ai(this,e),zn(this),this.display.input.reset(),Tr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,sn(this,"swapDoc",this,t),t})),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},st(Pa),Pa.registerHelper=function(e,t,n){ja.hasOwnProperty(e)||(ja[e]=Pa[e]={_global:[]}),ja[e][t]=n},Pa.registerGlobalHelper=function(e,t,n,r){Pa.registerHelper(e,t,r),ja[e]._global.push({pred:n,val:r})};var Ua,$a="iter insert remove copy getEditor constructor".split(" ");for(var Ga in Lo.prototype)Lo.prototype.hasOwnProperty(Ga)&&P($a,Ga)<0&&(ka.prototype[Ga]=function(e){return function(){return e.apply(this.doc,arguments)}}(Lo.prototype[Ga]));return st(Lo),ka.inputStyles={textarea:qa,contenteditable:Ra},ka.defineMode=function(e){ka.defaults.mode||"null"==e||(ka.defaults.mode=e),function(e,t){2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Lt[e]=t}.apply(this,arguments)},ka.defineMIME=function(e,t){Tt[e]=t},ka.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),ka.defineMIME("text/plain","null"),ka.defineExtension=function(e,t){ka.prototype[e]=t},ka.defineDocExtension=function(e,t){Lo.prototype[e]=t},ka.fromTextArea=function(t,e){if((e=e?W(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var n=I();e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function r(){t.value=l.getValue()}var i;if(t.form&&(tt(t.form,"submit",r),!e.leaveSubmitMethodAlone)){var o=t.form;i=o.submit;try{var a=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=a}}catch(e){}}e.finishInit=function(e){e.save=r,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,r(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(rt(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=i))}},t.style.display="none";var l=ka((function(e){return t.parentNode.insertBefore(e,t.nextSibling)}),e);return l},(Ua=ka).off=rt,Ua.on=tt,Ua.wheelEventPixels=pi,Ua.Doc=Lo,Ua.splitLines=wt,Ua.countColumn=F,Ua.findColumn=G,Ua.isWordChar=ee,Ua.Pass=j,Ua.signal=it,Ua.Line=Vt,Ua.changeEnd=bi,Ua.scrollbarModel=Wr,Ua.Pos=ge,Ua.cmpPos=ve,Ua.modes=Lt,Ua.mimeModes=Tt,Ua.resolveMode=Mt,Ua.getMode=Nt,Ua.modeExtensions=At,Ua.extendMode=Et,Ua.copyState=Ot,Ua.startState=Dt,Ua.innerMode=It,Ua.commands=Ko,Ua.keyMap=Wo,Ua.keyName=qo,Ua.isModifierKey=_o,Ua.lookupKey=Po,Ua.normalizeKeyMap=zo,Ua.StringStream=Ht,Ua.SharedTextMarker=wo,Ua.TextMarker=xo,Ua.LineWidget=go,Ua.e_preventDefault=ct,Ua.e_stopPropagation=ut,Ua.e_stop=ft,Ua.addClass=D,Ua.contains=O,Ua.rmClass=T,Ua.keyNames=Do,ka.version="5.39.0",ka},"object"==typeof n&&void 0!==t?t.exports=i():r.CodeMirror=i()},{}],11:[function(e,t,n){var r;r=function(a){"use strict";var l=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i;a.defineMode("gfm",(function(e,i){var o=0,t={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,t){if(t.combineTokens=null,t.codeBlock)return e.match(/^```+/)?t.codeBlock=!1:e.skipToEnd(),null;if(e.sol()&&(t.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),t.codeBlock=!0,null;if("`"===e.peek()){e.next();var n=e.pos;e.eatWhile("`");var r=1+e.pos-n;return t.code?r===o&&(t.code=!1):(o=r,t.code=!0),null}if(t.code)return e.next(),null;if(e.eatSpace())return t.ateSpace=!0,null;if((e.sol()||t.ateSpace)&&(t.ateSpace=!1)!==i.gitHubSpice){if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return t.combineTokens=!0,"link";if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return t.combineTokens=!0,"link"}return e.match(l)&&"]("!=e.string.slice(e.start-2,e.start)&&(0==e.start||/\W/.test(e.string.charAt(e.start-1)))?(t.combineTokens=!0,"link"):(e.next(),null)},blankLine:function(e){return e.code=!1,null}},n={taskLists:!0,strikethrough:!0,emoji:!0};for(var r in i)n[r]=i[r];return n.name="markdown",a.overlayMode(a.getMode(e,n),t)}),"markdown"),a.defineMIME("text/x-gfm","gfm")},"object"==typeof n&&"object"==typeof t?r(e("../../lib/codemirror"),e("../markdown/markdown"),e("../../addon/mode/overlay")):r(CodeMirror)},{"../../addon/mode/overlay":8,"../../lib/codemirror":10,"../markdown/markdown":12}],12:[function(e,t,n){var r;r=function(R){"use strict";R.defineMode("markdown",(function(p,w){var k=R.getMode(p,"text/html"),i="null"==k.name;void 0===w.highlightFormatting&&(w.highlightFormatting=!1),void 0===w.maxBlockquoteDepth&&(w.maxBlockquoteDepth=0),void 0===w.taskLists&&(w.taskLists=!1),void 0===w.strikethrough&&(w.strikethrough=!1),void 0===w.emoji&&(w.emoji=!1),void 0===w.fencedCodeBlockHighlighting&&(w.fencedCodeBlockHighlighting=!0),void 0===w.xml&&(w.xml=!0),void 0===w.tokenTypeOverrides&&(w.tokenTypeOverrides={});var S={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var e in S)S.hasOwnProperty(e)&&w.tokenTypeOverrides[e]&&(S[e]=w.tokenTypeOverrides[e]);var m=/^([*\-_])(?:\s*\1){2,}\s*$/,g=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,C=/^\[(x| )\](?=\s)/i,v=w.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,y=/^ *(?:\={1,}|-{1,})\s*$/,n=/^[^#!\[\]*_\\<>` "'(~:]+/,x=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,b=/^\s*\[[^\]]+?\]:.*$/,L=/[!\"#$%&\'()*+,\-\.\/:;<=>?@\[\\\]^_`{|}~—]/;function T(e,t,n){return t.f=t.inline=n,n(e,t)}function M(e,t,n){return t.f=t.block=n,n(e,t)}function r(e){if(e.linkTitle=!1,e.linkHref=!1,e.linkText=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,e.f==N){var t=i;if(!t){var n=R.innerMode(k,e.htmlState);t="xml"==n.mode.name&&null===n.state.tagStart&&!n.state.context&&n.state.tokenize.isInText}t&&(e.f=O,e.block=a,e.htmlState=null)}return e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine={stream:null},null}function a(e,t){var n,r=e.column()===t.indentation,i=!(n=t.prevLine.stream)||!/\S/.test(n.string),o=t.indentedCode,a=t.prevLine.hr,l=!1!==t.list,s=(t.listStack[t.listStack.length-1]||0)+3;t.indentedCode=!1;var c=t.indentation;if(null===t.indentationDiff&&(t.indentationDiff=t.indentation,l)){for(t.em=!1,t.strong=!1,t.code=!1,t.strikethrough=!1,t.list=null;c<t.listStack[t.listStack.length-1];)t.listStack.pop(),t.listStack.length?t.indentation=t.listStack[t.listStack.length-1]:t.list=!1;!1!==t.list&&(t.indentationDiff=c-t.listStack[t.listStack.length-1])}var u=!(i||a||t.prevLine.header||l&&o||t.prevLine.fencedCodeEnd),h=(!1===t.list||a||i)&&t.indentation<=s&&e.match(m),f=null;if(4<=t.indentationDiff&&(o||t.prevLine.fencedCodeEnd||t.prevLine.header||i))return e.skipToEnd(),t.indentedCode=!0,S.code;if(e.eatSpace())return null;if(r&&t.indentation<=s&&(f=e.match(v))&&f[1].length<=6)return t.quote=0,t.header=f[1].length,t.thisLine.header=!0,w.highlightFormatting&&(t.formatting="header"),t.f=t.inline,E(t);if(t.indentation<=s&&e.eat(">"))return t.quote=r?1:t.quote+1,w.highlightFormatting&&(t.formatting="quote"),e.eatSpace(),E(t);if(!h&&!t.setext&&r&&t.indentation<=s&&(f=e.match(g))){var d=f[1]?"ol":"ul";return t.indentation=c+e.current().length,t.list=!0,t.quote=0,t.listStack.push(t.indentation),w.taskLists&&e.match(C,!1)&&(t.taskList=!0),t.f=t.inline,w.highlightFormatting&&(t.formatting=["list","list-"+d]),E(t)}return r&&t.indentation<=s&&(f=e.match(x,!0))?(t.quote=0,t.fencedEndRE=new RegExp(f[1]+"+ *$"),t.localMode=w.fencedCodeBlockHighlighting&&function(e){if(R.findModeByName){var t=R.findModeByName(e);t&&(e=t.mime||t.mimes[0])}var n=R.getMode(p,e);return"null"==n.name?null:n}(f[2]),t.localMode&&(t.localState=R.startState(t.localMode)),t.f=t.block=A,w.highlightFormatting&&(t.formatting="code-block"),t.code=-1,E(t)):t.setext||!(u&&l||t.quote||!1!==t.list||t.code||h||b.test(e.string))&&(f=e.lookAhead(1))&&(f=f.match(y))?(t.setext?(t.header=t.setext,t.setext=0,e.skipToEnd(),w.highlightFormatting&&(t.formatting="header")):(t.header="="==f[0].charAt(0)?1:2,t.setext=t.header),t.thisLine.header=!0,t.f=t.inline,E(t)):h?(e.skipToEnd(),t.hr=!0,t.thisLine.hr=!0,S.hr):"["===e.peek()?T(e,t,H):T(e,t,t.inline)}function N(e,t){var n=k.token(e,t.htmlState);if(!i){var r=R.innerMode(k,t.htmlState);("xml"==r.mode.name&&null===r.state.tagStart&&!r.state.context&&r.state.tokenize.isInText||t.md_inside&&-1<e.current().indexOf(">"))&&(t.f=O,t.block=a,t.htmlState=null)}return n}function A(e,t){var n,r=t.listStack[t.listStack.length-1]||0,i=t.indentation<r,o=r+3;return t.fencedEndRE&&t.indentation<=o&&(i||e.match(t.fencedEndRE))?(w.highlightFormatting&&(t.formatting="code-block"),i||(n=E(t)),t.localMode=t.localState=null,t.block=a,t.f=O,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,i?M(e,t,t.block):n):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),S.code)}function E(e){var t=[];if(e.formatting){t.push(S.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var n=0;n<e.formatting.length;n++)t.push(S.formatting+"-"+e.formatting[n]),"header"===e.formatting[n]&&t.push(S.formatting+"-"+e.formatting[n]+"-"+e.header),"quote"===e.formatting[n]&&(!w.maxBlockquoteDepth||w.maxBlockquoteDepth>=e.quote?t.push(S.formatting+"-"+e.formatting[n]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(S.linkHref,"url"):(e.strong&&t.push(S.strong),e.em&&t.push(S.em),e.strikethrough&&t.push(S.strikethrough),e.emoji&&t.push(S.emoji),e.linkText&&t.push(S.linkText),e.code&&t.push(S.code),e.image&&t.push(S.image),e.imageAltText&&t.push(S.imageAltText,"link"),e.imageMarker&&t.push(S.imageMarker)),e.header&&t.push(S.header,S.header+"-"+e.header),e.quote&&(t.push(S.quote),!w.maxBlockquoteDepth||w.maxBlockquoteDepth>=e.quote?t.push(S.quote+"-"+e.quote):t.push(S.quote+"-"+w.maxBlockquoteDepth)),!1!==e.list){var r=(e.listStack.length-1)%3;r?1===r?t.push(S.list2):t.push(S.list3):t.push(S.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function t(e,t){if(e.match(n,!0))return E(t)}function O(e,t){var n=t.text(e,t);if(void 0!==n)return n;if(t.list)return t.list=null,E(t);if(t.taskList)return" "===e.match(C,!0)[1]?t.taskOpen=!0:t.taskClosed=!0,w.highlightFormatting&&(t.formatting="task"),t.taskList=!1,E(t);if(t.taskOpen=!1,t.taskClosed=!1,t.header&&e.match(/^#+$/,!0))return w.highlightFormatting&&(t.formatting="header"),E(t);var r=e.next();if(t.linkTitle){t.linkTitle=!1;var i=r;"("===r&&(i=")");var o="^\\s*(?:[^"+(i=(i+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+i;if(e.match(new RegExp(o),!0))return S.linkHref}if("`"===r){var a=t.formatting;w.highlightFormatting&&(t.formatting="code"),e.eatWhile("`");var l=e.current().length;if(0!=t.code||t.quote&&1!=l){if(l==t.code){var s=E(t);return t.code=0,s}return t.formatting=a,E(t)}return t.code=l,E(t)}if(t.code)return E(t);if("\\"===r&&(e.next(),w.highlightFormatting)){var c=E(t),u=S.formatting+"-escape";return c?c+" "+u:u}if("!"===r&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.imageMarker=!0,t.image=!0,w.highlightFormatting&&(t.formatting="image"),E(t);if("["===r&&t.imageMarker&&e.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return t.imageMarker=!1,t.imageAltText=!0,w.highlightFormatting&&(t.formatting="image"),E(t);if("]"===r&&t.imageAltText)return w.highlightFormatting&&(t.formatting="image"),c=E(t),t.imageAltText=!1,t.image=!1,t.inline=t.f=D,c;if("["===r&&!t.image)return t.linkText=!0,w.highlightFormatting&&(t.formatting="link"),E(t);if("]"===r&&t.linkText)return w.highlightFormatting&&(t.formatting="link"),c=E(t),t.linkText=!1,t.inline=t.f=e.match(/\(.*?\)| ?\[.*?\]/,!1)?D:O,c;if("<"===r&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return t.f=t.inline=I,w.highlightFormatting&&(t.formatting="link"),(c=E(t))?c+=" ":c="",c+S.linkInline;if("<"===r&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return t.f=t.inline=I,w.highlightFormatting&&(t.formatting="link"),(c=E(t))?c+=" ":c="",c+S.linkEmail;if(w.xml&&"<"===r&&e.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var h=e.string.indexOf(">",e.pos);if(-1!=h){var f=e.string.substring(e.start,h);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(f)&&(t.md_inside=!0)}return e.backUp(1),t.htmlState=R.startState(k),M(e,t,N)}if(w.xml&&"<"===r&&e.match(/^\/\w*?>/))return t.md_inside=!1,"tag";if("*"===r||"_"===r){for(var d=1,p=1==e.pos?" ":e.string.charAt(e.pos-2);d<3&&e.eat(r);)d++;var m=e.peek()||" ",g=!/\s/.test(m)&&(!L.test(m)||/\s/.test(p)||L.test(p)),v=!/\s/.test(p)&&(!L.test(p)||/\s/.test(m)||L.test(m)),y=null,x=null;if(d%2&&(t.em||!g||"*"!==r&&v&&!L.test(p)?t.em!=r||!v||"*"!==r&&g&&!L.test(m)||(y=!1):y=!0),1<d&&(t.strong||!g||"*"!==r&&v&&!L.test(p)?t.strong!=r||!v||"*"!==r&&g&&!L.test(m)||(x=!1):x=!0),null!=x||null!=y)return w.highlightFormatting&&(t.formatting=null==y?"strong":null==x?"em":"strong em"),!0===y&&(t.em=r),!0===x&&(t.strong=r),s=E(t),!1===y&&(t.em=!1),!1===x&&(t.strong=!1),s}else if(" "===r&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return E(t);e.backUp(1)}if(w.strikethrough)if("~"===r&&e.eatWhile(r)){if(t.strikethrough)return w.highlightFormatting&&(t.formatting="strikethrough"),s=E(t),t.strikethrough=!1,s;if(e.match(/^[^\s]/,!1))return t.strikethrough=!0,w.highlightFormatting&&(t.formatting="strikethrough"),E(t)}else if(" "===r&&e.match(/^~~/,!0)){if(" "===e.peek())return E(t);e.backUp(2)}if(w.emoji&&":"===r&&e.match(/^[a-z_\d+-]+:/)){t.emoji=!0,w.highlightFormatting&&(t.formatting="emoji");var b=E(t);return t.emoji=!1,b}return" "===r&&(e.match(/^ +$/,!1)?t.trailingSpace++:t.trailingSpace&&(t.trailingSpaceNewLine=!0)),E(t)}function I(e,t){if(">"===e.next()){t.f=t.inline=O,w.highlightFormatting&&(t.formatting="link");var n=E(t);return n?n+=" ":n="",n+S.linkInline}return e.match(/^[^>]+/,!0),S.linkInline}function D(e,t){if(e.eatSpace())return null;var i,n=e.next();return"("===n||"["===n?(t.f=t.inline=(i="("===n?")":"]",function(e,t){if(e.next()===i){t.f=t.inline=O,w.highlightFormatting&&(t.formatting="link-string");var r=E(t);return t.linkHref=!1,r}return e.match(o[i]),t.linkHref=!0,E(t)}),w.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,E(t)):"error"}var o={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function H(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=l,e.next(),w.highlightFormatting&&(t.formatting="link"),t.linkText=!0,E(t)):T(e,t,O)}function l(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=s,w.highlightFormatting&&(t.formatting="link");var n=E(t);return t.linkText=!1,n}return e.match(/^([^\]\\]|\\.)+/,!0),S.linkText}function s(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=O,S.linkHref+" url")}var c={startState:function(){return{f:a,prevLine:{stream:null},thisLine:{stream:null},block:a,htmlState:null,indentation:0,inline:O,text:t,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.thisLine,block:e.block,htmlState:e.htmlState&&R.copyState(k,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?R.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkText:e.linkText,linkTitle:e.linkTitle,linkHref:e.linkHref,code:e.code,em:e.em,strong:e.strong,strikethrough:e.strikethrough,emoji:e.emoji,header:e.header,setext:e.setext,hr:e.hr,taskList:e.taskList,list:e.list,listStack:e.listStack.slice(0),quote:e.quote,indentedCode:e.indentedCode,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside,fencedEndRE:e.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return r(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=N)){var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentation=n,t.indentationDiff=null,0<n)return null}}return t.f(e,t)},innerMode:function(e){return e.block==N?{state:e.htmlState,mode:k}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:c}},indent:function(e,t,n){return e.block==N&&k.indent?k.indent(e.htmlState,t,n):e.localState&&e.localMode.indent?e.localMode.indent(e.localState,t,n):R.Pass},blankLine:r,getType:E,closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return c}),"xml"),R.defineMIME("text/markdown","markdown"),R.defineMIME("text/x-markdown","markdown")},"object"==typeof n&&"object"==typeof t?r(e("../../lib/codemirror"),e("../xml/xml"),e("../meta")):r(CodeMirror)},{"../../lib/codemirror":10,"../meta":13,"../xml/xml":14}],13:[function(e,t,n){!function(o){"use strict";o.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var e=0;e<o.modeInfo.length;e++){var t=o.modeInfo[e];t.mimes&&(t.mime=t.mimes[0])}o.findModeByMIME=function(e){e=e.toLowerCase();for(var t=0;t<o.modeInfo.length;t++){var n=o.modeInfo[t];if(n.mime==e)return n;if(n.mimes)for(var r=0;r<n.mimes.length;r++)if(n.mimes[r]==e)return n}return/\+xml$/.test(e)?o.findModeByMIME("application/xml"):/\+json$/.test(e)?o.findModeByMIME("application/json"):void 0},o.findModeByExtension=function(e){for(var t=0;t<o.modeInfo.length;t++){var n=o.modeInfo[t];if(n.ext)for(var r=0;r<n.ext.length;r++)if(n.ext[r]==e)return n}},o.findModeByFileName=function(e){for(var t=0;t<o.modeInfo.length;t++){var n=o.modeInfo[t];if(n.file&&n.file.test(e))return n}var r=e.lastIndexOf("."),i=-1<r&&e.substring(r+1,e.length);if(i)return o.findModeByExtension(i)},o.findModeByName=function(e){e=e.toLowerCase();for(var t=0;t<o.modeInfo.length;t++){var n=o.modeInfo[t];if(n.name.toLowerCase()==e)return n;if(n.alias)for(var r=0;r<n.alias.length;r++)if(n.alias[r].toLowerCase()==e)return n}}}("object"==typeof n&&"object"==typeof t?e("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":10}],14:[function(e,t,n){!function(S){"use strict";var C={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},L={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};S.defineMode("xml",(function(e,t){var a,o,l=e.indentUnit,s={},n=t.htmlMode?C:L;for(var r in n)s[r]=n[r];for(var r in t)s[r]=t[r];function c(t,n){function e(e){return(n.tokenize=e)(t,n)}var r=t.next();return"<"==r?t.eat("!")?t.eat("[")?t.match("CDATA[")?e(i("atom","]]>")):null:t.match("--")?e(i("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),e(function r(i){return function(e,t){for(var n;null!=(n=e.next());){if("<"==n)return t.tokenize=r(i+1),t.tokenize(e,t);if(">"==n){if(1==i){t.tokenize=c;break}return t.tokenize=r(i-1),t.tokenize(e,t)}}return"meta"}}(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),n.tokenize=i("meta","?>"),"meta"):(a=t.eat("/")?"closeTag":"openTag",n.tokenize=u,"tag bracket"):"&"==r?(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error":(t.eatWhile(/[^&<]/),null)}function u(e,t){var n,r,i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=c,a=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return a="equals",null;if("<"==i){t.tokenize=c,t.state=p,t.tagName=t.tagStart=null;var o=t.tokenize(e,t);return o?o+" tag error":"tag error"}return/[\'\"]/.test(i)?(t.tokenize=(n=i,(r=function(e,t){for(;!e.eol();)if(e.next()==n){t.tokenize=u;break}return"string"}).isInAttribute=!0,r),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function i(n,r){return function(e,t){for(;!e.eol();){if(e.match(r)){t.tokenize=c;break}e.next()}return n}}function h(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(s.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function f(e){e.context&&(e.context=e.context.prev)}function d(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!s.contextGrabbers.hasOwnProperty(n)||!s.contextGrabbers[n].hasOwnProperty(t))return;f(e)}}function p(e,t,n){return"openTag"==e?(n.tagStart=t.column(),m):"closeTag"==e?g:p}function m(e,t,n){return"word"==e?(n.tagName=t.current(),o="tag",x):s.allowMissingTagName&&"endTag"==e?(o="tag bracket",x(e,t,n)):(o="error",m)}function g(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&s.implicitlyClosed.hasOwnProperty(n.context.tagName)&&f(n),n.context&&n.context.tagName==r||!1===s.matchClosing?(o="tag",v):(o="tag error",y)}return s.allowMissingTagName&&"endTag"==e?(o="tag bracket",v(e,t,n)):(o="error",y)}function v(e,t,n){return"endTag"!=e?(o="error",v):(f(n),p)}function y(e,t,n){return o="error",v(e,0,n)}function x(e,t,n){if("word"==e)return o="attribute",b;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||s.autoSelfClosers.hasOwnProperty(r)?d(n,r):(d(n,r),n.context=new h(n,r,i==n.indented)),p}return o="error",x}function b(e,t,n){return"equals"==e?w:(s.allowMissing||(o="error"),x(e,0,n))}function w(e,t,n){return"string"==e?k:"word"==e&&s.allowUnquoted?(o="string",x):(o="error",x(e,0,n))}function k(e,t,n){return"string"==e?k:x(e,0,n)}return c.isInText=!0,{startState:function(e){var t={tokenize:c,state:p,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;a=null;var n=t.tokenize(e,t);return(n||a)&&"comment"!=n&&(o=null,t.state=t.state(a||n,e,t),o&&(n="error"==o?n+" error":o)),n},indent:function(e,t,n){var r=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+l;if(r&&r.noIndent)return S.Pass;if(e.tokenize!=u&&e.tokenize!=c)return n?n.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==s.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+l*(s.multilineTagIndentFactor||1);if(s.alignCDATA&&/<!\[CDATA\[/.test(t))return 0;var i=t&&/^<(\/)?([\w_:\.-]*)/.exec(t);if(i&&i[1])for(;r;){if(r.tagName==i[2]){r=r.prev;break}if(!s.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(i)for(;r;){var o=s.contextGrabbers[r.tagName];if(!o||!o.hasOwnProperty(i[2]))break;r=r.prev}for(;r&&r.prev&&!r.startOfLine;)r=r.prev;return r?r.indent+l:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:s.htmlMode?"html":"xml",helperType:s.htmlMode?"html":"xml",skipAttribute:function(e){e.state==w&&(e.state=x)}}})),S.defineMIME("text/xml","xml"),S.defineMIME("application/xml","xml"),S.mimeModes.hasOwnProperty("text/html")||S.defineMIME("text/html",{name:"xml",htmlMode:!0})}("object"==typeof n&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],15:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,l=8*i-r-1,s=(1<<l)-1,c=s>>1,u=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-u)-1,d>>=-u,u+=l;0<u;o=256*o+e[t+h],h+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;0<u;a=256*a+e[t+h],h+=f,u-=8);if(0===o)o=1-c;else{if(o===s)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,l,s,c=8*o-i-1,u=(1<<c)-1,h=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),2<=(t+=1<=a+h?f/s:f*Math.pow(2,1-h))*s&&(a++,s/=2),u<=a+h?(l=0,a=u):1<=a+h?(l=(t*s-1)*Math.pow(2,i),a+=h):(l=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;e[n+d]=255&l,d+=p,l/=256,i-=8);for(a=a<<i|l,c+=i;0<c;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*m}},{}],16:[function(e,y,x){(function(e){!function(e){"use strict";var m={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:d,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:d,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:d,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function s(e){this.tokens=[],this.tokens.links={},this.options=e||v.defaults,this.rules=m.normal,this.options.pedantic?this.rules=m.pedantic:this.options.gfm&&(this.options.tables?this.rules=m.tables:this.rules=m.gfm)}m._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,m._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,m.def=t(m.def).replace("label",m._label).replace("title",m._title).getRegex(),m.bullet=/(?:[*+-]|\d+\.)/,m.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,m.item=t(m.item,"gm").replace(/bull/g,m.bullet).getRegex(),m.list=t(m.list).replace(/bull/g,m.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+m.def.source+")").getRegex(),m._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",m._comment=/<!--(?!-?>)[\s\S]*?-->/,m.html=t(m.html,"i").replace("comment",m._comment).replace("tag",m._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),m.paragraph=t(m.paragraph).replace("hr",m.hr).replace("heading",m.heading).replace("lheading",m.lheading).replace("tag",m._tag).getRegex(),m.blockquote=t(m.blockquote).replace("paragraph",m.paragraph).getRegex(),m.normal=p({},m),m.gfm=p({},m.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),m.gfm.paragraph=t(m.paragraph).replace("(?!","(?!"+m.gfm.fences.source.replace("\\1","\\2")+"|"+m.list.source.replace("\\1","\\3")+"|").getRegex(),m.tables=p({},m.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),m.pedantic=p({},m.normal,{html:t("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",m._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),s.rules=m,s.lex=function(e,t){return new s(t).lex(e)},s.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},s.prototype.token=function(e,t){var n,r,i,o,a,l,s,c,u,h,f,d,p;for(e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),1<i[0].length&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.nptable.exec(e))&&(l={type:"table",header:g(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(i[0].length),c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=g(l.cells[c],l.header.length);this.tokens.push(l)}else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),f=1<(o=i[2]).length,this.tokens.push({type:"list_start",ordered:f,start:f?+o:""}),n=!1,h=(i=i[0].match(this.rules.item)).length,c=0;c<h;c++)s=(l=i[c]).length,~(l=l.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(s-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+s+"}","gm"),"")),this.options.smartLists&&c!==h-1&&(o===(a=m.bullet.exec(i[c+1])[0])||1<o.length&&1<a.length||(e=i.slice(c+1).join("\n")+e,c=h-1)),r=n||/\n\n(?!\s*$)/.test(l),c!==h-1&&(n="\n"===l.charAt(l.length-1),r||(r=n)),p=void 0,(d=/^\[[ xX]\] /.test(l))&&(p=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),this.tokens.push({type:r?"loose_item_start":"list_item_start",task:d,checked:p}),this.token(l,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:i[0]});else if(t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),i[3]&&(i[3]=i[3].substring(1,i[3].length-1)),u=i[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[u]||(this.tokens.links[u]={href:i[2],title:i[3]});else if(t&&(i=this.rules.table.exec(e))&&(l={type:"table",header:g(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/(?: *\| *)?\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(i[0].length),c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=g(l.cells[c].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var n={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:d,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)|^__([^\s])__(?!_)|^\*\*([^\s])\*\*(?!\*)/,em:/^_([^\s][\s\S]*?[^\s_])_(?!_)|^_([^\s_][\s\S]*?[^\s])_(?!_)|^\*([^\s][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*][\s\S]*?[^\s])\*(?!\*)|^_([^\s_])_(?!_)|^\*([^\s*])\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:d,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function l(e,t){if(this.options=t||v.defaults,this.links=e,this.rules=n.normal,this.renderer=this.options.renderer||new r,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.options.breaks?this.rules=n.breaks:this.rules=n.gfm)}function r(e){this.options=e||v.defaults}function i(){}function c(e){this.tokens=[],this.token=null,this.options=e||v.defaults,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options}function u(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function h(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}function t(n,e){return n=n.source||n,e=e||"",{replace:function(e,t){return t=(t=t.source||t).replace(/(^|[^\[])\^/g,"$1"),n=n.replace(e,t),this},getRegex:function(){return new RegExp(n,e)}}}function o(e,t){return a[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?a[" "+e]=e+"/":a[" "+e]=e.replace(/[^/]*$/,"")),e=a[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}n._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,n._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,n._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,n.autolink=t(n.autolink).replace("scheme",n._scheme).replace("email",n._email).getRegex(),n._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,n.tag=t(n.tag).replace("comment",m._comment).replace("attribute",n._attribute).getRegex(),n._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|[^\[\]\\])*?/,n._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|(?:\\[()]?|\([^\s\x00-\x1f()\\]*\)|[^\s\x00-\x1f()\\])*?)/,n._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,n.link=t(n.link).replace("label",n._label).replace("href",n._href).replace("title",n._title).getRegex(),n.reflink=t(n.reflink).replace("label",n._label).getRegex(),n.normal=p({},n),n.pedantic=p({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:t(/^!?\[(label)\]\((.*?)\)/).replace("label",n._label).getRegex(),reflink:t(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",n._label).getRegex()}),n.gfm=p({},n.normal,{escape:t(n.escape).replace("])","~|])").getRegex(),url:t(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("email",n._email).getRegex(),_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:t(n.text).replace("]|","~]|").replace("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex()}),n.breaks=p({},n.gfm,{br:t(n.br).replace("{2,}","*").getRegex(),text:t(n.gfm.text).replace("{2,}","*").getRegex()}),l.rules=n,l.output=function(e,t,n){return new l(t,n).output(e)},l.prototype.output=function(e){for(var t,n,r,i,o,a="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),a+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),r="@"===o[2]?"mailto:"+(n=u(this.mangle(o[1]))):n=u(o[1]),a+=this.renderer.link(r,null,n);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),e=e.substring(o[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):u(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),this.inLink=!0,r=o[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=t[1],i=t[3]):i="":i=o[3]?o[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(o,{href:l.escapes(r),title:l.escapes(i)}),this.inLink=!1;else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){a+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),a+=this.renderer.strong(this.output(o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),a+=this.renderer.em(this.output(o[6]||o[5]||o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),a+=this.renderer.codespan(u(o[2].trim(),!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),a+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),a+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),a+=this.renderer.text(u(this.smartypants(o[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else o[0]=this.rules._backpedal.exec(o[0])[0],e=e.substring(o[0].length),"@"===o[2]?r="mailto:"+(n=u(o[0])):(n=u(o[0]),r="www."===o[1]?"http://"+n:n),a+=this.renderer.link(r,null,n);return a},l.escapes=function(e){return e?e.replace(l.rules._escapes,"$1"):e},l.prototype.outputLink=function(e,t){var n=t.href,r=t.title?u(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,u(e[1]))},l.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},l.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,i=0;i<r;i++)t=e.charCodeAt(i),.5<Math.random()&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},r.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+u(t,!0)+'">'+(n?e:u(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:u(e,!0))+"</code></pre>"},r.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},r.prototype.html=function(e){return e},r.prototype.heading=function(e,t,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},r.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},r.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},r.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},r.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},r.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},r.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},r.prototype.strong=function(e){return"<strong>"+e+"</strong>"},r.prototype.em=function(e){return"<em>"+e+"</em>"},r.prototype.codespan=function(e){return"<code>"+e+"</code>"},r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.prototype.del=function(e){return"<del>"+e+"</del>"},r.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(h(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return n}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return n}this.options.baseUrl&&!f.test(e)&&(e=o(this.options.baseUrl,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return n}var i='<a href="'+u(e)+'"';return t&&(i+=' title="'+t+'"'),i+">"+n+"</a>"},r.prototype.image=function(e,t,n){this.options.baseUrl&&!f.test(e)&&(e=o(this.options.baseUrl,e));var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+(this.options.xhtml?"/>":">")},r.prototype.text=function(e){return e},i.prototype.strong=i.prototype.em=i.prototype.codespan=i.prototype.del=i.prototype.text=function(e){return e},i.prototype.link=i.prototype.image=function(e,t,n){return""+n},i.prototype.br=function(){return""},c.parse=function(e,t){return new c(t).parse(e)},c.prototype.parse=function(e){this.inline=new l(e.links,this.options),this.inlineText=new l(e.links,p({},this.options,{renderer:new i})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},c.prototype.next=function(){return this.token=this.tokens.pop()},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,h(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,i="",o="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});o+=this.renderer.tablerow(n)}return this.renderer.table(i,o);case"blockquote_start":for(o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":o="";for(var a=this.token.ordered,l=this.token.start;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,a,l);case"list_item_start":for(o="",this.token.task&&(o+=this.renderer.checkbox(this.token.checked));"list_item_end"!==this.next().type;)o+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(o);case"loose_item_start":for(o="";"list_item_end"!==this.next().type;)o+=this.tok();return this.renderer.listitem(o);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var a={},f=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function d(){}function p(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function g(e,t){var n=e.replace(/([^\\])\|/g,"$1 |").split(/ +\| */),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].replace(/\\\|/g,"|");return n}function v(e,n,r){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(r||"function"==typeof n){r||(r=n,n=null);var i,o,a=(n=p({},v.defaults,n||{})).highlight,t=0;try{i=s.lex(e,n)}catch(e){return r(e)}o=i.length;var l=function(t){if(t)return n.highlight=a,r(t);var e;try{e=c.parse(i,n)}catch(e){t=e}return n.highlight=a,t?r(t):r(null,e)};if(!a||a.length<3)return l();if(delete n.highlight,!o)return l();for(;t<i.length;t++)!function(n){"code"!==n.type?--o||l():a(n.text,n.lang,(function(e,t){return e?l(e):null==t||t===n.text?--o||l():(n.text=t,n.escaped=!0,void(--o||l()))}))}(i[t])}else try{return n&&(n=p({},v.defaults,n)),c.parse(s.lex(e,n),n)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(n||v.defaults).silent)return"<p>An error occurred:</p><pre>"+u(e.message+"",!0)+"</pre>";throw e}}d.exec=d,v.options=v.setOptions=function(e){return p(v.defaults,e),v},v.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new r,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},v.defaults=v.getDefaults(),v.Parser=c,v.parser=c.parse,v.Renderer=r,v.TextRenderer=i,v.Lexer=s,v.lexer=s.lex,v.InlineLexer=l,v.inlineLexer=l.output,v.parse=v,void 0!==y&&"object"==typeof x?y.exports=v:e.marked=v}(this||("undefined"!=typeof window?window:e))}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(u,t,e){(function(c,p){var e;!function(){"use strict";(e=function(e,i,o,a){a=a||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=a.flags||{},this.memoized={},this.loaded=!1;var t,l,s,c,u,h=this;function n(e,t){var n=h._readFile(e,null,a.asyncLoad);a.asyncLoad?n.then((function(e){t(e)})):t(n)}function r(e){i=e,o&&d()}function f(e){o=e,i&&d()}function d(){for(h.rules=h._parseAFF(i),h.compoundRuleCodes={},l=0,c=h.compoundRules.length;l<c;l++){var e=h.compoundRules[l];for(s=0,u=e.length;s<u;s++)h.compoundRuleCodes[e[s]]=[]}for(l in"ONLYINCOMPOUND"in h.flags&&(h.compoundRuleCodes[h.flags.ONLYINCOMPOUND]=[]),h.dictionaryTable=h._parseDIC(o),h.compoundRuleCodes)0===h.compoundRuleCodes[l].length&&delete h.compoundRuleCodes[l];for(l=0,c=h.compoundRules.length;l<c;l++){var t=h.compoundRules[l],n="";for(s=0,u=t.length;s<u;s++){var r=t[s];r in h.compoundRuleCodes?n+="("+h.compoundRuleCodes[r].join("|")+")":n+=r}h.compoundRules[l]=new RegExp(n,"i")}h.loaded=!0,a.asyncLoad&&a.loadedCallback&&a.loadedCallback(h)}return e&&(h.dictionary=e,i&&o?d():"undefined"!=typeof window&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(t=a.dictionaryPath?a.dictionaryPath:"typo/dictionaries",i||n(chrome.extension.getURL(t+"/"+e+"/"+e+".aff"),r),o||n(chrome.extension.getURL(t+"/"+e+"/"+e+".dic"),f)):(t=a.dictionaryPath?a.dictionaryPath:void 0!==p?p+"/dictionaries":"./dictionaries",i||n(t+"/"+e+"/"+e+".aff",r),o||n(t+"/"+e+"/"+e+".dic",f))),this}).prototype={load:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this},_readFile:function(e,t,n){if(t=t||"utf8","undefined"!=typeof XMLHttpRequest){var r,i=new XMLHttpRequest;return i.open("GET",e,n),n&&(r=new Promise((function(e,t){i.onload=function(){200===i.status?e(i.responseText):t(i.statusText)},i.onerror=function(){t(i.statusText)}}))),i.overrideMimeType&&i.overrideMimeType("text/plain; charset="+t),i.send(null),n?r:i.responseText}if(void 0!==u){var o=u("fs");try{if(o.existsSync(e)){var a=o.statSync(e),l=o.openSync(e,"r"),s=new c(a.size);return o.readSync(l,s,0,s.length,null),s.toString(t,0,s.length)}console.log("Path "+e+" does not exist.")}catch(e){return console.log(e),""}}},_parseAFF:function(e){var t,n,r,i,o,a,l,s={},c=(e=this._removeAffixComments(e)).split("\n");for(i=0,a=c.length;i<a;i++){var u=(t=c[i]).split(/\s+/),h=u[0];if("PFX"==h||"SFX"==h){var f=u[1],d=u[2],p=[];for(l=(o=i+1)+(n=parseInt(u[3],10));o<l;o++){var m=(r=c[o].split(/\s+/))[2],g=r[3].split("/"),v=g[0];"0"===v&&(v="");var y=this.parseRuleCodes(g[1]),x=r[4],b={};b.add=v,0<y.length&&(b.continuationClasses=y),"."!==x&&(b.match="SFX"===h?new RegExp(x+"$"):new RegExp("^"+x)),"0"!=m&&(b.remove="SFX"===h?new RegExp(m+"$"):m),p.push(b)}s[f]={type:h,combineable:"Y"==d,entries:p},i+=n}else if("COMPOUNDRULE"===h){for(l=(o=i+1)+(n=parseInt(u[1],10));o<l;o++)r=(t=c[o]).split(/\s+/),this.compoundRules.push(r[1]);i+=n}else"REP"===h?3===(r=t.split(/\s+/)).length&&this.replacementTable.push([r[1],r[2]]):this.flags[h]=u[1]}return s},_removeAffixComments:function(e){return(e=(e=(e=e.replace(/^\s*#.*$/gm,"")).replace(/^\s\s*/m,"").replace(/\s\s*$/m,"")).replace(/\n{2,}/g,"\n")).replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_parseDIC:function(e){var t=(e=this._removeDicComments(e)).split("\n"),n={};function r(e,t){n.hasOwnProperty(e)||(n[e]=null),0<t.length&&(null===n[e]&&(n[e]=[]),n[e].push(t))}for(var i=1,o=t.length;i<o;i++){var a=t[i].split("/",2),l=a[0];if(1<a.length){var s=this.parseRuleCodes(a[1]);"NEEDAFFIX"in this.flags&&-1!=s.indexOf(this.flags.NEEDAFFIX)||r(l,s);for(var c=0,u=s.length;c<u;c++){var h=s[c],f=this.rules[h];if(f)for(var d=this._applyRule(l,f),p=0,m=d.length;p<m;p++){var g=d[p];if(r(g,[]),f.combineable)for(var v=c+1;v<u;v++){var y=s[v],x=this.rules[y];if(x&&x.combineable&&f.type!=x.type)for(var b=this._applyRule(g,x),w=0,k=b.length;w<k;w++)r(b[w],[])}}h in this.compoundRuleCodes&&this.compoundRuleCodes[h].push(l)}}else r(l.trim(),[])}return n},_removeDicComments:function(e){return e.replace(/^\t.*$/gm,"")},parseRuleCodes:function(e){if(!e)return[];if(!("FLAG"in this.flags))return e.split("");if("long"===this.flags.FLAG){for(var t=[],n=0,r=e.length;n<r;n+=2)t.push(e.substr(n,2));return t}return"num"===this.flags.FLAG?e.split(","):void 0},_applyRule:function(e,t){for(var n=t.entries,r=[],i=0,o=n.length;i<o;i++){var a=n[i];if(!a.match||e.match(a.match)){var l=e;if(a.remove&&(l=l.replace(a.remove,"")),"SFX"===t.type?l+=a.add:l=a.add+l,r.push(l),"continuationClasses"in a)for(var s=0,c=a.continuationClasses.length;s<c;s++){var u=this.rules[a.continuationClasses[s]];u&&(r=r.concat(this._applyRule(l,u)))}}}return r},check:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(t))return!0;if(t.toUpperCase()===t){var n=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(n,"KEEPCASE"))return!1;if(this.checkExact(n))return!0}var r=t.toLowerCase();if(r!==t){if(this.hasFlag(r,"KEEPCASE"))return!1;if(this.checkExact(r))return!0}return!1},checkExact:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t,n,r=this.dictionaryTable[e];if(void 0===r){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(t=0,n=this.compoundRules.length;t<n;t++)if(e.match(this.compoundRules[t]))return!0}else{if(null===r)return!0;if("object"==typeof r)for(t=0,n=r.length;t<n;t++)if(!this.hasFlag(e,"ONLYINCOMPOUND",r[t]))return!0}return!1},hasFlag:function(e,t,n){if(!this.loaded)throw"Dictionary not loaded.";return!(!(t in this.flags)||(void 0===n&&(n=Array.prototype.concat.apply([],this.dictionaryTable[e])),!n||-1===n.indexOf(this.flags[t])))},alphabet:"",suggest:function(e,u){if(!this.loaded)throw"Dictionary not loaded.";if(u=u||5,this.memoized.hasOwnProperty(e)){var t=this.memoized[e].limit;if(u<=t||this.memoized[e].suggestions.length<t)return this.memoized[e].suggestions.slice(0,u)}if(this.check(e))return[];for(var n=0,r=this.replacementTable.length;n<r;n++){var i=this.replacementTable[n];if(-1!==e.indexOf(i[0])){var o=e.replace(i[0],i[1]);if(this.check(o))return[o]}}var h=this;function f(e){var t,n,r,i,o,a,l=[];for(t=0,i=e.length;t<i;t++){var s=e[t];for(n=0,o=s.length+1;n<o;n++){var c=[s.substring(0,n),s.substring(n)];if(c[1]&&l.push(c[0]+c[1].substring(1)),1<c[1].length&&c[1][1]!==c[1][0]&&l.push(c[0]+c[1][1]+c[1][0]+c[1].substring(2)),c[1])for(r=0,a=h.alphabet.length;r<a;r++)h.alphabet[r]!=c[1].substring(0,1)&&l.push(c[0]+h.alphabet[r]+c[1].substring(1));if(c[1])for(r=0,a=h.alphabet.length;r<a;r++)l.push(c[0]+h.alphabet[r]+c[1])}}return l}return h.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[e]={suggestions:function(e){var t,n,r=f([e]),i=f(r),o=function(e){for(var t=[],n=0,r=e.length;n<r;n++)h.check(e[n])&&t.push(e[n]);return t}(r.concat(i)),a={};for(t=0,n=o.length;t<n;t++)o[t]in a?a[o[t]]+=1:a[o[t]]=1;var l=[];for(t in a)a.hasOwnProperty(t)&&l.push([t,a[t]]);l.sort((function(e,t){return e[1]<t[1]?-1:1})).reverse();var s=[],c="lowercase";for(e.toUpperCase()===e?c="uppercase":e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()===e&&(c="capitalized"),t=0,n=Math.min(u,l.length);t<n;t++)"uppercase"===c?l[t][0]=l[t][0].toUpperCase():"capitalized"===c&&(l[t][0]=l[t][0].substr(0,1).toUpperCase()+l[t][0].substr(1)),h.hasFlag(l[t][0],"NOSUGGEST")||s.push(l[t][0]);return s}(e),limit:u},this.memoized[e].suggestions}}}(),void 0!==t&&(t.exports=e)}).call(this,u("buffer").Buffer,"/node_modules/typo-js")},{buffer:3,fs:2}],18:[function(e,t,n){var r=e("codemirror");r.commands.tabAndIndentMarkdownList=function(e){var t=e.listSelections()[0].head;if(!1!==e.getStateAfter(t.line).list)e.execCommand("indentMore");else if(e.options.indentWithTabs)e.execCommand("insertTab");else{var n=Array(e.options.tabSize+1).join(" ");e.replaceSelection(n)}},r.commands.shiftTabAndUnindentMarkdownList=function(e){var t=e.listSelections()[0].head;if(!1!==e.getStateAfter(t.line).list)e.execCommand("indentLess");else if(e.options.indentWithTabs)e.execCommand("insertTab");else{var n=Array(e.options.tabSize+1).join(" ");e.replaceSelection(n)}}},{codemirror:10}],19:[function(e,t,n){"use strict";var c=e("codemirror");e("codemirror/addon/edit/continuelist.js"),e("./codemirror/tablist"),e("codemirror/addon/display/fullscreen.js"),e("codemirror/mode/markdown/markdown.js"),e("codemirror/addon/mode/overlay.js"),e("codemirror/addon/display/placeholder.js"),e("codemirror/addon/selection/mark-selection.js"),e("codemirror/mode/gfm/gfm.js"),e("codemirror/mode/xml/xml.js");var u=e("codemirror-spell-checker"),i=e("marked"),o=/Mac/.test(navigator.platform),a=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),h={toggleBold:r,toggleItalic:y,drawLink:E,toggleHeadingSmaller:k,toggleHeadingBigger:S,drawImage:O,toggleBlockquote:w,toggleOrderedList:N,toggleUnorderedList:M,toggleCodeBlock:b,togglePreview:W,toggleStrikethrough:x,toggleHeading1:C,toggleHeading2:L,toggleHeading3:T,cleanBlock:A,drawTable:I,drawHorizontalRule:D,undo:H,redo:R,toggleSideBySide:B,toggleFullScreen:v},l={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},s=function(e){for(var t in h)if(h[t]===e)return t;return null},f=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t};function d(e){return o?e.replace("Ctrl","Cmd"):e.replace("Cmd","Ctrl")}function p(e,t,n){e=e||{};var r=document.createElement("button");t=null==t||t,e.title&&t&&(r.title=function(e,t,n){var r,i=e;return t&&n[r=s(t)]&&(i+=" ("+d(n[r])+")"),i}(e.title,e.action,n),o&&(r.title=r.title.replace("Ctrl","⌘"),r.title=r.title.replace("Alt","⌥"))),e.noDisable&&r.classList.add("no-disable"),e.noMobile&&r.classList.add("no-mobile"),r.tabIndex=-1;var i=document.createElement("i");return i.className=e.className,r.appendChild(i),r}function m(e,t){t=t||e.getCursor("start");var n=e.getTokenAt(t);if(!n.type)return{};for(var r,i,o=n.type.split(" "),a={},l=0;l<o.length;l++)"strong"===(r=o[l])?a.bold=!0:"variable-2"===r?(i=e.getLine(t.line),/^\s*\d+\.\s/.test(i)?a["ordered-list"]=!0:a["unordered-list"]=!0):"atom"===r?a.quote=!0:"em"===r?a.italic=!0:"quote"===r?a.quote=!0:"strikethrough"===r?a.strikethrough=!0:"comment"===r?a.code=!0:"link"===r?a.link=!0:"tag"===r?a.image=!0:r.match(/^header(-[1-6])?$/)&&(a[r.replace("header","heading")]=!0);return a}var g="";function v(e){var t=e.codemirror;t.setOption("fullScreen",!t.getOption("fullScreen")),t.getOption("fullScreen")?(g=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=g;var n=t.getWrapperElement();if(/fullscreen/.test(n.previousSibling.className)?n.previousSibling.className=n.previousSibling.className.replace(/\s*fullscreen\b/,""):n.previousSibling.className+=" fullscreen",e.toolbarElements.fullscreen){var r=e.toolbarElements.fullscreen;/active/.test(r.className)?r.className=r.className.replace(/\s*active\s*/g,""):r.className+=" active"}var i=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(i.className)&&B(e)}function r(e){_(e,"bold",e.options.blockStyles.bold)}function y(e){_(e,"italic",e.options.blockStyles.italic)}function x(e){_(e,"strikethrough","~~")}function b(e){var t=e.options.blockStyles.code;function a(e){if("object"!=typeof e)throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof e+": "+e;return e.styles&&e.styles[2]&&-1!==e.styles[2].indexOf("formatting-code-block")}function l(e){return e.state.base.base||e.state.base}function n(e,t,n,r,i){n=n||e.getLineHandle(t),r=r||e.getTokenAt({line:t,ch:1}),i=i||!!n.text&&e.getTokenAt({line:t,ch:n.text.length-1});var o=r.type?r.type.split(" "):[];return i&&l(i).indentedCode?"indented":-1!==o.indexOf("comment")&&(l(r).fencedChars||l(i).fencedChars||a(n)?"fenced":"single")}var r,i,o,s,c,u,h,f,d,p,m,g,v=e.codemirror,y=v.getCursor("start"),x=v.getCursor("end"),b=v.getTokenAt({line:y.line,ch:y.ch||1}),w=v.getLineHandle(y.line),k=n(v,y.line,w,b);if("single"===k){var S=w.text.slice(0,y.ch).replace("`",""),C=w.text.slice(y.ch).replace("`","");v.replaceRange(S+C,{line:y.line,ch:0},{line:y.line,ch:99999999999999}),y.ch--,y!==x&&x.ch--,v.setSelection(y,x),v.focus()}else if("fenced"===k)if(y.line!==x.line||y.ch!==x.ch){for(r=y.line;0<=r&&!a(w=v.getLineHandle(r));r--);var L,T,M,N,A=l(v.getTokenAt({line:r,ch:1})).fencedChars;a(v.getLineHandle(y.line))?(L="",T=y.line):a(v.getLineHandle(y.line-1))?(L="",T=y.line-1):(L=A+"\n",T=y.line),a(v.getLineHandle(x.line))?(M="",N=x.line,0===x.ch&&(N+=1)):(M=0!==x.ch&&a(v.getLineHandle(x.line+1))?"":A+"\n",N=x.line+1),0===x.ch&&(N-=1),v.operation((function(){v.replaceRange(M,{line:N,ch:0},{line:N+(M?0:1),ch:0}),v.replaceRange(L,{line:T,ch:0},{line:T+(L?0:1),ch:0})})),v.setSelection({line:T+(L?1:0),ch:0},{line:N+(L?1:-1),ch:0}),v.focus()}else{var E=y.line;if(a(v.getLineHandle(y.line))&&("fenced"===n(v,y.line+1)?(r=y.line,E=y.line+1):(i=y.line,E=y.line-1)),void 0===r)for(r=E;0<=r&&!a(w=v.getLineHandle(r));r--);if(void 0===i)for(o=v.lineCount(),i=E;i<o&&!a(w=v.getLineHandle(i));i++);v.operation((function(){v.replaceRange("",{line:r,ch:0},{line:r+1,ch:0}),v.replaceRange("",{line:i-1,ch:0},{line:i,ch:0})})),v.focus()}else if("indented"===k){if(y.line!==x.line||y.ch!==x.ch)r=y.line,i=x.line,0===x.ch&&i--;else{for(r=y.line;0<=r;r--)if(!(w=v.getLineHandle(r)).text.match(/^\s*$/)&&"indented"!==n(v,r,w)){r+=1;break}for(o=v.lineCount(),i=y.line;i<o;i++)if(!(w=v.getLineHandle(i)).text.match(/^\s*$/)&&"indented"!==n(v,i,w)){i-=1;break}}var O=v.getLineHandle(i+1),I=O&&v.getTokenAt({line:i+1,ch:O.text.length-1});I&&l(I).indentedCode&&v.replaceRange("\n",{line:i+1,ch:0});for(var D=r;D<=i;D++)v.indentLine(D,"subtract");v.focus()}else{var H=y.line===x.line&&y.ch===x.ch&&0===y.ch,R=y.line!==x.line;H||R?(s=v,u=x,h=t,f=(c=y).line+1,d=u.line+1,m=h+"\n",g="\n"+h,(p=c.line!==u.line)&&d++,p&&0===u.ch&&(g=h+"\n",d--),F(s,!1,[m,g]),s.setSelection({line:f,ch:0},{line:d,ch:0})):F(v,!1,["`","`"])}}function w(e){P(e.codemirror,"quote")}function k(e){z(e.codemirror,"smaller")}function S(e){z(e.codemirror,"bigger")}function C(e){z(e.codemirror,void 0,1)}function L(e){z(e.codemirror,void 0,2)}function T(e){z(e.codemirror,void 0,3)}function M(e){P(e.codemirror,"unordered-list")}function N(e){P(e.codemirror,"ordered-list")}function A(e){!function(e){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className))for(var t,n=e.getCursor("start"),r=e.getCursor("end"),i=n.line;i<=r.line;i++)t=(t=e.getLine(i)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),e.replaceRange(t,{line:i,ch:0},{line:i,ch:99999999999999})}(e.codemirror)}function E(e){var t=e.codemirror,n=m(t),r=e.options,i="https://";if(r.promptURLs&&!(i=prompt(r.promptTexts.link)))return!1;F(t,n.link,r.insertTexts.link,i)}function O(e){var t=e.codemirror,n=m(t),r=e.options,i="https://";if(r.promptURLs&&!(i=prompt(r.promptTexts.image)))return!1;F(t,n.image,r.insertTexts.image,i)}function I(e){var t=e.codemirror,n=m(t),r=e.options;F(t,n.table,r.insertTexts.table)}function D(e){var t=e.codemirror,n=m(t),r=e.options;F(t,n.image,r.insertTexts.horizontalRule)}function H(e){var t=e.codemirror;t.undo(),t.focus()}function R(e){var t=e.codemirror;t.redo(),t.focus()}function B(e){var t=e.codemirror,n=t.getWrapperElement(),r=n.nextSibling,i=e.toolbarElements["side-by-side"],o=!1;/editor-preview-active-side/.test(r.className)?(r.className=r.className.replace(/\s*editor-preview-active-side\s*/g,""),i.className=i.className.replace(/\s*active\s*/g,""),n.className=n.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout((function(){t.getOption("fullScreen")||v(e),r.className+=" editor-preview-active-side"}),1),i.className+=" active",n.className+=" CodeMirror-sided",o=!0);var a=n.lastChild;if(/editor-preview-active/.test(a.className)){a.className=a.className.replace(/\s*editor-preview-active\s*/g,"");var l=e.toolbarElements.preview,s=n.previousSibling;l.className=l.className.replace(/\s*active\s*/g,""),s.className=s.className.replace(/\s*disabled-for-preview*/g,"")}t.sideBySideRenderingFunction||(t.sideBySideRenderingFunction=function(){r.innerHTML=e.options.previewRender(e.value(),r)}),o?(r.innerHTML=e.options.previewRender(e.value(),r),t.on("update",t.sideBySideRenderingFunction)):t.off("update",t.sideBySideRenderingFunction),t.refresh()}function W(e){var t=e.codemirror,n=t.getWrapperElement(),r=n.previousSibling,i=!!e.options.toolbar&&e.toolbarElements.preview,o=n.lastChild;o&&/editor-preview/.test(o.className)||((o=document.createElement("div")).className="editor-preview",n.appendChild(o)),/editor-preview-active/.test(o.className)?(o.className=o.className.replace(/\s*editor-preview-active\s*/g,""),i&&(i.className=i.className.replace(/\s*active\s*/g,""),r.className=r.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout((function(){o.className+=" editor-preview-active"}),1),i&&(i.className+=" active",r.className+=" disabled-for-preview")),o.innerHTML=e.options.previewRender(e.value(),o);var a=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(a.className)&&B(e)}function F(e,t,n,r){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){var i,o=n[0],a=n[1],l={},s={};Object.assign(l,e.getCursor("start")),Object.assign(s,e.getCursor("end")),r&&(a=a.replace("#url#",r)),t?(o=(i=e.getLine(l.line)).slice(0,l.ch),a=i.slice(l.ch),e.replaceRange(o+a,{line:l.line,ch:0})):(i=e.getSelection(),e.replaceSelection(o+i+a),l.ch+=o.length,l!==s&&(s.ch+=o.length)),e.setSelection(l,s),e.focus()}}function z(e,t,n){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var r,i,o,a=e.getCursor("start"),l=e.getCursor("end"),s=a.line;s<=l.line;s++)r=s,i=void 0,o=(i=e.getLine(r)).search(/[^#]/),i=void 0!==t?o<=0?"bigger"==t?"###### "+i:"# "+i:6==o&&"smaller"==t?i.substr(7):1==o&&"bigger"==t?i.substr(2):"bigger"==t?i.substr(1):"#"+i:1==n?o<=0?"# "+i:o==n?i.substr(o+1):"# "+i.substr(o+1):2==n?o<=0?"## "+i:o==n?i.substr(o+1):"## "+i.substr(o+1):o<=0?"### "+i:o==n?i.substr(o+1):"### "+i.substr(o+1),e.replaceRange(i,{line:r,ch:0},{line:r,ch:99999999999999});e.focus()}}function P(s,c){if(!/editor-preview-active/.test(s.getWrapperElement().lastChild.className)){for(var u=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,h=/^\s*/,f=m(s),e=s.getCursor("start"),t=s.getCursor("end"),d={quote:/^(\s*)>\s+/,"unordered-list":u,"ordered-list":u},p=1,n=e.line;n<=t.line;n++)!function(e){var t,n,r,i,o=s.getLine(e);if(f[c])o=o.replace(d[c],"$1");else{var a=u.exec(o),l=(i=p,{quote:">","unordered-list":"*","ordered-list":"%%i."}[c].replace("%%i",i));null!==a?(t=c,n=a[2],r=new RegExp({quote:">","unordered-list":"*","ordered-list":"d+."}[t]),n&&r.test(n)&&(l=""),o=a[1]+l+a[3]+o.replace(h,"").replace(d[c],"$1")):o=l+" "+o,p+=1}s.replaceRange(o,{line:e,ch:0},{line:e,ch:99999999999999})}(n);s.focus()}}function _(e,t,n,r){if(!/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className)){r=void 0===r?n:r;var i,o=e.codemirror,a=m(o),l=n,s=r,c=o.getCursor("start"),u=o.getCursor("end");a[t]?(l=(i=o.getLine(c.line)).slice(0,c.ch),s=i.slice(c.ch),"bold"==t?(l=l.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),s=s.replace(/(\*\*|__)/,"")):"italic"==t?(l=l.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),s=s.replace(/(\*|_)/,"")):"strikethrough"==t&&(l=l.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),s=s.replace(/(\*\*|~~)/,"")),o.replaceRange(l+s,{line:c.line,ch:0},{line:c.line,ch:99999999999999}),"bold"==t||"strikethrough"==t?(c.ch-=2,c!==u&&(u.ch-=2)):"italic"==t&&(c.ch-=1,c!==u&&(u.ch-=1))):(i=o.getSelection(),"bold"==t?i=(i=i.split("**").join("")).split("__").join(""):"italic"==t?i=(i=i.split("*").join("")).split("_").join(""):"strikethrough"==t&&(i=i.split("~~").join("")),o.replaceSelection(l+i+s),c.ch+=n.length,u.ch=c.ch+i.length),o.setSelection(c,u),o.focus()}}function j(e,t){for(var n in t)t.hasOwnProperty(n)&&(t[n]instanceof Array?e[n]=t[n].concat(e[n]instanceof Array?e[n]:[]):null!==t[n]&&"object"==typeof t[n]&&t[n].constructor===Object?e[n]=j(e[n]||{},t[n]):e[n]=t[n]);return e}function q(e){for(var t=1;t<arguments.length;t++)e=j(e,arguments[t]);return e}function U(e){var t=e.match(/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),n=0;if(null===t)return n;for(var r=0;r<t.length;r++)19968<=t[r].charCodeAt(0)?n+=t[r].length:n+=1;return n}var $={bold:{name:"bold",action:r,className:"fa fa-bold",title:"Bold",default:!0},italic:{name:"italic",action:y,className:"fa fa-italic",title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:x,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:k,className:"fa fa-header fa-heading",title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:k,className:"fa fa-header fa-heading fa-header-x fa-header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:S,className:"fa fa-header fa-heading fa-header-x fa-header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:C,className:"fa fa-header fa-heading fa-header-x fa-header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:L,className:"fa fa-header fa-heading fa-header-x fa-header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:T,className:"fa fa-header fa-heading fa-header-x fa-header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:b,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:w,className:"fa fa-quote-left",title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:M,className:"fa fa-list-ul",title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:N,className:"fa fa-list-ol",title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:A,className:"fa fa-eraser fa-clean-block",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:E,className:"fa fa-link",title:"Create Link",default:!0},image:{name:"image",action:O,className:"fa fa-image",title:"Insert Image",default:!0},table:{name:"table",action:I,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:D,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:W,className:"fa fa-eye",noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:B,className:"fa fa-columns",noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:v,className:"fa fa-arrows-alt",noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://simplemde.com/markdown-guide",className:"fa fa-question-circle",noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:H,className:"fa fa-undo",noDisable:!0,title:"Undo"},redo:{name:"redo",action:R,className:"fa fa-repeat",noDisable:!0,title:"Redo"}},G={link:["[","](#url#)"],image:["![](","#url#)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},V={link:"URL for the link:",image:"URL of the image:"},X={bold:"**",code:"```",italic:"*"};function K(e){(e=e||{}).parent=this;var t=!0;if(!1===e.autoDownloadFontAwesome&&(t=!1),!0!==e.autoDownloadFontAwesome)for(var n=document.styleSheets,r=0;r<n.length;r++)n[r].href&&-1<n[r].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")&&(t=!1);if(t){var i=document.createElement("link");i.rel="stylesheet",i.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(i)}if(e.element)this.element=e.element;else if(null===e.element)return void console.log("EasyMDE: Error. No element was found.");if(void 0===e.toolbar)for(var o in e.toolbar=[],$)$.hasOwnProperty(o)&&(-1!=o.indexOf("separator-")&&e.toolbar.push("|"),(!0===$[o].default||e.showIcons&&e.showIcons.constructor===Array&&-1!=e.showIcons.indexOf(o))&&e.toolbar.push(o));e.hasOwnProperty("status")||(e.status=["autosave","lines","words","cursor"]),e.previewRender||(e.previewRender=function(e){return this.parent.markdown(e)}),e.parsingConfig=q({highlightFormatting:!0},e.parsingConfig||{}),e.insertTexts=q({},G,e.insertTexts||{}),e.promptTexts=q({},V,e.promptTexts||{}),e.blockStyles=q({},X,e.blockStyles||{}),e.shortcuts=q({},l,e.shortcuts||{}),e.minHeight=e.minHeight||"300px",null!=e.autosave&&null!=e.autosave.unique_id&&""!=e.autosave.unique_id&&(e.autosave.uniqueId=e.autosave.unique_id),this.options=e,this.render(),!e.initialValue||this.options.autosave&&!0===this.options.autosave.foundSavedValue||this.value(e.initialValue)}function Y(){if("object"!=typeof localStorage)return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(e){return!1}return!0}K.prototype.markdown=function(e){if(i){var t;if(t=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&!1===this.options.renderingConfig.singleLineBreaks?t.breaks=!1:t.breaks=!0,this.options&&this.options.renderingConfig&&!0===this.options.renderingConfig.codeSyntaxHighlighting){var n=this.options.renderingConfig.hljs||window.hljs;n&&(t.highlight=function(e){return n.highlightAuto(e).value})}i.setOptions(t);var r=i(e);return function(e){for(var t;null!==(t=a.exec(e));){var n=t[0];if(-1===n.indexOf("target=")){var r=n.replace(/>$/,' target="_blank">');e=e.replace(n,r)}}return e}(r)}},K.prototype.render=function(e){if(e||(e=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==e){this.element=e;var t,n,r=this.options,i=this,o={};for(var a in r.shortcuts)null!==r.shortcuts[a]&&null!==h[a]&&function(e){o[d(r.shortcuts[e])]=function(){h[e](i)}}(a);if(o.Enter="newlineAndIndentContinueMarkdownList",o.Tab="tabAndIndentMarkdownList",o["Shift-Tab"]="shiftTabAndUnindentMarkdownList",o.Esc=function(e){e.getOption("fullScreen")&&v(i)},document.addEventListener("keydown",(function(e){27==(e=e||window.event).keyCode&&i.codemirror.getOption("fullScreen")&&v(i)}),!1),!1!==r.spellChecker?(t="spell-checker",(n=r.parsingConfig).name="gfm",n.gitHubSpice=!1,u({codeMirrorInstance:c})):((t=r.parsingConfig).name="gfm",t.gitHubSpice=!1),this.codemirror=c.fromTextArea(e,{mode:t,backdrop:n,theme:"paper",tabSize:null!=r.tabSize?r.tabSize:2,indentUnit:null!=r.tabSize?r.tabSize:2,indentWithTabs:!1!==r.indentWithTabs,lineNumbers:!1,autofocus:!0===r.autofocus,extraKeys:o,lineWrapping:!1!==r.lineWrapping,allowDropFileTypes:["text/plain"],placeholder:r.placeholder||e.getAttribute("placeholder")||"",styleSelectedText:null!=r.styleSelectedText?r.styleSelectedText:!f(),configureMouse:function(e,t,n){return{addNew:!1}}}),this.codemirror.getScrollerElement().style.minHeight=r.minHeight,!0===r.forceSync){var l=this.codemirror;l.on("change",(function(){l.save()}))}!(this.gui={})!==r.toolbar&&(this.gui.toolbar=this.createToolbar()),!1!==r.status&&(this.gui.statusbar=this.createStatusbar()),null!=r.autosave&&!0===r.autosave.enabled&&this.autosave(),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var s=this.codemirror;setTimeout(function(){s.refresh()}.bind(s),0)}},K.prototype.autosave=function(){if(Y()){var e=this;if(null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");null!=e.element.form&&null!=e.element.form&&e.element.form.addEventListener("submit",(function(){localStorage.removeItem("smde_"+e.options.autosave.uniqueId)})),!0!==this.options.autosave.loaded&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0),localStorage.setItem("smde_"+this.options.autosave.uniqueId,e.value());var t=document.getElementById("autosaved");if(null!=t&&null!=t&&""!=t){var n=new Date,r=n.getHours(),i=n.getMinutes(),o="am",a=r;12<=a&&(a=r-12,o="pm"),0==a&&(a=12),i=i<10?"0"+i:i,t.innerHTML="Autosaved: "+a+":"+i+" "+o}this.autosaveTimeoutId=setTimeout((function(){e.autosave()}),this.options.autosave.delay||1e4)}else console.log("EasyMDE: localStorage not available, cannot autosave")},K.prototype.clearAutosavedValue=function(){if(Y()){if(null==this.options.autosave||null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},K.prototype.createSideBySide=function(){var r=this.codemirror,e=r.getWrapperElement(),i=e.nextSibling;if(i&&/editor-preview-side/.test(i.className)||((i=document.createElement("div")).className="editor-preview-side",e.parentNode.insertBefore(i,e.nextSibling)),!1===this.options.syncSideBySidePreviewScroll)return i;var o=!1,a=!1;return r.on("scroll",(function(e){if(o)o=!1;else{a=!0;var t=e.getScrollInfo().height-e.getScrollInfo().clientHeight,n=parseFloat(e.getScrollInfo().top)/t,r=(i.scrollHeight-i.clientHeight)*n;i.scrollTop=r}})),i.onscroll=function(){if(a)a=!1;else{o=!0;var e=i.scrollHeight-i.clientHeight,t=parseFloat(i.scrollTop)/e,n=(r.getScrollInfo().height-r.getScrollInfo().clientHeight)*t;r.scrollTo(0,n)}},i},K.prototype.createToolbar=function(e){if((e=e||this.options.toolbar)&&0!==e.length){var t;for(t=0;t<e.length;t++)null!=$[e[t]]&&(e[t]=$[e[t]]);var r=document.createElement("div");r.className="editor-toolbar";var i=this,o={};for(i.toolbar=e,t=0;t<e.length;t++)if(("guide"!=e[t].name||!1!==i.options.toolbarGuideIcon)&&!(i.options.hideIcons&&-1!=i.options.hideIcons.indexOf(e[t].name)||("fullscreen"==e[t].name||"side-by-side"==e[t].name)&&f())){if("|"===e[t]){for(var n=!1,a=t+1;a<e.length;a++)"|"===e[a]||i.options.hideIcons&&-1!=i.options.hideIcons.indexOf(e[a].name)||(n=!0);if(!n)continue}!function(t){var e,n;"|"===t?((n=document.createElement("i")).className="separator",n.innerHTML="|",e=n):e=p(t,i.options.toolbarTips,i.options.shortcuts),t.action&&("function"==typeof t.action?e.onclick=function(e){e.preventDefault(),t.action(i)}:"string"==typeof t.action&&(e.onclick=function(e){e.preventDefault(),window.open(t.action,"_blank")})),o[t.name||t]=e,r.appendChild(e)}(e[t])}i.toolbarElements=o;var l=this.codemirror;l.on("cursorActivity",(function(){var e,t,n=m(l);for(var r in o)t=void 0,t=o[e=r],n[e]?t.className+=" active":"fullscreen"!=e&&"side-by-side"!=e&&(t.className=t.className.replace(/\s*active\s*/g,""))}));var s=l.getWrapperElement();return s.parentNode.insertBefore(r,s),r}},K.prototype.createStatusbar=function(e){e=e||this.options.status;var t=this.options,n=this.codemirror;if(e&&0!==e.length){var r,i,o,a=[];for(r=0;r<e.length;r++)if(o=i=void 0,"object"==typeof e[r])a.push({className:e[r].className,defaultValue:e[r].defaultValue,onUpdate:e[r].onUpdate});else{var l=e[r];"words"===l?(o=function(e){e.innerHTML=U(n.getValue())},i=function(e){e.innerHTML=U(n.getValue())}):"lines"===l?(o=function(e){e.innerHTML=n.lineCount()},i=function(e){e.innerHTML=n.lineCount()}):"cursor"===l?(o=function(e){e.innerHTML="0:0"},i=function(e){var t=n.getCursor();e.innerHTML=t.line+":"+t.ch}):"autosave"===l&&(o=function(e){null!=t.autosave&&!0===t.autosave.enabled&&e.setAttribute("id","autosaved")}),a.push({className:l,defaultValue:o,onUpdate:i})}var s=document.createElement("div");for(s.className="editor-statusbar",r=0;r<a.length;r++){var c=a[r],u=document.createElement("span");u.className=c.className,"function"==typeof c.defaultValue&&c.defaultValue(u),"function"==typeof c.onUpdate&&this.codemirror.on("update",function(e,t){return function(){t.onUpdate(e)}}(u,c)),s.appendChild(u)}var h=this.codemirror.getWrapperElement();return h.parentNode.insertBefore(s,h.nextSibling),s}},K.prototype.value=function(e){var t=this.codemirror;if(void 0===e)return t.getValue();if(t.getDoc().setValue(e),this.isPreviewActive()){var n=t.getWrapperElement().lastChild;n.innerHTML=this.options.previewRender(e,n)}return this},K.toggleBold=r,K.toggleItalic=y,K.toggleStrikethrough=x,K.toggleBlockquote=w,K.toggleHeadingSmaller=k,K.toggleHeadingBigger=S,K.toggleHeading1=C,K.toggleHeading2=L,K.toggleHeading3=T,K.toggleCodeBlock=b,K.toggleUnorderedList=M,K.toggleOrderedList=N,K.cleanBlock=A,K.drawLink=E,K.drawImage=O,K.drawTable=I,K.drawHorizontalRule=D,K.undo=H,K.redo=R,K.togglePreview=W,K.toggleSideBySide=B,K.toggleFullScreen=v,K.prototype.toggleBold=function(){r(this)},K.prototype.toggleItalic=function(){y(this)},K.prototype.toggleStrikethrough=function(){x(this)},K.prototype.toggleBlockquote=function(){w(this)},K.prototype.toggleHeadingSmaller=function(){k(this)},K.prototype.toggleHeadingBigger=function(){S(this)},K.prototype.toggleHeading1=function(){C(this)},K.prototype.toggleHeading2=function(){L(this)},K.prototype.toggleHeading3=function(){T(this)},K.prototype.toggleCodeBlock=function(){b(this)},K.prototype.toggleUnorderedList=function(){M(this)},K.prototype.toggleOrderedList=function(){N(this)},K.prototype.cleanBlock=function(){A(this)},K.prototype.drawLink=function(){E(this)},K.prototype.drawImage=function(){O(this)},K.prototype.drawTable=function(){I(this)},K.prototype.drawHorizontalRule=function(){D(this)},K.prototype.undo=function(){H(this)},K.prototype.redo=function(){R(this)},K.prototype.togglePreview=function(){W(this)},K.prototype.toggleSideBySide=function(){B(this)},K.prototype.toggleFullScreen=function(){v(this)},K.prototype.isPreviewActive=function(){var e=this.codemirror.getWrapperElement().lastChild;return/editor-preview-active/.test(e.className)},K.prototype.isSideBySideActive=function(){var e=this.codemirror.getWrapperElement().nextSibling;return/editor-preview-active-side/.test(e.className)},K.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},K.prototype.getState=function(){return m(this.codemirror)},K.prototype.toTextArea=function(){var e=this.codemirror,t=e.getWrapperElement();t.parentNode&&(this.gui.toolbar&&t.parentNode.removeChild(this.gui.toolbar),this.gui.statusbar&&t.parentNode.removeChild(this.gui.statusbar),this.gui.sideBySide&&t.parentNode.removeChild(this.gui.sideBySide)),e.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},t.exports=K},{"./codemirror/tablist":18,codemirror:10,"codemirror-spell-checker":4,"codemirror/addon/display/fullscreen.js":5,"codemirror/addon/display/placeholder.js":6,"codemirror/addon/edit/continuelist.js":7,"codemirror/addon/mode/overlay.js":8,"codemirror/addon/selection/mark-selection.js":9,"codemirror/mode/gfm/gfm.js":11,"codemirror/mode/markdown/markdown.js":12,"codemirror/mode/xml/xml.js":14,marked:16}]},{},[19])(19)},746:()=>{!function(document,window){"use strict";var inlineAttachment=function(options,instance){this.settings=inlineAttachment.util.merge(options,inlineAttachment.defaults),this.editor=instance,this.filenameTag="{filename}",this.lastValue=null};inlineAttachment.editors={},inlineAttachment.util={merge:function(){for(var result={},i=arguments.length-1;i>=0;i--){var obj=arguments[i];for(var k in obj)obj.hasOwnProperty(k)&&(result[k]=obj[k])}return result},appendInItsOwnLine:function(previous,appended){return(previous+"\n\n[[D]]"+appended).replace(/(\n{2,})\[\[D\]\]/,"\n\n").replace(/^(\n*)/,"")},insertTextAtCursor:function(el,text){var range,scrollPos=el.scrollTop,strPos=0,browser=!1;el.selectionStart||"0"===el.selectionStart?browser="ff":document.selection&&(browser="ie"),"ie"===browser?(el.focus(),(range=document.selection.createRange()).moveStart("character",-el.value.length),strPos=range.text.length):"ff"===browser&&(strPos=el.selectionStart);var front=el.value.substring(0,strPos),back=el.value.substring(strPos,el.value.length);el.value=front+text+back,strPos+=text.length,"ie"===browser?(el.focus(),(range=document.selection.createRange()).moveStart("character",-el.value.length),range.moveStart("character",strPos),range.moveEnd("character",0),range.select()):"ff"===browser&&(el.selectionStart=strPos,el.selectionEnd=strPos,el.focus()),el.scrollTop=scrollPos}},inlineAttachment.defaults={uploadUrl:"upload_attachment.php",uploadMethod:"POST",uploadFieldName:"file",defaultExtension:"png",jsonFieldName:"filename",allowedTypes:["image/jpeg","image/png","image/jpg","image/gif"],progressText:"![Uploading file...]()",urlText:"![file]({filename})",errorText:"Error uploading file",extraParams:{},extraHeaders:{},beforeFileUpload:function(){return!0},onFileReceived:function(){},onFileUploadResponse:function(){return!0},onFileUploadError:function(){return!0},onFileUploaded:function(){}},inlineAttachment.prototype.uploadFile=function(file){var me=this,formData=new FormData,xhr=new XMLHttpRequest,settings=this.settings,extension=settings.defaultExtension||settings.defualtExtension;if("function"==typeof settings.setupFormData&&settings.setupFormData(formData,file),file.name){var fileNameMatches=file.name.match(/\.(.+)$/);fileNameMatches&&(extension=fileNameMatches[1])}var remoteFilename="image-"+Date.now()+"."+extension;if("function"==typeof settings.remoteFilename&&(remoteFilename=settings.remoteFilename(file)),formData.append(settings.uploadFieldName,file,remoteFilename),"object"==typeof settings.extraParams)for(var key in settings.extraParams)settings.extraParams.hasOwnProperty(key)&&formData.append(key,settings.extraParams[key]);if(xhr.open("POST",settings.uploadUrl),"object"==typeof settings.extraHeaders)for(var header in settings.extraHeaders)settings.extraHeaders.hasOwnProperty(header)&&xhr.setRequestHeader(header,settings.extraHeaders[header]);return xhr.onload=function(){200===xhr.status||201===xhr.status?me.onFileUploadResponse(xhr):me.onFileUploadError(xhr)},!1!==settings.beforeFileUpload(xhr)&&xhr.send(formData),xhr},inlineAttachment.prototype.isFileAllowed=function(file){return"string"!==file.kind&&(0===this.settings.allowedTypes.indexOf("*")||this.settings.allowedTypes.indexOf(file.type)>=0)},inlineAttachment.prototype.onFileUploadResponse=function(xhr){if(!1!==this.settings.onFileUploadResponse.call(this,xhr)){var result=JSON.parse(xhr.responseText),filename=result[this.settings.jsonFieldName];if(result&&filename){var newValue;newValue="function"==typeof this.settings.urlText?this.settings.urlText.call(this,filename,result):this.settings.urlText.replace(this.filenameTag,filename);var text=this.editor.getValue().replace(this.lastValue,newValue);this.editor.setValue(text),this.settings.onFileUploaded.call(this,filename)}}},inlineAttachment.prototype.onFileUploadError=function(xhr){if(!1!==this.settings.onFileUploadError.call(this,xhr)){var text=this.editor.getValue().replace(this.lastValue,this.settings.errorText);this.editor.setValue(text)}},inlineAttachment.prototype.onFileInserted=function(file){!1!==this.settings.onFileReceived.call(this,file)&&(this.lastValue=this.settings.progressText,this.editor.insertValue(this.lastValue))},inlineAttachment.prototype.onPaste=function(e){var items,result=!1,clipboardData=e.clipboardData;if("object"==typeof clipboardData){items=clipboardData.items||clipboardData.files||[];for(var i=0;i<items.length;i++){var item=items[i];this.isFileAllowed(item)&&(result=!0,this.onFileInserted(item.getAsFile()),this.uploadFile(item.getAsFile()))}}return result&&e.preventDefault(),result},inlineAttachment.prototype.onDrop=function(e){for(var result=!1,i=0;i<e.dataTransfer.files.length;i++){var file=e.dataTransfer.files[i];this.isFileAllowed(file)&&(result=!0,this.onFileInserted(file),this.uploadFile(file))}return result},window.inlineAttachment=inlineAttachment}(document,window)},747:()=>{!function(){"use strict";inlineAttachment.editors.input={Editor:function(instance){var input=instance;return{getValue:function(){return input.value},insertValue:function(val){inlineAttachment.util.insertTextAtCursor(input,val)},setValue:function(val){input.value=val}}},attachToInput:function(input,options){options=options||{};var editor=new inlineAttachment.editors.input.Editor(input),inlineattach=new inlineAttachment(options,editor);input.addEventListener("paste",(function(e){inlineattach.onPaste(e)}),!1),input.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),inlineattach.onDrop(e)}),!1),input.addEventListener("dragenter",(function(e){e.stopPropagation(),e.preventDefault()}),!1),input.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault()}),!1)}}}()},33:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var __webpack_provided_window_dot_jQuery=__webpack_require__(1);"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,u,o=gap,a=t[e];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(e)),"function"==typeof rep&&(a=rep.call(t,e,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(a)){for(s=a.length,n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;n<s;n+=1)"string"==typeof rep[n]&&((i=str(r=rep[n],a))&&u.push(quote(r)+(gap?": ":":")+i));else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&((i=str(r,a))&&u.push(quote(r)+(gap?": ":":")+i));return i=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(void 0!==(r=walk(i,n))?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";var n=e.History=e.History||{},r=__webpack_provided_window_dot_jQuery;if(void 0!==n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){r(e).bind(t,n)},trigger:function(e,t,n){r(e).trigger(t,n)},extractEventData:function(e,n,r){return n&&n.originalEvent&&n.originalEvent[e]||r&&r[e]||undefined},onDomLoad:function(e){r(e)}},void 0!==n.init&&n.init()}(window),function(e,t){"use strict";var n=e.document,r=e.setTimeout||r,i=e.clearTimeout||i,s=e.setInterval||s,o=e.History=e.History||{};if(void 0!==o.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){if(void 0!==o.initHtml4.initialized)return!1;o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){return e===o.getHashByIndex()},o.isHashEqual=function(e,t){return(e=encodeURIComponent(e).replace(/%25/g,"%"))===(t=encodeURIComponent(t).replace(/%25/g,"%"))},o.saveHash=function(e){return!o.isLastHash(e)&&(o.savedHashes.push(e),!0)},o.getHashByIndex=function(e){return void 0===e?o.savedHashes[o.savedHashes.length-1]:e<0?o.savedHashes[o.savedHashes.length+e]:o.savedHashes[e]},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,n){var i,r=o.getHashByState(e);return i={discardedState:e,backState:n,forwardState:t},o.discardedStates[r]=i,!0},o.discardHash=function(e,t,n){var r={discardedHash:e,backState:n,forwardState:t};return o.discardedHashes[e]=r,!0},o.discardedState=function(e){var t=o.getHashByState(e);return o.discardedStates[t]||!1},o.discardedHash=function(e){return o.discardedHashes[e]||!1},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var i,u,a,t="",f=Boolean(o.getHash());return o.isInternetExplorer()?("historyjs-iframe",(i=n.createElement("iframe")).setAttribute("id","historyjs-iframe"),i.setAttribute("src","#"),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),u="",a=!1,o.checkerFunction=function(){if(a)return!1;a=!0;var n=o.getHash(),r=o.getHash(i.contentWindow.document);return n!==t?(t=n,r!==n&&(u=r=n,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=o.escapeHash(n)),o.Adapter.trigger(e,"hashchange")):r!==u&&(u=r,f&&""===r?o.back():o.setHash(r,!1)),a=!1,!0}):o.checkerFunction=function(){var n=o.getHash()||"";return n!==t&&(t=n,o.Adapter.trigger(e,"hashchange")),!0},o.intervalList.push(s(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(t){var a,n=t&&t.newURL||o.getLocationHref(),r=o.getHashByUrl(n),i=null;return o.isLastHash(r)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(r),r&&o.isTraditionalAnchor(r)?(o.Adapter.trigger(e,"anchorchange"),o.busy(!1),!1):(i=o.extractState(o.getFullUrl(r||o.getLocationHref()),!0),o.isLastSavedState(i)?(o.busy(!1),!1):(o.getHashByState(i),(a=o.discardedState(i))?(o.getHashByIndex(-2)===o.getHashByState(a.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(i.data,i.title,encodeURI(i.url),!1),!0))))},o.Adapter.bind(e,"hashchange",o.onHashChange),o.pushState=function(t,n,r,i){if(r=encodeURI(r).replace(/%25/g,"%"),o.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==i&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:i}),!1;o.busy(!0);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(!1),f=o.getHashByState(a),l=o.getHash(),c=o.expectedStateId==s.id;return o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),u===f?(o.busy(!1),!1):(o.saveState(s),c||o.Adapter.trigger(e,"statechange"),!o.isHashEqual(u,l)&&!o.isHashEqual(u,o.getShortUrl(o.getLocationHref()))&&o.setHash(u,!1),o.busy(!1),!0)},o.replaceState=function(t,n,r,i){if(r=encodeURI(r).replace(/%25/g,"%"),o.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==i&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:i}),!1;o.busy(!0);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(!1),f=o.getHashByState(a),l=o.getStateByIndex(-2);return o.discardState(a,s,l),u===f?(o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),o.saveState(s),o.Adapter.trigger(e,"statechange"),o.busy(!1)):o.pushState(s.data,s.title,s.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad((function(){o.Adapter.trigger(e,"hashchange")}))},void 0!==o.init&&o.init()}(window),function(e,t){"use strict";var n=e.console||t,r=e.document,i=e.navigator,s=!1,o=e.setTimeout,u=e.clearTimeout,a=e.setInterval,f=e.clearInterval,l=e.JSON,c=e.alert,h=e.History=e.History||{},p=e.history;try{(s=e.sessionStorage).setItem("TEST","1"),s.removeItem("TEST")}catch(d){s=!1}if(l.stringify=l.stringify||l.encode,l.parse=l.parse||l.decode,void 0!==h.init)throw new Error("History.js Core has already been loaded...");h.init=function(e){return void 0!==h.Adapter&&(void 0!==h.initCore&&h.initCore(),void 0!==h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(d){if(void 0!==h.initCore.initialized)return!1;if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.disableSuid=h.options.disableSuid||!1,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||r.title,h.options.html4Mode=h.options.html4Mode||!1,h.options.delayInit=h.options.delayInit||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if(null!=t){for(e=0;e<t.length;e++)f(t[e]);h.intervalList=null}},h.debug=function(){h.options.debug&&h.log.apply(h,arguments)},h.log=function(){var i,s,o,u,a,e=void 0!==n&&void 0!==n.log&&void 0!==n.log.apply,t=r.getElementById("log");for(e?(i=(u=Array.prototype.slice.call(arguments)).shift(),void 0!==n.debug?n.debug.apply(n,[i,u]):n.log.apply(n,[i,u])):i="\n"+arguments[0]+"\n",s=1,o=arguments.length;s<o;++s){if("object"==typeof(a=arguments[s])&&void 0!==l)try{a=l.stringify(a)}catch(f){}i+="\n"+a+"\n"}return t?(t.value+=i+"\n-----\n",t.scrollTop=t.scrollHeight-t.clientHeight):e||c(i),!0},h.getInternetExplorerMajorVersion=function(){var e=h.getInternetExplorerMajorVersion.cached=void 0!==h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=r.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e")&&n[0];);return e>4&&e}();return e},h.isInternetExplorer=function(){return h.isInternetExplorer.cached=void 0!==h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion())},h.options.html4Mode?h.emulated={pushState:!0,hashChange:!0}:h.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},h.cloneObject=function(e){var t,n;return e?(t=l.stringify(e),n=l.parse(t)):n={},n},h.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);return r.location.port&&(e+=":"+r.location.port),e+="/"},h.getBaseHref=function(){var e=r.getElementsByTagName("base"),n="";return 1===e.length&&(n=e[0].href.replace(/[^\/]+$/,"")),(n=n.replace(/\/+$/,""))&&(n+="/"),n},h.getBaseUrl=function(){return h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl()},h.getPageUrl=function(){var n;return n=((h.getState(!1,!1)||{}).url||h.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,(function(e,t,n){return/\./.test(e)?e:e+"/"})),n},h.getBasePageUrl=function(){return h.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,(function(e,t,n){return/[^\/]$/.test(e)?"":e})).replace(/\/+$/,"")+"/"},h.getFullUrl=function(e,t){var n=e,r=e.substring(0,1);return t=void 0===t||t,/[a-z]+\:\/\//.test(e)||(n="/"===r?h.getRootUrl()+e.replace(/^\/+/,""):"#"===r?h.getPageUrl().replace(/#.*/,"")+e:"?"===r?h.getPageUrl().replace(/[\?#].*/,"")+e:t?h.getBaseUrl()+e.replace(/^(\.\/)+/,""):h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),r=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(r,"/"),h.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},h.getLocationHref=function(e){return(e=e||r).URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash||-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=h.getLastSavedState();return!n&&t&&(n=h.createStateObject()),e&&((n=h.cloneObject(n)).url=n.cleanUrl||n.url),n},h.getIdByState=function(e){var n,t=h.extractId(e.url);if(!t)if(n=h.getStateString(e),void 0!==h.stateToId[n])t=h.stateToId[n];else if(void 0!==h.store.stateToId[n])t=h.store.stateToId[n];else{for(;t=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0!==h.idToState[t]||void 0!==h.store.idToState[t];);h.stateToId[n]=t,h.idToState[t]=e}return t},h.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),void 0!==e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),(t={}).normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(e.url?e.url:h.getLocationHref()),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!h.isEmptyObject(t.data),(t.title||n)&&!0!==h.options.disableSuid&&(t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=h.getFullUrl(t.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},h.createStateObject=function(e,t,n){var r={data:e,title:t,url:n};return r=h.normalizeState(r)},h.getStateById=function(e){return e=String(e),h.idToState[e]||h.store.idToState[e]||t},h.getStateString=function(e){var n;return n={data:h.normalizeState(e).data,title:e.title,url:e.url},l.stringify(n)},h.getStateId=function(e){return h.normalizeState(e).id},h.getHashByState=function(e){return h.normalizeState(e).hash},h.extractId=function(e){var n,i;return i=-1!=e.indexOf("#")?e.split("#")[0]:e,(n=/(.*)\&_suid=([0-9]+)$/.exec(i))&&n[1]||e,(n?String(n[2]||""):"")||!1},h.isTraditionalAnchor=function(e){return!/[\/\?\.]/.test(e)},h.extractState=function(e,t){var r,i,n=null;return t=t||!1,(r=h.extractId(e))&&(n=h.getStateById(r)),n||(i=h.getFullUrl(e),(r=h.getIdByUrl(i)||!1)&&(n=h.getStateById(r)),!n&&t&&!h.isTraditionalAnchor(e)&&(n=h.createStateObject(null,null,i))),n},h.getIdByUrl=function(e){return h.urlToId[e]||h.store.urlToId[e]||t},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||t},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||t},h.hasUrlDuplicate=function(e){var n;return(n=h.extractState(e.url))&&n.id!==e.id},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var t=!1;return h.savedStates.length&&(t=e.id===h.getLastSavedState().id),t},h.saveState=function(e){return!h.isLastSavedState(e)&&(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){return void 0===e?h.savedStates[h.savedStates.length-1]:e<0?h.savedStates[h.savedStates.length+e]:h.savedStates[e]},h.getCurrentIndex=function(){return h.savedStates.length<1?0:h.savedStates.length-1},h.getHash=function(e){var t=h.getLocationHref(e);return h.getHashByUrl(t)},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=decodeURIComponent(t)},h.normalizeHash=function(e){return e.replace(/[^#]*#/,"").replace(/#.*/,"")},h.setHash=function(e,t){var n,i;return!1!==t&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(h.busy(!0),(n=h.extractState(e,!0))&&!h.emulated.pushState?h.pushState(n.data,n.title,n.url,!1):h.getHash()!==e&&(h.bugs.setHash?(i=h.getPageUrl(),h.pushState(null,null,i+"#"+e,!1)):r.location.hash=e),h)},h.escapeHash=function(t){var n=h.normalizeHash(t);return n=e.encodeURIComponent(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=h.unescapeHash(t)},h.setTitle=function(e){var n,t=e.title;t||(n=h.getStateByIndex(0))&&n.url===e.url&&(t=n.title||h.options.initialTitle);try{r.getElementsByTagName("title")[0].innerHTML=t.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(i){}return r.title=t,h},h.queues=[],h.busy=function(e){if(void 0!==e?h.busy.flag=e:void 0===h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){u(h.busy.timeout);var t=function(){var e,n,r;if(!h.busy.flag)for(e=h.queues.length-1;e>=0;--e)0!==(n=h.queues[e]).length&&(r=n.shift(),h.fireQueueItem(r),h.busy.timeout=o(t,h.options.busyDelay))};h.busy.timeout=o(t,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),void 0!==t&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(u(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=o((function(){return h.doubleCheckClear(),h.stateChanged||e(),!0}),h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var t=h.extractState(h.getLocationHref());if(!h.isLastSavedState(t))return t||h.createStateObject(),h.Adapter.trigger(e,"popstate"),h},h.back=function(e){return!1!==e&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck((function(){h.back(!1)})),p.go(-1),!0)},h.forward=function(e){return!1!==e&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck((function(){h.forward(!1)})),p.go(1),!0)},h.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)h.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)h.back(t)}return h},h.emulated.pushState){var v=function(){};h.pushState=h.pushState||v,h.replaceState=h.replaceState||v}else h.onPopState=function(t,n){var s,o,r=!1,i=!1;return h.doubleCheckComplete(),(s=h.getHash())?((o=h.extractState(s||h.getLocationHref(),!0))?h.replaceState(o.data,o.title,o.url,!1):(h.Adapter.trigger(e,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):((i=(r=h.Adapter.extractEventData("state",t,n)||!1)?h.getStateById(r):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(h.getLocationHref()))||(i=h.createStateObject(null,null,h.getLocationHref())),h.expectedStateId=!1,h.isLastSavedState(i)?(h.busy(!1),!1):(h.storeState(i),h.saveState(i),h.setTitle(i),h.Adapter.trigger(e,"statechange"),h.busy(!1),!0))},h.Adapter.bind(e,"popstate",h.onPopState),h.pushState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.pushState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0},h.replaceState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.replaceState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0};if(s){try{h.store=l.parse(s.getItem("History.store"))||{}}catch(m){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(h.getLocationHref(),!0))),s&&(h.onUnload=function(){var e,t,n;try{e=l.parse(s.getItem("History.store"))||{}}catch(r){e={}}for(t in e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{},h.idToState)h.idToState.hasOwnProperty(t)&&(e.idToState[t]=h.idToState[t]);for(t in h.urlToId)h.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=h.urlToId[t]);for(t in h.stateToId)h.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=h.stateToId[t]);h.store=e,h.normalizeStore(),n=l.stringify(e);try{s.setItem("History.store",n)}catch(i){if(i.code!==DOMException.QUOTA_EXCEEDED_ERR)throw i;s.length&&(s.removeItem("History.store"),s.setItem("History.store",n))}},h.intervalList.push(a(h.onUnload,h.options.storeInterval)),h.Adapter.bind(e,"beforeunload",h.onUnload),h.Adapter.bind(e,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(a(h.safariStatePoll,h.options.safariPollInterval)),"Apple Computer, Inc."!==i.vendor&&"Mozilla"!==(i.appCodeName||"")||(h.Adapter.bind(e,"hashchange",(function(){h.Adapter.trigger(e,"popstate")})),h.getHash()&&h.Adapter.onDomLoad((function(){h.Adapter.trigger(e,"hashchange")}))))},(!h.options||!h.options.delayInit)&&h.init()}(window)},517:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,jQuery=__webpack_require__(1),$=__webpack_require__(1);__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(94)],__WEBPACK_AMD_DEFINE_FACTORY__=function(E){"use strict";var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function k(){return void 0!==jQuery||void 0!==$}function i(t,e){return t[e.x_accessor]>=e.processed.min_x&&t[e.x_accessor]<=e.processed.max_x&&t[e.y_accessor]>=e.processed.min_y&&t[e.y_accessor]<=e.processed.max_y}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t){var e=t.map((function(t){return!0===u(t)&&0<t.length}));return E.sum(e)===t.length}function n(t){var e=t.map((function(t){return 1==(e=t,"[object Object]"===Object.prototype.toString.call(e));var e}));return E.sum(e)===t.length}function e(t){return u(e=t)&&0===e.length||n(t);var e}function w(t){return t.height-t.bottom}function v(t){return w(t)-t.buffer}function M(t){return t.top}function b(t){return M(t)+t.buffer}function G(t){return t.left}function Y(t){return G(t)+t.buffer}function A(t){return t.width-t.right}function P(t){return A(t)-t.buffer}function _(t){t.exit().remove()}function D(t,e){t.selectAll(e).remove()}function S(t,e){return t.append("g").classed(e,!0)}function r(t,e){var r=O(t.target),a=h(t.data),n=r.selectAll("line."+e).data(a);return n.enter().append("line").attr("class",e).attr("opacity",.3),_(n),_(n),n}function m(t,e,r){e.color_accessor?(t.attr("stroke",e.scalefns.colorf),t.classed(r,!1)):(t.attr("stroke",null),t.classed(r,!0))}function l(t,e){e&&t.attr({dy:0,transform:function(){var t=E.select(this);return"rotate("+e+" "+t.attr("x")+","+t.attr("y")+")"}})}function g(t){if(!(t=t.node()))return!1;for(var e=0;e<t.length;e++)if(o(t[e],t))return!0;return!1}function o(t,e){for(var r=t.getBoundingClientRect(),a=0;a<e.length;a++)if(e[a]!=t){var n=e[a].getBoundingClientRect();if(r.top===n.top&&!(n.left>r.right||n.right<r.left))return!0}return!1}function s(t,e){var r=h(t.data);return"string"==typeof(r=r[0][t[e+"_accessor"]])?"categorical":"numerical"}function O(t){return E.select(t).select("svg")}function h(t){var e=[];return e.concat.apply(e,t)}function z(t){if("string"==typeof t)return F(t);if(t instanceof window.HTMLElement){var e=t.getAttribute("data-mg-uid");return e||(void 0===MG._next_elem_id&&(MG._next_elem_id=0),e="mg-"+MG._next_elem_id++,t.setAttribute("data-mg-uid",e)),e}return console.warn("The specified target should be a string or an HTMLElement.",t),F(t)}function F(t){return t.replace(/[^a-zA-Z0-9 _-]+/g,"").replace(/ +?/g,"")}function d(t,e){return Number(E.select(t).style(e).replace(/px/g,""))}function f(t){return d(t,"width")}("undefined"==typeof window?__webpack_require__.g:window).MG={version:"2.11"},MG.convert={},MG.convert.date=function(t,e,r){r=void 0===r?"%Y-%m-%d":r;var a=E.timeParse(r);return t.map((function(t){return t[e]=a(t[e].trim()),t}))},MG.convert.number=function(t,e){return t.map((function(t){return t[e]=Number(t[e]),t}))},MG.time_format=function(t,e){return t?E.utcFormat(e):E.timeFormat(e)};var t=function(t,e,r){var a={};if(null===t)return t;if(Array.prototype.forEach&&t.forEach===Array.prototype.forEach)t.forEach(e,r);else if(t.length===+t.length){for(var n=0,o=t.length;n<o;n++)if(e.call(r,t[n],n,t)===a)return}else for(var i in t)if(e.call(r,t[i],i,t)===a)return;return t};function p(r){return t(Array.prototype.slice.call(arguments,1),(function(t){if(t)for(var e in t)void 0===r[e]&&(r[e]=t[e])})),r}function x(t){return"[object Date]"===Object.prototype.toString.call(t)}function y(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function C(t){return"[object Function]"===Object.prototype.toString.call(t)}function T(t,e){var r,a=[],n=[];for(r=0;r<e.length;r++)a[e[r]]=!0;for(r=0;r<t.length;r++)a[t[r]]||n.push(t[r]);return n}function R(t,e){console.warn("Deprecation: "+t+(e?". This feature will be removed in "+e+".":" the near future.")),console.trace()}function L(t,e,r){var a,n=0;for(t.textContent=e,a=t.getBBox();a.width>r&&(t.textContent=e.slice(0,--n)+"...",a=t.getBBox(),"..."!==t.textContent););}function j(t){var e=O(t.target);if(e.select(".mg-header").remove(),t.target&&t.title){var r=e.insert("text").attr("class","mg-header").attr("x",t.center_title_full_width?t.width/2:(t.width+t.left-t.right)/2).attr("y",t.title_y_position).attr("text-anchor","middle").attr("dy","0.55em");if(r.append("tspan").attr("class","mg-chart-title").text(t.title),t.show_tooltips&&t.description&&k()){r.append("tspan").attr("class","mg-chart-description").attr("dx","0.3em").text("");var a=$(r.node());a.popover({html:!0,animation:!1,placement:"top",content:t.description,container:t.target,trigger:"manual",template:'<div class="popover mg-popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'}).on("mouseenter",(function(){E.selectAll(t.target).selectAll(".mg-popover").remove(),$(this).popover("show"),$(E.select(t.target).select(".popover").node()).on("mouseleave",(function(){a.popover("hide")}))})).on("mouseleave",(function(){setTimeout((function(){$(".popover:hover").length||a.popover("hide")}),120)}))}else t.show_tooltips&&t.description&&void 0===$&&(t.error="In order to enable tooltips, please make sure you include jQuery.")}t.error&&Xe(t)}function X(e,t,r,a,n){e.scalefns[t]=function(t){return void 0===n?e.scales[r](t[a]):e.scales[r](t[a])+n}}function U(t,e){return"bottom"===t||"top"===t?[Y(e),P(e)]:"left"===t||"right"===t?[v(e),e.top]:void 0}function N(t,e){return E.set(t.map((function(t){return t[e]}))).values()}function B(e){var t;return null===e.color_domain?"number"===e.color_type?t=E.extent(e.data[0],(function(t){return t[e.color_accessor]})):"category"===e.color_type&&(t=N(e.data[0],e.color_accessor)):t=e.color_domain,t}function I(t){return null===t.color_range?"number"===t.color_type?["blue","red"]:null:t.color_range}function H(t,e,r){var a=xt(t),n=a.secondary(t.processed.min_x,t.processed.max_x);0===n.length&&(n=[t.scales.X.ticks(t.xax_count)[0]]);var o,i,s,c=S(r,"mg-year-marker");"default"===a.timeframe&&t.show_year_markers&&(o=t,i=c,s=n,a.yformat,i.selectAll(".mg-year-marker").data(s).enter().append("line").attr("x1",(function(t){return o.scales.X(t).toFixed(2)})).attr("x2",(function(t){return o.scales.X(t).toFixed(2)})).attr("y1",M(o)).attr("y2",w(o))),"years"!=a.tick_diff_timeframe&&function(t,e,r,a,n){var o,i,s,c,l,u=e.position,d=e.namespace,f=t.scales[d.toUpperCase()],p=E.select(t.target).select(".mg-x-axis text").node().getBoundingClientRect();"top"===u&&(o=function(t,e){return f(t).toFixed(2)},i=M(t)-7*t.xax_tick_length/3-p.height,s=".50em",c="middle",l=function(t){return n(new Date(t))}),"bottom"===u&&(o=function(t,e){return f(t).toFixed(2)},i=w(t)+7*t.xax_tick_length/3+.8*p.height,s=".50em",c="middle",l=function(t){return n(new Date(t))}),r.selectAll(".mg-year-marker").data(a).enter().append("text").attr("x",o).attr("y",i).attr("dy",s).attr("text-anchor",c).text(l)}(t,e,c,n,a.yformat)}function q(t,a,e){var r,n,o,i,s,c,l,u=e.namespace,d=(r=a,o=(n=e).position,i=n.namespace,s=r[i+"ax_tick_length"],c=r.scales[i.toUpperCase()],l={},"left"===o&&(l.x=G(r)-3*s/2,l.y=function(t){return c(t).toFixed(2)},l.dx=-3,l.dy=".35em",l.textAnchor="end",l.text=function(t){return J(r)(t)}),"right"===o&&(l.x=A(r)+3*s/2,l.y=function(t){return c(t).toFixed(2)},l.dx=3,l.dy=".35em",l.textAnchor="start",l.text=function(t){return J(r)(t)}),"top"===o&&(l.x=function(t){return c(t).toFixed(2)},l.y=(M(r)-7*s/3).toFixed(2),l.dx=0,l.dy="0em",l.textAnchor="middle",l.text=function(t){return ht(r)(t)}),"bottom"===o&&(l.x=function(t){return c(t).toFixed(2)},l.y=(w(r)+7*s/3).toFixed(2),l.dx=0,l.dy=".50em",l.textAnchor="middle",l.text=function(t){return ht(r)(t)}),l),f=a.processed[u+"_ticks"],p=t.selectAll(".mg-yax-labels").data(f).enter().append("text").attr("x",d.x).attr("dx",d.dx).attr("y",d.y).attr("dy",d.dy).attr("text-anchor",d.textAnchor).text(d.text);"x"==u&&(a.time_series&&a.european_clock?(p.append("tspan").classed("mg-european-hours",!0).text((function(t,e){var r=new Date(t);return 0===e?E.timeFormat("%H")(r):""})),p.append("tspan").classed("mg-european-minutes-seconds",!0).text((function(t,e){var r=new Date(t);return":"+a.processed.xax_format(r)}))):p.text((function(t){return a.xax_units+a.processed.xax_format(t)})),a.time_series&&(a.show_years||a.show_secondary_x_label)&&H(a,e,t)),g(p)&&(p.filter((function(t,e){return(e+1)%2==0})).remove(),O(a.target).selectAll(".mg-"+u+"ax-ticks").filter((function(t,e){return(e+1)%2==0})).remove())}function V(t,e,r){var a,n,o,i,s,c,l,u,d=r.namespace,f=e.processed[d+"_ticks"].length,p=(a=e,o=(n=r).namespace,i=n.position,s=a.processed[o+"_ticks"].length,c=a.processed[o+"_ticks"],l=a.scales[o.toUpperCase()],u={},"left"===i&&(u.x1=G(a),u.x2=G(a),u.y1=l(c[0]).toFixed(2),u.y2=l(c[s-1]).toFixed(2)),"right"===i&&(u.x1=A(a),u.x2=A(a),u.y1=l(c[0]).toFixed(2),u.y2=l(c[s-1]).toFixed(2)),"top"===i&&(u.x1=G(a),u.x2=A(a),u.y1=M(a),u.y2=M(a)),"bottom"===i&&(u.x1=G(a),u.x2=A(a),u.y1=w(a),u.y2=w(a)),"left"!==i&&"right"!==i||(a.axes_not_compact?(u.y1=w(a),u.y2=M(a)):s&&(u.y1=l(c[0]).toFixed(2),u.y2=l(c[s-1]).toFixed(2))),u);e[d+"_extended_ticks"]||e[d+"_extended_ticks"]||!f||t.append("line").attr("x1",p.x1).attr("x2",p.x2).attr("y1",p.y1).attr("y2",p.y2)}function W(t,e){t.rug_buffer_size="point"===t.chart_type?t.buffer/2:2*t.buffer/3;var r,a,n,o,i,s,c,l,u,d,f=(r=t,a="mg-"+e.namespace+"-rug",n=O(r.target),o=h(r.data),(i=n.selectAll("line."+a).data(o)).enter().append("svg:line").attr("class",a).attr("opacity",.3),_(i),_(i),i),p=(s=t,l=(c=e).position,u=c.namespace,d={},"left"===l&&(d.x1=G(s)+1,d.x2=G(s)+s.rug_buffer_size,d.y1=s.scalefns[u+"f"],d.y2=s.scalefns[u+"f"]),"right"===l&&(d.x1=A(s)-1,d.x2=A(s)-s.rug_buffer_size,d.y1=s.scalefns[u+"f"],d.y2=s.scalefns[u+"f"]),"top"===l&&(d.x1=s.scalefns[u+"f"],d.x2=s.scalefns[u+"f"],d.y1=M(s)+1,d.y2=M(s)+s.rug_buffer_size),"bottom"===l&&(d.x1=s.scalefns[u+"f"],d.x2=s.scalefns[u+"f"],d.y1=w(s)-1,d.y2=w(s)-s.rug_buffer_size),d);f.attr("x1",p.x1).attr("x2",p.x2).attr("y1",p.y1).attr("y2",p.y2),m(f,t,"mg-"+e.namespace+"-rug-mono")}function Q(p,_){var m=_.namespace,t="mg-"+m+"-axis",g=p.scales[m.toUpperCase()],e=p.scales[(m+"group").toUpperCase()],h=m+"group_accessor",r=O(p.target);D(r,"."+t);var x,y=S(r,t);(e.domain&&e.domain()?e.domain():["1"]).forEach((function(t){var e,r,a,n,o,i,s,c,l,u,d=(e=p,a=t,n=(r=_).namespace,o=r.position,i=e.scales[n.toUpperCase()],s=e.scales[(n+"group").toUpperCase()],c={cat:{},group:{}},"left"===o&&(c.cat.x=Y(e)-e.buffer,c.cat.y=function(t){return s(a)+i(t)+i.bandwidth()/2},c.cat.dy=".35em",c.cat.textAnchor="end",c.group.x=Y(e)-e.buffer,c.group.y=s(a)+(s.bandwidth?s.bandwidth()/2:0),c.group.dy=".35em",c.group.textAnchor=(e["rotate_"+n+"_labels"],"end")),"right"===o&&(c.cat.x=P(e)-e.buffer,c.cat.y=function(t){return s(a)+i(t)+i.bandwidth()/2},c.cat.dy=".35em",c.cat.textAnchor="start",c.group.x=P(e)-e.buffer,c.group.y=s(a)+(s.bandwidth?s.bandwidth()/2:0),c.group.dy=".35em",c.group.textAnchor="start"),"top"===o&&(c.cat.x=function(t){return s(a)+i(t)+i.bandwidth()/2},c.cat.y=b(e)+e.buffer,c.cat.dy=".35em",c.cat.textAnchor=e["rotate_"+n+"_labels"]?"start":"middle",c.group.x=s(a)+(s.bandwidth?s.bandwidth()/2:0),c.group.y=b(e)+e.buffer,c.group.dy=".35em",c.group.textAnchor=e["rotate_"+n+"_labels"]?"start":"middle"),"bottom"===o&&(c.cat.x=function(t){return s(a)+i(t)+i.bandwidth()/2},c.cat.y=v(e)+e.buffer,c.cat.dy=".35em",c.cat.textAnchor=e["rotate_"+n+"_labels"]?"start":"middle",c.group.x=s(a)+(s.bandwidth?s.bandwidth()/2-i.bandwidth()/2:0),c.group.y=v(e)+e.buffer,c.group.dy=".35em",c.group.textAnchor=e["rotate_"+n+"_labels"]?"start":"middle"),c);if(x=S(y,"mg-group-"+F(t)),null!==p[h])var f=x.append("text").classed("mg-barplot-group-label",!0).attr("x",d.group.x).attr("y",d.group.y).attr("dy",d.group.dy).attr("text-anchor",d.group.textAnchor).text(t);else f=x.selectAll("text").data(g.domain()).enter().append("text").attr("x",d.cat.x).attr("y",d.cat.y).attr("dy",d.cat.dy).attr("text-anchor",d.cat.textAnchor).text(String);p["rotate_"+m+"_labels"]&&(l=f,(u=p["rotate_"+m+"_labels"])&&l.attr("transform",(function(){var t=E.select(this);return"rotate("+u+" "+t.attr("x")+","+t.attr("y")+")"})))}))}MG.merge_with_defaults=p,MG.clone=function(t){var e,r;if(null===t||"object"!==(void 0===t?"undefined":c(t)))return t;if(x(t))return(e=new Date).setTime(t.getTime()),e;if(y(t)){e=[];for(var a=0,n=t.length;a<n;a++)e[a]=MG.clone(t[a]);return e}if(r=t,"[object Object]"===Object.prototype.toString.call(r)){for(var o in e={},t)t.hasOwnProperty(o)&&(e[o]=MG.clone(t[o]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")},MG.arr_diff=T,MG.warn_deprecation=R,MG.truncate_text=L,MG.wrap_text=function(t,i,s,c){t.each((function(){for(var t,e=E.select(this),r=e.text().split(s||/\s+/).reverse(),a=[],n=0,o=(e.attr("y"),e.text(null).append("tspan").attr("x",0).attr("y","0em").attr(c||{}));t=r.pop();)a.push(t),o.text(a.join(" ")),(null===i||o.node().getComputedTextLength()>i)&&(a.pop(),o.text(a.join(" ")),a=[t],o=e.append("tspan").attr("x",0).attr("y",1.1*++n+0+"em").attr(c||{}).text(t))}))},MG.register=function(t,e,r){MG.charts[t]={descriptor:e,defaults:r||{}}},MG._hooks={},MG.add_hook=function(t,e,r){var a;if(MG._hooks[t]||(MG._hooks[t]=[]),0<(a=MG._hooks[t]).filter((function(t){return t.func===e})).length)throw"That function is already registered.";a.push({func:e,context:r})},MG.call_hook=function(t){var r,e=MG._hooks[t],a=[].slice.apply(arguments,[1]);return e&&e.forEach((function(t){if(t.func){var e=r||a;e&&e.constructor!==Array&&(e=[e]),e=[].concat.apply([],e),r=t.func.apply(t.context,e)}})),r||a},MG.globals={},MG.deprecations={rollover_callback:{replacement:"mouseover",version:"2.0"},rollout_callback:{replacement:"mouseout",version:"2.0"},x_rollover_format:{replacement:"x_mouseover",version:"2.10"},y_rollover_format:{replacement:"y_mouseover",version:"2.10"},show_years:{replacement:"show_secondary_x_label",version:"2.1"},xax_start_at_min:{replacement:"axes_not_compact",version:"2.7"},interpolate_tension:{replacement:"interpolate",version:"2.10"}},MG.globals.link=!1,MG.globals.version="1.1",MG.charts={},MG.data_graphic=function(t){var e={missing_is_zero:!1,missing_is_hidden:!1,missing_is_hidden_accessor:null,legend:"",legend_target:"",error:"",animate_on_load:!1,top:65,title_y_position:10,center_title_full_width:!1,bottom:45,right:10,left:50,buffer:8,width:350,height:220,full_width:!1,full_height:!1,small_height_threshold:120,small_width_threshold:160,xax_count:6,xax_tick_length:5,axes_not_compact:!0,yax_count:3,yax_tick_length:5,x_extended_ticks:!1,y_extended_ticks:!1,y_scale_type:"linear",max_x:null,max_y:null,min_x:null,min_y:null,min_y_from_data:!1,point_size:2.5,active_point_on_lines:!1,active_point_accessor:"active",active_point_size:2,points_always_visible:!1,x_accessor:"date",xax_units:"",x_label:"",x_sort:!0,x_axis:!0,y_axis:!0,x_axis_position:"bottom",y_axis_position:"left",x_axis_type:null,y_axis_type:null,ygroup_accessor:null,xgroup_accessor:null,y_padding_percentage:.05,y_outer_padding_percentage:.1,ygroup_padding_percentage:.25,ygroup_outer_padding_percentage:0,x_padding_percentage:.05,x_outer_padding_percentage:.1,xgroup_padding_percentage:.25,xgroup_outer_padding_percentage:0,y_categorical_show_guides:!1,x_categorical_show_guide:!1,rotate_x_labels:0,rotate_y_labels:0,y_accessor:"value",y_label:"",yax_units:"",yax_units_append:!1,x_rug:!1,y_rug:!1,mouseover_align:"right",x_mouseover:null,y_mouseover:null,transition_on_update:!0,mouseover:null,click:null,show_rollover_text:!0,show_confidence_band:null,xax_format:null,area:!0,flip_area_under_y_value:null,chart_type:"line",data:[],decimals:2,format:"count",inflator:10/9,linked:!1,linked_format:"%Y-%m-%d",list:!1,baselines:null,markers:null,scalefns:{},scales:{},utc_time:!1,european_clock:!1,show_year_markers:!1,show_secondary_x_label:!0,target:"#viz",interpolate:E.curveCatmullRom.alpha(0),custom_line_color_map:[],colors:null,max_data_size:null,aggregate_rollover:!1,show_tooltips:!0,showActivePoint:!0,brush:null,zoom_target:null,brushing_selection_changed:null};MG.call_hook("global.defaults",e),t||(t={});var r=MG.charts[t.chart_type||e.chart_type];for(var a in p(t,r.defaults,e),t.list&&(t.x_accessor=0,t.y_accessor=1),MG.deprecations)if(t.hasOwnProperty(a)){var n=MG.deprecations[a],o="Use of `args."+a+"` has been deprecated",i=n.replacement;if(i&&(t[i]?o+=". The replacement - `args."+i+"` - has already been defined. This definition will be discarded.":t[i]=t[a]),n.warned)continue;n.warned=!0,i&&(o+=" in favor of `args."+i+"`"),R(o,n.version)}return MG.call_hook("global.before_init",t),new r.descriptor(t),t.data},k()&&(function(m){var g=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};g.VERSION="3.3.5",g.TRANSITION_DURATION=150,g.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},g.prototype.init=function(t,e,r){if(this.enabled=!0,this.type=t,this.$element=m(e),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&m(m.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var a=this.options.trigger.split(" "),n=a.length;n--;){var o=a[n];if("click"==o)this.$element.on("click."+this.type,this.options.selector,m.proxy(this.toggle,this));else if("manual"!=o){var i="hover"==o?"mouseenter":"focusin",s="hover"==o?"mouseleave":"focusout";this.$element.on(i+"."+this.type,this.options.selector,m.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,m.proxy(this.leave,this))}}this.options.selector?this._options=m.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},g.prototype.getDefaults=function(){return g.DEFAULTS},g.prototype.getOptions=function(t){return(t=m.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},g.prototype.getDelegateOptions=function(){var r={},a=this.getDefaults();return this._options&&m.each(this._options,(function(t,e){a[t]!=e&&(r[t]=e)})),r},g.prototype.enter=function(t){var e=t instanceof this.constructor?t:m(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),m(t.currentTarget).data("bs."+this.type,e)),t instanceof m.Event&&(e.inState["focusin"==t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"==e.hoverState)e.hoverState="in";else{if(clearTimeout(e.timeout),e.hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout((function(){"in"==e.hoverState&&e.show()}),e.options.delay.show)}},g.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},g.prototype.leave=function(t){var e=t instanceof this.constructor?t:m(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),m(t.currentTarget).data("bs."+this.type,e)),t instanceof m.Event&&(e.inState["focusout"==t.type?"focus":"hover"]=!1),!e.isInStateTrue()){if(clearTimeout(e.timeout),e.hoverState="out",!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout((function(){"out"==e.hoverState&&e.hide()}),e.options.delay.hide)}},g.prototype.show=function(){var t=m.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var e=m.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!e)return;var r=this,a=this.tip(),n=this.getUID(this.type);this.setContent(),a.attr("id",n),this.$element.attr("aria-describedby",n),this.options.animation&&a.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,s=i.test(o);s&&(o=o.replace(i,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),l=a[0].offsetWidth,u=a[0].offsetHeight;if(s){var d=o,f=this.getPosition(this.$viewport);o="bottom"==o&&c.bottom+u>f.bottom?"top":"top"==o&&c.top-u<f.top?"bottom":"right"==o&&c.right+l>f.width?"left":"left"==o&&c.left-l<f.left?"right":o,a.removeClass(d).addClass(o)}var p=this.getCalculatedOffset(o,c,l,u);this.applyPlacement(p,o);var _=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};m.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",_).emulateTransitionEnd(g.TRANSITION_DURATION):_()}},g.prototype.applyPlacement=function(t,e){var r=this.tip(),a=r[0].offsetWidth,n=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),i=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(i)&&(i=0),t.top+=o,t.left+=i,m.offset.setOffset(r[0],m.extend({using:function(t){r.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),r.addClass("in");var s=r[0].offsetWidth,c=r[0].offsetHeight;"top"==e&&c!=n&&(t.top=t.top+n-c);var l=this.getViewportAdjustedDelta(e,t,s,c);l.left?t.left+=l.left:t.top+=l.top;var u=/top|bottom/.test(e),d=u?2*l.left-a+s:2*l.top-n+c,f=u?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(d,r[0][f],u)},g.prototype.replaceArrow=function(t,e,r){this.arrow().css(r?"left":"top",50*(1-t/e)+"%").css(r?"top":"left","")},g.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},g.prototype.hide=function(t){var e=this,r=m(this.$tip),a=m.Event("hide.bs."+this.type);function n(){"in"!=e.hoverState&&r.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),t&&t()}if(this.$element.trigger(a),!a.isDefaultPrevented())return r.removeClass("in"),m.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(g.TRANSITION_DURATION):n(),this.hoverState=null,this},g.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},g.prototype.hasContent=function(){return this.getTitle()},g.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],r="BODY"==e.tagName,a=e.getBoundingClientRect();null==a.width&&(a=m.extend({},a,{width:a.right-a.left,height:a.bottom-a.top}));var n=r?{top:0,left:0}:t.offset(),o={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},i=r?{width:m(window).width(),height:m(window).height()}:null;return m.extend({},a,o,i,n)},g.prototype.getCalculatedOffset=function(t,e,r,a){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-r/2}:"top"==t?{top:e.top-a,left:e.left+e.width/2-r/2}:"left"==t?{top:e.top+e.height/2-a/2,left:e.left-r}:{top:e.top+e.height/2-a/2,left:e.left+e.width}},g.prototype.getViewportAdjustedDelta=function(t,e,r,a){var n={top:0,left:0};if(!this.$viewport)return n;var o=this.options.viewport&&this.options.viewport.padding||0,i=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-o-i.scroll,c=e.top+o-i.scroll+a;s<i.top?n.top=i.top-s:c>i.top+i.height&&(n.top=i.top+i.height-c)}else{var l=e.left-o,u=e.left+o+r;l<i.left?n.left=i.left-l:u>i.right&&(n.left=i.left+i.width-u)}return n},g.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},g.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},g.prototype.tip=function(){if(!this.$tip&&(this.$tip=m(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},g.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},g.prototype.enable=function(){this.enabled=!0},g.prototype.disable=function(){this.enabled=!1},g.prototype.toggleEnabled=function(){this.enabled=!this.enabled},g.prototype.toggle=function(t){var e=this;t&&((e=m(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),m(t.currentTarget).data("bs."+this.type,e))),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},g.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide((function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null}))};var t=m.fn.tooltip;m.fn.tooltip=function(a){return this.each((function(){var t=m(this),e=t.data("bs.tooltip"),r="object"==(void 0===a?"undefined":c(a))&&a;!e&&/destroy|hide/.test(a)||(e||t.data("bs.tooltip",e=new g(this,r)),"string"==typeof a&&e[a]())}))},m.fn.tooltip.Constructor=g,m.fn.tooltip.noConflict=function(){return m.fn.tooltip=t,this}}(jQuery),function(n){var o=function(t,e){this.init("popover",t,e)};if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");o.VERSION="3.3.5",o.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((o.prototype=n.extend({},n.fn.tooltip.Constructor.prototype)).constructor=o).prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),r=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof r?"html":"append":"text"](r),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},o.prototype.hasContent=function(){return this.getTitle()||this.getContent()},o.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var t=n.fn.popover;n.fn.popover=function(a){return this.each((function(){var t=n(this),e=t.data("bs.popover"),r="object"==(void 0===a?"undefined":c(a))&&a;!e&&/destroy|hide/.test(a)||(e||t.data("bs.popover",e=new o(this,r)),"string"==typeof a&&e[a]())}))},n.fn.popover.Constructor=o,n.fn.popover.noConflict=function(){return n.fn.popover=t,this}}(jQuery)),MG.chart_title=j,MG.scale_factory=function(o){var i={use_inflator:!1,zero_bottom:!1,scaleType:"numerical"};return this.namespace=function(t){return i.namespace=t,i.namespace_accessor_name=i.namespace+"_accessor",i.scale_name=i.namespace.toUpperCase(),i.scalefn_name=i.namespace+"f",this},this.scaleName=function(t){return i.scale_name=t.toUpperCase(),i.scalefn_name=t+"f",this},this.inflateDomain=function(t){return i.use_inflator=t,this},this.zeroBottom=function(t){return i.zero_bottom=t,this},this.numericalDomainFromData=function(){var t,e=[];0<arguments.length&&(e=arguments);for(var r=0;r<o.data.length;r++)0<o.data[r].length&&(t=o.data[r]);i.is_time_series=!!x(t[0][o[i.namespace_accessor_name]]),X(o,i.scalefn_name,i.scale_name,o[i.namespace_accessor_name]),function(t,e,r){var a=e.namespace,n=e.namespace_accessor_name,o=e.use_inflator,i=e.zero_bottom,s=t[n],c=h(t.data).map((function(t){return t[s]})).concat(h(r));"log"===t[a+"_scale_type"]&&(c=c.filter((function(t){return 0<t})));var l=E.extent(c),u=l[0],d=l[1];i&&!t["min_"+a+"_from_data"]&&0<u&&!e.is_time_series&&(u="log"===t[a+"_scale_type"]?1:0),"log"!==t[a+"_scale_type"]&&u<0&&!e.is_time_series&&(u-=(u-u*t.inflator)*o),e.is_time_series||(d=d<0?d+(d-d*t.inflator)*o:d*(o?t.inflator:1)),(u=null!=t["min_"+a]?t["min_"+a]:u)===(d=null!=t["max_"+a]?t["max_"+a]:d)&&null==t["min_"+a]&&null==t["max_"+a]&&(x(u)?d=new Date(MG.clone(u).setDate(u.getDate()+1)):"number"==typeof u&&(d=u+1,t.xax_count=2)),t.processed["min_"+a]=u,t.processed["max_"+a]=d,t.processed["zoom_"+a]&&(t.processed["min_"+a]=t.processed["zoom_"+a][0],t.processed["max_"+a]=t.processed["zoom_"+a][1]),MG.call_hook("x_axis.process_min_max",t,t.processed.min_x,t.processed.max_x),MG.call_hook("y_axis.process_min_max",t,t.processed.min_y,t.processed.max_y)}(o,i,e,i.use_inflator);var a=o.utc_time?E.scaleUtc():E.scaleTime();return o.scales[i.scale_name]=i.is_time_series?a:C(o[i.namespace+"_scale_type"])?o.y_scale_type():"log"===o[i.namespace+"_scale_type"]?E.scaleLog():E.scaleLinear(),o.scales[i.scale_name].domain([o.processed["min_"+i.namespace],o.processed["max_"+i.namespace]]),i.scaleType="numerical",this},this.categoricalDomain=function(t){return o.scales[i.scale_name]=E.scaleOrdinal().domain(t),X(o,i.scalefn_name,i.scale_name,o[i.namespace_accessor_name]),this},this.categoricalDomainFromData=function(){var t=h(o.data);return i.categoricalVariables=E.set(t.map((function(t){return t[o[i.namespace_accessor_name]]}))).values(),o.scales[i.scale_name]=E.scaleBand().domain(i.categoricalVariables),i.scaleType="categorical",this},this.numericalRange=function(t){return"string"==typeof t?o.scales[i.scale_name].range(U(t,o)):o.scales[i.scale_name].range(t),this},this.categoricalRangeBands=function(t,e){void 0===e&&(e=!1);var r=i.namespace,a=o[r+"_padding_percentage"],n=o[r+"_outer_padding_percentage"];return"string"==typeof t?o.scales[i.scale_name].range(U(t,o)).paddingInner(a).paddingOuter(n):o.scales[i.scale_name].range(t).paddingInner(a).paddingOuter(n),X(o,i.scalefn_name,i.scale_name,o[i.namespace_accessor_name],e?o.scales[i.scale_name].bandwidth()/2:0),this},this.categoricalRange=function(t){return o.scales[i.scale_name].range(t),X(o,i.scalefn_name,i.scale_name,o[i.namespace_accessor_name]),this},this.categoricalColorRange=function(){return o.scales[i.scale_name]=10<o.scales[i.scale_name].domain().length?E.scaleOrdinal(E.schemeCategory20):E.scaleOrdinal(E.schemeCategory10),o.scales[i.scale_name].domain(i.categoricalVariables),X(o,i.scalefn_name,i.scale_name,o[i.namespace_accessor_name]),this},this.clamp=function(t){return o.scales[i.scale_name].clamp(t),this},this};var Z={};function K(t){if(t.y_rug){t.rug_buffer_size="point"===t.chart_type?t.buffer/2:2*t.buffer/3;var e=r(t,"mg-y-rug");e.attr("x1",t.left+1).attr("x2",t.left+t.rug_buffer_size).attr("y1",t.scalefns.yf).attr("y2",t.scalefns.yf),m(e,t,"mg-y-rug-mono")}}function J(r){var t=r.yax_format;if(!t){var a=r.decimals;"count"===r.format?(1<r.processed.y_ticks.length&&(a=Math.max(0,-Math.floor(Math.log(Math.abs(r.processed.y_ticks[1]-r.processed.y_ticks[0]))/Math.LN10))),t=function(t){var e;return e=0!==a?E.format(",."+a+"f"):t<1e3?E.format(",.0f"):E.format(",.2s"),r.yax_units_append?e(t)+r.yax_units:r.yax_units+e(t)}):t=function(t){return E.format(".0%")(t)}}return t}function tt(t){var e=O(t.target),r=t.scales.X.domain();if(r[0]<=0&&0<=r[1]){var a=t.scales.Y.range(),n=t.categorical_groups.length?t.scales.YGROUP(t.categorical_groups[t.categorical_groups.length-1]):t.scales.YGROUP();e.append("svg:line").attr("x1",t.scales.X(0)).attr("x2",t.scales.X(0)).attr("y1",a[0]+b(t)).attr("y2",a[a.length-1]+n).attr("stroke","black").attr("opacity",.2)}}function et(t,e){e.y_label&&t.append("text").attr("class","label").attr("x",(function(){return-1*(b(e)+(v(e)-b(e))/2)})).attr("y",(function(){return e.left/2})).attr("dy","-1.2em").attr("text-anchor","middle").text((function(t){return e.y_label})).attr("transform",(function(t){return"rotate(-90)"}))}function rt(t){t.processed||(t.processed={});var e=O(t.target);if(MG.call_hook("y_axis.process_min_max",t,t.processed.min_y,t.processed.max_y),D(e,".mg-y-axis"),!t.y_axis)return this;var r,a,n,o,i,s,c,l,u,d=S(e,"mg-y-axis");return et(d,t),ke(t,"y"),r=d,i=(a=t).processed.y_ticks.length,a.x_extended_ticks||a.y_extended_ticks||!i||(a.axes_not_compact&&"bar"!==a.chart_type?(n=a.height-a.bottom,o=a.top):i?(n=a.scales.Y(a.processed.y_ticks[0]).toFixed(2),o=a.scales.Y(a.processed.y_ticks[i-1]).toFixed(2)):o=n=0,r.append("line").attr("x1",a.left).attr("x2",a.left).attr("y1",n).attr("y2",o)),s=t,d.selectAll(".mg-yax-ticks").data(s.processed.y_ticks).enter().append("line").classed("mg-extended-yax-ticks",s.y_extended_ticks).attr("x1",s.left).attr("x2",(function(){return s.y_extended_ticks?s.width-s.right:s.left-s.yax_tick_length})).attr("y1",(function(t){return s.scales.Y(t).toFixed(2)})).attr("y2",(function(t){return s.scales.Y(t).toFixed(2)})),c=d,u=J(l=t),c.selectAll(".mg-yax-labels").data(l.processed.y_ticks).enter().append("text").attr("x",l.left-3*l.yax_tick_length/2).attr("dx",-3).attr("y",(function(t){return l.scales.Y(t).toFixed(2)})).attr("dy",".35em").attr("text-anchor","end").text((function(t){return u(t)})),t.y_rug&&K(t),this}function at(o){var t=O(o.target);D(t,".mg-y-axis");var i,s=S(t,"mg-y-axis");(o.categorical_groups.length?o.categorical_groups:["1"]).forEach((function(t){var e,r,a,n;i=S(s,"mg-group-"+F(t)),null!==o.ygroup_accessor?(a=t,n=o,i.append("svg:text").classed("mg-barplot-group-label",!0).attr("x",n.left-n.buffer).attr("y",n.scales.YGROUP(a)+n.scales.YGROUP.bandwidth()/2).attr("dy",".35em").attr("text-anchor","end").text(a)):l((e=t,r=o,i.selectAll("text").data(r.scales.Y.domain()).enter().append("svg:text").attr("x",r.left-r.buffer).attr("y",(function(t){return r.scales.YGROUP(e)+r.scales.Y(t)+r.scales.Y.bandwidth()/2})).attr("dy",".35em").attr("text-anchor","end").text(String)),o.rotate_y_labels)}))}function nt(t){if(t.x_rug){t.rug_buffer_size="point"===t.chart_type?t.buffer/2:t.buffer;var e=r(t,"mg-x-rug");e.attr("x1",t.scalefns.xf).attr("x2",t.scalefns.xf).attr("y1",t.height-t.bottom-t.rug_buffer_size).attr("y2",t.height-t.bottom),m(e,t,"mg-x-rug-mono")}}function ot(t){var e,r,a,n=O(t.target);if((e=t).processed||(e.processed={}),a=(r=t).chart_type,r.processed.xax_format||(r.xax_format?r.processed.xax_format=r.xax_format:"line"===a||"point"===a||"histogram"===a?r.processed.xax_format=ht(r):"bar"===a&&(r.processed.xax_format=ct(r))),D(n,".mg-x-axis"),!t.x_axis)return this;var o,i,s,c,l,u,d,f,p,_,m=S(n,"mg-x-axis");return o=m,ke(i=t,"x"),l=o,u=(c=i).scales.X.ticks(c.xax_count).length-1,c.x_extended_ticks||l.append("line").attr("x1",(function(){return 0===c.xax_count?Y(c):c.axes_not_compact&&"bar"!==c.chart_type?c.left:c.scales.X(c.scales.X.ticks(c.xax_count)[0]).toFixed(2)})).attr("x2",(function(){return 0===c.xax_count||c.axes_not_compact&&"bar"!==c.chart_type?A(c):c.scales.X(c.scales.X.ticks(c.xax_count)[u]).toFixed(2)})).attr("y1",c.height-c.bottom).attr("y2",c.height-c.bottom),s=i,o.selectAll(".mg-xax-ticks").data(s.processed.x_ticks).enter().append("line").attr("x1",(function(t){return s.scales.X(t).toFixed(2)})).attr("x2",(function(t){return s.scales.X(t).toFixed(2)})).attr("y1",s.height-s.bottom).attr("y2",(function(){return s.x_extended_ticks?s.top:s.height-s.bottom+s.xax_tick_length})).attr("class",(function(){if(s.x_extended_ticks)return"mg-extended-xax-ticks"})).classed("mg-xax-ticks",!0),function(a,t){var e=t.selectAll(".mg-xax-labels").data(a.processed.x_ticks).enter().append("text").attr("x",(function(t){return a.scales.X(t).toFixed(2)})).attr("y",(a.height-a.bottom+7*a.xax_tick_length/3).toFixed(2)).attr("dy",".50em").attr("text-anchor","middle");a.time_series&&a.european_clock?(e.append("tspan").classed("mg-european-hours",!0).text((function(t,e){var r=new Date(t);return 0===e?E.timeFormat("%H")(r):""})),e.append("tspan").classed("mg-european-minutes-seconds",!0).text((function(t,e){var r=new Date(t);return":"+a.processed.xax_format(r)}))):e.text((function(t){return a.xax_units+a.processed.xax_format(t)})),g(e)&&(e.filter((function(t,e){return(e+1)%2==0})).remove(),O(a.target).selectAll(".mg-xax-ticks").filter((function(t,e){return(e+1)%2==0})).remove())}(f=t,d=m),_=d,(p=f).time_series&&(p.show_years||p.show_secondary_x_label)&&function(t,e){var r=xt(t),a=r.secondary(t.processed.min_x,t.processed.max_x);0===a.length&&(a=[t.scales.X.ticks(t.xax_count)[0]]);var o,i,s,c,l,u,d,f=S(e,"mg-year-marker");"default"===r.timeframe&&t.show_year_markers&&(o=t,i=f,s=a,r.yformat,i.selectAll(".mg-year-marker").data(s).enter().append("line").attr("x1",(function(t){return o.scales.X(t).toFixed(2)})).attr("x2",(function(t){return o.scales.X(t).toFixed(2)})).attr("y1",M(o)).attr("y2",w(o))),"years"!=r.tick_diff_time_frame&&(c=t,l=f,u=a,d=r.yformat,l.selectAll(".mg-year-marker").data(u).enter().append("text").attr("x",(function(t,e){return c.scales.X(t).toFixed(2)})).attr("y",(function(){var t=E.select(c.target).select(".mg-x-axis text").node().getBoundingClientRect();return w(c)+7*c.xax_tick_length/3+.8*t.height})).attr("dy",".50em").attr("text-anchor","middle").text((function(t){return d(new Date(t))})))}(p,_),t.x_label&&st(m,t),t.x_rug&&nt(t),this}function B(e){var t;return null===e.color_domain?"number"===e.color_type?t=E.extent(e.data[0],(function(t){return t[e.color_accessor]})):"category"===e.color_type&&(t=E.set(e.data[0].map((function(t){return t[e.color_accessor]}))).values()).sort():t=e.color_domain,t}function I(t){return null===t.color_range?"number"===t.color_type?["blue","red"]:null:t.color_range}function it(t){return null===t.size_range?[1,5]:t.size_range}function st(t,e){e.x_label&&t.append("text").attr("class","label").attr("x",(function(){return Y(e)+(P(e)-Y(e))/2})).attr("dx",null!=e.x_label_nudge_x?e.x_label_nudge_x:0).attr("y",(function(){var t=E.select(e.target).select(".mg-x-axis text").node().getBoundingClientRect();return w(e)+e.xax_tick_length*(7/3)+.8*t.height+10})).attr("dy",".5em").attr("text-anchor","middle").text((function(t){return e.x_label}))}function ct(r){return function(t){if(t<1&&-1<t&&0!==t)return r.xax_units+t.toFixed(r.decimals);var e=E.format(",.0f");return r.xax_units+e(t)}}function lt(t){return ut(t)?"millis":dt(t)?"seconds":ft(t)?"less-than-a-day":pt(t)?"four-days":_t(t)?"many-days":mt(t)?"many-months":365<=t/86400?"years":"default"}function ut(t){return t<1}function dt(t){return t<60}function ft(t){return t/3600<24}function pt(t){return t/3600<96}function _t(t){return t/86400<60}function mt(t){return t/86400<365}function gt(t){if(t.time_series){var e=(t.processed.max_x-t.processed.min_x)/1e3,r=(t.processed.x_ticks[1]-t.processed.x_ticks[0])/1e3;t.processed.x_time_frame=lt(e),t.processed.x_tick_diff_time_frame=lt(r),t.processed.main_x_time_format=(a=t.utc_time,ut(n=r)?MG.time_format(a,"%M:%S.%L"):dt(n)?MG.time_format(a,"%M:%S"):ft(n)?MG.time_format(a,"%H:%M"):pt(n)||_t(n)?MG.time_format(a,"%b %d"):mt(n)?MG.time_format(a,"%b"):MG.time_format(a,"%Y"))}var a,n}function ht(r){if(r.xax_format)return r.xax_format;var t=h(r.processed.original_data||r.data)[0],a=t[r.processed.original_x_accessor||r.x_accessor];return void 0===a&&(a=t),function(t){return gt(r),x(a)?r.processed.main_x_time_format(new Date(t)):"number"==typeof a?(e=t%1!=0?E.format(",."+r.decimals+"f"):t<1e3?E.format(",.0f"):E.format(",.2s"),r.xax_units+e(t)):r.xax_units+t;var e}}function xt(t){var e={timeframe:t.processed.x_time_frame,tick_diff_timeframe:t.processed.x_tick_diff_time_frame};switch(e.timeframe){case"millis":case"seconds":e.secondary=E.timeDays,t.european_clock?e.yformat=MG.time_format(t.utc_time,"%b %d"):e.yformat=MG.time_format(t.utc_time,"%I %p");break;case"less-than-a-day":case"four-days":e.secondary=E.timeDays,e.yformat=MG.time_format(t.utc_time,"%b %d");break;default:e.secondary=E.timeYears,e.yformat=MG.time_format(t.utc_time,"%Y")}return e}function yt(t){var e=parseInt(t.width);t.full_width&&(e=f(t.target)),"categorical"===t.x_axis_type&&null===e&&(e=Dt(t,"x")),t.width=e}function vt(t){var e=parseInt(t.height);t.full_height&&(e=d(t.target,"height")),"categorical"===t.y_axis_type&&null===e&&(e=Dt(t,"y")),t.height=e}function bt(t,e){(!t.selectAll(".mg-main-line").empty()&&"line"!==e.chart_type||!t.selectAll(".mg-points").empty()&&"point"!==e.chart_type||!t.selectAll(".mg-histogram").empty()&&"histogram"!==e.chart_type||!t.selectAll(".mg-barplot").empty()&&"bar"!==e.chart_type)&&t.remove()}function wt(t,e){return O(e.target).empty()&&(t=E.select(e.target).append("svg").classed("linked",e.linked).attr("width",e.width).attr("height",e.height)),t}function kt(t,e){e.width!==Number(t.attr("width"))&&t.attr("width",e.width),e.height!==Number(t.attr("height"))&&t.attr("height",e.height)}function Mt(t,e){t.attr("viewBox","0 0 "+e.width+" "+e.height),(e.full_width||e.full_height)&&t.attr("preserveAspectRatio","xMinYMin meet")}function Gt(t,e){t.empty()&&console.warn('The specified target element "'+e.target+'" could not be found in the page. The chart will not be rendered.')}function At(t,e){var r,a,n,o="x"===e?t.width:t.height;!function(t,e){var r=t[e+"group_accessor"];if(t.categorical_groups=[],r){var a=t.data[0];t.categorical_groups=E.set(a.map((function(t){return t[r]}))).values()}}(t,e),function(t,e){var n,o,r=t[e+"group_accessor"];if(t.total_bars=t.data[0].length,r){var a=(n=t.data[0],o=r,n.map((function(t){return t[o]})).reduce((function(t,e){return t[e]=t[e]+1||1,t}),{}));a=E.max(Object.keys(a).map((function(t){return a[t]}))),t.bars_per_group=a}else t.bars_per_group=t.data[0].length}(t,e),function(t,e,r){var a=e+"group_height";if(r){var n="y"===e?(t.height-t.top-t.bottom-2*t.buffer)/(t.categorical_groups.length||1):(t.width-t.left-t.right-2*t.buffer)/(t.categorical_groups.length||1);t[a]=n}else{var o=(1+t[e+"_padding_percentage"])*t.bar_thickness;t[a]=t.bars_per_group*o+2*t[e+"_outer_padding_percentage"]*o}}(t,e,o),o&&(n=(r=t)[(a=e)+"group_height"]/(r.bars_per_group+r[a+"_outer_padding_percentage"]),r.bar_thickness=n-n*r[a+"_padding_percentage"])}function Dt(t,e){return t[e+"group_height"]*(t.categorical_groups.length||1)+("y"===e?t.top+t.bottom+2*t.buffer:t.left+t.right+2*t.buffer)+t.categorical_groups.length*t[e+"group_height"]*(t[e+"group_padding_percentage"]+t[e+"group_outer_padding_percentage"])}function Ot(t){var e;(e=t=t)||(e={}),e.processed||(e.processed={}),t=e=p(e,{target:null,title:null,description:null});var r=E.select(t.target);Gt(r,t);var a,n,o,i,s,c,l,u=r.selectAll("svg");return"categorical"===t.y_axis_type&&At(t,"y"),"categorical"===t.x_axis_type&&At(t,"x"),n=(a=t).chart_type,a.processed.xax_format||(a.xax_format?a.processed.xax_format=a.xax_format:"line"===n||"point"===n||"histogram"===n?a.processed.xax_format=ht(a):"bar"===n&&(a.processed.xax_format=ct(a))),i=h((o=t).processed.original_data||o.data)[0],o.time_series=x(i[o.processed.original_x_accessor||o.x_accessor]),yt(t),vt(t),bt(u,t),c=t,(s=u=wt(u,t)).selectAll(".mg-clip-path").remove(),s.append("defs").attr("class","mg-clip-path").append("clipPath").attr("id","mg-plot-window-"+z(c.target)).append("svg:rect").attr("x",G(c)).attr("y",M(c)).attr("width",c.width-c.left-c.right-c.buffer).attr("height",c.height-c.top-c.bottom-c.buffer+1),kt(u,t),Mt(u,t),(l=u).classed("mg-missing",!1),l.selectAll(".mg-missing-text").remove(),l.selectAll(".mg-missing-pane").remove(),j(t),function(t,e){var r=0;if(t.selectAll(".mg-main-line").nodes().length>=e.data.length)if(0<e.custom_line_color_map.length){var a=T(function(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=r+1;return e}(e.max_data_size),e.custom_line_color_map);for(r=0;r<a.length;r++)t.selectAll(".mg-main-line.mg-line"+a[r]+"-color").remove()}else{var n=e.data.length;for(r=t.selectAll(".mg-main-line").nodes()?t.selectAll(".mg-main-line").nodes().length:0;n<r;r--)t.selectAll(".mg-main-line.mg-line"+r+"-color").remove()}}(u,t),this}function zt(t){return t.label}function Ft(e){return function(t){return e.scales.X(t[e.x_accessor])>=Y(e)&&e.scales.X(t[e.x_accessor])<=P(e)}}function Ct(e){return function(t){return e.scales.X(t[e.x_accessor])}}function Tt(t){var e=t.scales.Y;return function(t){return e(t.value).toFixed(2)}}function Rt(t,e,r,a,n,o){var i;t&&(n(i=a.append("g").attr("class",e),r),o(i,r))}function Et(t,e){var r,a=(r=Ct(e),function(t){return r(t).toFixed(2)});t.selectAll(".mg-markers").data(e.markers.filter(Ft(e))).enter().append("line").attr("x1",a).attr("x2",a).attr("y1",e.top).attr("y2",v(e)).attr("class",(function(t){return t.lineclass})).attr("stroke-dasharray","3,1")}function Yt(t,e){t.selectAll(".mg-markers").data(e.markers.filter(Ft(e))).enter().append("text").attr("class",(function(t){return t.textclass||""})).classed("mg-marker-text",!0).attr("x",Ct(e)).attr("y","bottom"===e.x_axis_position?.95*M(e):w(e)+e.buffer).attr("text-anchor","middle").text(zt).each((function(t){t.click&&E.select(this).style("cursor","pointer").on("click",t.click),t.mouseover&&E.select(this).style("cursor","pointer").on("mouseover",t.mouseover),t.mouseout&&E.select(this).style("cursor","pointer").on("mouseout",t.mouseout)})),function(t,e){if(t&&1!=t.length)for(var r=0;r<t.length;r++)if(o(t[r],t)){var a=E.select(t[r]),n=+a.attr("y");n+8>=e.top&&(n=e.top-16),a.attr("y",n)}}(t.selectAll(".mg-marker-text").nodes(),e)}function $t(t,e){var r=Tt(e);t.selectAll(".mg-baselines").data(e.baselines).enter().append("line").attr("x1",Y(e)).attr("x2",P(e)).attr("y1",r).attr("y2",r)}function Pt(t,e){var r=Tt(e);t.selectAll(".mg-baselines").data(e.baselines).enter().append("text").attr("x",P(e)).attr("y",r).attr("dy",-3).attr("text-anchor","end").text(zt)}function St(t){var e,r,a,n,o,i=O(t.target);return(e=i).selectAll(".mg-markers").remove(),e.selectAll(".mg-baselines").remove(),a=i,Rt((r=t).markers,"mg-markers",r,a,Et,Yt),o=i,Rt((n=t).baselines,"mg-baselines",n,o,$t,Pt),this}function Lt(t){t.selectAll(".mg-active-datapoint-container").selectAll("*").remove()}function jt(t,e){t.select(".mg-active-datapoint").remove();var r,a="right"===e.mouseover_align?"end":"left"===e.mouseover_align?"start":"middle",n="right"===e.mouseover_align?P(e):"left"===e.mouseover_align?Y(e):(e.width-e.left-e.right)/2+e.left,o=t.select(".mg-active-datapoint-container").append("text").attr("class","mg-active-datapoint").attr("xml:space","preserve").attr("text-anchor",a),i=.75,s="bottom"===e.x_axis_position?M(e)*i:w(e)+3*e.buffer;e.markers&&t.selectAll(".mg-marker-text").each((function(){r?r!==E.select(this).attr("y")&&(i=.56):r=E.select(this).attr("y")})),o.attr("transform","translate("+n+","+s+")")}function Xt(t,e){jt(e.svg,t);var r,a,o={row_number:0,rargs:e,mouseover_row:function(t){return o.row_number+=1,e=o.row_number,r=o.text_container,a=t,n=r.append("tspan").attr("x",0).attr("y",1.1*e+"em"),{rargs:a,text:function(t){return e=t,{bold:function(){return r.attr("font-weight","bold")},font_size:function(t){return r.attr("font-size",t)},x:function(t){return r.attr("x",t)},y:function(t){return r.attr("y",t)},elem:r=n.append("tspan").text(e)};var e,r}};var e,r,a,n},text_container:(r=e.svg,a=r.select(".mg-active-datapoint"),a.selectAll("*").remove(),a)};return o}Z.categorical=function(t,e){e.namespace,Q(t,e),function(d,t){var f,p,_,m,e=t.namespace,g=(d.scalefns[e+"f"],d.scalefns[e+"groupf"],d.scales[(e+"group").toUpperCase()]),h=d.scales[e.toUpperCase()],x=t.position,r=O(d.target),a=g.domain&&g.domain()?g.domain():[null];D(r,".mg-category-guides");var y=S(r,"mg-category-guides");a.forEach((function(e){h.domain().forEach((function(t){"left"!==x&&"right"!==x||(f=Y(d),p=P(d),_=h(t)+g(e)+h.bandwidth()/2,m=h(t)+g(e)+h.bandwidth()/2),"top"!==x&&"bottom"!==x||(f=h(t)+g(e)+h.bandwidth()/2*(null===e),p=h(t)+g(e)+h.bandwidth()/2*(null===e),_=v(d),m=b(d)),y.append("line").attr("x1",f).attr("x2",p).attr("y1",_).attr("y2",m).attr("stroke-dasharray","2,1")}));var t,r,a,n,o,i,s,c,l=g(e)+h(h.domain()[0])+h.bandwidth()/2*(null===e||"top"!==x&&"bottom"!=x),u=g(e)+h(h.domain()[h.domain().length-1])+h.bandwidth()/2*(null===e||"top"!==x&&"bottom"!=x);"left"!==x&&"right"!==x||(t=Y(d),r=Y(d),a=l,n=u,o=P(d),i=P(d),s=l,c=u),"bottom"!==x&&"top"!==x||(t=l,r=u,a=v(d),n=v(d),o=l,i=u,s=b(d),c=b(d)),y.append("line").attr("x1",t).attr("x2",r).attr("y1",a).attr("y2",n).attr("stroke-dasharray","2,1"),y.append("line").attr("x1",o).attr("x2",i).attr("y1",s).attr("y2",c).attr("stroke-dasharray","2,1")}))}(t,e)},Z.numerical=function(t,e){var r=e.namespace,a=r+"_axis",n="mg-"+r+"-axis",o=O(t.target);if(D(o,"."+n),!t[a])return this;var i,s,c,l,u,d,f,p,_,m,g,h,x,y,v,b=S(o,n);return function(t,e){var r=t[e+"_accessor"],a=t.scales[e.toUpperCase()].ticks(t[e+"ax_count"]),n=t.processed["max_"+e];function o(t){return 1e3===t?3:1e6===t?7:Math.log(t)/Math.LN10}"log"===t[e+"_scale_type"]&&(a=a.filter((function(t){return Math.abs(o(t))%1<1e-6||Math.abs(o(t))%1>.999999})));var i=a.length,s=!0;t.data.forEach((function(t,e){t.forEach((function(t,e){if(t[r]%1!=0)return s=!1}))})),s&&n<i&&"count"===t.format&&(a=a.filter((function(t){return t%1==0}))),t.processed[e+"_ticks"]=a}(t,r),V(b,t,e),i=b,s=t,p=(c=e).namespace,_=c.position,m=s.scales[p.toUpperCase()],g=s.processed[p+"_ticks"],h="mg-"+p+"ax-ticks",x="mg-extended-"+p+"ax-ticks",y=s[p+"_extended_ticks"],v=s[p+"ax_tick_length"],"left"===_&&(l=G(s),u=y?A(s):G(s)-v,d=function(t){return m(t).toFixed(2)},f=function(t){return m(t).toFixed(2)}),"right"===_&&(l=A(s),u=y?G(s):A(s)+v,d=function(t){return m(t).toFixed(2)},f=function(t){return m(t).toFixed(2)}),"top"===_&&(l=function(t){return m(t).toFixed(2)},u=function(t){return m(t).toFixed(2)},d=M(s),f=y?w(s):M(s)-v),"bottom"===_&&(l=function(t){return m(t).toFixed(2)},u=function(t){return m(t).toFixed(2)},d=w(s),f=y?M(s):w(s)+v),i.selectAll("."+h).data(g).enter().append("line").classed(x,y).attr("x1",l).attr("x2",u).attr("y1",d).attr("y2",f),q(b,t,e),t[r+"_label"]&&e.label(o.select(".mg-"+r+"-axis"),t),t[r+"_rug"]&&W(t,e),t.show_bar_zero&&tt(t),this},MG.axis_factory=function(t){var e={type:"numerical"};return this.namespace=function(t){return e.namespace=t,this},this.rug=function(t){return e.rug=t,this},this.label=function(t){return e.label=t,this},this.type=function(t){return e.type=t,this},this.position=function(t){return e.position=t,this},this.zeroLine=function(t){return e.zeroLine=t,this},this.draw=function(){return Z[e.type](t,e),this},this},MG.y_rug=K,MG.y_axis=rt,MG.y_axis_categorical=function(t){return t.y_axis&&(at(t),t.show_bar_zero&&tt(t),t.ygroup_accessor&&(r=O((e=t).target),(a=e.scales.YGROUP.domain())[0],a[a.length-1],r.select(".mg-category-guides").selectAll("mg-group-lines").data(a).enter().append("line").attr("x1",Y(e)).attr("x2",Y(e)).attr("y1",(function(t){return e.scales.YGROUP(t)})).attr("y2",(function(t){return e.scales.YGROUP(t)+e.ygroup_height})).attr("stroke-width",1)),t.y_categorical_show_guides&&(o=O((n=t).target),i=[],n.data[0].forEach((function(t){-1===i.indexOf(t[n.y_accessor])&&o.select(".mg-category-guides").append("line").attr("x1",Y(n)).attr("x2",P(n)).attr("y1",n.scalefns.yf(t)+n.scalefns.ygroupf(t)).attr("y2",n.scalefns.yf(t)+n.scalefns.ygroupf(t)).attr("stroke-dasharray","2,1")})))),this;var e,r,a,n,o,i},MG.x_rug=nt,MG.x_axis=ot,MG.x_axis_categorical=function(t){var e=O(t.target),r=0;"bar"===t.chart_type&&(r=t.buffer+5),mg_add_categorical_scale(t,"X",t.categorical_variables.reverse(),t.left,P(t)-r),X(t,"xf","X","value"),D(e,".mg-x-axis");var o,i,s,a=S(e,"mg-x-axis");return t.x_axis&&(o=t,i=r,(s=a.selectAll("text").data(o.categorical_variables).enter().append("text")).attr("x",(function(t){return o.scales.X(t)+o.scales.X.bandwidth()/2+o.buffer*o.bar_outer_padding_percentage+i/2})).attr("y",v(o)).attr("dy",".35em").attr("text-anchor","middle").text(String),o.truncate_x_labels&&s.each((function(t,e){L(this,t,o.scales.X.bandwidth())})),l(s,o.rotate_x_labels)),this},MG.init=Ot,MG.markers=St;var Ut=function(n,o){return function(a){return["x","y"].every((function(t){return!(t in o)||(e=a[n[t+"_accessor"]],r=o[t],e>Math.min(r[0],r[1])&&e<Math.max(r[0],r[1]));var e,r}))}},Nt=function(e,r){var t=e.processed.raw_data||e.data;"raw_data"in e.processed||(e.processed.raw_domain={x:e.scales.X.domain(),y:e.scales.Y.domain()},e.processed.raw_data=t),"point"===e.chart_type&&(a(t)?e.data=t.map((function(t){return t.filter(Ut(e,r))})):e.data=t.filter(Ut(e,r))),["x","y"].forEach((function(t){t in r?e.processed["zoom_"+t]=r[t]:delete e.processed["zoom_"+t]})),e.processed.subplot&&(r!==e.processed.raw_domain?MG.create_brushing_pattern(e.processed.subplot,It(e.processed.subplot,r)):MG.remove_brushing_pattern(e.processed.subplot)),new MG.charts[e.chart_type||defaults.chart_type].descriptor(e)},Bt=function(r,a){return["x","y"].reduce((function(t,e){return e in a&&(t[e]=a[e].map((function(t){return+r.scales[e.toUpperCase()].invert(t)})),"y"===e&&t[e].reverse()),t}),{})},It=function(r,a){return["x","y"].reduce((function(t,e){return e in a&&(t[e]=a[e].map((function(t){return+r.scales[e.toUpperCase()](t)})),"y"===e&&t[e].reverse()),t}),{})};MG.convert_range_to_domain=Bt,MG.zoom_to_data_domain=Nt,MG.zoom_to_data_range=function(t,e){var r=Bt(t,e);Nt(t,r)},MG.zoom_to_raw_range=function(t){"raw_domain"in t.processed&&(Nt(t,t.processed.raw_domain),delete t.processed.raw_domain,delete t.processed.raw_data)};var Ht=function(t){return E.select(t.target).select(".mg-extent").size()?E.select(t.target).select(".mg-extent"):E.select(t.target).select(".mg-rollover-rect, .mg-voronoi").insert("g","*").classed("mg-brush",!0).append("rect").classed("mg-extent",!0)},qt=function(t,e){var r=e.x[0],a=e.x[1]-e.x[0],n=e.y[0],o=e.y[1]-e.y[0];Ht(t).attr("x",r).attr("width",a).attr("y",n).attr("height",o).attr("opacity",1)},Vt=function(t){Ht(t).attr("width",0).attr("height",0).attr("opacity",0)};MG.add_brush_function=function(t){if("categorical"===t.x_axis_type||"categorical"===t.y_axis_type)return console.warn('The option "brush" does not support axis type "categorical" currently.');t.zoom_target||(t.zoom_target=t),t.zoom_target!==t&&(t.zoom_target.processed.subplot=t);var i,r,s,a,e,c,n,o,l,u,d=void 0;switch(t.brush){case"x":d={x:!0,y:!1};break;case"y":d={x:!1,y:!0};break;default:d={x:!0,y:!0}}r=(i=t).zoom_target,s=d,a=E.select(i.target).select("svg"),e=a.select(".mg-rollover-rect, .mg-voronoi"),c=e.node(),o=n=!1,l=[],u=function(){var t=i.left,e=i.width-i.right-i.buffer,r=i.top,a=i.height-i.bottom-i.buffer,n=E.mouse(c),o={};return o.x=s.x?[Math.max(t,Math.min(l[0],n[0])),Math.min(e,Math.max(l[0],n[0]))]:[t,e],o.y=s.y?[Math.max(r,Math.min(l[1],n[1])),Math.min(a,Math.max(l[1],n[1]))]:[r,a],o},e.classed("mg-brush-container",!0),e.on("mousedown."+i.target,(function(){n=!(o=!0),l=E.mouse(c),a.classed("mg-brushed",!1),a.classed("mg-brushing-in-progress",!0),Vt(i)})),E.select(document).on("mousemove."+i.target,(function(){o&&(n=!0,e.classed("mg-brushing",!0),qt(i,u()))})),E.select(document).on("mouseup."+i.target,(function(){if(o){o=!1,a.classed("mg-brushing-in-progress",!1);var t=u();if(n)if(n=!1,r===i)MG.zoom_to_data_range(r,t),a.select(".mg-rollover-rect, .mg-voronoi").classed("mg-brushed",!0);else{var e=MG.convert_range_to_domain(i,t);MG.zoom_to_data_domain(r,e)}else MG.zoom_to_raw_range(r);C(i.brushing_selection_changed)&&i.brushing_selection_changed(i,t)}}))},MG.create_brushing_pattern=qt,MG.remove_brushing_pattern=Vt;var Wt=new function(){var t,i=[];function s(){i.forEach((function(t){var e=E.select(t).select("svg");if(!e.empty()&&(0<e.node().parentNode.offsetWidth||0<e.node().parentNode.offsetHeight)){var r=0!==e.attr("width")?e.attr("height")/e.attr("width"):0,a=f(t);e.attr("width",a),e.attr("height",r*a)}}))}return"undefined"!=typeof MutationObserver?t=MutationObserver:"undefined"!=typeof WebKitMutationObserver&&(t=WebKitMutationObserver),{add_target:function(n){if(0===i.length&&window.addEventListener("resize",s,!0),-1===i.indexOf(n)&&(i.push(n),t)){var o=new t((function(t){var e,r,a=E.select(n).node();a&&!t.some((function(t){for(var e=0;e<t.removedNodes.length;e++)if(t.removedNodes[e]===a)return!0}))||(o.disconnect(),e=n,-1!==(r=i.indexOf(e))&&i.splice(r,1),0===i.length&&window.removeEventListener("resize",s,!0))}));o.observe(E.select(n).node().parentNode,{childList:!0})}}}};function Qt(t){var e;((e=t).full_width||e.full_height)&&Wt.add_target(e.target)}k()&&function(s){if("function"!=typeof s().dropdown){var c='[data-toggle="dropdown"]',a=function(t){s(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.1",a.prototype.toggle=function(t){var e=s(this);if(!e.is(".disabled, :disabled")){var r=l(e),a=r.hasClass("open");if(o(),!a){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&s('<div class="dropdown-backdrop"/>').insertAfter(s(this)).on("click",o);var n={relatedTarget:this};if(r.trigger(t=s.Event("show.bs.dropdown",n)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",n)}return!1}},a.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=s(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var r=l(e),a=r.hasClass("open");if(!a&&27!=t.which||a&&27==t.which)return 27==t.which&&r.find(c).trigger("focus"),e.trigger("click");var n=" li:not(.divider):visible a",o=r.find('[role="menu"]'+n+', [role="listbox"]'+n);if(o.length){var i=o.index(t.target);38==t.which&&0<i&&i--,40==t.which&&i<o.length-1&&i++,~i||(i=0),o.eq(i).trigger("focus")}}}};var t=s.fn.dropdown;s.fn.dropdown=function(r){return this.each((function(){var t=s(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new a(this)),"string"==typeof r&&e[r].call(t)}))},s.fn.dropdown.Constructor=a,s.fn.dropdown.noConflict=function(){return s.fn.dropdown=t,this},s(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",(function(t){t.stopPropagation()})).on("click.bs.dropdown.data-api",c,a.prototype.toggle).on("keydown.bs.dropdown.data-api",c,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}function o(a){a&&3===a.which||(s(".dropdown-backdrop").remove(),s(c).each((function(){var t=s(this),e=l(t),r={relatedTarget:this};e.hasClass("open")&&(e.trigger(a=s.Event("hide.bs.dropdown",r)),a.isDefaultPrevented()||(t.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",r)))})))}function l(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var r=e&&s(e);return r&&r.length?r:t.parent()}}(jQuery),MG.button_layout=function(t){return this.target=t,this.feature_set={},this.public_name={},this.sorters={},this.manual=[],this.manual_map={},this.manual_callback={},this._strip_punctuation=function(t){return t.replace(/[^a-zA-Z0-9 _]+/g,"").replace(/ +?/g,"")},this.data=function(t){return this._data=t,this},this.manual_button=function(t,e,r){return this.feature_set[t]=e,this.manual_map[this._strip_punctuation(t)]=t,this.manual_callback[t]=r,this},this.button=function(t){return 1<arguments.length&&(this.public_name[t]=arguments[1]),2<arguments.length&&(this.sorters[t]=arguments[2]),this.feature_set[t]=[],this},this.callback=function(t){return this._callback=t,this},this.display=function(){var e,t,r,a,n=this._callback,o=this.manual_callback,i=this.manual_map;r=Object.keys(this.feature_set);var s,c=function(t){return e[t]};for(s=0;s<this._data.length;s++){e=this._data[s],t=r.map(c);for(var l=0;l<r.length;l++)a=r[l],-1===this.feature_set[a].indexOf(t[l])&&this.feature_set[a].push(t[l])}for(a in this.feature_set)this.sorters.hasOwnProperty(a)&&this.feature_set[a].sort(this.sorters[a]);$(this.target).empty(),$(this.target).append("<div class='col-lg-12 segments text-center'></div>");var u=function(){var t,e=$(this).data("key"),r=$(this).data("feature");return $("."+r+"-btns button.btn span.title").html(e),i.hasOwnProperty(r)?(t=i[r],o[t](e)):n(r,e),!1};for(var d in this.feature_set){for(r=this.feature_set[d],$(this.target+" div.segments").append('<div class="btn-group '+this._strip_punctuation(d)+'-btns text-left"><button type="button" class="btn btn-default btn-lg dropdown-toggle" data-toggle="dropdown"><span class=\'which-button\'>'+(this.public_name.hasOwnProperty(d)?this.public_name[d]:d)+"</span><span class='title'>"+(this.manual_callback.hasOwnProperty(d)?this.feature_set[d][0]:"all")+'</span><span class="caret"></span></button><ul class="dropdown-menu" role="menu">'+(this.manual_callback.hasOwnProperty(d)?"":'<li><a href="#" data-feature="'+d+'" data-key="all">All</a></li>')+(this.manual_callback.hasOwnProperty(d)?"":'<li class="divider"></li>')+"</ul></div>"),s=0;s<r.length;s++)"all"!==r[s]&&void 0!==r[s]&&$(this.target+" div."+this._strip_punctuation(d)+"-btns ul.dropdown-menu").append('<li><a href="#" data-feature="'+this._strip_punctuation(d)+'" data-key="'+r[s]+'">'+r[s]+"</a></li>");$("."+this._strip_punctuation(d)+"-btns .dropdown-menu li a").on("click",u)}return this},this};var Zt=function(t,e,r){var a=e.line_id,n=r.color,o=r.colors;t.classed("mg-hover-line-color",null===n).classed("mg-hover-line"+a+"-color",null===o).attr("fill",null===o?"":o[a-1])},Kt=function(r,t,e){t.existing_band=e.selectAll(".mg-confidence-band").nodes(),r.show_confidence_band&&(t.confidence_area=E.area().defined(t.line.defined()).x(r.scalefns.xf).y0((function(t){var e=r.show_confidence_band[0];return null!=t[e]?r.scales.Y(t[e]):r.scales.Y(t[r.y_accessor])})).y1((function(t){var e=r.show_confidence_band[1];return null!=t[e]?r.scales.Y(t[e]):r.scales.Y(t[r.y_accessor])})).curve(r.interpolate))},Jt=function(t,e){var r=t.scalefns,a=t.scales,n=t.interpolate,o=t.flip_area_under_y_value,i=Number.isFinite(o)?a.Y(o):a.Y.range()[0];e.area=E.area().defined(e.line.defined()).x(r.xf).y0((function(){return i})).y1(r.yf).curve(n)},te=function(t,e){var r=t.y_accessor,a=t.scalefns,n=t.scales,o=t.interpolate;e.flat_line=E.line().defined((function(t){return(void 0===t._missing||!0!==t._missing)&&null!==t[r]})).x(a.xf).y((function(){return n.Y(e.data_median)})).curve(o)},ee=function(t,e){var r=t.scalefns,a=t.interpolate,n=t.missing_is_zero,o=t.y_accessor;e.line=E.line().x(r.xf).y(r.yf).curve(a),n||(e.line=e.line.defined((function(t){return(void 0===t._missing||!0!==t._missing)&&null!==t[o]})))},re=function(t,e,r,a){var n=t.show_confidence_band,o=t.transition_on_update,i=t.data,s=t.target;n&&(r.select(".mg-confidence-band-"+a).empty()&&r.append("path").attr("class","mg-confidence-band mg-confidence-band-"+a),r.select(".mg-confidence-band-"+a).transition().duration((function(){return o?1e3:0})).attr("d",e.confidence_area(i[a-1])).attr("clip-path","url(#mg-plot-window-"+z(s)+")"))},ae=function(t,e,r,a,n){var o=t.data,i=t.target,s=t.colors,c=r.selectAll(".mg-main-area.mg-area"+n);e.display_area?c.empty()?r.append("path").classed("mg-main-area",!0).classed("mg-area"+n,!0).classed("mg-area-color",null===s).classed("mg-area"+n+"-color",null===s).attr("d",e.area(o[a])).attr("fill",null===s?"":s[n-1]).attr("clip-path","url(#mg-plot-window-"+z(i)+")"):(r.node().appendChild(c.node()),c.transition().duration(e.update_transition_duration).attr("d",e.area(o[a])).attr("clip-path","url(#mg-plot-window-"+z(i)+")")):c.empty()||c.remove()},ne=function(t,e){t.classed("mg-line-color",!0).classed("mg-line"+e+"-color",!0)},oe=function(t,e,r,a,n,o){if(a.empty()){var i=r.append("path").attr("class","mg-main-line mg-line"+o);g=i,h=n,x=o,(y=t.colors)&&y.constructor===Array?(g.attr("stroke",y[h]),y.length<h+1&&ne(g,x)):ne(g,x),l=e,u=i,d=n,f=(c=t).animate_on_load,p=c.data,_=c.y_accessor,m=c.target,f?(l.data_median=E.median(p[d],(function(t){return t[_]})),u.attr("d",l.flat_line(p[d])).transition().duration(1e3).attr("d",l.line(p[d])).attr("clip-path","url(#mg-plot-window-"+z(m)+")")):u.attr("d",l.line(p[d])).attr("clip-path","url(#mg-plot-window-"+z(m)+")")}else{r.node().appendChild(a.node());var s=a.transition().duration(e.update_transition_duration);e.display_area||!t.transition_on_update||t.missing_is_hidden?s.attr("d",e.line(t.data[n])):s.attrTween("d",je(e.line(t.data[n]),4))}var c,l,u,d,f,p,_,m,g,h,x,y},ie=function(t,e,r,a){var n,o=void 0;if(t.legend)if(u(t.legend)?o=t.legend[r]:(n=t.legend,"[object Function]"===Object.prototype.toString.call(n)&&(o=t.legend(t.data[r]))),t.legend_target)t.colors&&t.colors.constructor===Array?e.legend_text="<span style='color:"+t.colors[r]+"'>&mdash; "+o+"&nbsp; </span>"+e.legend_text:e.legend_text="<span class='mg-line"+a+"-legend-color'>&mdash; "+o+"&nbsp; </span>"+e.legend_text;else{var i=void 0,s=void 0,c=void 0;"left"===t.y_axis_position?(i=t.data[r][t.data[r].length-1],s="start",c=t.buffer):(i=t.data[r][0],s="end",c=-t.buffer);var l=e.legend_group.append("svg:text").attr("x",t.scalefns.xf(i)).attr("dx",c).attr("y",t.scalefns.yf(i)).attr("dy",".35em").attr("font-size",10).attr("text-anchor",s).attr("font-weight","300").text(o);t.colors&&t.colors.constructor===Array?t.colors.length<r+1?l.classed("mg-line"+a+"-legend-color",!0):l.attr("fill",t.colors[r]):l.classed("mg-line-legend-color",!0).classed("mg-line"+a+"-legend-color",!0),function(t,e){if(t&&1!=t.length){var r,a,n;t.sort((function(t,e){return E.select(e).attr("y")-E.select(t).attr("y")})),t.reverse();for(var o=0;o<t.length;o++){a=E.select(t[o]).text();for(var i=0;i<t.length;i++)if(n=E.select(t[i]).text(),!1!==(l=t[o],u=t[i],d=l.getBoundingClientRect(),f=u.getBoundingClientRect(),r=d.top<=f.bottom&&d.top>=f.top&&f.bottom-d.top)&&a!==n){var s=E.select(t[o]),c=+s.attr("y");c+=r,s.attr("y",c)}}}var l,u,d,f}(e.legend_group.selectAll(".mg-line-legend text").nodes())}},se=function(e,t,r,a,n,o){var i,s,c,l=E.voronoi().x((function(t){return e.scales.X(t[e.x_accessor]).toFixed(2)})).y((function(t){return e.scales.Y(t[e.y_accessor]).toFixed(2)})).extent([[e.buffer,e.buffer+(e.title?e.title_y_position:0)],[e.width-e.buffer,e.height-e.buffer]]);S(t,"mg-voronoi").selectAll("path").data(l.polygons((s=e,c=s.data,E.merge(c)))).enter().append("path").filter((function(t){return void 0!==t&&0<t.length})).attr("d",(function(t){return null==t?null:"M"+t.join("L")+"Z"})).datum((function(t){return null==t?null:t.data})).attr("class",(i=e,function(t){var e=void 0;if(i.linked){var r=t[i.x_accessor],a=MG.time_format(i.utc_time,i.linked_format);return e="roll_"+("number"==typeof r?t.line_id-1:a(r))+" mg-line"+t.line_id,null===i.color&&(e+=" mg-line"+t.line_id+"-color"),e}return e="mg-line"+t.line_id,null===i.color&&(e+=" mg-line"+t.line_id+"-color"),e})).on("click",o).on("mouseover",r).on("mouseout",a).on("mousemove",n),le(e,t)},ce=function(a,t,e,r,n,o){var i,s,c,l,u,d=(s=(i=a).x_accessor,c=i.data,l=i.x_sort,(u=E.nest().key((function(t){return t[s]})).entries(E.merge(c))).forEach((function(t){var e=t.values[0];t.key=e[s]})),l?u.sort((function(t,e){return new Date(t.key)-new Date(e.key)})):u),f=d.map((function(t){var e=t.key;return a.scales.X(e)}));t.append("g").attr("class","mg-rollover-rect").selectAll(".mg-rollover-rects").data(d).enter().append("rect").attr("x",(function(t,e){return 1===f.length?Y(a):0===e?f[e].toFixed(2):((f[e-1]+f[e])/2).toFixed(2)})).attr("y",a.top).attr("width",(function(t,e){return 1===f.length?P(a):0===e?((f[e+1]-f[e])/2).toFixed(2):e===f.length-1?((f[e]-f[e-1])/2).toFixed(2):((f[e+1]-f[e-1])/2).toFixed(2)})).attr("class",(function(t){var e=t.values,r=e.map((function(t){var e=t.line_id,r=ue(e);return null===a.colors&&(r+=" "+de(e)),r})).join(" ");return a.linked&&0<e.length&&(r+=" "+fe(pe(e[0],a))),r})).attr("height",a.height-a.bottom-a.top-a.buffer).attr("opacity",0).on("click",o).on("mouseover",e).on("mouseout",r).on("mousemove",n),_e(a,t)},le=function(t,e){for(var r=t.data,a=t.custom_line_color_map,n=0;n<r.length;n++){var o=n+1;0<a.length&&void 0!==a[n]&&(o=a[n]),1!==r[n].length||e.selectAll(".mg-voronoi .mg-line"+o).empty()||(e.selectAll(".mg-voronoi .mg-line"+o).on("mouseover")(r[n][0],0),e.selectAll(".mg-voronoi .mg-line"+o).on("mouseout")(r[n][0],0))}},ue=function(t){return"mg-line"+t},de=function(t){return"mg-line"+t+"-color"},fe=function(t){return"roll_"+t},pe=function(t,e){var r=e.x_accessor,a=e.utc_time,n=e.linked_format,o=t[r],i=MG.time_format(a,n);return"number"==typeof o?o.toString().replace(".","_"):i(o)},_e=function(t,e){var r=t.data,a=e.selectAll(".mg-rollover-rect rect"),n=a.nodes()[0][0]||a.nodes()[0];0<r.filter((function(t){return 1===t.length})).length&&a.on("mouseover")(n.__data__,0)},me=function(t){var e=t.data;return 1===e.length&&1===e[0].length},ge=function(t,e){var r=t.existing_band;r[0]&&r[0].length>e.selectAll(".mg-main-line").node().length&&e.selectAll(".mg-confidence-band").remove()},he=function(t){var e,r,a,n,o,i,s,c={},l=O(t.target);D(l,".mg-line-legend"),e=c,r=l,t.legend&&(e.legend_group=S(r,"mg-line-legend")),c.data_median=0,c.update_transition_duration=t.transition_on_update?1e3:0,c.display_area=t.area&&!t.use_data_y_min&&t.data.length<=1&&!1===t.aggregate_rollover||Array.isArray(t.area)&&0<t.area.length,c.legend_text="",o=l,ee(a=t,n=c),Jt(a,n),te(a,n),Kt(a,n,o),c.existing_band=l.selectAll(".mg-confidence-band").nodes(),!1!==MG.call_hook("line.before_all_series",[t])&&function(e,t,r){ge(t,r),e.active_point_on_lines&&r.selectAll("circle.mg-shown-active-point").remove();for(var a=e.data.length-1;0<=a;a--){var n=e.data[a];MG.call_hook("line.before_each_series",[n,e]);var o=a+1;if(0<e.custom_line_color_map.length&&(o=e.custom_line_color_map[a]),e.data[a].line_id=o,e.active_point_on_lines&&r.selectAll("circle-"+o).data(e.data[a]).enter().filter((function(t){return t[e.active_point_accessor]})).append("circle").attr("class","mg-area"+o+"-color mg-shown-active-point").attr("cx",e.scalefns.xf).attr("cy",e.scalefns.yf).attr("r",(function(){return e.active_point_size})),0!==n.length){var i=r.select("path.mg-main-line.mg-line"+o);re(e,t,r,o),Array.isArray(e.area)?e.area[o-1]&&ae(e,t,r,a,o):ae(e,t,r,a,o),oe(e,t,r,i,a,o),ie(e,t,a,o),MG.call_hook("line.after_each_series",[n,i,e])}}}(t,c,l),i=t.legend_target,s=c.legend_text,i&&E.select(i).html(s)},xe=function(t,e){var r,a,n,o,i,s,c,l,u,d,f,p,_=O(t.target);t.showActivePoint&&0===_.selectAll(".mg-active-datapoint-container").nodes().length&&S(_,"mg-active-datapoint-container"),D(r=_,".mg-rollover-rect"),D(r,".mg-voronoi"),D(r,".mg-active-datapoint"),D(r,".mg-line-rollover-circle"),n=_,o=(a=t).data,i=a.colors,s=n.selectAll(".mg-line-rollover-circle").data(o).enter().append("circle").attr("cx",0).attr("cy",0).attr("r",0),i&&i.constructor===Array?s.attr("class",(function(t){return"mg-line"+t.line_id})).attr("fill",(function(t,e){return i[e]})).attr("stroke",(function(t,e){return i[e]})):s.attr("class",(function(t,e){var r=t.line_id;return["mg-line"+r,"mg-line"+r+"-color","mg-area"+r+"-color"].join(" ")})),s.classed("mg-line-rollover-circle",!0),function(t){for(var e=t.data,r=t.custom_line_color_map,a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++)e[a][n].index=a+1,0<r.length?e[a][n].line_id=r[a]:e[a][n].line_id=a+1}(t),f=(d=t).data,p=d.aggregate_rollover,1<f.length&&!p?se(t,_,e.rolloverOn(t),e.rolloverOff(t),e.rolloverMove(t),e.rolloverClick(t)):(l=(c=t).data,u=c.aggregate_rollover,1<l.length&&u?ce(t,_,e.rolloverOn(t),e.rolloverOff(t),e.rolloverMove(t),e.rolloverClick(t)):function(a,t,e,r,n,o){var i=1;0<a.custom_line_color_map.length&&(i=a.custom_line_color_map[0]);var s,c,l=t.append("g").attr("class","mg-rollover-rect"),u=a.data[0].map(a.scalefns.xf);l.selectAll(".mg-rollover-rects").data(a.data[0]).enter().append("rect").attr("class",(function(t,e){var r=de(i)+" "+ue(t.line_id);return a.linked&&(r+=r+" "+fe(pe(t,a))),r})).attr("x",(function(t,e){return 1===u.length?Y(a):0===e?u[e].toFixed(2):((u[e-1]+u[e])/2).toFixed(2)})).attr("y",(function(t,e){return 1<a.data.length?a.scalefns.yf(t)-6:a.top})).attr("width",(function(t,e){return 1===u.length?P(a):0===e?((u[e+1]-u[e])/2).toFixed(2):e===u.length-1?((u[e]-u[e-1])/2).toFixed(2):((u[e+1]-u[e-1])/2).toFixed(2)})).attr("height",(function(t,e){return 1<a.data.length?12:a.height-a.bottom-a.top-a.buffer})).attr("opacity",0).on("click",o).on("mouseover",e).on("mouseout",r).on("mousemove",n),me(a)&&(s=t,c=a.data,s.select(".mg-rollover-rect rect").on("mouseover")(c[0][0],0))}(t,_,e.rolloverOn(t),e.rolloverOff(t),e.rolloverMove(t),e.rolloverClick(t)))},ye=function(t,e,r){var a=t.scales,n=t.x_accessor,o=t.y_accessor,i=t.point_size;e.select("circle.mg-line-rollover-circle.mg-line"+r.line_id).attr("cx",a.X(r[n]).toFixed(2)).attr("cy",a.Y(r[o]).toFixed(2)).attr("r",i).style("opacity",1)},ve=function(t,e,r){var a=t.scales,n=t.x_accessor,o=t.y_accessor,i=t.point_size;e.selectAll("circle.mg-line-rollover-circle.mg-line"+r.line_id).classed("mg-line-rollover-circle",!0).attr("cx",(function(){return a.X(r[n]).toFixed(2)})).attr("cy",(function(){return a.Y(r[o]).toFixed(2)})).attr("r",i).style("opacity",1)};function be(t,e,r){var a,n,o,i,s,c=Xt(t,{svg:e}).mouseover_row();if(null!==t.color_accessor&&"category"===t.color_type){var l=r[t.color_accessor];c.text(l+"  ").bold().attr("fill",t.scalefns.colorf(r))}a=t,n=c.text("●   ").elem,o=r,i=a.color_accessor,s=a.scalefns,null!==i?(n.attr("fill",s.colorf(o)),n.attr("stroke",s.colorf(o))):n.classed("mg-points-mono",!0),c.text(Se(t,r)),c.text(Le(t,r,t.time_series))}MG.register("line",(function(t){this.init=function(e){if(!(this.args=e).data||0===e.data.length)return e.internal_error="No data was supplied",t=e,console.error("INTERNAL ERROR : ",t.target," : ",t.internal_error),this;var t;e.internal_error=void 0,Me(e),Ae(e),MG.call_hook("line.before_destroy",this),Ot(e),new MG.scale_factory(e).namespace("x").numericalDomainFromData().numericalRange("bottom");var r=(e.baselines||[]).map((function(t){return t[e.y_accessor]}));return new MG.scale_factory(e).namespace("y").zeroBottom(!0).inflateDomain(!0).numericalDomainFromData(r).numericalRange("left"),e.x_axis&&new MG.axis_factory(e).namespace("x").type("numerical").position(e.x_axis_position).rug(nt(e)).label(st).draw(),e.y_axis&&new MG.axis_factory(e).namespace("y").type("numerical").position(e.y_axis_position).rug(K(e)).label(et).draw(),this.markers(),this.mainPlot(),this.rollover(),this.windowListeners(),e.brush&&MG.add_brush_function(e),MG.call_hook("line.after_init",this),this},this.mainPlot=function(){return he(t),this},this.markers=function(){return St(t),this},this.rollover=function(){return xe(t,this),MG.call_hook("line.after_rollover",t),this},this.rolloverClick=function(r){return function(t,e){r.click&&r.click(t,e)}},this.rolloverOn=function(n){var o=O(n.target);return function(r,t){if(function(a,n,t){if(a.aggregate_rollover&&1<a.data.length)n.selectAll("circle.mg-line-rollover-circle").style("opacity",0),t.values.forEach((function(t,e,r){a.missing_is_hidden&&r[e]._missing||i(t,a)&&ye(a,n,t)}));else{if(a.missing_is_hidden&&t._missing||null===t[a.y_accessor])return;i(t,a)&&ve(a,n,t)}}(n,o,r),function(t,e,r){if(t.linked&&!MG.globals.link&&(MG.globals.link=!0,!t.aggregate_rollover||void 0!==e[t.y_accessor]||e.values&&0<e.values.length)){var a=e.values?e.values[0]:e,n=pe(a,t);E.selectAll("."+ue(a.line_id)+"."+fe(n)).each((function(t){E.select(this).on("mouseover")(t,r)}))}}(n,r,t),o.selectAll("text").filter((function(t,e){return r===t})).attr("opacity",.3),n.show_rollover_text&&!(n.missing_is_hidden&&r._missing||null===r[n.y_accessor])){var e=Xt(n,{svg:o}),a=e.mouseover_row();n.aggregate_rollover&&a.text((n.aggregate_rollover&&1<n.data.length?function(t,e){return Pe(t,e,t.x_mouseover,"key",t.time_series)}:Se)(n,r)),(n.aggregate_rollover&&1<n.data.length?r.values:[r]).forEach((function(t){n.aggregate_rollover&&(a=e.mouseover_row()),n.legend&&Zt(a.text(n.legend[t.index-1]+"  ").bold(),t,n),Zt(a.text("—  ").elem,t,n),n.aggregate_rollover||a.text(Se(n,t)),a.text(Le(n,t,n.time_series))}))}n.mouseover&&n.mouseover(r,t)}},this.rolloverOff=function(c){var l=O(c.target);return function(t,e){var r,a,n,o,i,s;!function(t,e,a){var r=t.linked,n=t.utc_time,o=t.linked_format,i=t.x_accessor;if(r&&MG.globals.link){MG.globals.link=!1;var s=MG.time_format(n,o);(e.values?e.values:[e]).forEach((function(t){var e=t[i],r="number"==typeof e?a:s(e);E.selectAll(".roll_"+r).each((function(t){E.select(this).on("mouseout")(t)}))}))}}(c,t,e),c.aggregate_rollover?l.selectAll("circle.mg-line-rollover-circle").filter((function(t){return 1<t.length})).style("opacity",0):(a=l,n=t,o=(r=c).custom_line_color_map,i=r.data,s=n.line_id,a.selectAll("circle.mg-line-rollover-circle.mg-line"+s).style("opacity",(function(){var t=s-1;return 0<o.length&&void 0!==o.indexOf(s)&&(t=o.indexOf(s)),1===i[t].length?1:0}))),1<c.data[0].length&&Lt(l),c.mouseout&&c.mouseout(t,e)}},this.rolloverMove=function(r){return function(t,e){r.mousemove&&r.mousemove(t,e)}},this.windowListeners=function(){return Qt(this.args),this},this.init(t)})),MG.register("histogram",(function(r){var a=this;this.init=function(e){Me(a.args=e),De(e),Ot(e),new MG.scale_factory(e).namespace("x").numericalDomainFromData().numericalRange("bottom");var t=(e.baselines||[]).map((function(t){return t[e.y_accessor]}));return new MG.scale_factory(e).namespace("y").zeroBottom(!0).inflateDomain(!0).numericalDomainFromData(t).numericalRange("left"),ot(e),rt(e),a.mainPlot(),a.markers(),a.rollover(),a.windowListeners(),a},this.mainPlot=function(){var t=O(r.target);return t.selectAll(".mg-histogram").remove(),t.append("g").attr("class","mg-histogram").selectAll(".mg-bar").data(r.data[0]).enter().append("g").attr("class","mg-bar").attr("transform",(function(t){return"translate("+r.scales.X(t[r.x_accessor]).toFixed(2)+","+r.scales.Y(t[r.y_accessor]).toFixed(2)+")"})).append("rect").attr("x",1).attr("width",(function(t,e){return 1===r.data[0].length?(r.scalefns.xf(r.data[0][0])-r.bar_margin).toFixed(0):e!==r.data[0].length-1?(r.scalefns.xf(r.data[0][e+1])-r.scalefns.xf(t)).toFixed(0):(r.scalefns.xf(r.data[0][1])-r.scalefns.xf(r.data[0][0])).toFixed(0)})).attr("height",(function(t){return 0===t[r.y_accessor]?0:(r.height-r.bottom-r.buffer-r.scales.Y(t[r.y_accessor])).toFixed(2)})),a},this.markers=function(){return St(r),a},this.rollover=function(){var t=O(r.target);return 0===t.selectAll(".mg-active-datapoint-container").nodes().length&&S(t,"mg-active-datapoint-container"),t.selectAll(".mg-rollover-rect").remove(),t.selectAll(".mg-active-datapoint").remove(),t.append("g").attr("class","mg-rollover-rect").selectAll(".mg-bar").data(r.data[0]).enter().append("g").attr("class",(function(t,e){return r.linked?"mg-rollover-rects roll_"+e:"mg-rollover-rects"})).attr("transform",(function(t){return"translate("+r.scales.X(t[r.x_accessor])+",0)"})).append("rect").attr("x",1).attr("y",r.buffer+(r.title?r.title_y_position:0)).attr("width",(function(t,e){return 1===r.data[0].length?(r.scalefns.xf(r.data[0][0])-r.bar_margin).toFixed(0):e!==r.data[0].length-1?(r.scalefns.xf(r.data[0][e+1])-r.scalefns.xf(t)).toFixed(0):(r.scalefns.xf(r.data[0][1])-r.scalefns.xf(r.data[0][0])).toFixed(0)})).attr("height",(function(t){return r.height})).attr("opacity",0).on("mouseover",a.rolloverOn(r)).on("mouseout",a.rolloverOff(r)).on("mousemove",a.rolloverMove(r)),a},this.rolloverOn=function(e){var n=O(e.target);return function(r,a){if(n.selectAll("text").filter((function(t,e){return r===t})).attr("opacity",.3),e.processed.xax_format||MG.time_format(e.utc_time,"%b %e, %Y"),Ee(e),n.selectAll(".mg-bar rect").filter((function(t,e){return e===a})).classed("active",!0),e.linked&&!MG.globals.link&&(MG.globals.link=!0,E.selectAll(".mg-rollover-rects.roll_"+a+" rect").each((function(t){E.select(this).on("mouseover")(t,a)}))),e.show_rollover_text){var t=Xt(e,{svg:n}).mouseover_row();t.text("▟  ").elem.classed("hist-symbol",!0),t.text(Se(e,r)),t.text(Le(e,r,e.time_series))}e.mouseover&&(jt(n,e),e.mouseover(r,a))}},this.rolloverOff=function(r){var a=O(r.target);return function(t,e){r.linked&&MG.globals.link&&(MG.globals.link=!1,E.selectAll(".mg-rollover-rects.roll_"+e+" rect").each((function(t){E.select(this).on("mouseout")(t,e)}))),a.selectAll(".mg-bar rect").classed("active",!1),Lt(a),r.mouseout&&r.mouseout(t,e)}},this.rolloverMove=function(r){return function(t,e){r.mousemove&&r.mousemove(t,e)}},this.windowListeners=function(){return Qt(a.args),a},this.init(r)}),{binned:!1,bins:null,processed_x_accessor:"x",processed_y_accessor:"y",processed_dx_accessor:"dx",bar_margin:1});var we=function(t,e){var r=e.x_accessor,a=e.y_accessor;return t.filter((function(t){return(null===e.min_x||t[r]>=e.min_x)&&(null===e.max_x||t[r]<=e.max_x)&&(null===e.min_y||t[a]>=e.min_y)&&(null===e.max_y||t[a]<=e.max_y)}))};function ke(t,e){var r,a,n;function o(t){return 1e3===t?3:1e6===t?7:Math.log(t)/Math.LN10}"x"===e?(r=t.x_accessor,a=t.scales.X.ticks(t.xax_count),n=t.processed.max_x):"y"===e&&(r=t.y_accessor,a=t.scales.Y.ticks(t.yax_count),n=t.processed.max_y),("x"===e&&"log"===t.x_scale_type||"y"===e&&"log"===t.y_scale_type)&&(a=a.filter((function(t){return Math.abs(o(t))%1<1e-6||Math.abs(o(t))%1>.999999})));var i=a.length,s=!0;t.data.forEach((function(t,e){t.forEach((function(t,e){if(t[r]%1!=0)return s=!1}))})),s&&n<i&&"count"===t.format&&(a=a.filter((function(t){return t%1==0}))),"x"===e?t.processed.x_ticks=a:"y"===e&&(t.processed.y_ticks=a)}function Me(r){if(r.data=MG.clone(r.data),r.single_object=!1,r.array_of_objects=!1,r.array_of_arrays=!1,r.nested_array_of_arrays=!1,r.nested_array_of_objects=!1,a(r.data)?(r.nested_array_of_objects=r.data.map((function(t){return e(t)})),r.nested_array_of_arrays=r.data.map((function(t){return a(t)}))):(r.array_of_objects=n(r.data),r.array_of_arrays=a(r.data)),"line"===r.chart_type?(r.array_of_objects||r.array_of_arrays)&&(r.data=[r.data]):y(r.data[0])||(r.data=[r.data]),Ge(r,"x_accessor"),Ge(r,"y_accessor"),void 0!==r.color&&(r.colors=r.color),null!==r.colors&&"string"==typeof r.colors&&(r.colors=[r.colors]),"line"===r.chart_type&&!0===r.x_sort)for(var t=0;t<r.data.length;t++)r.data[t].sort((function(t,e){return t[r.x_accessor]-e[r.x_accessor]}));return this}function Ge(e,r){y(e[r])&&(e.data=e.data.map((function(t){return e[r].map((function(e){return t.map((function(t){if(void 0!==(t=MG.clone(t))[e])return t["multiline_"+r]=t[e],t})).filter((function(t){return void 0!==t}))}))}))[0],e[r]="multiline_"+r)}function Ae(r){var t,e=0<E.sum(r.data.map((function(t){return 0<t.length&&x(t[0][r.x_accessor])})));if((r.missing_is_zero||r.missing_is_hidden)&&"line"===r.chart_type&&e)for(var a=0;a<r.data.length;a++)if(!(r.data[a].length<=1)){var n=r.data[a][0],o=r.data[a][r.data[a].length-1],i=[],s=MG.clone(n[r.x_accessor]).setDate(n[r.x_accessor].getDate()+1),c=r.min_x?r.min_x:s,l=r.max_x?r.max_x:o[r.x_accessor];if(t=lt((l-c)/1e3),-1!==["four-days","many-days","many-months","years","default"].indexOf(t)&&null===r.missing_is_hidden_accessor)for(var u=new Date(c);u<=l;u.setDate(u.getDate()+1)){var d={};u.setHours(0,0,0,0),Date.parse(u)===Date.parse(new Date(s))&&i.push(MG.clone(r.data[a][0]));var f=null;r.data[a].forEach((function(t,e){if(Date.parse(t[r.x_accessor])===Date.parse(new Date(u)))return f=t,!1})),f?((f[r.missing_is_hidden_accessor]||null===f[r.y_accessor])&&(f._missing=!0),i.push(f)):(d[r.x_accessor]=new Date(u),d[r.y_accessor]=0,d._missing=!0,i.push(d))}else for(var p=0;p<r.data[a].length;p+=1){var _=MG.clone(r.data[a][p]);_._missing=r.data[a][p][r.missing_is_hidden_accessor],i.push(_)}r.data[a]=i}return this}function De(e){var t,r=e.data[0];if(!1===e.binned){if("object"===c(r[0]))t=r.map((function(t){return t[e.x_accessor]}));else{if("number"!=typeof r[0])return void console.log("TypeError: expected an array of numbers, found "+c(r[0]));t=r}var a=E.histogram();e.bins&&a.thresholds(e.bins);var n=a(t);e.processed_data=n.map((function(t){return{x:t.x0,y:t.length}}))}else{var o,i;e.processed_data=r.map((function(t){return{x:t[e.x_accessor],y:t[e.y_accessor]}}));for(var s=0;s<e.processed_data.length;s++)o=e.processed_data[s],s===e.processed_data.length-1?o.dx=e.processed_data[s-1].dx:(i=e.processed_data[s+1],o.dx=i.x-o.x)}return e.processed||(e.processed={}),e.processed.original_data=e.data,e.processed.original_x_accessor=e.x_accessor,e.processed.original_y_accessor=e.y_accessor,e.data=[e.processed_data],e.x_accessor=e.processed_x_accessor,e.y_accessor=e.processed_y_accessor,this}function Oe(e){var t=e.data[0],r=t.map((function(t){return t[e.x_accessor]})),a=t.map((function(t){return t[e.y_accessor]}));return e.least_squares&&(e.ls_line=Fe(r,a)),this}function ze(e){var t=O(e.target),r=e.data[0],a=E.min(r,(function(t){return t[e.x_accessor]})),n=E.max(r,(function(t){return t[e.x_accessor]}));E.select(e.target).selectAll(".mg-least-squares-line").remove(),t.append("svg:line").attr("x1",e.scales.X(a)).attr("x2",e.scales.X(n)).attr("y1",e.scales.Y(e.ls_line.fit(a))).attr("y2",e.scales.Y(e.ls_line.fit(n))).attr("class","mg-least-squares-line")}function Fe(t,e){var r,a,n;t.length,r=x(t[0])?t.map((function(t){return t.getTime()})):t,a=x(e[0])?e.map((function(t){return t.getTime()})):e;for(var o=E.mean(r),i=E.mean(a),s=0,c=0,l=0;l<r.length;l++)s+=((n=r[l])-o)*(a[l]-i),c+=(n-o)*(n-o);var u=s/c,d=i-u*o;return{x0:d,beta:u,fit:function(t){return d+t*u}}}function Ce(t,e){return 0<=t&&t<=1?Math.pow(1-Math.pow(t,e),e):0}function Te(t){var e,r,a,n,o,i,s,c=(a=t,n=E.sum(a.map((function(t){return t.w}))),{xbar:E.sum(a.map((function(t){return t.w*t.x})))/n,ybar:E.sum(a.map((function(t){return t.w*t.y})))/n}),l=(o=t,i=r=c.xbar,s=e=c.ybar,E.sum(o.map((function(t){return Math.pow(t.w,2)*(t.x-i)*(t.y-s)})))/E.sum(o.map((function(t){return Math.pow(t.w,2)*Math.pow(t.x-i,2)}))));return{beta:l,xbar:r,ybar:e,x0:e-l*r}}function Re(t,e,r,a,n){var o=Math.floor(t.length*r),i=t.slice();i.sort((function(t,e){return t<e?-1:e<t?1:0}));for(var s,c,l,u,d,f=E.quantile(i,.98),p=E.quantile(i,.02),_=E.zip(t,e,n).sort(),m=Math.abs(f-p)/a,g=p,h=f,x=E.range(g,h,m),y=[],v=0;v<x.length;v+=1){c=x[v],s=_.map((function(t){return[Math.abs(t[0]-c),t[0],t[1],t[2]]})).sort().slice(0,o),d=E.max(s)[0];var b=Te(s=s.map((function(t){return{w:(e=t[0]/d,Ce(e,3)*t[3]),x:t[1],y:t[2]};var e})));u=b.x0,l=b.beta,y.push(u+l*c)}return{x,y}}function Ee(r){return"count"===r.format?function(t){var e;return e=t%1!=0?E.format(",."+r.decimals+"f"):E.format(",.0f"),r.yax_units_append?e(t)+r.yax_units:r.yax_units+e(t)}:function(t){var e=(r.decimals?"."+r.decimals:"")+"%";return E.format(e)(t)}}MG.register("point",(function(a){var o=this;this.init=function(e){if((this.args=e).x_axis_type=s(e,"x"),e.y_axis_type=s(e,"y"),Me(e),Oe(e),Ot(e),"categorical"===e.x_axis_type?(MG.scale_factory(e).namespace("x").categoricalDomainFromData().categoricalRangeBands([0,e.xgroup_height],null===e.xgroup_accessor),e.xgroup_accessor?new MG.scale_factory(e).namespace("xgroup").categoricalDomainFromData().categoricalRangeBands("bottom"):(e.scales.XGROUP=function(){return Y(e)},e.scalefns.xgroupf=function(){return Y(e)}),e.scalefns.xoutf=function(t){return e.scalefns.xf(t)+e.scalefns.xgroupf(t)}):(MG.scale_factory(e).namespace("x").inflateDomain(!0).zeroBottom("categorical"===e.y_axis_type).numericalDomainFromData((e.baselines||[]).map((function(t){return t[e.x_accessor]}))).numericalRange("bottom"),e.scalefns.xoutf=e.scalefns.xf),"categorical"===e.y_axis_type)MG.scale_factory(e).namespace("y").zeroBottom(!0).categoricalDomainFromData().categoricalRangeBands([0,e.ygroup_height],!0),e.ygroup_accessor?new MG.scale_factory(e).namespace("ygroup").categoricalDomainFromData().categoricalRangeBands("left"):(e.scales.YGROUP=function(){return b(e)},e.scalefns.ygroupf=function(){return b(e)}),e.scalefns.youtf=function(t){return e.scalefns.yf(t)+e.scalefns.ygroupf(t)};else{var t=(e.baselines||[]).map((function(t){return t[e.y_accessor]}));MG.scale_factory(e).namespace("y").inflateDomain(!0).zeroBottom("categorical"===e.x_axis_type).numericalDomainFromData(t).numericalRange("left"),e.scalefns.youtf=function(t){return e.scalefns.yf(t)}}if(null!==e.color_accessor){var r=MG.scale_factory(e).namespace("color");"number"===e.color_type?r.numericalDomainFromData(B(e)).numericalRange(I(e)).clamp(!0):e.color_domain?r.categoricalDomain(e.color_domain).categoricalRange(e.color_range):r.categoricalDomainFromData().categoricalColorRange()}return e.size_accessor&&new MG.scale_factory(e).namespace("size").numericalDomainFromData().numericalRange(it(e)).clamp(!0),new MG.axis_factory(e).namespace("x").type(e.x_axis_type).zeroLine("categorical"===e.y_axis_type).position(e.x_axis_position).rug(nt(e)).label(st).draw(),new MG.axis_factory(e).namespace("y").type(e.y_axis_type).zeroLine("categorical"===e.x_axis_type).position(e.y_axis_position).rug(K(e)).label(et).draw(),this.mainPlot(),this.markers(),this.rollover(),this.windowListeners(),e.brush&&MG.add_brush_function(e),this},this.markers=function(){return St(a),a.least_squares&&ze(a),this},this.mainPlot=function(){var t=O(a.target),e=we(a.data[0],a);t.selectAll(".mg-points").remove();var r=t.append("g").classed("mg-points",!0).selectAll("circle").data(e).enter().append("circle").attr("class",(function(t,e){return"path-"+e})).attr("cx",a.scalefns.xoutf).attr("cy",(function(t){return a.scalefns.youtf(t)}));return null!==a.color_accessor?(r.attr("fill",a.scalefns.colorf),r.attr("stroke",a.scalefns.colorf)):r.classed("mg-points-mono",!0),null!==a.size_accessor?r.attr("r",a.scalefns.sizef):r.attr("r",a.point_size),this},this.rollover=function(){var t=O(a.target);0===t.selectAll(".mg-active-datapoint-container").nodes().length&&S(t,"mg-active-datapoint-container"),t.selectAll(".mg-voronoi").remove();var e=E.voronoi().x(a.scalefns.xoutf).y(a.scalefns.youtf).extent([[a.buffer,a.buffer+(a.title?a.title_y_position:0)],[a.width-a.buffer,a.height-a.buffer]]);return t.append("g").attr("class","mg-voronoi").selectAll("path").data(e.polygons(we(a.data[0],a))).enter().append("path").attr("d",(function(t){return null==t?null:"M"+t.join(",")+"Z"})).attr("class",(function(t,e){return"path-"+e})).style("fill-opacity",0).on("mouseover",this.rolloverOn(a)).on("mouseout",this.rolloverOff(a)).on("mousemove",this.rolloverMove(a)),1===a.data[0].length&&be(a,t,a.data[0][0]),this},this.rolloverOn=function(a){var n=O(a.target);return function(t,e){n.selectAll(".mg-points circle").classed("selected",!1);var r=n.selectAll(".mg-points circle.path-"+e).classed("selected",!0);a.size_accessor?r.attr("r",(function(t){return a.scalefns.sizef(t)+a.active_point_size_increase})):r.attr("r",a.point_size+a.active_point_size_increase),a.linked&&!MG.globals.link&&(MG.globals.link=!0,E.selectAll(".mg-voronoi .path-"+e).each((function(){E.select(o).on("mouseover")(t,e)}))),a.show_rollover_text&&be(a,n,t.data),a.mouseover&&a.mouseover(t,e)}},this.rolloverOff=function(a){var n=O(a.target);return function(t,e){a.linked&&MG.globals.link&&(MG.globals.link=!1,E.selectAll(".mg-voronoi .path-"+e).each((function(){E.select(o).on("mouseout")(t,e)})));var r=n.selectAll(".mg-points circle").classed("unselected",!1).classed("selected",!1);a.size_accessor?r.attr("r",a.scalefns.sizef):r.attr("r",a.point_size),1<a.data[0].length&&Lt(n),a.mouseout&&a.mouseout(t,e)}},this.rolloverMove=function(r){return function(t,e){r.mousemove&&r.mousemove(t,e)}},this.update=function(t){return this},this.windowListeners=function(){return Qt(this.args),this},this.init(a)}),{y_padding_percentage:.05,y_outer_padding_percentage:.2,ygroup_padding_percentage:0,ygroup_outer_padding_percentage:0,x_padding_percentage:.05,x_outer_padding_percentage:.2,xgroup_padding_percentage:0,xgroup_outer_padding_percentage:0,y_categorical_show_guides:!0,x_categorical_show_guides:!0,buffer:16,ls:!1,lowess:!1,point_size:2.5,label_accessor:null,size_accessor:null,color_accessor:null,size_range:null,color_range:null,size_domain:null,color_domain:null,active_point_size_increase:1,color_type:"number"}),MG.register("bar",(function(M){var G=this;this.args=M,this.init=function(e){if((G.args=e).x_axis_type=s(e,"x"),e.y_axis_type=s(e,"y"),"categorical"==e.x_axis_type?e.orientation="vertical":"categorical"==e.y_axis_type?e.orientation="horizontal":"categorical"!=e.x_axis_type&&"categorical"!=e.y_axis_type&&(e.orientation="vertical"),Me(e),Oe(e),Ot(e),"categorical"===e.x_axis_type?(MG.scale_factory(e).namespace("x").categoricalDomainFromData().categoricalRangeBands([0,e.xgroup_height],null===e.xgroup_accessor),e.xgroup_accessor?new MG.scale_factory(e).namespace("xgroup").categoricalDomainFromData().categoricalRangeBands("bottom"):(e.scales.XGROUP=function(t){return Y(e)},e.scalefns.xgroupf=function(t){return Y(e)}),e.scalefns.xoutf=function(t){return e.scalefns.xf(t)+e.scalefns.xgroupf(t)}):(MG.scale_factory(e).namespace("x").inflateDomain(!0).zeroBottom("categorical"===e.y_axis_type).numericalDomainFromData((e.baselines||[]).map((function(t){return t[e.x_accessor]}))).numericalRange("bottom"),e.scalefns.xoutf=e.scalefns.xf),"categorical"===e.y_axis_type)MG.scale_factory(e).namespace("y").zeroBottom(!0).categoricalDomainFromData().categoricalRangeBands([0,e.ygroup_height],!0),e.ygroup_accessor?new MG.scale_factory(e).namespace("ygroup").categoricalDomainFromData().categoricalRangeBands("left"):(e.scales.YGROUP=function(){return b(e)},e.scalefns.ygroupf=function(t){return b(e)}),e.scalefns.youtf=function(t){return e.scalefns.yf(t)+e.scalefns.ygroupf(t)};else{var t=(e.baselines||[]).map((function(t){return t[e.y_accessor]}));MG.scale_factory(e).namespace("y").inflateDomain(!0).zeroBottom("categorical"===e.x_axis_type).numericalDomainFromData(t).numericalRange("left"),e.scalefns.youtf=function(t){return e.scalefns.yf(t)}}return null!==e.ygroup_accessor&&(e.ycolor_accessor=e.y_accessor,MG.scale_factory(e).namespace("ycolor").scaleName("color").categoricalDomainFromData().categoricalColorRange()),null!==e.xgroup_accessor&&(e.xcolor_accessor=e.x_accessor,MG.scale_factory(e).namespace("xcolor").scaleName("color").categoricalDomainFromData().categoricalColorRange()),new MG.axis_factory(e).namespace("x").type(e.x_axis_type).zeroLine("categorical"===e.y_axis_type).position(e.x_axis_position).draw(),new MG.axis_factory(e).namespace("y").type(e.y_axis_type).zeroLine("categorical"===e.x_axis_type).position(e.y_axis_position).draw(),G.mainPlot(),G.markers(),G.rollover(),G.windowListeners(),G},this.mainPlot=function(){var t=O(M.target),e=M.data[0],r=t.select("g.mg-barplot"),a=r.empty(),n=void 0;a&&M.animate_on_load||M.transition_on_update,M.transition_duration,a&&(r=t.append("g").classed("mg-barplot",!0)),n=r.selectAll(".mg-bar").data(e).enter().append("rect").classed("mg-bar",!0).classed("default-bar",!M.scales.hasOwnProperty("COLOR"));var o=void 0,i=void 0,s=void 0,c=void 0,l=void 0,u=void 0,d=void 0,f=void 0,p=void 0,_=void 0,m=void 0,g=void 0,h=void 0,x=void 0,y=void 0,v=void 0;if("vertical"==M.orientation&&(o="height",i="width",s=M.y_axis_type,c=M.x_axis_type,l="y",u="x",d="categorical"==s?M.scalefns.youtf:M.scalefns.yf,f="categorical"==c?M.scalefns.xoutf:M.scalefns.xf,p=M.scales.Y,_=M.scales.X,m=M.y_accessor,g=M.x_accessor,h=function(t){var e=void 0;return e=d(t),t[m]<0&&(e=p(0)),e},x=function(t){return Math.abs(d(t)-p(0))},y=function(t){return Math.abs(p(t[M.reference_accessor])-p(0))},v=function(t){return p(t[M.reference_accessor])}),"horizontal"==M.orientation&&(o="width",i="height",s=M.x_axis_type,c=M.y_axis_type,l="x",u="y",d="categorical"==s?M.scalefns.xoutf:M.scalefns.xf,f="categorical"==c?M.scalefns.youtf:M.scalefns.yf,p=M.scales.X,_=M.scales.Y,m=M.x_accessor,g=M.y_accessor,h=function(t){return p(0)},x=function(t){return Math.abs(d(t)-p(0))},y=function(t){return Math.abs(p(t[M.reference_accessor])-p(0))},v=function(t){return p(0)}),n.attr(l,h),n.attr(u,(function(t){var e=void 0;return"categorical"==c?e=f(t):(e=_(0),t[g]<0&&(e=f(t))),e-M.bar_thickness/2})),M.scales.COLOR&&n.attr("fill",M.scalefns.colorf),n.attr(o,x).attr(i,(function(t){return M.bar_thickness})),null!==M.reference_accessor){var b=e.filter((function(t){return t.hasOwnProperty(M.reference_accessor)}));r.selectAll(".mg-categorical-reference").data(b).enter().append("rect").attr(l,v).attr(u,(function(t){return f(t)-M.reference_thickness/2})).attr(o,y).attr(i,M.reference_thickness)}if(null!==M.comparison_accessor){var w=null;w=null===M.comparison_thickness?M.bar_thickness/2:M.comparison_thickness;var k=e.filter((function(t){return t.hasOwnProperty(M.comparison_accessor)}));r.selectAll(".mg-categorical-comparison").data(k).enter().append("line").attr(l+"1",(function(t){return p(t[M.comparison_accessor])})).attr(l+"2",(function(t){return p(t[M.comparison_accessor])})).attr(u+"1",(function(t){return f(t)-w/2})).attr(u+"2",(function(t){return f(t)+w/2})).attr("stroke","black").attr("stroke-width",M.comparison_width)}return(M.legend||null!==M.color_accessor&&M.ygroup_accessor!==M.color_accessor)&&(M.legend_target?function(t){var e=t.legend_target,r=t.orientation,a=t.scales;if(e){var n=E.select(e).append("div").classed("mg-bar-target-legend",!0);("horizontal"==r?a.Y.domain():a.X.domain()).forEach((function(t){var e=n.append("span").classed("mg-bar-target-element",!0);e.append("span").classed("mg-bar-target-legend-shape",!0).style("color",a.COLOR(t)).text("◼ "),e.append("span").classed("mg-bar-target-legend-text",!0).text(t)}))}}(M):function(t,r){var e=void 0;e="horizontal"==r.orientation?r.scales.Y.domain():r.scales.X.domain();var a=0,n=t.append("g").classed("mg-bar-legend",!0).append("text");n.selectAll("*").remove(),n.attr("width",r.right).attr("height",100).attr("text-anchor","start"),e.forEach((function(t){var e=n.append("tspan").attr("x",P(r)).attr("y",r.height/2).attr("dy",1.1*a+"em");e.append("tspan").text("■ ").attr("fill",r.scales.COLOR(t)).attr("font-size",20),e.append("tspan").text(t).attr("font-weight",300).attr("font-size",10),a++}))}(t,M)),G},this.markers=function(){return St(M),G},this.rollover=function(){var t=O(M.target);0===t.selectAll(".mg-active-datapoint-container").nodes().length&&S(t,"mg-active-datapoint-container"),t.selectAll(".mg-rollover-rect").remove(),t.selectAll(".mg-active-datapoint").remove();var e=void 0,r=void 0,a=void 0,n=void 0,o=void 0,i=void 0,s=void 0,c=void 0,l=void 0,u=void 0,d=void 0,f=void 0;"vertical"==M.orientation&&(e="height",r="width",a=M.y_axis_type,n=M.x_axis_type,o="y",i="x","categorical"==a?M.scalefns.youtf:M.scalefns.yf,s="categorical"==n?M.scalefns.xoutf:M.scalefns.xf,c=M.scales.Y,l=M.scales.X,M.y_accessor,u=M.x_accessor,d=function(t){return b(M)},f=function(t){return M.height-M.top-M.bottom-2*M.buffer}),"horizontal"==M.orientation&&(e="width",r="height",a=M.x_axis_type,n=M.y_axis_type,o="x",i="y","categorical"==a?M.scalefns.xoutf:M.scalefns.xf,s="categorical"==n?M.scalefns.youtf:M.scalefns.yf,c=M.scales.X,l=M.scales.Y,M.x_accessor,u=M.y_accessor,d=function(t){return c(0)},f=function(t){return M.width-M.left-M.right-2*M.buffer});var p=void 0,_=void 0;"right"===M.rollover_align?(p=M.width-M.right,_="end"):"left"===M.rollover_align?(p=M.left,_="start"):(p=(M.width-M.left-M.right)/2+M.left,_="middle"),t.append("text").attr("class","mg-active-datapoint").attr("xml:space","preserve").attr("x",p).attr("y",.75*M.top).attr("dy",".35em").attr("text-anchor",_);var m=t.append("g").attr("class","mg-rollover-rect").selectAll(".mg-bar-rollover").data(M.data[0]).enter().append("rect").attr("class","mg-bar-rollover");return m.attr("opacity",0).attr(o,d).attr(i,(function(t){var e=void 0;return"categorical"==n?e=s(t):(e=l(0),t[u]<0&&(e=s(t))),e-M.bar_thickness/2})),m.attr(e,f),m.attr(r,(function(t){return M.bar_thickness})),m.on("mouseover",G.rolloverOn(M)).on("mouseout",G.rolloverOff(M)).on("mousemove",G.rolloverMove(M)),G},this.rolloverOn=function(o){var i=O(o.target);return G.is_vertical?o.x_accessor:o.y_accessor,G.is_vertical?o.y_accessor:o.x_accessor,G.is_vertical?o.yax_units:o.xax_units,function(t,r){MG.time_format(o.utc_time,"%b %e, %Y"),Ee(o);var e=i.selectAll("g.mg-barplot .mg-bar").filter((function(t,e){return e===r})).classed("active",!0);if(o.scales.hasOwnProperty("COLOR")?e.attr("fill",E.rgb(o.scalefns.colorf(t)).darker()):e.classed("default-active",!0),o.show_rollover_text){var a=Xt(o,{svg:i}),n=a.mouseover_row();o.ygroup_accessor&&n.text(t[o.ygroup_accessor]+"   ").bold(),n.text(Se(o,t)),n.text(o.y_accessor+": "+t[o.y_accessor]),(o.predictor_accessor||o.baseline_accessor)&&(n=a.mouseover_row(),o.predictor_accessor&&n.text(Pe(o,t,null,o.predictor_accessor,!1)),o.baseline_accessor&&n.text(Pe(o,t,null,o.baseline_accessor,!1)))}o.mouseover&&o.mouseover(t,r)}},this.rolloverOff=function(a){var n=O(a.target);return function(t,e){var r=n.selectAll("g.mg-barplot .mg-bar.active").classed("active",!1);a.scales.hasOwnProperty("COLOR")?r.attr("fill",a.scalefns.colorf(t)):r.classed("default-active",!1),n.select(".mg-active-datapoint").text(""),Lt(n),a.mouseout&&a.mouseout(t,e)}},this.rolloverMove=function(r){return function(t,e){r.mousemove&&r.mousemove(t,e)}},this.windowListeners=function(){return Qt(G.args),G},this.init(M)}),{y_padding_percentage:.05,y_outer_padding_percentage:.2,ygroup_padding_percentage:0,ygroup_outer_padding_percentage:0,x_padding_percentage:.05,x_outer_padding_percentage:.2,xgroup_padding_percentage:0,xgroup_outer_padding_percentage:0,buffer:16,y_accessor:"factor",x_accessor:"value",reference_accessor:null,comparison_accessor:null,secondary_label_accessor:null,color_accessor:null,color_type:"category",color_domain:null,reference_thickness:1,comparison_width:3,comparison_thickness:null,legend:!1,legend_target:null,mouseover_align:"right",baseline_accessor:null,predictor_accessor:null,predictor_proportion:5,show_bar_zero:!0,binned:!0,truncate_x_labels:!0,truncate_y_labels:!0}),MG.data_table=function(t){return this.args=t,this.args.standard_col={width:150,font_size:12,font_weight:"normal"},this.args.columns=[],this.formatting_options=[["color","color"],["font-weight","font_weight"],["font-style","font_style"],["font-size","font_size"]],this._strip_punctuation=function(t){return t.replace(/[^a-zA-Z0-9 _]+/g,"").replace(/ +?/g,"")},this._format_element=function(a,n,o){this.formatting_options.forEach((function(t){var e=t[0],r=t[1];o[r]&&a.style(e,"string"==typeof o[r]||"number"==typeof o[r]?o[r]:o[r](n))}))},this._add_column=function(t,e){var r=this.args.standard_col,a=p(MG.clone(t),MG.clone(r));a.type=e,this.args.columns.push(a)},this.target=function(){var t=arguments[0];return this.args.target=t,this},this.title=function(){return this._add_column(arguments[0],"title"),this},this.text=function(){return this._add_column(arguments[0],"text"),this},this.bullet=function(){return this},this.sparkline=function(){return this},this.number=function(){return this._add_column(arguments[0],"number"),this},this.display=function(){var t=this.args;j(t);var e,r,a,n,o,i,s,c,l,u,d,f,p=t.target,_=E.select(p).append("table").classed("mg-data-table",!0),m=_.append("colgroup"),g=_.append("thead"),h=_.append("tbody");for(a=g.append("tr"),f=0;f<t.columns.length;f++){var x=t.columns[f];i=x.type,c=void 0===(c=x.label)?"":c,n=a.append("th").style("width",x.width).style("text-align","title"===i?"left":"right").text(c),t.show_tooltips&&x.description&&k()&&(n.append("i").classed("fa",!0).classed("fa-question-circle",!0).classed("fa-inverse",!0),$(n.node()).popover({html:!0,animation:!1,content:x.description,trigger:"hover",placement:"top",container:$(n.node())}))}for(f=0;f<t.columns.length;f++)d=m.append("col"),"number"===t.columns[f].type&&d.attr("align","char").attr("char",".");for(var y=0;y<t.data.length;y++){a=h.append("tr");for(var v=0;v<t.columns.length;v++){if(o=(e=t.columns[v]).accessor,s=l=t.data[y][o],"number"===(i=e.type)){if(e.hasOwnProperty("round")&&!e.hasOwnProperty("format")&&(l=E.format("0,."+e.round+"f")(l)),e.hasOwnProperty("value_formatter")&&(l=e.value_formatter(l)),e.hasOwnProperty("format")){e.round&&(l=Math.round(l,e.round));var b,w=e.format;"percentage"===w&&(b=E.format(".0%")),"count"===w&&(b=E.format(",.0f")),"temperature"===w&&(b=function(t){return t+"°"}),l=b(l)}e.hasOwnProperty("currency")&&(l=e.currency+l)}u=a.append("td").classed("table-"+i,!0).classed("table-"+i+"-"+this._strip_punctuation(o),!0).attr("data-value",s).style("width",e.width).style("text-align","title"===i||"text"===i?"left":"right"),this._format_element(u,s,e),"title"===i?(r=u.append("div").text(l),this._format_element(r,l,e),t.columns[v].hasOwnProperty("secondary_accessor")&&u.append("div").text(t.data[y][t.columns[v].secondary_accessor]).classed("secondary-title",!0)):u.text(l)}}return this},this},MG.register("missing-data",(function(t){var R=this;this.init=function(t){yt(R.args=t),vt(t);var e=E.select(t.target);Gt(e,t);var r,a,n,o,i,s,c,l,u,d,f,p,_,m,g,h,x,y,v,b,w,k,M,G,A,D,O,z,F,C=e.selectAll("svg");if(bt(C,t),kt(C=wt(C,t),t),Mt(C,t),r=t.target,E.select(r).selectAll("svg *").remove(),C.classed("mg-missing",!0),(a=t.legend_target)&&E.select(a).html(""),j(t),t.show_missing_background){!function(t){for(var e=[],r=1;r<=50;r++)e.push({x:r,y:Math.random()-.03*r});t.data=e}(t),(G=t).scales.X=E.scaleLinear().domain([0,G.data.length]).range([Y(G),P(G)]),G.scalefns.yf=function(t){var e=t.y;return G.scales.Y(e)},(M=t).scales.Y=E.scaleLinear().domain([-2,2]).range([M.height-M.bottom-2*M.buffer,M.top]),M.scalefns.xf=function(t){var e=t.x;return M.scales.X(e)};var T=S(C,"mg-missing-pane");h=T,y=(x=t).title,v=x.buffer,b=x.title_y_position,w=x.width,k=x.height,h.append("svg:rect").classed("mg-missing-background",!0).attr("x",v).attr("y",v+2*(y?b:0)).attr("width",w-2*v).attr("height",k-2*v-2*(y?b:0)).attr("rx",15).attr("ry",15),d=T,p=(f=t).scalefns,_=f.interpolate,m=f.data,g=E.line().x(p.xf).y(p.yf).curve(_),d.append("path").attr("class","mg-main-line mg-line1-color").attr("d",g(m)),n=T,i=(o=t).scalefns,s=o.scales,c=o.interpolate,l=o.data,u=E.area().x(i.xf).y0(s.Y.range()[0]).y1(i.yf).curve(c),n.append("path").attr("class","mg-main-area mg-area1-color").attr("d",u(l))}return A=C,O=(D=t).missing_text,z=D.width,F=D.height,A.selectAll(".mg-missing-text").data([O]).enter().append("text").attr("class","mg-missing-text").attr("x",z/2).attr("y",F/2).attr("dy",".50em").attr("text-anchor","middle").text(O),R.windowListeners(),R},this.windowListeners=function(){return Qt(R.args),R},this.init(t)}),{top:40,bottom:30,right:10,left:0,buffer:8,legend_target:"",width:350,height:220,missing_text:"Data currently missing or unavailable",scalefns:{},scales:{},show_tooltips:!0,show_missing_background:!0}),MG.raw_data_transformation=Me,MG.process_line=Ae,MG.process_histogram=De,MG.process_categorical_variables=function(t){return"vertical"===t.bar_orientation?t.x_accessor:t.y_accessor,"vertical"===t.bar_orientation?t.y_accessor:t.x_accessor,this},MG.process_point=Oe,MG.add_ls=ze,MG.add_lowess=function(e){var t=O(e.target),r=e.lowess_line,a=E.svg.line().x((function(t){return e.scales.X(t.x)})).y((function(t){return e.scales.Y(t.y)})).interpolate(e.interpolate);t.append("path").attr("d",a(r)).attr("class","mg-lowess-line")},MG.lowess_robust=function(t,e,r,a){var n,o,i=[];for(E.mean(e),o=0;o<t.length;o+=1)i.push(1);var s=(n=Re(t,e,r,a,i)).x,c=n.y;for(o=0;o<100;o+=1){i=E.zip(c,e).map((function(t){return Math.abs(t[1]-t[0])}));var l=E.quantile(i.sort(),.5);s=(n=Re(t,e,r,a,i=i.map((function(t){return Ce(t/(6*l),2)})))).x,c=n.y}return E.zip(s,c).map((function(t){var e={};return e.x=t[0],e.y=t[1],e}))},MG.lowess=function(t,e,r,a){for(var n=[],o=0;o<t.length;o+=1)n.push(1);Re(t,e,r,a,n)},MG.least_squares=Fe;var Ye=function(t,e,r,a){return"string"==typeof t?MG.time_format(a,t)(e[r]):"function"==typeof t?t(e):e[r]},$e=function(t,e,r){return"string"==typeof t?E.format("s")(e[r]):"function"==typeof t?t(e):e[r]};function Pe(t,e,r,a,n){var o,i=function(t){if(t.rollover_time_format)return MG.time_format(t.utc_time,t.rollover_time_format);switch(t.processed.x_time_frame){case"millis":return MG.time_format(t.utc_time,"%b %e, %Y  %H:%M:%S.%L");case"seconds":return MG.time_format(t.utc_time,"%b %e, %Y  %H:%M:%S");case"less-than-a-day":case"four-days":return MG.time_format(t.utc_time,"%b %e, %Y  %I:%M%p")}return MG.time_format(t.utc_time,"%b %e, %Y")}(t);return o="string"==typeof e[a]?function(t){return t}:Ee(t),null!==r?n?Ye(r,e,a,t.utc):$e(r,e,a):n?i(new Date(+e[a]))+"  ":(t.time_series?"":a+": ")+o(e[a])+"   "}function Se(t,e){return Pe(t,e,t.x_mouseover,t.x_accessor,t.time_series)}function Le(t,e){return Pe(t,e,t.y_mouseover,t.y_accessor,!1)}function je(c,l){return function(){for(var a=this,n=a.cloneNode(),o=a.getTotalLength()||0,i=(n.setAttribute("d",c),n).getTotalLength()||0,t=[0],e=0,r=l/Math.max(o,i);(e+=r)<1;)t.push(e);t.push(1);var s=t.map((function(t){var e=a.getPointAtLength(t*o),r=n.getPointAtLength(t*i);return E.interpolate([e.x,e.y],[r.x,r.y])}));return function(e){return e<1?"M"+s.map((function(t){return t(e)})).join("L"):c}}}function Xe(t){console.error("ERROR : ",t.target," : ",t.error),E.select(t.target).select(".mg-chart-title").append("tspan").attr("class","fa fa-x fa-exclamation-circle mg-warning").attr("dx","0.3em").text("")}return MG.format_rollover_number=Ee,MG.path_tween=je,MG.render_markup=function(t){return"undefined"===("undefined"==typeof window?"undefined":c(window))?function(t){var e,r=MG.virtual_window,a=E.select(r.document),n=r.document.createElement("div"),o=__webpack_require__.g.d3,i=__webpack_require__.g.window,s=__webpack_require__.g.document;__webpack_require__.g.d3=a,__webpack_require__.g.window=r,__webpack_require__.g.document=r.document;try{t(n)}catch(t){e=t}if(__webpack_require__.g.d3=o,__webpack_require__.g.window=i,__webpack_require__.g.document=s,e)throw e;return a.select((function(){return n})).html()}(t):(t(r=document.createElement("div")),E.select(r).html());var r},MG.init_virtual_window=function(t,e){if(!MG.virtual_window||e){var r=t.jsdom({html:"",features:{QuerySelector:!0}});MG.virtual_window=r.defaultView}},MG.error=Xe,MG},void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},43:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,V,W=[].slice,X={}.hasOwnProperty,Y=function(a,b){function c(){this.constructor=a}for(var d in b)X.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},Z=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};for(t={catchupTime:500,initialRate:.03,minTime:500,ghostTime:500,maxProgressPerFrame:10,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},B=function(){var a;return null!=(a="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?a:+new Date},D=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,s=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==D&&(D=function(a){return setTimeout(a,50)},s=function(a){return clearTimeout(a)}),F=function(a){var b,c;return b=B(),(c=function(){var d;return(d=B()-b)>=33?(b=B(),a(d,(function(){return D(c)}))):setTimeout(c,33-d)})()},E=function(){var a,b,c;return c=arguments[0],b=arguments[1],a=3<=arguments.length?W.call(arguments,2):[],"function"==typeof c[b]?c[b].apply(c,a):c[b]},u=function(){var a,b,c,d,e,f,g;for(b=arguments[0],f=0,g=(d=2<=arguments.length?W.call(arguments,1):[]).length;g>f;f++)if(c=d[f])for(a in c)X.call(c,a)&&(e=c[a],null!=b[a]&&"object"==typeof b[a]&&null!=e&&"object"==typeof e?u(b[a],e):b[a]=e);return b},p=function(a){var b,c,d,e,f;for(c=b=0,e=0,f=a.length;f>e;e++)d=a[e],c+=Math.abs(d),b++;return c/b},w=function(a,b){var c,d,e;if(null==a&&(a="options"),null==b&&(b=!0),e=document.querySelector("[data-pace-"+a+"]")){if(c=e.getAttribute("data-pace-"+a),!b)return c;try{return JSON.parse(c)}catch(f){return d=f,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",d):void 0}}},g=function(){function a(){}return a.prototype.on=function(a,b,c,d){var e;return null==d&&(d=!1),null==this.bindings&&(this.bindings={}),null==(e=this.bindings)[a]&&(e[a]=[]),this.bindings[a].push({handler:b,ctx:c,once:d})},a.prototype.once=function(a,b,c){return this.on(a,b,c,!0)},a.prototype.off=function(a,b){var c,d,e;if(null!=(null!=(d=this.bindings)?d[a]:void 0)){if(null==b)return delete this.bindings[a];for(c=0,e=[];c<this.bindings[a].length;)e.push(this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):c++);return e}},a.prototype.trigger=function(){var a,b,c,d,e,f,g,h,i;if(c=arguments[0],a=2<=arguments.length?W.call(arguments,1):[],null!=(g=this.bindings)?g[c]:void 0){for(e=0,i=[];e<this.bindings[c].length;)d=(h=this.bindings[c][e]).handler,b=h.ctx,f=h.once,d.apply(null!=b?b:this,a),i.push(f?this.bindings[c].splice(e,1):e++);return i}},a}(),null==window.Pace&&(window.Pace={}),u(Pace,g.prototype),C=Pace.options=u({},t,window.paceOptions,w()),P=0,R=(T=["ajax","document","eventLag","elements"]).length;R>P;P++)!0===C[J=T[P]]&&(C[J]=t[J]);i=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return Y(b,a),b}(Error),b=function(){function a(){this.progress=0}return a.prototype.getElement=function(){var a;if(null==this.el){if(!(a=document.querySelector(C.target)))throw new i;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=a.firstChild?a.insertBefore(this.el,a.firstChild):a.appendChild(this.el)}return this.el},a.prototype.finish=function(){var a;return(a=this.getElement()).className=a.className.replace("pace-active",""),a.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},a.prototype.update=function(a){return this.progress=a,this.render()},a.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(a){i=a}return this.el=void 0},a.prototype.render=function(){var a,b;return null!=document.querySelector(C.target)&&((a=this.getElement()).children[0].style.width=this.progress+"%",(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(a.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?b="99":(b=this.progress<10?"0":"",b+=0|this.progress),a.children[0].setAttribute("data-progress",""+b)),this.lastRenderedProgress=this.progress)},a.prototype.done=function(){return this.progress>=100},a}(),h=function(){function a(){this.bindings={}}return a.prototype.trigger=function(a,b){var c,d,e,f,g;if(null!=this.bindings[a]){for(g=[],d=0,e=(f=this.bindings[a]).length;e>d;d++)c=f[d],g.push(c.call(this,b));return g}},a.prototype.on=function(a,b){var c;return null==(c=this.bindings)[a]&&(c[a]=[]),this.bindings[a].push(b)},a}(),O=window.XMLHttpRequest,N=window.XDomainRequest,M=window.WebSocket,v=function(a,b){var d,e,f;for(d in f=[],b.prototype)try{e=b.prototype[d],f.push(null==a[d]&&"function"!=typeof e?a[d]=e:void 0)}catch(g){g}return f},z=[],Pace.ignore=function(){var a,b,c;return b=arguments[0],a=2<=arguments.length?W.call(arguments,1):[],z.unshift("ignore"),c=b.apply(null,a),z.shift(),c},Pace.track=function(){var a,b,c;return b=arguments[0],a=2<=arguments.length?W.call(arguments,1):[],z.unshift("track"),c=b.apply(null,a),z.shift(),c},I=function(a){var b;if(null==a&&(a="GET"),"track"===z[0])return"force";if(!z.length&&C.ajax){if("socket"===a&&C.ajax.trackWebSockets)return!0;if(b=a.toUpperCase(),Z.call(C.ajax.trackMethods,b)>=0)return!0}return!1},j=function(a){function b(){var a,c=this;b.__super__.constructor.apply(this,arguments),a=function(a){var b;return b=a.open,a.open=function(d,e){return I(d)&&c.trigger("request",{type:d,url:e,request:a}),b.apply(a,arguments)}},window.XMLHttpRequest=function(b){var c;return c=new O(b),a(c),c},v(window.XMLHttpRequest,O),null!=N&&(window.XDomainRequest=function(){var b;return b=new N,a(b),b},v(window.XDomainRequest,N)),null!=M&&C.ajax.trackWebSockets&&(window.WebSocket=function(a,b){var d;return d=null!=b?new M(a,b):new M(a),I("socket")&&c.trigger("request",{type:"socket",url:a,protocols:b,request:d}),d},v(window.WebSocket,M))}return Y(b,a),b}(h),Q=null,H=function(a){var b,c,d,e;for(c=0,d=(e=C.ajax.ignoreURLs).length;d>c;c++)if("string"==typeof(b=e[c])){if(-1!==a.indexOf(b))return!0}else if(b.test(a))return!0;return!1},(x=function(){return null==Q&&(Q=new j),Q})().on("request",(function(b){var c,d,e,f,g;return f=b.type,e=b.request,g=b.url,H(g)||Pace.running||!1===C.restartOnRequestAfter&&"force"!==I(f)?void 0:(d=arguments,"boolean"==typeof(c=C.restartOnRequestAfter||0)&&(c=0),setTimeout((function(){var c,g,h,i,j;if("socket"===f?e.readyState<2:0<(h=e.readyState)&&4>h){for(Pace.restart(),j=[],c=0,g=(i=Pace.sources).length;g>c;c++){if((J=i[c])instanceof a){J.watch.apply(J,d);break}j.push(void 0)}return j}}),c))})),a=function(){function a(){var a=this;this.elements=[],x().on("request",(function(){return a.watch.apply(a,arguments)}))}return a.prototype.watch=function(a){var b,c,d,e;return d=a.type,b=a.request,e=a.url,H(e)?void 0:(c="socket"===d?new m(b):new n(b),this.elements.push(c))},a}(),n=function(a){var b,d,e,f,g,h=this;if(this.progress=0,null!=window.ProgressEvent)for(a.addEventListener("progress",(function(a){return h.progress=a.lengthComputable?100*a.loaded/a.total:h.progress+(100-h.progress)/2})),d=0,e=(g=["load","abort","timeout","error"]).length;e>d;d++)b=g[d],a.addEventListener(b,(function(){return h.progress=100}));else f=a.onreadystatechange,a.onreadystatechange=function(){var b;return 0===(b=a.readyState)||4===b?h.progress=100:3===a.readyState&&(h.progress=50),"function"==typeof f?f.apply(null,arguments):void 0}},m=function(a){var b,c,d,e,f=this;for(this.progress=0,c=0,d=(e=["error","open"]).length;d>c;c++)b=e[c],a.addEventListener(b,(function(){return f.progress=100}))},d=function(a){var b,c,d,f;for(null==a&&(a={}),this.elements=[],null==a.selectors&&(a.selectors=[]),c=0,d=(f=a.selectors).length;d>c;c++)b=f[c],this.elements.push(new e(b))},e=function(){function a(a){this.selector=a,this.progress=0,this.check()}return a.prototype.check=function(){var a=this;return document.querySelector(this.selector)?this.done():setTimeout((function(){return a.check()}),C.elements.checkInterval)},a.prototype.done=function(){return this.progress=100},a}(),c=function(){function a(){var a,b,c=this;this.progress=null!=(b=this.states[document.readyState])?b:100,a=document.onreadystatechange,document.onreadystatechange=function(){return null!=c.states[document.readyState]&&(c.progress=c.states[document.readyState]),"function"==typeof a?a.apply(null,arguments):void 0}}return a.prototype.states={loading:0,interactive:50,complete:100},a}(),f=function(){var a,b,c,d,e,f=this;this.progress=0,a=0,e=[],d=0,c=B(),b=setInterval((function(){var g;return g=B()-c-50,c=B(),e.push(g),e.length>C.eventLag.sampleCount&&e.shift(),a=p(e),++d>=C.eventLag.minSamples&&a<C.eventLag.lagThreshold?(f.progress=100,clearInterval(b)):f.progress=3/(a+3)*100}),50)},l=function(){function a(a){this.source=a,this.last=this.sinceLastUpdate=0,this.rate=C.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=E(this.source,"progress"))}return a.prototype.tick=function(a,b){var c;return null==b&&(b=E(this.source,"progress")),b>=100&&(this.done=!0),b===this.last?this.sinceLastUpdate+=a:(this.sinceLastUpdate&&(this.rate=(b-this.last)/this.sinceLastUpdate),this.catchup=(b-this.progress)/C.catchupTime,this.sinceLastUpdate=0,this.last=b),b>this.progress&&(this.progress+=this.catchup*a),c=1-Math.pow(this.progress/100,C.easeFactor),this.progress+=c*this.rate*a,this.progress=Math.min(this.lastProgress+C.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},a}(),K=null,G=null,q=null,L=null,o=null,r=null,Pace.running=!1,y=function(){return C.restartOnPushState?Pace.restart():void 0},null!=window.history.pushState&&(S=window.history.pushState,window.history.pushState=function(){return y(),S.apply(window.history,arguments)}),null!=window.history.replaceState&&(V=window.history.replaceState,window.history.replaceState=function(){return y(),V.apply(window.history,arguments)}),k={ajax:a,elements:d,document:c,eventLag:f},(A=function(){var a,c,d,e,f,g,h,i;for(Pace.sources=K=[],c=0,e=(g=["ajax","elements","document","eventLag"]).length;e>c;c++)!1!==C[a=g[c]]&&K.push(new k[a](C[a]));for(d=0,f=(i=null!=(h=C.extraSources)?h:[]).length;f>d;d++)J=i[d],K.push(new J(C));return Pace.bar=q=new b,G=[],L=new l})(),Pace.stop=function(){return Pace.trigger("stop"),Pace.running=!1,q.destroy(),r=!0,null!=o&&("function"==typeof s&&s(o),o=null),A()},Pace.restart=function(){return Pace.trigger("restart"),Pace.stop(),Pace.start()},Pace.go=function(){var a;return Pace.running=!0,q.render(),a=B(),r=!1,o=F((function(b,c){var d,e,f,g,h,i,j,m,n,o,p,s,t,u,v;for(100-q.progress,e=o=0,f=!0,i=p=0,t=K.length;t>p;i=++p)for(J=K[i],n=null!=G[i]?G[i]:G[i]=[],j=s=0,u=(h=null!=(v=J.elements)?v:[J]).length;u>s;j=++s)g=h[j],f&=(m=null!=n[j]?n[j]:n[j]=new l(g)).done,m.done||(e++,o+=m.tick(b));return d=o/e,q.update(L.tick(b,d)),q.done()||f||r?(q.update(100),Pace.trigger("done"),setTimeout((function(){return q.finish(),Pace.running=!1,Pace.trigger("hide")}),Math.max(C.ghostTime,Math.max(C.minTime-(B()-a),0)))):c()}))},Pace.start=function(a){u(C,a),Pace.running=!0;try{q.render()}catch(b){i=b}return document.querySelector(".pace")?(Pace.trigger("start"),Pace.go()):setTimeout(Pace.start,50)},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return Pace}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}).call(this)},798:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var r,jQuery=__webpack_require__(1);(r=jQuery).fn.qrcode=function(h){var s;function u(a){this.mode=s,this.data=a}function o(a,c){this.typeNumber=a,this.errorCorrectLevel=c,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function q(a,c){if(null==a.length)throw Error(a.length+"/"+c);for(var d=0;d<a.length&&0==a[d];)d++;this.num=Array(a.length-d+c);for(var b=0;b<a.length-d;b++)this.num[b]=a[b+d]}function p(a,c){this.totalCount=a,this.dataCount=c}function t(){this.buffer=[],this.length=0}u.prototype={getLength:function(){return this.data.length},write:function(a){for(var c=0;c<this.data.length;c++)a.put(this.data.charCodeAt(c),8)}},o.prototype={addData:function(a){this.dataList.push(new u(a)),this.dataCache=null},isDark:function(a,c){if(0>a||this.moduleCount<=a||0>c||this.moduleCount<=c)throw Error(a+","+c);return this.modules[a][c]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){var a=1;for(a=1;40>a;a++){for(var c=p.getRSBlocks(a,this.errorCorrectLevel),d=new t,b=0,e=0;e<c.length;e++)b+=c[e].dataCount;for(e=0;e<this.dataList.length;e++)c=this.dataList[e],d.put(c.mode,4),d.put(c.getLength(),j.getLengthInBits(c.mode,a)),c.write(d);if(d.getLengthInBits()<=8*b)break}this.typeNumber=a}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,c){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=Array(this.moduleCount);for(var b=0;b<this.moduleCount;b++)this.modules[d][b]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,c),7<=this.typeNumber&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,c)},setupPositionProbePattern:function(a,c){for(var d=-1;7>=d;d++)if(!(-1>=a+d||this.moduleCount<=a+d))for(var b=-1;7>=b;b++)-1>=c+b||this.moduleCount<=c+b||(this.modules[a+d][c+b]=0<=d&&6>=d&&(0==b||6==b)||0<=b&&6>=b&&(0==d||6==d)||2<=d&&4>=d&&2<=b&&4>=b)},getBestMaskPattern:function(){for(var a=0,c=0,d=0;8>d;d++){this.makeImpl(!0,d);var b=j.getLostPoint(this);(0==d||a>b)&&(a=b,c=d)}return c},createMovieClip:function(a,c,d){for(a=a.createEmptyMovieClip(c,d),this.make(),c=0;c<this.modules.length;c++){d=1*c;for(var b=0;b<this.modules[c].length;b++){var e=1*b;this.modules[c][b]&&(a.beginFill(0,100),a.moveTo(e,d),a.lineTo(e+1,d),a.lineTo(e+1,d+1),a.lineTo(e,d+1),a.endFill())}}return a},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(a=8;a<this.moduleCount-8;a++)null==this.modules[6][a]&&(this.modules[6][a]=0==a%2)},setupPositionAdjustPattern:function(){for(var a=j.getPatternPosition(this.typeNumber),c=0;c<a.length;c++)for(var d=0;d<a.length;d++){var b=a[c],e=a[d];if(null==this.modules[b][e])for(var f=-2;2>=f;f++)for(var i=-2;2>=i;i++)this.modules[b+f][e+i]=-2==f||2==f||-2==i||2==i||0==f&&0==i}},setupTypeNumber:function(a){for(var c=j.getBCHTypeNumber(this.typeNumber),d=0;18>d;d++){var b=!a&&1==(c>>d&1);this.modules[Math.floor(d/3)][d%3+this.moduleCount-8-3]=b}for(d=0;18>d;d++)b=!a&&1==(c>>d&1),this.modules[d%3+this.moduleCount-8-3][Math.floor(d/3)]=b},setupTypeInfo:function(a,c){for(var d=j.getBCHTypeInfo(this.errorCorrectLevel<<3|c),b=0;15>b;b++){var e=!a&&1==(d>>b&1);6>b?this.modules[b][8]=e:8>b?this.modules[b+1][8]=e:this.modules[this.moduleCount-15+b][8]=e}for(b=0;15>b;b++)e=!a&&1==(d>>b&1),8>b?this.modules[8][this.moduleCount-b-1]=e:9>b?this.modules[8][15-b-1+1]=e:this.modules[8][15-b-1]=e;this.modules[this.moduleCount-8][8]=!a},mapData:function(a,c){for(var d=-1,b=this.moduleCount-1,e=7,f=0,i=this.moduleCount-1;0<i;i-=2)for(6==i&&i--;;){for(var g=0;2>g;g++)if(null==this.modules[b][i-g]){var n=!1;f<a.length&&(n=1==(a[f]>>>e&1)),j.getMask(c,b,i-g)&&(n=!n),this.modules[b][i-g]=n,-1==--e&&(f++,e=7)}if(0>(b+=d)||this.moduleCount<=b){b-=d,d=-d;break}}}},o.PAD0=236,o.PAD1=17,o.createData=function(a,c,d){c=p.getRSBlocks(a,c);for(var b=new t,e=0;e<d.length;e++){var f=d[e];b.put(f.mode,4),b.put(f.getLength(),j.getLengthInBits(f.mode,a)),f.write(b)}for(e=a=0;e<c.length;e++)a+=c[e].dataCount;if(b.getLengthInBits()>8*a)throw Error("code length overflow. ("+b.getLengthInBits()+">"+8*a+")");for(b.getLengthInBits()+4<=8*a&&b.put(0,4);0!=b.getLengthInBits()%8;)b.putBit(!1);for(;!(b.getLengthInBits()>=8*a||(b.put(o.PAD0,8),b.getLengthInBits()>=8*a));)b.put(o.PAD1,8);return o.createBytes(b,c)},o.createBytes=function(a,c){for(var d=0,b=0,e=0,f=Array(c.length),i=Array(c.length),g=0;g<c.length;g++){var n=c[g].dataCount,h=c[g].totalCount-n;b=Math.max(b,n),e=Math.max(e,h),f[g]=Array(n);for(var k=0;k<f[g].length;k++)f[g][k]=255&a.buffer[k+d];for(d+=n,k=j.getErrorCorrectPolynomial(h),n=new q(f[g],k.getLength()-1).mod(k),i[g]=Array(k.getLength()-1),k=0;k<i[g].length;k++)h=k+n.getLength()-i[g].length,i[g][k]=0<=h?n.get(h):0}for(k=g=0;k<c.length;k++)g+=c[k].totalCount;for(d=Array(g),k=n=0;k<b;k++)for(g=0;g<c.length;g++)k<f[g].length&&(d[n++]=f[g][k]);for(k=0;k<e;k++)for(g=0;g<c.length;g++)k<i[g].length&&(d[n++]=i[g][k]);return d},s=4;for(var j={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var c=a<<10;0<=j.getBCHDigit(c)-j.getBCHDigit(j.G15);)c^=j.G15<<j.getBCHDigit(c)-j.getBCHDigit(j.G15);return(a<<10|c)^j.G15_MASK},getBCHTypeNumber:function(a){for(var c=a<<12;0<=j.getBCHDigit(c)-j.getBCHDigit(j.G18);)c^=j.G18<<j.getBCHDigit(c)-j.getBCHDigit(j.G18);return a<<12|c},getBCHDigit:function(a){for(var c=0;0!=a;)c++,a>>>=1;return c},getPatternPosition:function(a){return j.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,c,d){switch(a){case 0:return 0==(c+d)%2;case 1:return 0==c%2;case 2:return 0==d%3;case 3:return 0==(c+d)%3;case 4:return 0==(Math.floor(c/2)+Math.floor(d/3))%2;case 5:return 0==c*d%2+c*d%3;case 6:return 0==(c*d%2+c*d%3)%2;case 7:return 0==(c*d%3+(c+d)%2)%2;default:throw Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var c=new q([1],0),d=0;d<a;d++)c=c.multiply(new q([1,l.gexp(d)],0));return c},getLengthInBits:function(a,c){if(1<=c&&10>c)switch(a){case 1:return 10;case 2:return 9;case s:case 8:return 8;default:throw Error("mode:"+a)}else if(27>c)switch(a){case 1:return 12;case 2:return 11;case s:return 16;case 8:return 10;default:throw Error("mode:"+a)}else{if(!(41>c))throw Error("type:"+c);switch(a){case 1:return 14;case 2:return 13;case s:return 16;case 8:return 12;default:throw Error("mode:"+a)}}},getLostPoint:function(a){for(var c=a.getModuleCount(),d=0,b=0;b<c;b++)for(var e=0;e<c;e++){for(var f=0,i=a.isDark(b,e),g=-1;1>=g;g++)if(!(0>b+g||c<=b+g))for(var h=-1;1>=h;h++)0>e+h||c<=e+h||0==g&&0==h||i==a.isDark(b+g,e+h)&&f++;5<f&&(d+=3+f-5)}for(b=0;b<c-1;b++)for(e=0;e<c-1;e++)f=0,a.isDark(b,e)&&f++,a.isDark(b+1,e)&&f++,a.isDark(b,e+1)&&f++,a.isDark(b+1,e+1)&&f++,(0==f||4==f)&&(d+=3);for(b=0;b<c;b++)for(e=0;e<c-6;e++)a.isDark(b,e)&&!a.isDark(b,e+1)&&a.isDark(b,e+2)&&a.isDark(b,e+3)&&a.isDark(b,e+4)&&!a.isDark(b,e+5)&&a.isDark(b,e+6)&&(d+=40);for(e=0;e<c;e++)for(b=0;b<c-6;b++)a.isDark(b,e)&&!a.isDark(b+1,e)&&a.isDark(b+2,e)&&a.isDark(b+3,e)&&a.isDark(b+4,e)&&!a.isDark(b+5,e)&&a.isDark(b+6,e)&&(d+=40);for(e=f=0;e<c;e++)for(b=0;b<c;b++)a.isDark(b,e)&&f++;return d+10*(a=Math.abs(100*f/c/c-50)/5)}},l={glog:function(a){if(1>a)throw Error("glog("+a+")");return l.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;256<=a;)a-=255;return l.EXP_TABLE[a]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},m=0;8>m;m++)l.EXP_TABLE[m]=1<<m;for(m=8;256>m;m++)l.EXP_TABLE[m]=l.EXP_TABLE[m-4]^l.EXP_TABLE[m-5]^l.EXP_TABLE[m-6]^l.EXP_TABLE[m-8];for(m=0;255>m;m++)l.LOG_TABLE[l.EXP_TABLE[m]]=m;return q.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var c=Array(this.getLength()+a.getLength()-1),d=0;d<this.getLength();d++)for(var b=0;b<a.getLength();b++)c[d+b]^=l.gexp(l.glog(this.get(d))+l.glog(a.get(b)));return new q(c,0)},mod:function(a){if(0>this.getLength()-a.getLength())return this;for(var c=l.glog(this.get(0))-l.glog(a.get(0)),d=Array(this.getLength()),b=0;b<this.getLength();b++)d[b]=this.get(b);for(b=0;b<a.getLength();b++)d[b]^=l.gexp(l.glog(a.get(b))+c);return new q(d,0).mod(a)}},p.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],p.getRSBlocks=function(a,c){var d=p.getRsBlockTable(a,c);if(null==d)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+c);for(var b=d.length/3,e=[],f=0;f<b;f++)for(var h=d[3*f+0],g=d[3*f+1],j=d[3*f+2],l=0;l<h;l++)e.push(new p(g,j));return e},p.getRsBlockTable=function(a,c){switch(c){case 1:return p.RS_BLOCK_TABLE[4*(a-1)+0];case 0:return p.RS_BLOCK_TABLE[4*(a-1)+1];case 3:return p.RS_BLOCK_TABLE[4*(a-1)+2];case 2:return p.RS_BLOCK_TABLE[4*(a-1)+3]}},t.prototype={get:function(a){return 1==(this.buffer[Math.floor(a/8)]>>>7-a%8&1)},put:function(a,c){for(var d=0;d<c;d++)this.putBit(1==(a>>>c-d-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var c=Math.floor(this.length/8);this.buffer.length<=c&&this.buffer.push(0),a&&(this.buffer[c]|=128>>>this.length%8),this.length++}},"string"==typeof h&&(h={text:h}),h=r.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},h),this.each((function(){var a;if("canvas"==h.render){(a=new o(h.typeNumber,h.correctLevel)).addData(h.text),a.make();var c=document.createElement("canvas");c.width=h.width,c.height=h.height;for(var d=c.getContext("2d"),b=h.width/a.getModuleCount(),e=h.height/a.getModuleCount(),f=0;f<a.getModuleCount();f++)for(var i=0;i<a.getModuleCount();i++){d.fillStyle=a.isDark(f,i)?h.foreground:h.background;var g=Math.ceil((i+1)*b)-Math.floor(i*b),j=Math.ceil((f+1)*b)-Math.floor(f*b);d.fillRect(Math.round(i*b),Math.round(f*e),g,j)}}else for((a=new o(h.typeNumber,h.correctLevel)).addData(h.text),a.make(),c=r("<table></table>").css("width",h.width+"px").css("height",h.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",h.background),d=h.width/a.getModuleCount(),b=h.height/a.getModuleCount(),e=0;e<a.getModuleCount();e++)for(f=r("<tr></tr>").css("height",b+"px").appendTo(c),i=0;i<a.getModuleCount();i++)r("<td></td>").css("width",d+"px").css("background-color",a.isDark(e,i)?h.foreground:h.background).appendTo(f);jQuery(a=c).appendTo(this)}))}},502:module=>{module.exports=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i=void 0,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var toMarkdown,converters,_document,mdConverters=require("./lib/md-converters"),gfmConverters=require("./lib/gfm-converters"),collapse=require("collapse-whitespace"),_window="undefined"!=typeof window?window:this;function trim(string){return string.replace(/^[ \r\n\t]+|[ \r\n\t]+$/g,"")}_document="undefined"==typeof document?require("jsdom").jsdom():document;var blocks=["address","article","aside","audio","blockquote","body","canvas","center","dd","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","isindex","li","main","menu","nav","noframes","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"];function isBlock(node){return-1!==blocks.indexOf(node.nodeName.toLowerCase())}var voids=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function isVoid(node){return-1!==voids.indexOf(node.nodeName.toLowerCase())}function canParseHtml(){var Parser=_window.DOMParser,canParse=!1;try{(new Parser).parseFromString("","text/html")&&(canParse=!0)}catch(e){}return canParse}function createHtmlParser(){var Parser=function(){};return Parser.prototype.parseFromString=function(string){var newDoc=_document.implementation.createHTMLDocument("");return string.toLowerCase().indexOf("<!doctype")>-1?newDoc.documentElement.innerHTML=string:newDoc.body.innerHTML=string,newDoc},Parser}var HtmlParser=canParseHtml()?_window.DOMParser:createHtmlParser();function htmlToDom(string){var tree=(new HtmlParser).parseFromString(string,"text/html");return collapse(tree,isBlock),tree}function bfsOrder(node){for(var elem,children,i,inqueue=[node],outqueue=[];inqueue.length>0;)for(elem=inqueue.shift(),outqueue.push(elem),children=elem.childNodes,i=0;i<children.length;i++)1===children[i].nodeType&&inqueue.push(children[i]);return outqueue.shift(),outqueue}function getContent(node){for(var text="",i=0;i<node.childNodes.length;i++)if(1===node.childNodes[i].nodeType)text+=node.childNodes[i]._replacement;else{if(3!==node.childNodes[i].nodeType)continue;text+=node.childNodes[i].data}return text}function outer(node,content){return node.cloneNode(!1).outerHTML.replace("><",">"+content+"<")}function canConvert(node,filter){if("string"==typeof filter)return filter===node.nodeName.toLowerCase();if(Array.isArray(filter))return-1!==filter.indexOf(node.nodeName.toLowerCase());if("function"==typeof filter)return filter.call(toMarkdown,node);throw new TypeError("`filter` needs to be a string, array, or function")}function isFlankedByWhitespace(side,node){var sibling,regExp,isFlanked;return"left"===side?(sibling=node.previousSibling,regExp=/ $/):(sibling=node.nextSibling,regExp=/^ /),sibling&&(3===sibling.nodeType?isFlanked=regExp.test(sibling.nodeValue):1!==sibling.nodeType||isBlock(sibling)||(isFlanked=regExp.test(sibling.textContent))),isFlanked}function flankingWhitespace(node){var leading="",trailing="";if(!isBlock(node)){var hasLeading=/^[ \r\n\t]/.test(node.innerHTML),hasTrailing=/[ \r\n\t]$/.test(node.innerHTML);hasLeading&&!isFlankedByWhitespace("left",node)&&(leading=" "),hasTrailing&&!isFlankedByWhitespace("right",node)&&(trailing=" ")}return{leading,trailing}}function process(node){for(var replacement,content=getContent(node),i=0;i<converters.length;i++){var converter=converters[i];if(canConvert(node,converter.filter)){if("function"!=typeof converter.replacement)throw new TypeError("`replacement` needs to be a function that returns a string");var whitespace=flankingWhitespace(node);(whitespace.leading||whitespace.trailing)&&(content=trim(content)),replacement=whitespace.leading+converter.replacement.call(toMarkdown,content,node)+whitespace.trailing;break}}isVoid(node)||/A/.test(node.nodeName)||!/^\s*$/i.test(content)||(replacement=""),node._replacement=replacement}(toMarkdown=function(input,options){if(options=options||{},"string"!=typeof input)throw new TypeError(input+" is not a string");var clone=htmlToDom(input=input.replace(/(\d+)\. /g,"$1\\. ")).body,nodes=bfsOrder(clone);converters=mdConverters.slice(0),options.gfm&&(converters=gfmConverters.concat(converters)),options.converters&&(converters=options.converters.concat(converters));for(var i=nodes.length-1;i>=0;i--)process(nodes[i]);return getContent(clone).replace(/^[\t\r\n]+|[\t\r\n\s]+$/g,"").replace(/\n\s+\n/g,"\n\n").replace(/\n{3,}/g,"\n\n")}).isBlock=isBlock,toMarkdown.isVoid=isVoid,toMarkdown.trim=trim,toMarkdown.outer=outer,module.exports=toMarkdown},{"./lib/gfm-converters":2,"./lib/md-converters":3,"collapse-whitespace":5,jsdom:6}],2:[function(require,module,exports){"use strict";function cell(content,node){var prefix=" ";return 0===Array.prototype.indexOf.call(node.parentNode.childNodes,node)&&(prefix="| "),prefix+content+" |"}var highlightRegEx=/highlight highlight-(\S+)/;module.exports=[{filter:"br",replacement:function(){return"\n"}},{filter:["del","s","strike"],replacement:function(content){return"~~"+content+"~~"}},{filter:function(node){return"checkbox"===node.type&&"LI"===node.parentNode.nodeName},replacement:function(content,node){return(node.checked?"[x]":"[ ]")+" "}},{filter:["th","td"],replacement:function(content,node){return cell(content,node)}},{filter:"tr",replacement:function(content,node){var borderCells="",alignMap={left:":--",right:"--:",center:":-:"};if("THEAD"===node.parentNode.nodeName)for(var i=0;i<node.childNodes.length;i++){var align=node.childNodes[i].attributes.align,border="---";align&&(border=alignMap[align.value]||border),borderCells+=cell(border,node.childNodes[i])}return"\n"+content+(borderCells?"\n"+borderCells:"")}},{filter:"table",replacement:function(content){return"\n\n"+content+"\n\n"}},{filter:["thead","tbody","tfoot"],replacement:function(content){return content}},{filter:function(node){return"PRE"===node.nodeName&&node.firstChild&&"CODE"===node.firstChild.nodeName},replacement:function(content,node){return"\n\n```\n"+node.firstChild.textContent+"\n```\n\n"}},{filter:function(node){return"PRE"===node.nodeName&&"DIV"===node.parentNode.nodeName&&highlightRegEx.test(node.parentNode.className)},replacement:function(content,node){return"\n\n```"+node.parentNode.className.match(highlightRegEx)[1]+"\n"+node.textContent+"\n```\n\n"}},{filter:function(node){return"DIV"===node.nodeName&&highlightRegEx.test(node.className)},replacement:function(content){return"\n\n"+content+"\n\n"}}]},{}],3:[function(require,module,exports){"use strict";module.exports=[{filter:"p",replacement:function(content){return"\n\n"+content+"\n\n"}},{filter:"br",replacement:function(){return"  \n"}},{filter:["h1","h2","h3","h4","h5","h6"],replacement:function(content,node){for(var hLevel=node.nodeName.charAt(1),hPrefix="",i=0;i<hLevel;i++)hPrefix+="#";return"\n\n"+hPrefix+" "+content+"\n\n"}},{filter:"hr",replacement:function(){return"\n\n* * *\n\n"}},{filter:["em","i"],replacement:function(content){return"_"+content+"_"}},{filter:["strong","b"],replacement:function(content){return"**"+content+"**"}},{filter:function(node){var hasSiblings=node.previousSibling||node.nextSibling,isCodeBlock="PRE"===node.parentNode.nodeName&&!hasSiblings;return"CODE"===node.nodeName&&!isCodeBlock},replacement:function(content){return"`"+content+"`"}},{filter:function(node){return"A"===node.nodeName&&node.getAttribute("href")},replacement:function(content,node){var titlePart=node.title?' "'+node.title+'"':"";return"["+content+"]("+node.getAttribute("href")+titlePart+")"}},{filter:"img",replacement:function(content,node){var alt=node.alt||"",src=node.getAttribute("src")||"",title=node.title||"";return src?"!["+alt+"]("+src+(title?' "'+title+'"':"")+")":""}},{filter:function(node){return"PRE"===node.nodeName&&"CODE"===node.firstChild.nodeName},replacement:function(content,node){return"\n\n    "+node.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},{filter:"blockquote",replacement:function(content){return"\n\n"+(content=(content=(content=this.trim(content)).replace(/\n{3,}/g,"\n\n")).replace(/^/gm,"> "))+"\n\n"}},{filter:"li",replacement:function(content,node){content=content.replace(/^\s+/,"").replace(/\n/gm,"\n    ");var parent=node.parentNode,index=Array.prototype.indexOf.call(parent.children,node)+1;return(/ol/i.test(parent.nodeName)?index+".  ":"*   ")+content}},{filter:["ul","ol"],replacement:function(content,node){for(var strings=[],i=0;i<node.childNodes.length;i++)strings.push(node.childNodes[i]._replacement);return/li/i.test(node.parentNode.nodeName)?"\n"+strings.join("\n"):"\n\n"+strings.join("\n")+"\n\n"}},{filter:function(node){return this.isBlock(node)},replacement:function(content,node){return"\n\n"+this.outer(node,content)+"\n\n"}},{filter:function(){return!0},replacement:function(content,node){return this.outer(node,content)}}]},{}],4:[function(require,module,exports){module.exports=["address","article","aside","audio","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","noscript","ol","output","p","pre","section","table","tfoot","ul","video"]},{}],5:[function(require,module,exports){"use strict";var blocks=require("block-elements").map((function(name){return name.toUpperCase()}));function defaultBlockTest(node){return isElem(node)&&blocks.indexOf(node.nodeName)>=0}function isText(node){return node&&3===node.nodeType}function isElem(node){return node&&1===node.nodeType}function whitespace(root,isBlock){var nextNode,prevNode,prevText,node,text,startSpace=/^ /,endSpace=/ $/;function next(node){for(;node&&node!==root;){if(node.nextSibling)return node.nextSibling;node=node.parentNode,prevText&&isBlock(node)&&(prevText.data=prevText.data.replace(/[ \r\n\t]$/,""),prevText=null)}return null}function first(node){return node.firstChild?node.firstChild:next(node)}function remove(node){var nextNode=next(node);return node.parentNode.removeChild(node),nextNode}if("function"!=typeof isBlock&&(isBlock=defaultBlockTest),"PRE"!==root.nodeName){for(root.normalize(),node=first(root);node;)if(prevNode=node.previousSibling,nextNode=node.nextSibling,isText(node))text=node.data.replace(/[ \r\n\t]+/g," "),(!prevText||prevNode&&isBlock(prevNode))&&(text=text.replace(startSpace,"")),nextNode&&isBlock(nextNode)&&(text=text.replace(endSpace,"")),prevText&&endSpace.test(prevText.data)&&startSpace.test(text)&&(text=text.substr(1)),text?(node.data=text,prevText=node,node=next(node)):node=remove(node);else if(isElem(node)){if("PRE"===node.nodeName){node=next(node);continue}prevText&&isBlock(node)&&(prevText.data=prevText.data.replace(endSpace,""),prevText=null),node=first(node)}else node=remove(node);prevText&&(prevText.data=prevText.data.replace(endSpace,""))}}module.exports=whitespace},{"block-elements":4}],6:[function(require,module,exports){},{}]},{},[1])(1)},7:module=>{const exported={UI_ONLINE_STATUS_UPDATE:"$trudesk:global:ui:online_status:update",UI_ONLINE_STATUS_SET:"$trudesk:global:ui:online_status:set",USERS_UPDATE:"$trudesk:users:update",ROLES_FLUSH:"$trudesk:roles:flush",TICKETS_CREATED:"$trudesk:tickets:created",TICKETS_UPDATE:"$trudesk:tickets:update",TICKETS_UI_STATUS_UPDATE:"$trudesk:tickets:ui:status:update",TICKETS_STATUS_SET:"$trudesk:tickets:status:set",TICKETS_UI_GROUP_UPDATE:"$trudesk:tickets:ui:group:update",TICKETS_GROUP_SET:"$trudesk:tickets:group:set",TICKETS_UI_TYPE_UPDATE:"$trudesk:tickets:ui:type:update",TICKETS_TYPE_SET:"$trudesk:tickets:type:set",TICKETS_UI_PRIORITY_UPDATE:"$trudesk:tickets:ui:priority:update",TICKETS_PRIORITY_SET:"$trudesk:tickets:priority:set",TICKETS_UI_DUEDATE_UPDATE:"$trudesk:tickets:ui:duedate:update",TICKETS_DUEDATE_SET:"$trudesk:tickets:duedate:set",TICKETS_UI_TAGS_UPDATE:"$trudesk:tickets:ui:tags:update",TICKETS_TAGS_SET:"$trudesk:tickets:tags:set",TICKETS_ASSIGNEE_LOAD:"$trudesk:tickets:assignee:load",TICKETS_ASSIGNEE_SET:"$trudesk:tickets:assignee:set",TICKETS_ASSIGNEE_CLEAR:"$trudesk:tickets:assignee:clear",TICKETS_ASSIGNEE_UPDATE:"$trudesk:tickets:assignee: update",TICKETS_ISSUE_SET:"$trudesk:tickets:issue:set",TICKETS_COMMENT_NOTE_REMOVE:"$trudesk:tickets:comment_note:remove",TICKETS_COMMENT_NOTE_SET:"$trudesk:tickets:comment_note:set",TICKETS_UI_ATTACHMENTS_UPDATE:"$trudesk:tickets:ui:attachments:update",ACCOUNTS_UI_PROFILE_IMAGE_UPDATE:"$trudesk:accounts:ui:profile_image:update",NOTIFICATIONS_UPDATE:"$trudesk:notifications:update",NOTIFICATIONS_MARK_READ:"$trudesk:notifications:mark_read",NOTIFICATIONS_CLEAR:"$trudesk:notifications:clear",MESSAGES_SEND:"$trudesk:messages:send",MESSAGES_UI_RECEIVE:"$trudesk:messages:ui:receive",MESSAGES_USER_TYPING:"$trudesk:messages:user_typing",MESSAGES_UI_USER_TYPING:"$trudesk:messages:ui:user_typing",MESSAGES_SPAWN_CHAT_WINDOW:"$trudesk:messages:spawn_chat_window",MESSAGES_UI_SPAWN_CHAT_WINDOW:"$trudesk:messages:ui:spawn_chat_window",MESSAGES_SAVE_CHAT_WINDOW:"$trudesk:messages:save_chat_window",MESSAGES_SAVE_CHAT_WINDOW_COMPLETE:"$trudesk:messages:save_chat_window_complete",MESSAGES_UPDATE_UI_CONVERSATION_NOTIFICATIONS:"$trudesk:messages:ui:conversation_notifications:update",NOTICE_SHOW:"$trudesk:notice:show",NOTICE_UI_SHOW:"$trudesk:notice:ui:show",NOTICE_CLEAR:"$trudesk:notice:clear",NOTICE_UI_CLEAR:"$trudesk:notice:ui:clear",BACKUP_RESTORE_SHOW_OVERLAY:"$trudesk:backup_restore:show_overlay",BACKUP_RESTORE_UI_SHOW_OVERLAY:"$trudesk:backup_restore:ui:show_overlay",BACKUP_RESTORE_COMPLETE:"$trudesk:backup_restore:complete",BACKUP_RESTORE_UI_COMPLETE:"$trudesk:backup_restore:ui:complete"};module.exports=exported},776:()=>{},528:()=>{},766:()=>{},248:()=>{},247:()=>{},529:()=>{}}]);