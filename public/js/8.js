(self.webpackChunktrudesk=self.webpackChunktrudesk||[]).push([[8],{336:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);var react=__webpack_require__(1),react_dom=__webpack_require__(26),redux=__webpack_require__(777),es=__webpack_require__(3),redux_saga_core_npm_proxy_esm=__webpack_require__(709),redux_saga_thunk=__webpack_require__(710),handleActions=__webpack_require__(779),immutable_es=__webpack_require__(778),lib=__webpack_require__(714);const PENDING="PENDING",ERROR="ERROR",SUCCESS="SUCCESS",SHOW_MODAL=(0,lib.b)("SHOW_MODAL"),HIDE_MODAL=(0,lib.b)("HIDE_MODAL"),CLEAR_MODAL=(0,lib.b)("CLEAR_MODAL"),SHOW_NOTICE=(0,lib.b)("SHOW_NOTICE",[SUCCESS]),CLEAR_NOTICE=(0,lib.b)("CLEAR_NOTICE"),SET_SESSION_USER=(0,lib.b)("SET_SESSION_USER"),FETCH_ROLES=(0,lib.b)("FETCH_ROLES",[SUCCESS,ERROR]),UPDATE_ROLE_ORDER=(0,lib.b)("UPDATE_ROLE_ORDER",[SUCCESS,ERROR]),NAV_CHANGE=(0,lib.b)("NAV_CHANGE"),FETCH_TICKETS=(0,lib.b)("FETCH_TICKETS",[SUCCESS,PENDING,ERROR]),CREATE_TICKET=(0,lib.b)("CREATE_TICKET",[PENDING,SUCCESS,ERROR]),DELETE_TICKET=(0,lib.b)("DELETE_TICKET",[SUCCESS,PENDING,ERROR]),UNLOAD_TICKETS=(0,lib.b)("UNLOAD_TICKETS",[SUCCESS]),TICKET_UPDATED=(0,lib.b)("TICKET_UPDATED",[SUCCESS]),TICKET_EVENT=(0,lib.b)("TICKET_EVENT",[SUCCESS]),CREATE_TICKET_TYPE=(0,lib.b)("CREATE_TICKET_TYPE",[SUCCESS,ERROR]),RENAME_TICKET_TYPE=(0,lib.b)("RENAME_TICKET_TYPE",[SUCCESS,ERROR]),DELETE_TICKET_TYPE=(0,lib.b)("DELETE_TICKET_TYPE",[SUCCESS,ERROR]),CREATE_PRIORITY=(0,lib.b)("CREATE_PRIORITY",[SUCCESS,ERROR]),UPDATE_PRIORITY=(0,lib.b)("UPDATE_PRIORITY",[SUCCESS,ERROR]),DELETE_PRIORITY=(0,lib.b)("DELETE_PRIORITY",[SUCCESS,ERROR]),GET_TAGS_WITH_PAGE=(0,lib.b)("GET_TAGS_WITH_PAGE",[SUCCESS,ERROR]),TAGS_UPDATE_CURRENT_PAGE=(0,lib.b)("TAGS_UPDATE_CURRENT_PAGE",[SUCCESS,ERROR]),CREATE_TAG=(0,lib.b)("CREATE_TAG",[SUCCESS,ERROR]),TRANSFER_TO_THIRDPARTY=(0,lib.b)("TRANSFER_TO_THIRDPARTY",[SUCCESS,ERROR]),FETCH_ACCOUNTS=(0,lib.b)("FETCH_ACCOUNTS",[PENDING,SUCCESS,ERROR]),FETCH_ACCOUNTS_CREATE_TICKET=(0,lib.b)("FETCH_ACCOUNTS_CREATE_TICKET",[PENDING,SUCCESS,ERROR]),CREATE_ACCOUNT=(0,lib.b)("CREATE_ACCOUNT",[PENDING,SUCCESS,ERROR]),SAVE_EDIT_ACCOUNT=(0,lib.b)("SAVE_EDIT_ACCOUNT",[PENDING,SUCCESS,ERROR]),DELETE_ACCOUNT=(0,lib.b)("DELETE_ACCOUNT",[PENDING,SUCCESS,ERROR]),ENABLE_ACCOUNT=(0,lib.b)("ENABLE_ACCOUNT",[SUCCESS,ERROR]),UNLOAD_ACCOUNTS=(0,lib.b)("UNLOAD_ACCOUNTS",[SUCCESS]),FETCH_GROUPS=(0,lib.b)("FETCH_GROUPS",[PENDING,SUCCESS,ERROR]),CREATE_GROUP=(0,lib.b)("CREATE_GROUP",[SUCCESS,PENDING,ERROR]),UPDATE_GROUP=(0,lib.b)("UPDATE_GROUP",[SUCCESS,PENDING,ERROR]),DELETE_GROUP=(0,lib.b)("DELETE_GROUP",[SUCCESS,PENDING,ERROR]),UNLOAD_GROUPS=(0,lib.b)("UNLOAD_GROUPS",[SUCCESS]),FETCH_TEAMS=(0,lib.b)("FETCH_TEAMS",[PENDING,SUCCESS,ERROR]),CREATE_TEAM=(0,lib.b)("CREATE_TEAM",[PENDING,SUCCESS,ERROR]),SAVE_EDIT_TEAM=(0,lib.b)("SAVE_EDIT_TEAM",[PENDING,SUCCESS,ERROR]),DELETE_TEAM=(0,lib.b)("DELETE_TEAM",[PENDING,SUCCESS,ERROR]),UNLOAD_TEAMS=(0,lib.b)("UNLOAD_TEAMS",[SUCCESS]),FETCH_DEPARTMENTS=(0,lib.b)("FETCH_DEPARTMENTS",[PENDING,SUCCESS,ERROR]),CREATE_DEPARTMENT=(0,lib.b)("CREATE_DEPARTMENT",[PENDING,SUCCESS,ERROR]),UPDATE_DEPARTMENT=(0,lib.b)("UPDATE_DEPARTMENT",[SUCCESS,PENDING,ERROR]),DELETE_DEPARTMENT=(0,lib.b)("DELETE_DEPARTMENT",[SUCCESS,PENDING,ERROR]),UNLOAD_DEPARTMENTS=(0,lib.b)("UNLOAD_DEPARTMENTS",[SUCCESS]),FETCH_NOTICES=(0,lib.b)("FETCH_NOTICES",[PENDING,SUCCESS,ERROR]),CREATE_NOTICE=(0,lib.b)("CREATE_NOTICE",[SUCCESS,PENDING,ERROR]),UPDATE_NOTICE=(0,lib.b)("UPDATE_NOTICE",[SUCCESS,PENDING,ERROR]),DELETE_NOTICE=(0,lib.b)("DELETE_NOTICE",[PENDING,SUCCESS,ERROR]),UNLOAD_NOTICES=(0,lib.b)("UNLOAD_NOTICES",[SUCCESS]),FETCH_SEARCH_RESULTS=(0,lib.b)("FETCH_SEARCH_RESULTS",[SUCCESS,PENDING,ERROR]),UNLOAD_SEARCH_RESULTS=(0,lib.b)("UNLOAD_SEARCH_RESULTS",[SUCCESS]),FETCH_SETTINGS=(0,lib.b)("FETCH_SETTINGS",[SUCCESS,ERROR]),UPDATE_SETTING=(0,lib.b)("UPDATE_SETTING",[SUCCESS,ERROR]),UPDATE_MULTIPLE_SETTINGS=(0,lib.b)("UPDATE_MULTIPLE_SETTINGS",[SUCCESS,ERROR]),UPDATE_COLORSCHEME=(0,lib.b)("UPDATE_COLORSCHEME",[SUCCESS,ERROR]),FETCH_MONGODB_TOOLS=(0,lib.b)("FETCH_MONGODB_TOOLS",[SUCCESS,ERROR]),FETCH_BACKUPS=(0,lib.b)("FETCH_BACKUPS",[SUCCESS,ERROR]),BACKUP_NOW=(0,lib.b)("BACKUP_NOW",[PENDING,SUCCESS,ERROR]),FETCH_DELETED_TICKETS=(0,lib.b)("FETCH_DELETED_TICKETS",[PENDING,SUCCESS,ERROR]),RESTORE_DELETED_TICKET=(0,lib.b)("RESTORE_DELETED_TICKET",[SUCCESS,ERROR]),PERM_DELETE_TICKET=(0,lib.b)("PERM_DELETE_TICKET",[SUCCESS,ERROR]),CHANGE_DELETED_TICKETS_PAGE=(0,lib.b)("CHANGE_DELETED_TICKETS_PAGE"),UPDATE_PERMISSIONS=(0,lib.b)("UPDATE_PERMISSIONS",[PENDING,SUCCESS,ERROR]),CREATE_ROLE=(0,lib.b)("CREATE_ROLE",[SUCCESS,ERROR]),DELETE_ROLE=(0,lib.b)("DELETE_ROLE",[SUCCESS,ERROR]),initialState={sessionUser:null,roles:(0,immutable_es.aV)([]),roleOrder:(0,immutable_es.D5)({}),notice:null},shared=(0,handleActions.Z)({[SET_SESSION_USER]:(state,action)=>({...state,sessionUser:action.payload.sessionUser}),[SHOW_NOTICE]:(state,action)=>({...state,notice:(0,immutable_es.d0)(action.payload)}),[CLEAR_NOTICE]:state=>({...state,notice:null}),[FETCH_ROLES.SUCCESS]:(state,action)=>({...state,roles:(0,immutable_es.d0)(action.response.roles),roleOrder:(0,immutable_es.d0)(action.response.roleOrder)}),[UPDATE_ROLE_ORDER.SUCCESS]:(state,action)=>({...state,roleOrder:(0,immutable_es.d0)(action.response.roleOrder)})},initialState),common_initialState={},common=function(state=common_initialState,action){return action.type,state};var uikit_combined_min=__webpack_require__(5),uikit_combined_min_default=__webpack_require__.n(uikit_combined_min);const modalReducer_initialState={modalType:null,modalProps:{}},modalReducer=(0,handleActions.Z)({[SHOW_MODAL]:(state,action)=>({modalType:action.payload.modalType,modalProps:action.payload.modalProps}),[HIDE_MODAL]:(state,action)=>{const modal=document.getElementById("uk-modal");if(modal){const modalTag=modal.getAttribute("data-modal-tag");modalTag===action.payload?uikit_combined_min_default().modal(modal).hide():modalTag||uikit_combined_min_default().modal(modal).hide()}return state},[CLEAR_MODAL]:()=>({...modalReducer_initialState})},modalReducer_initialState),reducers_sidebarReducer=(0,handleActions.Z)({[NAV_CHANGE]:(state,action)=>({activeItem:action.payload.activeItem,activeSubItem:action.payload.activeSubItem,plugins:null})},{activeItem:"",activeSubItem:"",plugins:null});var lodash=__webpack_require__(6),helpers=__webpack_require__(2),helpers_default=__webpack_require__.n(helpers);const settings_initialState={loaded:!1,settings:(0,immutable_es.D5)({}),hasMongoDBTools:!1,backingup:!1,backups:(0,immutable_es.aV)([]),deletedTicketsCount:0,allDeletedTickets:(0,immutable_es.aV)([]),deletedTickets:(0,immutable_es.aV)([])},settings=(0,handleActions.Z)({[FETCH_SETTINGS.SUCCESS]:(state,action)=>({...state,settings:(0,immutable_es.d0)(action.response.settings.data),loaded:!0}),[UPDATE_SETTING.SUCCESS]:(state,action)=>{const updatedSetting=(0,lodash.find)(action.response.updatedSettings,{name:action.payload.name});return{...state,loaded:state.loaded,settings:state.settings.setIn(["settings",action.payload.stateName],updatedSetting)}},[UPDATE_SETTING.ERROR]:(state,action)=>(helpers_default().UI.showSnackbar("Error: "+action.error,!0),{...state,loaded:state.loaded,settings:state.settings}),[UPDATE_MULTIPLE_SETTINGS.SUCCESS]:state=>({...state,loaded:state.loaded,settings:state.settings}),[FETCH_MONGODB_TOOLS.SUCCESS]:(state,action)=>({...state,hasMongoDBTools:action.response.success}),[FETCH_BACKUPS.SUCCESS]:(state,action)=>({...state,backups:(0,immutable_es.d0)(action.response.files)}),[BACKUP_NOW.PENDING]:state=>({...state,backingup:!0}),[BACKUP_NOW.SUCCESS]:state=>({...state,backingup:!1}),[BACKUP_NOW.ERROR]:state=>({...state,backingup:!1}),[FETCH_DELETED_TICKETS.SUCCESS]:(state,action)=>({...state,deletedTicketsCount:action.response.deletedTickets.length,allDeletedTickets:(0,immutable_es.d0)(action.response.deletedTickets),deletedTickets:(0,immutable_es.d0)(action.response.deletedTickets.slice(0,15))}),[RESTORE_DELETED_TICKET.SUCCESS]:(state,action)=>{const deletedIdx=state.deletedTickets.findIndex((i=>i.get("_id")===action.payload._id)),allDeletedIdx=state.allDeletedTickets.findIndex((i=>i.get("_id")===action.payload._id));return{...state,allDeletedTickets:state.allDeletedTickets.splice(allDeletedIdx,1),deletedTickets:state.deletedTickets.splice(deletedIdx,1)}},[CHANGE_DELETED_TICKETS_PAGE]:(state,action)=>{const pageIndex=action.payload.pageIndex;return{...state,deletedTickets:state.allDeletedTickets.slice(15*pageIndex,15*(pageIndex+1))}},[PERM_DELETE_TICKET.SUCCESS]:(state,action)=>{const deletedIdx=state.deletedTickets.findIndex((i=>i.get("_id")===action.payload._id)),allDeletedIdx=state.allDeletedTickets.findIndex((i=>i.get("_id")===action.payload._id));return{...state,allDeletedTickets:state.allDeletedTickets.splice(allDeletedIdx,1),deletedTickets:state.deletedTickets.splice(deletedIdx,1)}}},settings_initialState);var isUndefined=__webpack_require__(186),isUndefined_default=__webpack_require__.n(isUndefined);const ticketsReducer_initialState={tickets:(0,immutable_es.aV)([]),totalCount:"",viewType:"active",loading:!1,nextPage:1,prevPage:0};const ticketsReducer=(0,handleActions.Z)({[FETCH_TICKETS.PENDING]:(state,action)=>({...state,viewType:action.payload.type,loading:!0}),[FETCH_TICKETS.SUCCESS]:(state,action)=>({...state,tickets:(0,immutable_es.d0)(action.response.tickets||[]),prevPage:(0,immutable_es.d0)(action.response.prevPage),nextPage:(0,immutable_es.d0)(action.response.nextPage),totalCount:action.response.totalCount?(0,immutable_es.d0)(action.response.totalCount.toString()):action.response.tickets.length.toString(),loading:!1}),[FETCH_TICKETS.ERROR]:state=>({...state,loading:!1}),[CREATE_TICKET.SUCCESS]:state=>({...state}),[DELETE_TICKET.SUCCESS]:(state,action)=>{const idx=state.tickets.findIndex((ticket=>ticket.get("_id").toString()===action.payload.id.toString()));return-1===idx?{...state}:{...state,tickets:state.tickets.delete(idx)}},[TICKET_EVENT.SUCCESS]:(state,action)=>{switch(action.payload.type){case"created":{const ticket=action.payload.data;return{...state,tickets:state.tickets.insert(0,(0,immutable_es.d0)(ticket))}}case"deleted":{const id=action.payload.data,idx=state.tickets.findIndex((ticket=>ticket.get("_id").toString()===id.toString()));return-1===idx?{...state}:{...state,tickets:state.tickets.delete(idx)}}default:return{...state}}},[TICKET_UPDATED.SUCCESS]:(state,action)=>{const ticket=action.payload.ticket,userGroupIds=action.sessionUser.groups,idx=state.tickets.findIndex((t=>t.get("_id")===ticket._id)),inView=function(view,status,assignee,userId,userGroupIds,groupId){let hasView=!1,hasGroup=!1;switch(view){case"filter":hasView=!0;break;case"all":hasView=-1!==[0,1,2,3].indexOf(status);break;case"active":hasView=-1!==[0,1,2].indexOf(status);break;case"assigned":hasView=assignee===userId;break;case"unassigned":hasView=isUndefined_default()(assignee);break;case"new":hasView=0===status;break;case"open":hasView=1===status;break;case"pending":hasView=2===status;break;case"closed":hasView=3===status;break;default:hasView=!1}return hasGroup=!isUndefined_default()(userGroupIds)&&!isUndefined_default()(groupId)&&-1!==userGroupIds.indexOf(groupId),hasGroup&&hasView}(state.viewType,ticket.status,ticket.assignee?ticket.assignee._id:void 0,action.sessionUser._id,userGroupIds,ticket.group._id);if(!inView&&-1!==idx)return{...state,tickets:state.tickets.delete(idx)};if(!inView)return{...state};if(-1===idx){const withTicket=state.tickets.push((0,immutable_es.d0)(ticket));return{...state,tickets:withTicket.sortBy((t=>-t.get("uid")))}}return{...state,tickets:state.tickets.set(idx,(0,immutable_es.d0)(ticket))}},[UNLOAD_TICKETS.SUCCESS]:state=>({...state,tickets:state.tickets.clear(),loading:!1})},ticketsReducer_initialState),tagsReducer_initialState={loading:!0,totalCount:0,tags:(0,immutable_es.aV)([]),currentPage:0},reducers_tagsReducer=(0,handleActions.Z)({[GET_TAGS_WITH_PAGE.SUCCESS]:(state,action)=>({...state,loading:!1,totalCount:action.response.count,tags:(0,immutable_es.d0)(action.response.tags)}),[GET_TAGS_WITH_PAGE.ERROR]:(state,action)=>({...state,loading:!1}),[TAGS_UPDATE_CURRENT_PAGE]:(state,action)=>({...state,currentPage:action.payload.currentPage})},tagsReducer_initialState),accountsReducer_initialState={accounts:(0,immutable_es.aV)([]),type:"customers",loading:!1,accountsCreateTicket:(0,immutable_es.aV)([]),createTicketLoading:!1},accountsReducer=(0,handleActions.Z)({[FETCH_ACCOUNTS.PENDING]:state=>({...state,loading:!0}),[FETCH_ACCOUNTS.SUCCESS]:(state,action)=>{let arr=state.accounts.toArray();return action.payload.response.accounts.map((i=>{arr.push(i)})),{...state,accounts:(0,immutable_es.d0)(arr),type:action.payload.payload&&action.payload.payload.type?action.payload.payload.type:"customers",loading:!1}},[FETCH_ACCOUNTS_CREATE_TICKET.PENDING]:state=>({...state,createTicketLoading:!0}),[FETCH_ACCOUNTS_CREATE_TICKET.SUCCESS]:(state,action)=>{let arr=state.accountsCreateTicket.toArray();return action.payload.response.accounts.map((i=>{arr.push(i)})),{...state,accountsCreateTicket:(0,immutable_es.d0)(arr),createTicketLoading:!1}},[CREATE_ACCOUNT.SUCCESS]:(state,action)=>{const resAccount=action.response.account;if(!resAccount.role.isAgent&&!resAccount.role.isAdmin&&"customers"!==state.type)return{...state};if(resAccount.role.isAgent||resAccount.role.isAdmin&&"customers"===state.type)return{...state};if(resAccount.role.isAdmin&&!resAccount.role.isAgent&&"agents"===state.type)return{...state};if(resAccount.role.isAgent&&!resAccount.role.isAdmin&&"admins"===state.type)return{...state};const insertedAccount=state.accounts.push((0,immutable_es.d0)(resAccount));return{...state,accounts:insertedAccount.sortBy((account=>account.get("fullname")))}},[SAVE_EDIT_ACCOUNT.SUCCESS]:(state,action)=>{const resUser=action.response.user,accountIndex=state.accounts.findIndex((u=>u.get("_id")===resUser._id)),customer=!resUser.role.isAdmin&&!resUser.role.isAgent;let accounts=null;return"agents"!==state.type&&"admins"!==state.type||customer?("agents"!==state.type&&"admins"!==state.type||!customer)&&("customers"!==state.type||customer)?"customers"===state.type&&customer&&(accounts=state.accounts.set(accountIndex,(0,immutable_es.d0)(resUser))):accounts=state.accounts.remove(accountIndex):accounts=state.accounts.set(accountIndex,(0,immutable_es.d0)(resUser)),{...state,accounts}},[DELETE_ACCOUNT.PENDING]:(state,action)=>{const accountIndex=state.accounts.findIndex((u=>u.get("username")===action.payload.username));return{...state,accounts:state.accounts.setIn([accountIndex,"loading"],!0)}},[DELETE_ACCOUNT.SUCCESS]:(state,action)=>{const isDisabled=action.response.disabled,accountIndex=state.accounts.findIndex((u=>u.get("username")===action.payload.username));let withDisabled;return withDisabled=state.accounts.setIn([accountIndex,"deleted"],isDisabled),withDisabled=withDisabled.setIn([accountIndex,"loading"],!1),isDisabled||(withDisabled=state.accounts.delete(accountIndex)),{...state,accounts:withDisabled}},[ENABLE_ACCOUNT.SUCCESS]:(state,action)=>{const accountIndex=state.accounts.findIndex((u=>u.get("username")===action.payload.username));return{...state,accounts:state.accounts.setIn([accountIndex,"deleted"],!1)}},[UNLOAD_ACCOUNTS.SUCCESS]:state=>({...state,accounts:state.accounts.clear()})},accountsReducer_initialState),groupsReducer_initialState={groups:(0,immutable_es.aV)([])},groupsReducer=(0,handleActions.Z)({[FETCH_GROUPS.SUCCESS]:(state,action)=>({...state,groups:(0,immutable_es.d0)(action.response.groups).sortBy((group=>group.get("name")))}),[CREATE_GROUP.SUCCESS]:(state,action)=>{const resGroup=action.response.group,withInsertedGroup=state.groups.push((0,immutable_es.d0)(resGroup));return{...state,groups:withInsertedGroup.sortBy((team=>team.get("name")))}},[UPDATE_GROUP.SUCCESS]:(state,action)=>{const resGroup=action.response.group,groupIndex=state.groups.findIndex((g=>g.get("_id")===resGroup._id));return{...state,groups:state.groups.set(groupIndex,(0,immutable_es.d0)(resGroup))}},[DELETE_GROUP.SUCCESS]:(state,action)=>{const idx=state.groups.findIndex((g=>g.get("_id")===action.payload._id));return{...state,groups:state.groups.delete(idx)}},[UNLOAD_GROUPS.SUCCESS]:state=>({...state,groups:state.groups.clear()})},groupsReducer_initialState),teamsReducer_initialState={teams:(0,immutable_es.aV)([])},teamsReducer=(0,handleActions.Z)({[FETCH_TEAMS.SUCCESS]:(state,action)=>({...state,teams:(0,immutable_es.d0)(action.payload.response.teams)}),[CREATE_TEAM.SUCCESS]:(state,action)=>{const resTeam=action.response.team,withInsertedTeam=state.teams.push((0,immutable_es.d0)(resTeam));return{...state,teams:withInsertedTeam.sortBy((team=>team.get("name")))}},[SAVE_EDIT_TEAM.SUCCESS]:(state,action)=>{const resTeam=action.response.team,teamIndex=state.teams.findIndex((t=>t.get("_id")===resTeam._id));return{...state,teams:state.teams.set(teamIndex,(0,immutable_es.d0)(resTeam))}},[DELETE_TEAM.SUCCESS]:(state,action)=>{const idx=state.teams.findIndex((t=>t.get("_id")===action.payload._id));return{...state,teams:state.teams.delete(idx)}},[UNLOAD_TEAMS.SUCCESS]:state=>({...state,teams:state.teams.clear()})},teamsReducer_initialState),departmentsReducer_initialState={departments:(0,immutable_es.aV)([])},departmentsReducer=(0,handleActions.Z)({[FETCH_DEPARTMENTS.SUCCESS]:(state,action)=>({...state,departments:(0,immutable_es.d0)(action.response.departments).sortBy((d=>d.get("normalized")))}),[CREATE_DEPARTMENT.SUCCESS]:(state,action)=>{const department=(0,immutable_es.d0)(action.response.department),withDepartment=state.departments.push(department);return{...state,departments:withDepartment.sortBy((department=>department.get("normalized")))}},[UPDATE_DEPARTMENT.SUCCESS]:(state,action)=>{const department=action.response.department,idx=state.departments.findIndex((d=>d.get("_id")===department._id));return{...state,departments:state.departments.set(idx,(0,immutable_es.d0)(department))}},[DELETE_DEPARTMENT.SUCCESS]:(state,action)=>{const idx=state.departments.findIndex((d=>d.get("_id")===action.payload._id));return{...state,departments:state.departments.delete(idx)}},[UNLOAD_DEPARTMENTS.SUCCESS]:state=>({...state,departments:state.departments.clear()})},departmentsReducer_initialState),noticesReducer_initialState={notices:(0,immutable_es.aV)([]),loading:!1},noticesReducer=(0,handleActions.Z)({[FETCH_NOTICES.PENDING]:(state,action)=>({...state,loading:!0}),[FETCH_NOTICES.SUCCESS]:(state,action)=>({...state,notices:(0,immutable_es.d0)(action.response.notices||[]),loading:!1}),[UPDATE_NOTICE.SUCCESS]:(state,action)=>{const notice=action.response.notice,idx=state.notices.findIndex((n=>n.get("_id")===notice._id));return{...state,notices:state.notices.set(idx,(0,immutable_es.d0)(notice))}},[DELETE_NOTICE.SUCCESS]:(state,action)=>{const idx=state.notices.findIndex((n=>n.get("_id")===action.payload._id));return{...state,notices:state.notices.delete(idx)}},[UNLOAD_NOTICES.SUCCESS]:state=>({...state,notices:state.notices.clear(),loading:!1})},noticesReducer_initialState),searchReducer_initialState={loading:!1,results:(0,immutable_es.aV)([]),error:null},reducers_searchReducer=(0,handleActions.Z)({[FETCH_SEARCH_RESULTS.PENDING]:state=>({...state,loading:!0}),[FETCH_SEARCH_RESULTS.SUCCESS]:(state,action)=>({...state,loading:!1,results:(0,immutable_es.d0)(action.response.hits.hits)}),[FETCH_SEARCH_RESULTS.ERROR]:(state,action)=>({...state,loading:!1,error:action.error.response.data}),[UNLOAD_SEARCH_RESULTS.SUCCESS]:state=>({...state,loading:!1,results:state.results.clear()})},searchReducer_initialState),reducers=(0,redux.UY)({shared,common,searchState:reducers_searchReducer,modal:modalReducer,sidebar:reducers_sidebarReducer,ticketsState:ticketsReducer,accountsState:accountsReducer,groupsState:groupsReducer,teamsState:teamsReducer,departmentsState:departmentsReducer,noticesState:noticesReducer,settings,tagsSettings:reducers_tagsReducer});var redux_saga_effects_npm_proxy_esm=__webpack_require__(23),axios=__webpack_require__(7),axios_default=__webpack_require__.n(axios);axios_default().defaults.headers.post["Content-Type"]="application/json";let api={tickets:{}};api.tickets.getWithPage=payload=>{const limit=payload.limit?payload.limit:50,page=payload.page?payload.page:0,type=payload.type?payload.type:"all",filter=payload.filter?encodeURIComponent(JSON.stringify(payload.filter,null,2)):void 0,fullFilter=filter?`&filter=${filter}`:void 0;return axios_default().get(`/api/v2/tickets?type=${type}&page=${page}&limit=${limit}${fullFilter}`).then((res=>res.data))},api.tickets.search=payload=>axios_default().get(`/api/v1/tickets/search/?search=${payload.searchString}&limit=100`).then((res=>res.data)),api.tickets.create=payload=>axios_default().post("/api/v1/tickets/create",payload).then((res=>res.data)),api.tickets.delete=({id})=>axios_default().delete(`/api/v1/tickets/${id}`).then((res=>res.data)),api.tickets.renameTicketType=(id,name)=>axios_default().put("/api/v1/tickets/types/"+id,{name}).then((res=>res.data)),api.tickets.createTicketType=({name})=>axios_default().post("/api/v1/tickets/types/create",{name}).then((res=>res.data)),api.tickets.addPriorityToType=({typeId,priority})=>axios_default().post(`/api/v1/tickets/type/${typeId}/addpriority`,{priority}).then((res=>res.data)),api.tickets.removePriorityFromType=({typeId,priority})=>axios_default().post(`/api/v1/tickets/type/${typeId}/removepriority`,{priority}).then((res=>res.data)),api.tickets.deleteTicketType=({id,newTypeId})=>axios_default().delete(`/api/v1/tickets/types/${id}`,{data:{newTypeId}}).then((res=>res.data)),api.tickets.createPriority=({name,overdueIn,htmlColor})=>axios_default().post("/api/v1/tickets/priority/create",{name,overdueIn,htmlColor}).then((res=>res.data)),api.tickets.updatePriority=({id,name,overdueIn,htmlColor})=>axios_default().put(`/api/v1/tickets/priority/${id}`,{name,overdueIn,htmlColor}).then((res=>res.data)),api.tickets.deletePriority=({id,newPriority})=>axios_default().post(`/api/v1/tickets/priority/${id}/delete`,{newPriority}).then((res=>res.data)),api.tickets.getTagsWithPage=({limit,page})=>(limit=limit||10,page=page||0,axios_default().get(`/api/v1/tags/limit?limit=${limit}&page=${page}`).then((res=>res.data))),api.tickets.createTag=({name})=>axios_default().post("/api/v1/tags/create",{tag:name}).then((res=>res.data)),api.tickets.transferToThirdParty=({uid})=>axios_default().post(`/api/v2/tickets/transfer/${uid}`).then((res=>res.data)),api.accounts={},api.accounts.create=payload=>axios_default().post("/api/v2/accounts",payload).then((res=>res.data)),api.accounts.getWithPage=payload=>{const limit=payload&&payload.limit?payload.limit:25,page=payload&&payload.page?payload.page:0,type=payload&&payload.type?payload.type:"all";let search=payload&&payload.search?payload.search:"";search&&(search=`&search=${search}`);const showDeleted=!(!payload||!payload.showDeleted)&&payload.showDeleted;return axios_default().get(`/api/v2/accounts?type=${type}&limit=${limit}&page=${page}${search}&showDeleted=${showDeleted}`).then((res=>res.data))},api.accounts.updateUser=payload=>axios_default().put(`/api/v2/accounts/${payload.username}`,payload).then((res=>res.data)),api.accounts.deleteAccount=({username})=>axios_default().delete(`/api/v1/users/${username}`).then((res=>res.data)),api.accounts.enableAccount=({username})=>axios_default().get(`/api/v1/users/${username}/enable`).then((res=>res.data)),api.groups={},api.groups.create=payload=>axios_default().post("/api/v2/groups",payload).then((res=>res.data)),api.groups.get=payload=>{const limit=payload&&payload.limit?payload.limit:1e3,page=payload&&payload.page?payload.page:0,type=payload&&payload.type?`&type=${payload.type}`:"";return axios_default().get(`/api/v2/groups?limit=${limit}&page=${page}${type}`).then((res=>res.data))},api.groups.update=payload=>axios_default().put(`/api/v2/groups/${payload._id}`,payload).then((res=>res.data)),api.groups.delete=({_id})=>axios_default().delete(`/api/v2/groups/${_id}`).then((res=>res.data)),api.teams={},api.teams.getWithPage=payload=>{const limit=payload&&payload.limit?payload.limit:100,page=payload&&payload.page?payload.page:0;return axios_default().get(`/api/v2/teams?limit=${limit}&page=${page}`).then((res=>res.data))},api.teams.create=payload=>axios_default().post("/api/v2/teams",payload).then((res=>res.data)),api.teams.updateTeam=payload=>axios_default().put(`/api/v2/teams/${payload._id}`,payload).then((res=>res.data)),api.teams.deleteTeam=({_id})=>axios_default().delete(`/api/v2/teams/${_id}`).then((res=>res.data)),api.departments={},api.departments.get=()=>axios_default().get("/api/v2/departments").then((res=>res.data)),api.departments.create=payload=>axios_default().post("/api/v2/departments",payload).then((res=>res.data)),api.departments.update=payload=>axios_default().put(`/api/v2/departments/${payload._id}`,payload).then((res=>res.data)),api.departments.delete=({_id})=>axios_default().delete(`/api/v2/departments/${_id}`).then((res=>res.data)),api.notices={},api.notices.get=()=>axios_default().get("/api/v2/notices").then((res=>res.data)),api.notices.update=payload=>axios_default().put(`/api/v2/notices/${payload._id}`,payload).then((res=>res.data)),api.notices.delete=({_id})=>axios_default().delete(`/api/v2/notices/${_id}`).then((res=>res.data)),api.search={},api.search.search=({limit,term})=>{const l=limit||25;return axios_default().get(`/api/v2/es/search?limit=${l}&q=${term}`).then((res=>res.data))},api.settings={},api.settings.update=settings=>axios_default().put("/api/v1/settings",settings).then((res=>res.data)),api.settings.hasMongoDBTools=()=>axios_default().get("/api/v1/backup/hastools").then((res=>res.data)),api.settings.fetchBackups=()=>axios_default().get("/api/v1/backups").then((res=>res.data)),api.settings.backupNow=()=>axios_default().post("/api/v1/backup").then((res=>res.data)),api.settings.getBackups=()=>axios_default().get("/api/v1/backups").then((res=>res.data)),api.settings.fetchDeletedTickets=()=>axios_default().get("/api/v1/tickets/deleted").then((res=>res.data)),api.settings.restoreDeletedTicket=({_id})=>axios_default().post("/api/v1/tickets/deleted/restore",{_id}).then((res=>res.data)),api.settings.permDeleteTicket=({_id})=>axios_default().delete(`/api/v2/tickets/deleted/${_id}`).then((res=>res.data)),api.settings.updateRoleOrder=({roleOrder})=>axios_default().put("/api/v1/settings/updateroleorder",{roleOrder}).then((res=>res.data)),api.settings.updatePermissions=payload=>axios_default().put(`/api/v1/roles/${payload._id}`,payload).then((res=>res.data)),api.settings.createRole=({name})=>axios_default().post("/api/v1/roles",{name}).then((res=>res.data)),api.settings.deleteRole=({_id,newRoleId})=>axios_default().delete(`/api/v1/roles/${_id}`,{data:{newRoleId}}).then((res=>res.data)),api.settings.buildSass=()=>axios_default().get("/api/v1/settings/buildsass").then((res=>res.data)),api.common={},api.common.fetchRoles=()=>axios_default().get("/api/v1/roles").then((res=>res.data));const client_api=api;var browser=__webpack_require__(32),browser_default=__webpack_require__.n(browser);const COLOURS={debug:"blue",info:"green",warn:"pink",error:"red"};const logger=new class{generateMessage(level,message,source){const namespace=`trudesk:${level}`,createDebug=browser_default()(namespace);createDebug.color=COLOURS[level],source?createDebug(source,message):createDebug(message)}debug(message,source){return this.generateMessage("debug",message,source)}info(message,source){return this.generateMessage("info",message,source)}warn(message,source){return this.generateMessage("warn",message,source)}error(message,source){return this.generateMessage("error",message,source)}};function*fetchRoles({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.common.fetchRoles,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ROLES.SUCCESS,response})}catch(error){const errorText=error.response.data.error;logger.error(errorText,error.response),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ROLES.ERROR,error})}}function*watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_ROLES.ACTION,fetchRoles)}function fetchSettings(){return axios_default().get("/api/v1/settings").then((res=>res.data)).catch((error=>{throw error.response}))}function*fetchFlow({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(fetchSettings,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.SUCCESS,response})}catch(error){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ERROR,error})}}function*updateSetting({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.update,[payload]);payload.noSnackbar||helpers_default().UI.showSnackbar("Setting Saved Successfully",!1),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_SETTING.SUCCESS,response,payload,meta})}catch(error){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_SETTING.ERROR,error,meta})}}function*updateMultipleSettings({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.update,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_MULTIPLE_SETTINGS.SUCCESS,response}),helpers_default().UI.showSnackbar("Setting saved successfully.",!1),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ACTION})}catch(error){helpers_default().UI.showSnackbar(error,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_MULTIPLE_SETTINGS.ERROR,error})}}function*updateColorScheme({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.update,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_COLORSCHEME.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.buildSass),helpers_default().UI.showSnackbar("Setting saved successfully. Reloading...",!1),setTimeout((function(){window.location.reload()}),1e3)}catch(error){helpers_default().UI.showSnackbar(error,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_MULTIPLE_SETTINGS.ERROR,error})}}function*checkMongoDBTools({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.hasMongoDBTools,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_MONGODB_TOOLS.SUCCESS,response})}catch(error){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_MONGODB_TOOLS.ERROR,error})}}function*fetchBackups(){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.fetchBackups);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_BACKUPS.SUCCESS,response})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_BACKUPS.ERROR,error})}}function*backupNow(){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:BACKUP_NOW.PENDING});const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.backupNow);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:BACKUP_NOW.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_BACKUPS.ACTION}),helpers_default().UI.showSnackbar("Backup completed successfully")}catch(error){if(!error.response)return logger.error(error);const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:BACKUP_NOW.ERROR,error})}}function*fetchDeletedTickets(){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DELETED_TICKETS.PENDING});const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.fetchDeletedTickets);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DELETED_TICKETS.SUCCESS,response})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DELETED_TICKETS.ERROR,error})}}function*restoreDeletedTicket({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.restoreDeletedTicket,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:RESTORE_DELETED_TICKET.SUCCESS,response,payload}),helpers_default().UI.showSnackbar("Ticket Restored")}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:RESTORE_DELETED_TICKET.ERROR,error})}}function*permDeleteTicket({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.permDeleteTicket,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:PERM_DELETE_TICKET.SUCCESS,response,payload}),helpers_default().UI.showSnackbar("Ticket Deleted")}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:PERM_DELETE_TICKET.ERROR,error})}}function*updateRoleOrder({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.updateRoleOrder,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_ROLE_ORDER.SUCCESS,response})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_ROLE_ORDER.ERROR,error})}}function*updatePermissions({payload}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_PERMISSIONS.PENDING});const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.updatePermissions,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_PERMISSIONS.SUCCESS,response}),helpers_default().UI.showSnackbar("Updated Role. Flushing Permissions...")}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_PERMISSIONS.ERROR,error})}}function*createRole({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.createRole,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_ROLE.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ROLES.ACTION}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_ROLE.ERROR,error})}}function*deleteRole({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.settings.deleteRole,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_ROLE.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ROLES.ACTION}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL}),helpers_default().UI.showSnackbar("Role successfully deleted")}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_ROLE.ERROR,error})}}function*settingsWatcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_SETTINGS.ACTION,fetchFlow),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_SETTING.ACTION,updateSetting),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_MULTIPLE_SETTINGS.ACTION,updateMultipleSettings),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_COLORSCHEME.ACTION,updateColorScheme),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_MONGODB_TOOLS.ACTION,checkMongoDBTools),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_BACKUPS.ACTION,fetchBackups),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(BACKUP_NOW.ACTION,backupNow),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_DELETED_TICKETS.ACTION,fetchDeletedTickets),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(RESTORE_DELETED_TICKET.ACTION,restoreDeletedTicket),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(PERM_DELETE_TICKET.ACTION,permDeleteTicket),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_ROLE_ORDER.ACTION,updateRoleOrder),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_PERMISSIONS.ACTION,updatePermissions),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_ROLE.ACTION,createRole),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_ROLE.ACTION,deleteRole)}const getSessionUser=state=>state.shared.sessionUser;function*fetchTickets({payload}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_TICKETS.PENDING,payload});try{let response=null;response="search"===payload.type?yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.search,payload):yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.getWithPage,payload),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_TICKETS.SUCCESS,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_TICKETS.ERROR,error}),logger.error(errorText,error)}}function*createTicket({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.create,payload),sessionUser=yield(0,redux_saga_effects_npm_proxy_esm.Ys)(getSessionUser);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TICKET.SUCCESS,response,sessionUser}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TICKET.ERROR,error})}}function*deleteTicket({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.delete,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_TICKET.SUCCESS,payload,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_TICKET.ERROR,error}),logger.error(errorText,error)}}function*unloadThunk({payload,meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_TICKETS.SUCCESS,payload,meta})}catch(error){logger.error(error)}}function*ticketUpdated({payload}){try{const sessionUser=yield(0,redux_saga_effects_npm_proxy_esm.Ys)(getSessionUser);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:TICKET_UPDATED.SUCCESS,payload,sessionUser})}catch(error){logger.error(error)}}function*ticketEvent({payload}){try{const sessionUser=yield(0,redux_saga_effects_npm_proxy_esm.Ys)(getSessionUser);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:TICKET_EVENT.SUCCESS,payload,sessionUser})}catch(error){logger.error(error)}}function*createTicketType({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.createTicketType,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TICKET_TYPE.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TICKET_TYPE.ERROR,error})}}function*deleteTicketType({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.deleteTicketType,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_TICKET_TYPE.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_TICKET_TYPE.ERROR,error})}}function*getTagsWithPage({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.getTagsWithPage,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:GET_TAGS_WITH_PAGE.SUCCESS,response})}catch(error){if(!error.response)return logger.error(error);const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:GET_TAGS_WITH_PAGE.ERROR,error})}}function*createPriority({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.createPriority,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_PRIORITY.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_PRIORITY.ERROR,error})}}function*updatePriority({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.updatePriority,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_PRIORITY.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_PRIORITY.ERROR,error})}}function*deletePriority({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.deletePriority,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_PRIORITY.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SETTINGS.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_PRIORITY.ERROR,error})}}function*createTag({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.createTag,{name:payload.name});yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TAG.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),(0,lodash.isUndefined)(payload.currentPage)||(yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:GET_TAGS_WITH_PAGE.ACTION,payload:{limit:16,page:payload.currentPage}})),helpers_default().UI.showSnackbar(`Tag ${payload.name} successfully created`)}catch(error){if(!error.response)return logger.error(error);const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TAG.ERROR,error})}}function*transferToThirdParty({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.tickets.transferToThirdParty,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:TRANSFER_TO_THIRDPARTY.SUCCESS,response}),helpers_default().UI.showSnackbar("Ticket Transferred Successfully",!1)}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:TRANSFER_TO_THIRDPARTY.ERROR,error})}}function*tickets_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_TICKETS.ACTION,fetchTickets),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_TICKET.ACTION,createTicket),yield(0,redux_saga_effects_npm_proxy_esm.ib)(DELETE_TICKET.ACTION,deleteTicket),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_TICKETS.ACTION,unloadThunk),yield(0,redux_saga_effects_npm_proxy_esm.ib)(TICKET_UPDATED.ACTION,ticketUpdated),yield(0,redux_saga_effects_npm_proxy_esm.ib)(TICKET_EVENT.ACTION,ticketEvent),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_TICKET_TYPE.ACTION,createTicketType),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_TICKET_TYPE.ACTION,deleteTicketType),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_PRIORITY.ACTION,createPriority),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_PRIORITY.ACTION,updatePriority),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_PRIORITY.ACTION,deletePriority),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(GET_TAGS_WITH_PAGE.ACTION,getTagsWithPage),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_TAG.ACTION,createTag),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(TRANSFER_TO_THIRDPARTY.ACTION,transferToThirdParty)}function*fetchAccounts({payload,meta}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ACCOUNTS.PENDING});try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.getWithPage,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ACCOUNTS.SUCCESS,payload:{response,payload},meta})}catch(error){let errorText="";error.response&&(errorText=error.response.data.error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response||error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ACCOUNTS.ERROR,error})}}function*fetchAccountsCreateTicket({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.getWithPage,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ACCOUNTS_CREATE_TICKET.SUCCESS,payload:{response,payload},meta})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_ACCOUNTS_CREATE_TICKET.ERROR,error})}}function*createAccount({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.create,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_ACCOUNT.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),helpers_default().UI.showSnackbar("Account created successfully")}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response||error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_ACCOUNT.ERROR,error})}}function*saveEditAccount({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.updateUser,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:SAVE_EDIT_ACCOUNT.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION}),helpers_default().UI.showSnackbar("Account updated successfully")}catch(error){let errorText="";error.response&&(errorText=error.response.data.error),errorText.message&&(errorText=errorText.message),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response||error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:SAVE_EDIT_ACCOUNT.ERROR,error})}}function*deleteAccount({payload}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_ACCOUNT.PENDING,payload});const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.deleteAccount,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_ACCOUNT.SUCCESS,response,payload}),response.disabled?helpers_default().UI.showSnackbar("Account is linked to existing tickets. Account Disabled"):helpers_default().UI.showSnackbar("Account deleted successfully")}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response||error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_ACCOUNT.ERROR,error})}}function*enableAccount({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.accounts.enableAccount,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:ENABLE_ACCOUNT.SUCCESS,response,payload}),helpers_default().UI.showSnackbar("Account has been enabled")}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error.response||error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:ENABLE_ACCOUNT.ERROR,error})}}function*accounts_unloadThunk({payload,meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_ACCOUNTS.SUCCESS,payload,meta})}catch(error){logger.error(error)}}function*accounts_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_ACCOUNT.ACTION,createAccount),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_ACCOUNTS.ACTION,fetchAccounts),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_ACCOUNTS_CREATE_TICKET.ACTION,fetchAccountsCreateTicket),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(SAVE_EDIT_ACCOUNT.ACTION,saveEditAccount),yield(0,redux_saga_effects_npm_proxy_esm.ib)(DELETE_ACCOUNT.ACTION,deleteAccount),yield(0,redux_saga_effects_npm_proxy_esm.ib)(ENABLE_ACCOUNT.ACTION,enableAccount),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_ACCOUNTS.ACTION,accounts_unloadThunk)}function*fetchGroups({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.groups.get,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_GROUPS.SUCCESS,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_GROUPS.ERROR,error}),logger.error(errorText,error)}}function*createGroup({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.groups.create,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_GROUP.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_GROUP.ERROR,error}),logger.error(errorText,error)}}function*updateGroup({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.groups.update,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_GROUP.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_GROUP.ERROR,error}),logger.error(errorText,error)}}function*deleteGroup({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.groups.delete,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_GROUP.SUCCESS,payload,response,meta}),helpers_default().UI.showSnackbar("Successfully delete group")}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_GROUP.ERROR,error}),logger.error(errorText,error)}}function*groups_unloadThunk({payload,meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_GROUPS.SUCCESS,payload,meta})}catch(error){logger.error(error)}}function*groups_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_GROUPS.ACTION,fetchGroups),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_GROUP.ACTION,createGroup),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_GROUP.ACTION,updateGroup),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_GROUP.ACTION,deleteGroup),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_GROUPS.ACTION,groups_unloadThunk)}function*fetchTeams({payload,meta}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.teams.getWithPage,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_TEAMS.SUCCESS,payload:{response,payload},meta})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_TEAMS.ERROR,error})}}function*createTeam({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.teams.create,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TEAM.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_TEAM.ERROR,error})}}function*updateTeam({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.teams.updateTeam,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:SAVE_EDIT_TEAM.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION})}catch(error){const errorText=error.response.data.error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:SAVE_EDIT_TEAM.ERROR,error})}}function*deleteTeam({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.teams.deleteTeam,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_TEAM.SUCCESS,payload,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_TEAM.ERROR,error})}}function*teams_unloadThunk({payload,meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_TEAMS.SUCCESS,payload,meta})}catch(error){logger.error(error)}}function*teams_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_TEAMS.ACTION,fetchTeams),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_TEAM.ACTION,createTeam),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(SAVE_EDIT_TEAM.ACTION,updateTeam),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_TEAM.ACTION,deleteTeam),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_TEAMS.ACTION,teams_unloadThunk)}function*fetchDepartments({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.departments.get,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DEPARTMENTS.SUCCESS,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),logger.error(errorText,error),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_DEPARTMENTS.ERROR,error})}}function*createDepartment({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.departments.create,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_DEPARTMENT.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:CREATE_DEPARTMENT.ERROR,error}),logger.error(errorText,error)}}function*updateDepartment({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.departments.update,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_DEPARTMENT.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_DEPARTMENT.ERROR,error}),logger.error(errorText,error)}}function*deleteDepartment({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.departments.delete,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_DEPARTMENT.SUCCESS,payload,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_DEPARTMENT.ERROR,error}),logger.error(errorText,error)}}function*unloadDepartments({payload,meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_DEPARTMENTS.SUCCESS,payload,meta})}catch(error){logger.error(error)}}function*departments_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_DEPARTMENTS.ACTION,fetchDepartments),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(CREATE_DEPARTMENT.ACTION,createDepartment),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_DEPARTMENT.ACTION,updateDepartment),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_DEPARTMENT.ACTION,deleteDepartment),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_DEPARTMENTS.ACTION,unloadDepartments)}function*fetchNotices({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.notices.get,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_NOTICES.SUCCESS,response})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_NOTICES.ERROR,error}),logger.error(errorText,error)}}function*updateNotice({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.notices.update,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_NOTICE.SUCCESS,response}),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:HIDE_MODAL.ACTION})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UPDATE_NOTICE.ERROR,error})}}function*deleteNotice({payload}){try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.notices.delete,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_NOTICE.SUCCESS,payload,response})}catch(error){const errorText=error.response?error.response.data.error:error;error.response&&401!==error.response.status&&(logger.error(errorText,error),helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0)),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:DELETE_NOTICE.ERROR,error})}}function*notices_unloadThunk({payload,meta}){try{yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_NOTICES.SUCCESS,payload,meta})}catch(error){logger.error(error)}}function*watch(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_NOTICES.ACTION,fetchNotices),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UPDATE_NOTICE.ACTION,updateNotice),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(DELETE_NOTICE.ACTION,deleteNotice),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_NOTICES.ACTION,notices_unloadThunk)}function*fetchSearchResults({payload,meta}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SEARCH_RESULTS.PENDING}),payload.term||(yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SEARCH_RESULTS.ERROR,error:{message:"Invalid search Term"}}));try{const response=yield(0,redux_saga_effects_npm_proxy_esm.RE)(client_api.search.search,payload);yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SEARCH_RESULTS.SUCCESS,response,meta})}catch(error){const errorText=error.response?error.response.data.error:error;helpers_default().UI.showSnackbar(`Error: ${errorText}`,!0),yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:FETCH_SEARCH_RESULTS.ERROR,error}),logger.error(errorText,error)}}function*unloadSearchResults({payload,meta}){yield(0,redux_saga_effects_npm_proxy_esm.gz)({type:UNLOAD_SEARCH_RESULTS.SUCCESS,payload,meta})}function*search_watcher(){yield(0,redux_saga_effects_npm_proxy_esm.Fm)(FETCH_SEARCH_RESULTS.ACTION,fetchSearchResults),yield(0,redux_saga_effects_npm_proxy_esm.Fm)(UNLOAD_SEARCH_RESULTS.ACTION,unloadSearchResults)}var prop_types=__webpack_require__(716),prop_types_default=__webpack_require__.n(prop_types),mobxreact_esm=__webpack_require__(784),mobx_esm=__webpack_require__(785),createAction=__webpack_require__(782);const showModal=(0,createAction.Z)(SHOW_MODAL.ACTION,((modalType,modalProps)=>({modalType,modalProps}))),hideModal=(0,createAction.Z)(HIDE_MODAL.ACTION),clearModal=(0,createAction.Z)(CLEAR_MODAL.ACTION),showNotice=(0,createAction.Z)(SHOW_NOTICE.ACTION),clearNotice=(0,createAction.Z)(CLEAR_NOTICE.ACTION),common_fetchRoles=(0,createAction.Z)(FETCH_ROLES.ACTION),common_updateRoleOrder=(0,createAction.Z)(UPDATE_ROLE_ORDER.ACTION);function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var Avatar=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(Avatar,_React$Component);var Constructor,protoProps,staticProps,_super=_createSuper(Avatar);function Avatar(){return _classCallCheck(this,Avatar),_super.apply(this,arguments)}return Constructor=Avatar,(protoProps=[{key:"render",value:function(){var _this$props=this.props,image=_this$props.image,showOnlineBubble=_this$props.showOnlineBubble,userId=_this$props.userId,size=_this$props.size;return react.createElement(react.Fragment,null,react.createElement("div",{className:"relative uk-clearfix uk-float-left uk-display-inline-block"},react.createElement("img",{className:"profile-pic uk-border-circle",style:{height:size,width:size},src:"/uploads/users/".concat(image||"defaultProfile.jpg"),alt:""}),showOnlineBubble&&react.createElement("span",{className:"user-offline uk-border-circle","data-user-status-id":userId})))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Avatar}(react.Component);Avatar.propTypes={userId:prop_types_default().string,image:prop_types_default().string,size:prop_types_default().number.isRequired,showOnlineBubble:prop_types_default().bool},Avatar.defaultProps={size:50,showOnlineBubble:!0};const Avatar_Avatar=Avatar;function Dropdown_typeof(obj){return Dropdown_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Dropdown_typeof(obj)}function Dropdown_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Dropdown_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Dropdown_setPrototypeOf(o,p){return Dropdown_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Dropdown_setPrototypeOf(o,p)}function Dropdown_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Dropdown_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Dropdown_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Dropdown_possibleConstructorReturn(this,result)}}function Dropdown_possibleConstructorReturn(self,call){if(call&&("object"===Dropdown_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Dropdown_getPrototypeOf(o){return Dropdown_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Dropdown_getPrototypeOf(o)}var Dropdown=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Dropdown_setPrototypeOf(subClass,superClass)}(Dropdown,_React$Component);var Constructor,protoProps,staticProps,_super=Dropdown_createSuper(Dropdown);function Dropdown(){return Dropdown_classCallCheck(this,Dropdown),_super.apply(this,arguments)}return Constructor=Dropdown,(protoProps=[{key:"render",value:function(){var _this$props=this.props,small=_this$props.small,width=_this$props.width,children=_this$props.children,className=(small?" uk-dropdown-small ":" ")+(_this$props.extraClass||"");return react.createElement("div",{className:"nopadding-left nopadding-right uk-dropdown uk-margin-top-remove"+className,style:{width,minWidth:width}},react.createElement("ul",{className:"uk-nav uk-topbar nomargin"},children))}}])&&Dropdown_defineProperties(Constructor.prototype,protoProps),staticProps&&Dropdown_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Dropdown}(react.Component);Dropdown.propTypes={small:prop_types_default().bool,width:prop_types_default().oneOfType([prop_types_default().number,prop_types_default().string]),extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired},Dropdown.defaultProps={width:150};const components_Dropdown=Dropdown;function DropdownItem_typeof(obj){return DropdownItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DropdownItem_typeof(obj)}function DropdownItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DropdownItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DropdownItem_setPrototypeOf(o,p){return DropdownItem_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},DropdownItem_setPrototypeOf(o,p)}function DropdownItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DropdownItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DropdownItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DropdownItem_possibleConstructorReturn(this,result)}}function DropdownItem_possibleConstructorReturn(self,call){if(call&&("object"===DropdownItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DropdownItem_getPrototypeOf(o){return DropdownItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},DropdownItem_getPrototypeOf(o)}var DropdownItem=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DropdownItem_setPrototypeOf(subClass,superClass)}(DropdownItem,_React$Component);var Constructor,protoProps,staticProps,_super=DropdownItem_createSuper(DropdownItem);function DropdownItem(){return DropdownItem_classCallCheck(this,DropdownItem),_super.apply(this,arguments)}return Constructor=DropdownItem,(protoProps=[{key:"onClick",value:function(e){this.props.onClick&&this.props.onClick(e)}},{key:"render",value:function(){var _this$props=this.props,closeOnClick=_this$props.closeOnClick,text=_this$props.text,href=_this$props.href,extraClass=_this$props.extraClass;return react.createElement("li",{className:closeOnClick?"uk-dropdown-close":""},react.createElement("a",{href,"close-uk-dropdown":closeOnClick.toString(),className:(href?"":"no-ajaxy")+(extraClass?" "+extraClass:""),onClick:this.props.onClick},text))}}])&&DropdownItem_defineProperties(Constructor.prototype,protoProps),staticProps&&DropdownItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DropdownItem}(react.Component);DropdownItem.propTypes={href:prop_types_default().string,text:prop_types_default().string.isRequired,extraClass:prop_types_default().string,onClick:prop_types_default().func,closeOnClick:prop_types_default().bool},DropdownItem.defaultProps={closeOnClick:!0};const Dropdown_DropdownItem=DropdownItem;function DropdownSeperator_typeof(obj){return DropdownSeperator_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DropdownSeperator_typeof(obj)}function DropdownSeperator_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DropdownSeperator_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DropdownSeperator_setPrototypeOf(o,p){return DropdownSeperator_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},DropdownSeperator_setPrototypeOf(o,p)}function DropdownSeperator_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DropdownSeperator_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DropdownSeperator_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DropdownSeperator_possibleConstructorReturn(this,result)}}function DropdownSeperator_possibleConstructorReturn(self,call){if(call&&("object"===DropdownSeperator_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DropdownSeperator_getPrototypeOf(o){return DropdownSeperator_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},DropdownSeperator_getPrototypeOf(o)}const DropdownSeperator=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DropdownSeperator_setPrototypeOf(subClass,superClass)}(DropdownSeparator,_React$Component);var Constructor,protoProps,staticProps,_super=DropdownSeperator_createSuper(DropdownSeparator);function DropdownSeparator(){return DropdownSeperator_classCallCheck(this,DropdownSeparator),_super.apply(this,arguments)}return Constructor=DropdownSeparator,(protoProps=[{key:"render",value:function(){return react.createElement("li",null,react.createElement("hr",{style:{margin:"5px 0"}}))}}])&&DropdownSeperator_defineProperties(Constructor.prototype,protoProps),staticProps&&DropdownSeperator_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DropdownSeparator}(react.Component);function DropdownHeader_typeof(obj){return DropdownHeader_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DropdownHeader_typeof(obj)}function DropdownHeader_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DropdownHeader_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DropdownHeader_setPrototypeOf(o,p){return DropdownHeader_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},DropdownHeader_setPrototypeOf(o,p)}function DropdownHeader_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DropdownHeader_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DropdownHeader_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DropdownHeader_possibleConstructorReturn(this,result)}}function DropdownHeader_possibleConstructorReturn(self,call){if(call&&("object"===DropdownHeader_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DropdownHeader_getPrototypeOf(o){return DropdownHeader_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},DropdownHeader_getPrototypeOf(o)}var DropdownHeader=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DropdownHeader_setPrototypeOf(subClass,superClass)}(DropdownHeader,_React$Component);var Constructor,protoProps,staticProps,_super=DropdownHeader_createSuper(DropdownHeader);function DropdownHeader(){return DropdownHeader_classCallCheck(this,DropdownHeader),_super.apply(this,arguments)}return Constructor=DropdownHeader,(protoProps=[{key:"render",value:function(){return react.createElement("li",{className:"uk-nav-header"},this.props.text)}}])&&DropdownHeader_defineProperties(Constructor.prototype,protoProps),staticProps&&DropdownHeader_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DropdownHeader}(react.Component);DropdownHeader.propTypes={text:prop_types_default().string.isRequired};const Dropdown_DropdownHeader=DropdownHeader;function DropdownTrigger_typeof(obj){return DropdownTrigger_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DropdownTrigger_typeof(obj)}function DropdownTrigger_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DropdownTrigger_setPrototypeOf(o,p){return DropdownTrigger_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},DropdownTrigger_setPrototypeOf(o,p)}function DropdownTrigger_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DropdownTrigger_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DropdownTrigger_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DropdownTrigger_possibleConstructorReturn(this,result)}}function DropdownTrigger_possibleConstructorReturn(self,call){if(call&&("object"===DropdownTrigger_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DropdownTrigger_getPrototypeOf(o){return DropdownTrigger_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},DropdownTrigger_getPrototypeOf(o)}var DropdownTrigger=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DropdownTrigger_setPrototypeOf(subClass,superClass)}(DropdownTrigger,_React$Component);var Constructor,protoProps,staticProps,_super=DropdownTrigger_createSuper(DropdownTrigger);function DropdownTrigger(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DropdownTrigger),_super.call(this,props)}return Constructor=DropdownTrigger,(protoProps=[{key:"componentDidMount",value:function(){this.drop&&uikit_combined_min_default().dropdown(this.drop,{mode:this.props.mode,pos:this.props.pos,offset:this.props.offset})}},{key:"componentWillUnmount",value:function(){this.drop&&(this.drop=null)}},{key:"render",value:function(){var _this=this;return react.createElement("div",{ref:function(i){return _this.drop=i},className:"uk-position-relative"+(this.props.extraClass?" "+this.props.extraClass:""),"aria-haspopup":!0,"aria-expanded":!1},this.props.children)}}])&&DropdownTrigger_defineProperties(Constructor.prototype,protoProps),staticProps&&DropdownTrigger_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DropdownTrigger}(react.Component);DropdownTrigger.propTypes={mode:prop_types_default().string,pos:prop_types_default().string,offset:prop_types_default().number,extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired},DropdownTrigger.defaultProps={mode:"click",pos:"bottom-left"};const Dropdown_DropdownTrigger=DropdownTrigger;function PDropdownTrigger_typeof(obj){return PDropdownTrigger_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PDropdownTrigger_typeof(obj)}function PDropdownTrigger_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PDropdownTrigger_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PDropdownTrigger_setPrototypeOf(o,p){return PDropdownTrigger_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},PDropdownTrigger_setPrototypeOf(o,p)}function PDropdownTrigger_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=PDropdownTrigger_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PDropdownTrigger_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PDropdownTrigger_possibleConstructorReturn(this,result)}}function PDropdownTrigger_possibleConstructorReturn(self,call){if(call&&("object"===PDropdownTrigger_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PDropdownTrigger_getPrototypeOf(o){return PDropdownTrigger_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},PDropdownTrigger_getPrototypeOf(o)}var PDropdownTrigger=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PDropdownTrigger_setPrototypeOf(subClass,superClass)}(PDropdownTrigger,_React$Component);var Constructor,protoProps,staticProps,_super=PDropdownTrigger_createSuper(PDropdownTrigger);function PDropdownTrigger(){return PDropdownTrigger_classCallCheck(this,PDropdownTrigger),_super.apply(this,arguments)}return Constructor=PDropdownTrigger,(protoProps=[{key:"render",value:function(){return react.createElement("div",{"data-notifications":this.props.target},this.props.children)}}])&&PDropdownTrigger_defineProperties(Constructor.prototype,protoProps),staticProps&&PDropdownTrigger_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PDropdownTrigger}(react.Component);PDropdownTrigger.propTypes={target:prop_types_default().string.isRequired,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const PDropdown_PDropdownTrigger=PDropdownTrigger;function OffCanvasTrigger_typeof(obj){return OffCanvasTrigger_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},OffCanvasTrigger_typeof(obj)}function OffCanvasTrigger_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function OffCanvasTrigger_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function OffCanvasTrigger_setPrototypeOf(o,p){return OffCanvasTrigger_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},OffCanvasTrigger_setPrototypeOf(o,p)}function OffCanvasTrigger_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=OffCanvasTrigger_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=OffCanvasTrigger_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return OffCanvasTrigger_possibleConstructorReturn(this,result)}}function OffCanvasTrigger_possibleConstructorReturn(self,call){if(call&&("object"===OffCanvasTrigger_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function OffCanvasTrigger_getPrototypeOf(o){return OffCanvasTrigger_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},OffCanvasTrigger_getPrototypeOf(o)}var OffCanvasTrigger=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&OffCanvasTrigger_setPrototypeOf(subClass,superClass)}(OffCanvasTrigger,_React$Component);var Constructor,protoProps,staticProps,_super=OffCanvasTrigger_createSuper(OffCanvasTrigger);function OffCanvasTrigger(){return OffCanvasTrigger_classCallCheck(this,OffCanvasTrigger),_super.apply(this,arguments)}return Constructor=OffCanvasTrigger,(protoProps=[{key:"render",value:function(){return react.createElement("div",{"data-uk-offcanvas":"{target: '#".concat(this.props.target,"', mode: 'slide'}")},this.props.children)}}])&&OffCanvasTrigger_defineProperties(Constructor.prototype,protoProps),staticProps&&OffCanvasTrigger_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),OffCanvasTrigger}(react.Component);OffCanvasTrigger.propTypes={target:prop_types_default().string.isRequired,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const OffCanvas_OffCanvasTrigger=OffCanvasTrigger;function NoticeBanner_typeof(obj){return NoticeBanner_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},NoticeBanner_typeof(obj)}function NoticeBanner_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function NoticeBanner_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NoticeBanner_setPrototypeOf(o,p){return NoticeBanner_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},NoticeBanner_setPrototypeOf(o,p)}function NoticeBanner_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=NoticeBanner_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NoticeBanner_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NoticeBanner_possibleConstructorReturn(this,result)}}function NoticeBanner_possibleConstructorReturn(self,call){if(call&&("object"===NoticeBanner_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NoticeBanner_getPrototypeOf(o){return NoticeBanner_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},NoticeBanner_getPrototypeOf(o)}var NoticeBanner=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NoticeBanner_setPrototypeOf(subClass,superClass)}(NoticeBanner,_React$Component);var Constructor,protoProps,staticProps,_super=NoticeBanner_createSuper(NoticeBanner);function NoticeBanner(){return NoticeBanner_classCallCheck(this,NoticeBanner),_super.apply(this,arguments)}return Constructor=NoticeBanner,(protoProps=[{key:"render",value:function(){var notice=this.props.notice,dateFormatted=helpers_default().formatDate(notice.get("activeDate,"),helpers_default().getShortDateFormat()+", "+helpers_default().getTimeFormat());return react.createElement("div",{style:{width:"100%",height:"30px",background:notice.get("color"),color:notice.get("fontColor"),fontSize:"13px",fontWeight:"500",textAlign:"center",paddingTop:"7px"}},dateFormatted," Important: ",notice.get("message"))}}])&&NoticeBanner_defineProperties(Constructor.prototype,protoProps),staticProps&&NoticeBanner_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NoticeBanner}(react.Component);NoticeBanner.propTypes={notice:prop_types_default().object.isRequired};const components_NoticeBanner=NoticeBanner;var moment_timezone=__webpack_require__(51),moment_timezone_default=__webpack_require__.n(moment_timezone),clsx_m=__webpack_require__(783),navigation=__webpack_require__(39),navigation_default=__webpack_require__.n(navigation);function PDropdown_typeof(obj){return PDropdown_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PDropdown_typeof(obj)}function PDropdown_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PDropdown_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PDropdown_setPrototypeOf(o,p){return PDropdown_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},PDropdown_setPrototypeOf(o,p)}function PDropdown_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=PDropdown_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PDropdown_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PDropdown_possibleConstructorReturn(this,result)}}function PDropdown_possibleConstructorReturn(self,call){if(call&&("object"===PDropdown_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PDropdown_getPrototypeOf(o){return PDropdown_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},PDropdown_getPrototypeOf(o)}var PDropDown=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PDropdown_setPrototypeOf(subClass,superClass)}(PDropDown,_React$Component);var Constructor,protoProps,staticProps,_super=PDropdown_createSuper(PDropDown);function PDropDown(){return PDropdown_classCallCheck(this,PDropDown),_super.apply(this,arguments)}return Constructor=PDropDown,(protoProps=[{key:"componentDidMount",value:function(){navigation_default().notifications()}},{key:"componentDidUpdate",value:function(){navigation_default().notifications()}},{key:"render",value:function(){var _this$props=this.props,title=_this$props.title,titleHref=_this$props.titleHref,leftArrow=_this$props.leftArrow,override=_this$props.override,topOffset=_this$props.topOffset,leftOffset=_this$props.leftOffset,rightComponent=_this$props.rightComponent,children=_this$props.children,footerComponent=_this$props.footerComponent,minHeight=_this$props.minHeight;return react.createElement("div",{id:this.props.id,className:(0,clsx_m.Z)("p-dropdown",leftArrow&&"p-dropdown-left"),"data-override":override,"data-top-offset":topOffset,"data-left-offset":leftOffset,style:{minHeight}},react.createElement("div",{className:"actions"},titleHref&&react.createElement("a",{href:titleHref},title),!titleHref&&react.createElement("span",{style:{paddingLeft:"5px"}},title),rightComponent&&react.createElement("div",{className:"uk-float-right"},rightComponent)),react.createElement("div",{className:"items close-on-click"},react.createElement("ul",null,children)),footerComponent&&react.createElement("div",{className:"bottom-actions actions uk-float-left",style:{borderBottom:"none",borderTop:"1px solid rgba(0,0,0,0.2)"}},footerComponent))}}])&&PDropdown_defineProperties(Constructor.prototype,protoProps),staticProps&&PDropdown_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PDropDown}(react.Component);PDropDown.propTypes={id:prop_types_default().string.isRequired,title:prop_types_default().string.isRequired,titleHref:prop_types_default().string,leftArrow:prop_types_default().bool,override:prop_types_default().bool,topOffset:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),leftOffset:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),rightComponent:prop_types_default().element,footerComponent:prop_types_default().element,minHeight:prop_types_default().number,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired},PDropDown.defaultProps={leftArrow:!1,override:!1,topOffset:"0",leftOffset:"0",minHeight:0};const PDropdown=PDropDown;var _class,_class2,_descriptor,socket=__webpack_require__(13),socket_default=__webpack_require__.n(socket);__webpack_require__(12);function notificationsDropdown_typeof(obj){return notificationsDropdown_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},notificationsDropdown_typeof(obj)}function notificationsDropdown_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function notificationsDropdown_setPrototypeOf(o,p){return notificationsDropdown_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},notificationsDropdown_setPrototypeOf(o,p)}function notificationsDropdown_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=notificationsDropdown_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=notificationsDropdown_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return notificationsDropdown_possibleConstructorReturn(this,result)}}function notificationsDropdown_possibleConstructorReturn(self,call){if(call&&("object"===notificationsDropdown_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return notificationsDropdown_assertThisInitialized(self)}function notificationsDropdown_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function notificationsDropdown_getPrototypeOf(o){return notificationsDropdown_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},notificationsDropdown_getPrototypeOf(o)}var target,property,decorators,descriptor,context,desc,NotificationsDropdownPartial=(0,mobxreact_esm.Pi)((_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&notificationsDropdown_setPrototypeOf(subClass,superClass)}(NotificationsDropdownPartial,_React$Component);var Constructor,protoProps,staticProps,_super=notificationsDropdown_createSuper(NotificationsDropdownPartial);function NotificationsDropdownPartial(props){var _this,target,property,descriptor,context;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NotificationsDropdownPartial),_this=_super.call(this,props),target=_this,property="notifications",descriptor=_descriptor,context=notificationsDropdown_assertThisInitialized(_this),descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0}),(0,mobx_esm.rC)(notificationsDropdown_assertThisInitialized(_this)),_this.onSocketUpdateNotifications=_this.onSocketUpdateNotifications.bind(notificationsDropdown_assertThisInitialized(_this)),_this}return Constructor=NotificationsDropdownPartial,staticProps=[{key:"clearNotificationsClicked",value:function(e){e.preventDefault(),e.stopPropagation(),socket_default().ui.clearNotifications()}},{key:"markNotificationRead",value:function(e,notification){e.preventDefault(),e.stopPropagation(),socket_default().ui.markNotificationRead(notification._id),History.pushState(null,null,"/tickets/".concat(notification.data.ticket.uid))}}],(protoProps=[{key:"componentDidMount",value:function(){socket_default().ui.socket.on("updateNotifications",this.onSocketUpdateNotifications)}},{key:"componentWillUnmount",value:function(){socket_default().ui.socket.off("updateNotifications",this.onSocketUpdateNotifications)}},{key:"onSocketUpdateNotifications",value:function(data){helpers_default().arrayIsEqual(this.notifications,data.items)||(this.notifications=data.items)}},{key:"render",value:function(){var _this$props=this.props,shortDateFormat=_this$props.shortDateFormat,timezone=_this$props.timezone;return react.createElement(PDropdown,{id:"notifications",title:"Notifications",topOffset:"-10",leftOffset:"4",rightComponent:react.createElement("a",{className:"hoverUnderline no-ajaxy",onClick:function(e){return NotificationsDropdownPartial.clearNotificationsClicked(e)}},"Clear Notifications"),footerComponent:react.createElement("div",{className:"uk-text-center"+(this.notifications.length<1?" hide":"")},react.createElement("a",{className:"no-ajaxy hoverUnderline",onClick:this.props.onViewAllNotificationsClick},"View All Notifications"))},this.notifications.map((function(notification){var formattedTimestamp=moment_timezone_default().utc(notification.created).tz(timezone).format("YYYY-MM-DDThh:mm"),formattedDate=moment_timezone_default().utc(notification.created).tz(timezone).format(shortDateFormat);return react.createElement("li",{key:notification._id},react.createElement("a",{className:"item no-ajaxy",onClick:function(e){return NotificationsDropdownPartial.markNotificationRead(e,notification)}},react.createElement("div",{className:"uk-clearfix"},notification.unread&&react.createElement("div",{className:"messageUnread"}),0===notification.type&&react.createElement("div",{className:"messageIcon left"},react.createElement("i",{className:"fa fa-check green"})),1===notification.type&&react.createElement("div",{className:"messageIcon left"},react.createElement("i",{className:"fa fa-comment-o green",style:{marginTop:"-5px"}})),2===notification.type&&react.createElement("div",{className:"messageIcon left"},react.createElement("i",{className:"fa fa-exclamation red"})),react.createElement("div",{className:"messageAuthor"},react.createElement("strong",null,notification.title)),react.createElement("div",{className:"messageSnippet"},react.createElement("span",null,notification.message)),react.createElement("div",{className:"messageDate"},react.createElement("time",{dateTime:formattedTimestamp,className:"timestamp"},formattedDate)))))}),this))}}])&&notificationsDropdown_defineProperties(Constructor.prototype,protoProps),staticProps&&notificationsDropdown_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NotificationsDropdownPartial}(react.Component),target=_class2.prototype,property="notifications",decorators=[mobx_esm.LO],descriptor={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},desc={},Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),_descriptor=desc,_class=_class2))||_class;NotificationsDropdownPartial.propTypes={timezone:prop_types_default().string.isRequired,shortDateFormat:prop_types_default().string.isRequired,onViewAllNotificationsClick:prop_types_default().func.isRequired};const notificationsDropdown=NotificationsDropdownPartial;function conversationsDropdown_typeof(obj){return conversationsDropdown_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},conversationsDropdown_typeof(obj)}var conversationsDropdown_class,conversationsDropdown_class2,conversationsDropdown_descriptor;function conversationsDropdown_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function conversationsDropdown_setPrototypeOf(o,p){return conversationsDropdown_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},conversationsDropdown_setPrototypeOf(o,p)}function conversationsDropdown_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=conversationsDropdown_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=conversationsDropdown_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return conversationsDropdown_possibleConstructorReturn(this,result)}}function conversationsDropdown_possibleConstructorReturn(self,call){if(call&&("object"===conversationsDropdown_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return conversationsDropdown_assertThisInitialized(self)}function conversationsDropdown_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function conversationsDropdown_getPrototypeOf(o){return conversationsDropdown_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},conversationsDropdown_getPrototypeOf(o)}var ConversationsDropdownPartial=(0,mobxreact_esm.Pi)((conversationsDropdown_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&conversationsDropdown_setPrototypeOf(subClass,superClass)}(ConversationsDropdownPartial,_React$Component);var Constructor,protoProps,staticProps,_super=conversationsDropdown_createSuper(ConversationsDropdownPartial);function ConversationsDropdownPartial(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ConversationsDropdownPartial),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"conversations",conversationsDropdown_descriptor,conversationsDropdown_assertThisInitialized(_this)),(0,mobx_esm.rC)(conversationsDropdown_assertThisInitialized(_this)),_this.onUpdateConversationsNotifications=_this.onUpdateConversationsNotifications.bind(conversationsDropdown_assertThisInitialized(_this)),_this}return Constructor=ConversationsDropdownPartial,staticProps=[{key:"onConversationClicked",value:function(e,id){e.preventDefault(),History.pushState(null,null,"/messages/".concat(id))}}],(protoProps=[{key:"componentDidMount",value:function(){socket_default().ui.socket.on("updateConversationsNotifications",this.onUpdateConversationsNotifications)}},{key:"componentWillUnmount",value:function(){socket_default().ui.socket.off("updateConversationsNotifications",this.onUpdateConversationsNotifications)}},{key:"onUpdateConversationsNotifications",value:function(data){helpers_default().arrayIsEqual(this.conversations,data.conversations)||(this.conversations=data.conversations)}},{key:"render",value:function(){var _this$props=this.props,timezone=_this$props.timezone,shortDateFormat=_this$props.shortDateFormat;return react.createElement(PDropdown,{id:"conversations",title:"Conversations",titleHref:"/messages",topOffset:"-10",leftOffset:"4",rightComponent:react.createElement("a",{href:"/messages/startconversation",className:"hoverUnderline"},"Start Conversation")},react.createElement("div",{className:"items close-on-click"},react.createElement("ul",null,this.conversations.map((function(conversation){var profilePic=conversation.partner.image||"defaultProfile.jpg",formattedTimestamp=moment_timezone_default().utc(conversation.updatedAt).tz(timezone).format("YYYY-MM-DDThh:mm"),formattedDate=moment_timezone_default().utc(conversation.updatedAt).tz(timezone).format(shortDateFormat);return react.createElement("li",{key:conversation._id},react.createElement("a",{className:"no-ajaxy messageNotification uk-position-relative",onClick:function(e){return ConversationsDropdownPartial.onConversationClicked(e,conversation._id)}},react.createElement("div",{className:"uk-clearfix"},react.createElement("div",{className:"profilePic uk-float-left"},react.createElement("img",{src:"/uploads/users/".concat(profilePic),alt:"Profile Picture"})),react.createElement("div",{className:"messageAuthor"},react.createElement("strong",null,conversation.partner.fullname)),react.createElement("div",{className:"messageSnippet"},react.createElement("span",null,conversation.recentMessage)),react.createElement("div",{className:"messageDate",style:{position:"absolute",top:"10px",right:"15px"}},react.createElement("time",{dateTime:formattedTimestamp},formattedDate)))))})))))}}])&&conversationsDropdown_defineProperties(Constructor.prototype,protoProps),staticProps&&conversationsDropdown_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ConversationsDropdownPartial}(react.Component),conversationsDropdown_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(conversationsDropdown_class2.prototype,"conversations",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),conversationsDropdown_class=conversationsDropdown_class2))||conversationsDropdown_class;ConversationsDropdownPartial.propTypes={timezone:prop_types_default().string.isRequired,shortDateFormat:prop_types_default().string.isRequired};const conversationsDropdown=ConversationsDropdownPartial;function OffCanvas_typeof(obj){return OffCanvas_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},OffCanvas_typeof(obj)}function OffCanvas_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function OffCanvas_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function OffCanvas_setPrototypeOf(o,p){return OffCanvas_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},OffCanvas_setPrototypeOf(o,p)}function OffCanvas_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=OffCanvas_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=OffCanvas_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return OffCanvas_possibleConstructorReturn(this,result)}}function OffCanvas_possibleConstructorReturn(self,call){if(call&&("object"===OffCanvas_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function OffCanvas_getPrototypeOf(o){return OffCanvas_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},OffCanvas_getPrototypeOf(o)}var OffCanvas=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&OffCanvas_setPrototypeOf(subClass,superClass)}(OffCanvas,_React$Component);var Constructor,protoProps,staticProps,_super=OffCanvas_createSuper(OffCanvas);function OffCanvas(){return OffCanvas_classCallCheck(this,OffCanvas),_super.apply(this,arguments)}return Constructor=OffCanvas,(protoProps=[{key:"render",value:function(){var _this$props=this.props,title=_this$props.title,id=_this$props.id,children=_this$props.children;return react.createElement("div",{id,className:"uk-offcanvas"},react.createElement("div",{className:"uk-offcanvas-bar uk-offcanvas-bar-flip scrollable"},title&&react.createElement("div",{className:"uk-offcanvas-title"},react.createElement("h3",null,title)),children))}}])&&OffCanvas_defineProperties(Constructor.prototype,protoProps),staticProps&&OffCanvas_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),OffCanvas}(react.Component);OffCanvas.propTypes={title:prop_types_default().string,id:prop_types_default().string.isRequired,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const components_OffCanvas=OffCanvas;function onlineUserList_typeof(obj){return onlineUserList_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},onlineUserList_typeof(obj)}var onlineUserList_class,onlineUserList_class2,onlineUserList_descriptor;function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function onlineUserList_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function onlineUserList_setPrototypeOf(o,p){return onlineUserList_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},onlineUserList_setPrototypeOf(o,p)}function onlineUserList_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=onlineUserList_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=onlineUserList_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return onlineUserList_possibleConstructorReturn(this,result)}}function onlineUserList_possibleConstructorReturn(self,call){if(call&&("object"===onlineUserList_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return onlineUserList_assertThisInitialized(self)}function onlineUserList_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function onlineUserList_getPrototypeOf(o){return onlineUserList_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},onlineUserList_getPrototypeOf(o)}var OnlineUserListPartial=(0,mobxreact_esm.Pi)((onlineUserList_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&onlineUserList_setPrototypeOf(subClass,superClass)}(OnlineUserListPartial,_React$Component);var Constructor,protoProps,staticProps,_super=onlineUserList_createSuper(OnlineUserListPartial);function OnlineUserListPartial(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OnlineUserListPartial),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"activeUsers",onlineUserList_descriptor,onlineUserList_assertThisInitialized(_this)),(0,mobx_esm.jQ)({enforceActions:"never"}),(0,mobx_esm.rC)(onlineUserList_assertThisInitialized(_this)),_this.onSocketUpdateUsers=_this.onSocketUpdateUsers.bind(onlineUserList_assertThisInitialized(_this)),_this}return Constructor=OnlineUserListPartial,staticProps=[{key:"onUserClicked",value:function(e,id){e.preventDefault(),socket_default().socket.emit("spawnChatWindow",id),uikit_combined_min_default().offcanvas.hide()}},{key:"fromNow",value:function(timezone,date){return(0,lodash.isUndefined)(date)?"Never":(moment_timezone_default().updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mo",MM:"%dmos",y:"1y",yy:"%dyrs"}}),moment_timezone_default().utc(date).tz(timezone).fromNow())}}],(protoProps=[{key:"componentDidMount",value:function(){socket_default().socket.on("updateUsers",this.onSocketUpdateUsers)}},{key:"componentWillUnmount",value:function(){socket_default().socket.off("updateUsers",this.onSocketUpdateUsers)}},{key:"onSocketUpdateUsers",value:function(data){this.activeUsers.replace(data)}},{key:"isActiveUser",value:function(username){return!!this.activeUsers.get(username)}},{key:"render",value:function(){var _this2=this,_this$props=this.props,timezone=_this$props.timezone,users=_this$props.users;return react.createElement(components_OffCanvas,{title:"Online Users",id:"online-user-list"},react.createElement("div",{style:{padding:"0 5px"}},react.createElement("div",{className:"active-now"},react.createElement("h5",null,"Active Now"),react.createElement("div",{className:"online-list-wrapper"},react.createElement("ul",{className:"online-list"},(0,mobx_esm.qh)(this.activeUsers).map((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];if(!_this2.props.sessionUser||value.user._id!==_this2.props.sessionUser._id){var image=value.user.image||"defaultProfile.jpg",isAgentOrAdmin=value.user.role.isAdmin||value.user.role.isAgent;return react.createElement("li",{key},react.createElement("a",{className:"no-ajaxy",onClick:function(e){return OnlineUserListPartial.onUserClicked(e,value.user._id)}},react.createElement("div",{className:"user-list-user"},react.createElement("div",{className:"image"},react.createElement("img",{src:"/uploads/users/".concat(image),alt:"Profile Pic"})),react.createElement("span",{className:"online-status","data-user-status-id":value.user._id}),react.createElement("div",{className:"user-name"+(isAgentOrAdmin?" _agent":"")},value.user.fullname+(isAgentOrAdmin?" - Agent":"")))))}}))))),react.createElement("h5",null,"More Conversations"),react.createElement("div",{className:"user-list-wrapper",style:{lineHeight:"normal"}},react.createElement("div",{className:"online-list-search-box search-box",style:{borderTop:"1px solid rgba(0,0,0,0.1)",borderRight:"none"}},react.createElement("input",{type:"text",placeholder:"Search"})),react.createElement("ul",{className:"user-list"},users.map((function(user){if(!_this2.props.sessionUser||user._id!==_this2.props.sessionUser._id){var image=user.image||"defaultProfile.jpg";return react.createElement("li",{key:user._id,"data-search-term":user.fullname.toLowerCase()},react.createElement("a",{className:"no-ajaxy",onClick:function(e){return OnlineUserListPartial.onUserClicked(e,user._id)}},react.createElement("div",{className:"user-list-user"},react.createElement("div",{className:"image"},react.createElement("img",{src:"/uploads/users/".concat(image),alt:"Profile Picture"}))),react.createElement("span",{className:"online-status-offline"+(_this2.isActiveUser(user.username)?" success-text":""),"data-user-status-id":user._id},_this2.isActiveUser(user.username)?"Now":OnlineUserListPartial.fromNow(timezone,user.lastOnline)),react.createElement("div",{className:"user-name"},user.fullname)))}}))))))}}])&&onlineUserList_defineProperties(Constructor.prototype,protoProps),staticProps&&onlineUserList_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),OnlineUserListPartial}(react.Component),onlineUserList_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(onlineUserList_class2.prototype,"activeUsers",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),onlineUserList_class=onlineUserList_class2))||onlineUserList_class;OnlineUserListPartial.propTypes={sessionUser:prop_types_default().object,timezone:prop_types_default().string.isRequired,users:prop_types_default().array.isRequired};const onlineUserList=OnlineUserListPartial;var TopbarContainer_class,TopbarContainer_class2,TopbarContainer_descriptor,_descriptor2,_descriptor3,js_cookie=__webpack_require__(36),js_cookie_default=__webpack_require__.n(js_cookie);function TopbarContainer_typeof(obj){return TopbarContainer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TopbarContainer_typeof(obj)}function TopbarContainer_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function TopbarContainer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TopbarContainer_setPrototypeOf(o,p){return TopbarContainer_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},TopbarContainer_setPrototypeOf(o,p)}function TopbarContainer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TopbarContainer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TopbarContainer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TopbarContainer_possibleConstructorReturn(this,result)}}function TopbarContainer_possibleConstructorReturn(self,call){if(call&&("object"===TopbarContainer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return TopbarContainer_assertThisInitialized(self)}function TopbarContainer_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function TopbarContainer_getPrototypeOf(o){return TopbarContainer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},TopbarContainer_getPrototypeOf(o)}function TopbarContainer_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var TopbarContainer=(0,mobxreact_esm.Pi)((TopbarContainer_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TopbarContainer_setPrototypeOf(subClass,superClass)}(TopbarContainer,_React$Component);var Constructor,protoProps,staticProps,_super=TopbarContainer_createSuper(TopbarContainer);function TopbarContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TopbarContainer),TopbarContainer_initializerDefineProperty(_this=_super.call(this,props),"notificationCount",TopbarContainer_descriptor,TopbarContainer_assertThisInitialized(_this)),TopbarContainer_initializerDefineProperty(_this,"activeUserCount",_descriptor2,TopbarContainer_assertThisInitialized(_this)),TopbarContainer_initializerDefineProperty(_this,"showInfoBanner",_descriptor3,TopbarContainer_assertThisInitialized(_this)),(0,mobx_esm.rC)(TopbarContainer_assertThisInitialized(_this)),_this.onSocketUpdateNotifications=_this.onSocketUpdateNotifications.bind(TopbarContainer_assertThisInitialized(_this)),_this.onSocketUpdateUsers=_this.onSocketUpdateUsers.bind(TopbarContainer_assertThisInitialized(_this)),_this.onSocketShowNotice=_this.onSocketShowNotice.bind(TopbarContainer_assertThisInitialized(_this)),_this.onSocketClearNotice=_this.onSocketClearNotice.bind(TopbarContainer_assertThisInitialized(_this)),_this}return Constructor=TopbarContainer,staticProps=[{key:"onConversationsClicked",value:function(e){e.preventDefault(),socket_default().ui.socket.emit("updateMailNotifications")}}],(protoProps=[{key:"componentDidMount",value:function(){socket_default().socket.on("updateNotifications",this.onSocketUpdateNotifications),socket_default().socket.on("updateUsers",this.onSocketUpdateUsers),socket_default().socket.on("$trudesk:notice:show",this.onSocketShowNotice),socket_default().socket.on("updateClearNotice",this.onSocketClearNotice),socket_default().ui.updateNotifications(),socket_default().ui.updateUsers(),this.showNotice(this.props.viewdata.notice,this.props.viewdata.noticeCookieName),this.shouldShowBanner()}},{key:"componentWillUnmount",value:function(){socket_default().socket.off("updateNotifications",this.onSocketUpdateNotifications),socket_default().socket.off("updateUsers",this.onSocketUpdateUsers),socket_default().socket.off("$trudesk:notice:show",this.onSocketShowNotice),socket_default().socket.off("updateClearNotice",this.onSocketClearNotice)}},{key:"shouldShowBanner",value:function(){"true"===js_cookie_default().get("trudesk_info_banner_closed")&&(this.showInfoBanner=!1)}},{key:"closeInfo",value:function(){js_cookie_default().set("trudesk_info_banner_closed","true"),this.showInfoBanner=!1}},{key:"showNotice",value:function(notice,cookieName){this.props.showNotice(notice),cookieName&&"false"!==js_cookie_default().get(cookieName)&&this.props.showModal("NOTICE_ALERT",{modalTag:"NOTICE_ALERT",notice,noticeCookieName:cookieName,shortDateFormat:this.props.viewdata.shortDateFormat,timeFormat:this.props.viewdata.timeFormat})}},{key:"onSocketShowNotice",value:function(data){this.props.showNotice(data);var cookieName=data.name+"_"+helpers_default().formatDate(data.activeDate,"MMMDDYYYY_HHmmss");this.showNotice(data,cookieName),helpers_default().resizeAll()}},{key:"onSocketClearNotice",value:function(){this.props.clearNotice(),this.props.hideModal("NOTICE_ALERT"),helpers_default().resizeAll()}},{key:"onSocketUpdateNotifications",value:function(data){data.count!==this.notificationCount&&(this.notificationCount=data.count)}},{key:"onSocketUpdateUsers",value:function(data){delete data[this.props.sessionUser.username];var count=(0,lodash.size)(data);count!==this.activeUserCount&&(this.activeUserCount=count)}},{key:"render",value:function(){var _this2=this,_this$props=this.props,viewdata=_this$props.viewdata,sessionUser=_this$props.sessionUser;return react.createElement("div",null,this.props.notice&&react.createElement(components_NoticeBanner,{notice:this.props.notice}),react.createElement("div",{className:"uk-grid top-nav"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("div",{className:"top-bar","data-topbar":!0},react.createElement("div",{className:"title-area uk-float-left"},react.createElement("div",{className:"logo"},react.createElement("img",{src:viewdata.logoImage,alt:"Logo",className:"site-logo"}))),react.createElement("section",{className:"top-bar-section uk-clearfix"},react.createElement("div",{className:"top-menu uk-float-right"},react.createElement("ul",{className:"uk-subnav uk-margin-bottom-remove"},sessionUser&&helpers_default().canUser("tickets:create")&&react.createElement("li",{className:"top-bar-icon nopadding"},react.createElement("button",{title:"Create Ticket",className:"anchor",onClick:function(){return _this2.props.showModal("CREATE_TICKET")}},react.createElement("i",{className:"material-icons"},""))),sessionUser&&helpers_default().canUser("tickets:create")&&react.createElement("li",{className:"top-bar-icon nopadding nohover"},react.createElement("i",{className:"material-icons separator"},"remove")),react.createElement("li",{className:"top-bar-icon"},react.createElement(PDropdown_PDropdownTrigger,{target:"conversations"},react.createElement("a",{title:"Conversations",className:"no-ajaxy uk-vertical-align",onClick:function(e){return TopbarContainer.onConversationsClicked(e)}},react.createElement("i",{className:"material-icons"},"question_answer")))),react.createElement("li",{className:"top-bar-icon"},react.createElement(PDropdown_PDropdownTrigger,{target:"notifications"},react.createElement("a",{title:"Notifications",className:"no-ajaxy uk-vertical-align"},react.createElement("i",{className:"material-icons"},"notifications"),react.createElement("span",{className:"alert uk-border-circle label "+(this.notificationCount<1?"hide":"")},this.notificationCount)))),react.createElement("li",{className:"top-bar-icon"},react.createElement(OffCanvas_OffCanvasTrigger,{target:"online-user-list"},react.createElement("a",{title:"Online Users",className:"no-ajaxy"},react.createElement("i",{className:"material-icons"},"people_alt"),react.createElement("span",{className:"online-user-count alert uk-border-circle label "+(this.activeUserCount<1?"hide":"")},this.activeUserCount)))),react.createElement("li",{className:"top-bar-icon nopadding nohover"},react.createElement("i",{className:"material-icons separator"},"remove")),react.createElement("li",{className:"profile-area profile-name"},react.createElement("span",{style:{fontSize:16}},viewdata.loggedInAccount.fullname),react.createElement("div",{className:"uk-position-relative uk-display-inline-block"},react.createElement(Dropdown_DropdownTrigger,{pos:"bottom-right"},react.createElement("a",{href:"#",title:viewdata.loggedInAccount.fullname,className:"profile-pic no-ajaxy uk-vertical-align-middle"},react.createElement(Avatar_Avatar,{image:viewdata.loggedInAccount.image,showOnlineBubble:!1,size:35})),react.createElement(components_Dropdown,{small:!0},react.createElement(Dropdown_DropdownHeader,{text:viewdata.loggedInAccount.fullname}),react.createElement(Dropdown_DropdownItem,{text:"Profile",href:"/profile"}),react.createElement(DropdownSeperator,null),react.createElement(Dropdown_DropdownItem,{text:"Logout",href:"/logout"})))))),react.createElement(notificationsDropdown,{shortDateFormat:viewdata.shortDateFormat,timezone:viewdata.timezone,onViewAllNotificationsClick:function(){return _this2.props.showModal("VIEW_ALL_NOTIFICATIONS")}}),react.createElement(conversationsDropdown,{shortDateFormat:viewdata.shortDateFormat,timezone:viewdata.timezone}))))),react.createElement(onlineUserList,{timezone:viewdata.timezone,users:viewdata.users,sessionUser:this.props.sessionUser})))}}])&&TopbarContainer_defineProperties(Constructor.prototype,protoProps),staticProps&&TopbarContainer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TopbarContainer}(react.Component),TopbarContainer_descriptor=TopbarContainer_applyDecoratedDescriptor(TopbarContainer_class2.prototype,"notificationCount",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor2=TopbarContainer_applyDecoratedDescriptor(TopbarContainer_class2.prototype,"activeUserCount",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor3=TopbarContainer_applyDecoratedDescriptor(TopbarContainer_class2.prototype,"showInfoBanner",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),TopbarContainer_class=TopbarContainer_class2))||TopbarContainer_class;TopbarContainer.propTypes={sessionUser:prop_types_default().object,viewdata:prop_types_default().object.isRequired,showModal:prop_types_default().func.isRequired,hideModal:prop_types_default().func.isRequired,showNotice:prop_types_default().func.isRequired,clearNotice:prop_types_default().func.isRequired,notice:prop_types_default().object};const Topbar_TopbarContainer=(0,es.$j)((function(state){return{sessionUser:state.shared.sessionUser,notice:state.shared.notice,viewdata:state.common}}),{showModal,hideModal,showNotice,clearNotice})(TopbarContainer);function SidebarItem_typeof(obj){return SidebarItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SidebarItem_typeof(obj)}function SidebarItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SidebarItem_setPrototypeOf(o,p){return SidebarItem_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},SidebarItem_setPrototypeOf(o,p)}function SidebarItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SidebarItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SidebarItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SidebarItem_possibleConstructorReturn(this,result)}}function SidebarItem_possibleConstructorReturn(self,call){if(call&&("object"===SidebarItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SidebarItem_getPrototypeOf(o){return SidebarItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},SidebarItem_getPrototypeOf(o)}var NavButton=function(_Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SidebarItem_setPrototypeOf(subClass,superClass)}(NavButton,_Component);var Constructor,protoProps,staticProps,_super=SidebarItem_createSuper(NavButton);function NavButton(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NavButton),_super.call(this,props)}return Constructor=NavButton,(protoProps=[{key:"componentDidUpdate",value:function(){helpers_default().UI.bindAccordion(),helpers_default().UI.tetherUpdate()}},{key:"renderAnchorLink",value:function(){return react.createElement("a",{href:this.props.href,className:this.props.class,target:this.props.target||""},react.createElement("i",{className:"material-icons"},this.props.icon),this.props.text)}},{key:"render",value:function(){return this.props.hasSubmenu?react.createElement("li",{className:"hasSubMenu"+(this.props.active?" active":""),"data-nav-id":this.props.subMenuTarget,"data-nav-accordion":!0,"data-nav-accordion-target":"side-nav-accordion-"+this.props.subMenuTarget},this.renderAnchorLink(),this.props.children):react.createElement("li",{className:this.props.active?" active ":""},this.renderAnchorLink(),this.props.children)}}])&&SidebarItem_defineProperties(Constructor.prototype,protoProps),staticProps&&SidebarItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NavButton}(react.Component);NavButton.propTypes={href:prop_types_default().string.isRequired,icon:prop_types_default().string.isRequired,text:prop_types_default().string.isRequired,class:prop_types_default().string,hasSubmenu:prop_types_default().bool,subMenuTarget:prop_types_default().string,active:prop_types_default().bool,target:prop_types_default().string,children:prop_types_default().node};const SidebarItem=NavButton;function NavSeperator_typeof(obj){return NavSeperator_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},NavSeperator_typeof(obj)}function NavSeperator_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function NavSeperator_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NavSeperator_setPrototypeOf(o,p){return NavSeperator_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},NavSeperator_setPrototypeOf(o,p)}function NavSeperator_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=NavSeperator_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NavSeperator_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NavSeperator_possibleConstructorReturn(this,result)}}function NavSeperator_possibleConstructorReturn(self,call){if(call&&("object"===NavSeperator_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NavSeperator_getPrototypeOf(o){return NavSeperator_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},NavSeperator_getPrototypeOf(o)}const Nav_NavSeperator=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NavSeperator_setPrototypeOf(subClass,superClass)}(NavSeperator,_React$Component);var Constructor,protoProps,staticProps,_super=NavSeperator_createSuper(NavSeperator);function NavSeperator(){return NavSeperator_classCallCheck(this,NavSeperator),_super.apply(this,arguments)}return Constructor=NavSeperator,(protoProps=[{key:"render",value:function(){return react.createElement("hr",null)}}])&&NavSeperator_defineProperties(Constructor.prototype,protoProps),staticProps&&NavSeperator_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NavSeperator}(react.Component);var isArray=__webpack_require__(16),isArray_default=__webpack_require__.n(isArray),jquery=__webpack_require__(0),jquery_default=__webpack_require__.n(jquery);function Submenu_typeof(obj){return Submenu_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Submenu_typeof(obj)}function Submenu_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Submenu_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Submenu_setPrototypeOf(o,p){return Submenu_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Submenu_setPrototypeOf(o,p)}function Submenu_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Submenu_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Submenu_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Submenu_possibleConstructorReturn(this,result)}}function Submenu_possibleConstructorReturn(self,call){if(call&&("object"===Submenu_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Submenu_getPrototypeOf(o){return Submenu_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Submenu_getPrototypeOf(o)}var Submenu=function(_Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Submenu_setPrototypeOf(subClass,superClass)}(Submenu,_Component);var Constructor,protoProps,staticProps,_super=Submenu_createSuper(Submenu);function Submenu(){return Submenu_classCallCheck(this,Submenu),_super.apply(this,arguments)}return Constructor=Submenu,(protoProps=[{key:"componentDidMount",value:function(){this.buildFloatingMenu(this.props.id)}},{key:"componentDidUpdate",value:function(){this.buildFloatingMenu(this.props.id)}},{key:"shouldComponentUpdate",value:function(nextProps){return this.props.children!==nextProps.children}},{key:"buildFloatingMenu",value:function(navId){if(this.props.children){var $sideBarToRight=jquery_default()(".sidebar-to-right");$sideBarToRight.find("#side-nav-sub-"+navId).remove();var ul=jquery_default()('<ul id="side-nav-sub-'+this.props.id+'" class="side-nav-sub side-nav-floating"></ul>'),li=null;if(isArray_default()(this.props.children))for(var i=0;i<this.props.children.length;i++)this.props.children[i]&&("NavSeperator"===this.props.children[i].type.name?ul.append("<hr />"):(this.props.children[i].props.hasSeperator&&ul.append("<hr />"),li=jquery_default()('<li class="'+(this.props.children[i].props.active?" active ":"")+'"><a href="'+this.props.children[i].props.href+'"><span>'+this.props.children[i].props.text+"</span></a></li>"),ul.append(li)));else{if("NavSeperator"===this.props.children.type.name)return;li=jquery_default()('<li class="'+(this.props.children.props.active?" active ":"")+'"><a href="'+this.props.children.props.href+'"><span>'+this.props.children.props.text+"</span></a></li>"),ul.append(li)}$sideBarToRight.append(ul),helpers_default().UI.setupSidebarTether(),jquery_default()("body").ajaxify()}}},{key:"render",value:function(){return react.createElement("ul",{id:"side-nav-accordion-"+this.props.id,className:"side-nav-sub side-nav-accordion"+(!0===this.props.subMenuOpen?" subMenuOpen":"")},this.props.children)}}])&&Submenu_defineProperties(Constructor.prototype,protoProps),staticProps&&Submenu_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Submenu}(react.Component);Submenu.propTypes={id:prop_types_default().string.isRequired,subMenuOpen:prop_types_default().bool,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const Nav_Submenu=Submenu;function SubmenuItem_typeof(obj){return SubmenuItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SubmenuItem_typeof(obj)}function SubmenuItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function SubmenuItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SubmenuItem_setPrototypeOf(o,p){return SubmenuItem_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},SubmenuItem_setPrototypeOf(o,p)}function SubmenuItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SubmenuItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SubmenuItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SubmenuItem_possibleConstructorReturn(this,result)}}function SubmenuItem_possibleConstructorReturn(self,call){if(call&&("object"===SubmenuItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SubmenuItem_getPrototypeOf(o){return SubmenuItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},SubmenuItem_getPrototypeOf(o)}var SubmenuItem=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SubmenuItem_setPrototypeOf(subClass,superClass)}(SubmenuItem,_React$Component);var Constructor,protoProps,staticProps,_super=SubmenuItem_createSuper(SubmenuItem);function SubmenuItem(){return SubmenuItem_classCallCheck(this,SubmenuItem),_super.apply(this,arguments)}return Constructor=SubmenuItem,(protoProps=[{key:"render",value:function(){return react.createElement("div",null,this.props.hasSeperator&&react.createElement("hr",null),react.createElement("li",{className:this.props.active?" active ":""},react.createElement("a",{href:this.props.href},react.createElement("i",{className:"material-icons fa-sub-icon"},this.props.icon),this.props.text)))}}])&&SubmenuItem_defineProperties(Constructor.prototype,protoProps),staticProps&&SubmenuItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SubmenuItem}(react.Component);SubmenuItem.propTypes={href:prop_types_default().string.isRequired,text:prop_types_default().string.isRequired,icon:prop_types_default().string.isRequired,hasSeperator:prop_types_default().bool,active:prop_types_default().bool};const Nav_SubmenuItem=SubmenuItem,updateNavChange=(0,createAction.Z)(NAV_CHANGE.ACTION,(values=>({activeItem:values.activeItem,activeSubItem:values.activeSubItem,sessionUser:values.sessionUser})));function Sidebar_typeof(obj){return Sidebar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Sidebar_typeof(obj)}function Sidebar_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Sidebar_setPrototypeOf(o,p){return Sidebar_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Sidebar_setPrototypeOf(o,p)}function Sidebar_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Sidebar_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Sidebar_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Sidebar_possibleConstructorReturn(this,result)}}function Sidebar_possibleConstructorReturn(self,call){if(call&&("object"===Sidebar_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Sidebar_getPrototypeOf(o){return Sidebar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Sidebar_getPrototypeOf(o)}var Sidebar=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Sidebar_setPrototypeOf(subClass,superClass)}(Sidebar,_React$Component);var Constructor,protoProps,staticProps,_super=Sidebar_createSuper(Sidebar);function Sidebar(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Sidebar),_super.call(this,props)}return Constructor=Sidebar,(protoProps=[{key:"componentDidMount",value:function(){var _this=this;helpers_default().UI.getPlugins((function(err,result){!err&&result.plugins&&_this.setState({plugins:result.plugins})}))}},{key:"componentDidUpdate",value:function(){helpers_default().UI.initSidebar(),helpers_default().UI.bindExpand()}},{key:"renderPlugins",value:function(){var _this$state=this.state,plugins=_this$state.plugins,sessionUser=_this$state.sessionUser,activeItem=_this$state.activeItem,activeSubItem=_this$state.activeSubItem;return react.createElement(SidebarItem,{text:"Plugins",icon:"extension",href:"/plugins",class:"navPlugins tether-plugins",hasSubmenu:plugins&&plugins.length>0,subMenuTarget:"plugins",active:"plugins"===activeItem},plugins&&plugins.length>0&&react.createElement(Nav_Submenu,{id:"plugins",subMenuOpen:"plugins"===activeItem},plugins.map((function(item){if(-1!==item.permissions.split(" ").indexOf(sessionUser.role))return react.createElement(Nav_SubmenuItem,{key:item.name,text:item.menu.main.name,icon:item.menu.main.icon,href:item.menu.main.link,active:activeSubItem===item.name})}))))}},{key:"render",value:function(){var _this$props=this.props,activeItem=_this$props.activeItem,activeSubItem=_this$props.activeSubItem,sessionUser=_this$props.sessionUser;return react.createElement("div",{className:"sidebar nopadding",style:{overflowX:"hidden",top:this.props.notice?"95px":"65px"},"data-scroll-opacitymax":"0.1"},react.createElement("div",{id:"side-nav-container",style:{minHeight:"calc(100% - 50px)"}},react.createElement("ul",{className:"side-nav"},sessionUser&&helpers_default().canUser("agent:*",!0)&&react.createElement(SidebarItem,{text:"Dashboard",icon:"dashboard",href:"/dashboard",class:"navHome",active:"dashboard"===activeItem}),sessionUser&&helpers_default().canUser("tickets:view")&&react.createElement(SidebarItem,{text:"Tickets",icon:"assignment",href:"/tickets",class:"navTickets no-ajaxy",hasSubmenu:!0,subMenuTarget:"tickets",active:"tickets"===activeItem},react.createElement(Nav_Submenu,{id:"tickets"},react.createElement(Nav_SubmenuItem,{text:"Active",icon:"timer",href:"/tickets/active",active:"tickets-active"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Assigned",icon:"assignment_ind",href:"/tickets/assigned",active:"tickets-assigned"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Unassigned",icon:"person_add_disabled",href:"/tickets/unassigned",active:"tickets-unassigned"===activeSubItem}),react.createElement(Nav_NavSeperator,null),react.createElement(Nav_SubmenuItem,{text:"New",icon:"",href:"/tickets/new",active:"tickets-new"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Pending",icon:"",href:"/tickets/pending",active:"tickets-pending"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Open",icon:"",href:"/tickets/open",active:"tickets-open"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Closed",icon:"",href:"/tickets/closed",active:"tickets-closed"===activeSubItem}))),react.createElement(SidebarItem,{text:"Messages",icon:"chat",href:"/messages",class:"navMessages",active:"messages"===activeItem}),sessionUser&&helpers_default().canUser("accounts:view")&&react.createElement(SidebarItem,{text:"Accounts",icon:"",href:"/accounts",class:"navAccounts",active:"accounts"===activeItem,subMenuTarget:"accounts",hasSubmenu:sessionUser&&helpers_default().canUser("agent:*",!0)},sessionUser&&helpers_default().canUser("agent:*",!0)&&react.createElement(Nav_Submenu,{id:"accounts"},react.createElement(Nav_SubmenuItem,{href:"/accounts/customers",text:"Customers",icon:"account_box",active:"accounts-customers"===activeSubItem}),sessionUser&&helpers_default().canUser("agent:*",!0)&&react.createElement(Nav_SubmenuItem,{href:"/accounts/agents",text:"Agents",icon:"account_circle",active:"accounts-agents"===activeSubItem}),sessionUser&&helpers_default().canUser("admin:*")&&react.createElement(Nav_SubmenuItem,{href:"/accounts/admins",text:"Admins",icon:"how_to_reg",active:"accounts-admins"===activeSubItem}))),sessionUser&&helpers_default().canUser("groups:view")&&react.createElement(SidebarItem,{text:"Customer Groups",icon:"supervisor_account",href:"/groups",class:"navGroups",active:"groups"===activeItem}),sessionUser&&helpers_default().canUser("teams:view")&&react.createElement(SidebarItem,{text:"Teams",icon:"wc",href:"/teams",class:"navTeams",active:"teams"===activeItem}),sessionUser&&helpers_default().canUser("departments:view")&&react.createElement(SidebarItem,{text:"Departments",icon:"domain",href:"/departments",class:"navTeams",active:"departments"===activeItem}),sessionUser&&helpers_default().canUser("reports:view")&&react.createElement(SidebarItem,{text:"Reports",icon:"assessment",href:"/reports/generate",class:"navReports no-ajaxy",hasSubmenu:!0,subMenuTarget:"reports",active:"reports"===activeItem},react.createElement(Nav_Submenu,{id:"reports"},react.createElement(Nav_SubmenuItem,{text:"Generate",icon:"timeline",href:"/reports/generate",active:"reports-generate"===activeSubItem}),react.createElement(Nav_NavSeperator,null),react.createElement(Nav_SubmenuItem,{text:"Group Breakdown",icon:"supervisor_account",href:"/reports/breakdown/group",active:"reports-breakdown-group"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"User Breakdown",icon:"perm_identity",href:"/reports/breakdown/user",active:"reports-breakdown-user"===activeSubItem}))),sessionUser&&helpers_default().canUser("notices:view")&&react.createElement(SidebarItem,{text:"Notices",icon:"campaign",href:"/notices",class:"navNotices",active:"notices"===activeItem}),sessionUser&&helpers_default().canUser("settings:edit")&&react.createElement(SidebarItem,{text:"Settings",icon:"settings",href:"/settings/general",class:"navSettings no-ajaxy",hasSubmenu:!0,subMenuTarget:"settings",active:"settings"===activeItem},react.createElement(Nav_Submenu,{id:"settings"},react.createElement(Nav_SubmenuItem,{text:"General",icon:"tune",href:"/settings",active:"settings-general"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Accounts",icon:"tune",href:"/settings/accounts",active:"settings-accounts"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Appearance",icon:"style",href:"/settings/appearance",active:"settings-appearance"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Tickets",icon:"assignment",href:"/settings/tickets",active:"settings-tickets"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Permissions",icon:"security",href:"/settings/permissions",active:"settings-permissions"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Mailer",icon:"email",href:"/settings/mailer",active:"settings-mailer"===activeSubItem}),react.createElement(Nav_SubmenuItem,{href:"/settings/elasticsearch",text:"Elasticsearch",icon:"search",active:"settings-elasticsearch"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Backup/Restore",icon:"archive",href:"/settings/backup",active:"settings-backup"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Server",icon:"dns",href:"/settings/server",active:"settings-server"===activeSubItem}),react.createElement(Nav_SubmenuItem,{text:"Legal",icon:"gavel",href:"/settings/legal",active:"settings-legal"===activeSubItem}),sessionUser&&helpers_default().canUser("settings:logs")&&react.createElement(Nav_SubmenuItem,{text:"Logs",icon:"remove_from_queue",href:"/settings/logs",hasSeperator:!0,active:"settings-logs"===activeSubItem}))),react.createElement(Nav_NavSeperator,null),react.createElement(SidebarItem,{href:"/about",icon:"help",text:"About",active:"about"===activeItem}))),react.createElement("div",{className:"side-nav-bottom-panel"},react.createElement("a",{id:"expand-menu",className:"no-ajaxy",href:"#"},react.createElement("i",{className:"material-icons"},"menu"),"Collapse Menu")))}}])&&Sidebar_defineProperties(Constructor.prototype,protoProps),staticProps&&Sidebar_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Sidebar}(react.Component);Sidebar.propTypes={updateNavChange:prop_types_default().func.isRequired,activeItem:prop_types_default().string.isRequired,activeSubItem:prop_types_default().string.isRequired,sessionUser:prop_types_default().object,plugins:prop_types_default().array,notice:prop_types_default().object};const Nav_Sidebar=(0,es.$j)((function(state){return{activeItem:state.sidebar.activeItem,activeSubItem:state.sidebar.activeSubItem,sessionUser:state.shared.sessionUser,notice:state.shared.notice}}),{updateNavChange})(Sidebar);function Button_typeof(obj){return Button_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Button_typeof(obj)}function Button_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Button_setPrototypeOf(o,p){return Button_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Button_setPrototypeOf(o,p)}function Button_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Button_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Button_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Button_possibleConstructorReturn(this,result)}}function Button_possibleConstructorReturn(self,call){if(call&&("object"===Button_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Button_getPrototypeOf(o){return Button_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Button_getPrototypeOf(o)}var Button=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Button_setPrototypeOf(subClass,superClass)}(Button,_React$Component);var Constructor,protoProps,staticProps,_super=Button_createSuper(Button);function Button(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Button),_super.call(this,props)}return Constructor=Button,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.waves()}},{key:"click",value:function(){this.button&&this.button.click()}},{key:"render",value:function(){var _this=this,_this$props=this.props,type=_this$props.type,small=_this$props.small,flat=_this$props.flat,style=_this$props.style,text=_this$props.text,icon=_this$props.icon,onClick=_this$props.onClick,waves=_this$props.waves,disabled=_this$props.disabled,extraClass=_this$props.extraClass,styleOverride=_this$props.styleOverride,hasDropdown=_this$props.hasDropdown,classBuild=(small?" md-btn-small ":"")+(flat?" md-btn-flat ":"")+(waves?" md-btn-wave ":"")+(style&&style&&flat?" md-btn-flat-"+style:style?" md-btn-"+style:"")+(disabled?" disabled ":"")+" "+extraClass,renderStyleOverride=styleOverride;return small&&(renderStyleOverride?(0,lodash.merge)(renderStyleOverride,{maxHeight:"27px"}):renderStyleOverride={maxHeight:"27px"},hasDropdown&&(0,lodash.merge)(renderStyleOverride,{paddingRight:"12px"}),icon&&(0,lodash.merge)(renderStyleOverride,{padding:"0 10px"})),react.createElement("button",{className:"uk-clearfix md-btn"+classBuild,onClick,type:type||"button",disabled,style:renderStyleOverride,ref:function(r){return _this.button=r}},icon&&react.createElement("i",{className:"material-icons",style:{fontSize:"18px",margin:"5px 0"}},icon),text&&react.createElement("div",{className:"uk-float-left uk-width-1-1 uk-text-center"}," ",text),hasDropdown&&react.createElement("i",{className:"material-icons",style:{fontSize:"18px",margin:"5px 0 0 5px"}},""))}}])&&Button_defineProperties(Constructor.prototype,protoProps),staticProps&&Button_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Button}(react.Component);Button.propTypes={type:prop_types_default().string,text:prop_types_default().string,icon:prop_types_default().string,flat:prop_types_default().bool,style:prop_types_default().string,styleOverride:prop_types_default().object,hasDropdown:prop_types_default().bool,small:prop_types_default().bool,waves:prop_types_default().bool,disabled:prop_types_default().bool,extraClass:prop_types_default().string,onClick:prop_types_default().func},Button.defaultProps={disabled:!1,hasDropdown:!1,flat:!1,waves:!0,type:"button"};const components_Button=Button;function BaseModal_typeof(obj){return BaseModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},BaseModal_typeof(obj)}function BaseModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function BaseModal_setPrototypeOf(o,p){return BaseModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},BaseModal_setPrototypeOf(o,p)}function BaseModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=BaseModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=BaseModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return BaseModal_possibleConstructorReturn(this,result)}}function BaseModal_possibleConstructorReturn(self,call){if(call&&("object"===BaseModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return BaseModal_assertThisInitialized(self)}function BaseModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function BaseModal_getPrototypeOf(o){return BaseModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},BaseModal_getPrototypeOf(o)}var BaseModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&BaseModal_setPrototypeOf(subClass,superClass)}(BaseModal,_React$Component);var Constructor,protoProps,staticProps,_super=BaseModal_createSuper(BaseModal);function BaseModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BaseModal),(_this=_super.call(this,props)).state={modal:null},_this.clearModal=_this.clearModal.bind(BaseModal_assertThisInitialized(_this)),_this}return Constructor=BaseModal,(protoProps=[{key:"componentDidMount",value:function(){var _this2=this;this.setState({modal:uikit_combined_min_default().modal(this.modal,this.props.options)},(function(){_this2.state.modal.show(),jquery_default()(_this2.modal).on("hide.uk.modal",_this2.clearModal)}))}},{key:"show",value:function(){this.state.modal&&this.state.modal.show()}},{key:"hide",value:function(){this.props.hideModal()}},{key:"clearModal",value:function(){this.props.clearModal()}},{key:"render",value:function(){var _this3=this;return react.createElement("div",{id:"uk-modal",className:"uk-modal"+(this.props.parentExtraClass?" "+this.props.parentExtraClass:""),ref:function(i){return _this3.modal=i},"data-modal-tag":this.props.modalTag},react.createElement("div",{className:"uk-modal-dialog"+(this.props.large?" uk-modal-dialog-large":"")+(this.props.extraClass?" "+this.props.extraClass:"")},this.props.children))}}])&&BaseModal_defineProperties(Constructor.prototype,protoProps),staticProps&&BaseModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),BaseModal}(react.Component);BaseModal.propTypes={large:prop_types_default().bool,options:prop_types_default().object,modalTag:prop_types_default().string,hideModal:prop_types_default().func.isRequired,clearModal:prop_types_default().func.isRequired,parentExtraClass:prop_types_default().string,extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const Modals_BaseModal=(0,es.$j)(null,{hideModal,clearModal})(BaseModal);function NoticeAlertModal_typeof(obj){return NoticeAlertModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},NoticeAlertModal_typeof(obj)}function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function NoticeAlertModal_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function NoticeAlertModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NoticeAlertModal_setPrototypeOf(o,p){return NoticeAlertModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},NoticeAlertModal_setPrototypeOf(o,p)}function NoticeAlertModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=NoticeAlertModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NoticeAlertModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NoticeAlertModal_possibleConstructorReturn(this,result)}}function NoticeAlertModal_possibleConstructorReturn(self,call){if(call&&("object"===NoticeAlertModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NoticeAlertModal_getPrototypeOf(o){return NoticeAlertModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},NoticeAlertModal_getPrototypeOf(o)}var NoticeAlertModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NoticeAlertModal_setPrototypeOf(subClass,superClass)}(NoticeAlertModal,_React$Component);var Constructor,protoProps,staticProps,_super=NoticeAlertModal_createSuper(NoticeAlertModal);function NoticeAlertModal(){return NoticeAlertModal_classCallCheck(this,NoticeAlertModal),_super.apply(this,arguments)}return Constructor=NoticeAlertModal,(protoProps=[{key:"onConfirmClick",value:function(e){e.preventDefault();var expiresDate=new Date;expiresDate.setDate(expiresDate.getDate()+1),js_cookie_default().set(this.props.noticeCookieName,"false",{expires:expiresDate}),this.props.hideModal("NOTICE_ALERT")}},{key:"render",value:function(){var _this=this,_this$props=this.props,notice=_this$props.notice,dateFormat=_this$props.shortDateFormat+", "+_this$props.timeFormat;return react.createElement(Modals_BaseModal,_extends({},this.props,{options:{bgclose:!1},large:!0}),react.createElement("div",null,react.createElement("div",{style:{width:"100%",height:"50px",backgroundColor:notice.color,marginBottom:"5px",position:"absolute",top:0,left:0,padding:"7px 25px"}},react.createElement("h4",{style:{fontSize:"24px",marginTop:"7px",fontWeight:"300",color:notice.fontColor}},notice.name)),react.createElement("div",{style:{paddingBottom:"25px"}},react.createElement("p",{style:{marginTop:"50px",color:"#222",fontSize:"18px",paddingBottom:"15px"}},helpers_default().formatDate(notice.activeDate,dateFormat),react.createElement("br",null),"Important: ",notice.message),react.createElement(components_Button,{text:"Confirm",flat:!0,style:"success",extraClass:"uk-float-right",styleOverride:{marginBottom:0},waves:!0,onClick:function(e){return _this.onConfirmClick(e)}}))))}}])&&NoticeAlertModal_defineProperties(Constructor.prototype,protoProps),staticProps&&NoticeAlertModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NoticeAlertModal}(react.Component);NoticeAlertModal.propTypes={notice:prop_types_default().object.isRequired,noticeCookieName:prop_types_default().string.isRequired,shortDateFormat:prop_types_default().string.isRequired,timeFormat:prop_types_default().string.isRequired,hideModal:prop_types_default().func.isRequired};const Modals_NoticeAlertModal=(0,es.$j)(null,{hideModal})(NoticeAlertModal),tickets_fetchTickets=(0,createAction.Z)(FETCH_TICKETS.ACTION),tickets_createTicket=(0,createAction.Z)(CREATE_TICKET.ACTION),tickets_ticketUpdated=(0,createAction.Z)(TICKET_UPDATED.ACTION),tickets_deleteTicket=(0,createAction.Z)(DELETE_TICKET.ACTION),unloadTickets=(0,createAction.Z)(UNLOAD_TICKETS.ACTION,(payload=>payload),(()=>({thunk:!0}))),tickets_ticketEvent=(0,createAction.Z)(TICKET_EVENT.ACTION),tickets_createTicketType=(0,createAction.Z)(CREATE_TICKET_TYPE.ACTION,(input=>({name:input.name}))),tickets_deleteTicketType=((0,createAction.Z)(RENAME_TICKET_TYPE.ACTION,(input=>({name:input.name}))),(0,createAction.Z)(DELETE_TICKET_TYPE.ACTION,((id,newTypeId)=>({id,newTypeId})))),tickets_createPriority=(0,createAction.Z)(CREATE_PRIORITY.ACTION,(({name,overdueIn,htmlColor})=>({name,overdueIn,htmlColor}))),tickets_updatePriority=(0,createAction.Z)(UPDATE_PRIORITY.ACTION,(({id,name,overdueIn,htmlColor})=>({id,name,overdueIn,htmlColor}))),tickets_deletePriority=(0,createAction.Z)(DELETE_PRIORITY.ACTION,(({id,newPriority})=>({id,newPriority}))),tickets_getTagsWithPage=(0,createAction.Z)(GET_TAGS_WITH_PAGE.ACTION,(({limit,page})=>({limit,page}))),tagsUpdateCurrentPage=(0,createAction.Z)(TAGS_UPDATE_CURRENT_PAGE.ACTION,(currentPage=>({currentPage}))),tickets_createTag=(0,createAction.Z)(CREATE_TAG.ACTION,(({name,currentPage})=>({name,currentPage}))),tickets_transferToThirdParty=(0,createAction.Z)(TRANSFER_TO_THIRDPARTY.ACTION,(({uid})=>({uid})));function CreateTicketTypeModal_typeof(obj){return CreateTicketTypeModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateTicketTypeModal_typeof(obj)}function CreateTicketTypeModal_extends(){return CreateTicketTypeModal_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},CreateTicketTypeModal_extends.apply(this,arguments)}function CreateTicketTypeModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateTicketTypeModal_setPrototypeOf(o,p){return CreateTicketTypeModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},CreateTicketTypeModal_setPrototypeOf(o,p)}function CreateTicketTypeModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateTicketTypeModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateTicketTypeModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateTicketTypeModal_possibleConstructorReturn(this,result)}}function CreateTicketTypeModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateTicketTypeModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function CreateTicketTypeModal_getPrototypeOf(o){return CreateTicketTypeModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateTicketTypeModal_getPrototypeOf(o)}var CreateTicketTypeModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateTicketTypeModal_setPrototypeOf(subClass,superClass)}(CreateTicketTypeModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateTicketTypeModal_createSuper(CreateTicketTypeModal);function CreateTicketTypeModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateTicketTypeModal),(_this=_super.call(this,props)).state={typeName:""},_this}return Constructor=CreateTicketTypeModal,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs(),helpers_default().formvalidator()}},{key:"onTypeNameChanged",value:function(e){this.setState({typeName:e.target.value})}},{key:"onCreateTicketTypeSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!0;this.props.createTicketType({name:this.state.typeName})}},{key:"render",value:function(){var _this2=this;return react.createElement(Modals_BaseModal,CreateTicketTypeModal_extends({},this.props,{ref:function(i){return _this2.base=i}}),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onCreateTicketTypeSubmit(e)}},react.createElement("div",null,react.createElement("h2",{className:"nomargin mb-5"},"Create Ticket Type"),react.createElement("p",{className:"uk-text-small uk-text-muted"},"Create a ticket type"),react.createElement("label",{htmlFor:"typeName"},"Type name"),react.createElement("input",{value:this.state.typeName,onChange:function(e){return _this2.onTypeNameChanged(e)},type:"text",className:"md-input",name:"typeName","data-validation":"length","data-validation-length":"min3","data-validation-error-msg":"Please enter a valid type name. Type name must contain at least 3 characters"})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Create",style:"success",type:"submit"}))))}}])&&CreateTicketTypeModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateTicketTypeModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateTicketTypeModal}(react.Component);CreateTicketTypeModal.propTypes={onTypeCreated:prop_types_default().func,createTicketType:prop_types_default().func.isRequired};const Modals_CreateTicketTypeModal=(0,es.$j)(null,{createTicketType:tickets_createTicketType})(CreateTicketTypeModal);function SingleSelect_typeof(obj){return SingleSelect_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SingleSelect_typeof(obj)}function SingleSelect_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SingleSelect_setPrototypeOf(o,p){return SingleSelect_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},SingleSelect_setPrototypeOf(o,p)}function SingleSelect_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SingleSelect_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SingleSelect_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SingleSelect_possibleConstructorReturn(this,result)}}function SingleSelect_possibleConstructorReturn(self,call){if(call&&("object"===SingleSelect_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return SingleSelect_assertThisInitialized(self)}function SingleSelect_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function SingleSelect_getPrototypeOf(o){return SingleSelect_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},SingleSelect_getPrototypeOf(o)}var SingleSelect=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SingleSelect_setPrototypeOf(subClass,superClass)}(SingleSelect,_React$Component);var Constructor,protoProps,staticProps,_super=SingleSelect_createSuper(SingleSelect);function SingleSelect(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SingleSelect),(_this=_super.call(this,props)).value="",_this.props.defaultValue&&(_this.value=_this.props.defaultValue),_this.onSelectChange=_this.onSelectChange.bind(SingleSelect_assertThisInitialized(_this)),_this}return Constructor=SingleSelect,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.selectize();var $select=jquery_default()(this.select);this.updateSelectizeItems(),$select.on("change",this.onSelectChange),this.props.multiple&&(this.value=[]),this.props.defaultValue&&(this.value=this.props.defaultValue)}},{key:"componentWillUnmount",value:function(){var selectize=this.select.selectize;selectize&&selectize.destroy()}},{key:"onSelectChange",value:function(e){""!==e.target.value&&(this.props.multiple?this.value=this.select.selectize.items:this.value=e.target.value,this.value&&this.props.onSelectChange&&this.props.onSelectChange(e))}},{key:"componentDidUpdate",value:function(prevProps){prevProps.defaultValue===this.props.defaultValue||this.value||(this.value=this.props.defaultValue),this.updateSelectizeItems()}},{key:"updateSelectizeItems",value:function(){if(this.select&&this.select.selectize){var self=this;(0,lodash.each)(this.select.selectize.options,(function(i){-1===(0,lodash.findIndex)(self.props.items,(function(o){return i.value===o.value}))&&self.select.selectize.removeOption(i.value,!0)})),this.select.selectize.addOption(this.props.items),this.select.selectize.refreshOptions(!1),this.select.selectize.addItem(this.value,!0),(0,lodash.each)(this.props.items,(function(i){self.select.selectize.updateOption(i.value,i)})),this.props.disabled?this.select.selectize.disable():this.select.selectize.enable()}}},{key:"render",value:function(){var _this2=this,width="100%";this.props.width&&(width=this.props.width);var value=this.props.multiple&&!(0,lodash.isArray)(this.value)?[this.value]:this.value;return react.createElement("div",{className:"uk-clearfix"},react.createElement("div",{className:"uk-width-1-1 uk-float-right",style:{paddingRight:"10px",width}},react.createElement("select",{className:"selectize",ref:function(select){_this2.select=select},"data-md-selectize-inline":!0,"data-md-selectize-notextbox":this.props.showTextbox?"false":"true",value,onChange:function(){},disabled:this.props.disabled,"data-md-selectize-bottom":"true",multiple:this.props.multiple,"data-md-selectize-top-offset":"-32"})))}}])&&SingleSelect_defineProperties(Constructor.prototype,protoProps),staticProps&&SingleSelect_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SingleSelect}(react.Component);SingleSelect.propTypes={width:prop_types_default().string,items:prop_types_default().arrayOf(prop_types_default().object).isRequired,multiple:prop_types_default().bool,showTextbox:prop_types_default().bool,defaultValue:prop_types_default().string,disabled:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),onSelectChange:prop_types_default().func},SingleSelect.defaultProps={showTextbox:!0,disabled:!1,multiple:!1};const components_SingleSelect=SingleSelect;function DeleteTicketTypeModal_typeof(obj){return DeleteTicketTypeModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DeleteTicketTypeModal_typeof(obj)}function DeleteTicketTypeModal_extends(){return DeleteTicketTypeModal_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},DeleteTicketTypeModal_extends.apply(this,arguments)}function DeleteTicketTypeModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DeleteTicketTypeModal_setPrototypeOf(o,p){return DeleteTicketTypeModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},DeleteTicketTypeModal_setPrototypeOf(o,p)}function DeleteTicketTypeModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DeleteTicketTypeModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DeleteTicketTypeModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DeleteTicketTypeModal_possibleConstructorReturn(this,result)}}function DeleteTicketTypeModal_possibleConstructorReturn(self,call){if(call&&("object"===DeleteTicketTypeModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DeleteTicketTypeModal_getPrototypeOf(o){return DeleteTicketTypeModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},DeleteTicketTypeModal_getPrototypeOf(o)}var DeleteTicketTypeModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DeleteTicketTypeModal_setPrototypeOf(subClass,superClass)}(DeleteTicketTypeModal,_React$Component);var Constructor,protoProps,staticProps,_super=DeleteTicketTypeModal_createSuper(DeleteTicketTypeModal);function DeleteTicketTypeModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DeleteTicketTypeModal),(_this=_super.call(this,props)).state={selectedType:""},_this}return Constructor=DeleteTicketTypeModal,(protoProps=[{key:"getTicketTypes",value:function(){return this.props.settings&&this.props.settings.get("ticketTypes")?this.props.settings.get("ticketTypes").toArray():[]}},{key:"onSelectChanged",value:function(e){this.setState({selectedType:e.target.value})}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!this.state.selectedType)return helpers_default().UI.showSnackbar("Unable to get new ticket type. Aborting...",!0),!0;this.props.deleteTicketType(this.props.type.get("_id"),this.state.selectedType)}},{key:"render",value:function(){var _this2=this,type=this.props.type,mappedTypes=this.getTicketTypes().filter((function(obj){return type.get("name")!==obj.get("name")})).map((function(item){return{text:item.get("name"),value:item.get("_id")}}));return react.createElement(Modals_BaseModal,DeleteTicketTypeModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("h2",null,"Remove Ticket Type"),react.createElement("span",null,"Please select the ticket type you wish to reassign tickets to in order to delete this ticket type.")),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"100%"}},react.createElement("label",{className:"uk-form-label nopadding nomargin"},"Type"),react.createElement(components_SingleSelect,{showTextbox:!1,items:mappedTypes,onSelectChange:function(e){return _this2.onSelectChanged(e)},value:this.state.selectedType}))),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("span",{className:"uk-text-danger"},"WARNING: This will change all tickets with type ",react.createElement("strong",null,type.get("name"))," to the selected ticket type.",react.createElement("br",null),react.createElement("strong",null,"This is permanent!"))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Cancel",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Delete",style:"danger",flat:!0,type:"submit"}))))}}])&&DeleteTicketTypeModal_defineProperties(Constructor.prototype,protoProps),staticProps&&DeleteTicketTypeModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DeleteTicketTypeModal}(react.Component);DeleteTicketTypeModal.propTypes={type:prop_types_default().object.isRequired,settings:prop_types_default().object.isRequired,deleteTicketType:prop_types_default().func.isRequired};const Modals_DeleteTicketTypeModal=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{deleteTicketType:tickets_deleteTicketType})(DeleteTicketTypeModal),groups_fetchGroups=(0,createAction.Z)(FETCH_GROUPS.ACTION,(payload=>payload),(()=>({thunk:!0}))),groups_createGroup=(0,createAction.Z)(CREATE_GROUP.ACTION),groups_updateGroup=(0,createAction.Z)(UPDATE_GROUP.ACTION),groups_deleteGroup=(0,createAction.Z)(DELETE_GROUP.ACTION,(payload=>payload),(()=>({thunk:!0}))),unloadGroups=(0,createAction.Z)(UNLOAD_GROUPS.ACTION,(payload=>payload),(()=>({thunk:!0}))),accounts_fetchAccounts=(0,createAction.Z)(FETCH_ACCOUNTS.ACTION,(payload=>payload),(()=>({thunk:!0}))),accounts_fetchAccountsCreateTicket=(0,createAction.Z)(FETCH_ACCOUNTS_CREATE_TICKET.ACTION,(payload=>payload),(()=>({thunk:!0}))),accounts_createAccount=(0,createAction.Z)(CREATE_ACCOUNT.ACTION),accounts_saveEditAccount=(0,createAction.Z)(SAVE_EDIT_ACCOUNT.ACTION),accounts_deleteAccount=(0,createAction.Z)(DELETE_ACCOUNT.ACTION),accounts_enableAccount=(0,createAction.Z)(ENABLE_ACCOUNT.ACTION),unloadAccounts=(0,createAction.Z)(UNLOAD_ACCOUNTS.ACTION,(payload=>payload),(()=>({thunk:!0})));function FilterTicketsModal_typeof(obj){return FilterTicketsModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},FilterTicketsModal_typeof(obj)}function FilterTicketsModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function FilterTicketsModal_setPrototypeOf(o,p){return FilterTicketsModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},FilterTicketsModal_setPrototypeOf(o,p)}function FilterTicketsModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=FilterTicketsModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=FilterTicketsModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return FilterTicketsModal_possibleConstructorReturn(this,result)}}function FilterTicketsModal_possibleConstructorReturn(self,call){if(call&&("object"===FilterTicketsModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function FilterTicketsModal_getPrototypeOf(o){return FilterTicketsModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},FilterTicketsModal_getPrototypeOf(o)}var FilterTicketsModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&FilterTicketsModal_setPrototypeOf(subClass,superClass)}(FilterTicketsModal,_React$Component);var Constructor,protoProps,staticProps,_super=FilterTicketsModal_createSuper(FilterTicketsModal);function FilterTicketsModal(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FilterTicketsModal),_super.call(this,props)}return Constructor=FilterTicketsModal,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs(),this.props.fetchGroups(),this.props.fetchAccounts({page:0,limit:-1,type:"agents",showDeleted:!1})}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadGroups(),this.props.unloadAccounts()}},{key:"onSubmit",value:function(e){e.preventDefault();var startDate=e.target.filterDate_Start.value,endDate=e.target.filterDate_End.value,subject=e.target.subject.value,statuses=this.statusSelect.value,tags=this.tagsSelect.value,types=this.typesSelect.value,groups=this.groupSelect.value,assignees=this.assigneeSelect.value,queryString="?f=1";startDate&&(queryString+="&ds=".concat(startDate)),endDate&&(queryString+="&de=".concat(endDate)),subject&&(queryString+="&fs=".concat(subject)),(0,lodash.each)(statuses,(function(i){queryString+="&st=".concat(i)})),(0,lodash.each)(types,(function(i){queryString+="&tt=".concat(i)})),(0,lodash.each)(tags,(function(i){queryString+="&tag=".concat(i)})),(0,lodash.each)(groups,(function(i){queryString+="&gp=".concat(i)})),(0,lodash.each)(assignees,(function(i){queryString+="&au=".concat(i)})),History.pushState(null,null,"/tickets/filter/".concat(queryString,"&r=").concat(Math.floor(99999*Math.random())+1)),this.props.hideModal()}},{key:"render",value:function(){var _this=this,tags=this.props.common.ticketTags.map((function(t){return{text:t.name,value:t._id}})),types=this.props.common.ticketTypes.map((function(t){return{text:t.name,value:t._id}})),groups=this.props.groupsState.groups.map((function(g){return{text:g.get("name"),value:g.get("_id")}})).toArray(),assignees=this.props.accountsState.accounts.map((function(a){return{text:a.get("fullname"),value:a.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,{options:{bgclose:!1}},react.createElement("h2",{style:{marginBottom:20}},"Ticket Filter"),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this.onSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Subject"),react.createElement("input",{type:"text",name:"subject",className:"md-input"})),react.createElement("div",{className:"uk-grid uk-grid-collapse uk-margin-small-bottom"},react.createElement("div",{className:"uk-width-1-2",style:{padding:"0 15px 0 0"}},react.createElement("label",{htmlFor:"filterDate_Start",className:"uk-form-label nopadding nomargin"},"Date Start"),react.createElement("input",{id:"filterDate_Start",className:"md-input",name:"filterDate_Start",type:"text","data-uk-datepicker":"{format:'"+helpers_default().getShortDateFormat()+"'}"})),react.createElement("div",{className:"uk-width-1-2",style:{padding:"0 0 0 15px"}},react.createElement("label",{htmlFor:"filterDate_End",className:"uk-form-label nopadding nomargin"},"Date End"),react.createElement("input",{id:"filterDate_End",className:"md-input",name:"filterDate_End",type:"text","data-uk-datepicker":"{format:'"+helpers_default().getShortDateFormat()+"'}"}))),react.createElement("div",{className:"uk-grid uk-grid-collapse uk-margin-small-bottom"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("label",{htmlFor:"filterStatus",className:"uk-form-label",style:{paddingBottom:0,marginBottom:0}},"Status"),react.createElement(components_SingleSelect,{items:[{text:"New",value:"0"},{text:"Open",value:"1"},{text:"Pending",value:"2"},{text:"Closed",value:"3"}],showTextbox:!1,multiple:!0,ref:function(r){return _this.statusSelect=r}}))),react.createElement("div",{className:"uk-grid uk-grid-collapse uk-margin-small-bottom"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("label",{htmlFor:"filterStatus",className:"uk-form-label",style:{paddingBottom:0,marginBottom:0}},"Ticket Tags"),react.createElement(components_SingleSelect,{items:tags,showTextbox:!0,multiple:!0,ref:function(r){return _this.tagsSelect=r}}))),react.createElement("div",{className:"uk-grid uk-grid-collapse uk-margin-small-bottom"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("label",{htmlFor:"filterStatus",className:"uk-form-label",style:{paddingBottom:0,marginBottom:0}},"Ticket Type"),react.createElement(components_SingleSelect,{items:types,showTextbox:!1,multiple:!0,ref:function(r){return _this.typesSelect=r}}))),react.createElement("div",{className:"uk-grid uk-grid-collapse uk-margin-small-bottom"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("label",{htmlFor:"filterStatus",className:"uk-form-label",style:{paddingBottom:0,marginBottom:0}},"Assignee"),react.createElement(components_SingleSelect,{items:assignees,showTextbox:!1,multiple:!0,ref:function(r){return _this.assigneeSelect=r}}))),react.createElement("div",{className:"uk-grid uk-grid-collapse uk-margin-small-bottom"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("label",{htmlFor:"filterStatus",className:"uk-form-label",style:{paddingBottom:0,marginBottom:0}},"Groups"),react.createElement(components_SingleSelect,{items:groups,showTextbox:!1,multiple:!0,ref:function(r){return _this.groupSelect=r}}))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Cancel",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Apply Filter",style:"primary",flat:!1,type:"submit"}))))}}])&&FilterTicketsModal_defineProperties(Constructor.prototype,protoProps),staticProps&&FilterTicketsModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),FilterTicketsModal}(react.Component);FilterTicketsModal.propTypes={common:prop_types_default().object.isRequired,groupsState:prop_types_default().object.isRequired,accountsState:prop_types_default().object.isRequired,hideModal:prop_types_default().func.isRequired,fetchGroups:prop_types_default().func.isRequired,unloadGroups:prop_types_default().func.isRequired,fetchAccounts:prop_types_default().func.isRequired,unloadAccounts:prop_types_default().func.isRequired};const Modals_FilterTicketsModal=(0,es.$j)((function(state){return{common:state.common,groupsState:state.groupsState,accountsState:state.accountsState}}),{hideModal,fetchGroups:groups_fetchGroups,unloadGroups,fetchAccounts:accounts_fetchAccounts,unloadAccounts})(FilterTicketsModal);var some=__webpack_require__(208),some_default=__webpack_require__.n(some),velocity_min=__webpack_require__(17),velocity_min_default=__webpack_require__.n(velocity_min);const settings_fetchSettings=(0,createAction.Z)(FETCH_SETTINGS.ACTION),settings_updateSetting=(0,createAction.Z)(UPDATE_SETTING.ACTION,(input=>({name:input.name,value:input.value,stateName:input.stateName,noSnackbar:!!input.noSnackbar&&input.noSnackbar})),(()=>({thunk:!0}))),settings_updateMultipleSettings=(0,createAction.Z)(UPDATE_MULTIPLE_SETTINGS.ACTION),settings_updateColorScheme=(0,createAction.Z)(UPDATE_COLORSCHEME.ACTION),fetchMongoDBTools=(0,createAction.Z)(FETCH_MONGODB_TOOLS.ACTION),settings_fetchBackups=(0,createAction.Z)(FETCH_BACKUPS.ACTION),settings_backupNow=(0,createAction.Z)(BACKUP_NOW.ACTION),settings_fetchDeletedTickets=(0,createAction.Z)(FETCH_DELETED_TICKETS.ACTION),settings_restoreDeletedTicket=(0,createAction.Z)(RESTORE_DELETED_TICKET.ACTION),settings_permDeleteTicket=(0,createAction.Z)(PERM_DELETE_TICKET.ACTION),changeDeletedTicketsPage=(0,createAction.Z)(CHANGE_DELETED_TICKETS_PAGE.ACTION,(pageIndex=>({pageIndex}))),settings_createRole=(0,createAction.Z)(CREATE_ROLE.ACTION),settings_updatePermissions=(0,createAction.Z)(UPDATE_PERMISSIONS.ACTION),settings_deleteRole=(0,createAction.Z)(DELETE_ROLE.ACTION);function AddPriorityToTypeModal_typeof(obj){return AddPriorityToTypeModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},AddPriorityToTypeModal_typeof(obj)}function AddPriorityToTypeModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function AddPriorityToTypeModal_setPrototypeOf(o,p){return AddPriorityToTypeModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},AddPriorityToTypeModal_setPrototypeOf(o,p)}function AddPriorityToTypeModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=AddPriorityToTypeModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=AddPriorityToTypeModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return AddPriorityToTypeModal_possibleConstructorReturn(this,result)}}function AddPriorityToTypeModal_possibleConstructorReturn(self,call){if(call&&("object"===AddPriorityToTypeModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function AddPriorityToTypeModal_getPrototypeOf(o){return AddPriorityToTypeModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},AddPriorityToTypeModal_getPrototypeOf(o)}var AddPriorityToTypeModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&AddPriorityToTypeModal_setPrototypeOf(subClass,superClass)}(AddPriorityToTypeModal,_React$Component);var Constructor,protoProps,staticProps,_super=AddPriorityToTypeModal_createSuper(AddPriorityToTypeModal);function AddPriorityToTypeModal(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AddPriorityToTypeModal),_super.call(this,props)}return Constructor=AddPriorityToTypeModal,(protoProps=[{key:"getPriorities",value:function(){return this.props.settings&&this.props.settings.get("priorities")?this.props.settings.get("priorities").toArray():[]}},{key:"onAddClick",value:function(e,type,priority){var _this=this;e.preventDefault();var $addButton=jquery_default()(e.target),$check=$addButton.siblings("i.material-icons");client_api.tickets.addPriorityToType({typeId:type.get("_id"),priority:priority.get("_id")}).then((function(){velocity_min_default()($addButton,{opacity:0},{duration:350,complete:function(){$addButton.addClass("hide")}}),$check.length>0&&velocity_min_default()($check,{opacity:1},{delay:360,duration:200,begin:function(){$check.show()}}),_this.props.fetchSettings()})).catch((function(error){var errorText=error.response.data.error;logger.error(errorText,error.response),helpers_default().UI.showSnackbar("Error: ".concat(errorText),!0)}))}},{key:"render",value:function(){var _this2=this,type=this.props.type;return react.createElement(Modals_BaseModal,null,react.createElement("form",{className:"uk-form-stacked"},react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("h2",null,"Add Priorities"),react.createElement("span",null,"Please select the priorities you wish to add to type: ",type.get("name"))),react.createElement("div",{className:"priority-loop zone"},this.getPriorities().map((function(priority){return some_default()(type.get("priorities").toJS(),priority.toObject())?react.createElement("div",{key:priority.get("_id"),className:"z-box uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h5",{style:{color:priority.get("htmlColor"),fontWeight:"bold"}},priority.get("name")),react.createElement("p",{className:"uk-text-muted"},"SLA Overdue: ",react.createElement("strong",null,priority.get("durationFormatted")))),react.createElement("div",{className:"uk-float-right"},react.createElement("i",{className:"material-icons uk-text-success mt-10 mr-15",style:{fontSize:"28px"}},"check"))):react.createElement("div",{key:priority.get("_id"),className:"z-box uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h5",{style:{color:priority.get("htmlColor"),fontWeight:"bold"}},priority.get("name")),react.createElement("p",{className:"uk-text-muted"},"SLA Overdue: ",react.createElement("strong",null,priority.get("durationFormatted")))),react.createElement("div",{className:"uk-float-right"},react.createElement("a",{type:"button",className:"uk-button uk-button-success mt-10 mr-10 no-ajaxy",onClick:function(e){return _this2.onAddClick(e,type,priority)}},"Add"),react.createElement("i",{className:"material-icons uk-text-success mt-10 mr-15",style:{display:"none",opacity:0,fontSize:"28px"}},"check")))}))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{type:"button",flat:!0,waves:!0,text:"Close",extraClass:"uk-modal-close"}))))}}])&&AddPriorityToTypeModal_defineProperties(Constructor.prototype,protoProps),staticProps&&AddPriorityToTypeModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AddPriorityToTypeModal}(react.Component);AddPriorityToTypeModal.propTypes={settings:prop_types_default().object.isRequired,type:prop_types_default().object.isRequired,fetchSettings:prop_types_default().func.isRequired};const Modals_AddPriorityToTypeModal=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{fetchSettings:settings_fetchSettings})(AddPriorityToTypeModal);function ColorSelector_typeof(obj){return ColorSelector_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},ColorSelector_typeof(obj)}function ColorSelector_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ColorSelector_setPrototypeOf(o,p){return ColorSelector_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},ColorSelector_setPrototypeOf(o,p)}function ColorSelector_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=ColorSelector_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=ColorSelector_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return ColorSelector_possibleConstructorReturn(this,result)}}function ColorSelector_possibleConstructorReturn(self,call){if(call&&("object"===ColorSelector_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function ColorSelector_getPrototypeOf(o){return ColorSelector_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ColorSelector_getPrototypeOf(o)}var ColorSelector=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&ColorSelector_setPrototypeOf(subClass,superClass)}(ColorSelector,_React$Component);var Constructor,protoProps,staticProps,_super=ColorSelector_createSuper(ColorSelector);function ColorSelector(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ColorSelector),(_this=_super.call(this,props)).state={selectedColor:""},_this}return Constructor=ColorSelector,staticProps=[{key:"getRandomColor",value:function(){for(var color="#",i=0;i<6;i++)color+="0123456789ABCDEF"[Math.floor(16*Math.random())];return color}},{key:"getContrast",value:function(hexcolor){if(3===(hexcolor=hexcolor.replace("#","")).length){var v=hexcolor[0];hexcolor=hexcolor+v+v+v}return(299*parseInt(hexcolor.substr(0,2),16)+587*parseInt(hexcolor.substr(2,2),16)+114*parseInt(hexcolor.substr(4,2),16))/1e3>=128?"#444":"#f7f8fa"}}],(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs(),this.setState({selectedColor:this.props.defaultColor},this.updateColorButton)}},{key:"componentDidUpdate",value:function(prevProps){this.props.defaultColor!==prevProps.defaultColor&&this.setState({selectedColor:this.props.defaultColor},this.updateColorButton)}},{key:"generateRandomColor",value:function(event){var _this2=this;if(event.preventDefault(),jquery_default()(event.target).length>0){var color=ColorSelector.getRandomColor();this.props.onChange&&(event.target.value=color,this.props.onChange(event)),this.setState({selectedColor:color},(function(){_this2.updateColorButton()}))}}},{key:"updateColorButton",value:function(){var fgColor=ColorSelector.getContrast(this.state.selectedColor.substring(1));jquery_default()(this.colorButton).css({background:this.state.selectedColor,color:fgColor})}},{key:"onInputValueChange",value:function(e){var val=e.target.value;this.props.onChange&&this.props.onChange(e),this.setState({selectedColor:val},this.updateColorButton)}},{key:"revertColor",value:function(){this.setState({selectedColor:this.props.defaultColor},this.updateColorButton)}},{key:"render",value:function(){var _this3=this;return react.createElement("div",{className:this.props.parentClass},react.createElement("div",{className:"uk-float-left uk-width-1-4"},react.createElement("button",{ref:function(colorButton){_this3.colorButton=colorButton},className:"uk-button uk-button-small uk-color-button mr-5 mt-10",style:{float:"right"},onClick:function(e){_this3.generateRandomColor(e)}},react.createElement("i",{className:"material-icons"},"refresh"))),react.createElement("div",{className:"md-input-wrapper uk-float-left md-input-filled",style:{width:this.props.hideRevert?"70%":"50%"}},react.createElement("label",null,"Color"),this.props.validationEnabled&&react.createElement("input",{name:this.props.inputName?this.props.inputName:"",type:"text",className:"md-input",value:this.state.selectedColor,onChange:function(e){_this3.onInputValueChange(e)},"data-validation":"custom","data-validation-regexp":"^\\#([0-9a-fA-F]){3,6}$","data-validation-error-msg":"Invalid HEX Color"}),!this.props.validationEnabled&&react.createElement("input",{name:this.props.inputName?this.props.inputName:"",type:"text",className:"md-input",value:this.state.selectedColor,onChange:function(e){_this3.onInputValueChange(e)}}),react.createElement("div",{className:"md-input-bar"})),!this.props.hideRevert&&react.createElement("button",{className:"md-btn md-btn-small md-btn-flat mt-10 uk-float-right uk-width-1-4",onClick:function(){_this3.revertColor()}},"Revert"))}}])&&ColorSelector_defineProperties(Constructor.prototype,protoProps),staticProps&&ColorSelector_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ColorSelector}(react.Component);ColorSelector.propTypes={inputName:prop_types_default().string,defaultColor:prop_types_default().string.isRequired,hideRevert:prop_types_default().bool,parentClass:prop_types_default().string,onChange:prop_types_default().func,validationEnabled:prop_types_default().bool},ColorSelector.defaultProps={defaultColor:"#878982",hideRevert:!1,validationEnabled:!1};const components_ColorSelector=ColorSelector;function CreatePriorityModal_typeof(obj){return CreatePriorityModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreatePriorityModal_typeof(obj)}var CreatePriorityModal_class,CreatePriorityModal_class2,CreatePriorityModal_descriptor,CreatePriorityModal_descriptor2,CreatePriorityModal_descriptor3;function CreatePriorityModal_extends(){return CreatePriorityModal_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},CreatePriorityModal_extends.apply(this,arguments)}function CreatePriorityModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function CreatePriorityModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreatePriorityModal_setPrototypeOf(o,p){return CreatePriorityModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},CreatePriorityModal_setPrototypeOf(o,p)}function CreatePriorityModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreatePriorityModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreatePriorityModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreatePriorityModal_possibleConstructorReturn(this,result)}}function CreatePriorityModal_possibleConstructorReturn(self,call){if(call&&("object"===CreatePriorityModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreatePriorityModal_assertThisInitialized(self)}function CreatePriorityModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreatePriorityModal_getPrototypeOf(o){return CreatePriorityModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},CreatePriorityModal_getPrototypeOf(o)}function CreatePriorityModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var CreatePriorityModal=(0,mobxreact_esm.Pi)((CreatePriorityModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreatePriorityModal_setPrototypeOf(subClass,superClass)}(CreatePriorityModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreatePriorityModal_createSuper(CreatePriorityModal);function CreatePriorityModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreatePriorityModal),CreatePriorityModal_initializerDefineProperty(_this=_super.call(this,props),"name",CreatePriorityModal_descriptor,CreatePriorityModal_assertThisInitialized(_this)),CreatePriorityModal_initializerDefineProperty(_this,"overdueIn",CreatePriorityModal_descriptor2,CreatePriorityModal_assertThisInitialized(_this)),CreatePriorityModal_initializerDefineProperty(_this,"htmlColor",CreatePriorityModal_descriptor3,CreatePriorityModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(CreatePriorityModal_assertThisInitialized(_this)),_this}return Constructor=CreatePriorityModal,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs(),helpers_default().formvalidator()}},{key:"onCreatePrioritySubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!0;this.props.createPriority({name:this.name,overdueIn:this.overdueIn,htmlColor:this.htmlColor})}},{key:"render",value:function(){var _this2=this;return react.createElement(Modals_BaseModal,CreatePriorityModal_extends({},this.props,{ref:function(i){return _this2.base=i}}),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onCreatePrioritySubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("h2",null,"Create Priority")),react.createElement("div",null,react.createElement("div",{className:"uk-clearfix"},react.createElement("div",{className:"z-box uk-grid uk-grid-collpase uk-clearfix"},react.createElement("div",{className:"uk-width-1-3"},react.createElement("label",null,"Priority Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.name=e.target.value},"data-validation":"length","data-validation-length":"min3","data-validation-error-msg":"Invalid name (3+ characters)"})),react.createElement("div",{className:"uk-width-1-3"},react.createElement("label",null,"SLA Overdue (minutes)"),react.createElement("input",{type:"text",className:"md-input",value:this.overdueIn,onChange:function(e){return _this2.overdueIn=e.target.value},"data-validation":"number","data-validation-allowing":"range[1;525600]","data-validation-error-msg":"Invalid SLA Time (1-525600)"})),react.createElement("div",{className:"uk-width-1-3"},react.createElement(components_ColorSelector,{hideRevert:!0,defaultColor:"#29B995",validationEnabled:!0,onChange:function(e){return _this2.htmlColor=e.target.value}}))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Cancel",type:"button",extraClass:"uk-modal-close",flat:!0,waves:!0}),react.createElement(components_Button,{text:"Create",type:"submit",flat:!0,waves:!0,style:"success"}))))))}}])&&CreatePriorityModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreatePriorityModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreatePriorityModal}(react.Component),CreatePriorityModal_descriptor=CreatePriorityModal_applyDecoratedDescriptor(CreatePriorityModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreatePriorityModal_descriptor2=CreatePriorityModal_applyDecoratedDescriptor(CreatePriorityModal_class2.prototype,"overdueIn",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2880}}),CreatePriorityModal_descriptor3=CreatePriorityModal_applyDecoratedDescriptor(CreatePriorityModal_class2.prototype,"htmlColor",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"#29B995"}}),CreatePriorityModal_class=CreatePriorityModal_class2))||CreatePriorityModal_class;CreatePriorityModal.propTypes={onPriorityCreated:prop_types_default().func,createPriority:prop_types_default().func.isRequired};const Modals_CreatePriorityModal=(0,es.$j)(null,{createPriority:tickets_createPriority})(CreatePriorityModal);function DeletePriorityModal_typeof(obj){return DeletePriorityModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DeletePriorityModal_typeof(obj)}function DeletePriorityModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DeletePriorityModal_setPrototypeOf(o,p){return DeletePriorityModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},DeletePriorityModal_setPrototypeOf(o,p)}function DeletePriorityModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DeletePriorityModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DeletePriorityModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DeletePriorityModal_possibleConstructorReturn(this,result)}}function DeletePriorityModal_possibleConstructorReturn(self,call){if(call&&("object"===DeletePriorityModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DeletePriorityModal_getPrototypeOf(o){return DeletePriorityModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},DeletePriorityModal_getPrototypeOf(o)}var DeletePriorityModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DeletePriorityModal_setPrototypeOf(subClass,superClass)}(DeletePriorityModal,_React$Component);var Constructor,protoProps,staticProps,_super=DeletePriorityModal_createSuper(DeletePriorityModal);function DeletePriorityModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DeletePriorityModal),(_this=_super.call(this,props)).state={selectedPriority:""},_this}return Constructor=DeletePriorityModal,(protoProps=[{key:"onSubmit",value:function(e){if(e.preventDefault(),!this.state.selectedPriority)return helpers_default().UI.showSnackbar("Unable to get new priority. Aborting...",!0),!0;this.props.deletePriority({id:this.props.priority.get("_id"),newPriority:this.state.selectedPriority})}},{key:"getPriorities",value:function(){return this.props.settings&&this.props.settings.get("priorities")?this.props.settings.get("priorities").toArray():[]}},{key:"onSelectChanged",value:function(e){this.setState({selectedPriority:e.target.value})}},{key:"render",value:function(){var _this2=this,priority=this.props.priority,mappedPriorities=this.getPriorities().filter((function(obj){return priority.get("name")!==obj.get("name")})).map((function(p){return{text:p.get("name"),value:p.get("_id")}}));return react.createElement(Modals_BaseModal,null,react.createElement("div",null,react.createElement("form",{onSubmit:function(e){return _this2.onSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("h2",null,"Remove Priority"),react.createElement("span",null,"Please select the priority you wish to reassign tickets to in order to delete this priority"),react.createElement("hr",{style:{margin:"10px 0"}})),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"100%"}},react.createElement("label",{className:"uk-form-label"},"Priority"),react.createElement(components_SingleSelect,{items:mappedPriorities,showTextbox:!1,width:"100%",value:this.state.selectedPriority,onSelectChange:function(e){return _this2.onSelectChanged(e)}}))),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("span",{className:"uk-text-danger"},"WARNING: This will change all tickets with a priority of: ",react.createElement("strong",null,priority.get("name"))," to the selected priority above.")),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{type:"button",flat:!0,waves:!0,text:"Cancel",extraClass:"uk-modal-close"}),react.createElement(components_Button,{type:"submit",flat:!0,waves:!0,text:"Delete",style:"danger"})))))}}])&&DeletePriorityModal_defineProperties(Constructor.prototype,protoProps),staticProps&&DeletePriorityModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DeletePriorityModal}(react.Component);DeletePriorityModal.propTypes={priority:prop_types_default().object.isRequired,settings:prop_types_default().object.isRequired,deletePriority:prop_types_default().func.isRequired};const Modals_DeletePriorityModal=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{deletePriority:tickets_deletePriority})(DeletePriorityModal);function CreateTagModal_typeof(obj){return CreateTagModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateTagModal_typeof(obj)}function CreateTagModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateTagModal_setPrototypeOf(o,p){return CreateTagModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},CreateTagModal_setPrototypeOf(o,p)}function CreateTagModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateTagModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateTagModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateTagModal_possibleConstructorReturn(this,result)}}function CreateTagModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateTagModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function CreateTagModal_getPrototypeOf(o){return CreateTagModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateTagModal_getPrototypeOf(o)}var CreateTagModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateTagModal_setPrototypeOf(subClass,superClass)}(CreateTagModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateTagModal_createSuper(CreateTagModal);function CreateTagModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateTagModal),(_this=_super.call(this,props)).state={name:""},_this}return Constructor=CreateTagModal,(protoProps=[{key:"onNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"onSubmit",value:function(e){if(e.preventDefault(),"settings"===this.props.page)return this.props.createTag({name:this.state.name,currentPage:this.props.currentPage});this.props.createTag({name:this.state.name})}},{key:"render",value:function(){var _this2=this;return react.createElement(Modals_BaseModal,null,react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onSubmit(e)}},react.createElement("div",null,react.createElement("h2",{className:"nomargin mb-5"},"Create Tag"),react.createElement("p",{className:"uk-text-muted"},"Tags categorize tickets, making it easy to identify issues"),react.createElement("label",null,"Tag Name"),react.createElement("input",{type:"text",className:"md-input",name:"name","data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a valid tag name. Tag name must contain at least 2 characters.",value:this.state.name,onChange:function(e){return _this2.onNameChange(e)}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",extraClass:"uk-modal-close",flat:!0,waves:!0}),react.createElement(components_Button,{text:"Create",type:"submit",flat:!0,waves:!0,style:"success"}))))}}])&&CreateTagModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateTagModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateTagModal}(react.Component);CreateTagModal.propTypes={createTag:prop_types_default().func.isRequired,page:prop_types_default().string,currentPage:prop_types_default().number};const Modals_CreateTagModal=(0,es.$j)(null,{createTag:tickets_createTag})(CreateTagModal);function AddTagsModal_typeof(obj){return AddTagsModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},AddTagsModal_typeof(obj)}function AddTagsModal_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function AddTagsModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function AddTagsModal_setPrototypeOf(o,p){return AddTagsModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},AddTagsModal_setPrototypeOf(o,p)}function AddTagsModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=AddTagsModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=AddTagsModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return AddTagsModal_possibleConstructorReturn(this,result)}}function AddTagsModal_possibleConstructorReturn(self,call){if(call&&("object"===AddTagsModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function AddTagsModal_getPrototypeOf(o){return AddTagsModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},AddTagsModal_getPrototypeOf(o)}var AddTagsModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&AddTagsModal_setPrototypeOf(subClass,superClass)}(AddTagsModal,_React$Component);var Constructor,protoProps,staticProps,_super=AddTagsModal_createSuper(AddTagsModal);function AddTagsModal(){return AddTagsModal_classCallCheck(this,AddTagsModal),_super.apply(this,arguments)}return Constructor=AddTagsModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.getTagsWithPage({limit:-1,page:0})}},{key:"componentDidUpdate",value:function(){helpers_default().setupChosen(),!jquery_default()(this.select).val()&&this.props.currentTags&&this.props.currentTags.length>0&&jquery_default()(this.select).val(this.props.currentTags),jquery_default()(this.select).trigger("chosen:updated")}},{key:"onSubmit",value:function(e){var _this=this;e.preventDefault();var selectedTags=jquery_default()(e.target.tags).val();selectedTags||(selectedTags=[]),axios_default().put("/api/v1/tickets/".concat(this.props.ticketId),{tags:selectedTags}).then((function(){socket_default().ui.refreshTicketTags(_this.props.ticketId),_this.closeButton.click()})).catch((function(error){logger.error(error),helpers_default().UI.showSnackbar(error,!0)}))}},{key:"render",value:function(){var _this2=this,mappedTags=this.props.tagsSettings.tags&&this.props.tagsSettings.tags.map((function(tag){return{text:tag.get("name"),value:tag.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,{options:{bgclose:!1}},react.createElement("div",{className:"uk-clearfix"},react.createElement("h5",{style:{fontWeight:300}},"Add Tags"),react.createElement("div",null,react.createElement("form",{className:"nomargin",onSubmit:function(e){return _this2.onSubmit(e)}},react.createElement("div",{className:"search-container"},react.createElement("select",{name:"tags",id:"tags",className:"chosen-select",multiple:!0,"data-placeholder":" ","data-noresults":"No Tags Found for ",ref:function(r){return _this2.select=r}},mappedTags.map((function(tag){return react.createElement("option",{key:tag.value,value:tag.value},tag.text)}))),react.createElement("button",{type:"button",style:{borderRadius:0}},react.createElement("i",{className:"material-icons",style:{marginRight:0}},"add"))),react.createElement("div",{className:"left",style:{marginTop:15}},react.createElement(components_Button,{type:"button",text:"Clear",small:!0,flat:!0,style:"danger"})),react.createElement("div",{className:"right",style:{marginTop:15}},react.createElement(components_Button,{type:"button",text:"Cancel",style:"secondary",small:!0,flat:!0,waves:!0,extraClass:"uk-modal-close",ref:function(r){return _this2.closeButton=r}}),react.createElement(components_Button,{type:"submit",text:"Save Tags",style:"success",small:!0,waves:!0}))))))}}])&&AddTagsModal_defineProperties(Constructor.prototype,protoProps),staticProps&&AddTagsModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AddTagsModal}(react.Component);AddTagsModal.propTypes={ticketId:prop_types_default().string.isRequired,currentTags:prop_types_default().array,tagsSettings:prop_types_default().object.isRequired,getTagsWithPage:prop_types_default().func.isRequired};const Modals_AddTagsModal=(0,es.$j)((function(state){return{tagsSettings:state.tagsSettings}}),{getTagsWithPage:tickets_getTagsWithPage})(AddTagsModal);function Grid_typeof(obj){return Grid_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Grid_typeof(obj)}function Grid_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Grid_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Grid_setPrototypeOf(o,p){return Grid_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Grid_setPrototypeOf(o,p)}function Grid_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Grid_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Grid_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Grid_possibleConstructorReturn(this,result)}}function Grid_possibleConstructorReturn(self,call){if(call&&("object"===Grid_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Grid_getPrototypeOf(o){return Grid_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Grid_getPrototypeOf(o)}var Grid=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Grid_setPrototypeOf(subClass,superClass)}(Grid,_React$Component);var Constructor,protoProps,staticProps,_super=Grid_createSuper(Grid);function Grid(){return Grid_classCallCheck(this,Grid),_super.apply(this,arguments)}return Constructor=Grid,(protoProps=[{key:"render",value:function(){return react.createElement("div",{className:"uk-grid uk-clearfix"+(this.props.gutterSize?" uk-grid-"+this.props.gutterSize:"")+(this.props.collapse?" uk-grid-collapse":"")+(this.props.extraClass?" "+this.props.extraClass:""),style:this.props.style},this.props.children)}}])&&Grid_defineProperties(Constructor.prototype,protoProps),staticProps&&Grid_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Grid}(react.Component);Grid.propTypes={extraClass:prop_types_default().string,gutterSize:prop_types_default().string,collapse:prop_types_default().bool,style:prop_types_default().object,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired},Grid.defaultProps={collapse:!1};const components_Grid=Grid;function GridItem_typeof(obj){return GridItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},GridItem_typeof(obj)}function GridItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function GridItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function GridItem_setPrototypeOf(o,p){return GridItem_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},GridItem_setPrototypeOf(o,p)}function GridItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=GridItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=GridItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return GridItem_possibleConstructorReturn(this,result)}}function GridItem_possibleConstructorReturn(self,call){if(call&&("object"===GridItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function GridItem_getPrototypeOf(o){return GridItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},GridItem_getPrototypeOf(o)}var GridItem=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&GridItem_setPrototypeOf(subClass,superClass)}(GridItem,_React$Component);var Constructor,protoProps,staticProps,_super=GridItem_createSuper(GridItem);function GridItem(){return GridItem_classCallCheck(this,GridItem),_super.apply(this,arguments)}return Constructor=GridItem,(protoProps=[{key:"render",value:function(){var _this$props=this.props,width=_this$props.width,xLargeWidth=_this$props.xLargeWidth,extraClass=_this$props.extraClass;return react.createElement("div",{className:"uk-width-"+width+(xLargeWidth?" uk-width-xLarge-"+xLargeWidth:"")+(extraClass?" "+extraClass:""),style:this.props.style},this.props.children)}}])&&GridItem_defineProperties(Constructor.prototype,protoProps),staticProps&&GridItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),GridItem}(react.Component);GridItem.propTypes={width:prop_types_default().string.isRequired,xLargeWidth:prop_types_default().string,extraClass:prop_types_default().string,style:prop_types_default().object,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const Grid_GridItem=GridItem;function SpinLoader_typeof(obj){return SpinLoader_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SpinLoader_typeof(obj)}function SpinLoader_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function SpinLoader_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SpinLoader_setPrototypeOf(o,p){return SpinLoader_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},SpinLoader_setPrototypeOf(o,p)}function SpinLoader_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SpinLoader_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SpinLoader_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SpinLoader_possibleConstructorReturn(this,result)}}function SpinLoader_possibleConstructorReturn(self,call){if(call&&("object"===SpinLoader_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SpinLoader_getPrototypeOf(o){return SpinLoader_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},SpinLoader_getPrototypeOf(o)}var SpinLoader=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SpinLoader_setPrototypeOf(subClass,superClass)}(SpinLoader,_React$Component);var Constructor,protoProps,staticProps,_super=SpinLoader_createSuper(SpinLoader);function SpinLoader(){return SpinLoader_classCallCheck(this,SpinLoader),_super.apply(this,arguments)}return Constructor=SpinLoader,(protoProps=[{key:"render",value:function(){return react.createElement("div",{className:"card-spinner"+(this.props.extraClass?" ".concat(this.props.extraClass):"")+(this.props.active?"":" hide"),style:this.props.style},react.createElement("div",{className:"spinner",style:this.props.spinnerStyle}))}}])&&SpinLoader_defineProperties(Constructor.prototype,protoProps),staticProps&&SpinLoader_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SpinLoader}(react.Component);SpinLoader.propTypes={active:prop_types_default().bool,extraClass:prop_types_default().string,style:prop_types_default().object,spinnerStyle:prop_types_default().object};const components_SpinLoader=SpinLoader;var tomarkdown=__webpack_require__(278),tomarkdown_default=__webpack_require__.n(tomarkdown),easymde_min=__webpack_require__(279),easymde_min_default=__webpack_require__.n(easymde_min);__webpack_require__(718),__webpack_require__(719),__webpack_require__(720);function EasyMDE_typeof(obj){return EasyMDE_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EasyMDE_typeof(obj)}function EasyMDE_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EasyMDE_setPrototypeOf(o,p){return EasyMDE_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},EasyMDE_setPrototypeOf(o,p)}function EasyMDE_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EasyMDE_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EasyMDE_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EasyMDE_possibleConstructorReturn(this,result)}}function EasyMDE_possibleConstructorReturn(self,call){if(call&&("object"===EasyMDE_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function EasyMDE_getPrototypeOf(o){return EasyMDE_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},EasyMDE_getPrototypeOf(o)}var EasyMDE=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EasyMDE_setPrototypeOf(subClass,superClass)}(EasyMDE,_React$Component);var Constructor,protoProps,staticProps,_super=EasyMDE_createSuper(EasyMDE);function EasyMDE(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EasyMDE),(_this=_super.call(this,props)).state={value:"",loaded:!1},_this}return Constructor=EasyMDE,staticProps=[{key:"getDerivedStateFromProps",value:function(nextProps,state){return void 0===nextProps.defaultValue||state.loaded||nextProps.defaultValue===state.value?null:{value:tomarkdown_default()(nextProps.defaultValue),loaded:!0}}},{key:"attachFileDesc",value:function(textarea){var $el=jquery_default()(textarea),attachFileDiv=jquery_default()("<div></div>");attachFileDiv.addClass("attachFileDesc").html("<p>Attach images by dragging & dropping or pasting from clipboard.</p>"),$el.siblings(".CodeMirror").addClass("hasFileDesc"),$el.siblings(".editor-statusbar").addClass("hasFileDesc").prepend(attachFileDiv)}},{key:"getMdeToolbarItems",value:function(){return[{name:"bold",action:easymde_min_default().toggleBold,className:"material-icons mi-bold no-ajaxy",title:"Bold"},{name:"italic",action:easymde_min_default().toggleItalic,className:"material-icons mi-italic no-ajaxy",title:"Italic"},{name:"Title",action:easymde_min_default().toggleHeadingSmaller,className:"material-icons mi-title no-ajaxy",title:"Title"},"|",{name:"Code",action:easymde_min_default().toggleCodeBlock,className:"material-icons mi-code no-ajaxy",title:"Code"},{name:"Quote",action:easymde_min_default().toggleBlockquote,className:"material-icons mi-quote no-ajaxy",title:"Quote"},{name:"Generic List",action:easymde_min_default().toggleUnorderedList,className:"material-icons mi-list no-ajaxy",title:"Generic List"},{name:"Numbered List",action:easymde_min_default().toggleOrderedList,className:"material-icons mi-numlist no-ajaxy",title:"Numbered List"},"|",{name:"Create Link",action:easymde_min_default().drawLink,className:"material-icons mi-link no-ajaxy",title:"Create Link"},"|",{name:"Toggle Preview",action:easymde_min_default().togglePreview,className:"material-icons mi-preview no-disable no-mobile no-ajaxy",title:"Toggle Preview"}]}}],(protoProps=[{key:"componentDidMount",value:function(){var _this2=this;if(this.easymde=new(easymde_min_default())({element:this.element,forceSync:!0,minHeight:this.props.height,toolbar:EasyMDE.getMdeToolbarItems(),autoDownloadFontAwesome:!1,status:!1,spellChecker:!1}),this.easymde.codemirror.on("change",(function(){_this2.onTextareaChanged(_this2.easymde.value())})),this.easymde&&this.props.allowImageUpload){if(!this.props.inlineImageUploadUrl)return logger.error("Invalid inlineImageUploadUrl Prop.");var $el=jquery_default()(this.element);$el.hasClass("hasInlineUpload")||($el.addClass("hasInlineUpload"),window.inlineAttachment.editors.codemirror4.attach(this.easymde.codemirror,{onFileUploadResponse:function(xhr){var result=JSON.parse(xhr.responseText),filename=result[this.settings.jsonFieldName];if(result&&filename){var newValue;newValue="function"==typeof this.settings.urlText?this.settings.urlText.call(this,filename,result):this.settings.urlText.replace(this.filenameTag,filename);var text=this.editor.getValue().replace(this.lastValue,newValue);this.editor.setValue(text),this.settings.onFileUploaded.call(this,filename)}return!1},onFileUploadError:function(xhr){var result=xhr.responseText,text=this.editor.getValue()+" "+result;this.editor.setValue(text)},extraHeaders:this.props.inlineImageUploadHeaders,errorText:"Error uploading file: ",uploadUrl:this.props.inlineImageUploadUrl,jsonFieldName:"filename",urlText:"![Image]({filename})"}),EasyMDE.attachFileDesc(this.element))}}},{key:"componentDidUpdate",value:function(){this.easymde&&this.easymde.value()!==this.state.value&&this.easymde.value(this.state.value)}},{key:"componentWillUnmount",value:function(){this.easymde&&(this.easymde.codemirror.off("change"),this.easymde=null)}},{key:"onTextareaChanged",value:function(value){this.setState({value}),this.props.onChange&&this.props.onChange(value)}},{key:"getEditorText",value:function(){return this.state.value}},{key:"setEditorText",value:function(value){this.setState({value:tomarkdown_default()(value)})}},{key:"render",value:function(){var _this3=this;return setTimeout((function(){_this3.easymde.codemirror.refresh()}),250),react.createElement(react.Fragment,null,react.createElement("textarea",{ref:function(i){return _this3.element=i},value:this.state.value,onChange:function(e){return _this3.onTextareaChanged(e)}}),this.props.showStatusBar&&react.createElement("div",{className:"editor-statusbar uk-float-left uk-width-1-1"}))}}])&&EasyMDE_defineProperties(Constructor.prototype,protoProps),staticProps&&EasyMDE_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EasyMDE}(react.Component);EasyMDE.propTypes={height:prop_types_default().string,value:prop_types_default().string,onChange:prop_types_default().func,defaultValue:prop_types_default().string,allowImageUpload:prop_types_default().bool,inlineImageUploadUrl:prop_types_default().string,inlineImageUploadHeaders:prop_types_default().object,showStatusBar:prop_types_default().bool.isRequired},EasyMDE.defaultProps={height:"150px",allowImageUpload:!1,showStatusBar:!0};const components_EasyMDE=EasyMDE;function CreateTicketModal_typeof(obj){return CreateTicketModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateTicketModal_typeof(obj)}var CreateTicketModal_class,CreateTicketModal_class2,CreateTicketModal_descriptor,CreateTicketModal_descriptor2,CreateTicketModal_descriptor3,_descriptor4;function CreateTicketModal_extends(){return CreateTicketModal_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},CreateTicketModal_extends.apply(this,arguments)}function CreateTicketModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function CreateTicketModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateTicketModal_setPrototypeOf(o,p){return CreateTicketModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},CreateTicketModal_setPrototypeOf(o,p)}function CreateTicketModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateTicketModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateTicketModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateTicketModal_possibleConstructorReturn(this,result)}}function CreateTicketModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateTicketModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreateTicketModal_assertThisInitialized(self)}function CreateTicketModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreateTicketModal_getPrototypeOf(o){return CreateTicketModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateTicketModal_getPrototypeOf(o)}function CreateTicketModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var CreateTicketModal=(0,mobxreact_esm.Pi)((CreateTicketModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateTicketModal_setPrototypeOf(subClass,superClass)}(CreateTicketModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateTicketModal_createSuper(CreateTicketModal);function CreateTicketModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateTicketModal),CreateTicketModal_initializerDefineProperty(_this=_super.call(this,props),"priorities",CreateTicketModal_descriptor,CreateTicketModal_assertThisInitialized(_this)),CreateTicketModal_initializerDefineProperty(_this,"allAccounts",CreateTicketModal_descriptor2,CreateTicketModal_assertThisInitialized(_this)),CreateTicketModal_initializerDefineProperty(_this,"groupAccounts",CreateTicketModal_descriptor3,CreateTicketModal_assertThisInitialized(_this)),CreateTicketModal_initializerDefineProperty(_this,"selectedPriority",_descriptor4,CreateTicketModal_assertThisInitialized(_this)),_this.issueText="",(0,mobx_esm.rC)(CreateTicketModal_assertThisInitialized(_this)),_this}return Constructor=CreateTicketModal,protoProps=[{key:"componentDidMount",value:function(){var _this2=this;this.props.fetchGroups(),this.props.fetchAccountsCreateTicket({type:"all",limit:1e3}),helpers_default().UI.inputs(),helpers_default().formvalidator(),this.defaultTicketTypeWatcher=(0,mobx_esm.gx)((function(){return _this2.props.viewdata.defaultTicketType}),(function(){_this2.priorities=(0,lodash.orderBy)(_this2.props.viewdata.defaultTicketType.priorities,["migrationNum"]),_this2.selectedPriority=(0,lodash.head)(_this2.priorities)?(0,lodash.head)(_this2.priorities)._id:""}))}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){this.defaultTicketTypeWatcher&&this.defaultTicketTypeWatcher()}},{key:"onTicketTypeSelectChange",value:function(e){var _this3=this;this.priorityWrapper.classList.add("hide"),this.priorityLoader.classList.remove("hide"),axios_default().get("/api/v1/tickets/type/".concat(e.target.value)).then((function(res){var type=res.data.type;type&&type.priorities&&(_this3.priorities=(0,lodash.orderBy)(type.priorities,["migrationNum"]),_this3.selectedPriority=(0,lodash.head)((0,lodash.orderBy)(type.priorities,["migrationNum"]))?(0,lodash.head)((0,lodash.orderBy)(type.priorities,["migrationNum"]))._id:"",setTimeout((function(){_this3.priorityLoader.classList.add("hide"),_this3.priorityWrapper.classList.remove("hide")}),500))})).catch((function(error){_this3.priorityLoader.classList.add("hide"),logger.error(error),helpers_default().UI.showSnackbar("Error: ".concat(error.response.data.error))}))}},{key:"onPriorityRadioChange",value:function(e){this.selectedPriority=e.target.value}},{key:"onFormSubmit",value:function(e){e.preventDefault();var $form=jquery_default()(e.target),data={};if(!(this.issueText.length<1)){var $mdeError,allowAgentUserTickets=this.props.viewdata.ticketSettings.allowAgentUserTickets&&(this.props.shared.sessionUser.role.isAdmin||this.props.shared.sessionUser.role.isAgent),minIssueLength=this.props.viewdata.ticketSettings.minIssue,$issueTextbox=jquery_default()(this.issueMde.element),$errorBorderWrap=$issueTextbox.parents(".error-border-wrap");if(this.issueText.length<minIssueLength){$errorBorderWrap.css({border:"1px solid #E74C3C"});var mdeError=jquery_default()('<div class="mde-error uk-float-left uk-text-left">Please enter a valid issue. Issue must contain at least '.concat(minIssueLength," characters</div>"));($mdeError=$issueTextbox.siblings(".editor-statusbar").find(".mde-error")).length<1&&$issueTextbox.siblings(".editor-statusbar").prepend(mdeError)}else{if($errorBorderWrap.css("border","none"),($mdeError=$issueTextbox.parent().find(".mde-error")).length>0&&$mdeError.remove(),!$form.isValid(null,null,!1))return!0;allowAgentUserTickets&&(data.owner=this.ownerSelect.value),data.subject=e.target.subject.value,data.group=this.groupSelect.value,data.type=this.typeSelect.value,data.tags=this.tagSelect.value,data.priority=this.selectedPriority,data.issue=this.issueMde.easymde.value(),data.socketid=socket_default().ui.socket.io.engine.id,this.props.createTicket(data)}}}},{key:"onGroupSelectChange",value:function(e){}},{key:"render",value:function(){var _this4=this,_this$props=this.props,shared=_this$props.shared,viewdata=_this$props.viewdata,allowAgentUserTickets=viewdata.ticketSettings.allowAgentUserTickets&&(shared.sessionUser.role.isAdmin||shared.sessionUser.role.isAgent),mappedAccounts=this.props.accounts.map((function(a){return{text:a.get("fullname"),value:a.get("_id")}})).toArray(),mappedGroups=this.props.groups.map((function(grp){return{text:grp.get("name"),value:grp.get("_id")}})).toArray(),mappedTicketTypes=this.props.viewdata.ticketTypes.map((function(type){return{text:type.name,value:type._id}})),mappedTicketTags=this.props.viewdata.ticketTags.map((function(tag){return{text:tag.name,value:tag._id}}));return react.createElement(Modals_BaseModal,CreateTicketModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this4.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Subject"),react.createElement("input",{type:"text",name:"subject",className:"md-input","data-validation":"length","data-validation-length":"min".concat(viewdata.ticketSettings.minSubject),"data-validation-error-msg":"Please enter a valid Subject. Subject must contain at least ".concat(viewdata.ticketSettings.minSubject," characters.")})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement(components_Grid,null,allowAgentUserTickets&&react.createElement(Grid_GridItem,{width:"1-3"},react.createElement("label",{className:"uk-form-label"},"Owner"),react.createElement(components_SingleSelect,{showTextbox:!0,items:mappedAccounts,defaultValue:[this.props.viewdata.loggedInAccount._id],width:"100%",ref:function(i){return _this4.ownerSelect=i}})),react.createElement(Grid_GridItem,{width:allowAgentUserTickets?"2-3":"1-1"},react.createElement("label",{className:"uk-form-label"},"Group"),react.createElement(components_SingleSelect,{showTextbox:!1,items:mappedGroups,defaultValue:(0,lodash.head)(mappedGroups)?(0,lodash.head)(mappedGroups).value:"",onSelectChange:function(e){return _this4.onGroupSelectChange(e)},width:"100%",ref:function(i){return _this4.groupSelect=i}})))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"1-3"},react.createElement("label",{className:"uk-form-label"},"Type"),react.createElement(components_SingleSelect,{showTextbox:!1,items:mappedTicketTypes,width:"100%",defaultValue:this.props.viewdata.defaultTicketType._id,onSelectChange:function(e){_this4.onTicketTypeSelectChange(e)},ref:function(i){return _this4.typeSelect=i}})),react.createElement(Grid_GridItem,{width:"2-3"},react.createElement("label",{className:"uk-form-label"},"Tags"),react.createElement(components_SingleSelect,{showTextbox:!1,items:mappedTicketTags,width:"100%",multiple:!0,ref:function(i){return _this4.tagSelect=i}})))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Priority"),react.createElement("div",{ref:function(i){return _this4.priorityLoader=i},style:{height:"32px",width:"32px",position:"relative"},className:"hide"},react.createElement(components_SpinLoader,{style:{background:"transparent"},spinnerStyle:{width:"24px",height:"24px"},active:!0})),react.createElement("div",{ref:function(i){return _this4.priorityWrapper=i},className:"uk-clearfix"},this.priorities.map((function(priority){return react.createElement("div",{key:priority._id,className:"uk-float-left"},react.createElement("span",{className:"icheck-inline"},react.createElement("input",{id:"p___"+priority._id,name:"priority",type:"radio",className:"with-gap",value:priority._id,onChange:function(e){_this4.onPriorityRadioChange(e)},checked:_this4.selectedPriority===priority._id,"data-md-icheck":!0}),react.createElement("label",{htmlFor:"p___"+priority._id,className:"mb-10 inline-label"},react.createElement("span",{className:"uk-badge",style:{backgroundColor:priority.htmlColor}},priority.name))))})))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("span",null,"Description"),react.createElement("div",{className:"error-border-wrap uk-clearfix"},react.createElement(components_EasyMDE,{ref:function(i){return _this4.issueMde=i},onChange:function(val){return _this4.issueText=val},allowImageUpload:!0,inlineImageUploadUrl:"/tickets/uploadmdeimage",inlineImageUploadHeaders:{ticketid:"uploads"}})),react.createElement("span",{style:{marginTop:"6px",display:"inline-block",fontSize:"11px"},className:"uk-text-muted"},"Please try to be as specific as possible. Please include any details you think may be relevant, such as","troubleshooting steps you've taken.")),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Cancel",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Create",style:"primary",flat:!0,type:"submit"}))))}}],protoProps&&CreateTicketModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateTicketModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateTicketModal}(react.Component),CreateTicketModal_descriptor=CreateTicketModal_applyDecoratedDescriptor(CreateTicketModal_class2.prototype,"priorities",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),CreateTicketModal_descriptor2=CreateTicketModal_applyDecoratedDescriptor(CreateTicketModal_class2.prototype,"allAccounts",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.props.accounts||[]}}),CreateTicketModal_descriptor3=CreateTicketModal_applyDecoratedDescriptor(CreateTicketModal_class2.prototype,"groupAccounts",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_descriptor4=CreateTicketModal_applyDecoratedDescriptor(CreateTicketModal_class2.prototype,"selectedPriority",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateTicketModal_class=CreateTicketModal_class2))||CreateTicketModal_class;CreateTicketModal.propTypes={shared:prop_types_default().object.isRequired,viewdata:prop_types_default().object.isRequired,accounts:prop_types_default().object.isRequired,groups:prop_types_default().object.isRequired,createTicket:prop_types_default().func.isRequired,fetchGroups:prop_types_default().func.isRequired,fetchAccountsCreateTicket:prop_types_default().func.isRequired};const Modals_CreateTicketModal=(0,es.$j)((function(state){return{shared:state.shared,viewdata:state.common,groups:state.groupsState.groups,accounts:state.accountsState.accountsCreateTicket}}),{createTicket:tickets_createTicket,fetchGroups:groups_fetchGroups,fetchAccountsCreateTicket:accounts_fetchAccountsCreateTicket})(CreateTicketModal);function CreateRoleModal_typeof(obj){return CreateRoleModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateRoleModal_typeof(obj)}var CreateRoleModal_class,CreateRoleModal_class2,CreateRoleModal_descriptor;function CreateRoleModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateRoleModal_setPrototypeOf(o,p){return CreateRoleModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},CreateRoleModal_setPrototypeOf(o,p)}function CreateRoleModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateRoleModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateRoleModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateRoleModal_possibleConstructorReturn(this,result)}}function CreateRoleModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateRoleModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreateRoleModal_assertThisInitialized(self)}function CreateRoleModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreateRoleModal_getPrototypeOf(o){return CreateRoleModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateRoleModal_getPrototypeOf(o)}var CreateRoleModal=(0,mobxreact_esm.Pi)((CreateRoleModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateRoleModal_setPrototypeOf(subClass,superClass)}(CreateRoleModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateRoleModal_createSuper(CreateRoleModal);function CreateRoleModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateRoleModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"name",CreateRoleModal_descriptor,CreateRoleModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(CreateRoleModal_assertThisInitialized(_this)),_this}return Constructor=CreateRoleModal,(protoProps=[{key:"onNameChange",value:function(e){this.name=e.target.value}},{key:"onCreateRoleClicked",value:function(e){e.preventDefault(),this.props.createRole({name:this.name})}},{key:"render",value:function(){var _this2=this;return react.createElement(Modals_BaseModal,null,react.createElement("div",{className:"uk-form-stacked"},react.createElement("div",null,react.createElement("h2",{className:"nomargin mb-5"},"Create Role"),react.createElement("p",{className:"uk-text-muted"},"Once created, the role will become editable in the permission editor"),react.createElement("label",null,"Role Name"),react.createElement("input",{type:"text",className:"md-input",name:"name","data-validation":"length","data-validation-length":"min3","data-validation-error-msg":"Please enter a valid role name. Role name must contain at least 3 characters.",value:this.name,onChange:function(e){return _this2.onNameChange(e)}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",extraClass:"uk-modal-close",flat:!0,waves:!0}),react.createElement(components_Button,{text:"Create",type:"button",flat:!0,waves:!0,style:"success",onClick:function(e){return _this2.onCreateRoleClicked(e)}}))))}}])&&CreateRoleModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateRoleModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateRoleModal}(react.Component),CreateRoleModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(CreateRoleModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateRoleModal_class=CreateRoleModal_class2))||CreateRoleModal_class;CreateRoleModal.propTypes={createRole:prop_types_default().func.isRequired};const Modals_CreateRoleModal=(0,es.$j)(null,{createRole:settings_createRole})(CreateRoleModal);function DeleteRoleModal_typeof(obj){return DeleteRoleModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DeleteRoleModal_typeof(obj)}var DeleteRoleModal_class,DeleteRoleModal_class2,DeleteRoleModal_descriptor;function DeleteRoleModal_extends(){return DeleteRoleModal_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},DeleteRoleModal_extends.apply(this,arguments)}function DeleteRoleModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DeleteRoleModal_setPrototypeOf(o,p){return DeleteRoleModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},DeleteRoleModal_setPrototypeOf(o,p)}function DeleteRoleModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DeleteRoleModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DeleteRoleModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DeleteRoleModal_possibleConstructorReturn(this,result)}}function DeleteRoleModal_possibleConstructorReturn(self,call){if(call&&("object"===DeleteRoleModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return DeleteRoleModal_assertThisInitialized(self)}function DeleteRoleModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function DeleteRoleModal_getPrototypeOf(o){return DeleteRoleModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},DeleteRoleModal_getPrototypeOf(o)}var DeleteRoleModal=(0,mobxreact_esm.Pi)((DeleteRoleModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DeleteRoleModal_setPrototypeOf(subClass,superClass)}(DeleteRoleModal,_React$Component);var Constructor,protoProps,staticProps,_super=DeleteRoleModal_createSuper(DeleteRoleModal);function DeleteRoleModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DeleteRoleModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"selectedRole",DeleteRoleModal_descriptor,DeleteRoleModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(DeleteRoleModal_assertThisInitialized(_this)),_this}return Constructor=DeleteRoleModal,(protoProps=[{key:"onSelectChanged",value:function(e){this.selectedRole=e.target.value}},{key:"onFormSubmit",value:function(e){e.preventDefault(),this.props.deleteRole({_id:this.props.role.get("_id"),newRoleId:this.selectedRole})}},{key:"render",value:function(){var _this2=this,role=this.props.role,mappedRoles=this.props.shared.roles.filter((function(obj){return obj.get("_id")!==role.get("_id")})).map((function(r){return{text:r.get("name"),value:r.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,DeleteRoleModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("h2",null,"Remove Role"),react.createElement("span",null,"Please select the role you wish to assign ALL users to")),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"100%"}},react.createElement("label",{className:"uk-form-label nopadding nomargin"},"Type"),react.createElement(components_SingleSelect,{showTextbox:!1,items:mappedRoles,onSelectChange:function(e){return _this2.onSelectChanged(e)},value:this.selectedRole}))),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("span",{className:"uk-text-danger"},"WARNING: This will change all accounts with role ",react.createElement("strong",null,role.get("name"))," to the selected role above.",role.get("isAdmin")&&react.createElement("span",{className:"uk-text-danger"},"The role you are about to remove is an admin role. Please ensure there is another Admin role or you could be locked out!"),react.createElement("br",null),react.createElement("br",null),react.createElement("strong",{style:{fontSize:"18px"}},"This is permanent!"))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Cancel",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Delete",style:"danger",flat:!0,type:"submit"}))))}}])&&DeleteRoleModal_defineProperties(Constructor.prototype,protoProps),staticProps&&DeleteRoleModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DeleteRoleModal}(react.Component),DeleteRoleModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(DeleteRoleModal_class2.prototype,"selectedRole",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),DeleteRoleModal_class=DeleteRoleModal_class2))||DeleteRoleModal_class;DeleteRoleModal.propTypes={role:prop_types_default().object,deleteRole:prop_types_default().func.isRequired,shared:prop_types_default().object.isRequired};const Modals_DeleteRoleModal=(0,es.$j)((function(state){return{shared:state.shared}}),{deleteRole:settings_deleteRole})(DeleteRoleModal);function ViewAllNotificationsModal_typeof(obj){return ViewAllNotificationsModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},ViewAllNotificationsModal_typeof(obj)}var ViewAllNotificationsModal_class,ViewAllNotificationsModal_class2,ViewAllNotificationsModal_descriptor;function ViewAllNotificationsModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ViewAllNotificationsModal_setPrototypeOf(o,p){return ViewAllNotificationsModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},ViewAllNotificationsModal_setPrototypeOf(o,p)}function ViewAllNotificationsModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=ViewAllNotificationsModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=ViewAllNotificationsModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return ViewAllNotificationsModal_possibleConstructorReturn(this,result)}}function ViewAllNotificationsModal_possibleConstructorReturn(self,call){if(call&&("object"===ViewAllNotificationsModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return ViewAllNotificationsModal_assertThisInitialized(self)}function ViewAllNotificationsModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function ViewAllNotificationsModal_getPrototypeOf(o){return ViewAllNotificationsModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ViewAllNotificationsModal_getPrototypeOf(o)}var ViewAllNotificationsModal=(0,mobxreact_esm.Pi)((ViewAllNotificationsModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&ViewAllNotificationsModal_setPrototypeOf(subClass,superClass)}(ViewAllNotificationsModal,_React$Component);var Constructor,protoProps,staticProps,_super=ViewAllNotificationsModal_createSuper(ViewAllNotificationsModal);function ViewAllNotificationsModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ViewAllNotificationsModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"notifications",ViewAllNotificationsModal_descriptor,ViewAllNotificationsModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(ViewAllNotificationsModal_assertThisInitialized(_this)),_this}return Constructor=ViewAllNotificationsModal,(protoProps=[{key:"componentDidMount",value:function(){var _this2=this;helpers_default().hideAllpDropDowns(),axios_default().get("/api/v1/users/notifications").then((function(res){_this2.notifications=res.data.notifications})).catch((function(err){helpers_default().UI.showSnackbar("Error: ".concat(err.response),!0),logger.error(err.response)}))}},{key:"onNotificationClick",value:function(e,notification){if(e.preventDefault(),!(notification&&notification.data&&notification.data.ticket&&notification.data.ticket.uid))return!1;this.props.hideModal(),socket_default().socket.emit("markNotificationRead",notification._id),History.pushState(null,null,"/tickets/".concat(notification.data.ticket.uid))}},{key:"render",value:function(){var _this3=this;return react.createElement(Modals_BaseModal,{large:!0},react.createElement("div",{className:"uk-modal-header"},react.createElement("h2",null,"Notifications")),react.createElement("div",{className:"uk-modal-content",style:{height:"400px",overflow:"auto"}},react.createElement("table",{className:"notificationsTable"},react.createElement("thead",null,react.createElement("tr",null,react.createElement("th",{className:"type"},"Type"),react.createElement("th",{className:"title"},"Title"),react.createElement("th",{className:"date"},"Date"))),react.createElement("tbody",null,this.notifications.map((function(notification){var formattedDate=helpers_default().formatDate(notification.created,helpers_default().getShortDateFormat()+" "+helpers_default().getTimeFormat());return react.createElement("tr",{key:notification._id,className:"notification-row",onClick:function(e){return _this3.onNotificationClick(e,notification)}},react.createElement("td",{className:"type"},react.createElement("i",{className:"fa fa-2x fa-check"})),react.createElement("td",{className:"title"},react.createElement("p",null,notification.title),react.createElement("div",{className:"body"},notification.message)),react.createElement("td",{className:"date"},react.createElement("time",{dateTime:helpers_default().formatDate(notification.created,"YYY-MM-DDThh:mm")},formattedDate)))}))))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,onClick:function(){return _this3.props.hideModal()}})))}}])&&ViewAllNotificationsModal_defineProperties(Constructor.prototype,protoProps),staticProps&&ViewAllNotificationsModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ViewAllNotificationsModal}(react.Component),ViewAllNotificationsModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(ViewAllNotificationsModal_class2.prototype,"notifications",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ViewAllNotificationsModal_class=ViewAllNotificationsModal_class2))||ViewAllNotificationsModal_class;ViewAllNotificationsModal.propTypes={hideModal:prop_types_default().func.isRequired};const Modals_ViewAllNotificationsModal=(0,es.$j)(null,{hideModal})(ViewAllNotificationsModal),teams_fetchTeams=(0,createAction.Z)(FETCH_TEAMS.ACTION,(payload=>payload),(()=>({thunk:!0}))),teams_createTeam=(0,createAction.Z)(CREATE_TEAM.ACTION),saveEditTeam=(0,createAction.Z)(SAVE_EDIT_TEAM.ACTION),teams_deleteTeam=(0,createAction.Z)(DELETE_TEAM.ACTION),unloadTeams=(0,createAction.Z)(UNLOAD_TEAMS.ACTION,(payload=>payload),(()=>({thunk:!0})));function MultiSelect_typeof(obj){return MultiSelect_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},MultiSelect_typeof(obj)}function MultiSelect_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function MultiSelect_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function MultiSelect_setPrototypeOf(o,p){return MultiSelect_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},MultiSelect_setPrototypeOf(o,p)}function MultiSelect_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=MultiSelect_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=MultiSelect_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return MultiSelect_possibleConstructorReturn(this,result)}}function MultiSelect_possibleConstructorReturn(self,call){if(call&&("object"===MultiSelect_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function MultiSelect_getPrototypeOf(o){return MultiSelect_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},MultiSelect_getPrototypeOf(o)}var MultiSelect=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&MultiSelect_setPrototypeOf(subClass,superClass)}(MultiSelect,_React$Component);var Constructor,protoProps,staticProps,_super=MultiSelect_createSuper(MultiSelect);function MultiSelect(){return MultiSelect_classCallCheck(this,MultiSelect),_super.apply(this,arguments)}return Constructor=MultiSelect,(protoProps=[{key:"componentDidMount",value:function(){var $select=jquery_default()(this.select);helpers_default().UI.multiSelect({afterSelect:this.props.onChange,afterDeselect:this.props.onChange}),this.props.initialSelected&&($select.multiSelect("select",this.props.initialSelected),$select.multiSelect("refresh")),this.props.disabled&&($select.attr("disabled","disabled"),$select.multiSelect("refresh"))}},{key:"componentDidUpdate",value:function(prevProps){var $select=jquery_default()(this.select);helpers_default().arrayIsEqual(prevProps.items,this.props.items)?prevProps.initialSelected!==this.props.initialSelected&&($select.multiSelect("select",this.props.initialSelected),$select.multiSelect("refresh")):($select.empty().multiSelect("refresh"),(0,lodash.each)(this.props.items,(function(i){$select.append("<option value='".concat(i.value,"'>").concat(i.text,"</option>"))})),$select.attr("disabled",!1),$select.multiSelect("refresh"),this.props.initialSelected&&($select.multiSelect("select",this.props.initialSelected),$select.multiSelect("refresh"))),$select.attr("disabled",this.props.disabled),$select.multiSelect("refresh")}},{key:"getSelected",value:function(){var $select=jquery_default()(this.select);return $select?$select.val():[]}},{key:"selectAll",value:function(){var $select=jquery_default()(this.select);$select&&this.props.items&&this.props.items.length>0&&($select.multiSelect("select_all"),$select.multiSelect("refresh"))}},{key:"deselectAll",value:function(){var $select=jquery_default()(this.select);$select&&this.props.items&&this.props.items.length>0&&($select.multiSelect("deselect_all"),$select.multiSelect("refresh"))}},{key:"render",value:function(){var _this=this,_this$props=this.props,id=_this$props.id,items=_this$props.items;return react.createElement("select",{id,multiple:"multiple",className:"multiselect",ref:function(r){return _this.select=r}},items&&items.map((function(item,i){return react.createElement("option",{key:i,value:item.value},item.text)})))}}])&&MultiSelect_defineProperties(Constructor.prototype,protoProps),staticProps&&MultiSelect_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MultiSelect}(react.Component);MultiSelect.propTypes={id:prop_types_default().string,items:prop_types_default().array.isRequired,initialSelected:prop_types_default().array,onChange:prop_types_default().func.isRequired,disabled:prop_types_default().bool};const components_MultiSelect=MultiSelect;function CreateAccountModal_typeof(obj){return CreateAccountModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateAccountModal_typeof(obj)}var CreateAccountModal_class,CreateAccountModal_class2,CreateAccountModal_descriptor,CreateAccountModal_descriptor2,CreateAccountModal_descriptor3,CreateAccountModal_descriptor4,_descriptor5,_descriptor6,_descriptor7;function CreateAccountModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function CreateAccountModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateAccountModal_setPrototypeOf(o,p){return CreateAccountModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},CreateAccountModal_setPrototypeOf(o,p)}function CreateAccountModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateAccountModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateAccountModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateAccountModal_possibleConstructorReturn(this,result)}}function CreateAccountModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateAccountModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreateAccountModal_assertThisInitialized(self)}function CreateAccountModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreateAccountModal_getPrototypeOf(o){return CreateAccountModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateAccountModal_getPrototypeOf(o)}function CreateAccountModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var CreateAccountModal=(0,mobxreact_esm.Pi)((CreateAccountModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateAccountModal_setPrototypeOf(subClass,superClass)}(CreateAccountModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateAccountModal_createSuper(CreateAccountModal);function CreateAccountModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateAccountModal),CreateAccountModal_initializerDefineProperty(_this=_super.call(this,props),"username",CreateAccountModal_descriptor,CreateAccountModal_assertThisInitialized(_this)),CreateAccountModal_initializerDefineProperty(_this,"password",CreateAccountModal_descriptor2,CreateAccountModal_assertThisInitialized(_this)),CreateAccountModal_initializerDefineProperty(_this,"passwordConfirm",CreateAccountModal_descriptor3,CreateAccountModal_assertThisInitialized(_this)),CreateAccountModal_initializerDefineProperty(_this,"fullname",CreateAccountModal_descriptor4,CreateAccountModal_assertThisInitialized(_this)),CreateAccountModal_initializerDefineProperty(_this,"email",_descriptor5,CreateAccountModal_assertThisInitialized(_this)),CreateAccountModal_initializerDefineProperty(_this,"title",_descriptor6,CreateAccountModal_assertThisInitialized(_this)),_this.selectedRole="",CreateAccountModal_initializerDefineProperty(_this,"isAgentRole",_descriptor7,CreateAccountModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(CreateAccountModal_assertThisInitialized(_this)),_this}return Constructor=CreateAccountModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchGroups({type:"all"}),this.props.fetchTeams(),this.props.fetchRoles(),helpers_default().UI.inputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"onInputChanged",value:function(e,name){this[name]=e.target.value}},{key:"onRoleSelectChange",value:function(e){var _this2=this;this.selectedRole=e.target.value;var roleObject=this.props.roles.find((function(role){return role.get("_id")===_this2.selectedRole}));this.isAgentRole=roleObject.get("isAdmin")||roleObject.get("isAgent"),!this.selectedRole||this.selectedRole.length<1?this.roleSelectErrorMessage.classList.remove("hide"):this.roleSelectErrorMessage.classList.add("hide")}},{key:"onGroupSelectChange",value:function(){var selectedGroups=this.groupSelect.getSelected();!selectedGroups||selectedGroups.length<1?this.groupSelectErrorMessage.classList.remove("hide"):this.groupSelectErrorMessage.classList.add("hide")}},{key:"onFormSubmit",value:function(e){e.preventDefault();var isValid=!0;jquery_default()(e.target).isValid(null,null,!1)||(isValid=!1),!this.selectedRole||this.selectedRole.length<1?(this.roleSelectErrorMessage.classList.remove("hide"),isValid&&(isValid=!1)):this.roleSelectErrorMessage.classList.add("hide");var selectedGroups=this.groupSelect?this.groupSelect.getSelected():void 0;if(selectedGroups&&(selectedGroups.length<1?(this.groupSelectErrorMessage.classList.remove("hide"),isValid&&(isValid=!1)):this.groupSelectErrorMessage.classList.add("hide")),isValid){var payload={username:this.username,fullname:this.fullname,title:this.title,email:this.email,groups:this.groupSelect?this.groupSelect.getSelected():void 0,teams:this.teamSelect?this.teamSelect.getSelected():void 0,role:this.selectedRole,password:this.password.length>1?this.password:void 0,passwordConfirm:this.passwordConfirm.length>1?this.passwordConfirm:void 0};this.props.createAccount(payload)}}},{key:"render",value:function(){var _this3=this,roles=this.props.roles.map((function(role){return{text:role.get("name"),value:role.get("_id")}})).toArray(),groups=this.props.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray(),teams=this.props.teams.map((function(team){return{text:team.get("name"),value:team.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,{parentExtraClass:"pt-0",extraClass:"p-0 pb-25"},react.createElement("div",{className:"user-heading",style:{minHeight:"130px",background:"#1976d2",padding:"24px"}},react.createElement("div",{className:"uk-width-1-1"},react.createElement("div",{style:{width:"82px",height:"82px",float:"left",marginRight:"24px",position:"relative"}},react.createElement("div",{className:"mediumProfilePic",style:{position:"relative"}},react.createElement("img",{src:"/uploads/users/defaultProfile.jpg",alt:"Profile Picture"}))),react.createElement("div",{className:"user-heading-content"},react.createElement("h2",null,react.createElement("span",{className:"uk-text-truncate"},"Create Account"),react.createElement("span",{className:"sub-heading"},"Please provide account details below"))))),react.createElement("div",{style:{margin:"24px 24px 0 24px"}},react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this3.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Username"),react.createElement("input",{type:"text",className:"md-input",value:this.username,onChange:function(e){return _this3.onInputChanged(e,"username")},"data-validation":"length","data-validation-length":"min4","data-validation-error-msg":"Username must contain at least 4 characters."})),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"50%",paddingRight:"20px"}},react.createElement("label",{className:"uk-form-label"},"Name"),react.createElement("input",{type:"text",className:"md-input",value:this.fullname,onChange:function(e){return _this3.onInputChanged(e,"fullname")},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Name must contain at least 2 characters."})),react.createElement("div",{className:"uk-float-left uk-width-1-2"},react.createElement("label",{className:"uk-form-label"},"Title"),react.createElement("input",{type:"text",className:"md-input",value:this.title,onChange:function(e){return _this3.onInputChanged(e,"title")}}))),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"50%",paddingRight:"20px"}},react.createElement("label",{className:"uk-form-label"},"Password"),react.createElement("input",{type:"password",className:"md-input",name:"password_confirmation",value:this.password,onChange:function(e){return _this3.onInputChanged(e,"password")},"data-validation":this.props.common.accountsPasswordComplexity?"length":"none","data-validation-length":"min8","data-validation-error-msg":"Password must contain at least 8 characters."})),react.createElement("div",{className:"uk-float-left uk-width-1-2"},react.createElement("label",{className:"uk-form-label"},"Confirm Password"),react.createElement("input",{type:"password",className:"md-input",name:"password",value:this.passwordConfirm,onChange:function(e){return _this3.onInputChanged(e,"passwordConfirm")},"data-validation":"confirmation","data-validation-error-msg":"Password does not match"}))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Email"),react.createElement("input",{type:"email",className:"md-input",value:this.email,onChange:function(e){return _this3.onInputChanged(e,"email")},"data-validation":"email"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Role"),react.createElement(components_SingleSelect,{items:roles,width:"100",showTextbox:!1,onSelectChange:function(e){return _this3.onRoleSelectChange(e)}}),react.createElement("span",{className:"hide help-block",style:{display:"inline-block",marginTop:"10px",fontWeight:"bold",color:"#d85030"},ref:function(r){return _this3.roleSelectErrorMessage=r}},"Please select a role for this user")),!this.isAgentRole&&react.createElement("div",null,react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Groups"),react.createElement(components_MultiSelect,{items:groups,onChange:function(e){return _this3.onGroupSelectChange(e)},ref:function(r){return _this3.groupSelect=r}}),react.createElement("span",{className:"hide help-block",style:{display:"inline-block",marginTop:"3px",fontWeight:"bold",color:"#d85030"},ref:function(r){return _this3.groupSelectErrorMessage=r}},"Please select a group for this user."))),this.isAgentRole&&react.createElement("div",null,react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Teams"),react.createElement(components_MultiSelect,{items:teams,onChange:function(){},ref:function(r){return _this3.teamSelect=r}}))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Create Account",flat:!0,waves:!0,style:"success",type:"submit"})))))}}])&&CreateAccountModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateAccountModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateAccountModal}(react.Component),CreateAccountModal_descriptor=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"username",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateAccountModal_descriptor2=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"password",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateAccountModal_descriptor3=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"passwordConfirm",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateAccountModal_descriptor4=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"fullname",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_descriptor5=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"email",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_descriptor6=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"title",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_descriptor7=CreateAccountModal_applyDecoratedDescriptor(CreateAccountModal_class2.prototype,"isAgentRole",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),CreateAccountModal_class=CreateAccountModal_class2))||CreateAccountModal_class;CreateAccountModal.propTypes={common:prop_types_default().object.isRequired,groups:prop_types_default().object.isRequired,teams:prop_types_default().object.isRequired,roles:prop_types_default().object.isRequired,createAccount:prop_types_default().func.isRequired,fetchGroups:prop_types_default().func.isRequired,unloadGroups:prop_types_default().func.isRequired,fetchTeams:prop_types_default().func.isRequired,unloadTeams:prop_types_default().func.isRequired,fetchRoles:prop_types_default().func.isRequired};const Modals_CreateAccountModal=(0,es.$j)((function(state){return{roles:state.shared.roles,common:state.common,groups:state.groupsState.groups,teams:state.teamsState.teams}}),{createAccount:accounts_createAccount,fetchGroups:groups_fetchGroups,unloadGroups,fetchTeams:teams_fetchTeams,unloadTeams,fetchRoles:common_fetchRoles})(CreateAccountModal),departments_fetchDepartments=(0,createAction.Z)(FETCH_DEPARTMENTS.ACTION,(payload=>payload),(()=>({thunk:!0}))),departments_createDepartment=(0,createAction.Z)(CREATE_DEPARTMENT.ACTION),departments_updateDepartment=(0,createAction.Z)(UPDATE_DEPARTMENT.ACTION),departments_deleteDepartment=(0,createAction.Z)(DELETE_DEPARTMENT.ACTION),departments_unloadDepartments=(0,createAction.Z)(UNLOAD_DEPARTMENTS.ACTION,(payload=>payload),(()=>({thunk:!0})));function EditAccountModal_typeof(obj){return EditAccountModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EditAccountModal_typeof(obj)}var EditAccountModal_class,EditAccountModal_class2,EditAccountModal_descriptor,EditAccountModal_descriptor2,EditAccountModal_descriptor3,EditAccountModal_descriptor4,EditAccountModal_descriptor5,EditAccountModal_descriptor6;function EditAccountModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function EditAccountModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EditAccountModal_setPrototypeOf(o,p){return EditAccountModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},EditAccountModal_setPrototypeOf(o,p)}function EditAccountModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EditAccountModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EditAccountModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EditAccountModal_possibleConstructorReturn(this,result)}}function EditAccountModal_possibleConstructorReturn(self,call){if(call&&("object"===EditAccountModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return EditAccountModal_assertThisInitialized(self)}function EditAccountModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function EditAccountModal_getPrototypeOf(o){return EditAccountModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},EditAccountModal_getPrototypeOf(o)}function EditAccountModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var EditAccountModal=(0,mobxreact_esm.Pi)((EditAccountModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EditAccountModal_setPrototypeOf(subClass,superClass)}(EditAccountModal,_React$Component);var Constructor,protoProps,staticProps,_super=EditAccountModal_createSuper(EditAccountModal);function EditAccountModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditAccountModal),EditAccountModal_initializerDefineProperty(_this=_super.call(this,props),"name",EditAccountModal_descriptor,EditAccountModal_assertThisInitialized(_this)),EditAccountModal_initializerDefineProperty(_this,"title",EditAccountModal_descriptor2,EditAccountModal_assertThisInitialized(_this)),EditAccountModal_initializerDefineProperty(_this,"password",EditAccountModal_descriptor3,EditAccountModal_assertThisInitialized(_this)),EditAccountModal_initializerDefineProperty(_this,"confirmPassword",EditAccountModal_descriptor4,EditAccountModal_assertThisInitialized(_this)),EditAccountModal_initializerDefineProperty(_this,"email",EditAccountModal_descriptor5,EditAccountModal_assertThisInitialized(_this)),_this.selectedRole="",EditAccountModal_initializerDefineProperty(_this,"isAgentRole",EditAccountModal_descriptor6,EditAccountModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(EditAccountModal_assertThisInitialized(_this)),_this}return Constructor=EditAccountModal,(protoProps=[{key:"componentDidMount",value:function(){this.name=this.props.user.fullname,this.title=this.props.user.title,this.email=this.props.user.email,this.isAgentRole=this.props.user.role.isAdmin||this.props.user.role.isAgent,helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),this.props.fetchGroups({type:"all"}),this.props.fetchTeams(),this.props.fetchDepartments(),this.props.fetchRoles()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadGroups(),this.props.unloadTeams(),this.props.unloadDepartments()}},{key:"onFileBtnClick",value:function(e){e.stopPropagation(),this.uploadImageInput&&this.uploadImageInput.click()}},{key:"onImageUploadChanged",value:function(e){var self=e.target,that=this,formData=new FormData;formData.append("username",this.props.user.username),formData.append("_id",this.props.user._id),formData.append("image",self.files[0]),axios_default().post("/accounts/uploadImage",formData).then((function(res){var timestamp=(new Date).getTime();that.uploadProfileImage.setAttribute("src","".concat(res.data,"?").concat(timestamp))})).catch((function(err){logger.error(err)}))}},{key:"onInputChanged",value:function(e,stateName){this[stateName]=e.target.value}},{key:"onRoleSelectChange",value:function(e){var _this2=this;this.selectedRole=e.target.value;var roleObject=this.props.roles.find((function(role){return role.get("_id")===_this2.selectedRole}));this.isAgentRole=roleObject.get("isAdmin")||roleObject.get("isAgent")}},{key:"onSubmitSaveAccount",value:function(e){if(e.preventDefault(),this.props.edit){var data={username:this.props.user.username,fullname:this.name,title:this.title,email:this.email,groups:!this.isAgentRole&&this.groupSelect?this.groupSelect.getSelected():void 0,teams:this.isAgentRole&&this.teamsSelect?this.teamsSelect.getSelected():void 0,role:this.selectedRole,password:this.password.length>1?this.password:void 0,passwordConfirm:this.confirmPassword.length>1?this.confirmPassword:void 0};this.props.saveEditAccount(data)}}},{key:"render",value:function(){var _this3=this,_this$props=this.props,user=_this$props.user,edit=_this$props.edit,customer=!this.isAgentRole,profilePicture=user.image||"defaultProfile.jpg",roles=helpers_default().getRolesByHierarchy().map((function(role){return{text:role.name,value:role._id}})),teams=this.props.teams?this.props.teams.map((function(team){return{text:team.get("name"),value:team.get("_id")}})).toArray():[],departments=this.props.departments?this.props.departments.map((function(department){return{text:department.get("name"),value:department.get("_id")}})).toArray():[],groups=this.props.groups?this.props.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray():[];return user.teams||(user.teams=[]),user.departments||(user.departments=[]),user.groups||(user.groups=[]),react.createElement(Modals_BaseModal,{parentExtraClass:"pt-0",extraClass:"p-0 pb-25",options:{bgclose:!1}},react.createElement("div",{className:"user-heading",style:{minHeight:"130px",background:"#1976d2",padding:"24px"}},react.createElement("div",{className:"uk-width-1-1"},react.createElement("div",{style:{width:"82px",height:"82px",float:"left",marginRight:"24px",position:"relative"}},edit&&react.createElement("form",{className:"form nomargin",encType:"multipart/form-data"},react.createElement("div",{className:"mediumProfilePic",style:{position:"relative"}},react.createElement("input",{name:"_id",type:"hidden",value:user._id,readOnly:!0}),react.createElement("input",{name:"username",type:"hidden",value:user.username,readOnly:!0}),react.createElement("input",{type:"file",style:{display:"none"},ref:function(r){return _this3.uploadImageInput=r},onChange:function(e){return _this3.onImageUploadChanged(e)}}),react.createElement("img",{src:"/uploads/users/".concat(profilePicture),alt:"Profile Picture",ref:function(r){return _this3.uploadProfileImage=r}})),react.createElement("div",{className:"profile-picture-controls"},react.createElement("span",{className:"btn-file",onClick:function(e){return _this3.onFileBtnClick(e)}},react.createElement("i",{className:"material-icons"},"file_upload")))),!edit&&react.createElement("div",{className:"mediumProfilePic",style:{position:"relative"}},react.createElement("img",{src:"/uploads/users/".concat(profilePicture),alt:"Profile Picture",ref:function(r){return _this3.uploadProfileImage=r}}))),react.createElement("div",{className:"user-heading-content"},react.createElement("h2",null,react.createElement("span",{className:"uk-text-truncate"},user.username),react.createElement("span",{className:"sub-heading"},user.title))))),react.createElement("div",{style:{margin:"24px 24px 0 24px"}},react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this3.onSubmitSaveAccount(e)}},react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"50%",paddingRight:"20px"}},react.createElement("label",{className:"uk-form-label"},"Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this3.onInputChanged(e,"name")},disabled:!edit})),react.createElement("div",{className:"uk-float-left uk-width-1-2"},react.createElement("label",{className:"uk-form-label"},"Title"),react.createElement("input",{type:"text",className:"md-input",value:this.title,onChange:function(e){return _this3.onInputChanged(e,"title")},disabled:!edit}))),edit&&react.createElement("div",null,react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left",style:{width:"50%",paddingRight:"20px"}},react.createElement("label",{className:"uk-form-label"},"Password"),react.createElement("input",{type:"password",className:"md-input",value:this.password,onChange:function(e){return _this3.onInputChanged(e,"password")}})),react.createElement("div",{className:"uk-float-left uk-width-1-2"},react.createElement("label",{className:"uk-form-label"},"Confirm Password"),react.createElement("input",{type:"password",className:"md-input",value:this.confirmPassword,onChange:function(e){return _this3.onInputChanged(e,"confirmPassword")}})))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Email"),react.createElement("input",{type:"email",className:"md-input",value:this.email,onChange:function(e){return _this3.onInputChanged(e,"email")},disabled:!edit})),edit&&react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Role"),react.createElement(components_SingleSelect,{items:roles,width:"100",showTextbox:!1,defaultValue:user.role._id,onSelectChange:function(e){return _this3.onRoleSelectChange(e)},disabled:!edit})),this.props.groups&&customer&&react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Groups"),react.createElement(components_MultiSelect,{items:groups,initialSelected:user.groups.map((function(i){return i._id})),onChange:function(){},ref:function(r){return _this3.groupSelect=r},disabled:!edit})),!customer&&react.createElement("div",null,react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Teams"),react.createElement(components_MultiSelect,{items:teams,initialSelected:user.teams.map((function(i){return i._id})),onChange:function(){},ref:function(r){return _this3.teamsSelect=r},disabled:!edit})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{className:"uk-form-label"},"Departments"),react.createElement(components_MultiSelect,{items:departments,initialSelected:user.departments.map((function(i){return i._id})),onChange:function(){},disabled:!0}))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Save Account",flat:!0,waves:!0,style:"primary",type:"submit",disabled:!edit})))))}}])&&EditAccountModal_defineProperties(Constructor.prototype,protoProps),staticProps&&EditAccountModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EditAccountModal}(react.Component),EditAccountModal_descriptor=EditAccountModal_applyDecoratedDescriptor(EditAccountModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditAccountModal_descriptor2=EditAccountModal_applyDecoratedDescriptor(EditAccountModal_class2.prototype,"title",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditAccountModal_descriptor3=EditAccountModal_applyDecoratedDescriptor(EditAccountModal_class2.prototype,"password",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditAccountModal_descriptor4=EditAccountModal_applyDecoratedDescriptor(EditAccountModal_class2.prototype,"confirmPassword",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditAccountModal_descriptor5=EditAccountModal_applyDecoratedDescriptor(EditAccountModal_class2.prototype,"email",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditAccountModal_descriptor6=EditAccountModal_applyDecoratedDescriptor(EditAccountModal_class2.prototype,"isAgentRole",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),EditAccountModal_class=EditAccountModal_class2))||EditAccountModal_class;EditAccountModal.propTypes={edit:prop_types_default().bool.isRequired,user:prop_types_default().object.isRequired,groups:prop_types_default().object.isRequired,teams:prop_types_default().object.isRequired,departments:prop_types_default().object.isRequired,saveEditAccount:prop_types_default().func.isRequired,fetchGroups:prop_types_default().func.isRequired,unloadGroups:prop_types_default().func.isRequired,fetchTeams:prop_types_default().func.isRequired,unloadTeams:prop_types_default().func.isRequired,fetchDepartments:prop_types_default().func.isRequired,unloadDepartments:prop_types_default().func.isRequired,fetchRoles:prop_types_default().func.isRequired,roles:prop_types_default().object.isRequired},EditAccountModal.defaultProps={edit:!1};const Modals_EditAccountModal=(0,es.$j)((function(state){return{groups:state.groupsState.groups,teams:state.teamsState.teams,departments:state.departmentsState.departments,roles:state.shared.roles}}),{saveEditAccount:accounts_saveEditAccount,fetchGroups:groups_fetchGroups,unloadGroups,fetchTeams:teams_fetchTeams,unloadTeams,fetchDepartments:departments_fetchDepartments,unloadDepartments:departments_unloadDepartments,fetchRoles:common_fetchRoles})(EditAccountModal);function CreateGroupModal_typeof(obj){return CreateGroupModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateGroupModal_typeof(obj)}var CreateGroupModal_class,CreateGroupModal_class2,CreateGroupModal_descriptor;function CreateGroupModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateGroupModal_setPrototypeOf(o,p){return CreateGroupModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},CreateGroupModal_setPrototypeOf(o,p)}function CreateGroupModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateGroupModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateGroupModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateGroupModal_possibleConstructorReturn(this,result)}}function CreateGroupModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateGroupModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreateGroupModal_assertThisInitialized(self)}function CreateGroupModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreateGroupModal_getPrototypeOf(o){return CreateGroupModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateGroupModal_getPrototypeOf(o)}var CreateGroupModal=(0,mobxreact_esm.Pi)((CreateGroupModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateGroupModal_setPrototypeOf(subClass,superClass)}(CreateGroupModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateGroupModal_createSuper(CreateGroupModal);function CreateGroupModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateGroupModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"name",CreateGroupModal_descriptor,CreateGroupModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(CreateGroupModal_assertThisInitialized(_this)),_this}return Constructor=CreateGroupModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchAccounts({type:"customers"}),helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadAccounts()}},{key:"onInputChange",value:function(e){this.name=e.target.value}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;var postData={name:this.name,members:this.membersSelect.getSelected()||[]};this.props.createGroup(postData)}},{key:"render",value:function(){var _this2=this,mappedAccounts=this.props.accounts.map((function(account){return{text:account.get("fullname"),value:account.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,null,react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Create Group")),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Group Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange(e)},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a valid Group name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Group Members"),react.createElement(components_MultiSelect,{items:mappedAccounts,onChange:function(){},ref:function(r){return _this2.membersSelect=r}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Create Group",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}])&&CreateGroupModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateGroupModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateGroupModal}(react.Component),CreateGroupModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(CreateGroupModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateGroupModal_class=CreateGroupModal_class2))||CreateGroupModal_class;CreateGroupModal.propTypes={accounts:prop_types_default().object.isRequired,fetchAccounts:prop_types_default().func.isRequired,unloadAccounts:prop_types_default().func.isRequired,createGroup:prop_types_default().func.isRequired};const Modals_CreateGroupModal=(0,es.$j)((function(state){return{accounts:state.accountsState.accounts}}),{createGroup:groups_createGroup,fetchAccounts:accounts_fetchAccounts,unloadAccounts})(CreateGroupModal);function EditGroupModal_typeof(obj){return EditGroupModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EditGroupModal_typeof(obj)}var EditGroupModal_class,EditGroupModal_class2,EditGroupModal_descriptor;function EditGroupModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EditGroupModal_setPrototypeOf(o,p){return EditGroupModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},EditGroupModal_setPrototypeOf(o,p)}function EditGroupModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EditGroupModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EditGroupModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EditGroupModal_possibleConstructorReturn(this,result)}}function EditGroupModal_possibleConstructorReturn(self,call){if(call&&("object"===EditGroupModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return EditGroupModal_assertThisInitialized(self)}function EditGroupModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function EditGroupModal_getPrototypeOf(o){return EditGroupModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},EditGroupModal_getPrototypeOf(o)}var EditGroupModal=(0,mobxreact_esm.Pi)((EditGroupModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EditGroupModal_setPrototypeOf(subClass,superClass)}(EditGroupModal,_React$Component);var Constructor,protoProps,staticProps,_super=EditGroupModal_createSuper(EditGroupModal);function EditGroupModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditGroupModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"name",EditGroupModal_descriptor,EditGroupModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(EditGroupModal_assertThisInitialized(_this)),_this}return Constructor=EditGroupModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchAccounts({type:"customers",limit:-1}),this.name=this.props.group.name,helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadAccounts()}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;var payload={_id:this.props.group._id,name:this.name,members:this.membersSelect.getSelected()||[],sendMailTo:this.sendMailToSelect.getSelected()||[]};this.props.updateGroup(payload)}},{key:"onInputChange",value:function(e){this.name=e.target.value}},{key:"render",value:function(){var _this2=this,mappedAccounts=this.props.accounts.map((function(account){return{text:account.get("fullname"),value:account.get("_id")}})).toArray(),selectedMembers=this.props.group.members.map((function(member){return member._id})),selectedSendMailTo=this.props.group.sendMailTo.map((function(member){return member._id}));return react.createElement(Modals_BaseModal,null,react.createElement(components_SpinLoader,{active:this.props.accountsLoading}),react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Edit Group")),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Group Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange(e)},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a valid Group name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Group Members"),react.createElement(components_MultiSelect,{items:mappedAccounts,initialSelected:selectedMembers,onChange:function(){},ref:function(r){return _this2.membersSelect=r}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Send Notifications To"),react.createElement(components_MultiSelect,{items:mappedAccounts,initialSelected:selectedSendMailTo,onChange:function(){},ref:function(r){return _this2.sendMailToSelect=r}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Save Group",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}])&&EditGroupModal_defineProperties(Constructor.prototype,protoProps),staticProps&&EditGroupModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EditGroupModal}(react.Component),EditGroupModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(EditGroupModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditGroupModal_class=EditGroupModal_class2))||EditGroupModal_class;EditGroupModal.propTypes={group:prop_types_default().object.isRequired,accounts:prop_types_default().object.isRequired,updateGroup:prop_types_default().func.isRequired,fetchAccounts:prop_types_default().func.isRequired,unloadAccounts:prop_types_default().func.isRequired,accountsLoading:prop_types_default().bool.isRequired};const Modals_EditGroupModal=(0,es.$j)((function(state){return{accounts:state.accountsState.accounts,accountsLoading:state.accountsState.loading}}),{updateGroup:groups_updateGroup,fetchAccounts:accounts_fetchAccounts,unloadAccounts})(EditGroupModal);function CreateTeamModal_typeof(obj){return CreateTeamModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateTeamModal_typeof(obj)}var CreateTeamModal_class,CreateTeamModal_class2,CreateTeamModal_descriptor;function CreateTeamModal_extends(){return CreateTeamModal_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},CreateTeamModal_extends.apply(this,arguments)}function CreateTeamModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateTeamModal_setPrototypeOf(o,p){return CreateTeamModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},CreateTeamModal_setPrototypeOf(o,p)}function CreateTeamModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateTeamModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateTeamModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateTeamModal_possibleConstructorReturn(this,result)}}function CreateTeamModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateTeamModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreateTeamModal_assertThisInitialized(self)}function CreateTeamModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreateTeamModal_getPrototypeOf(o){return CreateTeamModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateTeamModal_getPrototypeOf(o)}var CreateTeamModal=(0,mobxreact_esm.Pi)((CreateTeamModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateTeamModal_setPrototypeOf(subClass,superClass)}(CreateTeamModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateTeamModal_createSuper(CreateTeamModal);function CreateTeamModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateTeamModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"name",CreateTeamModal_descriptor,CreateTeamModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(CreateTeamModal_assertThisInitialized(_this)),_this}return Constructor=CreateTeamModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchAccounts({limit:-1}),helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadAccounts()}},{key:"onInputChange",value:function(e){this.name=e.target.value}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;var payload={name:this.name,members:this.membersSelect.getSelected()};this.props.createTeam(payload)}},{key:"render",value:function(){var _this2=this,mappedAccounts=this.props.accounts.filter((function(account){return!0===account.getIn(["role","isAgent"])&&!account.get("deleted")})).map((function(account){return{text:account.get("fullname"),value:account.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,CreateTeamModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Create Team")),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Team Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange(e)},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a valid Team name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Team Members"),react.createElement(components_MultiSelect,{items:mappedAccounts,onChange:function(){},ref:function(r){return _this2.membersSelect=r}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Create Team",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}])&&CreateTeamModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateTeamModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateTeamModal}(react.Component),CreateTeamModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(CreateTeamModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateTeamModal_class=CreateTeamModal_class2))||CreateTeamModal_class;CreateTeamModal.propTypes={fetchAccounts:prop_types_default().func.isRequired,unloadAccounts:prop_types_default().func.isRequired,accounts:prop_types_default().object.isRequired,createTeam:prop_types_default().func.isRequired};const Modals_CreateTeamModal=(0,es.$j)((function(state){return{accounts:state.accountsState.accounts}}),{fetchAccounts:accounts_fetchAccounts,unloadAccounts,createTeam:teams_createTeam})(CreateTeamModal);function EditTeamModal_typeof(obj){return EditTeamModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EditTeamModal_typeof(obj)}var EditTeamModal_class,EditTeamModal_class2,EditTeamModal_descriptor;function EditTeamModal_extends(){return EditTeamModal_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},EditTeamModal_extends.apply(this,arguments)}function EditTeamModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EditTeamModal_setPrototypeOf(o,p){return EditTeamModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},EditTeamModal_setPrototypeOf(o,p)}function EditTeamModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EditTeamModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EditTeamModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EditTeamModal_possibleConstructorReturn(this,result)}}function EditTeamModal_possibleConstructorReturn(self,call){if(call&&("object"===EditTeamModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return EditTeamModal_assertThisInitialized(self)}function EditTeamModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function EditTeamModal_getPrototypeOf(o){return EditTeamModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},EditTeamModal_getPrototypeOf(o)}var EditTeamModal=(0,mobxreact_esm.Pi)((EditTeamModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EditTeamModal_setPrototypeOf(subClass,superClass)}(EditTeamModal,_React$Component);var Constructor,protoProps,staticProps,_super=EditTeamModal_createSuper(EditTeamModal);function EditTeamModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditTeamModal),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"name",EditTeamModal_descriptor,EditTeamModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(EditTeamModal_assertThisInitialized(_this)),_this}return Constructor=EditTeamModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchAccounts({type:"all",limit:-1}),this.name=this.props.team.name,helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadAccounts()}},{key:"onInputChange",value:function(e){this.name=e.target.value}},{key:"onSaveTeamEdit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;var payload={_id:this.props.team._id,name:this.name,members:this.membersSelect.getSelected()||[]};this.props.saveEditTeam(payload)}},{key:"render",value:function(){var _this2=this,mappedAccounts=this.props.accounts.filter((function(account){return!0===account.getIn(["role","isAgent"])&&!account.get("deleted")})).map((function(account){return{text:account.get("fullname"),value:account.get("_id")}})).toArray(),selectedMembers=this.props.team.members;return react.createElement(Modals_BaseModal,EditTeamModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement(components_SpinLoader,{active:this.props.accountsLoading}),react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Edit Team")),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onSaveTeamEdit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Team Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange(e)},"data-validation":"length","data-validation-length":"2-25","data-validation-error-msg":"Please enter a valid Team name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Team Members"),react.createElement(components_MultiSelect,{items:mappedAccounts,initialSelected:selectedMembers,onChange:function(){},ref:function(r){return _this2.membersSelect=r}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Save Team",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}])&&EditTeamModal_defineProperties(Constructor.prototype,protoProps),staticProps&&EditTeamModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EditTeamModal}(react.Component),EditTeamModal_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(EditTeamModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditTeamModal_class=EditTeamModal_class2))||EditTeamModal_class;EditTeamModal.propTypes={team:prop_types_default().object.isRequired,fetchAccounts:prop_types_default().func.isRequired,unloadAccounts:prop_types_default().func.isRequired,saveEditTeam:prop_types_default().func.isRequired,accounts:prop_types_default().object.isRequired,accountsLoading:prop_types_default().bool.isRequired};const Modals_EditTeamModal=(0,es.$j)((function(state){return{accounts:state.accountsState.accounts,accountsLoading:state.accountsState.loading}}),{fetchAccounts:accounts_fetchAccounts,unloadAccounts,saveEditTeam})(EditTeamModal);function CreateDepartmentModal_typeof(obj){return CreateDepartmentModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CreateDepartmentModal_typeof(obj)}var CreateDepartmentModal_class,CreateDepartmentModal_class2,CreateDepartmentModal_descriptor,CreateDepartmentModal_descriptor2,CreateDepartmentModal_descriptor3;function CreateDepartmentModal_extends(){return CreateDepartmentModal_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},CreateDepartmentModal_extends.apply(this,arguments)}function CreateDepartmentModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function CreateDepartmentModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CreateDepartmentModal_setPrototypeOf(o,p){return CreateDepartmentModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},CreateDepartmentModal_setPrototypeOf(o,p)}function CreateDepartmentModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CreateDepartmentModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CreateDepartmentModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CreateDepartmentModal_possibleConstructorReturn(this,result)}}function CreateDepartmentModal_possibleConstructorReturn(self,call){if(call&&("object"===CreateDepartmentModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return CreateDepartmentModal_assertThisInitialized(self)}function CreateDepartmentModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CreateDepartmentModal_getPrototypeOf(o){return CreateDepartmentModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},CreateDepartmentModal_getPrototypeOf(o)}function CreateDepartmentModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var CreateDepartmentModal=(0,mobxreact_esm.Pi)((CreateDepartmentModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CreateDepartmentModal_setPrototypeOf(subClass,superClass)}(CreateDepartmentModal,_React$Component);var Constructor,protoProps,staticProps,_super=CreateDepartmentModal_createSuper(CreateDepartmentModal);function CreateDepartmentModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreateDepartmentModal),CreateDepartmentModal_initializerDefineProperty(_this=_super.call(this,props),"name",CreateDepartmentModal_descriptor,CreateDepartmentModal_assertThisInitialized(_this)),CreateDepartmentModal_initializerDefineProperty(_this,"allGroups",CreateDepartmentModal_descriptor2,CreateDepartmentModal_assertThisInitialized(_this)),CreateDepartmentModal_initializerDefineProperty(_this,"publicGroups",CreateDepartmentModal_descriptor3,CreateDepartmentModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(CreateDepartmentModal_assertThisInitialized(_this)),_this}return Constructor=CreateDepartmentModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchTeams(),this.props.fetchGroups({type:"all"}),helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"componentWillUnmount",value:function(){this.props.unloadTeams(),this.props.unloadGroups()}},{key:"onInputChange",value:function(e){this.name=e.target.value}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;if(!this.allGroups&&!this.publicGroups&&null==this.groupSelect.getSelected())return helpers_default().UI.showSnackbar("Can not create department without a group selected or all groups enabled!",!0),!1;if(null==this.teamsSelect.getSelected())return helpers_default().UI.showSnackbar("Can not create department without a team selected!",!0),!1;var payload={name:this.name,teams:this.teamsSelect.getSelected(),allGroups:this.allGroups,publicGroups:this.publicGroups,groups:this.allGroups?[]:this.groupSelect.getSelected()};this.props.createDepartment(payload)}},{key:"render",value:function(){var _this2=this,mappedTeams=this.props.teams.map((function(team){return{text:team.get("name"),value:team.get("_id")}})).toArray(),mappedGroups=this.props.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,CreateDepartmentModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Create Department")),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Department Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange(e)},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a valid department name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Teams"),react.createElement(components_MultiSelect,{items:mappedTeams,onChange:function(){},ref:function(r){return _this2.teamsSelect=r}})),react.createElement("hr",null),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h4",{style:{paddingLeft:2}},"Access all current and new customer groups?")),react.createElement("div",{className:"uk-float-right md-switch md-green",style:{marginTop:5}},react.createElement("label",null,"Yes",react.createElement("input",{type:"checkbox",value:this.allGroups,onChange:function(e){_this2.allGroups=e.target.checked,_this2.allGroups?_this2.groupSelect.selectAll():_this2.groupSelect.deselectAll()}}),react.createElement("span",{className:"lever"})))),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h4",{style:{paddingLeft:2}},"Access all current and new public groups?")),react.createElement("div",{className:"uk-float-right md-switch md-green",style:{marginTop:1}},react.createElement("label",null,"Yes",react.createElement("input",{type:"checkbox",checked:this.publicGroups,onChange:function(e){_this2.publicGroups=e.target.checked}}),react.createElement("span",{className:"lever"})))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Customer Groups"),react.createElement(components_MultiSelect,{items:mappedGroups,onChange:function(){},ref:function(r){return _this2.groupSelect=r},disabled:this.allGroups})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Create Department",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}])&&CreateDepartmentModal_defineProperties(Constructor.prototype,protoProps),staticProps&&CreateDepartmentModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CreateDepartmentModal}(react.Component),CreateDepartmentModal_descriptor=CreateDepartmentModal_applyDecoratedDescriptor(CreateDepartmentModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CreateDepartmentModal_descriptor2=CreateDepartmentModal_applyDecoratedDescriptor(CreateDepartmentModal_class2.prototype,"allGroups",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),CreateDepartmentModal_descriptor3=CreateDepartmentModal_applyDecoratedDescriptor(CreateDepartmentModal_class2.prototype,"publicGroups",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),CreateDepartmentModal_class=CreateDepartmentModal_class2))||CreateDepartmentModal_class;CreateDepartmentModal.propTypes={createDepartment:prop_types_default().func.isRequired,fetchTeams:prop_types_default().func.isRequired,unloadTeams:prop_types_default().func.isRequired,fetchGroups:prop_types_default().func.isRequired,unloadGroups:prop_types_default().func.isRequired,teams:prop_types_default().object.isRequired,groups:prop_types_default().object.isRequired};const Modals_CreateDepartmentModal=(0,es.$j)((function(state){return{teams:state.teamsState.teams,groups:state.groupsState.groups}}),{createDepartment:departments_createDepartment,fetchTeams:teams_fetchTeams,unloadTeams,fetchGroups:groups_fetchGroups,unloadGroups})(CreateDepartmentModal);function EditDepartmentModal_typeof(obj){return EditDepartmentModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EditDepartmentModal_typeof(obj)}var EditDepartmentModal_class,EditDepartmentModal_class2,EditDepartmentModal_descriptor,EditDepartmentModal_descriptor2,EditDepartmentModal_descriptor3;function EditDepartmentModal_extends(){return EditDepartmentModal_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},EditDepartmentModal_extends.apply(this,arguments)}function EditDepartmentModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function EditDepartmentModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EditDepartmentModal_setPrototypeOf(o,p){return EditDepartmentModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},EditDepartmentModal_setPrototypeOf(o,p)}function EditDepartmentModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EditDepartmentModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EditDepartmentModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EditDepartmentModal_possibleConstructorReturn(this,result)}}function EditDepartmentModal_possibleConstructorReturn(self,call){if(call&&("object"===EditDepartmentModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return EditDepartmentModal_assertThisInitialized(self)}function EditDepartmentModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function EditDepartmentModal_getPrototypeOf(o){return EditDepartmentModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},EditDepartmentModal_getPrototypeOf(o)}function EditDepartmentModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var EditDepartmentModal=(0,mobxreact_esm.Pi)((EditDepartmentModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EditDepartmentModal_setPrototypeOf(subClass,superClass)}(EditDepartmentModal,_React$Component);var Constructor,protoProps,staticProps,_super=EditDepartmentModal_createSuper(EditDepartmentModal);function EditDepartmentModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditDepartmentModal),EditDepartmentModal_initializerDefineProperty(_this=_super.call(this,props),"name",EditDepartmentModal_descriptor,EditDepartmentModal_assertThisInitialized(_this)),EditDepartmentModal_initializerDefineProperty(_this,"allGroups",EditDepartmentModal_descriptor2,EditDepartmentModal_assertThisInitialized(_this)),EditDepartmentModal_initializerDefineProperty(_this,"publicGroups",EditDepartmentModal_descriptor3,EditDepartmentModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(EditDepartmentModal_assertThisInitialized(_this)),_this}return Constructor=EditDepartmentModal,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchTeams(),this.props.fetchGroups({type:"all"}),this.name=this.props.department.get("name"),this.allGroups=this.props.department.get("allGroups"),this.publicGroups=!!this.allGroups||this.props.department.get("publicGroups"),helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs(),this.allGroups&&this.groupSelect.selectAll()}},{key:"componentWillUnmount",value:function(){this.props.unloadTeams(),this.props.unloadGroups()}},{key:"onInputChange",value:function(e){this.name=e.target.value}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;var payload={_id:this.props.department.get("_id"),name:this.name,teams:this.teamsSelect.getSelected(),allGroups:this.allGroups,publicGroups:this.publicGroups,groups:this.allGroups?[]:this.groupSelect.getSelected()};this.props.updateDepartment(payload)}},{key:"render",value:function(){var _this2=this,department=this.props.department,departmentTeams=department.get("teams"),departmentGroups=department.get("groups"),mappedTeams=this.props.teams.map((function(team){return{text:team.get("name"),value:team.get("_id")}})).toArray(),mappedGroups=this.props.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})).toArray();return react.createElement(Modals_BaseModal,EditDepartmentModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Edit Department: ",department.get("name"))),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Department Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange(e)},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a valid department name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Teams"),react.createElement(components_MultiSelect,{items:mappedTeams,initialSelected:departmentTeams?departmentTeams.map((function(d){return d.get("_id")})).toArray():[],onChange:function(){},ref:function(r){return _this2.teamsSelect=r}})),react.createElement("hr",null),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h4",{style:{paddingLeft:2}},"Access all current and new customer groups?")),react.createElement("div",{className:"uk-float-right md-switch md-green",style:{marginTop:5}},react.createElement("label",null,"Yes",react.createElement("input",{type:"checkbox",checked:this.allGroups,onChange:function(e){_this2.allGroups=e.target.checked,_this2.publicGroups=_this2.allGroups,_this2.allGroups?_this2.groupSelect.selectAll():_this2.groupSelect.deselectAll()}}),react.createElement("span",{className:"lever"})))),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h4",{style:{paddingLeft:2}},"Access all current and new public groups?")),react.createElement("div",{className:"uk-float-right md-switch md-green",style:{marginTop:1}},react.createElement("label",null,"Yes",react.createElement("input",{type:"checkbox",checked:this.publicGroups,onChange:function(e){_this2.publicGroups=e.target.checked}}),react.createElement("span",{className:"lever"})))),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",{style:{marginBottom:5}},"Customer Groups"),react.createElement(components_MultiSelect,{items:mappedGroups,onChange:function(){},initialSelected:departmentGroups?departmentGroups.map((function(d){return d.get("_id")})).toArray():[],ref:function(r){return _this2.groupSelect=r},disabled:this.allGroups})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Save Department",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}])&&EditDepartmentModal_defineProperties(Constructor.prototype,protoProps),staticProps&&EditDepartmentModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EditDepartmentModal}(react.Component),EditDepartmentModal_descriptor=EditDepartmentModal_applyDecoratedDescriptor(EditDepartmentModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditDepartmentModal_descriptor2=EditDepartmentModal_applyDecoratedDescriptor(EditDepartmentModal_class2.prototype,"allGroups",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),EditDepartmentModal_descriptor3=EditDepartmentModal_applyDecoratedDescriptor(EditDepartmentModal_class2.prototype,"publicGroups",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),EditDepartmentModal_class=EditDepartmentModal_class2))||EditDepartmentModal_class;EditDepartmentModal.propTypes={department:prop_types_default().object.isRequired,updateDepartment:prop_types_default().func.isRequired,fetchTeams:prop_types_default().func.isRequired,unloadTeams:prop_types_default().func.isRequired,fetchGroups:prop_types_default().func.isRequired,unloadGroups:prop_types_default().func.isRequired,teams:prop_types_default().object.isRequired,groups:prop_types_default().object.isRequired};const Modals_EditDepartmentModal=(0,es.$j)((function(state){return{teams:state.teamsState.teams,groups:state.groupsState.groups}}),{updateDepartment:departments_updateDepartment,fetchTeams:teams_fetchTeams,unloadTeams,fetchGroups:groups_fetchGroups,unloadGroups})(EditDepartmentModal),notices_fetchNotices=(0,createAction.Z)(FETCH_NOTICES.ACTION),notices_updateNotice=((0,createAction.Z)(CREATE_NOTICE.ACTION),(0,createAction.Z)(UPDATE_NOTICE.ACTION)),unloadNotices=(0,createAction.Z)(UNLOAD_NOTICES.ACTION,(payload=>payload),(()=>({thunk:!0}))),notices_deleteNotice=(0,createAction.Z)(DELETE_NOTICE.ACTION);var index_module=__webpack_require__(786);const PopoverColorPicker_useClickOutside=(ref,handler)=>{(0,react.useEffect)((()=>{let startedInside=!1,startedWhenMounted=!1;const listener=event=>{!startedInside&&startedWhenMounted&&ref.current&&!ref.current.contains(event.target)&&handler(event)},validateEventStart=event=>{startedWhenMounted=ref.current,startedInside=ref.current&&ref.current.contains(event.target)};return document.addEventListener("mousedown",validateEventStart),document.addEventListener("touchstart",validateEventStart),document.addEventListener("click",listener),()=>{document.removeEventListener("mousedown",validateEventStart),document.removeEventListener("touchstart",validateEventStart),document.removeEventListener("click",listener)}}),[ref,handler])};function PopoverColorPicker_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return PopoverColorPicker_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PopoverColorPicker_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PopoverColorPicker_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var EditNoticeModal_class,EditNoticeModal_class2,EditNoticeModal_descriptor,EditNoticeModal_descriptor2,EditNoticeModal_descriptor3,EditNoticeModal_descriptor4,PopoverColorPicker=function(_ref){var color=_ref.color,onChange=_ref.onChange,style=_ref.style,popover=(0,react.useRef)(),_useState2=PopoverColorPicker_slicedToArray((0,react.useState)(!1),2),isOpen=_useState2[0],toggle=_useState2[1],close=(0,react.useCallback)((function(){return toggle(!1)}),[]);return PopoverColorPicker_useClickOutside(popover,close),react.createElement("div",{className:"picker",style},react.createElement("div",{className:"swatch",style:{backgroundColor:color},onClick:function(){return toggle(!0)}}),isOpen&&react.createElement("div",{className:"popover",ref:popover},react.createElement(index_module.gW,{color,onChange})))};function EditNoticeModal_typeof(obj){return EditNoticeModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EditNoticeModal_typeof(obj)}function EditNoticeModal_extends(){return EditNoticeModal_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},EditNoticeModal_extends.apply(this,arguments)}function EditNoticeModal_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function EditNoticeModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EditNoticeModal_setPrototypeOf(o,p){return EditNoticeModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},EditNoticeModal_setPrototypeOf(o,p)}function EditNoticeModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EditNoticeModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EditNoticeModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EditNoticeModal_possibleConstructorReturn(this,result)}}function EditNoticeModal_possibleConstructorReturn(self,call){if(call&&("object"===EditNoticeModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return EditNoticeModal_assertThisInitialized(self)}function EditNoticeModal_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function EditNoticeModal_getPrototypeOf(o){return EditNoticeModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},EditNoticeModal_getPrototypeOf(o)}function EditNoticeModal_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var EditNoticeModal=(0,mobxreact_esm.Pi)((EditNoticeModal_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EditNoticeModal_setPrototypeOf(subClass,superClass)}(EditNoticeModal,_React$Component);var Constructor,protoProps,staticProps,_super=EditNoticeModal_createSuper(EditNoticeModal);function EditNoticeModal(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditNoticeModal),EditNoticeModal_initializerDefineProperty(_this=_super.call(this,props),"name",EditNoticeModal_descriptor,EditNoticeModal_assertThisInitialized(_this)),EditNoticeModal_initializerDefineProperty(_this,"message",EditNoticeModal_descriptor2,EditNoticeModal_assertThisInitialized(_this)),EditNoticeModal_initializerDefineProperty(_this,"color",EditNoticeModal_descriptor3,EditNoticeModal_assertThisInitialized(_this)),EditNoticeModal_initializerDefineProperty(_this,"fontColor",EditNoticeModal_descriptor4,EditNoticeModal_assertThisInitialized(_this)),(0,mobx_esm.rC)(EditNoticeModal_assertThisInitialized(_this)),_this}return Constructor=EditNoticeModal,protoProps=[{key:"componentDidMount",value:function(){this.name=this.props.notice.name,this.message=this.props.notice.message,this.color=this.props.notice.color,this.fontColor=this.props.notice.fontColor,helpers_default().UI.inputs(),helpers_default().UI.reRenderInputs(),helpers_default().formvalidator()}},{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){helpers_default().UI.reRenderInputs()}},{key:"onInputChange",value:function(target,e){this[target]=e.target.value}},{key:"onFormSubmit",value:function(e){if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!1;var payload={_id:this.props.notice._id,name:this.name,message:this.message,color:this.color,fontColor:this.fontColor};this.props.updateNotice(payload)}},{key:"render",value:function(){var _this2=this;return react.createElement(Modals_BaseModal,EditNoticeModal_extends({},this.props,{options:{bgclose:!1}}),react.createElement("div",{className:"mb-25"},react.createElement("h2",null,"Edit Notice")),react.createElement("form",{className:"uk-form-stacked",onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Name"),react.createElement("input",{type:"text",className:"md-input",value:this.name,onChange:function(e){return _this2.onInputChange("name",e)},"data-validation":"length","data-validation-length":"min2","data-validation-error-msg":"Please enter a notice name. (Must contain 2 characters)"})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Message"),react.createElement("textarea",{className:"md-input",value:this.message,onChange:function(e){return _this2.onInputChange("message",e)},"data-validation":"length","data-validation-length":"min10","data-validation-error-msg":"Please enter a notice message. (Must contain 10 characters)"})),react.createElement("div",null,react.createElement("span",{style:{display:"inline-block",float:"left",paddingTop:5}},"Background Color"),react.createElement(PopoverColorPicker,{color:this.color,onChange:function(c){_this2.color=c},style:{float:"left",marginLeft:5,marginRight:15}}),react.createElement("span",{style:{display:"inline-block",float:"left",paddingTop:5}},"Font Color"),react.createElement(PopoverColorPicker,{color:this.fontColor,onChange:function(c){_this2.fontColor=c},style:{float:"left",marginLeft:5}})),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Close",flat:!0,waves:!0,extraClass:"uk-modal-close"}),react.createElement(components_Button,{text:"Save Notice",flat:!0,waves:!0,style:"primary",type:"submit"}))))}}],protoProps&&EditNoticeModal_defineProperties(Constructor.prototype,protoProps),staticProps&&EditNoticeModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EditNoticeModal}(react.Component),EditNoticeModal_descriptor=EditNoticeModal_applyDecoratedDescriptor(EditNoticeModal_class2.prototype,"name",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditNoticeModal_descriptor2=EditNoticeModal_applyDecoratedDescriptor(EditNoticeModal_class2.prototype,"message",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditNoticeModal_descriptor3=EditNoticeModal_applyDecoratedDescriptor(EditNoticeModal_class2.prototype,"color",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditNoticeModal_descriptor4=EditNoticeModal_applyDecoratedDescriptor(EditNoticeModal_class2.prototype,"fontColor",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),EditNoticeModal_class=EditNoticeModal_class2))||EditNoticeModal_class;EditNoticeModal.propTypes={notice:prop_types_default().object.isRequired,updateNotice:prop_types_default().func.isRequired};const Modals_EditNoticeModal=(0,es.$j)((function(state){return{}}),{updateNotice:notices_updateNotice})(EditNoticeModal);function LinkWarningModal_typeof(obj){return LinkWarningModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},LinkWarningModal_typeof(obj)}function LinkWarningModal_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function LinkWarningModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function LinkWarningModal_setPrototypeOf(o,p){return LinkWarningModal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},LinkWarningModal_setPrototypeOf(o,p)}function LinkWarningModal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=LinkWarningModal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=LinkWarningModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return LinkWarningModal_possibleConstructorReturn(this,result)}}function LinkWarningModal_possibleConstructorReturn(self,call){if(call&&("object"===LinkWarningModal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function LinkWarningModal_getPrototypeOf(o){return LinkWarningModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},LinkWarningModal_getPrototypeOf(o)}var LinkWarningModal=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&LinkWarningModal_setPrototypeOf(subClass,superClass)}(LinkWarningModal,_React$Component);var Constructor,protoProps,staticProps,_super=LinkWarningModal_createSuper(LinkWarningModal);function LinkWarningModal(){var _this;LinkWarningModal_classCallCheck(this,LinkWarningModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).proceedToLink=function(e,link){e.preventDefault(),_this.props.hideModal(),setTimeout((function(){window.open(link,"_blank")}),300)},_this}return Constructor=LinkWarningModal,(protoProps=[{key:"render",value:function(){var _this2=this;return react.createElement(Modals_BaseModal,null,react.createElement("div",null,react.createElement("h2",null,"Redirect Warning"),react.createElement("p",null,"You are being redirected to a site outside this domain. Proceed with caution."),react.createElement("p",null,react.createElement("strong",null,this.props.href))),react.createElement("div",{className:"uk-modal-footer uk-text-right"},react.createElement(components_Button,{text:"Cancel",extraClass:"uk-modal-close",flat:!0,waves:!0}),react.createElement(components_Button,{text:"Proceed",type:"submit",flat:!0,waves:!0,style:"danger",onClick:function(e){return _this2.proceedToLink(e,_this2.props.href)}})))}}])&&LinkWarningModal_defineProperties(Constructor.prototype,protoProps),staticProps&&LinkWarningModal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),LinkWarningModal}(react.Component);LinkWarningModal.propTypes={hideModal:prop_types_default().func.isRequired,href:prop_types_default().string.isRequired};var MODAL_COMPONENTS={NOTICE_ALERT:Modals_NoticeAlertModal,CREATE_TICKET:Modals_CreateTicketModal,CREATE_TICKET_TYPE:Modals_CreateTicketTypeModal,DELETE_TICKET_TYPE:Modals_DeleteTicketTypeModal,FILTER_TICKET:Modals_FilterTicketsModal,ADD_PRIORITY_TO_TYPE:Modals_AddPriorityToTypeModal,CREATE_PRIORITY:Modals_CreatePriorityModal,DELETE_PRIORITY:Modals_DeletePriorityModal,CREATE_TAG:Modals_CreateTagModal,ADD_TAGS_MODAL:Modals_AddTagsModal,CREATE_ROLE:Modals_CreateRoleModal,DELETE_ROLE:Modals_DeleteRoleModal,VIEW_ALL_NOTIFICATIONS:Modals_ViewAllNotificationsModal,CREATE_ACCOUNT:Modals_CreateAccountModal,EDIT_ACCOUNT:Modals_EditAccountModal,CREATE_GROUP:Modals_CreateGroupModal,EDIT_GROUP:Modals_EditGroupModal,CREATE_TEAM:Modals_CreateTeamModal,EDIT_TEAM:Modals_EditTeamModal,CREATE_DEPARTMENT:Modals_CreateDepartmentModal,EDIT_DEPARTMENT:Modals_EditDepartmentModal,EDIT_NOTICE:Modals_EditNoticeModal,LINK_WARNING:(0,es.$j)(null,{hideModal})(LinkWarningModal)},ModalRoot=function(_ref){var modalType=_ref.modalType,modalProps=_ref.modalProps;if(!modalType)return react.createElement("div",{id:"modal-wrap"});var SpecificModal=MODAL_COMPONENTS[modalType];return react.createElement(SpecificModal,modalProps)};ModalRoot.propTypes={modalType:prop_types_default().string,modalProps:prop_types_default().object};const Modals=(0,es.$j)((function(state){return state.modal}))(ModalRoot),search_fetchSearchResults=(0,createAction.Z)(FETCH_SEARCH_RESULTS.ACTION,(payload=>payload),(()=>({thunk:!0}))),search_unloadSearchResults=(0,createAction.Z)(UNLOAD_SEARCH_RESULTS.ACTION,(payload=>payload),(()=>({thunk:!0})));function PageTitle_typeof(obj){return PageTitle_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PageTitle_typeof(obj)}function PageTitle_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PageTitle_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PageTitle_setPrototypeOf(o,p){return PageTitle_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},PageTitle_setPrototypeOf(o,p)}function PageTitle_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=PageTitle_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PageTitle_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PageTitle_possibleConstructorReturn(this,result)}}function PageTitle_possibleConstructorReturn(self,call){if(call&&("object"===PageTitle_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PageTitle_getPrototypeOf(o){return PageTitle_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},PageTitle_getPrototypeOf(o)}var PageTitle=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PageTitle_setPrototypeOf(subClass,superClass)}(PageTitle,_React$Component);var Constructor,protoProps,staticProps,_super=PageTitle_createSuper(PageTitle);function PageTitle(){return PageTitle_classCallCheck(this,PageTitle),_super.apply(this,arguments)}return Constructor=PageTitle,(protoProps=[{key:"render",value:function(){var _this$props=this.props,title=_this$props.title,rightComponent=_this$props.rightComponent,shadow=_this$props.shadow;return react.createElement("div",{className:"nopadding"},react.createElement("div",{className:"uk-width-1-1 page-title dt-borderBottom pl-25 uk-clearfix"+(shadow?"":" noshadow")},react.createElement("p",{className:"uk-float-left"},title),react.createElement("div",{className:"uk-float-right uk-clearfix uk-width-1-2"},rightComponent)))}}])&&PageTitle_defineProperties(Constructor.prototype,protoProps),staticProps&&PageTitle_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PageTitle}(react.Component);PageTitle.propTypes={title:prop_types_default().string.isRequired,shadow:prop_types_default().bool,rightComponent:prop_types_default().element},PageTitle.defaultProps={shadow:!1};const components_PageTitle=PageTitle;function Table_typeof(obj){return Table_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Table_typeof(obj)}function Table_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Table_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Table_setPrototypeOf(o,p){return Table_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Table_setPrototypeOf(o,p)}function Table_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Table_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Table_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Table_possibleConstructorReturn(this,result)}}function Table_possibleConstructorReturn(self,call){if(call&&("object"===Table_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Table_getPrototypeOf(o){return Table_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Table_getPrototypeOf(o)}var Table=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Table_setPrototypeOf(subClass,superClass)}(Table,_React$Component);var Constructor,protoProps,staticProps,_super=Table_createSuper(Table);function Table(){return Table_classCallCheck(this,Table),_super.apply(this,arguments)}return Constructor=Table,(protoProps=[{key:"render",value:function(){var _this$props=this.props,headers=_this$props.headers,striped=_this$props.striped,stickyHeader=_this$props.stickyHeader,children=_this$props.children,extraClass=_this$props.extraClass,useBody=_this$props.useBody,tableClass="uk-table"+(striped?" uk-table-striped stripe":"")+(stickyHeader?" sticky-header fixed-width":"")+(extraClass?" "+extraClass:"");return react.createElement("table",{className:tableClass,style:this.props.style,ref:this.props.tableRef},headers&&react.createElement("thead",null,react.createElement("tr",null,headers)),useBody&&react.createElement("tbody",{className:"scrollable full-height c91-fix"},children),!useBody&&children)}}])&&Table_defineProperties(Constructor.prototype,protoProps),staticProps&&Table_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Table}(react.Component);Table.propTypes={headers:prop_types_default().arrayOf(prop_types_default().element),tableRef:prop_types_default().func,striped:prop_types_default().bool,stickyHeader:prop_types_default().bool,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired,style:prop_types_default().object,extraClass:prop_types_default().string,useBody:prop_types_default().bool},Table.defaultProps={striped:!0,stickyHeader:!0,useBody:!0};const components_Table=Table;function TableHeader_typeof(obj){return TableHeader_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TableHeader_typeof(obj)}function TableHeader_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TableHeader_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TableHeader_setPrototypeOf(o,p){return TableHeader_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},TableHeader_setPrototypeOf(o,p)}function TableHeader_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TableHeader_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TableHeader_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TableHeader_possibleConstructorReturn(this,result)}}function TableHeader_possibleConstructorReturn(self,call){if(call&&("object"===TableHeader_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TableHeader_getPrototypeOf(o){return TableHeader_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},TableHeader_getPrototypeOf(o)}var TableHeader=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TableHeader_setPrototypeOf(subClass,superClass)}(TableHeader,_React$Component);var Constructor,protoProps,staticProps,_super=TableHeader_createSuper(TableHeader);function TableHeader(){return TableHeader_classCallCheck(this,TableHeader),_super.apply(this,arguments)}return Constructor=TableHeader,(protoProps=[{key:"render",value:function(){var _this$props=this.props,width=_this$props.width,height=_this$props.height,padding=_this$props.padding,textAlign=_this$props.textAlign,text=_this$props.text,component=_this$props.component;return react.createElement("th",{style:{width,padding,height,verticalAlign:"middle",fontSize:12,textTransform:"uppercase",textAlign}},component,text)}}])&&TableHeader_defineProperties(Constructor.prototype,protoProps),staticProps&&TableHeader_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TableHeader}(react.Component);TableHeader.propTypes={width:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),height:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),padding:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),textAlign:prop_types_default().string,text:prop_types_default().string,component:prop_types_default().oneOfType([prop_types_default().element,prop_types_default().func])},TableHeader.defaultProps={textAlign:"left"};const Table_TableHeader=TableHeader;function TableRow_typeof(obj){return TableRow_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TableRow_typeof(obj)}function TableRow_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TableRow_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TableRow_setPrototypeOf(o,p){return TableRow_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},TableRow_setPrototypeOf(o,p)}function TableRow_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TableRow_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TableRow_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TableRow_possibleConstructorReturn(this,result)}}function TableRow_possibleConstructorReturn(self,call){if(call&&("object"===TableRow_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TableRow_getPrototypeOf(o){return TableRow_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},TableRow_getPrototypeOf(o)}var TableRow=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TableRow_setPrototypeOf(subClass,superClass)}(TableRow,_React$Component);var Constructor,protoProps,staticProps,_super=TableRow_createSuper(TableRow);function TableRow(){return TableRow_classCallCheck(this,TableRow),_super.apply(this,arguments)}return Constructor=TableRow,(protoProps=[{key:"render",value:function(){var clickable=this.props.clickable,clickableStyle={cursor:"pointer"},style=this.props.style;return style=clickable?this.props.style?Object.assign(this.props.style,clickableStyle):clickableStyle:this.props.style?Object.assign(this.props.style,{cursor:"default"}):{cursor:"default"},react.createElement("tr",{className:this.props.className,style,onClick:this.props.onClick},this.props.children)}}])&&TableRow_defineProperties(Constructor.prototype,protoProps),staticProps&&TableRow_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TableRow}(react.Component);TableRow.propTypes={clickable:prop_types_default().bool,onClick:prop_types_default().func,style:prop_types_default().object,className:prop_types_default().any,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired},TableRow.defaultProps={clickable:!1};const Table_TableRow=TableRow;function TitlePagination_typeof(obj){return TitlePagination_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TitlePagination_typeof(obj)}function TitlePagination_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TitlePagination_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TitlePagination_setPrototypeOf(o,p){return TitlePagination_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},TitlePagination_setPrototypeOf(o,p)}function TitlePagination_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TitlePagination_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TitlePagination_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TitlePagination_possibleConstructorReturn(this,result)}}function TitlePagination_possibleConstructorReturn(self,call){if(call&&("object"===TitlePagination_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TitlePagination_getPrototypeOf(o){return TitlePagination_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},TitlePagination_getPrototypeOf(o)}var TitlePagination=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TitlePagination_setPrototypeOf(subClass,superClass)}(TitlePagination,_React$Component);var Constructor,protoProps,staticProps,_super=TitlePagination_createSuper(TitlePagination);function TitlePagination(){return TitlePagination_classCallCheck(this,TitlePagination),_super.apply(this,arguments)}return Constructor=TitlePagination,staticProps=[{key:"formatNumber",value:function(num){return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"calcStartEnd",value:function(page,limit){return page=Number(page),limit=Number(limit),{start:0===page?"1":page*limit,end:0===page?limit:page*limit+limit}}}],(protoProps=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){jquery_default()(this.parent).ajaxify()}},{key:"render",value:function(){var _this=this,_this$props=this.props,limit=_this$props.limit,total=_this$props.total,prevEnabled=_this$props.prevEnabled,nextEnabled=_this$props.nextEnabled,currentPage=_this$props.currentPage,prevPage=_this$props.prevPage,nextPage=_this$props.nextPage,type=_this$props.type,filter=_this$props.filter,link=function(page){return type?"filter"===type.toLowerCase()?"".concat(filter.raw,"&page=").concat(page):"/tickets/".concat(type,"/page/").concat(page,"/"):"#"},startEnd=TitlePagination.calcStartEnd(currentPage,limit);return react.createElement("div",{className:"pagination uk-float-left uk-clearfix",ref:function(r){return _this.parent=r}},react.createElement("span",{className:"pagination-info"},TitlePagination.formatNumber(startEnd.start)," - ",TitlePagination.formatNumber(startEnd.end)," of"," ",TitlePagination.formatNumber(total)),react.createElement("ul",{className:"button-group"},react.createElement("li",{className:"pagination"},react.createElement("a",{href:prevEnabled?link(prevPage):"#",title:"Previous Page",className:"btn md-btn-wave-light"+(prevEnabled?"":" no-ajaxy")},react.createElement("i",{className:"fa fa-large fa-chevron-left"}))),react.createElement("li",{className:"pagination"},react.createElement("a",{href:nextEnabled?link(nextPage):"#",title:"Next Page",className:"btn md-btn-wave-light"+(nextEnabled?"":" no-ajaxy")},react.createElement("i",{className:"fa fa-large fa-chevron-right"})))))}}])&&TitlePagination_defineProperties(Constructor.prototype,protoProps),staticProps&&TitlePagination_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TitlePagination}(react.Component);TitlePagination.propTypes={limit:prop_types_default().number,total:prop_types_default().string,type:prop_types_default().string,filter:prop_types_default().object,prevEnabled:prop_types_default().bool.isRequired,nextEnabled:prop_types_default().bool.isRequired,currentPage:prop_types_default().string,prevPage:prop_types_default().number,nextPage:prop_types_default().number},TitlePagination.defaultProps={limit:50,prevPage:0,nextPage:1};const components_TitlePagination=TitlePagination;function PageContent_typeof(obj){return PageContent_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PageContent_typeof(obj)}function PageContent_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PageContent_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PageContent_setPrototypeOf(o,p){return PageContent_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},PageContent_setPrototypeOf(o,p)}function PageContent_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=PageContent_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PageContent_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PageContent_possibleConstructorReturn(this,result)}}function PageContent_possibleConstructorReturn(self,call){if(call&&("object"===PageContent_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PageContent_getPrototypeOf(o){return PageContent_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},PageContent_getPrototypeOf(o)}var PageContent=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PageContent_setPrototypeOf(subClass,superClass)}(PageContent,_React$Component);var Constructor,protoProps,staticProps,_super=PageContent_createSuper(PageContent);function PageContent(){return PageContent_classCallCheck(this,PageContent),_super.apply(this,arguments)}return Constructor=PageContent,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().resizeFullHeight(),helpers_default().setupScrollers()}},{key:"render",value:function(){return react.createElement("div",{id:this.props.id,className:"page-content no-border-top full-height scrollable "+(this.props.extraClass||""),style:{padding:this.props.padding}},react.createElement("div",{style:{paddingBottom:this.props.paddingBottom}},this.props.children))}}])&&PageContent_defineProperties(Constructor.prototype,protoProps),staticProps&&PageContent_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PageContent}(react.Component);PageContent.propTypes={id:prop_types_default().string,padding:prop_types_default().number,paddingBottom:prop_types_default().number,extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired},PageContent.defaultProps={padding:25,paddingBottom:100};const components_PageContent=PageContent;function TableCell_typeof(obj){return TableCell_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TableCell_typeof(obj)}function TableCell_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TableCell_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TableCell_setPrototypeOf(o,p){return TableCell_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},TableCell_setPrototypeOf(o,p)}function TableCell_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TableCell_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TableCell_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TableCell_possibleConstructorReturn(this,result)}}function TableCell_possibleConstructorReturn(self,call){if(call&&("object"===TableCell_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TableCell_getPrototypeOf(o){return TableCell_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},TableCell_getPrototypeOf(o)}var TableCell=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TableCell_setPrototypeOf(subClass,superClass)}(TableCell,_React$Component);var Constructor,protoProps,staticProps,_super=TableCell_createSuper(TableCell);function TableCell(){return TableCell_classCallCheck(this,TableCell),_super.apply(this,arguments)}return Constructor=TableCell,(protoProps=[{key:"render",value:function(){return react.createElement("td",this.props,this.props.children)}}])&&TableCell_defineProperties(Constructor.prototype,protoProps),staticProps&&TableCell_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TableCell}(react.Component);TableCell.propTypes={children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const Table_TableCell=TableCell;function PageTitleButton_typeof(obj){return PageTitleButton_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PageTitleButton_typeof(obj)}function PageTitleButton_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PageTitleButton_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PageTitleButton_setPrototypeOf(o,p){return PageTitleButton_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},PageTitleButton_setPrototypeOf(o,p)}function PageTitleButton_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=PageTitleButton_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PageTitleButton_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PageTitleButton_possibleConstructorReturn(this,result)}}function PageTitleButton_possibleConstructorReturn(self,call){if(call&&("object"===PageTitleButton_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PageTitleButton_getPrototypeOf(o){return PageTitleButton_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},PageTitleButton_getPrototypeOf(o)}var PageTitleButton=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PageTitleButton_setPrototypeOf(subClass,superClass)}(PageTitleButton,_React$Component);var Constructor,protoProps,staticProps,_super=PageTitleButton_createSuper(PageTitleButton);function PageTitleButton(){return PageTitleButton_classCallCheck(this,PageTitleButton),_super.apply(this,arguments)}return Constructor=PageTitleButton,(protoProps=[{key:"render",value:function(){return react.createElement("div",{className:"pagination uk-float-left"},react.createElement("ul",{className:"button-group uk-float-left"},react.createElement("li",{className:"pagination relative"},react.createElement("a",{href:this.props.href,className:"btn no-ajaxy",style:{borderRadius:3},onClick:this.props.onButtonClick},this.props.fontAwesomeIcon&&react.createElement("i",{className:"fa fa-large ".concat(this.props.fontAwesomeIcon)}),this.props.mdIcon&&react.createElement("i",{className:"material-icons"},this.props.mdIcon)))))}}])&&PageTitleButton_defineProperties(Constructor.prototype,protoProps),staticProps&&PageTitleButton_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PageTitleButton}(react.Component);PageTitleButton.propTypes={href:prop_types_default().string.isRequired,fontAwesomeIcon:prop_types_default().string,mdIcon:prop_types_default().string,onButtonClick:prop_types_default().func},PageTitleButton.defaultProps={href:"#"};const components_PageTitleButton=PageTitleButton;var anime_es=__webpack_require__(721),sanitize_html=__webpack_require__(722),sanitize_html_default=__webpack_require__.n(sanitize_html);function SearchResults_typeof(obj){return SearchResults_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SearchResults_typeof(obj)}function SearchResults_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function SearchResults_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SearchResults_setPrototypeOf(o,p){return SearchResults_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},SearchResults_setPrototypeOf(o,p)}function SearchResults_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SearchResults_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SearchResults_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SearchResults_possibleConstructorReturn(this,result)}}function SearchResults_possibleConstructorReturn(self,call){if(call&&("object"===SearchResults_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SearchResults_getPrototypeOf(o){return SearchResults_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},SearchResults_getPrototypeOf(o)}var SearchResults=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SearchResults_setPrototypeOf(subClass,superClass)}(SearchResults,_React$Component);var Constructor,protoProps,staticProps,_super=SearchResults_createSuper(SearchResults);function SearchResults(){return SearchResults_classCallCheck(this,SearchResults),_super.apply(this,arguments)}return Constructor=SearchResults,protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.setupDataTethers(),jquery_default()(document).on("mousedown",SearchResults.documentMouseEvent)}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){SearchResults.toggleAnimation(!0,!1),jquery_default()(document).off("mousedown",SearchResults.documentMouseEvent)}},{key:"onSearchItemClick",value:function(e){e.preventDefault(),SearchResults.toggleAnimation(!0,!1);var href=e.currentTarget.getAttribute("href");History.pushState(null,null,href),this.props.unloadSearchResults()}},{key:"render",value:function(){var _this=this,_this$props=this.props,target=_this$props.target,searchResults=_this$props.searchResults,error=_this$props.error;return react.createElement("div",{className:"search-results-container animate-in","data-tether":"{target: '".concat(target,"', pos: 'top right', targetAttachment: 'bottom right', offset: '0 8px'}")},error&&react.createElement("h4",{className:"uk-width-1-1 uk-text-center text-light mt-15 text-danger"},error.error),!searchResults||searchResults.size<1&&react.createElement("h4",{className:"uk-width-1-1 uk-text-center text-light mt-15"},"No Results"),react.createElement("ul",{className:"search-results-list"},searchResults&&searchResults.map((function(item){var doc=item.get("_source");return react.createElement("li",{key:item.get("_id"),className:"search-results-item status-".concat(doc.get("status"))},react.createElement("a",{href:"/tickets/".concat(doc.get("uid")),onClick:function(e){return _this.onSearchItemClick(e)}},react.createElement("span",{className:"priority",style:{background:"".concat(doc.getIn(["priority","htmlColor"]))}}),react.createElement("span",{className:"uid"},doc.get("uid")),react.createElement("span",{className:"subject"},doc.get("subject")),react.createElement("span",{className:"issue"},sanitize_html_default()(doc.get("issue"),{allowedTags:[]}))))}))))}}],staticProps=[{key:"documentMouseEvent",value:function(event){if(jquery_default()(event.target).parents(".search-results-container").length>0)return!1;SearchResults.toggleAnimation(!0,!1)}},{key:"toggleAnimation",value:function(forceState,state){for(var animateItems=jquery_default()(".search-results-container"),docElemStyle=document.documentElement.style,transitionProp=angular.isString(docElemStyle.transition)?"transition":"WebkitTransition",i=0;i<animateItems.length;i++){var item=animateItems[i];item.style[transitionProp+"Delay"]=50*i+"ms",forceState?state?(item.classList.remove("hide"),item.classList.add("is-in")):(item.classList.add("hide"),item.classList.remove("is-in")):(item.classList.toggle("hide"),item.classList.toggle("is-in"))}}}],protoProps&&SearchResults_defineProperties(Constructor.prototype,protoProps),staticProps&&SearchResults_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SearchResults}(react.Component);SearchResults.propTypes={target:prop_types_default().string.isRequired,searchResults:prop_types_default().object.isRequired,error:prop_types_default().object,unloadSearchResults:prop_types_default().func.isRequired};const components_SearchResults=(0,es.$j)((function(state){return{searchResults:state.searchState.results,error:state.searchState.error}}),{unloadSearchResults:search_unloadSearchResults},null,{forwardRef:!0})(SearchResults);function TicketsContainer_typeof(obj){return TicketsContainer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TicketsContainer_typeof(obj)}var TicketsContainer_class,TicketsContainer_class2,TicketsContainer_descriptor;function TicketsContainer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TicketsContainer_setPrototypeOf(o,p){return TicketsContainer_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},TicketsContainer_setPrototypeOf(o,p)}function TicketsContainer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TicketsContainer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TicketsContainer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TicketsContainer_possibleConstructorReturn(this,result)}}function TicketsContainer_possibleConstructorReturn(self,call){if(call&&("object"===TicketsContainer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return TicketsContainer_assertThisInitialized(self)}function TicketsContainer_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function TicketsContainer_getPrototypeOf(o){return TicketsContainer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},TicketsContainer_getPrototypeOf(o)}var TicketsContainer=(0,mobxreact_esm.Pi)((TicketsContainer_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TicketsContainer_setPrototypeOf(subClass,superClass)}(TicketsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=TicketsContainer_createSuper(TicketsContainer);function TicketsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TicketsContainer),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"searchTerm",TicketsContainer_descriptor,TicketsContainer_assertThisInitialized(_this)),_this.selectedTickets=[],(0,mobx_esm.rC)(TicketsContainer_assertThisInitialized(_this)),_this.onTicketCreated=_this.onTicketCreated.bind(TicketsContainer_assertThisInitialized(_this)),_this.onTicketUpdated=_this.onTicketUpdated.bind(TicketsContainer_assertThisInitialized(_this)),_this.onTicketDeleted=_this.onTicketDeleted.bind(TicketsContainer_assertThisInitialized(_this)),_this}return Constructor=TicketsContainer,(protoProps=[{key:"componentDidMount",value:function(){socket_default().socket.on("$trudesk:client:ticket:created",this.onTicketCreated),socket_default().socket.on("$trudesk:client:ticket:updated",this.onTicketUpdated),socket_default().socket.on("$trudesk:client:ticket:deleted",this.onTicketDeleted),this.props.fetchTickets({limit:50,page:this.props.page,type:this.props.view,filter:this.props.filter})}},{key:"componentDidUpdate",value:function(){this.timeline&&(this.timeline.pause(),this.timeline.seek(0)),anime_es.Z.remove("tr.overdue td"),this.timeline=anime_es.Z.timeline({direction:"alternate",duration:800,autoPlay:!1,easing:"steps(1)",loop:!0,backgroundColor:"blue"}),this.timeline.add({targets:"tr.overdue td",backgroundColor:"#b71c1c",color:"#ffffff"}),this.timeline.play()}},{key:"componentWillUnmount",value:function(){anime_es.Z.remove("tr.overdue td"),this.timeline=null,this.props.unloadTickets(),socket_default().socket.off("$trudesk:client:ticket:created",this.onTicketCreated),socket_default().socket.off("$trudesk:client:ticket:updated",this.onTicketUpdated),socket_default().socket.off("$trudesk:client:ticket:deleted",this.onTicketDeleted)}},{key:"onTicketCreated",value:function(ticket){"0"===this.props.page&&this.props.ticketEvent({type:"created",data:ticket})}},{key:"onTicketUpdated",value:function(data){this.props.ticketUpdated(data)}},{key:"onTicketDeleted",value:function(id){this.props.ticketEvent({type:"deleted",data:id})}},{key:"onTicketCheckChanged",value:function(e,id){e.target.checked?this.selectedTickets.push(id):this.selectedTickets=(0,lodash.without)(this.selectedTickets,id),this.selectedTickets=(0,lodash.uniq)(this.selectedTickets)}},{key:"onSetStatus",value:function(status){var _this2=this,statusText="";switch(status){case 0:statusText="New";break;case 1:statusText="Open";break;case 2:statusText="Pending";break;case 3:statusText="Closed"}var batch=this.selectedTickets.map((function(id){return{id,status}}));axios_default().put("/api/v2/tickets/batch",{batch}).then((function(res){res.data.success?(helpers_default().UI.showSnackbar({text:"Ticket status set to ".concat(statusText)}),_this2._clearChecked()):(helpers_default().UI.showSnackbar("An unknown error occurred.",!0),logger.error(res.data.error))})).catch((function(error){logger.error(error),helpers_default().UI.showSnackbar("An Error occurred. Please check console.",!0)}))}},{key:"onDeleteClicked",value:function(){var _this3=this;(0,lodash.each)(this.selectedTickets,(function(id){_this3.props.deleteTicket({id})})),this._clearChecked()}},{key:"onSearchTermChanged",value:function(e){this.searchTerm=e.target.value,this.searchTerm.length>3?(components_SearchResults.toggleAnimation(!0,!0),this.props.fetchSearchResults({term:this.searchTerm})):components_SearchResults.toggleAnimation(!0,!1)}},{key:"_onSearchFocus",value:function(e){this.searchTerm.length>3&&components_SearchResults.toggleAnimation(!0,!0)}},{key:"onSearchKeypress",value:function(e){this.searchTerm.length>3&&this.props.fetchSearchResults({term:this.searchTerm})}},{key:"_selectAll",value:function(){var _this4=this;this.selectedTickets=[],this.ticketsTable.querySelectorAll('td > input[type="checkbox"]').forEach((function(item){_this4.selectedTickets.push(item.dataset.ticket),item.checked=!0})),this.selectedTickets=(0,lodash.uniq)(this.selectedTickets)}},{key:"_clearChecked",value:function(){this.selectedTickets=[],this.ticketsTable.querySelectorAll('td > input[type="checkbox"]').forEach((function(item){item.checked=!1})),this.selectAllCheckbox.checked=!1}},{key:"onSelectAll",value:function(e){e.target.checked?this._selectAll():this._clearChecked()}},{key:"render",value:function(){for(var _this5=this,loadingItems=[],i=0;i<51;i++){for(var cells=[],k=0;k<10;k++)cells.push(react.createElement(Table_TableCell,{key:k,className:"vam"},react.createElement("div",{className:"loadingTextAnimation"})));loadingItems.push(react.createElement(Table_TableRow,{key:Math.random()},cells))}var selectAllCheckbox=react.createElement("div",{style:{marginLeft:17}},react.createElement("input",{type:"checkbox",id:"select_all",style:{display:"none"},className:"svgcheckinput",onChange:function(e){return _this5.onSelectAll(e)},ref:function(r){return _this5.selectAllCheckbox=r}}),react.createElement("label",{htmlFor:"select_all",className:"svgcheck"},react.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 18 18"},react.createElement("path",{d:"M1,9 L1,3.5 C1,2 2,1 3.5,1 L14.5,1 C16,1 17,2 17,3.5 L17,14.5 C17,16 16,17 14.5,17 L3.5,17 C2,17 1,16 1,14.5 L1,9 Z"}),react.createElement("polyline",{points:"1 9 7 14 15 4"}))));return react.createElement("div",null,react.createElement(components_PageTitle,{title:"Tickets",shadow:!1,rightComponent:react.createElement("div",null,react.createElement("div",{className:"uk-float-right"},react.createElement(components_TitlePagination,{limit:50,total:this.props.totalCount,type:this.props.view,prevEnabled:this.props.prevEnabled,nextEnabled:this.props.nextEnabled,currentPage:this.props.page,prevPage:this.props.prevPage,nextPage:this.props.nextPage,filter:this.props.filter}),react.createElement(components_PageTitleButton,{fontAwesomeIcon:"fa-refresh",onButtonClick:function(e){e.preventDefault(),_this5.props.unloadTickets().then(_this5.props.fetchTickets({type:_this5.props.view,page:_this5.props.page}))}}),react.createElement(components_PageTitleButton,{fontAwesomeIcon:"fa-filter",onButtonClick:function(e){e.preventDefault(),_this5.props.showModal("FILTER_TICKET")}}),react.createElement(Dropdown_DropdownTrigger,{pos:"bottom-right",offset:5,extraClass:"uk-float-left"},react.createElement(components_PageTitleButton,{fontAwesomeIcon:"fa-tasks"}),react.createElement(components_Dropdown,{small:!0,width:120},react.createElement(Dropdown_DropdownItem,{text:"Create",onClick:function(){return _this5.props.showModal("CREATE_TICKET")}}),react.createElement(DropdownSeperator,null),react.createElement(Dropdown_DropdownItem,{text:"Set Open",onClick:function(){return _this5.onSetStatus(1)}}),react.createElement(Dropdown_DropdownItem,{text:"Set Pending",onClick:function(){return _this5.onSetStatus(2)}}),react.createElement(Dropdown_DropdownItem,{text:"Set Closed",onClick:function(){return _this5.onSetStatus(3)}}),helpers_default().canUser("tickets:delete",!0)&&react.createElement(DropdownSeperator,null),helpers_default().canUser("tickets:delete",!0)&&react.createElement(Dropdown_DropdownItem,{text:"Delete",extraClass:"text-danger",onClick:function(){return _this5.onDeleteClicked()}}))),react.createElement("div",{className:"uk-float-right"},react.createElement("div",{id:"ticket-search-box",className:"search-box uk-float-left nb",style:{marginTop:8,paddingLeft:0}},react.createElement("input",{type:"text",id:"tickets_Search",placeholder:"Search",className:"ticket-top-search",value:this.searchTerm,onChange:function(e){return _this5.onSearchTermChanged(e)},onFocus:function(e){return _this5._onSearchFocus(e)}})))),react.createElement(components_SearchResults,{target:"#ticket-search-box",ref:function(r){return _this5.searchContainer=r}}))}),react.createElement(components_PageContent,{padding:0,paddingBottom:0,extraClass:"uk-position-relative"},react.createElement(components_Table,{tableRef:function(ref){return _this5.ticketsTable=ref},style:{margin:0},extraClass:"pDataTable",stickyHeader:!0,striped:!0,headers:[react.createElement(Table_TableHeader,{key:0,width:45,height:50,component:selectAllCheckbox}),react.createElement(Table_TableHeader,{key:1,width:60,text:"Status"}),react.createElement(Table_TableHeader,{key:2,width:65,text:"#"}),react.createElement(Table_TableHeader,{key:3,width:"23%",text:"Subject"}),react.createElement(Table_TableHeader,{key:4,width:110,text:"Created"}),react.createElement(Table_TableHeader,{key:5,width:125,text:"Requester"}),react.createElement(Table_TableHeader,{key:6,width:175,text:"Customer"}),react.createElement(Table_TableHeader,{key:7,text:"Assignee"}),react.createElement(Table_TableHeader,{key:8,width:110,text:"Due Date"}),react.createElement(Table_TableHeader,{key:9,text:"Updated"})]},!this.props.loading&&this.props.tickets.size<1&&react.createElement(Table_TableRow,{clickable:!1},react.createElement(Table_TableCell,{colSpan:10},react.createElement("h5",{style:{margin:10}},"No Tickets Found"))),this.props.loading&&loadingItems,!this.props.loading&&this.props.tickets.map((function(ticket){var a,status=function(){switch(ticket.get("status")){case 0:return"new";case 1:return"open";case 2:return"pending";case 3:return"closed"}},updated=ticket.get("updated")?helpers_default().formatDate(ticket.get("updated"),helpers_default().getShortDateFormat())+", "+helpers_default().formatDate(ticket.get("updated"),helpers_default().getTimeFormat()):"--",dueDate=ticket.get("dueDate")?helpers_default().formatDate(ticket.get("dueDate"),helpers_default().getShortDateFormat()):"--";return react.createElement(Table_TableRow,{key:ticket.get("_id"),className:"ticket-".concat(status()," ").concat(function(){if(!_this5.props.common.showOverdue||-1!==[2,3].indexOf(ticket.get("status")))return!1;var overdueIn=ticket.getIn(["priority","overdueIn"]),now=moment_timezone_default()(),updated=ticket.get("updated"),timeout=(updated=updated?moment_timezone_default()(updated):moment_timezone_default()(ticket.get("date"))).clone().add(overdueIn,"m");return now.isAfter(timeout)}()?"overdue":""),clickable:!0,onClick:function(e){if(e.target.closest("td").getElementsByTagName("input").length>0)return!1;History.pushState(null,"Ticket-".concat(ticket.get("uid")),"/tickets/".concat(ticket.get("uid")))}},react.createElement(Table_TableCell,{className:"ticket-priority nbb vam",style:{borderColor:ticket.getIn(["priority","htmlColor"]),padding:"18px 15px"}},react.createElement("input",{type:"checkbox",id:"c_".concat(ticket.get("_id")),"data-ticket":ticket.get("_id"),style:{display:"none"},onChange:function(e){return _this5.onTicketCheckChanged(e,ticket.get("_id"))},className:"svgcheckinput"}),react.createElement("label",{htmlFor:"c_".concat(ticket.get("_id")),className:"svgcheck"},react.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 18 18"},react.createElement("path",{d:"M1,9 L1,3.5 C1,2 2,1 3.5,1 L14.5,1 C16,1 17,2 17,3.5 L17,14.5 C17,16 16,17 14.5,17 L3.5,17 C2,17 1,16 1,14.5 L1,9 Z"}),react.createElement("polyline",{points:"1 9 7 14 15 4"})))),react.createElement(Table_TableCell,{className:"ticket-status ticket-".concat(status()," vam nbb uk-text-center")},react.createElement("span",{className:"uk-display-inline-block"},status()[0].toUpperCase())),react.createElement(Table_TableCell,{className:"vam nbb"},ticket.get("uid")),react.createElement(Table_TableCell,{className:"vam nbb"},ticket.get("subject")),react.createElement(Table_TableCell,{className:"vam nbb"},helpers_default().formatDate(ticket.get("date"),helpers_default().getShortDateFormat())),react.createElement(Table_TableCell,{className:"vam nbb"},ticket.getIn(["owner","fullname"])),react.createElement(Table_TableCell,{className:"vam nbb"},ticket.getIn(["group","name"])),react.createElement(Table_TableCell,{className:"vam nbb"},(a=ticket.get("assignee"))?a.get("fullname"):"--"),react.createElement(Table_TableCell,{className:"vam nbb"},dueDate),react.createElement(Table_TableCell,{className:"vam nbb"},updated))})))))}}])&&TicketsContainer_defineProperties(Constructor.prototype,protoProps),staticProps&&TicketsContainer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TicketsContainer}(react.Component),TicketsContainer_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(TicketsContainer_class2.prototype,"searchTerm",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),TicketsContainer_class=TicketsContainer_class2))||TicketsContainer_class;TicketsContainer.propTypes={view:prop_types_default().string.isRequired,page:prop_types_default().string.isRequired,prevPage:prop_types_default().number.isRequired,nextPage:prop_types_default().number.isRequired,prevEnabled:prop_types_default().bool.isRequired,nextEnabled:prop_types_default().bool.isRequired,tickets:prop_types_default().object.isRequired,totalCount:prop_types_default().string.isRequired,loading:prop_types_default().bool.isRequired,fetchTickets:prop_types_default().func.isRequired,deleteTicket:prop_types_default().func.isRequired,ticketEvent:prop_types_default().func.isRequired,unloadTickets:prop_types_default().func.isRequired,ticketUpdated:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired,fetchSearchResults:prop_types_default().func.isRequired,common:prop_types_default().object.isRequired,filter:prop_types_default().object.isRequired},TicketsContainer.defaultProps={view:"active",page:0,prevEnabled:!0,nextEnabled:!0};const Tickets_TicketsContainer=(0,es.$j)((function(state){return{tickets:state.ticketsState.tickets,totalCount:state.ticketsState.totalCount,prevPage:state.ticketsState.prevPage,nextPage:state.ticketsState.nextPage,loading:state.ticketsState.loading,common:state.common}}),{fetchTickets:tickets_fetchTickets,deleteTicket:tickets_deleteTicket,ticketEvent:tickets_ticketEvent,unloadTickets,ticketUpdated:tickets_ticketUpdated,fetchSearchResults:search_fetchSearchResults,showModal})(TicketsContainer);var AssigneeDropdownPartial_class,AssigneeDropdownPartial_class2,AssigneeDropdownPartial_descriptor,sortBy=__webpack_require__(286),sortBy_default=__webpack_require__.n(sortBy),union=__webpack_require__(300),union_default=__webpack_require__.n(union);function AssigneeDropdownPartial_typeof(obj){return AssigneeDropdownPartial_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},AssigneeDropdownPartial_typeof(obj)}function AssigneeDropdownPartial_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function AssigneeDropdownPartial_setPrototypeOf(o,p){return AssigneeDropdownPartial_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},AssigneeDropdownPartial_setPrototypeOf(o,p)}function AssigneeDropdownPartial_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=AssigneeDropdownPartial_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=AssigneeDropdownPartial_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return AssigneeDropdownPartial_possibleConstructorReturn(this,result)}}function AssigneeDropdownPartial_possibleConstructorReturn(self,call){if(call&&("object"===AssigneeDropdownPartial_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return AssigneeDropdownPartial_assertThisInitialized(self)}function AssigneeDropdownPartial_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function AssigneeDropdownPartial_getPrototypeOf(o){return AssigneeDropdownPartial_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},AssigneeDropdownPartial_getPrototypeOf(o)}var AssigneeDropdownPartial=(0,mobxreact_esm.Pi)((AssigneeDropdownPartial_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&AssigneeDropdownPartial_setPrototypeOf(subClass,superClass)}(AssigneeDropdownPartial,_React$Component);var Constructor,protoProps,staticProps,_super=AssigneeDropdownPartial_createSuper(AssigneeDropdownPartial);function AssigneeDropdownPartial(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AssigneeDropdownPartial),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"agents",AssigneeDropdownPartial_descriptor,AssigneeDropdownPartial_assertThisInitialized(_this)),(0,mobx_esm.rC)(AssigneeDropdownPartial_assertThisInitialized(_this)),_this.onUpdateAssigneeList=_this.onUpdateAssigneeList.bind(AssigneeDropdownPartial_assertThisInitialized(_this)),_this}return Constructor=AssigneeDropdownPartial,(protoProps=[{key:"componentDidMount",value:function(){socket_default().socket.on("updateAssigneeList",this.onUpdateAssigneeList)}},{key:"componentWillUnmount",value:function(){socket_default().socket.off("updateAssigneeList",this.onUpdateAssigneeList)}},{key:"onUpdateAssigneeList",value:function(data){this.agents=data||[]}},{key:"render",value:function(){var _this2=this;return react.createElement(PDropdown,{title:"Select Assignee",id:"assigneeDropdown",override:!0,leftArrow:!0,topOffset:125,leftOffset:35,minHeight:215,rightComponent:react.createElement("a",{className:"hoverUnderline no-ajaxy",onClick:function(){helpers_default().hideAllpDropDowns(),_this2.props.onClearClick&&_this2.props.onClearClick(),socket_default().socket.emit("clearAssignee",_this2.props.ticketId)}},"Clear Assignee")},this.agents.map((function(agent){return react.createElement("li",{key:agent._id,onClick:function(){_this2.props.onAssigneeClick&&_this2.props.onAssigneeClick({agent}),helpers_default().hideAllpDropDowns(),socket_default().socket.emit("setAssignee",{_id:agent._id,ticketId:_this2.props.ticketId})}},react.createElement("a",{className:"messageNotification no-ajaxy",role:"button"},react.createElement("div",{className:"uk-clearfix"},react.createElement(Avatar_Avatar,{userId:agent._id,image:agent.image,size:50}),react.createElement("div",{className:"messageAuthor"},react.createElement("strong",null,agent.fullname)),react.createElement("div",{className:"messageSnippet"},react.createElement("span",null,agent.email)),react.createElement("div",{className:"messageDate"},agent.title))))})))}}])&&AssigneeDropdownPartial_defineProperties(Constructor.prototype,protoProps),staticProps&&AssigneeDropdownPartial_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AssigneeDropdownPartial}(react.Component),AssigneeDropdownPartial_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(AssigneeDropdownPartial_class2.prototype,"agents",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),AssigneeDropdownPartial_class=AssigneeDropdownPartial_class2))||AssigneeDropdownPartial_class;AssigneeDropdownPartial.propTypes={ticketId:prop_types_default().string.isRequired,onClearClick:prop_types_default().func,onAssigneeClick:prop_types_default().func};const Tickets_AssigneeDropdownPartial=AssigneeDropdownPartial;var react_html_parser_lib=__webpack_require__(310);function CommentNotePartial_typeof(obj){return CommentNotePartial_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CommentNotePartial_typeof(obj)}function CommentNotePartial_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function CommentNotePartial_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CommentNotePartial_setPrototypeOf(o,p){return CommentNotePartial_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},CommentNotePartial_setPrototypeOf(o,p)}function CommentNotePartial_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=CommentNotePartial_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CommentNotePartial_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CommentNotePartial_possibleConstructorReturn(this,result)}}function CommentNotePartial_possibleConstructorReturn(self,call){if(call&&("object"===CommentNotePartial_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function CommentNotePartial_getPrototypeOf(o){return CommentNotePartial_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},CommentNotePartial_getPrototypeOf(o)}var setupImages=function(parent){parent.body.querySelectorAll("img:not(.hasLinked)").forEach((function(i){return helpers_default().setupImageLink(i)}))},setupLinks=function(parent){parent.body.querySelectorAll("a").forEach((function(i){return helpers_default().setupLinkWarning(i)}))},CommentNotePartial=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&CommentNotePartial_setPrototypeOf(subClass,superClass)}(CommentNotePartial,_React$Component);var Constructor,protoProps,staticProps,_super=CommentNotePartial_createSuper(CommentNotePartial);function CommentNotePartial(){return CommentNotePartial_classCallCheck(this,CommentNotePartial),_super.apply(this,arguments)}return Constructor=CommentNotePartial,(protoProps=[{key:"componentDidMount",value:function(){setupImages(this),setupLinks(this)}},{key:"componentDidUpdate",value:function(){setupImages(this),setupLinks(this)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var _this=this,_this$props=this.props,ticketSubject=_this$props.ticketSubject,comment=_this$props.comment,isNote=_this$props.isNote,dateFormat=_this$props.dateFormat,onEditClick=_this$props.onEditClick,onRemoveClick=_this$props.onRemoveClick,dateFormatted=helpers_default().formatDate(comment.date,dateFormat);return react.createElement("div",{className:"ticket-comment"},react.createElement(Avatar_Avatar,{image:comment.owner.image,userId:comment.owner._id}),react.createElement("div",{className:"issue-text"},react.createElement("h3",null,"Re: ",ticketSubject),react.createElement("a",{className:"comment-email-link",href:"mailto:".concat(comment.owner.email)},comment.owner.fullname," <",comment.owner.email,">"),react.createElement("br",null),react.createElement("time",{dateTime:dateFormatted,title:dateFormatted,"data-uk-tooltip":"{delay: 200}"},helpers_default().calendarDate(comment.date)),react.createElement("br",null),isNote&&react.createElement("span",{className:"uk-badge uk-badge-small nomargin-left-right text-white"},"NOTE"),react.createElement("div",{className:"comment-body",style:{marginTop:10},ref:function(r){return _this.body=r}},isNote&&react.createElement(react.Fragment,null,(0,react_html_parser_lib.ZP)(comment.note)),!isNote&&react.createElement(react.Fragment,null,(0,react_html_parser_lib.ZP)(comment.comment)))),3!==this.props.ticketStatus&&react.createElement("div",{className:"comment-actions"},helpers_default().hasPermOverRole(comment.owner.role,null,"comments:delete",!0)&&react.createElement("div",{className:"remove-comment",onClick:onRemoveClick},react.createElement("i",{className:"material-icons"},"")),helpers_default().hasPermOverRole(comment.owner.role,null,"comments:update",!0)&&react.createElement("div",{className:"edit-comment",onClick:onEditClick},react.createElement("i",{className:"material-icons"},""))))}}])&&CommentNotePartial_defineProperties(Constructor.prototype,protoProps),staticProps&&CommentNotePartial_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CommentNotePartial}(react.Component);CommentNotePartial.propTypes={ticketStatus:prop_types_default().number.isRequired,ticketSubject:prop_types_default().string.isRequired,comment:prop_types_default().object.isRequired,dateFormat:prop_types_default().string.isRequired,isNote:prop_types_default().bool.isRequired,onEditClick:prop_types_default().func.isRequired,onRemoveClick:prop_types_default().func.isRequired},CommentNotePartial.defaultProps={isNote:!1};const Tickets_CommentNotePartial=CommentNotePartial;function DatePicker_typeof(obj){return DatePicker_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DatePicker_typeof(obj)}function DatePicker_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function DatePicker_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DatePicker_setPrototypeOf(o,p){return DatePicker_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},DatePicker_setPrototypeOf(o,p)}function DatePicker_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=DatePicker_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DatePicker_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DatePicker_possibleConstructorReturn(this,result)}}function DatePicker_possibleConstructorReturn(self,call){if(call&&("object"===DatePicker_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DatePicker_getPrototypeOf(o){return DatePicker_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},DatePicker_getPrototypeOf(o)}var DatePicker=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DatePicker_setPrototypeOf(subClass,superClass)}(DatePicker,_React$Component);var Constructor,protoProps,staticProps,_super=DatePicker_createSuper(DatePicker);function DatePicker(){return DatePicker_classCallCheck(this,DatePicker),_super.apply(this,arguments)}return Constructor=DatePicker,(protoProps=[{key:"componentDidMount",value:function(){var _this=this;jquery_default()(this.datepicker).on("change.uk.datepicker",(function(e){_this.props.onChange&&_this.props.onChange(e)}))}},{key:"componentDidUpdate",value:function(){this.props.value&&jquery_default()(this.datepicker).val(helpers_default().formatDate(this.props.value,this.props.format)),void 0===this.props.value&&jquery_default()(this.datepicker).val("")}},{key:"componentWillUnmount",value:function(){jquery_default()(this.datepicker).off("change.uk.datepicker")}},{key:"render",value:function(){var _this2=this,value=this.props.value;return react.createElement(react.Fragment,null,react.createElement("input",{ref:function(r){return _this2.datepicker=r},type:"text",readOnly:!0,className:"md-input small-font p-0","data-uk-datepicker":"{format:'".concat(this.props.format,"'}"),"data-validation":"shortDate",style:this.style||{width:"97%"},defaultValue:helpers_default().formatDate(value,this.props.format)}))}}])&&DatePicker_defineProperties(Constructor.prototype,protoProps),staticProps&&DatePicker_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DatePicker}(react.Component);DatePicker.propTypes={format:prop_types_default().string.isRequired,onChange:prop_types_default().func,value:prop_types_default().string};const components_DatePicker=DatePicker;function IssuePartial_typeof(obj){return IssuePartial_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},IssuePartial_typeof(obj)}var IssuePartial_class,IssuePartial_class2,IssuePartial_descriptor,IssuePartial_descriptor2,IssuePartial_descriptor3,IssuePartial_descriptor4,IssuePartial_descriptor5,IssuePartial_descriptor6;function IssuePartial_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function IssuePartial_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function IssuePartial_setPrototypeOf(o,p){return IssuePartial_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},IssuePartial_setPrototypeOf(o,p)}function IssuePartial_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=IssuePartial_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=IssuePartial_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return IssuePartial_possibleConstructorReturn(this,result)}}function IssuePartial_possibleConstructorReturn(self,call){if(call&&("object"===IssuePartial_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return IssuePartial_assertThisInitialized(self)}function IssuePartial_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function IssuePartial_getPrototypeOf(o){return IssuePartial_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},IssuePartial_getPrototypeOf(o)}function IssuePartial_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var IssuePartial=(0,mobxreact_esm.Pi)((IssuePartial_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&IssuePartial_setPrototypeOf(subClass,superClass)}(IssuePartial,_React$Component);var Constructor,protoProps,staticProps,_super=IssuePartial_createSuper(IssuePartial);function IssuePartial(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,IssuePartial),IssuePartial_initializerDefineProperty(_this=_super.call(this,props),"ticketId",IssuePartial_descriptor,IssuePartial_assertThisInitialized(_this)),IssuePartial_initializerDefineProperty(_this,"status",IssuePartial_descriptor2,IssuePartial_assertThisInitialized(_this)),IssuePartial_initializerDefineProperty(_this,"owner",IssuePartial_descriptor3,IssuePartial_assertThisInitialized(_this)),IssuePartial_initializerDefineProperty(_this,"subject",IssuePartial_descriptor4,IssuePartial_assertThisInitialized(_this)),IssuePartial_initializerDefineProperty(_this,"issue",IssuePartial_descriptor5,IssuePartial_assertThisInitialized(_this)),IssuePartial_initializerDefineProperty(_this,"attachments",IssuePartial_descriptor6,IssuePartial_assertThisInitialized(_this)),(0,mobx_esm.rC)(IssuePartial_assertThisInitialized(_this)),_this.ticketId=_this.props.ticketId,_this.status=_this.props.status,_this.owner=_this.props.owner,_this.subject=_this.props.subject,_this.issue=_this.props.issue,_this.attachments=_this.props.attachments,_this.onUpdateTicketIssue=_this.onUpdateTicketIssue.bind(IssuePartial_assertThisInitialized(_this)),_this.onUpdateTicketAttachments=_this.onUpdateTicketAttachments.bind(IssuePartial_assertThisInitialized(_this)),_this}return Constructor=IssuePartial,(protoProps=[{key:"componentDidMount",value:function(){this.issueBody.querySelectorAll("img:not(.hasLinked)").forEach((function(i){return helpers_default().setupImageLink(i)})),function(parent){parent.issueBody.querySelectorAll("a").forEach((function(i){return helpers_default().setupLinkWarning(i)}))}(this),socket_default().socket.on("updateTicketIssue",this.onUpdateTicketIssue),socket_default().socket.on("updateTicketAttachments",this.onUpdateTicketAttachments)}},{key:"componentDidUpdate",value:function(prevProps){prevProps.ticketId!==this.props.ticketId&&(this.ticketId=this.props.ticketId),prevProps.status!==this.props.status&&(this.status=this.props.status),prevProps.owner!==this.props.owner&&(this.owner=this.props.owner),prevProps.subject!==this.props.subject&&(this.subject=this.props.subject),prevProps.issue!==this.props.issue&&(this.issue=this.props.issue),prevProps.attachments!==this.props.attachments&&(this.attachments=this.props.attachments)}},{key:"componentWillUnmount",value:function(){socket_default().socket.off("updateTicketIssue",this.onUpdateTicketIssue),socket_default().socket.off("updateTicketAttachments",this.onUpdateTicketAttachments)}},{key:"onUpdateTicketIssue",value:function(data){this.ticketId===data._id&&(this.subject=data.subject,this.issue=data.issue)}},{key:"onUpdateTicketAttachments",value:function(data){this.ticketId===data.ticket._id&&(this.attachments=data.ticket.attachments)}},{key:"onAttachmentInputChange",value:function(e){var _this2=this,formData=new FormData,attachmentFile=e.target.files[0];formData.append("ticketId",this.ticketId),formData.append("attachment",attachmentFile);var token=document.querySelector('meta[name="csrf-token"]').getAttribute("content");axios_default().post("/tickets/uploadattachment",formData,{headers:{"Content-Type":"multipart/form-data","CSRF-TOKEN":token}}).then((function(){socket_default().ui.refreshTicketAttachments(_this2.ticketId),helpers_default().UI.showSnackbar("Attachment Successfully Uploaded")})).catch((function(error){logger.error(error),error.response&&logger.error(error.response),helpers_default().UI.showSnackbar(error,!0)}))}},{key:"removeAttachment",value:function(e,attachmentId){var _this3=this;axios_default().delete("/api/v1/tickets/".concat(this.ticketId,"/attachments/remove/").concat(attachmentId)).then((function(){socket_default().ui.refreshTicketAttachments(_this3.ticketId),helpers_default().UI.showSnackbar("Attachment Removed")})).catch((function(error){logger.error(error),error.response&&logger.error(error.response),helpers_default().UI.showSnackbar(error,!0)}))}},{key:"render",value:function(){var _this4=this;return react.createElement("div",{className:"initial-issue uk-clearfix"},react.createElement(Avatar_Avatar,{image:this.owner.image,userId:this.owner._id}),react.createElement("div",{className:"issue-text"},react.createElement("h3",{className:"subject-text"},this.subject),react.createElement("a",{href:"mailto:".concat(this.owner.email)},this.owner.fullname," <",this.owner.email,">"),react.createElement("br",null),react.createElement("time",{dateTime:helpers_default().formatDate(this.props.date,"YYYY-MM-DD HH:mm")},helpers_default().formatDate(this.props.date,this.props.dateFormat)),react.createElement("br",null),react.createElement("ul",{className:"attachments"},this.attachments&&this.attachments.map((function(attachment){return react.createElement("li",{key:attachment._id},react.createElement("a",{href:attachment.path,className:"no-ajaxy",rel:"noopener noreferrer",target:"_blank"},attachment.name),3!==_this4.status&&react.createElement("a",{role:"button",className:"remove-attachment",onClick:function(e){return _this4.removeAttachment(e,attachment._id)}},react.createElement("i",{className:"fa fa-remove"})))}))),react.createElement("div",{className:"issue-body",ref:function(r){return _this4.issueBody=r}},(0,react_html_parser_lib.ZP)(this.issue))),3!==this.status&&helpers_default().hasPermOverRole(this.props.owner.role,null,"tickets:update",!0)&&react.createElement(react.Fragment,null,react.createElement("div",{className:"edit-issue",onClick:function(){_this4.props.editorWindow&&_this4.props.editorWindow.openEditorWindow({subject:_this4.subject,text:_this4.issue,onPrimaryClick:function(data){socket_default().ui.setTicketIssue(_this4.ticketId,data.text,data.subjectText)}})}},react.createElement("i",{className:"material-icons"},"")),react.createElement("form",{className:"form nomargin",encType:"multipart/form-data"},react.createElement("div",{className:"add-attachment",onClick:function(e){return _this4.attachmentInput.click()}},react.createElement("i",{className:"material-icons"},"")),react.createElement("input",{ref:function(r){return _this4.attachmentInput=r},className:"hide",type:"file",onChange:function(e){return _this4.onAttachmentInputChange(e)}}))))}}])&&IssuePartial_defineProperties(Constructor.prototype,protoProps),staticProps&&IssuePartial_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),IssuePartial}(react.Component),IssuePartial_descriptor=IssuePartial_applyDecoratedDescriptor(IssuePartial_class2.prototype,"ticketId",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),IssuePartial_descriptor2=IssuePartial_applyDecoratedDescriptor(IssuePartial_class2.prototype,"status",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),IssuePartial_descriptor3=IssuePartial_applyDecoratedDescriptor(IssuePartial_class2.prototype,"owner",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),IssuePartial_descriptor4=IssuePartial_applyDecoratedDescriptor(IssuePartial_class2.prototype,"subject",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),IssuePartial_descriptor5=IssuePartial_applyDecoratedDescriptor(IssuePartial_class2.prototype,"issue",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),IssuePartial_descriptor6=IssuePartial_applyDecoratedDescriptor(IssuePartial_class2.prototype,"attachments",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),IssuePartial_class=IssuePartial_class2))||IssuePartial_class;IssuePartial.propTypes={ticketId:prop_types_default().string.isRequired,status:prop_types_default().number.isRequired,owner:prop_types_default().object.isRequired,subject:prop_types_default().string.isRequired,issue:prop_types_default().string.isRequired,date:prop_types_default().string.isRequired,dateFormat:prop_types_default().string.isRequired,attachments:prop_types_default().array,editorWindow:prop_types_default().object};const Tickets_IssuePartial=IssuePartial;var OffCanvasEditor_class,OffCanvasEditor_class2,OffCanvasEditor_descriptor,OffCanvasEditor_descriptor2,OffCanvasEditor_descriptor3,OffCanvasEditor_descriptor4;__webpack_require__(82);function OffCanvasEditor_typeof(obj){return OffCanvasEditor_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},OffCanvasEditor_typeof(obj)}function OffCanvasEditor_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function OffCanvasEditor_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function OffCanvasEditor_setPrototypeOf(o,p){return OffCanvasEditor_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},OffCanvasEditor_setPrototypeOf(o,p)}function OffCanvasEditor_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=OffCanvasEditor_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=OffCanvasEditor_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return OffCanvasEditor_possibleConstructorReturn(this,result)}}function OffCanvasEditor_possibleConstructorReturn(self,call){if(call&&("object"===OffCanvasEditor_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return OffCanvasEditor_assertThisInitialized(self)}function OffCanvasEditor_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function OffCanvasEditor_getPrototypeOf(o){return OffCanvasEditor_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},OffCanvasEditor_getPrototypeOf(o)}function OffCanvasEditor_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var OffCanvasEditor=(0,mobxreact_esm.Pi)((OffCanvasEditor_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&OffCanvasEditor_setPrototypeOf(subClass,superClass)}(OffCanvasEditor,_React$Component);var Constructor,protoProps,staticProps,_super=OffCanvasEditor_createSuper(OffCanvasEditor);function OffCanvasEditor(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OffCanvasEditor),OffCanvasEditor_initializerDefineProperty(_this=_super.call(this,props),"mdeText",OffCanvasEditor_descriptor,OffCanvasEditor_assertThisInitialized(_this)),OffCanvasEditor_initializerDefineProperty(_this,"subjectText",OffCanvasEditor_descriptor2,OffCanvasEditor_assertThisInitialized(_this)),OffCanvasEditor_initializerDefineProperty(_this,"showSubject",OffCanvasEditor_descriptor3,OffCanvasEditor_assertThisInitialized(_this)),OffCanvasEditor_initializerDefineProperty(_this,"onPrimaryClick",OffCanvasEditor_descriptor4,OffCanvasEditor_assertThisInitialized(_this)),(0,mobx_esm.rC)(OffCanvasEditor_assertThisInitialized(_this)),_this.primaryClick=_this.primaryClick.bind(OffCanvasEditor_assertThisInitialized(_this)),_this}return Constructor=OffCanvasEditor,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs(),jquery_default()(".off-canvas-bottom").DivResizer({}),this.showSubject=this.props.showSubject}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"primaryClick",value:function(){var data={subjectText:this.subjectText,text:this.mdeText};this.onPrimaryClick&&this.onPrimaryClick(data),this.closeEditorWindow()}},{key:"openEditorWindow",value:function(data){this.subjectText=data.subject||"",this.mdeText=data.text||"",this.editor.setEditorText(this.mdeText),this.showSubject=void 0===data.showSubject||data.showSubject,this.onPrimaryClick=data.onPrimaryClick||null,jquery_default()(this.editorWindow).removeClass("closed").addClass("open")}},{key:"closeEditorWindow",value:function(e){e&&e.preventDefault(),jquery_default()(this.editorWindow).removeClass("open").addClass("closed")}},{key:"render",value:function(){var _this2=this;return react.createElement("div",{className:"off-canvas-bottom closed",ref:function(r){return _this2.editorWindow=r}},react.createElement("div",{className:"edit-window-wrapper"},this.showSubject&&react.createElement("div",{className:"edit-subject-wrap"},react.createElement("label",{htmlFor:"edit-subject-input"},"Subject"),react.createElement("input",{id:"edit-subject-input",className:"md-input mb-10",value:this.subjectText,onChange:function(e){return _this2.subjectText=e.target.value}})),react.createElement("div",{className:"editor-container"},react.createElement("div",{className:"editor"},react.createElement("div",{className:"code-mirror-wrap"},react.createElement(components_EasyMDE,{showStatusBar:!1,defaultValue:this.mdeText,value:this.mdeText,onChange:function(val){return _this2.mdeText=val},ref:function(r){return _this2.editor=r},allowImageUpload:this.props.allowUploads,inlineImageUploadUrl:this.props.uploadURL})))),react.createElement("div",{className:"action-panel"},react.createElement("div",{className:"left-buttons"},react.createElement("button",{className:"save-btn uk-button uk-button-accent mr-5",onClick:this.primaryClick},this.props.primaryLabel),react.createElement("button",{className:"uk-button uk-button-cancel",onClick:function(e){return _this2.closeEditorWindow(e)}},"Cancel")))))}}])&&OffCanvasEditor_defineProperties(Constructor.prototype,protoProps),staticProps&&OffCanvasEditor_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),OffCanvasEditor}(react.Component),OffCanvasEditor_descriptor=OffCanvasEditor_applyDecoratedDescriptor(OffCanvasEditor_class2.prototype,"mdeText",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),OffCanvasEditor_descriptor2=OffCanvasEditor_applyDecoratedDescriptor(OffCanvasEditor_class2.prototype,"subjectText",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),OffCanvasEditor_descriptor3=OffCanvasEditor_applyDecoratedDescriptor(OffCanvasEditor_class2.prototype,"showSubject",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),OffCanvasEditor_descriptor4=OffCanvasEditor_applyDecoratedDescriptor(OffCanvasEditor_class2.prototype,"onPrimaryClick",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),OffCanvasEditor_class=OffCanvasEditor_class2))||OffCanvasEditor_class;OffCanvasEditor.propTypes={showSubject:prop_types_default().bool,primaryLabel:prop_types_default().string.isRequired,onPrimaryClick:prop_types_default().func,closeLabel:prop_types_default().string,allowUploads:prop_types_default().bool,uploadURL:prop_types_default().string},OffCanvasEditor.defaultProps={showSubject:!0,closeLabel:"Cancel",allowUploads:!1};const components_OffCanvasEditor=OffCanvasEditor;function StatusSelector_typeof(obj){return StatusSelector_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},StatusSelector_typeof(obj)}var StatusSelector_class,StatusSelector_class2,StatusSelector_descriptor;function StatusSelector_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function StatusSelector_setPrototypeOf(o,p){return StatusSelector_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},StatusSelector_setPrototypeOf(o,p)}function StatusSelector_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=StatusSelector_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=StatusSelector_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return StatusSelector_possibleConstructorReturn(this,result)}}function StatusSelector_possibleConstructorReturn(self,call){if(call&&("object"===StatusSelector_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return StatusSelector_assertThisInitialized(self)}function StatusSelector_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function StatusSelector_getPrototypeOf(o){return StatusSelector_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},StatusSelector_getPrototypeOf(o)}var statusToName=function(status){switch(status){case 0:return"New";case 1:return"Open";case 2:return"Pending";case 3:return"Closed"}},StatusSelector=(0,mobxreact_esm.Pi)((StatusSelector_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&StatusSelector_setPrototypeOf(subClass,superClass)}(StatusSelector,_React$Component);var Constructor,protoProps,staticProps,_super=StatusSelector_createSuper(StatusSelector);function StatusSelector(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StatusSelector),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"status",StatusSelector_descriptor,StatusSelector_assertThisInitialized(_this)),(0,mobx_esm.rC)(StatusSelector_assertThisInitialized(_this)),_this.status=_this.props.status,_this.onDocumentClick=_this.onDocumentClick.bind(StatusSelector_assertThisInitialized(_this)),_this.onUpdateTicketStatus=_this.onUpdateTicketStatus.bind(StatusSelector_assertThisInitialized(_this)),_this}return Constructor=StatusSelector,(protoProps=[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onDocumentClick),socket_default().socket.on("updateTicketStatus",this.onUpdateTicketStatus)}},{key:"componentDidUpdate",value:function(prevProps){prevProps.status!==this.props.status&&(this.status=this.props.status)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onDocumentClick),socket_default().socket.off("updateTicketStatus",this.onUpdateTicketStatus)}},{key:"onDocumentClick",value:function(e){!this.selectorButton.contains(e.target)&&this.dropMenu.classList.contains("shown")&&this.forceClose()}},{key:"onUpdateTicketStatus",value:function(data){this.props.ticketId===data.tid&&(this.status=data.status,this.props.onStatusChange&&this.props.onStatusChange(this.status))}},{key:"toggleDropMenu",value:function(e){if(e.stopPropagation(),this.props.hasPerm){var hasHide=this.dropMenu.classList.contains("hide"),hasShown=this.dropMenu.classList.contains("shown");hasHide?this.dropMenu.classList.remove("hide"):this.dropMenu.classList.add("hide"),hasShown?this.dropMenu.classList.remove("shown"):this.dropMenu.classList.add("shown")}}},{key:"forceClose",value:function(){this.dropMenu.classList.remove("shown"),this.dropMenu.classList.add("hide")}},{key:"changeStatus",value:function(status){this.props.hasPerm&&(socket_default().ui.sendUpdateTicketStatus(this.props.ticketId,status),this.forceClose())}},{key:"render",value:function(){var _this2=this;return react.createElement("div",{className:"floating-ticket-status"},react.createElement("div",{title:"Change Status",className:(0,clsx_m.Z)("ticket-status","ticket-".concat(statusToName(this.status).toLowerCase()),this.props.hasPerm&&"cursor-pointer"),onClick:function(e){return _this2.toggleDropMenu(e)},ref:function(r){return _this2.selectorButton=r}},react.createElement("span",null,statusToName(this.status))),this.props.hasPerm&&react.createElement("span",{className:"drop-icon material-icons",style:{left:"auto",right:22,bottom:-18}},"keyboard_arrow_down"),react.createElement("div",{id:"statusSelect",ref:function(r){return _this2.dropMenu=r},className:"hide"},react.createElement("ul",null,react.createElement("li",{className:"ticket-status ticket-new",onClick:function(){return _this2.changeStatus(0)}},react.createElement("span",null,"New")),react.createElement("li",{className:"ticket-status ticket-open",onClick:function(){return _this2.changeStatus(1)}},react.createElement("span",null,"Open")),react.createElement("li",{className:"ticket-status ticket-pending",onClick:function(){return _this2.changeStatus(2)}},react.createElement("span",null,"Pending")),react.createElement("li",{className:"ticket-status ticket-closed",onClick:function(){return _this2.changeStatus(3)}},react.createElement("span",null,"Closed")))))}}])&&StatusSelector_defineProperties(Constructor.prototype,protoProps),staticProps&&StatusSelector_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),StatusSelector}(react.Component),StatusSelector_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(StatusSelector_class2.prototype,"status",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),StatusSelector_class=StatusSelector_class2))||StatusSelector_class;StatusSelector.propTypes={ticketId:prop_types_default().string.isRequired,status:prop_types_default().number.isRequired,onStatusChange:prop_types_default().func,hasPerm:prop_types_default().bool.isRequired},StatusSelector.defaultProps={hasPerm:!1};const Tickets_StatusSelector=StatusSelector;function TruTabSection_typeof(obj){return TruTabSection_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TruTabSection_typeof(obj)}function TruTabSection_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TruTabSection_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TruTabSection_setPrototypeOf(o,p){return TruTabSection_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},TruTabSection_setPrototypeOf(o,p)}function TruTabSection_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TruTabSection_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TruTabSection_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TruTabSection_possibleConstructorReturn(this,result)}}function TruTabSection_possibleConstructorReturn(self,call){if(call&&("object"===TruTabSection_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TruTabSection_getPrototypeOf(o){return TruTabSection_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},TruTabSection_getPrototypeOf(o)}var TruTabSection=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TruTabSection_setPrototypeOf(subClass,superClass)}(TruTabSection,_React$Component);var Constructor,protoProps,staticProps,_super=TruTabSection_createSuper(TruTabSection);function TruTabSection(){return TruTabSection_classCallCheck(this,TruTabSection),_super.apply(this,arguments)}return Constructor=TruTabSection,(protoProps=[{key:"render",value:function(){var _this$props=this.props,sectionId=_this$props.sectionId,active=_this$props.active;return react.createElement("div",{className:(0,clsx_m.Z)("tru-tab-section",!active&&"hidden"),"data-tabid":sectionId,style:this.props.style||{paddingTop:20}},this.props.children)}}])&&TruTabSection_defineProperties(Constructor.prototype,protoProps),staticProps&&TruTabSection_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TruTabSection}(react.Component);TruTabSection.propTypes={sectionId:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]).isRequired,active:prop_types_default().bool.isRequired,style:prop_types_default().object},TruTabSection.defaultProps={active:!1};const TruTabs_TruTabSection=TruTabSection;function TruTabSelector_typeof(obj){return TruTabSelector_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TruTabSelector_typeof(obj)}function TruTabSelector_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TruTabSelector_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TruTabSelector_setPrototypeOf(o,p){return TruTabSelector_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},TruTabSelector_setPrototypeOf(o,p)}function TruTabSelector_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TruTabSelector_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TruTabSelector_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TruTabSelector_possibleConstructorReturn(this,result)}}function TruTabSelector_possibleConstructorReturn(self,call){if(call&&("object"===TruTabSelector_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TruTabSelector_getPrototypeOf(o){return TruTabSelector_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},TruTabSelector_getPrototypeOf(o)}var TruTabSelector=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TruTabSelector_setPrototypeOf(subClass,superClass)}(TruTabSelector,_React$Component);var Constructor,protoProps,staticProps,_super=TruTabSelector_createSuper(TruTabSelector);function TruTabSelector(){return TruTabSelector_classCallCheck(this,TruTabSelector),_super.apply(this,arguments)}return Constructor=TruTabSelector,(protoProps=[{key:"render",value:function(){var _this$props=this.props,label=_this$props.label,active=_this$props.active,selectorId=_this$props.selectorId,showBadge=_this$props.showBadge,badgeText=_this$props.badgeText;return react.createElement(react.Fragment,null,react.createElement("a",{role:"button",className:(0,clsx_m.Z)("tru-tab-selector no-ajaxy",active&&"active"),"data-tabid":selectorId,onClick:function(e){return e.preventDefault()}},label,showBadge&&react.createElement("span",{className:"uk-badge uk-badge-grey uk-badge-small"},badgeText)))}}])&&TruTabSelector_defineProperties(Constructor.prototype,protoProps),staticProps&&TruTabSelector_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TruTabSelector}(react.Component);TruTabSelector.propTypes={label:prop_types_default().string.isRequired,active:prop_types_default().bool,selectorId:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]).isRequired,showBadge:prop_types_default().bool,badgeText:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number])},TruTabSelector.defaultProps={active:!1,showBadge:!1};const TruTabs_TruTabSelector=TruTabSelector;function TruTabSelectors_typeof(obj){return TruTabSelectors_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TruTabSelectors_typeof(obj)}function TruTabSelectors_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TruTabSelectors_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TruTabSelectors_setPrototypeOf(o,p){return TruTabSelectors_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},TruTabSelectors_setPrototypeOf(o,p)}function TruTabSelectors_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TruTabSelectors_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TruTabSelectors_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TruTabSelectors_possibleConstructorReturn(this,result)}}function TruTabSelectors_possibleConstructorReturn(self,call){if(call&&("object"===TruTabSelectors_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TruTabSelectors_getPrototypeOf(o){return TruTabSelectors_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},TruTabSelectors_getPrototypeOf(o)}var TruTabSelectors=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TruTabSelectors_setPrototypeOf(subClass,superClass)}(TruTabSelectors,_React$Component);var Constructor,protoProps,staticProps,_super=TruTabSelectors_createSuper(TruTabSelectors);function TruTabSelectors(){return TruTabSelectors_classCallCheck(this,TruTabSelectors),_super.apply(this,arguments)}return Constructor=TruTabSelectors,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().setupTruTabs(document.querySelectorAll(".tru-tab-selectors > .tru-tab-selector"))}},{key:"render",value:function(){var _this=this,_this$props=this.props,children=_this$props.children,showTrack=_this$props.showTrack;return react.createElement("div",{className:"tru-tab-selectors",style:this.props.style,ref:function(r){return _this.selectors=r}},children,react.createElement("span",{className:"tru-tab-highlighter"}),showTrack&&react.createElement("span",{className:"tru-tab-hr tru-tab-hr-lighten"}))}}])&&TruTabSelectors_defineProperties(Constructor.prototype,protoProps),staticProps&&TruTabSelectors_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TruTabSelectors}(react.Component);TruTabSelectors.propTypes={showTrack:prop_types_default().bool,style:prop_types_default().object},TruTabSelectors.defaultProps={showTrack:!0};const TruTabs_TruTabSelectors=TruTabSelectors;function TruTabWrapper_typeof(obj){return TruTabWrapper_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TruTabWrapper_typeof(obj)}function TruTabWrapper_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TruTabWrapper_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TruTabWrapper_setPrototypeOf(o,p){return TruTabWrapper_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},TruTabWrapper_setPrototypeOf(o,p)}function TruTabWrapper_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TruTabWrapper_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TruTabWrapper_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TruTabWrapper_possibleConstructorReturn(this,result)}}function TruTabWrapper_possibleConstructorReturn(self,call){if(call&&("object"===TruTabWrapper_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TruTabWrapper_getPrototypeOf(o){return TruTabWrapper_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},TruTabWrapper_getPrototypeOf(o)}var TruTabWrapper=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TruTabWrapper_setPrototypeOf(subClass,superClass)}(TruTabWrapper,_React$Component);var Constructor,protoProps,staticProps,_super=TruTabWrapper_createSuper(TruTabWrapper);function TruTabWrapper(){return TruTabWrapper_classCallCheck(this,TruTabWrapper),_super.apply(this,arguments)}return Constructor=TruTabWrapper,(protoProps=[{key:"render",value:function(){return react.createElement("div",{className:"tru-tabs uk-clearfix",style:this.props.style||{padding:"20px 0"}},this.props.children)}}])&&TruTabWrapper_defineProperties(Constructor.prototype,protoProps),staticProps&&TruTabWrapper_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TruTabWrapper}(react.Component);TruTabWrapper.propTypes={};const TruTabs_TruTabWrapper=TruTabWrapper;var SingleTicketContainer_class,SingleTicketContainer_class2,SingleTicketContainer_descriptor,SingleTicketContainer_descriptor2,moment=__webpack_require__(11),moment_default=__webpack_require__.n(moment);function SingleTicketContainer_typeof(obj){return SingleTicketContainer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SingleTicketContainer_typeof(obj)}function SingleTicketContainer_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function SingleTicketContainer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SingleTicketContainer_setPrototypeOf(o,p){return SingleTicketContainer_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},SingleTicketContainer_setPrototypeOf(o,p)}function SingleTicketContainer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SingleTicketContainer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SingleTicketContainer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SingleTicketContainer_possibleConstructorReturn(this,result)}}function SingleTicketContainer_possibleConstructorReturn(self,call){if(call&&("object"===SingleTicketContainer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return SingleTicketContainer_assertThisInitialized(self)}function SingleTicketContainer_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function SingleTicketContainer_getPrototypeOf(o){return SingleTicketContainer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},SingleTicketContainer_getPrototypeOf(o)}function SingleTicketContainer_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var SingleTicketContainer=(0,mobxreact_esm.Pi)((SingleTicketContainer_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SingleTicketContainer_setPrototypeOf(subClass,superClass)}(SingleTicketContainer,_React$Component);var Constructor,protoProps,staticProps,_super=SingleTicketContainer_createSuper(SingleTicketContainer);function SingleTicketContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SingleTicketContainer),SingleTicketContainer_initializerDefineProperty(_this=_super.call(this,props),"ticket",SingleTicketContainer_descriptor,SingleTicketContainer_assertThisInitialized(_this)),SingleTicketContainer_initializerDefineProperty(_this,"isSubscribed",SingleTicketContainer_descriptor2,SingleTicketContainer_assertThisInitialized(_this)),(0,mobx_esm.rC)(SingleTicketContainer_assertThisInitialized(_this)),_this.onSocketUpdateComments=_this.onSocketUpdateComments.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateTicketNotes=_this.onUpdateTicketNotes.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateAssignee=_this.onUpdateAssignee.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateTicketType=_this.onUpdateTicketType.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateTicketPriority=_this.onUpdateTicketPriority.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateTicketGroup=_this.onUpdateTicketGroup.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateTicketDueDate=_this.onUpdateTicketDueDate.bind(SingleTicketContainer_assertThisInitialized(_this)),_this.onUpdateTicketTags=_this.onUpdateTicketTags.bind(SingleTicketContainer_assertThisInitialized(_this)),_this}return Constructor=SingleTicketContainer,(protoProps=[{key:"componentDidMount",value:function(){var parent;socket_default().socket.on("updateComments",this.onSocketUpdateComments),socket_default().socket.on("updateNotes",this.onUpdateTicketNotes),socket_default().socket.on("updateAssignee",this.onUpdateAssignee),socket_default().socket.on("updateTicketType",this.onUpdateTicketType),socket_default().socket.on("updateTicketPriority",this.onUpdateTicketPriority),socket_default().socket.on("updateTicketGroup",this.onUpdateTicketGroup),socket_default().socket.on("updateTicketDueDate",this.onUpdateTicketDueDate),socket_default().socket.on("updateTicketTags",this.onUpdateTicketTags),parent=this,axios_default().get("/api/v2/tickets/".concat(parent.props.ticketUid)).then((function(res){parent.ticket=res.data.ticket,parent.isSubscribed=parent.ticket&&-1!==parent.ticket.subscribers.findIndex((function(i){return i._id===parent.props.shared.sessionUser._id}))})).catch((function(error){403===error.response.status&&History.pushState(null,null,"/tickets"),logger.error(error)})),this.props.fetchGroups()}},{key:"componentDidUpdate",value:function(){helpers_default().resizeFullHeight(),helpers_default().setupScrollers()}},{key:"componentWillUnmount",value:function(){socket_default().socket.off("updateComments",this.onSocketUpdateComments),socket_default().socket.off("updateNotes",this.onUpdateTicketNotes),socket_default().socket.off("updateAssignee",this.onUpdateAssignee),socket_default().socket.off("updateTicketType",this.onUpdateTicketType),socket_default().socket.off("updateTicketPriority",this.onUpdateTicketPriority),socket_default().socket.off("updateTicketGroup",this.onUpdateTicketGroup),socket_default().socket.off("updateTicketDueDate",this.onUpdateTicketDueDate),socket_default().socket.off("updateTicketTags",this.onUpdateTicketTags),this.props.unloadGroups()}},{key:"onSocketUpdateComments",value:function(data){this.ticket._id===data._id&&(this.ticket.comments=data.comments)}},{key:"onUpdateTicketNotes",value:function(data){this.ticket._id===data._id&&(this.ticket.notes=data.notes)}},{key:"onUpdateAssignee",value:function(data){this.ticket._id===data._id&&(this.ticket.assignee=data.assignee,this.ticket.assignee&&this.ticket.assignee._id===this.props.shared.sessionUser._id&&(this.isSubscribed=!0))}},{key:"onUpdateTicketType",value:function(data){this.ticket._id===data._id&&(this.ticket.type=data.type)}},{key:"onUpdateTicketPriority",value:function(data){this.ticket._id===data._id&&(this.ticket.priority=data.priority)}},{key:"onUpdateTicketGroup",value:function(data){this.ticket._id===data._id&&(this.ticket.group=data.group)}},{key:"onUpdateTicketDueDate",value:function(data){this.ticket._id===data._id&&(this.ticket.dueDate=data.dueDate)}},{key:"onUpdateTicketTags",value:function(data){this.ticket._id===data._id&&(this.ticket.tags=data.tags)}},{key:"onCommentNoteSubmit",value:function(e,type){var _this2=this;e.preventDefault();var isNote="note"===type;axios_default().post("/api/v1/tickets/add".concat(isNote?"note":"comment"),{_id:!isNote&&this.ticket._id,comment:!isNote&&this.commentMDE.getEditorText(),ticketid:isNote&&this.ticket._id,note:isNote&&this.noteMDE.getEditorText()}).then((function(res){res&&res.data&&res.data.success&&(isNote?(_this2.ticket.notes=res.data.ticket.notes,_this2.noteMDE.setEditorText("")):(_this2.ticket.comments=res.data.ticket.comments,_this2.commentMDE.setEditorText("")),helpers_default().scrollToBottom(".page-content-right",!0),_this2.ticket.history=res.data.ticket.history)})).catch((function(error){logger.error(error),error.response&&logger.error(error.response),helpers_default().UI.showSnackbar(error,!0)}))}},{key:"onSubscriberChanged",value:function(e){var _this3=this;axios_default().put("/api/v1/tickets/".concat(this.ticket._id,"/subscribe"),{user:this.props.shared.sessionUser._id,subscribe:e.target.checked}).then((function(res){res.data.success&&res.data.ticket&&(_this3.ticket.subscribers=res.data.ticket.subscribers,_this3.isSubscribed=-1!==_this3.ticket.subscribers.findIndex((function(i){return i._id===_this3.props.shared.sessionUser._id})))})).catch((function(error){logger.error(error.response||error)}))}},{key:"transferToThirdParty",value:function(e){socket_default().ui.sendUpdateTicketStatus(this.ticket._id,3),this.props.transferToThirdParty({uid:this.ticket.uid})}},{key:"notesTagged",get:function(){return this.ticket.notes.forEach((function(i){return i.isNote=!0})),this.ticket.notes}},{key:"commentsAndNotes",get:function(){if(!this.ticket)return[];if(!helpers_default().canUser("tickets:notes",!0))return sortBy_default()(this.ticket.comments,"date");var commentsAndNotes=union_default()(this.ticket.comments,this.notesTagged);return commentsAndNotes=sortBy_default()(commentsAndNotes,"date")}},{key:"hasCommentsOrNotes",get:function(){return!!this.ticket&&(this.ticket.comments.length>0||this.ticket.notes.length>0)}},{key:"render",value:function(){var _this4=this,mappedGroups=this.props.groupsState?this.props.groupsState.groups.map((function(group){return{text:group.get("name"),value:group.get("_id")}})):[],mappedTypes=this.props.common.ticketTypes?this.props.common.ticketTypes.map((function(type){return{text:type.name,value:type._id,raw:type}})):[],hasTicketUpdate=this.ticket&&3!==this.ticket.status&&helpers_default().hasPermOverRole(this.ticket.owner.role,null,"tickets:update",!0);return react.createElement("div",{className:"uk-clearfix uk-position-relative",style:{width:"100%",height:"100vh"}},!this.ticket&&react.createElement(components_SpinLoader,{active:!0}),this.ticket&&react.createElement(react.Fragment,null,react.createElement("div",{className:"page-content"},react.createElement("div",{className:"uk-float-left page-title page-title-small noshadow nopadding relative",style:{width:360,maxWidth:360,minWidth:360}},react.createElement("div",{className:"page-title-border-right relative",style:{padding:"0 30px"}},react.createElement("p",null,"Ticket #",this.ticket.uid),react.createElement(Tickets_StatusSelector,{ticketId:this.ticket._id,status:this.ticket.status,onStatusChange:function(status){return _this4.ticket.status=status},hasPerm:helpers_default().hasPermOverRole(this.ticket.owner.role,null,"tickets:update",!0)})),react.createElement("div",{className:"page-content-left full-height scrollable"},react.createElement("div",{className:"ticket-details-wrap uk-position-relative uk-clearfix"},react.createElement("div",{className:"ticket-assignee-wrap uk-clearfix",style:{paddingRight:30}},react.createElement("h4",null,"Assignee"),react.createElement("div",{className:"ticket-assignee uk-clearfix"},hasTicketUpdate&&react.createElement("a",{role:"button",title:"Set Assignee",style:{float:"left"},className:"relative no-ajaxy",onClick:function(){return socket_default().socket.emit("updateAssigneeList")}},react.createElement(PDropdown_PDropdownTrigger,{target:"assigneeDropdown"},react.createElement(Avatar_Avatar,{image:this.ticket.assignee&&this.ticket.assignee.image,showOnlineBubble:void 0!==this.ticket.assignee,userId:this.ticket.assignee&&this.ticket.assignee._id}),react.createElement("span",{className:"drop-icon material-icons"},"keyboard_arrow_down"))),!hasTicketUpdate&&react.createElement(Avatar_Avatar,{image:this.ticket.assignee&&this.ticket.assignee.image,showOnlineBubble:void 0!==this.ticket.assignee,userId:this.ticket.assignee&&this.ticket.assignee._id}),react.createElement("div",{className:"ticket-assignee-details"},!this.ticket.assignee&&react.createElement("h3",null,"No User Assigned"),this.ticket.assignee&&react.createElement(react.Fragment,null,react.createElement("h3",null,this.ticket.assignee.fullname),react.createElement("a",{className:"comment-email-link uk-text-truncate uk-display-inline-block",href:"mailto:".concat(this.ticket.assignee.email)},this.ticket.assignee.email),react.createElement("span",{className:"uk-display-block"},this.ticket.assignee.title)))),hasTicketUpdate&&react.createElement(Tickets_AssigneeDropdownPartial,{ticketId:this.ticket._id,onClearClick:function(){return _this4.ticket.assignee=void 0},onAssigneeClick:function(_ref){var agent=_ref.agent;return _this4.ticket.assignee=agent}})),react.createElement("div",{className:"uk-width-1-1 padding-left-right-15"},react.createElement("div",{className:"tru-card ticket-details uk-clearfix"},react.createElement("div",{className:"uk-width-1-2 uk-float-left nopadding"},react.createElement("div",{className:"marginright5"},react.createElement("span",null,"Type"),hasTicketUpdate&&react.createElement("select",{value:this.ticket.type._id,onChange:function(e){var type=_this4.props.common.ticketTypes.find((function(t){return t._id===e.target.value}));-1!==type.priorities.findIndex((function(p){return p._id===_this4.ticket.priority._id}))||(socket_default().ui.setTicketPriority(_this4.ticket._id,type.priorities.find((function(){return!0}))),uikit_combined_min_default().modal.confirm("Selected Priority does not exist for this ticket type.<br><br><strong>Please select a new priority</strong>",(function(){}),{cancelButtonClass:"uk-hidden"})),socket_default().ui.setTicketType(_this4.ticket._id,e.target.value)}},mappedTypes&&mappedTypes.map((function(type){return react.createElement("option",{key:type.value,value:type.value},type.text)}))),!hasTicketUpdate&&react.createElement("div",{className:"input-box"},this.ticket.type.name))),react.createElement("div",{className:"uk-width-1-2 uk-float-left nopadding"},react.createElement("div",{className:"marginleft5"},react.createElement("span",null,"Priority"),hasTicketUpdate&&react.createElement("select",{name:"tPriority",id:"tPriority",value:this.ticket.priority._id,onChange:function(e){return socket_default().ui.setTicketPriority(_this4.ticket._id,e.target.value)}},this.ticket.type&&this.ticket.type.priorities&&this.ticket.type.priorities.map((function(priority){return react.createElement("option",{key:priority._id,value:priority._id},priority.name)}))),!hasTicketUpdate&&react.createElement("div",{className:"input-box"},this.ticket.priority.name))),react.createElement("div",{className:"uk-width-1-1 nopadding uk-clearfix"},react.createElement("span",null,"Group"),hasTicketUpdate&&react.createElement("select",{value:this.ticket.group._id,onChange:function(e){socket_default().ui.setTicketGroup(_this4.ticket._id,e.target.value)}},mappedGroups&&mappedGroups.map((function(group){return react.createElement("option",{key:group.value,value:group.value},group.text)}))),!hasTicketUpdate&&react.createElement("div",{className:"input-box"},this.ticket.group.name)),react.createElement("div",{className:"uk-width-1-1 p-0"},react.createElement("span",null,"Due Date")," ",hasTicketUpdate&&react.createElement("span",null,"- "),hasTicketUpdate&&react.createElement("div",{className:"uk-display-inline"},react.createElement("a",{role:"button",onClick:function(e){e.preventDefault(),socket_default().ui.setTicketDueDate(_this4.ticket._id,void 0)}},"Clear"),react.createElement(components_DatePicker,{format:helpers_default().getShortDateFormat(),value:this.ticket.dueDate,onChange:function(e){var dueDate=moment_default()(e.target.value,helpers_default().getShortDateFormat()).utc().toISOString();socket_default().ui.setTicketDueDate(_this4.ticket._id,dueDate)}})),!hasTicketUpdate&&react.createElement("div",{className:"input-box"},helpers_default().formatDate(this.ticket.dueDate,this.props.common.shortDateFormat))),react.createElement("div",{className:"uk-width-1-1 nopadding"},react.createElement("span",null,"Tags",hasTicketUpdate&&react.createElement(react.Fragment,null,react.createElement("span",null," - "),react.createElement("div",{id:"editTags",className:"uk-display-inline"},react.createElement("a",{role:"button",style:{fontSize:11},className:"no-ajaxy",onClick:function(){_this4.props.showModal("ADD_TAGS_MODAL",{ticketId:_this4.ticket._id,currentTags:_this4.ticket.tags.map((function(tag){return tag._id}))})}},"Edit Tags")))),react.createElement("div",{className:"tag-list uk-clearfix"},this.ticket.tags&&this.ticket.tags.map((function(tag){return react.createElement("div",{key:tag._id,className:"item"},tag.name)})))))),helpers_default().canUser("agent:*",!0)&&react.createElement("div",{className:"uk-width-1-1 padding-left-right-15"},react.createElement("div",{className:"tru-card ticket-details pr-0 pb-0",style:{height:250}},"Ticket History",react.createElement("hr",{style:{padding:0,margin:0}}),react.createElement("div",{className:"history-items scrollable",style:{paddingTop:12}},this.ticket.history&&this.ticket.history.map((function(item){return react.createElement("div",{key:item._id,className:"history-item"},react.createElement("time",{dateTime:helpers_default().formatDate(item.date,_this4.props.common.longDateFormat)}),react.createElement("em",null,"Action by: ",react.createElement("span",null,item.owner.fullname)),react.createElement("p",null,item.description))})))))))),react.createElement("div",{className:"page-message nopadding",style:{marginLeft:360}},react.createElement("div",{className:"page-title-right noshadow"},this.props.common.hasThirdParty&&react.createElement("div",{className:"page-top-comments uk-float-right"},react.createElement("a",{role:"button",className:"btn md-btn-primary no-ajaxy",onClick:function(e){e.preventDefault(),_this4.transferToThirdParty(e)}},"Transfer to ThirdParty")),react.createElement("div",{className:"page-top-comments uk-float-right"},react.createElement("a",{role:"button",className:"btn no-ajaxy",onClick:function(e){e.preventDefault(),helpers_default().scrollToBottom(".page-content-right",!0)}},"Add Comment")),react.createElement("div",{className:"onoffswitch subscribeSwitch uk-float-right",style:{marginRight:10,position:"relative",top:18}},react.createElement("input",{id:"subscribeSwitch",type:"checkbox",name:"subscribeSwitch",className:"onoffswitch-checkbox",checked:this.isSubscribed,onChange:function(e){return _this4.onSubscriberChanged(e)}}),react.createElement("label",{className:"onoffswitch-label",htmlFor:"subscribeSwitch"},react.createElement("span",{className:"onoffswitch-inner subscribeSwitch-inner"}),react.createElement("span",{className:"onoffswitch-switch subscribeSwitch-switch"}))),react.createElement("div",{className:"pagination uk-float-right",style:{marginRight:5}},react.createElement("ul",{className:"button-group"},helpers_default().canUser("tickets:print")&&react.createElement("li",{className:"pagination"},react.createElement("a",{href:"/tickets/print/".concat(this.ticket.uid),className:"btn no-ajaxy",style:{borderRadius:3,marginRight:5},rel:"noopener noreferrer",target:"_blank"},react.createElement("i",{className:"material-icons"},"")))))),react.createElement("div",{className:"page-content-right full-height scrollable"},react.createElement("div",{className:"comments-wrapper"},react.createElement(Tickets_IssuePartial,{ticketId:this.ticket._id,status:this.ticket.status,owner:this.ticket.owner,subject:this.ticket.subject,issue:this.ticket.issue,date:this.ticket.date,dateFormat:"".concat(this.props.common.longDateFormat,", ").concat(this.props.common.timeFormat),attachments:this.ticket.attachments,editorWindow:this.editorWindow}),this.hasCommentsOrNotes&&react.createElement(TruTabs_TruTabWrapper,null,react.createElement(TruTabs_TruTabSelectors,{style:{marginLeft:110}},react.createElement(TruTabs_TruTabSelector,{selectorId:0,label:"All",active:!0,showBadge:!0,badgeText:this.commentsAndNotes.length}),react.createElement(TruTabs_TruTabSelector,{selectorId:1,label:"Comments",showBadge:!0,badgeText:this.ticket?this.ticket.comments&&this.ticket.comments.length:0}),helpers_default().canUser("tickets:notes",!0)&&react.createElement(TruTabs_TruTabSelector,{selectorId:2,label:"Notes",showBadge:!0,badgeText:this.ticket?this.ticket.notes&&this.ticket.notes.length:0})),react.createElement(TruTabs_TruTabSection,{sectionId:0,active:!0},react.createElement("div",{className:"all-comments"},this.commentsAndNotes.map((function(item){return react.createElement(Tickets_CommentNotePartial,{key:item._id,ticketStatus:_this4.ticket.status,ticketSubject:_this4.ticket.subject,comment:item,isNote:item.isNote,dateFormat:"".concat(_this4.props.common.longDateFormat,", ").concat(_this4.props.common.timeFormat),onEditClick:function(){_this4.editorWindow.openEditorWindow({showSubject:!1,text:item.isNote?item.note:item.comment,onPrimaryClick:function(data){item.isNote?socket_default().ui.setNoteText(_this4.ticket._id,item._id,data.text):socket_default().ui.setCommentText(_this4.ticket._id,item._id,data.text)}})},onRemoveClick:function(){item.isNote?socket_default().ui.removeNote(_this4.ticket._id,item._id):socket_default().ui.removeComment(_this4.ticket._id,item._id)}})})))),react.createElement(TruTabs_TruTabSection,{sectionId:1},react.createElement("div",{className:"comments"},this.ticket&&this.ticket.comments.map((function(comment){return react.createElement(Tickets_CommentNotePartial,{key:comment._id,ticketStatus:_this4.ticket.status,ticketSubject:_this4.ticket.subject,comment,dateFormat:"".concat(_this4.props.common.longDateFormat,", ").concat(_this4.props.common.timeFormat),onEditClick:function(){_this4.editorWindow.openEditorWindow({showSubject:!1,text:comment.comment,onPrimaryClick:function(data){socket_default().ui.setCommentText(_this4.ticket._id,comment._id,data.text)}})},onRemoveClick:function(){socket_default().ui.removeComment(_this4.ticket._id,comment._id)}})})))),react.createElement(TruTabs_TruTabSection,{sectionId:2},react.createElement("div",{className:"notes"},this.ticket&&this.ticket.notes.map((function(note){return react.createElement(Tickets_CommentNotePartial,{key:note._id,ticketStatus:_this4.ticket.status,ticketSubject:_this4.ticket.subject,comment:note,isNote:!0,dateFormat:"".concat(_this4.props.common.longDateFormat,", ").concat(_this4.props.common.timeFormat),onEditClick:function(){_this4.editorWindow.openEditorWindow({showSubject:!1,text:note.note,onPrimaryClick:function(data){socket_default().ui.setNoteText(_this4.ticket._id,note._id,data.text)}})},onRemoveClick:function(){socket_default().ui.removeNote(_this4.ticket._id,note._id)}})}))))),3!==this.ticket.status&&(helpers_default().canUser("comments:create",!0)||helpers_default().canUser("tickets:notes",!0))&&react.createElement("div",{className:"uk-width-1-1 ticket-reply uk-clearfix"},react.createElement(Avatar_Avatar,{image:this.props.shared.sessionUser.image,showOnlineBubble:!1}),react.createElement(TruTabs_TruTabWrapper,{style:{paddingLeft:85}},react.createElement(TruTabs_TruTabSelectors,{showTrack:!1},helpers_default().canUser("comments:create",!0)&&react.createElement(TruTabs_TruTabSelector,{selectorId:0,label:"Comment",active:!0}),helpers_default().canUser("tickets:notes",!0)&&react.createElement(TruTabs_TruTabSelector,{selectorId:1,label:"Internal Note",active:!helpers_default().canUser("comments:create",!0)})),react.createElement(TruTabs_TruTabSection,{sectionId:0,style:{paddingTop:0},active:helpers_default().canUser("comments:create",!0)},react.createElement("form",{onSubmit:function(e){return _this4.onCommentNoteSubmit(e,"comment")}},react.createElement(components_EasyMDE,{allowImageUpload:!0,inlineImageUploadUrl:"/tickets/uploadmdeimage",inlineImageUploadHeaders:{ticketid:this.ticket._id},ref:function(r){return _this4.commentMDE=r}}),react.createElement("div",{className:"uk-width-1-1 uk-clearfix",style:{marginTop:50}},react.createElement("div",{className:"uk-float-right"},react.createElement("button",{type:"submit",className:"uk-button uk-button-accent",style:{padding:"10px 15px"}},"Post Comment"))))),react.createElement(TruTabs_TruTabSection,{sectionId:1,style:{paddingTop:0},active:!helpers_default().canUser("comments:create")&&helpers_default().canUser("tickets:notes",!0)},react.createElement("form",{onSubmit:function(e){return _this4.onCommentNoteSubmit(e,"note")}},react.createElement(components_EasyMDE,{allowImageUpload:!0,inlineImageUploadUrl:"/tickets/uploadmdeimage",inlineImageUploadHeaders:{ticketid:this.ticket._id},ref:function(r){return _this4.noteMDE=r}}),react.createElement("div",{className:"uk-width-1-1 uk-clearfix",style:{marginTop:50}},react.createElement("div",{className:"uk-float-right"},react.createElement("button",{type:"submit",className:"uk-button uk-button-accent",style:{padding:"10px 15px"}},"Save Note"))))))))))),react.createElement(components_OffCanvasEditor,{primaryLabel:"Save Edit",ref:function(r){return _this4.editorWindow=r}})))}}])&&SingleTicketContainer_defineProperties(Constructor.prototype,protoProps),staticProps&&SingleTicketContainer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SingleTicketContainer}(react.Component),SingleTicketContainer_descriptor=SingleTicketContainer_applyDecoratedDescriptor(SingleTicketContainer_class2.prototype,"ticket",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),SingleTicketContainer_descriptor2=SingleTicketContainer_applyDecoratedDescriptor(SingleTicketContainer_class2.prototype,"isSubscribed",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),SingleTicketContainer_applyDecoratedDescriptor(SingleTicketContainer_class2.prototype,"notesTagged",[mobx_esm.Fl],Object.getOwnPropertyDescriptor(SingleTicketContainer_class2.prototype,"notesTagged"),SingleTicketContainer_class2.prototype),SingleTicketContainer_applyDecoratedDescriptor(SingleTicketContainer_class2.prototype,"commentsAndNotes",[mobx_esm.Fl],Object.getOwnPropertyDescriptor(SingleTicketContainer_class2.prototype,"commentsAndNotes"),SingleTicketContainer_class2.prototype),SingleTicketContainer_applyDecoratedDescriptor(SingleTicketContainer_class2.prototype,"hasCommentsOrNotes",[mobx_esm.Fl],Object.getOwnPropertyDescriptor(SingleTicketContainer_class2.prototype,"hasCommentsOrNotes"),SingleTicketContainer_class2.prototype),SingleTicketContainer_class=SingleTicketContainer_class2))||SingleTicketContainer_class;SingleTicketContainer.propTypes={ticketId:prop_types_default().string.isRequired,ticketUid:prop_types_default().string.isRequired,shared:prop_types_default().object.isRequired,common:prop_types_default().object.isRequired,groupsState:prop_types_default().object.isRequired,fetchGroups:prop_types_default().func.isRequired,unloadGroups:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired,transferToThirdParty:prop_types_default().func};const Tickets_SingleTicketContainer=(0,es.$j)((function(state){return{common:state.common,shared:state.shared,groupsState:state.groupsState}}),{fetchGroups:groups_fetchGroups,unloadGroups,showModal,transferToThirdParty:tickets_transferToThirdParty})(SingleTicketContainer);function Menu_typeof(obj){return Menu_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Menu_typeof(obj)}function Menu_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Menu_setPrototypeOf(o,p){return Menu_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Menu_setPrototypeOf(o,p)}function Menu_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Menu_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Menu_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Menu_possibleConstructorReturn(this,result)}}function Menu_possibleConstructorReturn(self,call){if(call&&("object"===Menu_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Menu_getPrototypeOf(o){return Menu_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Menu_getPrototypeOf(o)}var Menu=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Menu_setPrototypeOf(subClass,superClass)}(Menu,_React$Component);var Constructor,protoProps,staticProps,_super=Menu_createSuper(Menu);function Menu(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Menu),_super.call(this,props)}return Constructor=Menu,(protoProps=[{key:"componentDidMount",value:function(){if(this.props.draggable){var menu=jquery_default()(this.menu);this.menuSortable=uikit_combined_min_default().sortable(menu,{handleClass:"drag-handle"}),this.props.onMenuDrag&&this.menuSortable.on("change.uk.sortable",this.props.onMenuDrag)}}},{key:"componentDidUpdate",value:function(){if(this.props.draggable&&!this.menuSortable){var menu=jquery_default()(this.menu);this.menuSortable=uikit_combined_min_default().sortable(menu,{handleClass:"drag-handle"}),this.props.onMenuDrag&&this.menuSortable.on("change.uk.sortable",this.props.onMenuDrag)}}},{key:"render",value:function(){var _this=this,hideBorders=this.props.hideBorders;return react.createElement("ul",{ref:function(i){return _this.menu=i},className:"settings-categories scrollable"+(hideBorders?" noborder ":""),style:{overflow:"hidden auto"}},this.props.children)}}])&&Menu_defineProperties(Constructor.prototype,protoProps),staticProps&&Menu_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Menu}(react.Component);Menu.propTypes={hideBorders:prop_types_default().bool,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired,draggable:prop_types_default().bool,onMenuDrag:prop_types_default().func},Menu.defaultProps={draggable:!1};const Settings_Menu=Menu;function MenuItem_typeof(obj){return MenuItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},MenuItem_typeof(obj)}function MenuItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function MenuItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function MenuItem_setPrototypeOf(o,p){return MenuItem_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},MenuItem_setPrototypeOf(o,p)}function MenuItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=MenuItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=MenuItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return MenuItem_possibleConstructorReturn(this,result)}}function MenuItem_possibleConstructorReturn(self,call){if(call&&("object"===MenuItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function MenuItem_getPrototypeOf(o){return MenuItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},MenuItem_getPrototypeOf(o)}var MenuItem=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&MenuItem_setPrototypeOf(subClass,superClass)}(MenuItem,_React$Component);var Constructor,protoProps,staticProps,_super=MenuItem_createSuper(MenuItem);function MenuItem(){return MenuItem_classCallCheck(this,MenuItem),_super.apply(this,arguments)}return Constructor=MenuItem,(protoProps=[{key:"render",value:function(){var _this$props=this.props,title=_this$props.title,active=_this$props.active,onClick=_this$props.onClick,draggable=_this$props.draggable;return react.createElement("li",{className:active?" active":"",onClick,"data-key":this.props.dragKey},react.createElement("div",{className:"setting-category"},draggable&&react.createElement("span",{className:"drag-handle uk-display-inline-block uk-float-left mr-10"},react.createElement("i",{className:"material-icons"},"drag_handle")),react.createElement("h3",null,title)))}}])&&MenuItem_defineProperties(Constructor.prototype,protoProps),staticProps&&MenuItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MenuItem}(react.Component);MenuItem.propTypes={title:prop_types_default().string.isRequired,active:prop_types_default().bool,onClick:prop_types_default().func.isRequired,draggable:prop_types_default().bool,dragKey:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number])};const Settings_MenuItem=MenuItem;function SettingItem_typeof(obj){return SettingItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SettingItem_typeof(obj)}function SettingItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SettingItem_setPrototypeOf(o,p){return SettingItem_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},SettingItem_setPrototypeOf(o,p)}function SettingItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SettingItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SettingItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SettingItem_possibleConstructorReturn(this,result)}}function SettingItem_possibleConstructorReturn(self,call){if(call&&("object"===SettingItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SettingItem_getPrototypeOf(o){return SettingItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},SettingItem_getPrototypeOf(o)}var SettingItem=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SettingItem_setPrototypeOf(subClass,superClass)}(SettingItem,_React$Component);var Constructor,protoProps,staticProps,_super=SettingItem_createSuper(SettingItem);function SettingItem(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SettingItem),_super.call(this,props)}return Constructor=SettingItem,(protoProps=[{key:"render",value:function(){var _this$props=this.props,title=_this$props.title,subtitle=_this$props.subtitle,component=_this$props.component,tooltip=_this$props.tooltip,extraClass=_this$props.extraClass;return react.createElement("div",{className:"setting-item-wrap uk-margin-medium-bottom"},react.createElement("div",{className:"panel trupanel nopadding no-hover-shadow "+extraClass||0,style:{minHeight:"60px"}},react.createElement("div",{className:"left"},react.createElement("h6",{style:{padding:"0 0 0 15px",margin:"15px 0 0 0",fontSize:"16px",lineHeight:"14px"}},title,tooltip&&react.createElement("i",{className:"material-icons",style:{color:"#888",fontSize:"16px",cursor:"pointer",lineHeight:"3px",marginLeft:"4px"},"data-uk-tooltip":"{cls:'long-text'}",title:tooltip},"error")),react.createElement("h5",{style:{padding:"0 0 10px 15px",margin:"2px 0 0 0",fontSize:"12px"},className:"uk-text-muted"},subtitle)),react.createElement("div",{className:"right uk-width-1-3",style:{position:"relative",paddingTop:"5px"}},react.createElement("div",{className:"uk-float-left",style:{paddingRight:"11px",minWidth:"130px",width:"100%"}},component)),this.props.children&&react.createElement("div",null,react.createElement("hr",{className:"nomargin-top clear"}),react.createElement("div",{className:"panel-body2",style:{padding:this.props.subPanelPadding||"20px 15px 15px 15px"}},react.createElement("div",{className:"uk-position-relative"},react.Children.map(this.props.children,(function(child,k){return react.createElement("div",{key:k,className:"uk-clearfix"},child)}))))),this.props.footer&&react.createElement("div",{style:{padding:"0 15px 25px 15px",marginTop:"-15px"}},this.props.footer)))}}])&&SettingItem_defineProperties(Constructor.prototype,protoProps),staticProps&&SettingItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SettingItem}(react.Component);SettingItem.propTypes={title:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().object]).isRequired,subtitle:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().object]),tooltip:prop_types_default().string,component:prop_types_default().element,footer:prop_types_default().element,subPanelPadding:prop_types_default().string,extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node])};const Settings_SettingItem=SettingItem;function InputWithSave_typeof(obj){return InputWithSave_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},InputWithSave_typeof(obj)}var InputWithSave_class,InputWithSave_class2,InputWithSave_descriptor;function InputWithSave_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function InputWithSave_setPrototypeOf(o,p){return InputWithSave_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},InputWithSave_setPrototypeOf(o,p)}function InputWithSave_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=InputWithSave_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=InputWithSave_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return InputWithSave_possibleConstructorReturn(this,result)}}function InputWithSave_possibleConstructorReturn(self,call){if(call&&("object"===InputWithSave_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return InputWithSave_assertThisInitialized(self)}function InputWithSave_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function InputWithSave_getPrototypeOf(o){return InputWithSave_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},InputWithSave_getPrototypeOf(o)}var InputWithSave=(0,mobxreact_esm.Pi)((InputWithSave_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&InputWithSave_setPrototypeOf(subClass,superClass)}(InputWithSave,_React$Component);var Constructor,protoProps,staticProps,_super=InputWithSave_createSuper(InputWithSave);function InputWithSave(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,InputWithSave),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"value",InputWithSave_descriptor,InputWithSave_assertThisInitialized(_this)),(0,mobx_esm.rC)(InputWithSave_assertThisInitialized(_this)),_this}return Constructor=InputWithSave,(protoProps=[{key:"componentDidMount",value:function(){this.value=this.props.initialValue?this.props.initialValue:"",helpers_default().UI.inputs()}},{key:"componentDidUpdate",value:function(prevProps,prevState,snapshot){void 0!==this.props.initialValue&&prevProps.initialValue!==this.props.initialValue&&(this.value=this.props.initialValue)}},{key:"onSaveClicked",value:function(){this.props.updateSetting({name:this.props.settingName,value:this.value,stateName:this.props.stateName})}},{key:"updateValue",value:function(evt){this.value=evt.target.value}},{key:"render",value:function(){var _this2=this,width="100%";return this.props.width&&(width=this.props.width),react.createElement("div",{className:"uk-width-1-1 uk-float-right",style:{width}},react.createElement("div",{className:"uk-width-3-4 uk-float-left",style:{paddingRight:"10px"}},react.createElement("input",{id:this.props.stateName,className:"md-input md-input-width-medium",type:"text",value:this.value,onChange:function(evt){return _this2.updateValue(evt)}})),react.createElement("div",{className:"uk-width-1-4 uk-float-right",style:{marginTop:"10px",textAlign:"center"}},react.createElement("button",{className:"md-btn md-btn-small",onClick:function(e){return _this2.onSaveClicked(e)}},this.props.saveLabel?this.props.saveLabel:"Save")))}}])&&InputWithSave_defineProperties(Constructor.prototype,protoProps),staticProps&&InputWithSave_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),InputWithSave}(react.Component),InputWithSave_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(InputWithSave_class2.prototype,"value",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),InputWithSave_class=InputWithSave_class2))||InputWithSave_class;InputWithSave.propTypes={updateSetting:prop_types_default().func.isRequired,settingName:prop_types_default().string.isRequired,stateName:prop_types_default().string.isRequired,saveLabel:prop_types_default().string,initialValue:prop_types_default().string,value:prop_types_default().string,width:prop_types_default().string};const Settings_InputWithSave=(0,es.$j)(null,{updateSetting:settings_updateSetting})(InputWithSave);function EnableSwitch_typeof(obj){return EnableSwitch_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EnableSwitch_typeof(obj)}function EnableSwitch_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function EnableSwitch_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EnableSwitch_setPrototypeOf(o,p){return EnableSwitch_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},EnableSwitch_setPrototypeOf(o,p)}function EnableSwitch_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=EnableSwitch_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=EnableSwitch_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return EnableSwitch_possibleConstructorReturn(this,result)}}function EnableSwitch_possibleConstructorReturn(self,call){if(call&&("object"===EnableSwitch_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function EnableSwitch_getPrototypeOf(o){return EnableSwitch_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},EnableSwitch_getPrototypeOf(o)}var EnableSwitch=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&EnableSwitch_setPrototypeOf(subClass,superClass)}(EnableSwitch,_React$Component);var Constructor,protoProps,staticProps,_super=EnableSwitch_createSuper(EnableSwitch);function EnableSwitch(){return EnableSwitch_classCallCheck(this,EnableSwitch),_super.apply(this,arguments)}return Constructor=EnableSwitch,(protoProps=[{key:"render",value:function(){var combinedStyle=(0,lodash.merge)({margin:"17px 0 0 0"},this.props.style);return react.createElement("div",{className:"uk-float-right md-switch md-green",style:combinedStyle},react.createElement("label",null,this.props.label,react.createElement("input",{type:"checkbox",id:this.props.stateName,name:this.props.stateName,onChange:this.props.onChange,checked:this.props.checked,disabled:this.props.disabled}),react.createElement("span",{className:"lever"})))}}])&&EnableSwitch_defineProperties(Constructor.prototype,protoProps),staticProps&&EnableSwitch_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EnableSwitch}(react.Component);EnableSwitch.propTypes={stateName:prop_types_default().string.isRequired,label:prop_types_default().string.isRequired,style:prop_types_default().object,onChange:prop_types_default().func,checked:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),disabled:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool])};const Settings_EnableSwitch=EnableSwitch;function SettingSubItem_typeof(obj){return SettingSubItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SettingSubItem_typeof(obj)}function SettingSubItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function SettingSubItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SettingSubItem_setPrototypeOf(o,p){return SettingSubItem_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},SettingSubItem_setPrototypeOf(o,p)}function SettingSubItem_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SettingSubItem_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SettingSubItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SettingSubItem_possibleConstructorReturn(this,result)}}function SettingSubItem_possibleConstructorReturn(self,call){if(call&&("object"===SettingSubItem_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SettingSubItem_getPrototypeOf(o){return SettingSubItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},SettingSubItem_getPrototypeOf(o)}var SettingSubItem=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SettingSubItem_setPrototypeOf(subClass,superClass)}(SettingSubItem,_React$Component);var Constructor,protoProps,staticProps,_super=SettingSubItem_createSuper(SettingSubItem);function SettingSubItem(){return SettingSubItem_classCallCheck(this,SettingSubItem),_super.apply(this,arguments)}return Constructor=SettingSubItem,(protoProps=[{key:"render",value:function(){var _this$props=this.props,parentClass=_this$props.parentClass,title=_this$props.title,titleCss=_this$props.titleCss,subtitle=_this$props.subtitle,component=_this$props.component,tooltip=_this$props.tooltip,headCss=titleCss||{fontWeight:"normal"};return react.createElement("div",{className:parentClass},react.createElement("div",{className:"uk-float-left uk-width-1-2"},react.createElement("h5",{style:headCss},title,tooltip&&react.createElement("i",{className:"material-icons",style:{color:"#888",fontSize:"14px",cursor:"pointer",lineHeight:"3px",marginLeft:"4px"},"data-uk-tooltip":!0,title:tooltip},"error")),react.createElement("div",{className:"p uk-text-muted"},subtitle)),react.createElement("div",{className:"uk-float-right uk-width-1-2 uk-clearfix",style:{position:"relative",marginTop:"5px"}},react.createElement("div",{className:"uk-width-1-1 uk-float-right"},component)))}}])&&SettingSubItem_defineProperties(Constructor.prototype,protoProps),staticProps&&SettingSubItem_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SettingSubItem}(react.Component);SettingSubItem.propTypes={parentClass:prop_types_default().string,title:prop_types_default().string.isRequired,titleCss:prop_types_default().object,subtitle:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().node,prop_types_default().element]),tooltip:prop_types_default().string,component:prop_types_default().element},SettingSubItem.defaultProps={parentClass:""};const Settings_SettingSubItem=SettingSubItem;function zone_typeof(obj){return zone_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},zone_typeof(obj)}function zone_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function zone_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function zone_setPrototypeOf(o,p){return zone_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},zone_setPrototypeOf(o,p)}function zone_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=zone_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=zone_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return zone_possibleConstructorReturn(this,result)}}function zone_possibleConstructorReturn(self,call){if(call&&("object"===zone_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function zone_getPrototypeOf(o){return zone_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},zone_getPrototypeOf(o)}var Zone=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&zone_setPrototypeOf(subClass,superClass)}(Zone,_React$Component);var Constructor,protoProps,staticProps,_super=zone_createSuper(Zone);function Zone(){return zone_classCallCheck(this,Zone),_super.apply(this,arguments)}return Constructor=Zone,(protoProps=[{key:"render",value:function(){var extraClass=this.props.extraClass;return react.createElement("div",{className:"zone uk-clearfix "+(extraClass||"")},this.props.children)}}])&&zone_defineProperties(Constructor.prototype,protoProps),staticProps&&zone_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Zone}(react.Component);Zone.propTypes={extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const zone=Zone;function ZoneBox_typeof(obj){return ZoneBox_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},ZoneBox_typeof(obj)}function ZoneBox_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function ZoneBox_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ZoneBox_setPrototypeOf(o,p){return ZoneBox_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},ZoneBox_setPrototypeOf(o,p)}function ZoneBox_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=ZoneBox_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=ZoneBox_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return ZoneBox_possibleConstructorReturn(this,result)}}function ZoneBox_possibleConstructorReturn(self,call){if(call&&("object"===ZoneBox_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function ZoneBox_getPrototypeOf(o){return ZoneBox_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ZoneBox_getPrototypeOf(o)}var ZoneBox=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&ZoneBox_setPrototypeOf(subClass,superClass)}(ZoneBox,_React$Component);var Constructor,protoProps,staticProps,_super=ZoneBox_createSuper(ZoneBox);function ZoneBox(){return ZoneBox_classCallCheck(this,ZoneBox),_super.apply(this,arguments)}return Constructor=ZoneBox,(protoProps=[{key:"render",value:function(){var extraClass=this.props.extraClass;return react.createElement("div",{className:"z-box uk-clearfix "+(extraClass||"")},this.props.children)}}])&&ZoneBox_defineProperties(Constructor.prototype,protoProps),staticProps&&ZoneBox_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ZoneBox}(react.Component);ZoneBox.propTypes={extraClass:prop_types_default().string,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node]).isRequired};const components_ZoneBox=ZoneBox;function General_typeof(obj){return General_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},General_typeof(obj)}function General_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function General_setPrototypeOf(o,p){return General_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},General_setPrototypeOf(o,p)}function General_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=General_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=General_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return General_possibleConstructorReturn(this,result)}}function General_possibleConstructorReturn(self,call){if(call&&("object"===General_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function General_getPrototypeOf(o){return General_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},General_getPrototypeOf(o)}var GeneralSettings=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&General_setPrototypeOf(subClass,superClass)}(GeneralSettings,_React$Component);var Constructor,protoProps,staticProps,_super=General_createSuper(GeneralSettings);function GeneralSettings(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GeneralSettings),_super.call(this,props)}return Constructor=GeneralSettings,(protoProps=[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"getSettingsValue",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"updateSetting",value:function(stateName,name,value){this.props.updateSetting({stateName,name,value})}},{key:"getTimezones",value:function(){return moment_timezone_default().tz.names().map((function(name){var year=(new Date).getUTCFullYear(),timezoneAtBeginningOfyear=moment_timezone_default().tz(year+"-01-01",name);return{utc:timezoneAtBeginningOfyear.utcOffset(),text:"(GMT"+timezoneAtBeginningOfyear.format("Z")+") "+name,value:name}})).sort((function(a,b){return a.utc-b.utc}))}},{key:"onTimezoneChange",value:function(e){e.target.value&&this.updateSetting("timezone","gen:timezone",e.target.value)}},{key:"render",value:function(){var _this=this,active=this.props.active,SiteTitle=react.createElement(Settings_InputWithSave,{stateName:"siteTitle",settingName:"gen:sitetitle",initialValue:this.getSettingsValue("siteTitle")}),SiteUrl=react.createElement(Settings_InputWithSave,{stateName:"siteUrl",settingName:"gen:siteurl",initialValue:this.getSettingsValue("siteUrl")}),Timezone=react.createElement(components_SingleSelect,{stateName:"timezone",settingName:"gen:timezone",items:this.getTimezones(),defaultValue:this.getSettingsValue("timezone"),onSelectChange:function(e){_this.onTimezoneChange(e)},showTextbox:!0});return react.createElement("div",{className:active?"active":"hide"},react.createElement(Settings_SettingItem,{title:"Site Title",subtitle:react.createElement("div",null,"Title of site. Used as page title. ",react.createElement("i",null,"default: Trudesk")),component:SiteTitle}),react.createElement(Settings_SettingItem,{title:"Site Url",subtitle:react.createElement("div",null,"Publicly accessible URL of this site. ",react.createElement("i",null,"ex: ",this.props.viewdata.hosturl)),component:SiteUrl}),react.createElement(Settings_SettingItem,{title:"Time Zone",subtitle:"Set the local timezone for date display",tooltip:"Requires Server Restart",component:Timezone}),react.createElement(Settings_SettingItem,{title:"Time & Date Format",subtitle:react.createElement("a",{href:"https://momentjs.com/docs/#/displaying/format/",rel:"noopener noreferrer",target:"_blank"},"Moment.js Format Options")},react.createElement(zone,null,react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Time Format",subtitle:"Set the format for time display",component:react.createElement(Settings_InputWithSave,{stateName:"timeFormat",settingName:"gen:timeFormat",initialValue:this.getSettingsValue("timeFormat"),width:"60%"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Short Date Format",subtitle:"Set the format for short dates",component:react.createElement(Settings_InputWithSave,{stateName:"shortDateFormat",settingName:"gen:shortDateFormat",initialValue:this.getSettingsValue("shortDateFormat"),width:"60%"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Long Date Format",subtitle:"Set the format for long dates",component:react.createElement(Settings_InputWithSave,{stateName:"longDateFormat",settingName:"gen:longDateFormat",initialValue:this.getSettingsValue("longDateFormat"),width:"60%"})})))))}}])&&General_defineProperties(Constructor.prototype,protoProps),staticProps&&General_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),GeneralSettings}(react.Component);GeneralSettings.propTypes={active:prop_types_default().bool,updateSetting:prop_types_default().func.isRequired,viewdata:prop_types_default().object.isRequired,settings:prop_types_default().object.isRequired};const General=(0,es.$j)((function(state){return{viewdata:state.common,settings:state.settings.settings}}),{updateSetting:settings_updateSetting})(GeneralSettings);function Accounts_typeof(obj){return Accounts_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Accounts_typeof(obj)}var Accounts_class,Accounts_class2,Accounts_descriptor,Accounts_descriptor2;function Accounts_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function Accounts_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Accounts_setPrototypeOf(o,p){return Accounts_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Accounts_setPrototypeOf(o,p)}function Accounts_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Accounts_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Accounts_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Accounts_possibleConstructorReturn(this,result)}}function Accounts_possibleConstructorReturn(self,call){if(call&&("object"===Accounts_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Accounts_assertThisInitialized(self)}function Accounts_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Accounts_getPrototypeOf(o){return Accounts_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Accounts_getPrototypeOf(o)}function Accounts_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var AccountsSettingsContainer=(0,mobxreact_esm.Pi)((Accounts_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Accounts_setPrototypeOf(subClass,superClass)}(AccountsSettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Accounts_createSuper(AccountsSettingsContainer);function AccountsSettingsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AccountsSettingsContainer),Accounts_initializerDefineProperty(_this=_super.call(this,props),"passwordComplexityEnabled",Accounts_descriptor,Accounts_assertThisInitialized(_this)),Accounts_initializerDefineProperty(_this,"allowUserRegistrationEnabled",Accounts_descriptor2,Accounts_assertThisInitialized(_this)),(0,mobx_esm.rC)(Accounts_assertThisInitialized(_this)),_this.state={restarting:!1},_this.restartServer=_this.restartServer.bind(Accounts_assertThisInitialized(_this)),_this}return Constructor=AccountsSettingsContainer,(protoProps=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(prevProps){prevProps.settings!==this.props.settings&&(this.passwordComplexityEnabled!==this.getSetting("accountsPasswordComplexity")&&(this.passwordComplexityEnabled=this.getSetting("accountsPasswordComplexity")),this.allowUserRegistrationEnabled!==this.getSetting("allowUserRegistration")&&(this.allowUserRegistrationEnabled=this.getSetting("allowUserRegistration")))}},{key:"restartServer",value:function(){var _this2=this;this.setState({restarting:!0});var token=document.querySelector('meta[name="csrf-token"]').getAttribute("content");axios_default().post("/api/v1/admin/restart",{},{headers:{"CSRF-TOKEN":token}}).catch((function(error){helpers_default().hideLoader(),logger.error(error.responseText),logger.error("Unable to restart server. Server must run under PM2 and Account must have admin rights."),helpers_default().UI.showSnackbar("Unable to restart server. Are you an Administrator?",!0)})).then((function(){_this2.setState({restarting:!1})}))}},{key:"getSetting",value:function(stateName){return this.props.settings.getIn(["settings",stateName,"value"])?this.props.settings.getIn(["settings",stateName,"value"]):""}},{key:"updateSetting",value:function(stateName,name,value){this.props.updateSetting({stateName,name,value})}},{key:"render",value:function(){var _this3=this,active=this.props.active;return react.createElement("div",{className:active?"active":"hide"},react.createElement(Settings_SettingItem,{title:"Allow User Registration",subtitle:"Allow users to create accounts on the login screen.",component:react.createElement(Settings_EnableSwitch,{stateName:"allowUserRegistration",label:"Enable",checked:this.allowUserRegistrationEnabled,onChange:function(e){_this3.updateSetting("allowUserRegistration","allowUserRegistration:enable",e.target.checked)}})}),react.createElement(Settings_SettingItem,{title:"Password Complexity",subtitle:"Require users passwords to meet minimum password complexity",tooltip:"Minimum 8 characters with uppercase and numeric.",component:react.createElement(Settings_EnableSwitch,{stateName:"accountsPasswordComplexity",label:"Enable",checked:this.passwordComplexityEnabled,onChange:function(e){_this3.updateSetting("accountsPasswordComplexity","accountsPasswordComplexity:enable",e.target.checked)}})}))}}])&&Accounts_defineProperties(Constructor.prototype,protoProps),staticProps&&Accounts_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AccountsSettingsContainer}(react.Component),Accounts_descriptor=Accounts_applyDecoratedDescriptor(Accounts_class2.prototype,"passwordComplexityEnabled",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Accounts_descriptor2=Accounts_applyDecoratedDescriptor(Accounts_class2.prototype,"allowUserRegistrationEnabled",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Accounts_class=Accounts_class2))||Accounts_class;AccountsSettingsContainer.propTypes={active:prop_types_default().bool.isRequired,updateSetting:prop_types_default().func.isRequired,updateMultipleSettings:prop_types_default().func.isRequired,settings:prop_types_default().object.isRequired};const Accounts=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting,updateMultipleSettings:settings_updateMultipleSettings})(AccountsSettingsContainer);function UploadButtonWithX_typeof(obj){return UploadButtonWithX_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},UploadButtonWithX_typeof(obj)}function UploadButtonWithX_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function UploadButtonWithX_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function UploadButtonWithX_setPrototypeOf(o,p){return UploadButtonWithX_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},UploadButtonWithX_setPrototypeOf(o,p)}function UploadButtonWithX_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=UploadButtonWithX_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=UploadButtonWithX_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return UploadButtonWithX_possibleConstructorReturn(this,result)}}function UploadButtonWithX_possibleConstructorReturn(self,call){if(call&&("object"===UploadButtonWithX_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function UploadButtonWithX_getPrototypeOf(o){return UploadButtonWithX_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},UploadButtonWithX_getPrototypeOf(o)}var UploadButtonWithX=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&UploadButtonWithX_setPrototypeOf(subClass,superClass)}(UploadButtonWithX,_React$Component);var Constructor,protoProps,staticProps,_super=UploadButtonWithX_createSuper(UploadButtonWithX);function UploadButtonWithX(){return UploadButtonWithX_classCallCheck(this,UploadButtonWithX),_super.apply(this,arguments)}return Constructor=UploadButtonWithX,(protoProps=[{key:"componentDidMount",value:function(){var $uploadButton=jquery_default()(this.uploadButton),$buttonX=jquery_default()(this.buttonX),$uploadSelect=jquery_default()(this.uploadSelect),uploadLogoSettings={action:this.props.uploadAction,allow:this.props.extAllowed,loadstart:function(){$uploadButton.text("Uploading..."),$uploadButton.attr("disabled",!0),$uploadButton.addClass("disable")},allcomplete:function(){$uploadButton.text("Upload Logo"),$uploadButton.attr("disabled",!1),$uploadButton.removeClass("disable"),helpers_default().UI.showSnackbar("Upload Complete. Reloading...",!1),setTimeout((function(){window.location.reload()}),1e3),$buttonX.removeClass("hide")}};uikit_combined_min_default().uploadSelect($uploadSelect,uploadLogoSettings)}},{key:"render",value:function(){var _this=this,_this$props=this.props,buttonText=_this$props.buttonText,showX=_this$props.showX,onXClick=_this$props.onXClick;return react.createElement("div",null,react.createElement("button",{ref:function(x){_this.buttonX=x},className:"md-btn md-btn-danger md-btn-small right ".concat(showX?"":"hide"),onClick:onXClick,style:{marginTop:"8px"}},"X"),react.createElement("button",{ref:function(button){_this.uploadButton=button},className:"uk-form-file md-btn md-btn-small right",style:{marginTop:"8px",textTransform:"none"}},buttonText,react.createElement("input",{ref:function(select){_this.uploadSelect=select},type:"file"})))}}])&&UploadButtonWithX_defineProperties(Constructor.prototype,protoProps),staticProps&&UploadButtonWithX_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),UploadButtonWithX}(react.Component);UploadButtonWithX.propTypes={buttonText:prop_types_default().string.isRequired,uploadAction:prop_types_default().string.isRequired,extAllowed:prop_types_default().string.isRequired,showX:prop_types_default().oneOfType([prop_types_default().bool,prop_types_default().string]),onXClick:prop_types_default().func};const Settings_UploadButtonWithX=UploadButtonWithX;function Appearance_typeof(obj){return Appearance_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Appearance_typeof(obj)}function Appearance_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Appearance_setPrototypeOf(o,p){return Appearance_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Appearance_setPrototypeOf(o,p)}function Appearance_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Appearance_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Appearance_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Appearance_possibleConstructorReturn(this,result)}}function Appearance_possibleConstructorReturn(self,call){if(call&&("object"===Appearance_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Appearance_getPrototypeOf(o){return Appearance_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Appearance_getPrototypeOf(o)}var colorMap={light:{headerBG:"#42464d",headerPrimary:"#f6f7f8",primary:"#606771",secondary:"#f7f8fa",tertiary:"#e74c3c",quaternary:"#e6e7e8"},dark:{headerBG:"#242a31",headerPrimary:"#f6f7f8",primary:"#f6f7f8",secondary:"#2f3640",tertiary:"#e74c3c",quaternary:"#454f5d"},bluejean:{headerBG:"#112d4e",headerPrimary:"#f9f7f7",primary:"#112d4e",secondary:"#f9f7f7",tertiary:"#3f72af",quaternary:"#dbe2ef"},midnight:{headerBG:"#2c2e3e",headerPrimary:"#f6f6f6",primary:"#444a54",secondary:"#c8c8c8",tertiary:"#ee2b47",quaternary:"#2c2e3e"},moonlight:{headerBG:"#2e3238",headerPrimary:"#eeeeee",primary:"#444a54",secondary:"#c8c8c8",tertiary:"#7971ea",quaternary:"#444a54"},purplerain:{headerBG:"#393041",headerPrimary:"#f6f6f6",primary:"#393041",secondary:"#d2cbd8",tertiary:"#f67280",quaternary:"#52455f"},sandstone:{headerBG:"#625757",headerPrimary:"#f9f9f9",primary:"#625757",secondary:"#dfdfdf",tertiary:"#ef5a5a",quaternary:"#6f6363"},winterfire:{headerBG:"#404969",headerPrimary:"#ebf0f6",primary:"#404969",secondary:"#ebf0f6",tertiary:"#ff7f50",quaternary:"#4a5479"}},AppearanceSettings=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Appearance_setPrototypeOf(subClass,superClass)}(AppearanceSettings,_React$Component);var Constructor,protoProps,staticProps,_super=Appearance_createSuper(AppearanceSettings);function AppearanceSettings(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AppearanceSettings),(_this=_super.call(this,props)).state={selectedColorScheme:"light"},_this}return Constructor=AppearanceSettings,(protoProps=[{key:"componentDidUpdate",value:function(){var colorScheme=this.calcColorScheme();this.state.selectedColorScheme!==colorScheme&&this.setState({selectedColorScheme:colorScheme})}},{key:"getSettingsValue",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"updateSetting",value:function(name,value,stateName){this.props.updateSetting({name,value,stateName})}},{key:"calcColorScheme",value:function(){var colorScheme="light";return"#2f3640"===this.getSettingsValue("colorSecondary")?colorScheme="dark":"#112d4e"===this.getSettingsValue("colorHeaderBG")?colorScheme="bluejean":"#ee2b47"===this.getSettingsValue("colorTertiary")?colorScheme="midnight":"#2e3238"===this.getSettingsValue("colorHeaderBG")?colorScheme="moonlight":"#f67280"===this.getSettingsValue("colorTertiary")?colorScheme="purplerain":"#625757"===this.getSettingsValue("colorHeaderBG")?colorScheme="sandstone":"#404969"===this.getSettingsValue("colorHeaderBG")&&(colorScheme="winterfire"),colorScheme}},{key:"onBuiltInColorSelectChange",value:function(e){e.target&&e.target.value&&(this.headerBGColorSelect.setState({selectedColor:colorMap[e.target.value].headerBG},this.headerBGColorSelect.updateColorButton),this.headerPrimaryColorSelect.setState({selectedColor:colorMap[e.target.value].headerPrimary},this.headerPrimaryColorSelect.updateColorButton),this.primaryColorSelect.setState({selectedColor:colorMap[e.target.value].primary},this.primaryColorSelect.updateColorButton),this.secondaryColorSelect.setState({selectedColor:colorMap[e.target.value].secondary},this.secondaryColorSelect.updateColorButton),this.tertiaryColorSelect.setState({selectedColor:colorMap[e.target.value].tertiary},this.tertiaryColorSelect.updateColorButton),this.quaternaryColorSelect.setState({selectedColor:colorMap[e.target.value].quaternary},this.quaternaryColorSelect.updateColorButton))}},{key:"saveColorScheme",value:function(){var colors=[{name:"color:headerbg",value:this.headerBGColorSelect.state.selectedColor},{name:"color:headerprimary",value:this.headerPrimaryColorSelect.state.selectedColor},{name:"color:primary",value:this.primaryColorSelect.state.selectedColor},{name:"color:secondary",value:this.secondaryColorSelect.state.selectedColor},{name:"color:tertiary",value:this.tertiaryColorSelect.state.selectedColor},{name:"color:quaternary",value:this.quaternaryColorSelect.state.selectedColor}];this.props.updateColorScheme(colors)}},{key:"render",value:function(){var _this2=this,active=this.props.active;return react.createElement("div",{className:active?"active":"hide"},react.createElement(Settings_SettingItem,{title:"Site Logo",subtitle:react.createElement("div",null,"Upload site logo to display in top navigation. ",react.createElement("i",null,"Note: Resize to max width of 140px")),component:react.createElement(Settings_UploadButtonWithX,{buttonText:"Upload Logo",uploadAction:"/settings/general/uploadlogo",extAllowed:"*.(jpg|jpeg|gif|png)",showX:this.getSettingsValue("hasCustomLogo"),onXClick:function(){_this2.updateSetting("gen:customlogo",!1,"hasCustomLogo"),setTimeout((function(){window.location.reload()}),1e3)}})}),react.createElement(Settings_SettingItem,{title:"Page Logo",subtitle:react.createElement("div",null,"Upload logo to display within page views. ",react.createElement("i",null,"Note: Used on login page (min-width: 400px)")),component:react.createElement(Settings_UploadButtonWithX,{buttonText:"Upload Logo",uploadAction:"/settings/general/uploadpagelogo",extAllowed:"*.(jpg|jpeg|gif|png)",showX:this.getSettingsValue("hasCustomPageLogo"),onXClick:function(){_this2.updateSetting("gen:custompagelogo",!1,"hasCustomPageLogo")}})}),react.createElement(Settings_SettingItem,{title:"Favicon",subtitle:"Upload a custom favicon",component:react.createElement(Settings_UploadButtonWithX,{buttonText:"Upload Favicon",uploadAction:"/settings/general/uploadfavicon",extAllowed:"*.(jpg|jpeg|gif|png|ico)",showX:this.getSettingsValue("hasCustomFavicon"),onXClick:function(){_this2.updateSetting("gen:customfavicon",!1,"hasCustomFavicon"),setTimeout((function(){window.location.reload()}),1e3)}})}),react.createElement(Settings_SettingItem,{title:"Color Scheme",subtitle:"Select the colors for your color scheme.",component:react.createElement(components_Button,{text:"Save",flat:!0,style:"success",extraClass:"uk-float-right mt-10",onClick:function(){_this2.saveColorScheme()}})},react.createElement(zone,null,react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Built-in Color Scheme",subtitle:"Select a predefined color scheme",component:react.createElement(components_SingleSelect,{width:"60%",showTextbox:!1,items:[{text:"Light (Default)",value:"light"},{text:"Dark",value:"dark"},{text:"Blue Jean",value:"bluejean"},{text:"Midnight",value:"midnight"},{text:"Moonlight",value:"moonlight"},{text:"Purple Rain",value:"purplerain"},{text:"Sandstone",value:"sandstone"},{text:"Winter's Fire",value:"winterfire"}],defaultValue:this.state.selectedColorScheme,onSelectChange:function(e){_this2.onBuiltInColorSelectChange(e)}})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Header Background",subtitle:"Background color of the header",component:react.createElement(components_ColorSelector,{ref:function(cs){_this2.headerBGColorSelect=cs},defaultColor:this.getSettingsValue("colorHeaderBG"),parentClass:"uk-width-2-3 uk-float-right"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Header Primary",subtitle:"Text and icon color within the header",component:react.createElement(components_ColorSelector,{ref:function(cs){_this2.headerPrimaryColorSelect=cs},defaultColor:this.getSettingsValue("colorHeaderPrimary"),parentClass:"uk-width-2-3 uk-float-right"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Primary",subtitle:"Most text and icons",component:react.createElement(components_ColorSelector,{ref:function(cs){_this2.primaryColorSelect=cs},defaultColor:this.getSettingsValue("colorPrimary"),parentClass:"uk-width-2-3 uk-float-right"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Secondary",subtitle:"The main background color",component:react.createElement(components_ColorSelector,{ref:function(cs){_this2.secondaryColorSelect=cs},defaultColor:this.getSettingsValue("colorSecondary"),parentClass:"uk-width-2-3 uk-float-right"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Tertiary",subtitle:"Accent color, used for links, some buttons, and notifications",component:react.createElement(components_ColorSelector,{ref:function(cs){_this2.tertiaryColorSelect=cs},defaultColor:this.getSettingsValue("colorTertiary"),parentClass:"uk-width-2-3 uk-float-right"})})),react.createElement(components_ZoneBox,null,react.createElement(Settings_SettingSubItem,{title:"Quaternary",subtitle:"Sidebar background color",component:react.createElement(components_ColorSelector,{ref:function(cs){_this2.quaternaryColorSelect=cs},defaultColor:this.getSettingsValue("colorQuaternary"),parentClass:"uk-width-2-3 uk-float-right"})})))))}}])&&Appearance_defineProperties(Constructor.prototype,protoProps),staticProps&&Appearance_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AppearanceSettings}(react.Component);AppearanceSettings.propTypes={active:prop_types_default().bool,settings:prop_types_default().object.isRequired,updateSetting:prop_types_default().func.isRequired,updateMultipleSettings:prop_types_default().func.isRequired,updateColorScheme:prop_types_default().func.isRequired};const Appearance=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting,updateMultipleSettings:settings_updateMultipleSettings,updateColorScheme:settings_updateColorScheme})(AppearanceSettings);var findIndex=__webpack_require__(318),findIndex_default=__webpack_require__.n(findIndex),velocity_react=__webpack_require__(323);function body_typeof(obj){return body_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},body_typeof(obj)}function body_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function body_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function body_setPrototypeOf(o,p){return body_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},body_setPrototypeOf(o,p)}function body_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=body_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=body_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return body_possibleConstructorReturn(this,result)}}function body_possibleConstructorReturn(self,call){if(call&&("object"===body_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function body_getPrototypeOf(o){return body_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},body_getPrototypeOf(o)}var SplitSettingsPanelBody=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&body_setPrototypeOf(subClass,superClass)}(SplitSettingsPanelBody,_React$Component);var Constructor,protoProps,staticProps,_super=body_createSuper(SplitSettingsPanelBody);function SplitSettingsPanelBody(){return body_classCallCheck(this,SplitSettingsPanelBody),_super.apply(this,arguments)}return Constructor=SplitSettingsPanelBody,(protoProps=[{key:"render",value:function(){var active=this.props.active;return react.createElement(velocity_react.VelocityComponent,{animation:{opacity:active?1:0},duration:750},react.createElement("div",{className:active?"":"hide"},this.props.component))}}])&&body_defineProperties(Constructor.prototype,protoProps),staticProps&&body_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SplitSettingsPanelBody}(react.Component);SplitSettingsPanelBody.propTypes={active:prop_types_default().bool.isRequired,component:prop_types_default().node.isRequired};const body=SplitSettingsPanelBody;function SplitSettingsPanel_typeof(obj){return SplitSettingsPanel_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SplitSettingsPanel_typeof(obj)}function SplitSettingsPanel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SplitSettingsPanel_setPrototypeOf(o,p){return SplitSettingsPanel_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},SplitSettingsPanel_setPrototypeOf(o,p)}function SplitSettingsPanel_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SplitSettingsPanel_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SplitSettingsPanel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SplitSettingsPanel_possibleConstructorReturn(this,result)}}function SplitSettingsPanel_possibleConstructorReturn(self,call){if(call&&("object"===SplitSettingsPanel_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SplitSettingsPanel_getPrototypeOf(o){return SplitSettingsPanel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},SplitSettingsPanel_getPrototypeOf(o)}var SplitSettingsPanel=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SplitSettingsPanel_setPrototypeOf(subClass,superClass)}(SplitSettingsPanel,_React$Component);var Constructor,protoProps,staticProps,_super=SplitSettingsPanel_createSuper(SplitSettingsPanel);function SplitSettingsPanel(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SplitSettingsPanel),(_this=_super.call(this,props)).state={activeChild:""},_this}return Constructor=SplitSettingsPanel,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().setupScrollers()}},{key:"componentDidUpdate",value:function(){-1===findIndex_default()(this.props.menuItems,["key",this.state.activeChild])&&this.props.menuItems.length>0&&this.setState({activeChild:this.props.menuItems[0].key})}},{key:"switchChild",value:function(key){this.setState({activeChild:key})}},{key:"render",value:function(){var _this2=this,_this$props=this.props,title=_this$props.title,subtitle=_this$props.subtitle,rightComponent=_this$props.rightComponent,menuItems=_this$props.menuItems,tooltip=_this$props.tooltip;return react.createElement("div",{className:"setting-item-wrap uk-margin-medium-bottom"},react.createElement("div",{className:"panel trupanel nopadding no-hover-shadow uk-overflow-hidden",style:{minHeight:"60px",height:"auto"}},react.createElement("div",{className:"left"},react.createElement("h6",{style:{padding:"0 0 0 15px",margin:"15px 0 0 0",fontSize:"16px",lineHeight:"14px"}},title,tooltip&&react.createElement("i",{className:"material-icons",style:{color:"#888",fontSize:"16px",cursor:"pointer",lineHeight:"3px",marginLeft:"4px"},"data-uk-tooltip":"{cls:'long-text'}",title:tooltip},"error")),react.createElement("h5",{style:{padding:"0 0 10px 15px",margin:"2px 0 0 0",fontSize:"12px"},className:"uk-text-muted"},subtitle)),react.createElement("div",{className:"right"},react.createElement("div",{style:{margin:"12px 10px 0 0"}},rightComponent)),react.createElement("hr",{className:"nomargin-top clear"}),react.createElement("div",{className:"panel-body2"},react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"split-panel-categories uk-width-1-4 uk-width-large-1-5 scrollable br",style:{minHeight:"300px",overflow:"hidden auto"}},react.createElement(Settings_Menu,{hideBorders:!0,draggable:this.props.menuDraggable,onMenuDrag:this.props.menuOnDrag},menuItems.map((function(item){return react.createElement(Settings_MenuItem,{active:_this2.state.activeChild===item.key,key:item.key,dragKey:item.key,title:item.title,onClick:function(){_this2.switchChild(item.key)},draggable:_this2.props.menuDraggable})})))),react.createElement("div",{className:"uk-width-3-4 uk-width-large-4-5"+(this.props.scrollable?" scrollable":""),style:{padding:"20px 15px 15px 15px",maxHeight:this.props.maxHeight||"auto"}},menuItems.map((function(menuItem){return react.createElement(body,{active:_this2.state.activeChild===menuItem.key,key:menuItem.key,component:menuItem.bodyComponent})}))))),this.props.footer&&react.createElement("div",{className:"panel-footer"},this.props.footer)))}}])&&SplitSettingsPanel_defineProperties(Constructor.prototype,protoProps),staticProps&&SplitSettingsPanel_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SplitSettingsPanel}(react.Component);SplitSettingsPanel.propTypes={title:prop_types_default().string.isRequired,subtitle:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().element]),tooltip:prop_types_default().string,rightComponent:prop_types_default().element,scrollable:prop_types_default().bool,maxHeight:prop_types_default().string,footer:prop_types_default().element,menuItems:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().object),prop_types_default().object]).isRequired,menuDraggable:prop_types_default().bool,menuOnDrag:prop_types_default().func};const Settings_SplitSettingsPanel=SplitSettingsPanel;function permSwitchPartial_typeof(obj){return permSwitchPartial_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},permSwitchPartial_typeof(obj)}function permSwitchPartial_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function permSwitchPartial_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function permSwitchPartial_setPrototypeOf(o,p){return permSwitchPartial_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},permSwitchPartial_setPrototypeOf(o,p)}function permSwitchPartial_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=permSwitchPartial_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=permSwitchPartial_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return permSwitchPartial_possibleConstructorReturn(this,result)}}function permSwitchPartial_possibleConstructorReturn(self,call){if(call&&("object"===permSwitchPartial_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function permSwitchPartial_getPrototypeOf(o){return permSwitchPartial_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},permSwitchPartial_getPrototypeOf(o)}var PermSwitchPartial=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&permSwitchPartial_setPrototypeOf(subClass,superClass)}(PermSwitchPartial,_React$Component);var Constructor,protoProps,staticProps,_super=permSwitchPartial_createSuper(PermSwitchPartial);function PermSwitchPartial(){return permSwitchPartial_classCallCheck(this,PermSwitchPartial),_super.apply(this,arguments)}return Constructor=PermSwitchPartial,(protoProps=[{key:"render",value:function(){var _this$props=this.props,title=_this$props.title,checked=_this$props.checked,onChange=_this$props.onChange,disabled=_this$props.disabled;return react.createElement("div",null,react.createElement("div",{style:{padding:"0 10px"}},react.createElement("div",{className:"uk-clearfix"},react.createElement("div",{className:"left"},react.createElement("h6",{style:{padding:"0 0 0 15px",margin:"20px 0",fontSize:"16px",lineHeight:"14px"}},title)),react.createElement("div",{className:"right",style:{position:"relative"}},react.createElement("div",{className:"md-switch md-green",style:{margin:"18px 0 0 0"}},react.createElement("label",null,"Allow",react.createElement("input",{type:"checkbox",checked,onChange,disabled}),react.createElement("span",{className:"lever"})))))),react.createElement("hr",{className:"nomargin-top clear"}))}}])&&permSwitchPartial_defineProperties(Constructor.prototype,protoProps),staticProps&&permSwitchPartial_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PermSwitchPartial}(react.Component);PermSwitchPartial.propTypes={title:prop_types_default().string.isRequired,checked:prop_types_default().oneOfType([prop_types_default().bool,prop_types_default().string]),onChange:prop_types_default().func.isRequired,disabled:prop_types_default().oneOfType([prop_types_default().bool,prop_types_default().string])};const permSwitchPartial=PermSwitchPartial;function permissionGroupPartial_typeof(obj){return permissionGroupPartial_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},permissionGroupPartial_typeof(obj)}var permissionGroupPartial_class,permissionGroupPartial_class2,permissionGroupPartial_descriptor,permissionGroupPartial_descriptor2,permissionGroupPartial_descriptor3,permissionGroupPartial_descriptor4,permissionGroupPartial_descriptor5,permissionGroupPartial_descriptor6,permissionGroupPartial_descriptor7;function permissionGroupPartial_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function permissionGroupPartial_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function permissionGroupPartial_setPrototypeOf(o,p){return permissionGroupPartial_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},permissionGroupPartial_setPrototypeOf(o,p)}function permissionGroupPartial_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=permissionGroupPartial_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=permissionGroupPartial_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return permissionGroupPartial_possibleConstructorReturn(this,result)}}function permissionGroupPartial_possibleConstructorReturn(self,call){if(call&&("object"===permissionGroupPartial_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return permissionGroupPartial_assertThisInitialized(self)}function permissionGroupPartial_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function permissionGroupPartial_getPrototypeOf(o){return permissionGroupPartial_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},permissionGroupPartial_getPrototypeOf(o)}function permissionGroupPartial_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var PermissionGroupPartial=(0,mobxreact_esm.Pi)((permissionGroupPartial_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&permissionGroupPartial_setPrototypeOf(subClass,superClass)}(PermissionGroupPartial,_React$Component);var Constructor,protoProps,staticProps,_super=permissionGroupPartial_createSuper(PermissionGroupPartial);function PermissionGroupPartial(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PermissionGroupPartial),permissionGroupPartial_initializerDefineProperty(_this=_super.call(this,props),"all",permissionGroupPartial_descriptor,permissionGroupPartial_assertThisInitialized(_this)),permissionGroupPartial_initializerDefineProperty(_this,"create",permissionGroupPartial_descriptor2,permissionGroupPartial_assertThisInitialized(_this)),permissionGroupPartial_initializerDefineProperty(_this,"view",permissionGroupPartial_descriptor3,permissionGroupPartial_assertThisInitialized(_this)),permissionGroupPartial_initializerDefineProperty(_this,"update",permissionGroupPartial_descriptor4,permissionGroupPartial_assertThisInitialized(_this)),permissionGroupPartial_initializerDefineProperty(_this,"delete",permissionGroupPartial_descriptor5,permissionGroupPartial_assertThisInitialized(_this)),permissionGroupPartial_initializerDefineProperty(_this,"special",permissionGroupPartial_descriptor6,permissionGroupPartial_assertThisInitialized(_this)),permissionGroupPartial_initializerDefineProperty(_this,"roleSpecials",permissionGroupPartial_descriptor7,permissionGroupPartial_assertThisInitialized(_this)),(0,mobx_esm.rC)(permissionGroupPartial_assertThisInitialized(_this)),_this}return Constructor=PermissionGroupPartial,(protoProps=[{key:"componentDidMount",value:function(){this.all=this.props.grants.all||"",this.create=this.props.grants.create||"",this.view=this.props.grants.view||"",this.update=this.props.grants.update||"",this.delete=this.props.grants.delete||"",this.special=this.props.grants.special||[],this.roleSpecials=this.props.roleSpecials||[]}},{key:"componentDidUpdate",value:function(prevProps){prevProps.roleSpecials!==this.props.roleSpecials&&(this.roleSpecials=this.props.roleSpecials),prevProps.grants!==this.props.grants&&(prevProps.grants.all!==this.props.grants.all&&(this.all=this.props.grants.all),!0===this.all?(!0!==this.create&&(this.create=!0),!0!==this.view&&(this.view=!0),!0!==this.update&&(this.update=!0),!0!==this.delete&&(this.delete=!0),helpers_default().arrayIsEqual(this.special,["*"])||(this.special=["*"])):(prevProps.grants.create!==this.props.grants.create&&(this.create=this.props.grants.create),prevProps.grants.view!==this.props.grants.view&&(this.view=this.props.grants.view),prevProps.grants.update!==this.props.grants.update&&(this.update=this.props.grants.update),prevProps.grants.delete!==this.props.grants.delete&&(this.delete=this.props.grants.delete),prevProps.grants.special!==this.props.grants.special&&(this.special=this.props.grants.special)))}},{key:"onEnableSwitchChanged",value:function(e,name){"all"===name?(this.all=e.target.checked,this.create=e.target.checked,this.view=e.target.checked,this.update=e.target.checked,this.delete=e.target.checked,e.target.checked?this.special.replace(["*"]):this.special.clear()):this[name]=e.target.checked}},{key:"hasSpecial",value:function(perm){return!(!this.special.length<0||!helpers_default().arrayIsEqual(this.special,["*"])&&-1===this.special.indexOf(perm))}},{key:"onSpecialChanged",value:function(e,perm){if(perm&&!this.all){var arr=this.special;e.target.checked?arr.push(perm):arr=(0,lodash.without)(arr,perm),this.special.replace((0,lodash.uniq)(arr))}}},{key:"render",value:function(){var _this2=this,_this$props=this.props,title=_this$props.title,subtitle=_this$props.subtitle,role=_this$props.role;return react.createElement("div",null,react.createElement(Settings_SettingItem,{title,subtitle,subPanelPadding:"0",component:react.createElement(Settings_EnableSwitch,{stateName:"all_perm_".concat(title,"_").concat(role.get("_id")),label:"All",checked:this.all,onChange:function(e){return _this2.onEnableSwitchChanged(e,"all")}})},react.createElement(permSwitchPartial,{title:"Create",checked:this.create,onChange:function(e){return _this2.onEnableSwitchChanged(e,"create")},disabled:this.all}),react.createElement(permSwitchPartial,{title:"View",onChange:function(e){return _this2.onEnableSwitchChanged(e,"view")},checked:this.view,disabled:this.all}),react.createElement(permSwitchPartial,{title:"Update",onChange:function(e){return _this2.onEnableSwitchChanged(e,"update")},checked:this.update,disabled:this.all}),react.createElement(permSwitchPartial,{title:"Delete",onChange:function(e){return _this2.onEnableSwitchChanged(e,"delete")},checked:this.delete,disabled:this.all}),this.roleSpecials.length>0&&react.createElement("div",null,react.createElement("div",{className:"panel-body2 bg-warn",style:{padding:"0 10px"}},react.createElement("div",{className:"uk-clearfix"},react.createElement("div",{className:"left"},react.createElement("h6",{className:"text-dark",style:{padding:"0 0 0 15px",margin:"20px 0",fontSize:"18px",lineHeight:"14px"}},"Special Permissions")))),this.roleSpecials.map((function(perm){return react.createElement(permSwitchPartial,{key:"".concat(perm.title,"_").concat(perm.perm),title:perm.title,checked:_this2.hasSpecial(perm.perm),onChange:function(e){return _this2.onSpecialChanged(e,perm.perm)},disabled:_this2.all})})))))}}])&&permissionGroupPartial_defineProperties(Constructor.prototype,protoProps),staticProps&&permissionGroupPartial_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PermissionGroupPartial}(react.Component),permissionGroupPartial_descriptor=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"all",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionGroupPartial_descriptor2=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"create",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionGroupPartial_descriptor3=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"view",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionGroupPartial_descriptor4=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"update",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionGroupPartial_descriptor5=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"delete",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionGroupPartial_descriptor6=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"special",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),permissionGroupPartial_descriptor7=permissionGroupPartial_applyDecoratedDescriptor(permissionGroupPartial_class2.prototype,"roleSpecials",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionGroupPartial_class=permissionGroupPartial_class2))||permissionGroupPartial_class;PermissionGroupPartial.propTypes={title:prop_types_default().string.isRequired,subtitle:prop_types_default().string,roleSpecials:prop_types_default().array,role:prop_types_default().object.isRequired,grants:prop_types_default().object.isRequired};const permissionGroupPartial=PermissionGroupPartial;function permissionBody_typeof(obj){return permissionBody_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},permissionBody_typeof(obj)}var permissionBody_class,permissionBody_class2,permissionBody_descriptor,permissionBody_descriptor2,permissionBody_descriptor3,permissionBody_descriptor4,permissionBody_descriptor5,permissionBody_descriptor6,permissionBody_descriptor7,_descriptor8,_descriptor9,_descriptor10,_descriptor11;function permissionBody_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function permissionBody_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function permissionBody_setPrototypeOf(o,p){return permissionBody_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},permissionBody_setPrototypeOf(o,p)}function permissionBody_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=permissionBody_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=permissionBody_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return permissionBody_possibleConstructorReturn(this,result)}}function permissionBody_possibleConstructorReturn(self,call){if(call&&("object"===permissionBody_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return permissionBody_assertThisInitialized(self)}function permissionBody_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function permissionBody_getPrototypeOf(o){return permissionBody_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},permissionBody_getPrototypeOf(o)}function permissionBody_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var PermissionBody=(0,mobxreact_esm.Pi)((permissionBody_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&permissionBody_setPrototypeOf(subClass,superClass)}(PermissionBody,_React$Component);var Constructor,protoProps,staticProps,_super=permissionBody_createSuper(PermissionBody);function PermissionBody(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PermissionBody),permissionBody_initializerDefineProperty(_this=_super.call(this,props),"isAdmin",permissionBody_descriptor,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"isAgent",permissionBody_descriptor2,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"hasHierarchy",permissionBody_descriptor3,permissionBody_assertThisInitialized(_this)),_this.grants=[],permissionBody_initializerDefineProperty(_this,"ticketGrants",permissionBody_descriptor4,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"commentGrants",permissionBody_descriptor5,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"accountGrants",permissionBody_descriptor6,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"groupGrants",permissionBody_descriptor7,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"teamGrants",_descriptor8,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"departmentGrants",_descriptor9,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"reportGrants",_descriptor10,permissionBody_assertThisInitialized(_this)),permissionBody_initializerDefineProperty(_this,"noticeGrants",_descriptor11,permissionBody_assertThisInitialized(_this)),(0,mobx_esm.rC)(permissionBody_assertThisInitialized(_this)),_this}return Constructor=PermissionBody,staticProps=[{key:"mapTicketSpecials",value:function(){return[{title:"Print",perm:"print"},{title:"Notes",perm:"notes"},{title:"Manage Public Tickets",perm:"public"},{title:"Can View All Tickets in Assigned Groups",perm:"viewall"}]}},{key:"mapAccountSpecials",value:function(){return[{title:"Import",perm:"import"}]}},{key:"mapNoticeSpecials",value:function(){return[{title:"Activate",perm:"activate"},{title:"Deactivate",perm:"deactivate"}]}},{key:"buildPermArray",value:function(permGroup){var arr=[];return permGroup.all?arr=["*"]:(permGroup.create&&arr.push("create"),permGroup.view&&arr.push("view"),permGroup.update&&arr.push("update"),permGroup.delete&&arr.push("delete"),permGroup.special&&arr.push(permGroup.special.join(" "))),arr}}],(protoProps=[{key:"componentDidMount",value:function(){this.isAdmin=this.props.role.get("isAdmin")||!1,this.isAgent=this.props.role.get("isAgent")||!1,this.hasHierarchy=this.props.role.get("hierarchy")||!1,this.grants=this.props.role.get("grants").toArray()||[],this.parseGrants()}},{key:"componentDidUpdate",value:function(){""===this.isAdmin&&(this.isAdmin=this.props.role.get("isAdmin")||!1),""===this.isAgent&&(this.isAgent=this.props.role.get("isAgent")||!1),""===this.hasHierarchy&&(this.hasHierarchy=this.props.role.get("hierarchy")||!1),this.grants.length<1&&(this.grants=this.props.role.get("grants").toArray()||[]),this.parseGrants()}},{key:"parseGrants",value:function(){if(this.grants){var parsedGrants=helpers_default().parseRoleGrants(this.grants);parsedGrants.tickets&&!(0,lodash.isEqual)(parsedGrants.tickets,this.ticketGrants)&&(this.ticketGrants=parsedGrants.tickets),parsedGrants.comments&&!(0,lodash.isEqual)(parsedGrants.comments,this.commentGrants)&&(this.commentGrants=parsedGrants.comments),parsedGrants.accounts&&!(0,lodash.isEqual)(parsedGrants.accounts,this.accountGrants)&&(this.accountGrants=parsedGrants.accounts),parsedGrants.groups&&!(0,lodash.isEqual)(parsedGrants.groups,this.groupGrants)&&(this.groupGrants=parsedGrants.groups),parsedGrants.teams&&!(0,lodash.isEqual)(parsedGrants.teams,this.teamGrants)&&(this.teamGrants=parsedGrants.teams),parsedGrants.departments&&!(0,lodash.isEqual)(parsedGrants.departments,this.departmentGrants)&&(this.departmentGrants=parsedGrants.departments),parsedGrants.reports&&!(0,lodash.isEqual)(parsedGrants.reports,this.reportGrants)&&(this.reportGrants=parsedGrants.reports),parsedGrants.notices&&!(0,lodash.isEqual)(parsedGrants.notices,this.noticeGrants)&&(this.noticeGrants=parsedGrants.notices)}}},{key:"onEnableSwitchChanged",value:function(e,name){this[name]=e.target.checked}},{key:"onSubmit",value:function(e){e.preventDefault();var obj={};obj._id=this.props.role.get("_id"),this.isAdmin&&(obj.admin=["*"],obj.settings=["*"]),this.isAgent&&(obj.agent=["*"]),obj.hierarchy=this.hasHierarchy,obj.tickets=PermissionBody.buildPermArray(this.ticketPermGroup),obj.comments=PermissionBody.buildPermArray(this.commentPermGroup),obj.accounts=PermissionBody.buildPermArray(this.accountPermGroup),obj.groups=PermissionBody.buildPermArray(this.groupPermGroup),obj.teams=PermissionBody.buildPermArray(this.teamPermGroup),obj.departments=PermissionBody.buildPermArray(this.departmentPermGroup),obj.reports=PermissionBody.buildPermArray(this.reportPermGroup),obj.notices=PermissionBody.buildPermArray(this.noticePermGroup),this.props.updatePermissions(obj)}},{key:"showDeletePermissionRole",value:function(e){e.preventDefault(),this.props.showModal("DELETE_ROLE",{role:this.props.role})}},{key:"render",value:function(){var _this2=this;return react.createElement("div",null,react.createElement("form",{onSubmit:function(e){return _this2.onSubmit(e)}},react.createElement(Settings_SettingItem,{title:"Admin",tooltip:"Role is considered an admin. Enabling management of the trudesk instance.",subtitle:"Is this role defined as an admin role?",component:react.createElement(Settings_EnableSwitch,{stateName:"isAdmin_"+this.props.role.get("_id"),label:"Enable",checked:this.isAdmin,onChange:function(e){return _this2.onEnableSwitchChanged(e,"isAdmin")}})}),react.createElement(Settings_SettingItem,{title:"Support Agent",subtitle:"Is this role defined as an agent role?",tooltip:"Role is considered an agent role. Enabling agent views and displaying in agent lists.",component:react.createElement(Settings_EnableSwitch,{stateName:"isAgent_"+this.props.role.get("_id"),label:"Enable",checked:this.isAgent,onChange:function(e){return _this2.onEnableSwitchChanged(e,"isAgent")}})}),react.createElement(Settings_SettingItem,{title:"Enable Hierarchy",subtitle:"Allow this role to manage resources owned by roles defined under it.",component:react.createElement(Settings_EnableSwitch,{stateName:"hasHierarchy_"+this.props.role.get("_id"),label:"Enable",checked:this.hasHierarchy,onChange:function(e){return _this2.onEnableSwitchChanged(e,"hasHierarchy")}})}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.ticketPermGroup=i},title:"Tickets",role:this.props.role,grants:this.ticketGrants,roleSpecials:PermissionBody.mapTicketSpecials(),subtitle:"Ticket Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.commentPermGroup=i},title:"Comments",role:this.props.role,grants:this.commentGrants,subtitle:"Ticket Comments Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.accountPermGroup=i},title:"Accounts",role:this.props.role,roleSpecials:PermissionBody.mapAccountSpecials(),grants:this.accountGrants,subtitle:"Account Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.groupPermGroup=i},title:"Groups",role:this.props.role,grants:this.groupGrants,subtitle:"Group Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.teamPermGroup=i},title:"Teams",role:this.props.role,grants:this.teamGrants,subtitle:"Team Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.departmentPermGroup=i},title:"Departments",role:this.props.role,grants:this.departmentGrants,subtitle:"Department Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.reportPermGroup=i},title:"Reports",role:this.props.role,grants:this.reportGrants,subtitle:"Report Permissions"}),react.createElement(permissionGroupPartial,{ref:function(i){return _this2.noticePermGroup=i},title:"Notices",role:this.props.role,grants:this.noticeGrants,roleSpecials:PermissionBody.mapNoticeSpecials(),subtitle:"Notice Permissions"}),react.createElement("div",{className:"uk-margin-large-bottom"},react.createElement("h2",{className:"text-light"},"Danger Zone"),react.createElement("div",{className:"danger-zone"},react.createElement("div",{className:"dz-box uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h5",null,"Delete this permission role?"),react.createElement("p",null,"Once you delete a permission role, there is no going back. Please be certain.")),react.createElement("div",{className:"uk-float-right",style:{paddingTop:"10px"}},react.createElement(components_Button,{text:"Delete",small:!0,style:"danger",onClick:function(e){return _this2.showDeletePermissionRole(e)}}))))),react.createElement("div",null,react.createElement("div",{className:"box uk-clearfix"},react.createElement("div",{className:"uk-float-right",style:{paddingTop:"10px"}},react.createElement(components_Button,{type:"submit",style:"success",waves:!0,text:"Save Permissions"}))))))}}])&&permissionBody_defineProperties(Constructor.prototype,protoProps),staticProps&&permissionBody_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PermissionBody}(react.Component),permissionBody_descriptor=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"isAdmin",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionBody_descriptor2=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"isAgent",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionBody_descriptor3=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"hasHierarchy",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),permissionBody_descriptor4=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"ticketGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),permissionBody_descriptor5=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"commentGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),permissionBody_descriptor6=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"accountGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),permissionBody_descriptor7=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"groupGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),_descriptor8=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"teamGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),_descriptor9=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"departmentGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),_descriptor10=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"reportGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),_descriptor11=permissionBody_applyDecoratedDescriptor(permissionBody_class2.prototype,"noticeGrants",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{all:!1,create:!1,view:!1,update:!1,delete:!1,special:[]}}}),permissionBody_class=permissionBody_class2))||permissionBody_class;PermissionBody.propTypes={role:prop_types_default().object.isRequired,updatePermissions:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const permissionBody=(0,es.$j)(null,{updatePermissions:settings_updatePermissions,showModal})(PermissionBody);function Permissions_typeof(obj){return Permissions_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Permissions_typeof(obj)}function Permissions_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Permissions_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Permissions_setPrototypeOf(o,p){return Permissions_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Permissions_setPrototypeOf(o,p)}function Permissions_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Permissions_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Permissions_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Permissions_possibleConstructorReturn(this,result)}}function Permissions_possibleConstructorReturn(self,call){if(call&&("object"===Permissions_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Permissions_getPrototypeOf(o){return Permissions_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Permissions_getPrototypeOf(o)}var PermissionsSettingsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Permissions_setPrototypeOf(subClass,superClass)}(PermissionsSettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Permissions_createSuper(PermissionsSettingsContainer);function PermissionsSettingsContainer(){return Permissions_classCallCheck(this,PermissionsSettingsContainer),_super.apply(this,arguments)}return Constructor=PermissionsSettingsContainer,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchRoles()}},{key:"getSetting",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"onRoleOrderChanged",value:function(e){for(var children=jquery_default()(e.target).children("li"),arr=[],i=0;i<children.length;i++)arr.push(jquery_default()(children[i]).attr("data-key"));this.props.updateRoleOrder({roleOrder:arr})}},{key:"getRoleMenu",value:function(){var _this=this;return this.props.roleOrder&&this.props.roleOrder.get("order")&&this.props.roles?this.props.roleOrder.get("order").map((function(o){return _this.props.roles.find((function(v){return v.get("_id")===o}))})).toArray():[]}},{key:"onCreateRoleClicked",value:function(e){e.preventDefault(),this.props.showModal("CREATE_ROLE")}},{key:"onDefaultUserRoleChange",value:function(e){this.props.updateSetting({name:"role:user:default",value:e.target.value,stateName:"defaultUserRole"})}},{key:"render",value:function(){var _this2=this,mappedRoles=this.props.roles.map((function(role){return{text:role.get("name"),value:role.get("_id")}})).toArray();return react.createElement("div",{className:this.props.active?"":"hide"},react.createElement(Settings_SettingItem,{title:"Default New User Role",subtitle:"Role assigned to users created during sign-up and public tickets",component:react.createElement(components_SingleSelect,{items:mappedRoles,defaultValue:this.getSetting("defaultUserRole"),onSelectChange:function(e){_this2.onDefaultUserRoleChange(e)},width:"50%",showTextbox:!1})}),react.createElement(Settings_SplitSettingsPanel,{title:"Permissions",tooltip:"Permission order is top down. ex: Admins at top; Users at bottom.",subtitle:react.createElement("div",null,"Create/Modify Role Permissions"," ",react.createElement("span",{className:"uk-text-danger"},"Note: Changes take affect after page refresh")),rightComponent:react.createElement(components_Button,{text:"Create",style:"success",flat:!0,waves:!0,onClick:function(e){return _this2.onCreateRoleClicked(e)}}),menuItems:this.getRoleMenu().map((function(role){return{key:role.get("_id"),title:role.get("name"),bodyComponent:react.createElement(permissionBody,{role})}})),menuDraggable:!0,menuOnDrag:function(e){_this2.onRoleOrderChanged(e)}}))}}])&&Permissions_defineProperties(Constructor.prototype,protoProps),staticProps&&Permissions_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),PermissionsSettingsContainer}(react.Component);PermissionsSettingsContainer.propTypes={active:prop_types_default().bool.isRequired,roles:prop_types_default().object.isRequired,roleOrder:prop_types_default().object.isRequired,settings:prop_types_default().object.isRequired,fetchRoles:prop_types_default().func.isRequired,updateRoleOrder:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired,updateSetting:prop_types_default().func.isRequired};const Permissions=(0,es.$j)((function(state){return{roles:state.shared.roles,roleOrder:state.shared.roleOrder,settings:state.settings.settings}}),{fetchRoles:common_fetchRoles,updateRoleOrder:common_updateRoleOrder,showModal,updateSetting:settings_updateSetting})(PermissionsSettingsContainer);function NumberWithSave_typeof(obj){return NumberWithSave_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},NumberWithSave_typeof(obj)}function NumberWithSave_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NumberWithSave_setPrototypeOf(o,p){return NumberWithSave_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},NumberWithSave_setPrototypeOf(o,p)}function NumberWithSave_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=NumberWithSave_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NumberWithSave_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NumberWithSave_possibleConstructorReturn(this,result)}}function NumberWithSave_possibleConstructorReturn(self,call){if(call&&("object"===NumberWithSave_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NumberWithSave_getPrototypeOf(o){return NumberWithSave_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},NumberWithSave_getPrototypeOf(o)}var NumberWithSave=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NumberWithSave_setPrototypeOf(subClass,superClass)}(NumberWithSave,_React$Component);var Constructor,protoProps,staticProps,_super=NumberWithSave_createSuper(NumberWithSave);function NumberWithSave(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NumberWithSave),(_this=_super.call(this,props)).state={value:_this.props.value},_this}return Constructor=NumberWithSave,staticProps=[{key:"getDerivedStateFromProps",value:function(nextProps,state){return state.value?null:{value:nextProps.value}}}],(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs()}},{key:"onSaveClicked",value:function(){this.props.updateSetting({name:this.props.settingName,value:this.state.value,stateName:this.props.stateName})}},{key:"updateValue",value:function(evt){this.setState({value:evt.target.value})}},{key:"render",value:function(){var _this2=this,width="75%";return this.props.width&&(width=this.props.width),react.createElement("div",{className:"uk-width-3-4 uk-float-right"},react.createElement("div",{className:"uk-width-1-4 uk-float-right",style:{marginTop:"10px",textAlign:"center"}},react.createElement("button",{className:"md-btn md-btn-small",onClick:function(e){return _this2.onSaveClicked(e)}},"Save")),react.createElement("div",{className:"uk-width-3-4 uk-float-right",style:{paddingRight:"10px",width}},react.createElement("input",{id:this.props.stateName,className:"md-input",type:"number",value:this.state.value,onChange:function(evt){return _this2.updateValue(evt)}})))}}])&&NumberWithSave_defineProperties(Constructor.prototype,protoProps),staticProps&&NumberWithSave_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NumberWithSave}(react.Component);NumberWithSave.propTypes={updateSetting:prop_types_default().func.isRequired,settingName:prop_types_default().string.isRequired,stateName:prop_types_default().string.isRequired,value:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),width:prop_types_default().string};const Settings_NumberWithSave=(0,es.$j)(null,{updateSetting:settings_updateSetting})(NumberWithSave);function ButtonGroup_typeof(obj){return ButtonGroup_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},ButtonGroup_typeof(obj)}function ButtonGroup_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function ButtonGroup_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ButtonGroup_setPrototypeOf(o,p){return ButtonGroup_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},ButtonGroup_setPrototypeOf(o,p)}function ButtonGroup_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=ButtonGroup_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=ButtonGroup_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return ButtonGroup_possibleConstructorReturn(this,result)}}function ButtonGroup_possibleConstructorReturn(self,call){if(call&&("object"===ButtonGroup_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function ButtonGroup_getPrototypeOf(o){return ButtonGroup_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ButtonGroup_getPrototypeOf(o)}var ButtonGroup=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&ButtonGroup_setPrototypeOf(subClass,superClass)}(ButtonGroup,_React$Component);var Constructor,protoProps,staticProps,_super=ButtonGroup_createSuper(ButtonGroup);function ButtonGroup(){return ButtonGroup_classCallCheck(this,ButtonGroup),_super.apply(this,arguments)}return Constructor=ButtonGroup,(protoProps=[{key:"render",value:function(){return react.createElement("div",{className:"md-btn-group mt-5"+(this.props.classNames?" "+this.props.classNames:"")},this.props.children)}}])&&ButtonGroup_defineProperties(Constructor.prototype,protoProps),staticProps&&ButtonGroup_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ButtonGroup}(react.Component);ButtonGroup.propTypes={classNames:prop_types_default().string};const components_ButtonGroup=ButtonGroup;function editPriorityPartial_typeof(obj){return editPriorityPartial_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},editPriorityPartial_typeof(obj)}function editPriorityPartial_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function editPriorityPartial_setPrototypeOf(o,p){return editPriorityPartial_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},editPriorityPartial_setPrototypeOf(o,p)}function editPriorityPartial_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=editPriorityPartial_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=editPriorityPartial_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return editPriorityPartial_possibleConstructorReturn(this,result)}}function editPriorityPartial_possibleConstructorReturn(self,call){if(call&&("object"===editPriorityPartial_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function editPriorityPartial_getPrototypeOf(o){return editPriorityPartial_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},editPriorityPartial_getPrototypeOf(o)}var EditPriorityPartial=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&editPriorityPartial_setPrototypeOf(subClass,superClass)}(EditPriorityPartial,_React$Component);var Constructor,protoProps,staticProps,_super=editPriorityPartial_createSuper(EditPriorityPartial);function EditPriorityPartial(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EditPriorityPartial),_super.call(this,props)}return Constructor=EditPriorityPartial,(protoProps=[{key:"toggleEditPriority",value:function(){var $parent=jquery_default()(this.editPriorityRef).parent(),$v=$parent.find(".view-priority"),$e=$parent.find(".edit-priority");$v&&$e&&($v.toggleClass("hide"),$e.toggleClass("hide"))}},{key:"onSubmitEditPriority",value:function(e,priority){var _this=this;if(e.preventDefault(),!jquery_default()(e.target).isValid(null,null,!1))return!0;var id=priority.get("_id"),name=e.target.name.value,overdueIn=e.target.overdueIn.value,htmlColor=e.target.htmlColor.value,self=this;client_api.tickets.updatePriority({id,name,overdueIn,htmlColor}).then((function(res){logger.debug(res),self.toggleEditPriority(),_this.props.fetchSettings()})).catch((function(err){if(err.response){var errorText=err.response.data.error;logger.error(errorText,err.response),helpers_default().UI.showSnackbar("Error: ".concat(errorText),!0)}else logger.error(err)}))}},{key:"render",value:function(){var _this2=this,priority=this.props.priority;return react.createElement("div",{className:"edit-priority hide",style:{paddingTop:"2px"},ref:function(i){return _this2.editPriorityRef=i}},react.createElement("form",{onSubmit:function(e){return _this2.onSubmitEditPriority(e,priority)}},react.createElement("div",{className:"uk-grid uk-grid-collapse uk-clearfix"},react.createElement("div",{className:"uk-width-1-4"},react.createElement("label",null,"Priority Name"),react.createElement("input",{name:"name",type:"text",className:"md-input",defaultValue:priority.get("name")})),react.createElement("div",{className:"uk-width-1-4 uk-padding-small-sides"},react.createElement("label",null,"SLA Overdue (minutes)"),react.createElement("input",{name:"overdueIn",type:"text",className:"md-input",defaultValue:priority.get("overdueIn")})),react.createElement("div",{className:"uk-width-1-4 uk-padding-small-sides"},react.createElement(components_ColorSelector,{inputName:"htmlColor",defaultColor:priority.get("htmlColor"),hideRevert:!0,validationEnabled:!0})),react.createElement("div",{className:"uk-width-1-4"},react.createElement("div",{className:"md-btn-group uk-float-right uk-text-right mt-5"},react.createElement(components_Button,{small:!0,text:"Cancel",onClick:function(){return _this2.toggleEditPriority()}}),react.createElement(components_Button,{text:"Save",small:!0,style:"success",type:"submit"}))))))}}])&&editPriorityPartial_defineProperties(Constructor.prototype,protoProps),staticProps&&editPriorityPartial_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EditPriorityPartial}(react.Component);EditPriorityPartial.propTypes={priority:prop_types_default().object.isRequired,fetchSettings:prop_types_default().func.isRequired};const editPriorityPartial=(0,es.$j)(null,{fetchSettings:settings_fetchSettings})(EditPriorityPartial);function ticketTypeBody_typeof(obj){return ticketTypeBody_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},ticketTypeBody_typeof(obj)}function ticketTypeBody_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ticketTypeBody_setPrototypeOf(o,p){return ticketTypeBody_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},ticketTypeBody_setPrototypeOf(o,p)}function ticketTypeBody_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=ticketTypeBody_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=ticketTypeBody_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return ticketTypeBody_possibleConstructorReturn(this,result)}}function ticketTypeBody_possibleConstructorReturn(self,call){if(call&&("object"===ticketTypeBody_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function ticketTypeBody_getPrototypeOf(o){return ticketTypeBody_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ticketTypeBody_getPrototypeOf(o)}var TicketTypeBody=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&ticketTypeBody_setPrototypeOf(subClass,superClass)}(TicketTypeBody,_React$Component);var Constructor,protoProps,staticProps,_super=ticketTypeBody_createSuper(TicketTypeBody);function TicketTypeBody(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TicketTypeBody),(_this=_super.call(this,props)).prioritiesRef={},_this}return Constructor=TicketTypeBody,(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs()}},{key:"handleTypeRename",value:function(event){var _this2=this;event.preventDefault();var name=event.target.name.value;client_api.tickets.renameTicketType(this.props.type.get("_id"),name).then((function(response){response.success&&helpers_default().UI.showSnackbar("Type Updated Successfully"),_this2.props.fetchSettings()})).catch((function(err){helpers_default().UI.showSnackbar(err,!0)}))}},{key:"onAddPriorityClick",value:function(e,type){this.props.showModal("ADD_PRIORITY_TO_TYPE",{type})}},{key:"toggleEditPriority",value:function(e,k){var obj=this.prioritiesRef[k],$v=jquery_default()(obj).find(".view-priority"),$e=jquery_default()(obj).find(".edit-priority");$v&&$e&&($v.toggleClass("hide"),$e.toggleClass("hide"))}},{key:"onRemoveTicketTypePriorityClicked",value:function(e,priorityId){var _this3=this;e.preventDefault(),client_api.tickets.removePriorityFromType({typeId:this.props.type.get("_id"),priority:priorityId}).then((function(){helpers_default().UI.showSnackbar("Priority removed from type: ".concat(_this3.props.type.get("name"))),_this3.props.fetchSettings()})).catch((function(error){if(error.response){var errorText=error.response.data.error;logger.error(errorText,error.response),helpers_default().UI.showSnackbar("Error: ".concat(errorText),!0)}else logger.error(error)}))}},{key:"showDeleteTicketTypeModal",value:function(e,type){this.props.showModal("DELETE_TICKET_TYPE",{type})}},{key:"render",value:function(){var _this4=this,type=this.props.type;return react.createElement("div",null,react.createElement("div",{className:"ticket-type-general-wrapper"},react.createElement("h2",{className:"text-light"},"General"),react.createElement("hr",{style:{margin:"5px 0 25px 0"}}),react.createElement("form",{onSubmit:function(e){_this4.handleTypeRename(e)}},react.createElement("div",{className:"uk-input-group"},react.createElement("label",{htmlFor:"ticket-type-name"},"Type Name"),react.createElement("input",{name:"name",type:"text",className:"md-input",defaultValue:type.get("name")}),react.createElement("div",{className:"uk-input-group-addon"},react.createElement("button",{type:"submit",className:"md-btn md-btn-small"},"Rename"))))),react.createElement("div",{className:"ticket-type-priorities-wrapper uk-margin-medium-top"},react.createElement("h2",{className:"text-light uk-display-inline-block"},"Priorities",react.createElement("i",{className:"material-icons",style:{color:"#888",fontSize:"16px",cursor:"pointer",lineHeight:"18px",marginLeft:"5px"},"data-uk-tooltip":"{cls:'long-text'}",title:"Priorities linked to this type. <br /> Editing a priority will update all types linked."},"help")),react.createElement("div",{className:"uk-float-right"},react.createElement(components_Button,{text:"Add",style:"success",flat:!0,waves:!0,onClick:function(e){return _this4.onAddPriorityClick(e,type)}})),react.createElement("hr",{style:{margin:"5px 0 25px 0"}}),react.createElement("div",{className:"priority-loop zone"},type.get("priorities").map((function(item){return react.createElement("div",{key:item.get("_id"),ref:function(i){return _this4.prioritiesRef[item.get("_id")]=i},className:"z-box uk-clearfix"},react.createElement("div",{className:"view-priority uk-clearfix"},react.createElement(Settings_SettingSubItem,{title:item.get("name"),titleCss:{color:item.get("htmlColor")},subtitle:react.createElement("div",null,"SLA Overdue: ",react.createElement("strong",null,item.get("durationFormatted"))),component:react.createElement(components_ButtonGroup,{classNames:"uk-float-right"},react.createElement(components_Button,{text:"Edit",small:!0,onClick:function(e){return _this4.toggleEditPriority(e,item.get("_id"))}}),react.createElement(components_Button,{text:"Remove",small:!0,style:"danger",onClick:function(e){return _this4.onRemoveTicketTypePriorityClicked(e,item.get("_id"))}}))})),react.createElement(editPriorityPartial,{priority:item}))})))),react.createElement("div",{className:"uk-margin-large-top"},react.createElement("h2",{className:"text-light"},"Danger Zone"),react.createElement("div",{className:"danger-zone"},react.createElement("div",{className:"dz-box uk-clearfix"},react.createElement("div",{className:"uk-float-left"},react.createElement("h5",null,"Delete this type"),react.createElement("p",null,"Once you delete a ticket type, there is no going back. Please be certain.")),react.createElement("div",{className:"uk-float-right",style:{paddingTop:"10px"}},react.createElement(components_Button,{text:"Delete",small:!0,style:"danger",onClick:function(e){return _this4.showDeleteTicketTypeModal(e,type)}}))))))}}])&&ticketTypeBody_defineProperties(Constructor.prototype,protoProps),staticProps&&ticketTypeBody_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TicketTypeBody}(react.Component);TicketTypeBody.propTypes={type:prop_types_default().object.isRequired,updatePriority:prop_types_default().func.isRequired,fetchSettings:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const ticketTypeBody=(0,es.$j)(null,{updatePriority:tickets_updatePriority,fetchSettings:settings_fetchSettings,showModal})(TicketTypeBody);function Tickets_typeof(obj){return Tickets_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Tickets_typeof(obj)}function Tickets_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Tickets_setPrototypeOf(o,p){return Tickets_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Tickets_setPrototypeOf(o,p)}function Tickets_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Tickets_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Tickets_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Tickets_possibleConstructorReturn(this,result)}}function Tickets_possibleConstructorReturn(self,call){if(call&&("object"===Tickets_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Tickets_assertThisInitialized(self)}function Tickets_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Tickets_getPrototypeOf(o){return Tickets_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Tickets_getPrototypeOf(o)}var TicketsSettings=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Tickets_setPrototypeOf(subClass,superClass)}(TicketsSettings,_React$Component);var Constructor,protoProps,staticProps,_super=Tickets_createSuper(TicketsSettings);function TicketsSettings(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TicketsSettings),(_this=_super.call(this,props)).getTicketTags=_this.getTicketTags.bind(Tickets_assertThisInitialized(_this)),_this}return Constructor=TicketsSettings,staticProps=[{key:"toggleEditPriority",value:function(e){var $parent=jquery_default()(e.target).parents(".priority-wrapper"),$v=$parent.find(".view-priority"),$e=$parent.find(".edit-priority");$v&&$e&&($v.toggleClass("hide"),$e.toggleClass("hide"))}},{key:"toggleEditTag",value:function(e){var $parent=jquery_default()(e.target).parents(".tag-wrapper"),$v=$parent.find(".view-tag"),$e=$parent.find(".edit-tag");$v&&$e&&($v.toggleClass("hide"),$e.toggleClass("hide"))}}],(protoProps=[{key:"componentDidMount",value:function(){this.getTicketTags(null,0);var $tagPagination=jquery_default()("#tagPagination");this.tagsPagination=uikit_combined_min_default().pagination($tagPagination,{items:this.props.tagsSettings.totalCount?this.props.tagsSettings.totalCount:0,itemsOnPage:16}),$tagPagination.on("select.uk.pagination",this.getTicketTags)}},{key:"componentDidUpdate",value:function(prevProps){prevProps.tagsSettings.totalCount!==this.props.tagsSettings.totalCount&&(this.tagsPagination.pages=Math.ceil(this.props.tagsSettings.totalCount/16)?Math.ceil(this.props.tagsSettings.totalCount/16):1,this.tagsPagination.render(),this.tagsPagination.currentPage>this.tagsPagination.pages-1&&this.tagsPagination.selectPage(this.tagsPagination.pages-1))}},{key:"getSetting",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"getTicketTypes",value:function(){return this.props.settings&&this.props.settings.get("ticketTypes")?this.props.settings.get("ticketTypes").toArray():[]}},{key:"getPriorities",value:function(){return this.props.settings&&this.props.settings.get("priorities")?this.props.settings.get("priorities").toArray():[]}},{key:"getTicketTags",value:function(e,page){e&&e.preventDefault(),this.props.tagsUpdateCurrentPage(page),this.props.getTagsWithPage({limit:16,page})}},{key:"onDefaultTicketTypeChange",value:function(e){this.props.updateSetting({name:"ticket:type:default",value:e.target.value,stateName:"defaultTicketType"})}},{key:"onAllowPublicTicketsChange",value:function(e){this.props.updateSetting({name:"allowPublicTickets:enable",value:e.target.checked,stateName:"allowPublicTickets",noSnackbar:!0})}},{key:"onAllowAgentUserTicketsChange",value:function(e){this.props.updateSetting({name:"allowAgentUserTickets:enable",value:e.target.checked,stateName:"allowAgentUserTickets",noSnackbar:!0})}},{key:"onShowOverdueChange",value:function(e){this.props.updateSetting({name:"showOverdueTickets:enable",value:e.target.checked,stateName:"showOverdueTickets",noSnackbar:!0})}},{key:"showModal",value:function(e,modal,props){e.preventDefault(),this.props.showModal(modal,props)}},{key:"onRemovePriorityClicked",value:function(e,priority){e.preventDefault(),this.props.showModal("DELETE_PRIORITY",{priority})}},{key:"onSubmitUpdateTag",value:function(e,tagId){var _this2=this;e.preventDefault(),e.persist();var name=e.target.name.value;if(name.length<2)return helpers_default().UI.showSnackbar("Invalid Tag Name",!0);axios_default().put("/api/v1/tags/".concat(tagId),{name}).then((function(res){TicketsSettings.toggleEditTag(e),helpers_default().UI.showSnackbar("Tag: ".concat(res.data.tag.name," updated successfully")),_this2.getTicketTags(null,_this2.tagsPagination.currentPage)})).catch((function(err){if(!err.response)return logger.error(err);var errorText=err.response.data.error;logger.error(errorText,err.response),helpers_default().UI.showSnackbar("Error: ".concat(errorText),!0)}))}},{key:"onRemoveTagClicked",value:function(e,tag){var _this3=this;uikit_combined_min_default().modal.confirm("Really delete tag <strong>".concat(tag.get(),'</strong><br />\n        <i style="font-size: 13px; color: #e53935">This will remove the tag from all associated tickets.</i>'),(function(){axios_default().delete("/api/v1/tags/".concat(tag.get("_id"))).then((function(res){res.data.success&&(helpers_default().UI.showSnackbar("Successfully removed tag: ".concat(tag.get("name"))),_this3.getTicketTags(null,_this3.tagsPagination.currentPage))})).catch((function(error){var errorText=error.response.data.error;helpers_default().UI.showSnackbar("Error: ".concat(errorText),!0),logger.error(errorText,error.response)}))}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"render",value:function(){var _this4=this,_this$props=this.props,active=_this$props.active,viewdata=_this$props.viewdata,mappedTypes=this.getTicketTypes().map((function(type){return{text:type.get("name"),value:type.get("_id")}}));return react.createElement("div",{className:active?"active":"hide"},react.createElement(Settings_SettingItem,{title:"Default Ticket Type",subtitle:"Default ticket type for newly created tickets.",component:react.createElement(components_SingleSelect,{items:mappedTypes,defaultValue:this.getSetting("defaultTicketType"),onSelectChange:function(e){_this4.onDefaultTicketTypeChange(e)},width:"50%",showTextbox:!1})}),react.createElement(Settings_SettingItem,{title:"Allow Public Tickets",subtitle:react.createElement("div",null,"Allow the creation of tickets by users that are unregistered. (",react.createElement("a",{href:viewdata.hosturl+"/newissue"},viewdata.hosturl+"/newissue"),")"),component:react.createElement(Settings_EnableSwitch,{stateName:"allowPublicTickets",label:"Enable",checked:this.getSetting("allowPublicTickets"),onChange:function(e){_this4.onAllowPublicTicketsChange(e)}})}),react.createElement(Settings_SettingItem,{title:"Allow Agents to Submit Tickets on Behalf of User",subtitle:react.createElement("div",null,"Allow the creation of tickets by agents on behalf of users."),tooltip:"Setting takes affect after refresh.",component:react.createElement(Settings_EnableSwitch,{stateName:"allowAgentUserTickets",label:"Enable",checked:this.getSetting("allowAgentUserTickets"),onChange:function(e){_this4.onAllowAgentUserTicketsChange(e)}})}),react.createElement(Settings_SettingItem,{title:"Show Overdue Tickets",subtitle:"Enable/Disable flashing of tickets based on SLA time of type priority.",tooltip:"If disabled, priority SLA times will not mark tickets overdue.",component:react.createElement(Settings_EnableSwitch,{stateName:"showOverdueTickets",label:"Enable",checked:this.getSetting("showOverdueTickets"),onChange:function(e){_this4.onShowOverdueChange(e)}})}),react.createElement(Settings_SettingItem,{title:"Minimum Subject Length",subtitle:"Minimum character limit for ticket subject",component:react.createElement(Settings_NumberWithSave,{stateName:"minSubjectLength",settingName:"ticket:minlength:subject",value:this.getSetting("minSubjectLength"),width:"40%"})}),react.createElement(Settings_SettingItem,{title:"Minimum Issue Length",subtitle:"Minimum character limit for ticket issue",component:react.createElement(Settings_NumberWithSave,{stateName:"minIssueLength",settingName:"ticket:minlength:issue",value:this.getSetting("minIssueLength"),width:"40%"})}),react.createElement(Settings_SplitSettingsPanel,{title:"Ticket Types",subtitle:"Create/Modify Ticket Types",rightComponent:react.createElement(components_Button,{text:"Create",style:"success",flat:!0,extraClass:"md-btn-wave",onClick:function(e){_this4.showModal(e,"CREATE_TICKET_TYPE")}}),menuItems:this.getTicketTypes().map((function(type){return{key:type.get("_id"),title:type.get("name"),bodyComponent:react.createElement(ticketTypeBody,{type})}}))}),react.createElement(Settings_SettingItem,{title:"Ticket Priorities",subtitle:"Ticket priorities set the level of SLAs for each ticket.",component:react.createElement(components_Button,{text:"Create",style:"success",flat:!0,waves:!0,extraClass:"mt-10 right",onClick:function(e){return _this4.showModal(e,"CREATE_PRIORITY")}})},react.createElement(zone,null,this.getPriorities().map((function(p){var disableRemove=!!p.get("default")&&p.get("default");return react.createElement(components_ZoneBox,{key:p.get("_id"),extraClass:"priority-wrapper"},react.createElement(Settings_SettingSubItem,{parentClass:"view-priority",title:p.get("name"),titleCss:{color:p.get("htmlColor")},subtitle:react.createElement("div",null,"SLA Overdue: ",react.createElement("strong",null,p.get("durationFormatted"))),component:react.createElement(components_ButtonGroup,{classNames:"uk-float-right"},react.createElement(components_Button,{text:"Edit",small:!0,onClick:function(e){return TicketsSettings.toggleEditPriority(e)}}),react.createElement(components_Button,{text:"Remove",small:!0,style:"danger",disabled:disableRemove,onClick:function(e){return _this4.onRemovePriorityClicked(e,p)}}))}),react.createElement(editPriorityPartial,{priority:p}))})))),react.createElement(Settings_SettingItem,{title:"Ticket Tags",subtitle:"Create/Modify Ticket Tags",component:react.createElement(components_Button,{text:"Create",style:"success",flat:!0,waves:!0,extraClass:"mt-10 right",onClick:function(e){return _this4.showModal(e,"CREATE_TAG",{page:"settings",currentPage:_this4.props.tagsSettings.currentPage})}}),footer:react.createElement("ul",{id:"tagPagination",className:"uk-pagination"})},react.createElement(components_Grid,{extraClass:"uk-margin-medium-bottom"},this.props.tagsSettings.tags.size<1&&react.createElement("div",{style:{width:"100%",padding:"55px",textAlign:"center"}},react.createElement("h3",{style:{fontSize:"24px",fontWeight:"300"}},"No Tags Found")),react.createElement(components_SpinLoader,{active:this.props.tagsSettings.loading,extraClass:"panel-bg"}),react.createElement(Grid_GridItem,{width:"1-1"},react.createElement(components_Grid,{extraClass:"zone ml-0"},this.props.tagsSettings.tags.map((function(i){return react.createElement(Grid_GridItem,{width:"1-2",key:i.get("_id"),extraClass:"tag-wrapper br bb"},react.createElement(components_Grid,{extraClass:"view-tag"},react.createElement(Grid_GridItem,{width:"1-1"},react.createElement(components_ZoneBox,null,react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"1-2"},react.createElement("h5",{style:{fontSize:"16px",lineHeight:"31px",margin:0,padding:0,fontWeight:300}},i.get("name"))),react.createElement(Grid_GridItem,{width:"1-2",extraClass:"uk-text-right"},react.createElement(components_ButtonGroup,{classNames:"mt-5"},react.createElement(components_Button,{text:"edit",flat:!0,waves:!0,small:!0,onClick:function(e){return TicketsSettings.toggleEditTag(e)}}),react.createElement(components_Button,{text:"remove",flat:!0,waves:!0,style:"danger",small:!0,onClick:function(e){return _this4.onRemoveTagClicked(e,i)}}))))))),react.createElement(components_Grid,{extraClass:"edit-tag z-box uk-clearfix nbt hide",style:{paddingTop:"5px"}},react.createElement(Grid_GridItem,{width:"1-1"},react.createElement("form",{onSubmit:function(e){return _this4.onSubmitUpdateTag(e,i.get("_id"))}},react.createElement(components_Grid,null,react.createElement(Grid_GridItem,{width:"2-3"},react.createElement("input",{type:"text",className:"md-input",name:"name",defaultValue:i.get("name")})),react.createElement(Grid_GridItem,{width:"1-3",style:{paddingTop:"10px"}},react.createElement(components_ButtonGroup,{classNames:"uk-float-right uk-text-right"},react.createElement(components_Button,{text:"cancel",flat:!0,waves:!0,small:!0,onClick:function(e){return TicketsSettings.toggleEditTag(e)}}),react.createElement(components_Button,{type:"submit",text:"save",flat:!0,waves:!0,small:!0,style:"success"}))))))))})))))))}}])&&Tickets_defineProperties(Constructor.prototype,protoProps),staticProps&&Tickets_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TicketsSettings}(react.Component);TicketsSettings.propTypes={active:prop_types_default().bool.isRequired,viewdata:prop_types_default().object.isRequired,settings:prop_types_default().object.isRequired,tagsSettings:prop_types_default().object.isRequired,updateSetting:prop_types_default().func.isRequired,getTagsWithPage:prop_types_default().func.isRequired,tagsUpdateCurrentPage:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const Tickets=(0,es.$j)((function(state){return{viewdata:state.common,settings:state.settings.settings,tagsSettings:state.tagsSettings}}),{updateSetting:settings_updateSetting,getTagsWithPage:tickets_getTagsWithPage,tagsUpdateCurrentPage,showModal})(TicketsSettings);function mailer_typeof(obj){return mailer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},mailer_typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function mailer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function mailer_setPrototypeOf(o,p){return mailer_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},mailer_setPrototypeOf(o,p)}function mailer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=mailer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=mailer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return mailer_possibleConstructorReturn(this,result)}}function mailer_possibleConstructorReturn(self,call){if(call&&("object"===mailer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function mailer_getPrototypeOf(o){return mailer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},mailer_getPrototypeOf(o)}var MailerSettings_Mailer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&mailer_setPrototypeOf(subClass,superClass)}(MailerSettings_Mailer,_React$Component);var Constructor,protoProps,staticProps,_super=mailer_createSuper(MailerSettings_Mailer);function MailerSettings_Mailer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MailerSettings_Mailer),(_this=_super.call(this,props)).state={mailerSSL:"",mailerHost:"",mailerPort:"",mailerUsername:"",mailerPassword:"",mailerFrom:""},_this}return Constructor=MailerSettings_Mailer,staticProps=[{key:"getDerivedStateFromProps",value:function(nextProps,state){if(nextProps.settings){var stateObj=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},state);return""===state.mailerSSL&&(stateObj.mailerSSL=nextProps.settings.getIn(["settings","mailerSSL","value"])||""),state.mailerHost||(stateObj.mailerHost=nextProps.settings.getIn(["settings","mailerHost","value"])||""),state.mailerPort||(stateObj.mailerPort=nextProps.settings.getIn(["settings","mailerPort","value"])||""),state.mailerUsername||(stateObj.mailerUsername=nextProps.settings.getIn(["settings","mailerUsername","value"])||""),state.mailerPassword||(stateObj.mailerPassword=nextProps.settings.getIn(["settings","mailerPassword","value"])||""),state.mailerFrom||(stateObj.mailerFrom=nextProps.settings.getIn(["settings","mailerFrom","value"])||""),stateObj}return null}}],(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"getSetting",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"onEnableMailerChanged",value:function(e){this.props.updateSetting({name:"mailer:enable",stateName:"mailerEnabled",value:e.target.checked,noSnackbar:!0})}},{key:"onMailerSSLChanged",value:function(e){this.setState({mailerSSL:e.target.checked})}},{key:"onInputValueChanged",value:function(e,stateName){this.setState(_defineProperty({},stateName,e.target.value))}},{key:"onMailerSubmit",value:function(e){e.preventDefault();var mailSettings=[{name:"mailer:host",value:this.state.mailerHost},{name:"mailer:port",value:this.state.mailerPort},{name:"mailer:username",value:this.state.mailerUsername},{name:"mailer:password",value:this.state.mailerPassword},{name:"mailer:from",value:this.state.mailerFrom},{name:"mailer:ssl",value:this.state.mailerSSL}];this.props.updateMultipleSettings(mailSettings)}},{key:"testMailerSettings",value:function(e){e.preventDefault(),helpers_default().UI.showSnackbar("Testing..."),axios_default().post("/api/v1/settings/testmailer",{}).then((function(){helpers_default().UI.showSnackbar("Successfully Connected")})).catch((function(err){if(!err.response)return logger.error(err);helpers_default().UI.showSnackbar("Connection Failed. Did you apply settings?",!0),logger.error(err.response.data.error,err.response)}))}},{key:"render",value:function(){var _this2=this;return react.createElement(Settings_SettingItem,{title:"Mailer",subtitle:"Preferences for trudesk to send email notifications to users.",component:react.createElement(Settings_EnableSwitch,{stateName:"mailerEnabled",label:"Enabled",onChange:function(e){return _this2.onEnableMailerChanged(e)},checked:this.getSetting("mailerEnabled")})},react.createElement("form",{onSubmit:function(e){return _this2.onMailerSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("div",{className:"uk-right"},react.createElement(Settings_EnableSwitch,{stateName:"mailerSSL",label:"Use SSLv3",style:{position:"absolute",top:"5px",right:"-5px",zIndex:"99",margin:"0"},checked:this.state.mailerSSL,disabled:!this.getSetting("mailerEnabled"),onChange:function(e){return _this2.onMailerSSLChanged(e)}})),react.createElement("label",null,"Mail Server"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerHost",disabled:!this.getSetting("mailerEnabled"),value:this.state.mailerHost,onChange:function(e){return _this2.onInputValueChanged(e,"mailerHost")}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Port"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerPort",disabled:!this.getSetting("mailerEnabled"),value:this.state.mailerPort,onChange:function(e){return _this2.onInputValueChanged(e,"mailerPort")}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Auth Username"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerUsername",disabled:!this.getSetting("mailerEnabled"),value:this.state.mailerUsername,onChange:function(e){return _this2.onInputValueChanged(e,"mailerUsername")}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Auth Password"),react.createElement("input",{type:"password",className:"md-input md-input-width-medium",name:"mailerPassword",disabled:!this.getSetting("mailerEnabled"),value:this.state.mailerPassword,onChange:function(e){return _this2.onInputValueChanged(e,"mailerPassword")}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"From Address"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerFrom",disabled:!this.getSetting("mailerEnabled"),value:this.state.mailerFrom,onChange:function(e){return _this2.onInputValueChanged(e,"mailerFrom")}})),react.createElement("div",{className:"uk-clearfix"},react.createElement(components_Button,{text:"Test Settings",type:"button",flat:!0,waves:!0,style:"primary",extraClass:"uk-float-left",disabled:!this.getSetting("mailerEnabled"),onClick:function(e){return _this2.testMailerSettings(e)}}),react.createElement(components_Button,{text:"Apply",type:"submit",style:"success",extraClass:"uk-float-right",disabled:!this.getSetting("mailerEnabled"),waves:!0,flat:!0}))))}}])&&mailer_defineProperties(Constructor.prototype,protoProps),staticProps&&mailer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MailerSettings_Mailer}(react.Component);MailerSettings_Mailer.propTypes={settings:prop_types_default().object.isRequired,updateSetting:prop_types_default().func.isRequired,updateMultipleSettings:prop_types_default().func.isRequired};const mailer=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting,updateMultipleSettings:settings_updateMultipleSettings})(MailerSettings_Mailer);function mailerCheck_typeof(obj){return mailerCheck_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},mailerCheck_typeof(obj)}function mailerCheck_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function mailerCheck_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function mailerCheck_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function mailerCheck_setPrototypeOf(o,p){return mailerCheck_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},mailerCheck_setPrototypeOf(o,p)}function mailerCheck_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=mailerCheck_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=mailerCheck_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return mailerCheck_possibleConstructorReturn(this,result)}}function mailerCheck_possibleConstructorReturn(self,call){if(call&&("object"===mailerCheck_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function mailerCheck_getPrototypeOf(o){return mailerCheck_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},mailerCheck_getPrototypeOf(o)}var Mailer_MailerCheck=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&mailerCheck_setPrototypeOf(subClass,superClass)}(Mailer_MailerCheck,_React$Component);var Constructor,protoProps,staticProps,_super=mailerCheck_createSuper(Mailer_MailerCheck);function Mailer_MailerCheck(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Mailer_MailerCheck),(_this=_super.call(this,props)).state={mailerCheckHost:"",mailerCheckPort:"",mailerCheckUsername:"",mailerCheckPassword:"",mailerCheckSelfSign:"",mailerCheckPolling:"",mailerCheckCreateAccount:"",mailerCheckDeleteMessage:"",mailerCheckTicketType:"",mailerCheckTicketPriority:"",typePriorities:[]},_this}return Constructor=Mailer_MailerCheck,staticProps=[{key:"getDerivedStateFromProps",value:function(nextProps,state){if(nextProps.settings){var stateObj=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?mailerCheck_ownKeys(Object(source),!0).forEach((function(key){mailerCheck_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):mailerCheck_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},state);return state.mailerCheckHost||(stateObj.mailerCheckHost=nextProps.settings.getIn(["settings","mailerCheckHost","value"])||""),state.mailerCheckPort||(stateObj.mailerCheckPort=nextProps.settings.getIn(["settings","mailerCheckPort","value"])||""),state.mailerCheckUsername||(stateObj.mailerCheckUsername=nextProps.settings.getIn(["settings","mailerCheckUsername","value"])||""),state.mailerCheckPassword||(stateObj.mailerCheckPassword=nextProps.settings.getIn(["settings","mailerCheckPassword","value"])||""),""===state.mailerCheckSelfSign&&(stateObj.mailerCheckSelfSign=nextProps.settings.getIn(["settings","mailerCheckSelfSign","value"])||""),""===state.mailerCheckPolling&&(stateObj.mailerCheckPolling=parseInt(nextProps.settings.getIn(["settings","mailerCheckPolling","value"]))/6e4||""),""===state.mailerCheckCreateAccount&&(stateObj.mailerCheckCreateAccount=nextProps.settings.getIn(["settings","mailerCheckCreateAccount","value"])||""),""===state.mailerCheckDeleteMessage&&(stateObj.mailerCheckDeleteMessage=nextProps.settings.getIn(["settings","mailerCheckDeleteMessage","value"])||""),state.mailerCheckTicketType||(stateObj.mailerCheckTicketType=nextProps.settings.getIn(["settings","mailerCheckTicketType","value"])||""),stateObj.mailerCheckTicketType&&(stateObj.typePriorities=Mailer_MailerCheck.getTypePriorities(nextProps.settings.get("ticketTypes"),stateObj.mailerCheckTicketType)),state.mailerCheckTicketPriority||(stateObj.mailerCheckTicketPriority=nextProps.settings.getIn(["settings","mailerCheckTicketPriority","value"])||""),stateObj}return null}},{key:"getTypePriorities",value:function(ticketTypes,typeId){return ticketTypes||typeId?ticketTypes.filter((function(item){return item.get("_id")===typeId})).first().get("priorities").map((function(p){return{text:p.get("name"),value:p.get("_id")}})).toArray():[]}}],(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs()}},{key:"getSetting",value:function(stateName){return this.props.settings.getIn(["settings",stateName,"value"])?this.props.settings.getIn(["settings",stateName,"value"]):""}},{key:"getTicketTypes",value:function(){return this.props.settings.get("ticketTypes")?this.props.settings.get("ticketTypes").toArray():[]}},{key:"onFormSubmit",value:function(e){e.preventDefault();var mailCheckSettings=[{name:"mailer:check:polling",value:6e4*this.state.mailerCheckPolling},{name:"mailer:check:host",value:this.state.mailerCheckHost},{name:"mailer:check:port",value:this.state.mailerCheckPort},{name:"mailer:check:username",value:this.state.mailerCheckUsername},{name:"mailer:check:password",value:this.state.mailerCheckPassword},{name:"mailer:check:selfsign",value:this.state.mailerCheckSelfSign},{name:"mailer:check:ticketype",value:this.state.mailerCheckTicketType},{name:"mailer:check:ticketpriority",value:this.state.mailerCheckTicketPriority},{name:"mailer:check:createaccount",value:this.state.mailerCheckCreateAccount},{name:"mailer:check:deletemessage",value:this.state.mailerCheckDeleteMessage}];this.props.updateMultipleSettings(mailCheckSettings)}},{key:"onEnableMailerCheckChanged",value:function(e){this.props.updateSetting({name:"mailer:check:enable",stateName:"mailerCheckEnabled",value:e.target.checked,noSnackbar:!0}).then((function(){uikit_combined_min_default().modal.confirm("Setting will take affect after server restart. <br /><br />Would you like to restart the server now?",(function(){axios_default().get("/api/v1/admin/restart").catch((function(error){helpers_default().hideLoader(),logger.error(error.response),logger.error("Unable to restart server. Server must run under PM2 and Account must have admin rights."),helpers_default().UI.showSnackbar("Unable to restart server. Are you an Administrator?",!0)}))}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-primary"})}))}},{key:"onInputValueChanged",value:function(e,stateName){this.setState(mailerCheck_defineProperty({},stateName,e.target.value))}},{key:"onPollingChanged",value:function(e){this.setState({mailerCheckPolling:e.target.value})}},{key:"onCheckboxChanged",value:function(e,stateName){this.setState(mailerCheck_defineProperty({},stateName,e.target.checked))}},{key:"onTicketTypeSelectChanged",value:function(e){this.setState({mailerCheckTicketType:e.target.value,typePriorities:Mailer_MailerCheck.getTypePriorities(this.props.settings.get("ticketTypes"),e.target.value)})}},{key:"onSingleSelectChanged",value:function(e,stateName){this.setState(mailerCheck_defineProperty({},stateName,e.target.value))}},{key:"onCheckNowClicked",value:function(e){axios_default().get("/api/v2/mailer/check").then((function(res){res.data&&res.data.success&&helpers_default().UI.showSnackbar("Fetch mail task scheduled.")})).catch((function(err){logger.error(err),helpers_default().UI.showSnackbar(err,!0)}))}},{key:"render",value:function(){var _this2=this,mappedTicketTypes=this.getTicketTypes().map((function(type){return{text:type.get("name"),value:type.get("_id")}}));return react.createElement(Settings_SettingItem,{title:"Mailer Check",subtitle:react.createElement("div",null,"Poll an IMAP mailbox for messages to convert to tickets - ",react.createElement("i",null,"Settings are applied after server restart")),component:react.createElement(Settings_EnableSwitch,{stateName:"mailerCheckEnabled",label:"Enabled",checked:this.getSetting("mailerCheckEnabled"),onChange:function(e){return _this2.onEnableMailerCheckChanged(e)}})},react.createElement("div",null,react.createElement("form",{onSubmit:function(e){return _this2.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Mail Server"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerCheckHost",value:this.state.mailerCheckHost,onChange:function(e){return _this2.onInputValueChanged(e,"mailerCheckHost")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Port"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerCheckPort",value:this.state.mailerCheckPort,onChange:function(e){return _this2.onInputValueChanged(e,"mailerCheckPort")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Username"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",name:"mailerCheckUsername",value:this.state.mailerCheckUsername,onChange:function(e){return _this2.onInputValueChanged(e,"mailerCheckUsername")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Password"),react.createElement("input",{type:"password",className:"md-input md-input-width-medium",name:"mailerCheckPassword",value:this.state.mailerCheckPassword,onChange:function(e){return _this2.onInputValueChanged(e,"mailerCheckPassword")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("div",{className:"uk-clearfix uk-margin-medium-bottom"},react.createElement("div",{className:"uk-float-left"},react.createElement("h6",{style:{padding:0,margin:"5px 0 0 0",fontSize:"16px",lineHeight:"14px"}},"Allow Self Signed Certificate"),react.createElement("h5",{style:{padding:"0 0 10px 0",margin:"2px 0 0 0",fontSize:"12px"},className:"uk-text-muted"},"Allow less secure self signed certificates when checking mailbox.")),react.createElement("div",{className:"uk-float-right"},react.createElement(Settings_EnableSwitch,{label:"Enable",stateName:"mailerCheckSelfSign",checked:this.state.mailerCheckSelfSign,onChange:function(e){return _this2.onCheckboxChanged(e,"mailerCheckSelfSign")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("hr",{style:{float:"left",marginTop:"10px"}})),react.createElement("div",{className:"uk-clearfix uk-margin-medium-bottom"},react.createElement("div",{className:"uk-float-left"},react.createElement("h6",{style:{padding:0,margin:"5px 0 0 0",fontSize:"16px",lineHeight:"14px"}},"Polling Interval",react.createElement("i",{className:"material-icons",style:{color:"#888",fontSize:"16px",cursor:"pointer",lineHeight:"20px",marginLeft:"5px"},"data-uk-tooltip":"{cls:'long-text'}",title:"Caution: Polling too often can cause high CPU usage"},"error")),react.createElement("h5",{style:{padding:"0 0 10px 0",margin:"2px 0 0 0",fontSize:"12px"},className:"uk-text-muted"},"How often to poll the server for new messages (Minutes)")),react.createElement("div",{className:"uk-float-right",style:{position:"relative"}},react.createElement("div",{className:"uk-float-left",style:{width:"90px",paddingRight:"10px"}},react.createElement("input",{type:"number",className:"md-input md-input-width-small",name:"mailerCheckPolling",disabled:!this.getSetting("mailerCheckEnabled"),value:this.state.mailerCheckPolling,onChange:function(e){return _this2.onPollingChanged(e)}}))),react.createElement("hr",{style:{float:"left",marginTop:"10px"}})),react.createElement("div",{className:"uk-clearfix uk-margin-medium-bottom"},react.createElement("div",{className:"uk-float-left"},react.createElement("h6",{style:{padding:0,margin:"5px 0 0 0",fontSize:"16px",lineHeight:"14px"}},"Create Account"),react.createElement("h5",{style:{padding:"0 0 10px 0",margin:"2px 0 0 0",fontSize:"12px"},className:"uk-text-muted"},"Create a user account if account does not exist.")),react.createElement("div",{className:"uk-float-right"},react.createElement(Settings_EnableSwitch,{label:"Enable",stateName:"mailerCheckCreateAccount",checked:this.state.mailerCheckCreateAccount,onChange:function(e){return _this2.onCheckboxChanged(e,"mailerCheckCreateAccount")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("hr",{style:{float:"left",marginTop:"10px"}})),react.createElement("div",{className:"uk-clearfix uk-margin-medium-bottom"},react.createElement("div",{className:"uk-float-left"},react.createElement("h6",{style:{padding:0,margin:"5px 0 0 0",fontSize:"16px",lineHeight:"14px"}},"Delete Message"),react.createElement("h5",{style:{padding:"0 0 10px 0",margin:"2px 0 0 0",fontSize:"12px"},className:"uk-text-muted"},"Delete email message from INBOX once processed")),react.createElement("div",{className:"uk-float-right"},react.createElement(Settings_EnableSwitch,{label:"Enable",stateName:"mailerCheckDeleteMessage",checked:this.state.mailerCheckDeleteMessage,onChange:function(e){return _this2.onCheckboxChanged(e,"mailerCheckDeleteMessage")},disabled:!this.getSetting("mailerCheckEnabled")})),react.createElement("hr",{style:{float:"left",marginTop:"10px"}})),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("label",null,"Default Ticket Type"),react.createElement(components_SingleSelect,{showTextbox:!1,width:"100%",items:mappedTicketTypes,defaultValue:this.state.mailerCheckTicketType,disabled:!this.getSetting("mailerCheckEnabled"),onSelectChange:function(e){return _this2.onTicketTypeSelectChanged(e)}})),react.createElement("div",{className:"uk-margin-medium-bottom uk-clearfix"},react.createElement("label",null,"Default Ticket Priority"),react.createElement(components_SingleSelect,{showTextbox:!1,width:"100%",items:this.state.typePriorities,defaultValue:this.state.mailerCheckTicketPriority,disabled:!this.getSetting("mailerCheckEnabled"),onSelectChange:function(e){return _this2.onSingleSelectChanged(e,"mailerCheckTicketPriority")}})),react.createElement("div",{className:"uk-clearfix"},react.createElement(components_Button,{text:"Check Now",type:"button",extraClass:"uk-float-left",flat:!0,waves:!0,style:"primary",onClick:function(e){return _this2.onCheckNowClicked(e)},disabled:!this.getSetting("mailerCheckEnabled")}),react.createElement(components_Button,{text:"Apply",type:"submit",extraClass:"uk-float-right",flat:!0,waves:!0,style:"success",disabled:!this.getSetting("mailerCheckEnabled")})))))}}])&&mailerCheck_defineProperties(Constructor.prototype,protoProps),staticProps&&mailerCheck_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Mailer_MailerCheck}(react.Component);Mailer_MailerCheck.propTypes={settings:prop_types_default().object.isRequired,updateSetting:prop_types_default().func.isRequired,updateMultipleSettings:prop_types_default().func.isRequired};const mailerCheck=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting,updateMultipleSettings:settings_updateMultipleSettings})(Mailer_MailerCheck);function mailerSettingsTemplates_typeof(obj){return mailerSettingsTemplates_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},mailerSettingsTemplates_typeof(obj)}var mailerSettingsTemplates_class,mailerSettingsTemplates_class2,mailerSettingsTemplates_descriptor,mailerSettingsTemplates_descriptor2;function mailerSettingsTemplates_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function mailerSettingsTemplates_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function mailerSettingsTemplates_setPrototypeOf(o,p){return mailerSettingsTemplates_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},mailerSettingsTemplates_setPrototypeOf(o,p)}function mailerSettingsTemplates_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=mailerSettingsTemplates_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=mailerSettingsTemplates_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return mailerSettingsTemplates_possibleConstructorReturn(this,result)}}function mailerSettingsTemplates_possibleConstructorReturn(self,call){if(call&&("object"===mailerSettingsTemplates_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return mailerSettingsTemplates_assertThisInitialized(self)}function mailerSettingsTemplates_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function mailerSettingsTemplates_getPrototypeOf(o){return mailerSettingsTemplates_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},mailerSettingsTemplates_getPrototypeOf(o)}function mailerSettingsTemplates_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var templateBody=function(_ref){var template=_ref.template,handleSaveSubject=_ref.handleSaveSubject,handleOpenEditor=_ref.handleOpenEditor;return react.createElement("div",null,react.createElement("h3",{className:"font-light mb-5"},"Template Description"),react.createElement("p",{className:"mb-10",style:{fontSize:"13px"}},template.description),react.createElement("hr",{className:"uk-margin-medium-bottom"}),react.createElement("form",{onSubmit:handleSaveSubject},react.createElement("input",{name:"id",type:"hidden",value:template._id}),react.createElement("div",{className:"uk-input-group"},react.createElement("div",{className:"md-input-wrapper"},react.createElement("label",null,"Mail Subject"),react.createElement("input",{name:"subject",type:"text",className:"md-input",defaultValue:template.subject})),react.createElement("span",{className:"uk-input-group-addon"},react.createElement(components_Button,{type:"submit",text:"Save",small:!0})))),react.createElement(zone,{extraClass:"uk-margin-medium-top"},react.createElement(components_ZoneBox,null,react.createElement("div",{className:"uk-float-left"},react.createElement("h6",{style:{margin:0,fontSize:"16px",lineHeight:"14px"}},"Edit Template"),react.createElement("h5",{className:"uk-text-muted",style:{margin:"2px 0 0 0",fontSize:"12px"}},"Customize template")),react.createElement("div",{className:"uk-float-right uk-width-1-3 uk-clearfix"},react.createElement("div",{className:"uk-width-1-1 uk-float-right",style:{textAlign:"right"}},react.createElement("button",{className:"md-btn md-btn-small right",style:{textTransform:"none"},onClick:handleOpenEditor},"Open Editor"))))))};templateBody.propTypes={template:prop_types_default().object.isRequired,handleSaveSubject:prop_types_default().func.isRequired,handleOpenEditor:prop_types_default().func.isRequired};var MailerSettings_Templates=(0,mobxreact_esm.Pi)((mailerSettingsTemplates_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&mailerSettingsTemplates_setPrototypeOf(subClass,superClass)}(MailerSettings_Templates,_React$Component);var Constructor,protoProps,staticProps,_super=mailerSettingsTemplates_createSuper(MailerSettings_Templates);function MailerSettings_Templates(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MailerSettings_Templates),mailerSettingsTemplates_initializerDefineProperty(_this=_super.call(this,props),"betaEnabled",mailerSettingsTemplates_descriptor,mailerSettingsTemplates_assertThisInitialized(_this)),mailerSettingsTemplates_initializerDefineProperty(_this,"templates",mailerSettingsTemplates_descriptor2,mailerSettingsTemplates_assertThisInitialized(_this)),(0,mobx_esm.rC)(mailerSettingsTemplates_assertThisInitialized(_this)),_this}return Constructor=MailerSettings_Templates,staticProps=[{key:"onOpenEditor",value:function(e,name){e.preventDefault();var url="/settings/editor/".concat(name,"/");History.pushState(null,null,url)}}],(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs()}},{key:"componentDidUpdate",value:function(prevProps){helpers_default().UI.reRenderInputs(),prevProps.settings!==this.props.settings&&(this.betaEnabled!==this.getSetting("emailBeta")&&(this.betaEnabled=this.getSetting("emailBeta")),this.props.settings.get("mailTemplates").toArray()!==this.templates&&(this.templates=this.props.settings.get("mailTemplates").toArray()))}},{key:"getSetting",value:function(name){return void 0!==this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"onEmailBetaChange",value:function(e){var self=this,val=e.target.checked;this.props.updateSetting({name:"beta:email",value:val,stateName:"betaEmail",noSnackbar:!0}).then((function(){self.betaEnabled=val}))}},{key:"onSaveSubject",value:function(e){e.preventDefault();var subject=e.target.subject;subject&&axios_default().put("/api/v1/settings/mailer/template/".concat(e.target.id.value),{subject:subject.value}).then((function(res){res.data&&res.data.success&&helpers_default().UI.showSnackbar("Template subject saved successfully")})).catch((function(error){var errorText=error.response?error.response.error:error;helpers_default().UI.showSnackbar("Error: ".concat(errorText),!0),logger.error(errorText,error)}))}},{key:"mapTemplateMenu",value:function(){var _this2=this;return this.templates.map((function(template,idx){var templateJS=template.toJS();return{key:idx,title:template.get("displayName"),bodyComponent:templateBody({template:templateJS,handleSaveSubject:function(e){return _this2.onSaveSubject(e)},handleOpenEditor:function(e){return MailerSettings_Templates.onOpenEditor(e,templateJS.name)}})}}))}},{key:"render",value:function(){var _this3=this,mappedValues=this.mapTemplateMenu();return react.createElement("div",null,react.createElement(Settings_SettingItem,{title:"Enable New Email Templates",subtitle:react.createElement("div",null,"The new email notification system is currently in beta. Please See"," ",react.createElement("a",{href:"https://forum.trudesk.io/t/beta-email-notification-templates"},"Email Notification Templates")," ","for more information."),component:react.createElement(Settings_EnableSwitch,{stateName:"emailBeta",label:"Enable",checked:this.betaEnabled,onChange:function(e){return _this3.onEmailBetaChange(e)}})}),react.createElement(Settings_SplitSettingsPanel,{title:"Notification Templates",subtitle:react.createElement("div",null,"Customize email notification templates.",react.createElement("strong",null," Note: Not all templates have been converted for the beta")),rightComponent:react.createElement("h4",{className:"uk-display-block uk-text-danger mt-20 mr-20"},"BETA FEATURE"),menuItems:mappedValues}))}}])&&mailerSettingsTemplates_defineProperties(Constructor.prototype,protoProps),staticProps&&mailerSettingsTemplates_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MailerSettings_Templates}(react.Component),mailerSettingsTemplates_descriptor=mailerSettingsTemplates_applyDecoratedDescriptor(mailerSettingsTemplates_class2.prototype,"betaEnabled",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mailerSettingsTemplates_descriptor2=mailerSettingsTemplates_applyDecoratedDescriptor(mailerSettingsTemplates_class2.prototype,"templates",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mailerSettingsTemplates_class=mailerSettingsTemplates_class2))||mailerSettingsTemplates_class;MailerSettings_Templates.propTypes={updateSetting:prop_types_default().func.isRequired,settings:prop_types_default().object.isRequired};const mailerSettingsTemplates=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting})(MailerSettings_Templates);function Mailer_typeof(obj){return Mailer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Mailer_typeof(obj)}function Mailer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Mailer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Mailer_setPrototypeOf(o,p){return Mailer_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Mailer_setPrototypeOf(o,p)}function Mailer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Mailer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Mailer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Mailer_possibleConstructorReturn(this,result)}}function Mailer_possibleConstructorReturn(self,call){if(call&&("object"===Mailer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Mailer_getPrototypeOf(o){return Mailer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Mailer_getPrototypeOf(o)}var MailerSettingsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Mailer_setPrototypeOf(subClass,superClass)}(MailerSettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Mailer_createSuper(MailerSettingsContainer);function MailerSettingsContainer(){return Mailer_classCallCheck(this,MailerSettingsContainer),_super.apply(this,arguments)}return Constructor=MailerSettingsContainer,(protoProps=[{key:"render",value:function(){var active=this.props.active;return react.createElement("div",{className:active?"active":"hide"},react.createElement(mailerSettingsTemplates,null),react.createElement(mailer,null),react.createElement(mailerCheck,null))}}])&&Mailer_defineProperties(Constructor.prototype,protoProps),staticProps&&Mailer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MailerSettingsContainer}(react.Component);MailerSettingsContainer.propTypes={active:prop_types_default().bool.isRequired};const Mailer=MailerSettingsContainer;function Elasticsearch_typeof(obj){return Elasticsearch_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Elasticsearch_typeof(obj)}var Elasticsearch_class,Elasticsearch_class2,Elasticsearch_descriptor,Elasticsearch_descriptor2,Elasticsearch_descriptor3,Elasticsearch_descriptor4,Elasticsearch_descriptor5,Elasticsearch_descriptor6;function Elasticsearch_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function Elasticsearch_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Elasticsearch_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function Elasticsearch_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Elasticsearch_setPrototypeOf(o,p){return Elasticsearch_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Elasticsearch_setPrototypeOf(o,p)}function Elasticsearch_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Elasticsearch_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Elasticsearch_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Elasticsearch_possibleConstructorReturn(this,result)}}function Elasticsearch_possibleConstructorReturn(self,call){if(call&&("object"===Elasticsearch_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Elasticsearch_assertThisInitialized(self)}function Elasticsearch_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Elasticsearch_getPrototypeOf(o){return Elasticsearch_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Elasticsearch_getPrototypeOf(o)}function Elasticsearch_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var ElasticsearchSettingsContainer=(0,mobxreact_esm.Pi)((Elasticsearch_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Elasticsearch_setPrototypeOf(subClass,superClass)}(ElasticsearchSettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Elasticsearch_createSuper(ElasticsearchSettingsContainer);function ElasticsearchSettingsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ElasticsearchSettingsContainer),Elasticsearch_initializerDefineProperty(_this=_super.call(this,props),"esStatus",Elasticsearch_descriptor,Elasticsearch_assertThisInitialized(_this)),Elasticsearch_initializerDefineProperty(_this,"esStatusClass",Elasticsearch_descriptor2,Elasticsearch_assertThisInitialized(_this)),Elasticsearch_initializerDefineProperty(_this,"indexCount",Elasticsearch_descriptor3,Elasticsearch_assertThisInitialized(_this)),Elasticsearch_initializerDefineProperty(_this,"inSyncText",Elasticsearch_descriptor4,Elasticsearch_assertThisInitialized(_this)),Elasticsearch_initializerDefineProperty(_this,"inSyncClass",Elasticsearch_descriptor5,Elasticsearch_assertThisInitialized(_this)),Elasticsearch_initializerDefineProperty(_this,"disableRebuild",Elasticsearch_descriptor6,Elasticsearch_assertThisInitialized(_this)),(0,mobx_esm.rC)(Elasticsearch_assertThisInitialized(_this)),_this.state={host:!1,port:"",configured:!1},_this.getStatus=_this.getStatus.bind(Elasticsearch_assertThisInitialized(_this)),_this.rebuildIndex=_this.rebuildIndex.bind(Elasticsearch_assertThisInitialized(_this)),_this}return Constructor=ElasticsearchSettingsContainer,staticProps=[{key:"getDerivedStateFromProps",value:function(nextProps,state){if(nextProps.settings){var stateObj=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Elasticsearch_ownKeys(Object(source),!0).forEach((function(key){Elasticsearch_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Elasticsearch_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},state);return!1===state.host&&(stateObj.host=nextProps.settings.getIn(["settings","elasticSearchHost","value"])||!1),state.port||(stateObj.port=nextProps.settings.getIn(["settings","elasticSearchPort","value"])||""),state.configured||(stateObj.configured=nextProps.settings.getIn(["settings","elasticSearchConfigured","value"])||!1),stateObj}return null}}],(protoProps=[{key:"componentDidMount",value:function(){helpers_default().UI.inputs()}},{key:"componentDidUpdate",value:function(){helpers_default().UI.reRenderInputs(),!this.loaded&&this.state.configured&&(this.getStatus(),this.loaded=!0)}},{key:"getSetting",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"onEnableChanged",value:function(e){var _this2=this,checked=e.target.checked,self=this;this.props.updateSetting({stateName:"elasticSearchEnabled",name:"es:enable",value:checked,noSnackbar:!0}).then((function(){checked&&_this2.state.host&&_this2.state.port?_this2.setState({configured:!0},(function(){_this2.getStatus()})):_this2.setState({configured:!1},(function(){self.esStatus="Not Configured",self.esStatusClass="",self.inSyncText="Not Configured",self.inSyncClass="",self.indexCount=0}))}))}},{key:"onInputChanged",value:function(e,settingName){this.setState(Elasticsearch_defineProperty({},settingName,e.target.value))}},{key:"onFormSubmit",value:function(e){e.preventDefault();var payload=[{name:"es:host",value:this.state.host},{name:"es:port",value:this.state.port}];this.props.updateMultipleSettings(payload)}},{key:"getStatus",value:function(){var _this3=this,self=this;axios_default().get("/api/v2/es/status").then((function(res){var data=res.data;data.status.isRebuilding?(self.esStatus="Rebuilding...",self.esStatusClass=""):self.esStatus=data.status.esStatus,"connected"===self.esStatus.toLowerCase()?self.esStatusClass="text-success":"error"===self.esStatus.toLowerCase()&&(self.esStatusClass="text-danger"),self.indexCount=data.status.indexCount.toLocaleString(),data.status.inSync?(self.inSyncText="In Sync",self.inSyncClass="bg-success"):(self.inSyncText="Out of Sync",self.inSyncClass="bg-warn"),data.status.isRebuilding?(setTimeout(self.getStatus,3e3),self.disableRebuild=!0):self.disableRebuild=!1})).catch((function(err){_this3.esStatus="Error",_this3.esStatusClass="text-danger",_this3.inSyncText="Unknown",_this3.inSyncClass="",err.error&&err.error.message?helpers_default().UI.showSnackbar("Error: "+err.error.message,!0):helpers_default().UI.showSnackbar("Error: An unknown error occurred. Check Console.",!0),logger.error(err)}))}},{key:"rebuildIndex",value:function(){var self=this;uikit_combined_min_default().modal.confirm("Are you sure you want to rebuild the index?",(function(){self.esStatus="Rebuilding...",self.inSyncText="Out of Sync",self.inSyncClass="bg-warn",self.indexCount=0,axios_default().get("/api/v2/es/rebuild").then((function(){self.esStatus="Rebuilding...",helpers_default().UI.showSnackbar("Rebuilding Index...",!1),self.disableRebuild=!0,setTimeout(self.getStatus,3e3)})).catch((function(err){logger.error("[trudesk:settings:es:RebuildIndex]",err),helpers_default().UI.showSnackbar("Error: An unknown error occurred. Check Console.",!0)}))}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"render",value:function(){var _this4=this;return react.createElement("div",{className:this.props.active?"":"hide"},react.createElement(Settings_SettingItem,{title:"Elasticsearch - Beta",subtitle:"Enable the Elasticsearch engine",component:react.createElement(Settings_EnableSwitch,{stateName:"elasticSearchEnabled",label:"Enable",checked:this.getSetting("elasticSearchEnabled"),onChange:function(e){return _this4.onEnableChanged(e)}})}),react.createElement(Settings_SettingItem,{title:"Connection Status",subtitle:"Current connection status to the Elasticsearch server.",component:react.createElement("h4",{className:"right mr-15 mt-15 ".concat(this.esStatusClass)},this.esStatus)}),react.createElement(Settings_SettingItem,{title:"Indexed Documents",subtitle:"Current count of indexed documents.",component:react.createElement("h4",{className:"right mr-15 mt-15"},this.indexCount)}),react.createElement(Settings_SettingItem,{title:"Index Status",subtitle:"Current status of the index. if the status is not green, the index may need rebuilding.",extraClass:this.inSyncClass,component:react.createElement("h4",{className:"right mr-15 mt-15"},this.inSyncText)}),react.createElement(Settings_SettingItem,{title:"Elasticsearch Server Configuration",tooltip:"Changing server settings will require a rebuild of the index and server restart.",subtitle:"The connection settings to the Elasticsearch server."},react.createElement("form",{onSubmit:function(e){return _this4.onFormSubmit(e)}},react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Server"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",value:this.state.host,disabled:!this.getSetting("elasticSearchEnabled"),onChange:function(e){return _this4.onInputChanged(e,"host")}})),react.createElement("div",{className:"uk-margin-medium-bottom"},react.createElement("label",null,"Port"),react.createElement("input",{type:"text",className:"md-input md-input-width-medium",value:this.state.port,disabled:!this.getSetting("elasticSearchEnabled"),onChange:function(e){return _this4.onInputChanged(e,"port")}})),react.createElement("div",{className:"uk-clearfix"},react.createElement(components_Button,{text:"Apply",type:"submit",flat:!0,waves:!0,disabled:!this.getSetting("elasticSearchEnabled"),style:"success",extraClass:"uk-float-right"})))),react.createElement(Settings_SettingItem,{title:"Rebuild Index",subtitle:"Wipe index and rebuild",tooltip:"Rebuilding the index should only occur if the index is out of sync with the database, or has not been initialized. Rebuilding will take some time.",component:react.createElement(components_Button,{text:"Rebuild",flat:!1,waves:!0,style:"primary",extraClass:"right mt-8 mr-5",disabled:this.disableRebuild,onClick:this.rebuildIndex})}))}}])&&Elasticsearch_defineProperties(Constructor.prototype,protoProps),staticProps&&Elasticsearch_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ElasticsearchSettingsContainer}(react.Component),Elasticsearch_descriptor=Elasticsearch_applyDecoratedDescriptor(Elasticsearch_class2.prototype,"esStatus",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Not Configured"}}),Elasticsearch_descriptor2=Elasticsearch_applyDecoratedDescriptor(Elasticsearch_class2.prototype,"esStatusClass",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Elasticsearch_descriptor3=Elasticsearch_applyDecoratedDescriptor(Elasticsearch_class2.prototype,"indexCount",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Elasticsearch_descriptor4=Elasticsearch_applyDecoratedDescriptor(Elasticsearch_class2.prototype,"inSyncText",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Not Configured"}}),Elasticsearch_descriptor5=Elasticsearch_applyDecoratedDescriptor(Elasticsearch_class2.prototype,"inSyncClass",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Elasticsearch_descriptor6=Elasticsearch_applyDecoratedDescriptor(Elasticsearch_class2.prototype,"disableRebuild",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Elasticsearch_class=Elasticsearch_class2))||Elasticsearch_class;ElasticsearchSettingsContainer.propTypes={active:prop_types_default().bool.isRequired,settings:prop_types_default().object.isRequired,updateSetting:prop_types_default().func.isRequired,updateMultipleSettings:prop_types_default().func.isRequired};const Elasticsearch=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting,updateMultipleSettings:settings_updateMultipleSettings})(ElasticsearchSettingsContainer);function BackupRestore_typeof(obj){return BackupRestore_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},BackupRestore_typeof(obj)}function BackupRestore_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function BackupRestore_setPrototypeOf(o,p){return BackupRestore_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},BackupRestore_setPrototypeOf(o,p)}function BackupRestore_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=BackupRestore_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=BackupRestore_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return BackupRestore_possibleConstructorReturn(this,result)}}function BackupRestore_possibleConstructorReturn(self,call){if(call&&("object"===BackupRestore_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return BackupRestore_assertThisInitialized(self)}function BackupRestore_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function BackupRestore_getPrototypeOf(o){return BackupRestore_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},BackupRestore_getPrototypeOf(o)}var BackupRestoreSettingsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&BackupRestore_setPrototypeOf(subClass,superClass)}(BackupRestoreSettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=BackupRestore_createSuper(BackupRestoreSettingsContainer);function BackupRestoreSettingsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BackupRestoreSettingsContainer),(_this=_super.call(this,props)).initBackupUpload=_this.initBackupUpload.bind(BackupRestore_assertThisInitialized(_this)),_this}return Constructor=BackupRestoreSettingsContainer,protoProps=[{key:"componentDidMount",value:function(){this.props.fetchMongoDBTools(),this.props.fetchBackups(),this.props.fetchDeletedTickets()}},{key:"componentDidUpdate",value:function(prevProps){var _this2=this;if(this.initBackupUpload(),!this.deletedTicketsPagination){var $deletedTicketPagination=jquery_default()(".deletedTicketPagination");$deletedTicketPagination.length>0&&(this.deletedTicketsPagination=uikit_combined_min_default().pagination($deletedTicketPagination,{items:this.props.settings.deletedTicketsCount,itemsOnPage:15}),$deletedTicketPagination.on("select.uk.pagination",(function(e,pageIndex){_this2.props.changeDeletedTicketsPage(pageIndex)})))}prevProps.settings.deletedTicketsCount!==this.props.settings.deletedTicketsCount&&(this.deletedTicketsPagination.pages=Math.ceil(this.props.settings.deletedTicketsCount/15)?Math.ceil(this.props.settings.deletedTicketsCount/15):1,this.deletedTicketsPagination.render(),this.deletedTicketsPagination.currentPage>this.deletedTicketsPagination.pages-1&&this.deletedTicketsPagination.selectPage(this.deletedTicketsPagination.pages-1))}},{key:"componentWillUnmount",value:function(){this.deletedTicketsPagination&&(this.deletedTicketsPagination.element.off("select.uk.pagination"),this.deletedTicketsPagination=null)}},{key:"initBackupUpload",value:function(){var $progressBar=jquery_default()(this.backupUploadProgressbar),$uploadSelect=jquery_default()(this.backupUploadSelect),$uploadButton=jquery_default()(this.backupUploadBtn),bar=$progressBar.find(".uk-progress-bar");if(!($progressBar.length<1||$uploadSelect.length<1||$uploadButton.length<1)){var self=this,settings={action:"/api/v1/backup/upload",allow:"*.zip",type:"json",loadstart:function(){bar.css("width","0%").text("0%"),$progressBar.removeClass("hide"),$uploadButton.addClass("hide")},notallowed:function(){helpers_default().UI.showSnackbar("Invalid File Type. Please upload a Zip file.",!0)},error:function(err){logger.error(err),helpers_default().UI.showSnackbar("An unknown error occurred. Check Console",!0)},progress:function(percent){percent=Math.ceil(percent),bar.css("width",percent+"%").text(percent+"%")},allcomplete:function(response){logger.debug(response),response.success||helpers_default().UI.showSnackbar(response.error,!0),bar.css("width","100%").text("100%"),setTimeout((function(){$progressBar.addClass("hide"),$uploadButton.removeClass("hide"),$uploadSelect.val(null),self.props.fetchBackups(),helpers_default().UI.playSound("success")}),1500)}};uikit_combined_min_default().uploadSelect($uploadSelect,settings)}}},{key:"onBackupNowClicked",value:function(e){e.preventDefault(),this.props.backupNow()}},{key:"oneRestoreClicked",value:function(e,backup){if(backup){var filename=backup.get("filename");uikit_combined_min_default().modal.confirm('<h2>Are you sure?</h2>\n        <p style="font-size: 15px;">\n            <span class="uk-text-danger" style="font-size: 15px;">This is a permanent action.</span> \n            This will erase the database and restore it with the selected backup file: <strong>'.concat(filename,'</strong>\n        </p>\n        <p style="font-size: 12px;">\n            Any users currently logged in will be presented with a blocking restore page. Preventing any further actions.\n            Once complete all users are required to log in again.</p><br />\n        <p style="font-size: 12px; font-style: italic;">\n            This process may take a while depending on the size of the backup.\n        </p>'),(function(){socket_default().ui.emitShowRestoreOverlay(),axios_default().post("/api/v1/backup/restore",{file:filename}).then((function(){helpers_default().UI.showSnackbar("Restore Complete. Logging all users out..."),setTimeout((function(){socket_default().ui.emitRestoreComplete()}),2e3)})).catch((function(err){logger.error(err),helpers_default().UI.showSnackbar("An error occurred. Check console.",!0)}))}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}}},{key:"onDeleteBackupClicked",value:function(e,backup){var _this3=this;uikit_combined_min_default().modal.confirm('<h2 class="text-light">Are you sure?</h2>\n        <p style="font-size: 14px;">This action is permanent and will destroy the backup file: \n            <strong>'.concat(backup.get("filename"),"</strong>\n        </p>"),(function(){axios_default().delete("/api/v1/backup/".concat(backup.get("filename"))).then((function(res){res.data&&res.data.success?(_this3.props.fetchBackups(),helpers_default().UI.showSnackbar("Backup successfully deleted")):helpers_default().UI.showSnackbar("Unable to delete backup",!0)})).catch((function(err){logger.error(err),helpers_default().UI.showSnackbar("Error: ".concat(err.response.data.error),!0)}))}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"onRestoreTicketClicked",value:function(e,ticket){ticket&&this.props.restoreDeletedTicket({_id:ticket.get("_id")})}},{key:"onDeleteTicketClicked",value:function(e,ticket){ticket&&this.props.permDeleteTicket({_id:ticket.get("_id")})}},{key:"render",value:function(){var _this4=this,active=this.props.active;return react.createElement("div",{className:active?"active":"hide"},!this.props.settings.hasMongoDBTools&&react.createElement(Settings_SettingItem,{title:"MongoDB Tools Not Found",subtitle:"Unable to locate MongoDB tools. Please make sure MongoDB tools are installed."},react.createElement("div",null,react.createElement("h4",null,"Installing MongoDB Tools"),react.createElement("p",{style:{margin:"0 0 5px 0",fontSize:"13px"}},"MongoDB Tools are required to perform backup and restore. See below for instructions on installing MongoDB Tools."),react.createElement("h5",null,react.createElement("strong",null,"Ubuntu 18.04")),react.createElement("pre",{style:{whiteSpace:"pre-line"}},"sudo apt install -y mongo-tools"),react.createElement("br",null),react.createElement("h5",null,react.createElement("strong",null,"ArchLinux")),react.createElement("pre",{style:{whiteSpace:"pre-line"}},"yay -S mongodb-tools-bin"),react.createElement("br",null),react.createElement("h5",null,react.createElement("strong",null,"Fedora 29")),react.createElement("pre",null,"dnf install -y mongo-tools"),react.createElement("br",null),react.createElement("h5",null,react.createElement("strong",null,"Alpine Linux")),react.createElement("pre",null,"apk add mongodb-tools"))),this.props.settings.hasMongoDBTools&&react.createElement("div",null,react.createElement(Settings_SettingItem,{title:"Backup Now",subtitle:"Backup all site data. (Database, Attachments, Assets)",component:react.createElement("div",{className:"uk-float-right mt-10"},react.createElement("div",{className:"uk-progress uk-progress-success uk-progress-striped uk-active"+(this.props.settings.backingup?"":" hide "),style:{height:"31px",background:"transparent"}},react.createElement("div",{className:"uk-progress-bar uk-float-right",style:{width:"115px",fontSize:"11px",textTransform:"uppercase",lineHeight:"31px"}},"Please Wait...")),!this.props.settings.backingup&&react.createElement(components_Button,{text:"Backup Now",style:"success",small:!0,styleOverride:{width:"115px"},onClick:function(e){return _this4.onBackupNowClicked(e)}}))}),react.createElement(Settings_SettingItem,{title:"Backups",subtitle:"Currently stored backups",component:react.createElement("div",{className:"uk-float-right mt-10",style:{width:"85px"}},react.createElement("div",{className:"uk-progress hide",style:{height:"31px"},ref:function(i){return _this4.backupUploadProgressbar=i}},react.createElement("div",{className:"uk-progress-bar",style:{width:0,lineHeight:"31px",fontSize:"11px"}},"0%")),react.createElement("form",{className:"uk-form-stacked"},react.createElement("button",{className:"md-btn md-btn-small md-btn-primary uk-form-file no-ajaxy",style:{width:"85px"},ref:function(i){return _this4.backupUploadBtn=i}},"Upload",react.createElement("input",{ref:function(i){return _this4.backupUploadSelect=i},type:"file",name:"backupUploadSelect"}))))},this.props.settings.backups.size<1&&react.createElement(zone,null,react.createElement(components_ZoneBox,null,react.createElement("h2",{className:"uk-text-muted uk-text-center"},"No Backups"))),this.props.settings.backups.size>0&&react.createElement("table",{className:"uk-table mt-0"},react.createElement("thead",null,react.createElement("tr",null,react.createElement("th",null,"Filename"),react.createElement("th",null,"Size"),react.createElement("th",null))),react.createElement("tbody",null,this.props.settings.backups.map((function(backup){return react.createElement("tr",{key:backup.get("filename")},react.createElement("td",{className:"valign-middle",style:{width:"60%",height:"60px"}},backup.get("filename")),react.createElement("td",{className:"valign-middle"},backup.get("sizeFormat")),react.createElement("td",{className:"uk-text-right valign-middle"},react.createElement(components_ButtonGroup,null,react.createElement("a",{href:"/backups/".concat(backup.get("filename")),className:"md-btn md-btn-small md-btn-wave no-ajaxy",download:backup.get("filename")},"download"),react.createElement(components_Button,{text:"Restore",small:!0,waves:!0,onClick:function(e){return _this4.oneRestoreClicked(e,backup)}}),react.createElement(components_Button,{text:"Delete",small:!0,style:"danger",waves:!0,onClick:function(e){return _this4.onDeleteBackupClicked(e,backup)}}))))})))))),react.createElement(Settings_SettingItem,{title:"Deleted Tickets",subtitle:"Tickets marked as deleted are shown below."},this.props.settings.deletedTickets.size<1&&react.createElement(zone,null,react.createElement(components_ZoneBox,null,react.createElement("h2",{className:"uk-text-muted uk-text-center"},"No Deleted Tickets"))),this.props.settings.deletedTickets.size>0&&react.createElement("div",null,react.createElement("table",{className:"uk-table mt-0 mb-5"},react.createElement("thead",null,react.createElement("tr",null,react.createElement("th",null,"UID"),react.createElement("th",null,"Subject"),react.createElement("th",null,"Group"),react.createElement("th",null,"Date"),react.createElement("th",null))),react.createElement("tbody",null,this.props.settings.deletedTickets.map((function(ticket){return react.createElement("tr",{key:ticket.get("_id")},react.createElement("td",{className:"valign-middle",style:{width:"10%",height:"60px"}},ticket.get("uid")),react.createElement("td",{className:"valign-middle",style:{width:"30%"}},ticket.get("subject")),react.createElement("td",{className:"valign-middle",style:{width:"30%"}},ticket.getIn(["group","name"])),react.createElement("td",{className:"valign-middle",style:{width:"30%"}},ticket.get("date")),react.createElement("td",{className:"uk-text-right valign-middle"},react.createElement(components_ButtonGroup,null,react.createElement(components_Button,{text:"Delete",style:"danger",small:!0,waves:!0,onClick:function(e){return _this4.onDeleteTicketClicked(e,ticket)}}),react.createElement(components_Button,{text:"Restore",small:!0,waves:!0,onClick:function(e){return _this4.onRestoreTicketClicked(e,ticket)}}))))})))),react.createElement("div",{className:"uk-pagination deletedTicketPagination"}))))}}],protoProps&&BackupRestore_defineProperties(Constructor.prototype,protoProps),staticProps&&BackupRestore_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),BackupRestoreSettingsContainer}(react.Component);BackupRestoreSettingsContainer.propTypes={active:prop_types_default().bool.isRequired,fetchMongoDBTools:prop_types_default().func.isRequired,fetchBackups:prop_types_default().func.isRequired,fetchDeletedTickets:prop_types_default().func.isRequired,changeDeletedTicketsPage:prop_types_default().func.isRequired,backupNow:prop_types_default().func.isRequired,restoreDeletedTicket:prop_types_default().func.isRequired,permDeleteTicket:prop_types_default().func.isRequired,settings:prop_types_default().object.isRequired};const BackupRestore=(0,es.$j)((function(state){return{settings:state.settings}}),{fetchBackups:settings_fetchBackups,fetchMongoDBTools,backupNow:settings_backupNow,fetchDeletedTickets:settings_fetchDeletedTickets,restoreDeletedTicket:settings_restoreDeletedTicket,permDeleteTicket:settings_permDeleteTicket,changeDeletedTicketsPage})(BackupRestoreSettingsContainer);function Server_typeof(obj){return Server_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Server_typeof(obj)}var Server_class,Server_class2,Server_descriptor;function Server_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Server_setPrototypeOf(o,p){return Server_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Server_setPrototypeOf(o,p)}function Server_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Server_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Server_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Server_possibleConstructorReturn(this,result)}}function Server_possibleConstructorReturn(self,call){if(call&&("object"===Server_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Server_assertThisInitialized(self)}function Server_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Server_getPrototypeOf(o){return Server_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Server_getPrototypeOf(o)}var ServerSettingsController=(0,mobxreact_esm.Pi)((Server_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Server_setPrototypeOf(subClass,superClass)}(ServerSettingsController,_React$Component);var Constructor,protoProps,staticProps,_super=Server_createSuper(ServerSettingsController);function ServerSettingsController(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ServerSettingsController),function(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_this=_super.call(this,props),"maintenanceModeEnabled",Server_descriptor,Server_assertThisInitialized(_this)),(0,mobx_esm.rC)(Server_assertThisInitialized(_this)),_this.state={restarting:!1},_this.restartServer=_this.restartServer.bind(Server_assertThisInitialized(_this)),_this}return Constructor=ServerSettingsController,(protoProps=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(prevProps){prevProps.settings!==this.props.settings&&this.maintenanceModeEnabled!==this.getSetting("maintenanceMode")&&(this.maintenanceModeEnabled=this.getSetting("maintenanceMode"))}},{key:"restartServer",value:function(){var _this2=this;this.setState({restarting:!0});var token=document.querySelector('meta[name="csrf-token"]').getAttribute("content");axios_default().post("/api/v1/admin/restart",{},{headers:{"CSRF-TOKEN":token}}).catch((function(error){helpers_default().hideLoader(),logger.error(error.responseText),logger.error("Unable to restart server. Server must run under PM2 and Account must have admin rights."),helpers_default().UI.showSnackbar("Unable to restart server. Are you an Administrator?",!0)})).then((function(){_this2.setState({restarting:!1})}))}},{key:"getSetting",value:function(stateName){return this.props.settings.getIn(["settings",stateName,"value"])?this.props.settings.getIn(["settings",stateName,"value"]):""}},{key:"onMaintenanceModeChange",value:function(e){var _this3=this,self=this,val=e.target.checked;!0===val?uikit_combined_min_default().modal.confirm('<h2>Are you sure?</h2>\n        <p style="font-size: 15px;">\n            <span class="uk-text-danger" style="font-size: 15px;">This will force logout every user and prevent non-administrators from logging in.</span> \n        </p>\n        ',(function(){_this3.props.updateSetting({name:"maintenanceMode:enable",value:val,stateName:"maintenanceMode",noSnackbar:!0}).then((function(){self.maintenanceModeEnabled=val}))}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"}):this.props.updateSetting({name:"maintenanceMode:enable",value:val,stateName:"maintenanceMode",noSnackbar:!0}).then((function(){self.maintenanceModeEnabled=val}))}},{key:"render",value:function(){var _this4=this,active=this.props.active;return react.createElement("div",{className:active?"active":"hide"},react.createElement(Settings_SettingItem,{title:"Restart Server",subtitle:"Restart the Trudesk Instance. ",component:react.createElement(components_Button,{text:"Restart",flat:!1,waves:!0,style:"danger",extraClass:"right mt-8 mr-5",onClick:this.restartServer,disabled:this.state.restarting})}),react.createElement(Settings_SettingItem,{title:"Maintenance Mode",subtitle:"Only Administrators are allowed to login.",component:react.createElement(Settings_EnableSwitch,{stateName:"maintenanceMode",label:"Enable",checked:this.maintenanceModeEnabled,onChange:function(e){return _this4.onMaintenanceModeChange(e)}})}))}}])&&Server_defineProperties(Constructor.prototype,protoProps),staticProps&&Server_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ServerSettingsController}(react.Component),Server_descriptor=function(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}(Server_class2.prototype,"maintenanceModeEnabled",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Server_class=Server_class2))||Server_class;ServerSettingsController.propTypes={active:prop_types_default().bool.isRequired,updateSetting:prop_types_default().func.isRequired,updateMultipleSettings:prop_types_default().func.isRequired,settings:prop_types_default().object.isRequired};const Server=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting,updateMultipleSettings:settings_updateMultipleSettings})(ServerSettingsController);function Legal_typeof(obj){return Legal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Legal_typeof(obj)}function Legal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Legal_setPrototypeOf(o,p){return Legal_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Legal_setPrototypeOf(o,p)}function Legal_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Legal_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Legal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Legal_possibleConstructorReturn(this,result)}}function Legal_possibleConstructorReturn(self,call){if(call&&("object"===Legal_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Legal_getPrototypeOf(o){return Legal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Legal_getPrototypeOf(o)}var LegalSettingsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Legal_setPrototypeOf(subClass,superClass)}(LegalSettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Legal_createSuper(LegalSettingsContainer);function LegalSettingsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LegalSettingsContainer),(_this=_super.call(this,props)).state={privacyPolicy:""},_this}return Constructor=LegalSettingsContainer,(protoProps=[{key:"getSetting",value:function(name){return this.props.settings.getIn(["settings",name,"value"])?this.props.settings.getIn(["settings",name,"value"]):""}},{key:"onSavePrivacyPolicyClicked",value:function(e){e.preventDefault(),this.props.updateSetting({stateName:"privacyPolicy",name:"legal:privacypolicy",value:this.state.privacyPolicy,noSnackbar:!0}).then((function(){helpers_default().UI.showSnackbar("Privacy Policy Updated")}))}},{key:"render",value:function(){var _this2=this,active=this.props.active;return react.createElement("div",{className:active?"":"hide"},react.createElement(Settings_SettingItem,{title:"Privacy Policy",subtitle:"Paste in HTML/Text of your privacy policy."},react.createElement("div",null,react.createElement(components_EasyMDE,{defaultValue:this.getSetting("privacyPolicy"),onChange:function(v){return _this2.setState({privacyPolicy:v})}})),react.createElement("div",{className:"uk-clearfix"},react.createElement(components_Button,{text:"Save",extraClass:"uk-float-right",flat:!0,style:"success",waves:!0,onClick:function(e){return _this2.onSavePrivacyPolicyClicked(e)}}))))}}])&&Legal_defineProperties(Constructor.prototype,protoProps),staticProps&&Legal_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),LegalSettingsContainer}(react.Component);LegalSettingsContainer.propTypes={active:prop_types_default().bool,settings:prop_types_default().object.isRequired,updateSetting:prop_types_default().func.isRequired};const Legal=(0,es.$j)((function(state){return{settings:state.settings.settings}}),{updateSetting:settings_updateSetting})(LegalSettingsContainer);function SettingsContainer_typeof(obj){return SettingsContainer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},SettingsContainer_typeof(obj)}function SettingsContainer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SettingsContainer_setPrototypeOf(o,p){return SettingsContainer_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},SettingsContainer_setPrototypeOf(o,p)}function SettingsContainer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=SettingsContainer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=SettingsContainer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return SettingsContainer_possibleConstructorReturn(this,result)}}function SettingsContainer_possibleConstructorReturn(self,call){if(call&&("object"===SettingsContainer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function SettingsContainer_getPrototypeOf(o){return SettingsContainer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},SettingsContainer_getPrototypeOf(o)}var SettingsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&SettingsContainer_setPrototypeOf(subClass,superClass)}(SettingsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=SettingsContainer_createSuper(SettingsContainer);function SettingsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SettingsContainer),(_this=_super.call(this,props)).state={title:"Settings",activeCategory:"settings-general"},_this}return Constructor=SettingsContainer,(protoProps=[{key:"componentDidMount",value:function(){var location=window.location.pathname.replace(/^(\/settings(\/?))/,"");location&&this.setState({activeCategory:"settings-"+location}),this.props.fetchSettings(),helpers_default().resizeAll()}},{key:"onMenuItemClick",value:function(e,category){var _this2=this;this.state.activeCategory!=="settings-"+category&&this.setState({activeCategory:"settings-"+category},(function(){_this2.page&&(_this2.page.scrollTop=0)}))}},{key:"render",value:function(){var _this3=this;return react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"uk-width-1-6 uk-width-xLarge-1-10 message-list full-height","data-offset":"68"},react.createElement("div",{className:"page-title noshadow nopadding-right",style:{borderTop:"none",borderBottom:"none",height:"68px",paddingLeft:"20px"}},react.createElement("div",{style:{position:"relative"}},react.createElement("p",{style:{fontSize:"24px"}},this.state.title))),react.createElement("div",{className:"page-content-left noborder full-height"},react.createElement(Settings_Menu,null,react.createElement(Settings_MenuItem,{title:"General",active:"settings-general"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"general")}}),react.createElement(Settings_MenuItem,{title:"Accounts",active:"settings-accounts"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"accounts")}}),react.createElement(Settings_MenuItem,{title:"Appearance",active:"settings-appearance"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"appearance")}}),react.createElement(Settings_MenuItem,{title:"Permissions",active:"settings-permissions"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"permissions")}}),react.createElement(Settings_MenuItem,{title:"Tickets",active:"settings-tickets"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"tickets")}}),react.createElement(Settings_MenuItem,{title:"Mailer",active:"settings-mailer"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"mailer")}}),react.createElement(Settings_MenuItem,{title:"Elasticsearch",active:"settings-elasticsearch"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"elasticsearch")}}),react.createElement(Settings_MenuItem,{title:"Backup/Restore",active:"settings-backup"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"backup")}}),react.createElement(Settings_MenuItem,{title:"Server",active:"settings-server"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"server")}}),react.createElement(Settings_MenuItem,{title:"Legal",active:"settings-legal"===this.state.activeCategory,onClick:function(e){_this3.onMenuItemClick(e,"legal")}})))),react.createElement("div",{className:"uk-width-5-6 uk-width-xLarge-9-10"},react.createElement("div",{className:"page-title-right noshadow page-title-border-bottom",style:{borderTop:"none",height:"69px"}}),react.createElement("div",{className:"page-wrapper full-height scrollable no-overflow-x",ref:function(i){return _this3.page=i}},react.createElement("div",{className:"settings-wrap"},react.createElement(General,{active:"settings-general"===this.state.activeCategory}),react.createElement(Accounts,{active:"settings-accounts"===this.state.activeCategory}),react.createElement(Appearance,{active:"settings-appearance"===this.state.activeCategory}),react.createElement(Permissions,{active:"settings-permissions"===this.state.activeCategory}),react.createElement(Tickets,{active:"settings-tickets"===this.state.activeCategory}),react.createElement(Mailer,{active:"settings-mailer"===this.state.activeCategory}),react.createElement(Elasticsearch,{active:"settings-elasticsearch"===this.state.activeCategory}),react.createElement(BackupRestore,{active:"settings-backup"===this.state.activeCategory}),react.createElement(Server,{active:"settings-server"===this.state.activeCategory}),react.createElement(Legal,{active:"settings-legal"===this.state.activeCategory})))))}}])&&SettingsContainer_defineProperties(Constructor.prototype,protoProps),staticProps&&SettingsContainer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SettingsContainer}(react.Component);SettingsContainer.propTypes={fetchSettings:prop_types_default().func.isRequired,sidebar:prop_types_default().object.isRequired};const Settings_SettingsContainer=(0,es.$j)((function(state){return{sidebar:state.sidebar}}),{fetchSettings:settings_fetchSettings})(SettingsContainer);function TruCard_typeof(obj){return TruCard_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TruCard_typeof(obj)}function TruCard_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TruCard_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TruCard_setPrototypeOf(o,p){return TruCard_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},TruCard_setPrototypeOf(o,p)}function TruCard_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=TruCard_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TruCard_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TruCard_possibleConstructorReturn(this,result)}}function TruCard_possibleConstructorReturn(self,call){if(call&&("object"===TruCard_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TruCard_getPrototypeOf(o){return TruCard_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},TruCard_getPrototypeOf(o)}var TruCard=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TruCard_setPrototypeOf(subClass,superClass)}(TruCard,_React$Component);var Constructor,protoProps,staticProps,_super=TruCard_createSuper(TruCard);function TruCard(){return TruCard_classCallCheck(this,TruCard),_super.apply(this,arguments)}return Constructor=TruCard,(protoProps=[{key:"render",value:function(){return react.createElement("div",{className:"tru-card-wrapper uk-position-relative"},this.props.loaderActive&&react.createElement(components_SpinLoader,{active:this.props.loaderActive}),react.createElement("div",{className:"tru-card tru-card-hover"},react.createElement("div",{className:"tru-card-head "+(this.props.extraHeadClass||"")},this.props.menu&&react.createElement("div",{className:"tru-card-head-menu"},react.createElement(Dropdown_DropdownTrigger,{pos:"bottom-right",mode:"click"},react.createElement("i",{className:"material-icons tru-icon"},"more_vert"),react.createElement(components_Dropdown,{small:!0},this.props.menu.map((function(child){return child}))))),react.createElement("div",{className:"uk-text-center"},this.props.header)),react.createElement("div",{className:"tru-card-content "+(this.props.extraContentClass||"")},this.props.content)))}}])&&TruCard_defineProperties(Constructor.prototype,protoProps),staticProps&&TruCard_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TruCard}(react.Component);TruCard.propTypes={menu:prop_types_default().arrayOf(prop_types_default().element),header:prop_types_default().element.isRequired,extraHeadClass:prop_types_default().string,extraContentClass:prop_types_default().string,content:prop_types_default().element.isRequired,loaderActive:prop_types_default().bool},TruCard.defaultProps={loaderActive:!1};const components_TruCard=TruCard;var containers_Accounts_class,containers_Accounts_class2,containers_Accounts_descriptor,containers_Accounts_descriptor2,Accounts_descriptor3,react_infinite_scroller=__webpack_require__(760),react_infinite_scroller_default=__webpack_require__.n(react_infinite_scroller);function containers_Accounts_typeof(obj){return containers_Accounts_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},containers_Accounts_typeof(obj)}function containers_Accounts_initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function containers_Accounts_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function containers_Accounts_setPrototypeOf(o,p){return containers_Accounts_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},containers_Accounts_setPrototypeOf(o,p)}function containers_Accounts_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=containers_Accounts_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=containers_Accounts_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return containers_Accounts_possibleConstructorReturn(this,result)}}function containers_Accounts_possibleConstructorReturn(self,call){if(call&&("object"===containers_Accounts_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return containers_Accounts_assertThisInitialized(self)}function containers_Accounts_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function containers_Accounts_getPrototypeOf(o){return containers_Accounts_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},containers_Accounts_getPrototypeOf(o)}function containers_Accounts_applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var AccountsContainer=(0,mobxreact_esm.Pi)((containers_Accounts_class2=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&containers_Accounts_setPrototypeOf(subClass,superClass)}(AccountsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=containers_Accounts_createSuper(AccountsContainer);function AccountsContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AccountsContainer),containers_Accounts_initializerDefineProperty(_this=_super.call(this,props),"initialLoad",containers_Accounts_descriptor,containers_Accounts_assertThisInitialized(_this)),containers_Accounts_initializerDefineProperty(_this,"hasMore",containers_Accounts_descriptor2,containers_Accounts_assertThisInitialized(_this)),containers_Accounts_initializerDefineProperty(_this,"pageStart",Accounts_descriptor3,containers_Accounts_assertThisInitialized(_this)),(0,mobx_esm.rC)(containers_Accounts_assertThisInitialized(_this)),_this.getUsersWithPage=_this.getUsersWithPage.bind(containers_Accounts_assertThisInitialized(_this)),_this}return Constructor=AccountsContainer,(protoProps=[{key:"componentDidMount",value:function(){this.initialLoad=!1}},{key:"componentDidUpdate",value:function(){helpers_default().resizeFullHeight()}},{key:"componentWillUnmount",value:function(){this.props.unloadAccounts()}},{key:"onEditAccountClicked",value:function(e,user){e.preventDefault(e);var canEditAccount=helpers_default().hasHierarchyOverRole(user.getIn(["role","_id"]));this.props.showModal("EDIT_ACCOUNT",{edit:canEditAccount,user:user.toJS(),roles:this.props.common.roles,groups:this.props.common.groups})}},{key:"onDeleteAccountClicked",value:function(e,user){e.preventDefault(),this.props.deleteAccount({username:user.get("username")})}},{key:"onEnableAccountClicked",value:function(e,user){e.preventDefault(),this.props.enableAccount({username:user.get("username")})}},{key:"getUsersWithPage",value:function(page){var _this2=this;this.hasMore=!1,this.props.fetchAccounts({page,limit:25,type:this.props.view,showDeleted:!0}).then((function(_ref){var response=_ref.response;_this2.hasMore=response.count>=25}))}},{key:"onSearchKeyUp",value:function(e){var _this3=this,keyCode=e.keyCode||e.which,search=e.target.value;13===keyCode&&(search.length>2?this.props.unloadAccounts().then((function(){_this3.hasMore=!1,_this3.props.fetchAccounts({limit:-1,search}).then((function(_ref2){var response=_ref2.response;_this3.pageStart=-1,_this3.hasMore=response.count>=25}))})):0===search.length&&this.props.unloadAccounts().then((function(){_this3.pageStart=-1,_this3.getUsersWithPage(0)})))}},{key:"render",value:function(){var _this4=this,items=this.props.accountsState.accounts&&this.props.accountsState.accounts.map((function(user){var userImage=user.get("image")||"defaultProfile.jpg",actionMenu=[react.createElement(Dropdown_DropdownItem,{key:0,text:"Edit",onClick:function(e){return _this4.onEditAccountClicked(e,user)}})];user.get("deleted")?actionMenu.push(react.createElement(Dropdown_DropdownItem,{key:2,text:"Enable",onClick:function(e){return _this4.onEnableAccountClicked(e,user)}})):actionMenu.push(react.createElement(Dropdown_DropdownItem,{key:1,text:"Delete",extraClass:"uk-text-danger",onClick:function(e){return _this4.onDeleteAccountClicked(e,user)}}));var isAdmin=user.getIn(["role","isAdmin"])||!1,isAgent=user.getIn(["role","isAgent"])||!1,customer=!isAdmin&&!isAgent,isDeleted=user.get("deleted")||!1;return react.createElement(Grid_GridItem,{key:user.get("_id"),width:"1-5",xLargeWidth:"1-6",extraClass:"mb-25"},react.createElement(components_TruCard,{loaderActive:user.get("loading"),menu:actionMenu,extraHeadClass:(isAdmin?"tru-card-head-admin":"")+(!isAdmin&&isAgent?"tru-card-head-agent":"")+(isDeleted?" tru-card-head-deleted":""),header:react.createElement("div",null,react.createElement("div",{className:"account-image relative uk-display-inline-block"},react.createElement("img",{src:"/uploads/users/".concat(userImage),alt:"ProfilePic",className:"tru-card-head-avatar"}),react.createElement("span",{"data-user-status-id":user.get("_id"),className:"user-status-large user-offline uk-border-circle"})),react.createElement("h3",{className:"tru-card-head-text uk-text-center"},user.get("fullname"),react.createElement("span",{className:"uk-text-truncate"},user.get("title")))),content:react.createElement("ul",{className:"tru-list"},react.createElement("li",null,react.createElement("div",{className:"tru-list-content"},react.createElement("span",{className:"tru-list-heading"},"Role"),react.createElement("span",{className:"uk-text-small uk-text-muted"},user.getIn(["role","name"])))),react.createElement("li",null,react.createElement("div",{className:"tru-list-content"},react.createElement("span",{className:"tru-list-heading"},"Email"),react.createElement("span",{className:"uk-text-small uk-text-muted"},react.createElement("a",{href:"mailto:".concat(user.get("email"))},user.get("email"))))),react.createElement("li",null,customer&&user.get("groups")&&react.createElement("div",{className:"tru-list-content"},react.createElement("span",{className:"tru-list-heading"},"Groups"),react.createElement("span",{className:"uk-text-small uk-text-muted uk-text-truncate"},user.get("groups").map((function(group){return group.get("name")+(user.get("groups").toArray().length>1?", ":"")})))),!customer&&user.get("teams")&&react.createElement("div",{className:"tru-list-content"},react.createElement("span",{className:"tru-list-heading"},"Teams"),react.createElement("span",{className:"uk-text-small uk-text-muted uk-text-truncate"},user.get("teams").map((function(team){return team.get("name")+(user.get("teams").toArray().length>1?", ":"")}))))),!customer&&user.get("departments")&&react.createElement("li",null,react.createElement("div",{className:"tru-list-content"},react.createElement("span",{className:"tru-list-heading"},"Departments"),react.createElement("span",{className:"uk-text-small uk-text-muted uk-text-truncate"},user.get("departments").map((function(department){return department.get("name")+(user.get("departments").toArray().length>1?", ":"")}))))))}))}));return react.createElement("div",null,react.createElement(components_PageTitle,{title:this.props.title,rightComponent:react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"uk-width-1-4 uk-push-3-4 mt-15 pr-20 uk-clearfix"},react.createElement(components_ButtonGroup,{classNames:"uk-clearfix uk-float-right"},react.createElement(components_Button,{text:"Create",hasDropdown:!1,flat:!1,small:!0,waves:!1,extraClass:"hover-accent",onClick:function(){return _this4.props.showModal("CREATE_ACCOUNT")}}))))}),react.createElement(components_PageContent,{id:"accounts-page-content"},react.createElement(react_infinite_scroller_default(),{pageStart:this.pageStart,loadMore:this.getUsersWithPage,hasMore:this.hasMore,initialLoad:this.initialLoad,threshold:25,loader:react.createElement("div",{className:"uk-width-1-1 uk-text-center",key:0},react.createElement("i",{className:"uk-icon-refresh uk-icon-spin"})),useWindow:!1,getScrollParent:function(){return document.getElementById("accounts-page-content")}},react.createElement(components_Grid,{gutterSize:"medium"},items))))}}])&&containers_Accounts_defineProperties(Constructor.prototype,protoProps),staticProps&&containers_Accounts_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AccountsContainer}(react.Component),containers_Accounts_descriptor=containers_Accounts_applyDecoratedDescriptor(containers_Accounts_class2.prototype,"initialLoad",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),containers_Accounts_descriptor2=containers_Accounts_applyDecoratedDescriptor(containers_Accounts_class2.prototype,"hasMore",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Accounts_descriptor3=containers_Accounts_applyDecoratedDescriptor(containers_Accounts_class2.prototype,"pageStart",[mobx_esm.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),containers_Accounts_class=containers_Accounts_class2))||containers_Accounts_class;AccountsContainer.propTypes={title:prop_types_default().string.isRequired,view:prop_types_default().string.isRequired,fetchAccounts:prop_types_default().func.isRequired,deleteAccount:prop_types_default().func.isRequired,enableAccount:prop_types_default().func.isRequired,unloadAccounts:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired,common:prop_types_default().object.isRequired,shared:prop_types_default().object.isRequired,accountsState:prop_types_default().object.isRequired},AccountsContainer.defaultProps={title:"Accounts",view:"customers"};const containers_Accounts=(0,es.$j)((function(state){return{shared:state.shared,accountsState:state.accountsState,common:state.common}}),{fetchAccounts:accounts_fetchAccounts,deleteAccount:accounts_deleteAccount,enableAccount:accounts_enableAccount,unloadAccounts,showModal})(AccountsContainer);__webpack_require__(330),__webpack_require__(331);function StepWizard_typeof(obj){return StepWizard_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},StepWizard_typeof(obj)}function StepWizard_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function StepWizard_setPrototypeOf(o,p){return StepWizard_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},StepWizard_setPrototypeOf(o,p)}function StepWizard_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=StepWizard_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=StepWizard_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return StepWizard_possibleConstructorReturn(this,result)}}function StepWizard_possibleConstructorReturn(self,call){if(call&&("object"===StepWizard_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return StepWizard_assertThisInitialized(self)}function StepWizard_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function StepWizard_getPrototypeOf(o){return StepWizard_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},StepWizard_getPrototypeOf(o)}var StepWizard=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&StepWizard_setPrototypeOf(subClass,superClass)}(StepWizard,_React$Component);var Constructor,protoProps,staticProps,_super=StepWizard_createSuper(StepWizard);function StepWizard(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StepWizard),(_this=_super.call(this,props)).onImportStatusChange=function(data){console.log(data)},_this.init=function(){if(_this.wizard.current){var wizard=jquery_default()(_this.wizard.current);wizard.steps({headerTag:"h3",bodyTag:"section",transitionEffect:"slideLeft",trigger:"change",cssClass:"wizard wizard-green",onInit:function(event,currentIndex){_this.setContentHeight(wizard,currentIndex),wizard.find(".button_next").addClass("disabled").attr("aria-disabled",!0).find("a").attr("disabled",!0),setTimeout((function(){jquery_default()(window).resize()}),100)},onStepChanging:function(event,currentIndex,newIndex){return!(0===currentIndex&&1===newIndex&&!_this.hasUploaded)},onStepChanged:function(event,currentIndex){2===currentIndex&&(wizard.find(".steps ul li").each((function(){jquery_default()(StepWizard_assertThisInitialized(_this)).addClass("disabled")})),wizard.find(".actions ul li").addClass("disabled"),wizard.find(".button_previous").addClass("disabled").attr("aria-disabled",!0),jquery_default()(_this.statusBox.current).find("ul").append("<li>Starting Import...</li>"),_this.disableUIElements(),setTimeout((function(){socket_default().accountsImporter.sendAccountData("csv",_this.addedUsers,_this.updatedUsers)}),1e3));jquery_default()(".steps .current").nextAll().removeClass("done").addClass("disabled"),_this.setContentHeight(wizard,currentIndex)},onFinished:function(){console.log("DONE")}});var progressbar=wizard.find("#progressbar"),bar=progressbar.find(".uk-progress-bar"),self=StepWizard_assertThisInitialized(_this),settings={action:"/accounts/import/csv/upload",allow:"*.csv",loadstart:function(){bar.css("width","0%").text("0%"),progressbar.removeClass("uk-hidden")},progress:function(percent){percent=Math.ceil(percent),bar.css("width",percent+"%").text(percent+"%")},notallowed:function(){helpers_default().UI.showSnackbar("Invalid File Type. Please upload a CSV file.",!0)},error:function(err){console.error(err),helpers_default().UI.showSnackbar("An unknown error occurred. Check Console",!0)},allcomplete:function(response){if(!(response=JSON.parse(response)).success)return console.log(response),helpers_default().UI.showSnackbar("An Error occurred. Check Console",!0),!1;self.hasUploaded=!0,self.addedUsers=response.addedUsers,self.updatedUsers=response.updatedUsers,wizard.find(".review-list").val(self.reviewRender(response.addedUsers,response.updatedUsers)),bar.css("width","100%").text("100%"),setTimeout((function(){progressbar.addClass("uk-hidden"),wizard.steps("setStep",1)}),1e3)}};uikit_combined_min_default().uploadSelect(wizard.find("#upload-select"),settings),uikit_combined_min_default().uploadDrop(wizard.find("#upload-drop"),settings)}},_this.show=function(){_this.container.current&&_this.container.current.classList.remove("uk-hidden")},_this.hide=function(){_this.container.current&&_this.container.current.classList.add("uk-hidden")},_this.onCancelClicked=function(e){"function"==typeof _this.props.onCancelClicked&&_this.props.onCancelClicked(e)},_this.disableUIElements=function(){jquery_default()(".sidebar").css({width:0}),jquery_default()(".side-nav-bottom-panel").css({width:0}),jquery_default()("#page-content").css({marginLeft:0}),jquery_default()(".top-menu").css({display:"none"}),jquery_default()(".js-wizard-select-wrapper").css({display:"none"}),jquery_default()(".js-wizard-cancel").css({display:"none"})},_this.hasUploaded=!1,_this.container=(0,react.createRef)(),_this.wizard=(0,react.createRef)(),_this.statusBox=(0,react.createRef)(),_this.init=_this.init.bind(StepWizard_assertThisInitialized(_this)),_this.show=_this.show.bind(StepWizard_assertThisInitialized(_this)),_this.hide=_this.hide.bind(StepWizard_assertThisInitialized(_this)),_this.onImportStatusChange=_this.onImportStatusChange.bind(StepWizard_assertThisInitialized(_this)),_this}return Constructor=StepWizard,(protoProps=[{key:"componentDidMount",value:function(){this.init(),socket_default().socket.on("$trudesk:accounts:import:onStatusChange",this.onImportStatusChange)}},{key:"componentWillUnmount",value:function(){socket_default().socket.removeAllListeners("$trudesk:accounts:import:onStatusChange")}},{key:"setContentHeight",value:function(thisWizard,step){var thisHeight=jquery_default()(thisWizard).find(".step-"+step).actual("outerHeight");jquery_default()(thisWizard).children(".content").velocity({height:thisHeight},{duration:140,easing:[.215,.61,.355,1]})}},{key:"reviewRender",value:function(addedUsers,updatedUsers){var addedUsersTemplate=[],updatedUsersTemplate=[];null===addedUsers&&(addedUsers=[]),null===updatedUsers&&(updatedUsers=[]);for(var i=0;i<addedUsers.length;i++)addedUsersTemplate.push(addedUsers[i].username+" | action=add username="+addedUsers[i].username+" name="+addedUsers[i].fullname+" email="+addedUsers[i].email+" title="+addedUsers[i].title);for(var k=0;k<updatedUsers.length;k++)updatedUsersTemplate.push(updatedUsers[k].username+" | action=update username="+updatedUsers[k].username+" name="+updatedUsers[k].fullname+" email="+updatedUsers[k].email+" title="+updatedUsers[k].title);var sep=[];return addedUsersTemplate.length>0&&sep.push("----------------"),(0,lodash.union)(addedUsersTemplate,sep,updatedUsersTemplate).join("\r")}},{key:"render",value:function(){var _this2=this,_this$props=this.props,title=_this$props.title,subtitle=_this$props.subtitle,cancelButtonText=_this$props.cancelButtonText;return react.createElement("div",{ref:this.container,className:"uk-grid uk-margin-small-bottom uk-hidden"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("div",{className:"panel trupanel nopadding no-hover-shadow",style:{position:"relative",minHeight:265}},react.createElement("div",{className:"left"},react.createElement("h6",{style:{padding:"10px 0 0 15px",margin:0,fontSize:16}},title),react.createElement("h5",{style:{padding:"0 0 10px 15px",margin:"-2px 0 0 0",fontSize:12},className:"uk-text-muted"},subtitle)),react.createElement("div",{className:"right",style:{margin:15}},react.createElement("button",{className:"btn md-btn md-btn-warning js-wizard-cancel",onClick:function(e){return _this2.onCancelClicked(e)}},cancelButtonText)),react.createElement("hr",{className:"nomargin"}),react.createElement("form",{className:"uk-form-stacked",id:"wizard_csv_form"},react.createElement("div",{ref:this.wizard},react.createElement("h3",null,"File Upload"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz"},"File Upload",react.createElement("span",{className:"sub-heading"},"Upload csv file containing user data to import.")),react.createElement("hr",{className:"md-hr"}),react.createElement("div",{id:"upload-drop",className:"uk-file-upload"},react.createElement("p",{className:"uk-text"},"Drop file to upload"),react.createElement("p",{className:"uk-text-muted uk-text-small uk-margin-small-bottom"},"or"),react.createElement("button",{className:"uk-form-file md-btn"},"choose file",react.createElement("input",{type:"file",id:"upload-select"}))),react.createElement("div",{id:"progressbar",className:"uk-progress uk-active uk-progress-success uk-hidden"},react.createElement("div",{className:"uk-progress-bar",style:{width:0}}))),react.createElement("h3",null,"Review Uploaded Data"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz"},"Review Uploaded Data",react.createElement("span",{className:"sub-heading"},"Below is the parsed contents of the uploaded csv file.")),react.createElement("textarea",{className:"review-list",disabled:!0})),react.createElement("h3",null,"Import Accounts"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz uk-margin-medium-bottom"},"Importing Accounts..",react.createElement("span",{className:"sub-heading"},"Please wait while your accounts are imported.",react.createElement("br",null),react.createElement("em",null,"Please do not navigate away from this page. Some UI Elements have been disabled."))),react.createElement("div",{ref:this.statusBox,style:{width:"100%",height:300,border:"1px solid #ccc",overflow:"auto",padding:10}},react.createElement("ul",null)),react.createElement("br",null),react.createElement("div",{className:"js-csv-progress uk-progress uk-progress-striped uk-active uk-progress-success",style:{marginBottom:0,boxShadow:"inset 0 0 0 1px rgba(0, 0, 0,.06)",background:"#f4f4f4"}},react.createElement("div",{className:"uk-progress-bar",style:{width:0}}))))))))}}])&&StepWizard_defineProperties(Constructor.prototype,protoProps),staticProps&&StepWizard_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),StepWizard}(react.Component);StepWizard.propTypes={title:prop_types_default().string.isRequired,subtitle:prop_types_default().string.isRequired,cancelButtonText:prop_types_default().string,onCancelClicked:prop_types_default().func},StepWizard.defaultProps={cancelButtonText:"Cancel",onCancelClicked:function(){}};const components_StepWizard=StepWizard;function AccountsImport_typeof(obj){return AccountsImport_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},AccountsImport_typeof(obj)}function AccountsImport_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function AccountsImport_setPrototypeOf(o,p){return AccountsImport_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},AccountsImport_setPrototypeOf(o,p)}function AccountsImport_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=AccountsImport_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=AccountsImport_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return AccountsImport_possibleConstructorReturn(this,result)}}function AccountsImport_possibleConstructorReturn(self,call){if(call&&("object"===AccountsImport_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function AccountsImport_getPrototypeOf(o){return AccountsImport_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},AccountsImport_getPrototypeOf(o)}var AccountsImportContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&AccountsImport_setPrototypeOf(subClass,superClass)}(AccountsImportContainer,_React$Component);var Constructor,protoProps,staticProps,_super=AccountsImport_createSuper(AccountsImportContainer);function AccountsImportContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AccountsImportContainer),(_this=_super.call(this,props)).selectAccountImport=function(event,type){if(_this.csvRef.current&&_this.jsonRef.current&&_this.ldapRef.current&&_this.csvWizardRef.current&&_this.jsonWizardRef.current&&_this.ldapWizardRef.current&&!event.target.classList.contains("card-disabled"))switch(type){case"csv":_this.csvWizardRef.current.show(),_this.jsonRef.current.classList.add("card-disabled"),_this.ldapRef.current.classList.add("card-disabled");break;case"json":_this.jsonWizardRef.current.classList.remove("uk-hidden"),_this.csvRef.current.classList.add("card-disabled"),_this.ldapRef.current.classList.add("card-disabled");break;case"ldap":_this.ldapWizardRef.current.classList.remove("uk-hidden"),_this.csvRef.current.classList.add("card-disabled"),_this.jsonRef.current.classList.add("card-disabled")}},_this.resetWizards=function(){_this.csvRef.current&&_this.jsonRef.current&&_this.ldapRef.current&&_this.csvWizardRef.current&&_this.jsonWizardRef.current&&_this.ldapWizardRef.current&&(_this.csvRef.current.classList.remove("card-disabled"),_this.jsonRef.current.classList.remove("card-disabled"),_this.ldapRef.current.classList.remove("card-disabled"),_this.csvWizardRef.current.hide(),_this.jsonWizardRef.current.classList.add("uk-hidden"),_this.ldapWizardRef.current.classList.add("uk-hidden"))},_this.csvRef=(0,react.createRef)(),_this.jsonRef=(0,react.createRef)(),_this.ldapRef=(0,react.createRef)(),_this.csvWizardRef=(0,react.createRef)(),_this.jsonWizardRef=(0,react.createRef)(),_this.ldapWizardRef=(0,react.createRef)(),_this}return Constructor=AccountsImportContainer,(protoProps=[{key:"render",value:function(){var _this2=this;return react.createElement(react.Fragment,null,react.createElement(components_PageTitle,{title:"Accounts Import"}),react.createElement(components_PageContent,null,react.createElement("div",{className:"uk-grid uk-grid-medium uk-margin-medium-bottom js-wizard-select-wrapper"},react.createElement("div",{className:"uk-width-1-1 uk-margin-small-bottom"},react.createElement("h3",null,"Select Import Type")),react.createElement("div",{className:"uk-width-1-3"},react.createElement("div",{id:"csv-import-selector",ref:this.csvRef,className:"panel trupanel nopadding md-bg-color-green md-color-white cursor-pointer",style:{minHeight:85},onClick:function(e){return _this2.selectAccountImport(e,"csv")}},react.createElement("div",{className:"tru-card-content"},react.createElement("div",{className:"right uk-margin-small-top"},react.createElement("i",{className:"material-icons font-size-40"},"description")),react.createElement("h2",{className:"uk-margin-remove"},react.createElement("span",{className:"md-color-white uk-margin-small-bottom"},"CSV"),react.createElement("span",{className:"md-color-white uk-text-small uk-display-block"},"Import accounts from an uploaded csv"))))),react.createElement("div",{className:"uk-width-1-3"},react.createElement("div",{id:"json-import-selector",ref:this.jsonRef,className:"panel trupanel nopadding md-bg-color-blue-grey md-color-white cursor-pointer",style:{minHeight:85},onClick:function(e){return _this2.selectAccountImport(e,"json")}},react.createElement("div",{className:"tru-card-content"},react.createElement("div",{className:"right uk-margin-small-top"},react.createElement("svg",{style:{width:40,height:40},viewBox:"0 0 24 24"},react.createElement("path",{fill:"#ffffff",d:"M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z"}))),react.createElement("h2",{className:"uk-margin-remove"},react.createElement("span",{className:"md-color-white uk-margin-small-bottom"},"JSON"),react.createElement("span",{className:"md-color-white uk-text-small uk-display-block"},"Import accounts from an uploaded json file"))))),react.createElement("div",{className:"uk-width-1-3"},react.createElement("div",{id:"ldap-import-selector",ref:this.ldapRef,className:"panel trupanel nopadding md-bg-color-blue md-color-white cursor-pointer",style:{minHeight:85},onClick:function(e){return _this2.selectAccountImport(e,"ldap")}},react.createElement("div",{className:"tru-card-content"},react.createElement("div",{className:"right uk-margin-small-top"},react.createElement("i",{className:"material-icons font-size-40"},"")),react.createElement("h2",{className:"uk-margin-remove"},react.createElement("span",{className:"md-color-white uk-margin-small-bottom"},"LDAP"),react.createElement("span",{className:"md-color-white uk-text-small uk-display-block"},"Import accounts from an enterprise ldap server.")))))),react.createElement(components_StepWizard,{title:"CSV Account Import Wizard",subtitle:"This wizard will walk you through importing accounts from a json file.",ref:this.csvWizardRef,onCancelClicked:this.resetWizards}),react.createElement("div",{id:"json_wizard_card",ref:this.jsonWizardRef,className:"uk-grid uk-margin-small-bottom uk-hidden"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("div",{className:"panel trupanel nopadding no-hover-shadow",style:{position:"relative",minHeight:265}},react.createElement("div",{className:"left"},react.createElement("h6",{style:{padding:"10px 0 0 15px",margin:0,fontSize:16}},"JSON Account Import Wizard"),react.createElement("h5",{style:{padding:"0 0 10px 15px",margin:"-2px 0 0 0",fontSize:12},className:"uk-text-muted"},"This wizard will walk you through importing accounts from a json file.")),react.createElement("div",{className:"right",style:{margin:15}},react.createElement("button",{className:"btn md-btn md-btn-warning js-wizard-cancel",onClick:this.resetWizards},"Cancel")),react.createElement("hr",{className:"nomargin"}),react.createElement("form",{className:"uk-form-stacked",id:"wizard_json_form"},react.createElement("div",{id:"wizard_json"},react.createElement("h3",null,"File Upload"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz"},"File Upload",react.createElement("span",{className:"sub-heading"},"Upload json file containing user data to import.")),react.createElement("hr",{className:"md-hr"}),react.createElement("div",{id:"json-upload-drop",className:"uk-file-upload"},react.createElement("p",{className:"uk-text"},"Drop file to upload"),react.createElement("p",{className:"uk-text-muted uk-text-small uk-margin-small-bottom"},"or"),react.createElement("a",{className:"uk-form-file md-btn"},"choose file",react.createElement("input",{type:"file",id:"json-upload-select"}))),react.createElement("div",{id:"json-progressbar",className:"uk-progress uk-active uk-progress-success uk-hidden"},react.createElement("div",{className:"uk-progress-bar",style:{width:0}}))),react.createElement("h3",null,"Review Uploaded Data"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz"},"Review Uploaded Data",react.createElement("span",{className:"sub-heading"},"Below is the parsed contents of the uploaded csv file.")),react.createElement("textarea",{className:"review-list",id:"json-review-list",disabled:!0})),react.createElement("h3",null,"Import Accounts"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz uk-margin-medium-bottom"},"Importing Accounts..",react.createElement("span",{className:"sub-heading"},"Please wait while your accounts are imported.",react.createElement("br",null),react.createElement("em",null,"Please do not navigate away from this page. Some UI Elements have been disabled."))),react.createElement("div",{id:"json-import-status-box",style:{width:"100%",height:300,border:"1px solid #ccc",overflow:"auto",padding:10}},react.createElement("ul",null)),react.createElement("br",null),react.createElement("div",{className:"js-json-progress uk-progress uk-progress-striped uk-active uk-progress-success",style:{marginBottom:0,boxShadow:"inset 0 0 0 1px rgba(0, 0, 0,.06)",background:"#f4f4f4"}},react.createElement("div",{className:"uk-progress-bar",style:{width:0}})))))))),react.createElement("div",{id:"ldap_wizard_card",ref:this.ldapWizardRef,className:"uk-grid uk-margin-small-bottom uk-hidden"},react.createElement("div",{className:"uk-width-1-1"},react.createElement("div",{className:"panel trupanel nopadding no-hover-shadow",style:{position:"relative",minHeight:265}},react.createElement("div",{className:"left"},react.createElement("h6",{style:{padding:"10px 0 0 15px",margin:0,fontSize:16}},"LDAP Account Import Wizard"),react.createElement("h5",{style:{padding:"0 0 10px 15px",margin:"-2px 0 0 0",fontSize:12},className:"uk-text-muted"},"This wizard will walk you through connecting and import users from a LDAP server.")),react.createElement("div",{className:"right",style:{margin:15}},react.createElement("button",{className:"btn md-btn md-btn-warning js-wizard-cancel",onClick:this.resetWizards},"Cancel")),react.createElement("hr",{className:"nomargin"}),react.createElement("div",{className:"card-spinner uk-hidden",style:{opacity:.85}},react.createElement("div",{className:"spinner"})),react.createElement("form",{action:"#",className:"uk-form-stacked",id:"wizard_ldap_connection_form"},react.createElement("div",{id:"wizard_ldap"},react.createElement("h3",null,"Connection Information"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz"},"Connection Information",react.createElement("span",{className:"sub-heading"},"To import users from an LDAP server, we need a little connection information.")),react.createElement("hr",{className:"md-hr",style:{marginTop:"14px !important"}}),react.createElement("div",{className:"uk-grid"},react.createElement("div",{className:"uk-margin-large-bottom uk-width-1-3"},react.createElement("label",{htmlFor:"ldap-server"},"LDAP Server"),react.createElement("input",{id:"ldap-server",type:"text",className:"md-input",name:"ldap-server",required:!0,defaultValue:""})),react.createElement("div",{className:"uk-margin-large-bottom uk-width-1-3"},react.createElement("label",{htmlFor:"ldap-bind-dn"},"Bind DN (CN=Administrator,DC=domain,DC=com)"),react.createElement("input",{type:"text",className:"md-input",name:"ldap-bind-dn",required:!0,defaultValue:""})),react.createElement("div",{className:"uk-margin-large-bottom uk-width-1-3"},react.createElement("label",{htmlFor:"ldap-password"},"Password"),react.createElement("input",{type:"password",className:"md-input",name:"ldap-password",required:!0,defaultValue:""})),react.createElement("div",{className:"uk-margin-large-bottom uk-width-1-2"},react.createElement("label",{htmlFor:"ldap-search-base"},"Search Base"),react.createElement("input",{type:"text",className:"md-input",name:"ldap-search-base",required:!0,defaultValue:""})),react.createElement("div",{className:"uk-margin-large-bottom uk-width-1-2"},react.createElement("label",{htmlFor:"ldap-filter"},"Search Filter (Defaults to Users)"),react.createElement("input",{type:"text",className:"md-input",name:"ldap-filter",required:!0,defaultValue:"(&(objectClass=user)(objectCategory=person))"})))),react.createElement("h3",null,"Verify Connection"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz"},"Verify Connection",react.createElement("span",{id:"wizard_ldap_verify_text",className:"sub-heading"},"Please wait while we try to bind to your ldap server...")),react.createElement("div",{id:"wizard_ldap_verify_spinner",className:"card-spinner uk-hidden",style:{background:"none !important",minHeight:400}},react.createElement("div",{className:"spinner"})),react.createElement("div",{id:"wizard_ldap_verify_icon",className:"md-large-icon md-color-red uk-text-center uk-hidden"},react.createElement("i",{className:"material-icons"},""))),react.createElement("h3",null,"Review Accounts"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz",style:{marginBottom:15}},"Review Accounts",react.createElement("span",{className:"sub-heading"},"Please review the accounts below before proceeding. The next step will import the accounts.")),react.createElement("textarea",{className:"review-list",id:"ldap-review-list",disabled:!0})),react.createElement("h3",null,"Import Accounts"),react.createElement("section",null,react.createElement("h2",{className:"heading-wiz uk-margin-medium-bottom"},"Importing Accounts..",react.createElement("span",{className:"sub-heading"},"Please wait while your accounts are imported.",react.createElement("br",null),react.createElement("em",null,"Please do not navigate away from this page. Some UI Elements have been disabled."))),react.createElement("div",{id:"ldap-import-status-box",style:{width:"100%",height:300,border:"1px solid #ccc",overflow:"auto",padding:10}},react.createElement("ul",null)),react.createElement("br",null),react.createElement("div",{className:"js-ldap-progress uk-progress uk-progress-striped uk-active uk-progress-success",style:{marginBottom:0,boxShadow:"inset 0 0 0 1px rgba(0, 0, 0,.06)",background:"#f4f4f4"}},react.createElement("div",{className:"uk-progress-bar",style:{width:0}}))))))))))}}])&&AccountsImport_defineProperties(Constructor.prototype,protoProps),staticProps&&AccountsImport_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),AccountsImportContainer}(react.Component);AccountsImportContainer.propTypes={};const AccountsImport=AccountsImportContainer;function Groups_typeof(obj){return Groups_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Groups_typeof(obj)}function Groups_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Groups_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Groups_setPrototypeOf(o,p){return Groups_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Groups_setPrototypeOf(o,p)}function Groups_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Groups_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Groups_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Groups_possibleConstructorReturn(this,result)}}function Groups_possibleConstructorReturn(self,call){if(call&&("object"===Groups_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Groups_getPrototypeOf(o){return Groups_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Groups_getPrototypeOf(o)}var GroupsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Groups_setPrototypeOf(subClass,superClass)}(GroupsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Groups_createSuper(GroupsContainer);function GroupsContainer(){return Groups_classCallCheck(this,GroupsContainer),_super.apply(this,arguments)}return Constructor=GroupsContainer,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchGroups({type:"all"})}},{key:"onCreateGroupClick",value:function(){this.props.showModal("CREATE_GROUP")}},{key:"onEditGroupClick",value:function(group){this.props.showModal("EDIT_GROUP",{group})}},{key:"onDeleteGroupClick",value:function(_id){var _this=this;uikit_combined_min_default().modal.confirm('<h2>Are you sure?</h2>\n        <p style="font-size: 15px;">\n            <span class="uk-text-danger" style="font-size: 15px;">This is a permanent action.</span> \n        </p>\n        <p style="font-size: 12px;">\n            Agents may lose access to resources once this group is deleted.\n        </p>\n        <span>Groups that are associated with ticket cannot be deleted.</span>\n        ',(function(){_this.props.deleteGroup({_id})}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"render",value:function(){var _this2=this,tableItems=this.props.groups.map((function(group){return react.createElement(Table_TableRow,{key:group.get("_id"),className:"vam nbb"},react.createElement(Table_TableCell,{style:{fontWeight:500,padding:"18px 15px"}},group.get("name")),react.createElement(Table_TableCell,{style:{padding:"13px 20px 8px 8px"}},group.get("members")&&group.get("members").size>0&&group.get("members").filter((function(user){return!user.get("deleted")})).map((function(user){var profilePic=user.get("image")||"defaultProfile.jpg";return react.createElement("div",{key:user.get("_id"),className:"uk-float-left uk-position-relative mb-10","data-uk-tooltip":'{pos: "bottom"}',title:user.get("fullname")},react.createElement("img",{style:{width:25,height:25,marginRight:5},className:"round",src:"/uploads/users/".concat(profilePic),alt:user.get("fullname")}),react.createElement("span",{"data-user-status-id":user.get("_id"),className:"user-offline uk-border-circle",style:{width:13,height:13}}))})),!group.get("members")&&react.createElement("div",null)),react.createElement(Table_TableCell,{style:{textAlign:"right",paddingRight:15}},react.createElement(components_ButtonGroup,null,helpers_default().canUser("groups:update",!0)&&react.createElement(components_Button,{text:"Edit",small:!0,waves:!0,onClick:function(){return _this2.onEditGroupClick(group.toJS())}}),helpers_default().canUser("groups:delete",!0)&&react.createElement(components_Button,{text:"Delete",style:"danger",small:!0,waves:!0,onClick:function(){return _this2.onDeleteGroupClick(group.get("_id"))}}))))}));return react.createElement("div",null,react.createElement(components_PageTitle,{title:"Customer Groups",rightComponent:react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"uk-width-1-1 mt-15 uk-text-right"},react.createElement(components_Button,{text:"Create",flat:!1,small:!0,waves:!1,extraClass:"hover-accent",onClick:function(){return _this2.onCreateGroupClick()}})))}),react.createElement(components_PageContent,{padding:0,paddingBottom:0},react.createElement(components_Table,{headers:[react.createElement(Table_TableHeader,{key:0,width:"25%",height:40,text:"Name",padding:"8px 8px 8px 15px"}),react.createElement(Table_TableHeader,{key:1,width:"50%",text:"Group Members"}),react.createElement(Table_TableHeader,{key:2,width:130,text:"Group Actions"})]},tableItems)))}}])&&Groups_defineProperties(Constructor.prototype,protoProps),staticProps&&Groups_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),GroupsContainer}(react.Component);GroupsContainer.propTypes={groups:prop_types_default().object.isRequired,fetchGroups:prop_types_default().func.isRequired,deleteGroup:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const Groups=(0,es.$j)((function(state){return{groups:state.groupsState.groups}}),{fetchGroups:groups_fetchGroups,deleteGroup:groups_deleteGroup,showModal})(GroupsContainer);function Teams_typeof(obj){return Teams_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Teams_typeof(obj)}function Teams_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Teams_setPrototypeOf(o,p){return Teams_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Teams_setPrototypeOf(o,p)}function Teams_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Teams_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Teams_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Teams_possibleConstructorReturn(this,result)}}function Teams_possibleConstructorReturn(self,call){if(call&&("object"===Teams_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Teams_getPrototypeOf(o){return Teams_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Teams_getPrototypeOf(o)}var TeamsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Teams_setPrototypeOf(subClass,superClass)}(TeamsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Teams_createSuper(TeamsContainer);function TeamsContainer(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TeamsContainer),_super.call(this,props)}return Constructor=TeamsContainer,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchTeams({page:0,limit:1e3})}},{key:"componentDidUpdate",value:function(){helpers_default().resizeFullHeight()}},{key:"componentWillUnmount",value:function(){this.props.unloadTeams()}},{key:"onCreateTeamClick",value:function(e){e.preventDefault(),this.props.showModal("CREATE_TEAM")}},{key:"onEditTeamClick",value:function(team){team.members?team.members=team.members.map((function(m){return m._id})):team.members=[],this.props.showModal("EDIT_TEAM",{team})}},{key:"onDeleteTeamClick",value:function(_id){var _this=this;uikit_combined_min_default().modal.confirm('<h2>Are you sure?</h2>\n        <p style="font-size: 15px;">\n            <span class="uk-text-danger" style="font-size: 15px;">This is a permanent action.</span> \n        </p>\n        <p style="font-size: 12px;">\n            Agents may lose access to resources once this team is deleted.\n        </p>\n        ',(function(){_this.props.deleteTeam({_id})}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"render",value:function(){var _this2=this,tableItems=this.props.teamsState.teams.map((function(team){return react.createElement(Table_TableRow,{key:team.get("_id"),className:"vam nbb"},react.createElement(Table_TableCell,{style:{fontWeight:500,padding:"18px 15px"}},team.get("name")),react.createElement(Table_TableCell,{style:{padding:"13px 8px 8px 8px"}},team.get("members")&&team.get("members").size>0&&team.get("members").filter((function(user){return!user.get("deleted")})).map((function(user){var profilePic=user.get("image")||"defaultProfile.jpg";return react.createElement("div",{key:user.get("_id"),className:"uk-float-left uk-position-relative mb-10","data-uk-tooltip":'{pos: "bottom"}',title:user.get("fullname")},react.createElement("img",{style:{width:25,height:25,marginRight:5},className:"round",src:"/uploads/users/".concat(profilePic),alt:user.get("fullname")}),react.createElement("span",{"data-user-status-id":user.get("_id"),className:"user-offline uk-border-circle",style:{width:13,height:13}}))}))),react.createElement(Table_TableCell,{style:{textAlign:"right",paddingRight:15}},react.createElement(components_ButtonGroup,null,helpers_default().canUser("teams:update",!0)&&react.createElement(components_Button,{text:"Edit",small:!0,waves:!0,onClick:function(){return _this2.onEditTeamClick(team.toJS())}}),helpers_default().canUser("teams:delete",!0)&&react.createElement(components_Button,{text:"Delete",style:"danger",small:!0,waves:!0,onClick:function(){return _this2.onDeleteTeamClick(team.get("_id"))}}))))}));return react.createElement("div",null,react.createElement(components_PageTitle,{title:"Teams",shadow:!0,rightComponent:react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"uk-width-1-1 mt-15 uk-text-right"},react.createElement(components_Button,{text:"Create",flat:!1,small:!0,waves:!1,extraClass:"hover-accent",onClick:function(e){return _this2.onCreateTeamClick(e)}})))}),react.createElement(components_PageContent,{id:"teams-page-content",padding:0,paddingBottom:0},react.createElement(components_Table,{headers:[react.createElement(Table_TableHeader,{key:0,width:"25%",height:40,text:"Name",padding:"8px 8px 8px 15px"}),react.createElement(Table_TableHeader,{key:1,width:"50%",text:"Team Members"}),react.createElement(Table_TableHeader,{key:2,width:130,text:"Team Actions"})]},this.props.teamsState.teams.size<1&&react.createElement(Table_TableRow,null,react.createElement(Table_TableCell,{colSpan:3},react.createElement("h5",{style:{paddingLeft:8}},"No Teams"))),tableItems)))}}])&&Teams_defineProperties(Constructor.prototype,protoProps),staticProps&&Teams_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TeamsContainer}(react.Component);TeamsContainer.propTypes={teamsState:prop_types_default().object.isRequired,fetchTeams:prop_types_default().func.isRequired,unloadTeams:prop_types_default().func.isRequired,deleteTeam:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const Teams=(0,es.$j)((function(state){return{teamsState:state.teamsState}}),{fetchTeams:teams_fetchTeams,unloadTeams,deleteTeam:teams_deleteTeam,showModal})(TeamsContainer);function Departments_typeof(obj){return Departments_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Departments_typeof(obj)}function Departments_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Departments_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Departments_setPrototypeOf(o,p){return Departments_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},Departments_setPrototypeOf(o,p)}function Departments_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=Departments_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Departments_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Departments_possibleConstructorReturn(this,result)}}function Departments_possibleConstructorReturn(self,call){if(call&&("object"===Departments_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Departments_getPrototypeOf(o){return Departments_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Departments_getPrototypeOf(o)}var DepartmentsContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Departments_setPrototypeOf(subClass,superClass)}(DepartmentsContainer,_React$Component);var Constructor,protoProps,staticProps,_super=Departments_createSuper(DepartmentsContainer);function DepartmentsContainer(){return Departments_classCallCheck(this,DepartmentsContainer),_super.apply(this,arguments)}return Constructor=DepartmentsContainer,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchDepartments()}},{key:"onCreateDepartmentClick",value:function(){this.props.showModal("CREATE_DEPARTMENT")}},{key:"onEditDepartmentClick",value:function(department){this.props.showModal("EDIT_DEPARTMENT",{department})}},{key:"onDeleteDepartmentClick",value:function(_id){var _this=this;uikit_combined_min_default().modal.confirm('<h2>Are you sure?</h2>\n        <p style="font-size: 15px;">\n            <span class="uk-text-danger" style="font-size: 15px;">This is a permanent action.</span> \n        </p>\n        <p style="font-size: 12px;">\n            Agents may lose access to resources once this department is deleted.\n        </p>\n        ',(function(){_this.props.deleteDepartment({_id})}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"render",value:function(){var _this2=this;return react.createElement("div",null,react.createElement(components_PageTitle,{title:"Departments",shadow:!1,rightComponent:react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"uk-width-1-1 mt-15 uk-text-right"},react.createElement(components_Button,{text:"Create",flat:!1,small:!0,waves:!1,extraClass:"hover-accent",onClick:function(){return _this2.onCreateDepartmentClick()}})))}),react.createElement(components_PageContent,{padding:0},react.createElement("table",{className:"uk-table uk-table-striped sticky-header fixed-width"},react.createElement("thead",null,react.createElement("tr",null,react.createElement("th",{style:{width:"35%",verticalAlign:"middle",fontSize:12,textTransform:"uppercase",padding:"8px 8px 8px 27px"}},"Name"),react.createElement("th",{style:{verticalAlign:"middle",fontSize:12,textTransform:"uppercase"}},"Teams"),react.createElement("th",{style:{width:"25%",verticalAlign:"middle",fontSize:12,textTransform:"uppercase"}},"Groups"),react.createElement("th",{style:{width:220,verticalAlign:"middle",fontSize:12,textTransform:"uppercase"}},"Actions"))),react.createElement("tbody",{className:"c91-fix scrollable full-height"},this.props.departments&&this.props.departments.map((function(department){var teams=department.get("teams"),groups=department.get("groups");return react.createElement("tr",{key:department.get("_id")},react.createElement("td",{style:{verticalAlign:"middle",padding:"8px 8px 8px 26px"}},react.createElement("div",{style:{fontWeight:"500"}},department.get("name"))),react.createElement("td",{style:{verticalAlign:"middle"}},teams&&teams.map((function(team){return react.createElement("div",{key:team.get("_id"),style:{marginBottom:4}},team.get("name"))}))),react.createElement("td",{style:{verticalAlign:"middle"}},!0===department.get("allGroups")&&react.createElement("div",null,react.createElement("h6",{className:"text-success",style:{fontWeight:"bold"}},"All Groups")),!0===department.get("publicGroups")&&react.createElement("div",null,react.createElement("h6",{className:"text-success",style:{fontWeight:"bold"}},"All Public Groups")),!0!==department.get("allGroups")&&groups&&groups.map((function(group){return react.createElement("div",{key:group.get("_id"),style:{marginBottom:4}},group.get("name"))}))),react.createElement("td",null,react.createElement(components_ButtonGroup,null,helpers_default().canUser("departments:update",!0)&&react.createElement(components_Button,{text:"Edit",small:!0,waves:!0,onClick:function(){return _this2.onEditDepartmentClick(department)}}),helpers_default().canUser("departments:delete",!0)&&react.createElement(components_Button,{text:"Delete",style:"danger",small:!0,waves:!0,onClick:function(){return _this2.onDeleteDepartmentClick(department.get("_id"))}}))))}))))))}}])&&Departments_defineProperties(Constructor.prototype,protoProps),staticProps&&Departments_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DepartmentsContainer}(react.Component);DepartmentsContainer.propTypes={departments:prop_types_default().object.isRequired,fetchDepartments:prop_types_default().func.isRequired,deleteDepartment:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const Departments=(0,es.$j)((function(state){return{departments:state.departmentsState.departments}}),{fetchDepartments:departments_fetchDepartments,deleteDepartment:departments_deleteDepartment,showModal})(DepartmentsContainer);function NoticeContainer_typeof(obj){return NoticeContainer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},NoticeContainer_typeof(obj)}function NoticeContainer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NoticeContainer_setPrototypeOf(o,p){return NoticeContainer_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},NoticeContainer_setPrototypeOf(o,p)}function NoticeContainer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=NoticeContainer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NoticeContainer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NoticeContainer_possibleConstructorReturn(this,result)}}function NoticeContainer_possibleConstructorReturn(self,call){if(call&&("object"===NoticeContainer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NoticeContainer_getPrototypeOf(o){return NoticeContainer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},NoticeContainer_getPrototypeOf(o)}var NoticeContainer=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NoticeContainer_setPrototypeOf(subClass,superClass)}(NoticeContainer,_React$Component);var Constructor,protoProps,staticProps,_super=NoticeContainer_createSuper(NoticeContainer);function NoticeContainer(props){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NoticeContainer),_super.call(this,props)}return Constructor=NoticeContainer,(protoProps=[{key:"componentDidMount",value:function(){this.props.fetchNotices()}},{key:"componentWillUnmount",value:function(){this.props.unloadNotices()}},{key:"onActivateNotice",value:function(noticeId){helpers_default().canUser("notices:activate")?axios_default().put("/api/v2/notices/"+noticeId+"/activate",{active:!0}).then((function(){socket_default().ui.setShowNotice(noticeId)})).catch((function(err){logger.error(err),helpers_default().UI.showSnackbar(err,!0)})):helpers_default().UI.showSnackbar("Unauthorized",!0)}},{key:"onDeactivateNotice",value:function(){axios_default().get("/api/v1/notices/clearactive").then((function(){socket_default().ui.setClearNotice(),helpers_default().UI.showSnackbar("Notice has been deactivated",!1)})).catch((function(err){logger.error(err),helpers_default().UI.showSnackbar(err,!0)}))}},{key:"onEditNotice",value:function(notice){this.props.showModal("EDIT_NOTICE",{notice})}},{key:"onDeleteNotice",value:function(noticeId){var _this=this;uikit_combined_min_default().modal.confirm('<h2>Are you sure?</h2>\n        <p style="font-size: 15px;">\n            <span class="uk-text-danger" style="font-size: 15px;">This is a permanent action.</span> \n        </p>\n        ',(function(){_this.props.deleteNotice({_id:noticeId})}),{labels:{Ok:"Yes",Cancel:"No"},confirmButtonClass:"md-btn-danger"})}},{key:"render",value:function(){var _this2=this,tableItems=this.props.notices.map((function(notice){var formattedDate=helpers_default().formatDate(notice.get("date"),helpers_default().getShortDateFormat())+", "+helpers_default().formatDate(notice.get("date"),helpers_default().getTimeFormat());return react.createElement(Table_TableRow,{key:notice.get("_id"),className:"vam nbb",clickable:!1},react.createElement(Table_TableCell,{style:{padding:"18px 15px"}},react.createElement("span",{style:{display:"block",width:15,height:15,backgroundColor:notice.get("color")}})),react.createElement(Table_TableCell,{style:{fontWeight:500,padding:"18px 5px"}},notice.get("name")),react.createElement(Table_TableCell,{style:{padding:"18px 5px"}},notice.get("message")),react.createElement(Table_TableCell,{style:{padding:"18px 5px"}},formattedDate),react.createElement(Table_TableCell,null,react.createElement(components_ButtonGroup,null,react.createElement(components_Button,{icon:"spatial_audio_off",style:"success",small:!0,waves:!0,onClick:function(){return _this2.onActivateNotice(notice.get("_id"))}}),react.createElement(components_Button,{icon:"edit",extraClass:"hover-primary",small:!0,waves:!0,onClick:function(){return _this2.onEditNotice(notice.toJS())}}),react.createElement(components_Button,{icon:"delete",extraClass:"hover-danger",small:!0,waves:!0,onClick:function(){return _this2.onDeleteNotice(notice.get("_id"))}}))))}));return react.createElement("div",null,react.createElement(components_PageTitle,{title:"Notices",shadow:!1,rightComponent:react.createElement("div",{className:"uk-grid uk-grid-collapse"},react.createElement("div",{className:"uk-width-1-1 mt-15 uk-text-right"},helpers_default().canUser("notices:deactivate")&&react.createElement(components_Button,{text:"Deactivate",flat:!1,small:!0,waves:!1,extraClass:"hover-accent",onClick:function(){return _this2.onDeactivateNotice()}})))}),react.createElement(components_PageContent,{padding:0,paddingBottom:0,extraClass:"uk-position-relative"},react.createElement(components_Table,{style:{margin:0},extraClass:"pDataTable",stickyHeader:!0,striped:!0,headers:[react.createElement(Table_TableHeader,{key:0,width:45,height:50,text:""}),react.createElement(Table_TableHeader,{key:1,width:"20%",text:"Name"}),react.createElement(Table_TableHeader,{key:2,width:"60%",text:"Message"}),react.createElement(Table_TableHeader,{key:3,width:"10%",text:"Date"}),react.createElement(Table_TableHeader,{key:4,width:150,text:""})]},!this.props.loading&&this.props.notices.size<1&&react.createElement(Table_TableRow,{clickable:!1},react.createElement(Table_TableCell,{colSpan:10},react.createElement("h5",{style:{margin:10}},"No Notices Found"))),tableItems)))}}])&&NoticeContainer_defineProperties(Constructor.prototype,protoProps),staticProps&&NoticeContainer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NoticeContainer}(react.Component);NoticeContainer.propTypes={notices:prop_types_default().object.isRequired,loading:prop_types_default().bool.isRequired,fetchNotices:prop_types_default().func.isRequired,deleteNotice:prop_types_default().func.isRequired,unloadNotices:prop_types_default().func.isRequired,showModal:prop_types_default().func.isRequired};const Notice_NoticeContainer=(0,es.$j)((function(state){return{notices:state.noticesState.notices,loading:state.noticesState.loading}}),{fetchNotices:notices_fetchNotices,deleteNotice:notices_deleteNotice,unloadNotices,showModal})(NoticeContainer);function renderer(store){if(document.getElementById("tickets-container")){var view=document.getElementById("tickets-container").getAttribute("data-view"),page=document.getElementById("tickets-container").getAttribute("data-page"),filter=document.getElementById("tickets-container").getAttribute("data-filter");filter=filter?JSON.parse(filter):{};var TicketsContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Tickets_TicketsContainer,{view,page,filter}));react_dom.render(TicketsContainerWithProvider,document.getElementById("tickets-container"))}if(document.getElementById("single-ticket-container")){var ticketId=document.getElementById("single-ticket-container").getAttribute("data-ticket-id"),ticketUid=document.getElementById("single-ticket-container").getAttribute("data-ticket-uid"),SingleTicketContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Tickets_SingleTicketContainer,{ticketId,ticketUid}));react_dom.render(SingleTicketContainerWithProvider,document.getElementById("single-ticket-container"))}if(document.getElementById("accounts-container")){var title=document.getElementById("accounts-container").getAttribute("data-title"),_view=document.getElementById("accounts-container").getAttribute("data-view"),AccountsContainerWithProvider=react.createElement(es.zt,{store},react.createElement(containers_Accounts,{title,view:_view}));react_dom.render(AccountsContainerWithProvider,document.getElementById("accounts-container"))}if(document.getElementById("accounts-import-container")){var AccountsImportContainerWithProvider=react.createElement(es.zt,{store},react.createElement(AccountsImport,null));react_dom.render(AccountsImportContainerWithProvider,document.getElementById("accounts-import-container"))}if(document.getElementById("groups-container")){var GroupsContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Groups,null));react_dom.render(GroupsContainerWithProvider,document.getElementById("groups-container"))}if(document.getElementById("teams-container")){var TeamsContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Teams,null));react_dom.render(TeamsContainerWithProvider,document.getElementById("teams-container"))}if(document.getElementById("departments-container")){var _TeamsContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Departments,null));react_dom.render(_TeamsContainerWithProvider,document.getElementById("departments-container"))}if(document.getElementById("notices-container")){var NoticeContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Notice_NoticeContainer,null));react_dom.render(NoticeContainerWithProvider,document.getElementById("notices-container"))}if(document.getElementById("settings-container")){var SettingsContainerWithProvider=react.createElement(es.zt,{store},react.createElement(Settings_SettingsContainer,null));react_dom.render(SettingsContainerWithProvider,document.getElementById("settings-container"))}}var sagaMiddleware=(0,redux_saga_core_npm_proxy_esm.ZP)(),composeSetup=redux.qC;localStorage.setItem("debug","trudesk:*");var preloadedState={common:window.trudesk.__PRELOADED_STATE__};delete window.trudesk,jquery_default()("script#preloader").remove();var store=(0,redux.MT)(reducers,preloadedState,composeSetup((0,redux.md)(redux_saga_thunk.middleware,sagaMiddleware)));window.react.redux={store},sagaMiddleware.run((function*(){yield(0,redux_saga_effects_npm_proxy_esm.$6)([watcher(),tickets_watcher(),settingsWatcher(),accounts_watcher(),groups_watcher(),teams_watcher(),departments_watcher(),watch(),search_watcher()])}));var sidebarWithProvider=react.createElement(es.zt,{store},react.createElement(Nav_Sidebar,null));if(react_dom.render(sidebarWithProvider,document.getElementById("sidebar")),document.getElementById("modal-wrapper")){var RootModal=react.createElement(es.zt,{store},react.createElement(Modals,null));react_dom.render(RootModal,document.getElementById("modal-wrapper"))}if(document.getElementById("topbar")){var TopbarRoot=react.createElement(es.zt,{store},react.createElement(Topbar_TopbarContainer,null));react_dom.render(TopbarRoot,document.getElementById("topbar"))}window.react.renderer=renderer,window.react.dom=react_dom,renderer(store)},333:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0),__webpack_require__(4),__webpack_require__(14),__webpack_require__(2),__webpack_require__(39),__webpack_require__(99),__webpack_require__(13),__webpack_require__(12)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function($,_,angular,helpers,nav,pageLoader,socketClient){$(window).on("statechangecomplete",(function(){var $ele=$("#page-content");$ele.ready((function(){angular.bootstrap($ele,["trudesk"])})),socketClient.ui.init(socketClient.socket),socketClient.chat.getOpenWindows(),socketClient.chat.updateOnlineBubbles(),$("body > .side-nav-sub.tether-element").each((function(){$(this).remove()})),helpers.init(!0),helpers.hideAllUiKitDropdowns(),helpers.UI.initSidebar(),helpers.UI.bindExpand(),nav.init(),pageLoader.init(),helpers.UI.cardShow(),helpers.countUpMe(),_.debounce((function(){$.event.trigger("$trudesk:ready")}),100)()}));var History=window.History,document=window.document;if(!History.enabled)return!1;$((function(){var $content=$(".wrapper > .ajaxyContent:first").filter(":first"),contentNode=$content.get(0),$window=$(window),$body=$(document.body),rootUrl=History.getRootUrl(),scrollOptions={duration:800,easing:"swing"};0===$content.length&&($content=$body),$.expr[":"].internal=function(obj){var url=$(obj).attr("href")||"";return url.substring(0,rootUrl.length)===rootUrl||-1===url.indexOf(":")};$.fn.ajaxify=function(){var $this=$(this);return $this.find("a:internal:not(.no-ajaxy):not(.ajaxify-bound):not(.search-choice-close)").addClass("ajaxify-bound").on("click",(function(event){var $this=$(this),url=$this.attr("href"),title=$this.attr("title")||null;return!(2!==event.which&&!event.metaKey)||(History.pushState(null,title,url),event.preventDefault(),!1)})),$this},$body.ajaxify(),$window.bind("statechange",(function(){var url=History.getState().url,relativeUrl=url.replace(rootUrl,"");$body.addClass("loading"),$.ajax({url,success:function(data){var result,contentHtml,$scripts,$data=$((result=String(data).replace(/<!DOCTYPE[^>]*>/i,"").replace(/<(html|head|body|title|meta|script)([\s>])/gi,'<div class="document-$1"$2').replace(/<\/(html|head|body|title|meta|script)>/gi,"</div>"),$.trim(result))),$dataContent=$data.find(".document-body:first").find(".wrapper > .ajaxyContent:first").filter(":first");if(($scripts=$dataContent.find(".document-script")).length&&$scripts.detach(),!(contentHtml=$dataContent.html()))return document.location.href=url,!1;$("#page-content").animate({opacity:0},0,(function(){var $oldContent=$("#page-content");$oldContent.find("*").off("click click.chosen mouseup mousemove mousedown change"),document.getElementById("tickets-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("tickets-container")),document.getElementById("single-ticket-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("single-ticket-container")),document.getElementById("settings-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("settings-container")),document.getElementById("accounts-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("accounts-container")),document.getElementById("accounts-import-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("accounts-import-container")),document.getElementById("groups-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("groups-container")),document.getElementById("teams-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("teams-container")),document.getElementById("departments-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("departments-container")),document.getElementById("notices-container")&&window.react.dom.unmountComponentAtNode(document.getElementById("notices-container")),$content.stop(!0,!0),$oldContent.find("*").remove(),$oldContent=null,$content.html(contentHtml).ajaxify().css("opacity",1).show(),document.title=$data.find(".document-title:first").text();try{document.getElementsByTagName("title")[0].innerHTML=document.title.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(Exception){console.log("[AJAXIFY] ERROR: SHOULD HAVE NOT HAPPENED!")}$scripts.each((function(){var $script=$(this),scriptText=$script.text(),scriptNode=document.createElement("script");$script.attr("src")&&($script[0].async||(scriptNode.async=!1),scriptNode.src=$script.attr("src")),scriptNode.appendChild(document.createTextNode(scriptText)),contentNode.appendChild(scriptNode)})),$body.ScrollTo&&$body.ScrollTo(scrollOptions),$body.removeClass("loading"),$window.trigger("statechangecomplete"),void 0!==window._gaq&&window._gaq.push(["_trackPageview",relativeUrl])}))},error:function(jqXHR,textStatus,errorThrown){return document.location.href=url,console.log("[trudesk:ajaxify:Load] - Error Loading Document!!!"),console.error(errorThrown),!1}})}))}))}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},99:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(10),__webpack_require__(0)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(async,$){var pageLoader={init:function(callback){window.react.renderer(window.react.redux.store),window.react.redux.store.dispatch({type:"NAV_CHANGE",payload:{activeItem:$("#__sidebar_route").text(),activeSubItem:$("#__sidebar_sub_route").text(),sessionUser:window.trudeskSessionService.getUser()}}),window.react.redux.store.getState().shared.sessionUser||window.react.redux.store.dispatch({type:"SET_SESSION_USER",payload:{sessionUser:window.trudeskSessionService.getUser()}}),__webpack_require__.e(6).then((function(){var __WEBPACK_AMD_REQUIRE_ARRAY__=[__webpack_require__(761),__webpack_require__(762),__webpack_require__(763),__webpack_require__(764),__webpack_require__(765),__webpack_require__(766),__webpack_require__(767),__webpack_require__(768),__webpack_require__(769),__webpack_require__(770),__webpack_require__(771),__webpack_require__(772),__webpack_require__(773)];(function(a,b,c,d,e,f,g,h,i,j,k,l,m){async.parallel([function(done){a.init(done)},function(done){b.init(done)},function(done){c.init(done)},function(done){d.init(done)},function(done){e.init(done)},function(done){f.init(done)},function(done){g.init(done)},function(done){h.init(done)},function(done){i.init(done)},function(done){j.init(done)},function(done){k.init(done)},function(done){return l.init(),m.init(),done()}],(function(){if("function"==typeof callback)return callback()}))}).apply(null,__WEBPACK_AMD_REQUIRE_ARRAY__)})).catch(__webpack_require__.oe)}};return pageLoader}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},331:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function($){$.fn.addBack=$.fn.addBack||$.fn.andSelf,$.fn.extend({actual:function(method,options){if(!this[method])throw'$.actual => The jQuery method "'+method+'" you called does not exist';var fix,restore,defaults={absolute:!1,clone:!1,includeMargin:!1,display:"block"},configs=$.extend(defaults,options),$target=this.eq(0);if(!0===configs.clone)fix=function(){var style="position: absolute !important; top: -1000 !important; ";$target=$target.clone().attr("style",style).appendTo("body")},restore=function(){$target.remove()};else{var $hidden,tmp=[],style="";fix=function(){$hidden=$target.parents().addBack().filter(":hidden"),style+="visibility: hidden !important; display: "+configs.display+" !important; ",!0===configs.absolute&&(style+="position: absolute !important; "),$hidden.each((function(){var $this=$(this),thisStyle=$this.attr("style");tmp.push(thisStyle),$this.attr("style",thisStyle?thisStyle+";"+style:style)}))},restore=function(){$hidden.each((function(i){var $this=$(this),_tmp=tmp[i];void 0===_tmp?$this.removeAttr("style"):$this.attr("style",_tmp)}))}}fix();var actual=/(outer)/.test(method)?$target[method](configs.includeMargin):$target[method]();return restore(),actual}})})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},82:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $,div,endDrag,lastMousePos,mousePosition,originalDivHeight,originalPos,performDrag,startDrag,wrappedEndDrag,wrappedPerformDrag,jQuery=__webpack_require__(0);($=jQuery).fn.serializeObject=function(){var obj={};return $.each(this.serializeArray(),(function(i,o){var n=o.name,v=o.value;obj[n]=void 0===obj[n]?v:$.isArray(obj[n])?obj[n].concat(v):[obj[n],v]})),obj},div=void 0,originalPos=void 0,originalDivHeight=void 0,lastMousePos=0,wrappedEndDrag=void 0,wrappedPerformDrag=void 0,startDrag=function(e,opts){return(div=$(e.data.el)).addClass("clear-transitions"),div.blur(),lastMousePos=mousePosition(e).y,originalPos=lastMousePos,originalDivHeight=div.height(),wrappedPerformDrag=function(e){return performDrag(e,opts)},wrappedEndDrag=function(e){return endDrag(e,opts)},$(document).mousemove(wrappedPerformDrag).mouseup(wrappedEndDrag),!1},performDrag=function(e,opts){var size,sizePx,thisMousePos;$(div).trigger("div-resizing"),thisMousePos=mousePosition(e).y,size=originalDivHeight+(originalPos-thisMousePos),lastMousePos=thisMousePos;var maxHeight=$(window).height();return opts.maxHeight&&(maxHeight=opts.maxHeight(maxHeight)),size=Math.min(size,maxHeight),sizePx=(size=Math.max(350,size))+"px","function"==typeof opts.onDrag&&opts.onDrag(sizePx),div.height(sizePx),size<350&&endDrag(e,opts),!1},endDrag=function(e,opts){$(document).unbind("mousemove",wrappedPerformDrag).unbind("mouseup",wrappedEndDrag),div.removeClass("clear-transitions"),div.focus(),"function"==typeof opts.resize&&opts.resize(),$(div).trigger("div-resized"),div=null},mousePosition=function(e){return{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}},$.fn.DivResizer=function(opts){return this.each((function(){var start;(div=$(this)).hasClass("processed")||(div.addClass("processed"),start=function(){return function(e){return startDrag(e,opts)}},div.prepend("<div class='grippie'></div>").find(".grippie").bind("mousedown",{el:this},start()))}))}},335:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $,jQuery=__webpack_require__(0);($=jQuery).idleTimer=function(firstParam,elem){var opts;"object"==typeof firstParam?(opts=firstParam,firstParam=null):"number"==typeof firstParam&&(opts={timeout:firstParam},firstParam=null),elem=elem||document,opts=$.extend({idle:!1,timeout:3e4,events:"mousemove keydown wheel DOMMouseScroll mousewheel mousedown touchstart touchmove MSPointerDown MSPointerMove"},opts);var jqElem=$(elem),obj=jqElem.data("idleTimerObj")||{},toggleIdleState=function(e){var obj=$.data(elem,"idleTimerObj")||{};obj.idle=!obj.idle,obj.olddate=+new Date;var event=$.Event((obj.idle?"idle":"active")+".idleTimer");$(elem).trigger(event,[elem,$.extend({},obj),e])},handleEvent=function(e){var obj=$.data(elem,"idleTimerObj")||{};if(("storage"!==e.type||e.originalEvent.key===obj.timerSyncId)&&null==obj.remaining){if("mousemove"===e.type){if(e.pageX===obj.pageX&&e.pageY===obj.pageY)return;if(void 0===e.pageX&&void 0===e.pageY)return;if(+new Date-obj.olddate<200)return}clearTimeout(obj.tId),obj.idle&&toggleIdleState(e),obj.lastActive=+new Date,obj.pageX=e.pageX,obj.pageY=e.pageY,"storage"!==e.type&&obj.timerSyncId&&"undefined"!=typeof localStorage&&localStorage.setItem(obj.timerSyncId,obj.lastActive),obj.tId=setTimeout(toggleIdleState,obj.timeout)}},reset=function(){var obj=$.data(elem,"idleTimerObj")||{};obj.idle=obj.idleBackup,obj.olddate=+new Date,obj.lastActive=obj.olddate,obj.remaining=null,clearTimeout(obj.tId),obj.idle||(obj.tId=setTimeout(toggleIdleState,obj.timeout))};if(null===firstParam&&void 0!==obj.idle)return reset(),jqElem;if(null===firstParam);else{if(null!==firstParam&&void 0===obj.idle)return!1;if("destroy"===firstParam)return function(){var obj=$.data(elem,"idleTimerObj")||{};clearTimeout(obj.tId),jqElem.removeData("idleTimerObj"),jqElem.off("._idleTimer")}(),jqElem;if("pause"===firstParam)return function(){var obj=$.data(elem,"idleTimerObj")||{};null==obj.remaining&&(obj.remaining=obj.timeout-(+new Date-obj.olddate),clearTimeout(obj.tId))}(),jqElem;if("resume"===firstParam)return function(){var obj=$.data(elem,"idleTimerObj")||{};null!=obj.remaining&&(obj.idle||(obj.tId=setTimeout(toggleIdleState,obj.remaining)),obj.remaining=null)}(),jqElem;if("reset"===firstParam)return reset(),jqElem;if("getRemainingTime"===firstParam)return function(){var obj=$.data(elem,"idleTimerObj")||{};if(obj.idle)return 0;if(null!=obj.remaining)return obj.remaining;var remaining=obj.timeout-(+new Date-obj.lastActive);return remaining<0&&(remaining=0),remaining}();if("getElapsedTime"===firstParam)return+new Date-obj.olddate;if("getLastActiveTime"===firstParam)return obj.lastActive;if("isIdle"===firstParam)return obj.idle}return jqElem.on($.trim((opts.events+" ").split(" ").join("._idleTimer ")),(function(e){handleEvent(e)})),opts.timerSyncId&&$(window).bind("storage",handleEvent),(obj=$.extend({},{olddate:+new Date,lastActive:+new Date,idle:opts.idle,idleBackup:opts.idle,timeout:opts.timeout,remaining:null,timerSyncId:opts.timerSyncId,tId:null,pageX:null,pageY:null})).idle||(obj.tId=setTimeout(toggleIdleState,obj.timeout)),$.data(elem,"idleTimerObj",obj),jqElem},$.fn.idleTimer=function(firstParam){return this[0]?$.idleTimer(firstParam,this[0]):this}},330:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{!function($,undefined){$.fn.extend({_aria:function(name,value){return this.attr("aria-"+name,value)},_removeAria:function(name){return this.removeAttr("aria-"+name)},_enableAria:function(enable){return null==enable||enable?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(show){return null==show||show?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(select){return null==select||select?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(id){return id?this.attr("id",id):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var args=1===arguments.length&&$.isArray(arguments[0])?arguments[0]:arguments,formattedString=this,i=0;i<args.length;i++){var pattern=new RegExp("\\{"+i+"\\}","gm");formattedString=formattedString.replace(pattern,args[i])}return formattedString});var _uniqueId=0;function analyzeData(wizard,options,state){var stepTitles=wizard.children(options.headerTag),stepContents=wizard.children(options.bodyTag);stepTitles.length>stepContents.length?throwError("One or more corresponding step {0} are missing.","contents"):stepTitles.length<stepContents.length&&throwError("One or more corresponding step {0} are missing.","titles");var startIndex=options.startIndex;if(state.stepCount=stepTitles.length,options.saveState&&$.cookie){var savedState=$.cookie("jQu3ry_5teps_St@te_"+getUniqueId(wizard)),savedIndex=parseInt(savedState,0);!isNaN(savedIndex)&&savedIndex<state.stepCount&&(startIndex=savedIndex)}state.currentIndex=startIndex,stepTitles.each((function(index){var item=$(this),content=stepContents.eq(index),modeData=content.data("mode"),mode=null==modeData?contentMode.html:getValidEnumValue(contentMode,/^\s*$/.test(modeData)||isNaN(modeData)?modeData:parseInt(modeData,0)),contentUrl=mode===contentMode.html||undefined===content.data("url")?"":content.data("url"),contentLoaded=mode!==contentMode.html&&"1"===content.data("loaded"),step=$.extend({},stepModel,{title:item.html(),content:mode===contentMode.html?content.html():"",contentUrl,contentMode:mode,contentLoaded});!function(wizard,step){getSteps(wizard).push(step)}(wizard,step)}))}function finishStep(wizard,state){var currentStep=wizard.find(".steps li").eq(state.currentIndex);wizard.triggerHandler("finishing",[state.currentIndex])?(currentStep.addClass("done").removeClass("error"),wizard.triggerHandler("finished",[state.currentIndex])):currentStep.addClass("error")}function getEventNamespace(wizard){var eventNamespace=wizard.data("eventNamespace");return null==eventNamespace&&(eventNamespace="."+getUniqueId(wizard),wizard.data("eventNamespace",eventNamespace)),eventNamespace}function getStepAnchor(wizard,index){var uniqueId=getUniqueId(wizard);return wizard.find("#"+uniqueId+"-t-"+index)}function getStepPanel(wizard,index){var uniqueId=getUniqueId(wizard);return wizard.find("#"+uniqueId+"-p-"+index)}function getOptions(wizard){return wizard.data("options")}function getState(wizard){return wizard.data("state")}function getSteps(wizard){return wizard.data("steps")}function getStep(wizard,index){var steps=getSteps(wizard);return(index<0||index>=steps.length)&&throwError("Index out of range."),steps[index]}function getUniqueId(wizard){var uniqueId=wizard.data("uid");return null==uniqueId&&(null==(uniqueId=wizard._id())&&(uniqueId="steps-uid-".concat(_uniqueId),wizard._id(uniqueId)),_uniqueId++,wizard.data("uid",uniqueId)),uniqueId}function getValidEnumValue(enumType,keyOrValue){if(validateArgument("enumType",enumType),validateArgument("keyOrValue",keyOrValue),"string"==typeof keyOrValue){var value=enumType[keyOrValue];return undefined===value&&throwError("The enum key '{0}' does not exist.",keyOrValue),value}if("number"==typeof keyOrValue){for(var key in enumType)if(enumType[key]===keyOrValue)return keyOrValue;throwError("Invalid enum value '{0}'.",keyOrValue)}else throwError("Invalid key or value type.")}function goToNextStep(wizard,options,state){return paginationClick(wizard,options,state,function(state,increaseBy){return state.currentIndex+increaseBy}(state,1))}function goToPreviousStep(wizard,options,state){return paginationClick(wizard,options,state,function(state,decreaseBy){return state.currentIndex-decreaseBy}(state,1))}function goToStep(wizard,options,state,index){if((index<0||index>=state.stepCount)&&throwError("Index out of range."),!(options.forceMoveForward&&index<state.currentIndex)){var oldIndex=state.currentIndex;return wizard.triggerHandler("stepChanging",[state.currentIndex,index])?(state.currentIndex=index,saveCurrentStateToCookie(wizard,options,state),refreshStepNavigation(wizard,options,state,oldIndex),refreshPagination(wizard,options,state),loadAsyncContent(wizard,options,state),function(wizard,options,state,index,oldIndex,doneCallback){var stepContents=wizard.find(".content > .body"),effect=getValidEnumValue(transitionEffect,options.transitionEffect),effectSpeed=options.transitionEffectSpeed,newStep=stepContents.eq(index),currentStep=stepContents.eq(oldIndex);switch(effect){case transitionEffect.fade:case transitionEffect.slide:var hide=effect===transitionEffect.fade?"fadeOut":"slideUp",show=effect===transitionEffect.fade?"fadeIn":"slideDown";state.transitionElement=newStep,currentStep[hide](effectSpeed,(function(){var state=getState($(this)._showAria(!1).parent().parent());state.transitionElement&&(state.transitionElement[show](effectSpeed,(function(){$(this)._showAria()})).promise().done(doneCallback),state.transitionElement=null)}));break;case transitionEffect.slideLeft:var outerWidth=currentStep.outerWidth(!0),posFadeOut=index>oldIndex?-outerWidth:outerWidth,posFadeIn=index>oldIndex?outerWidth:-outerWidth;$.when(currentStep.animate({left:posFadeOut},effectSpeed,(function(){$(this)._showAria(!1)})),newStep.css("left",posFadeIn+"px")._showAria().animate({left:0},effectSpeed)).done(doneCallback);break;default:$.when(currentStep._showAria(!1),newStep._showAria()).done(doneCallback)}}(wizard,options,state,index,oldIndex,(function(){wizard.triggerHandler("stepChanged",[index,oldIndex])}))):wizard.find(".steps li").eq(oldIndex).addClass("error"),!0}}function initialize(options){var opts=$.extend(!0,{},defaults,options);return this.each((function(){var wizard=$(this),state={currentIndex:opts.startIndex,currentStep:null,stepCount:0,transitionElement:null};wizard.data("options",opts),wizard.data("state",state),wizard.data("steps",[]),analyzeData(wizard,opts,state),function(wizard,options,state){var wrapperTemplate='<{0} class="{1}">{2}</{0}>',verticalCssClass=getValidEnumValue(stepsOrientation,options.stepsOrientation)===stepsOrientation.vertical?" vertical":"",contentWrapper=$(wrapperTemplate.format(options.contentContainerTag,"content "+options.clearFixCssClass,wizard.html())),stepsWrapper=$(wrapperTemplate.format(options.stepsContainerTag,"steps "+options.clearFixCssClass,'<ul role="tablist"></ul>')),stepTitles=contentWrapper.children(options.headerTag),stepContents=contentWrapper.children(options.bodyTag);wizard.attr("role","application").empty().append(stepsWrapper).append(contentWrapper).addClass(options.cssClass+" "+options.clearFixCssClass+verticalCssClass),stepContents.each((function(index){renderBody(wizard,state,$(this),index)})),stepTitles.each((function(index){renderTitle(wizard,options,state,$(this),index)})),refreshStepNavigation(wizard,options,state),function(wizard,options,state){if(options.enablePagination){var pagination='<{0} class="actions no-ajaxy {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>',buttonTemplate='<li class="button_{0} no-ajaxy"><a href="#{0}" role="menuitem" class="no-ajaxy">{1}</a></li>',buttons="";options.forceMoveForward||(buttons+=buttonTemplate.format("previous",options.labels.previous)),buttons+=buttonTemplate.format("next",options.labels.next),options.enableFinishButton&&(buttons+=buttonTemplate.format("finish",options.labels.finish)),options.enableCancelButton&&(buttons+=buttonTemplate.format("cancel",options.labels.cancel)),wizard.append(pagination.format(options.actionContainerTag,options.clearFixCssClass,options.labels.pagination,buttons)),refreshPagination(wizard,options,state),loadAsyncContent(wizard,options,state)}}(wizard,options,state)}(wizard,opts,state),function(wizard,options){var eventNamespace=getEventNamespace(wizard);wizard.bind("canceled"+eventNamespace,options.onCanceled),wizard.bind("contentLoaded"+eventNamespace,options.onContentLoaded),wizard.bind("finishing"+eventNamespace,options.onFinishing),wizard.bind("finished"+eventNamespace,options.onFinished),wizard.bind("init"+eventNamespace,options.onInit),wizard.bind("stepChanging"+eventNamespace,options.onStepChanging),wizard.bind("stepChanged"+eventNamespace,options.onStepChanged),options.enableKeyNavigation&&wizard.bind("keyup"+eventNamespace,keyUpHandler);wizard.find(".actions a").bind("click"+eventNamespace,paginationClickHandler)}(wizard,opts),opts.autoFocus&&0===_uniqueId&&getStepAnchor(wizard,opts.startIndex).focus(),wizard.triggerHandler("init",[opts.startIndex])}))}function insertStep(wizard,options,state,index,step){(index<0||index>state.stepCount)&&throwError("Index out of range."),function(wizard,index,step){getSteps(wizard).splice(index,0,step)}(wizard,index,step=$.extend({},stepModel,step)),state.currentIndex!==state.stepCount&&state.currentIndex>=index&&(state.currentIndex++,saveCurrentStateToCookie(wizard,options,state)),state.stepCount++;var contentContainer=wizard.find(".content"),header=$("<{0}>{1}</{0}>".format(options.headerTag,step.title)),body=$("<{0}></{0}>".format(options.bodyTag));return null!=step.contentMode&&step.contentMode!==contentMode.html||body.html(step.content),0===index?contentContainer.prepend(body).prepend(header):getStepPanel(wizard,index-1).after(body).after(header),renderBody(wizard,state,body,index),renderTitle(wizard,options,state,header,index),refreshSteps(wizard,options,state,index),index===state.currentIndex&&refreshStepNavigation(wizard,options,state),refreshPagination(wizard,options,state),wizard}function keyUpHandler(event){var wizard=$(this),options=getOptions(wizard),state=getState(wizard);if(options.suppressPaginationOnFocus&&wizard.find(":focus").is(":input"))return event.preventDefault(),!1;var keyCodes_left=37,keyCodes_right=39;event.keyCode===keyCodes_left?(event.preventDefault(),goToPreviousStep(wizard,options,state)):event.keyCode===keyCodes_right&&(event.preventDefault(),goToNextStep(wizard,options,state))}function loadAsyncContent(wizard,options,state){if(state.stepCount>0){var currentIndex=state.currentIndex,currentStep=getStep(wizard,currentIndex);if(!options.enableContentCache||!currentStep.contentLoaded)switch(getValidEnumValue(contentMode,currentStep.contentMode)){case contentMode.iframe:wizard.find(".content > .body").eq(state.currentIndex).empty().html('<iframe src="'+currentStep.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case contentMode.async:var currentStepContent=getStepPanel(wizard,currentIndex)._aria("busy","true").empty().append(renderTemplate(options.loadingTemplate,{text:options.labels.loading}));$.ajax({url:currentStep.contentUrl,cache:!1}).done((function(data){currentStepContent.empty().html(data)._aria("busy","false").data("loaded","1"),wizard.triggerHandler("contentLoaded",[currentIndex])}))}}}function paginationClick(wizard,options,state,index){var oldIndex=state.currentIndex;if(index>=0&&index<state.stepCount&&!(options.forceMoveForward&&index<state.currentIndex)){var anchor=getStepAnchor(wizard,index),parent=anchor.parent(),isDisabled=parent.hasClass("disabled");return parent._enableAria(),anchor.click(),oldIndex!==state.currentIndex||!isDisabled||(parent._enableAria(!1),!1)}return!1}function paginationClickHandler(event){event.preventDefault();var anchor=$(this),wizard=anchor.parent().parent().parent().parent(),options=getOptions(wizard),state=getState(wizard),href=anchor.attr("href");if(anchor.parent().hasClass("disabled"))return!1;switch(href.substring(href.lastIndexOf("#")+1)){case"cancel":!function(wizard){wizard.triggerHandler("canceled")}(wizard);break;case"finish":finishStep(wizard,state);break;case"next":goToNextStep(wizard,options,state);break;case"previous":goToPreviousStep(wizard,options,state)}return!1}function refreshPagination(wizard,options,state){if(options.enablePagination){var finish=wizard.find(".actions a[href$='#finish']").parent(),next=wizard.find(".actions a[href$='#next']").parent();if(!options.forceMoveForward)wizard.find(".actions a[href$='#previous']").parent()._enableAria(state.currentIndex>0);options.enableFinishButton&&options.showFinishButtonAlways?(finish._enableAria(state.stepCount>0),next._enableAria(state.stepCount>1&&state.stepCount>state.currentIndex+1)):(finish._showAria(options.enableFinishButton&&state.stepCount===state.currentIndex+1),next._showAria(0===state.stepCount||state.stepCount>state.currentIndex+1)._enableAria(state.stepCount>state.currentIndex+1||!options.enableFinishButton))}}function refreshStepNavigation(wizard,options,state,oldIndex){var currentOrNewStepAnchor=getStepAnchor(wizard,state.currentIndex),currentInfo=$('<span class="current-info audible">'+options.labels.current+" </span>"),stepTitles=wizard.find(".content > .title");if(null!=oldIndex){var oldStepAnchor=getStepAnchor(wizard,oldIndex);oldStepAnchor.parent().addClass("done").removeClass("error")._selectAria(!1),stepTitles.eq(oldIndex).removeClass("current").next(".body").removeClass("current"),currentInfo=oldStepAnchor.find(".current-info"),currentOrNewStepAnchor.focus()}currentOrNewStepAnchor.prepend(currentInfo).parent()._selectAria().removeClass("done")._enableAria(),stepTitles.eq(state.currentIndex).addClass("current").next(".body").addClass("current")}function refreshSteps(wizard,options,state,index){for(var uniqueId=getUniqueId(wizard),i=index;i<state.stepCount;i++){var uniqueStepId=uniqueId+"-t-"+i,uniqueBodyId=uniqueId+"-p-"+i,uniqueHeaderId=uniqueId+"-h-"+i,title=wizard.find(".title").eq(i)._id(uniqueHeaderId);wizard.find(".steps a").eq(i)._id(uniqueStepId)._aria("controls",uniqueBodyId).attr("href","#"+uniqueHeaderId).html(renderTemplate(options.titleTemplate,{index:i+1,title:title.html()})),wizard.find(".body").eq(i)._id(uniqueBodyId)._aria("labelledby",uniqueHeaderId)}}function removeStep(wizard,options,state,index){return!(index<0||index>=state.stepCount||state.currentIndex===index)&&(function(wizard,index){getSteps(wizard).splice(index,1)}(wizard,index),state.currentIndex>index&&(state.currentIndex--,saveCurrentStateToCookie(wizard,options,state)),state.stepCount--,function(wizard,index){var uniqueId=getUniqueId(wizard);return wizard.find("#"+uniqueId+"-h-"+index)}(wizard,index).remove(),getStepPanel(wizard,index).remove(),getStepAnchor(wizard,index).parent().remove(),0===index&&wizard.find(".steps li").first().addClass("first"),index===state.stepCount&&wizard.find(".steps li").eq(index).addClass("last"),refreshSteps(wizard,options,state,index),refreshPagination(wizard,options,state),!0)}function renderBody(wizard,state,body,index){var uniqueId=getUniqueId(wizard),uniqueBodyId=uniqueId+"-p-"+index,uniqueHeaderId=uniqueId+"-h-"+index;body._id(uniqueBodyId).attr("role","tabpanel")._aria("labelledby",uniqueHeaderId).addClass("body step-"+index).attr("data-step",index)._showAria(state.currentIndex===index)}function renderTemplate(template,substitutes){for(var matches=template.match(/#([a-z]*)#/gi),i=0;i<matches.length;i++){var match=matches[i],key=match.substring(1,match.length-1);undefined===substitutes[key]&&throwError("The key '{0}' does not exist in the substitute collection!",key),template=template.replace(match,substitutes[key])}return template}function renderTitle(wizard,options,state,header,index){var uniqueId=getUniqueId(wizard),uniqueStepId=uniqueId+"-t-"+index,uniqueBodyId=uniqueId+"-p-"+index,uniqueHeaderId=uniqueId+"-h-"+index,stepCollection=wizard.find(".steps > ul"),title=renderTemplate(options.titleTemplate,{index:index+1,title:header.html()}),stepItem=$('<li role="tab"><a id="'+uniqueStepId+'" href="#'+uniqueHeaderId+'" aria-controls="'+uniqueBodyId+'" class="no-ajaxy">'+title+"</a></li>");stepItem._enableAria(options.enableAllSteps||state.currentIndex>index),state.currentIndex>index&&stepItem.addClass("done"),header._id(uniqueHeaderId).attr("tabindex","-1").addClass("title"),0===index?stepCollection.prepend(stepItem):stepCollection.find("li").eq(index-1).after(stepItem),0===index&&stepCollection.find("li").removeClass("first").eq(index).addClass("first"),index===state.stepCount-1&&stepCollection.find("li").removeClass("last").eq(index).addClass("last"),stepItem.children("a").bind("click"+getEventNamespace(wizard),stepClickHandler)}function saveCurrentStateToCookie(wizard,options,state){options.saveState&&$.cookie&&$.cookie("jQu3ry_5teps_St@te_"+getUniqueId(wizard),state.currentIndex)}function stepClickHandler(event){event.preventDefault();var anchor=$(this),wizard=anchor.parent().parent().parent().parent(),options=getOptions(wizard),state=getState(wizard),oldIndex=state.currentIndex;if(anchor.parent().is(":not(.disabled):not(.current)")){var href=anchor.attr("href");goToStep(wizard,options,state,parseInt(href.substring(href.lastIndexOf("-")+1),0))}return oldIndex===state.currentIndex&&(getStepAnchor(wizard,oldIndex).focus(),!1)}function throwError(message){throw arguments.length>1&&(message=message.format(Array.prototype.slice.call(arguments,1))),new Error(message)}function validateArgument(argumentName,argumentValue){null==argumentValue&&throwError("The argument '{0}' is null or undefined.",argumentName)}$.fn.steps=function(method){return $.fn.steps[method]?$.fn.steps[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.steps"):initialize.apply(this,arguments)},$.fn.steps.add=function(step){var state=getState(this);return insertStep(this,getOptions(this),state,state.stepCount,step)},$.fn.steps.count=function(){return getState(this).stepCount},$.fn.steps.destroy=function(){return function(wizard,options){var eventNamespace=getEventNamespace(wizard);wizard.unbind(eventNamespace).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(eventNamespace),wizard.removeClass(options.clearFixCssClass+" vertical");var contents=wizard.find(".content > *");contents.removeData("loaded").removeData("mode").removeData("url"),contents.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),wizard.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var wizardSubstitute=$('<{0} class="{1}"></{0}>'.format(wizard.get(0).tagName,wizard.attr("class"))),wizardId=wizard._id();return null!=wizardId&&""!==wizardId&&wizardSubstitute._id(wizardId),wizardSubstitute.html(wizard.find(".content").html()),wizard.after(wizardSubstitute),wizard.remove(),wizardSubstitute}(this,getOptions(this))},$.fn.steps.finish=function(){finishStep(this,getState(this))},$.fn.steps.getCurrentIndex=function(){return getState(this).currentIndex},$.fn.steps.getCurrentStep=function(){return getStep(this,getState(this).currentIndex)},$.fn.steps.getStep=function(index){return getStep(this,index)},$.fn.steps.insert=function(index,step){return insertStep(this,getOptions(this),getState(this),index,step)},$.fn.steps.next=function(){return goToNextStep(this,getOptions(this),getState(this))},$.fn.steps.previous=function(){return goToPreviousStep(this,getOptions(this),getState(this))},$.fn.steps.remove=function(index){return removeStep(this,getOptions(this),getState(this),index)},$.fn.steps.setStep=function(index){return goToStep(this,getOptions(this),getState(this),index)},$.fn.steps.skip=function(count){throw new Error("Not yet implemented!")};var contentMode=$.fn.steps.contentMode={html:0,iframe:1,async:2},stepsOrientation=$.fn.steps.stepsOrientation={horizontal:0,vertical:1},transitionEffect=$.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},stepModel=$.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:contentMode.html,contentLoaded:!1},defaults=$.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:stepsOrientation.horizontal,titleTemplate:"<span class=\"number\">#index#</span> <span class='title'>#title#</span>",loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:transitionEffect.none,transitionEffectSpeed:280,onStepChanging:function(event,currentIndex,newIndex){return!0},onStepChanged:function(event,currentIndex,priorIndex){},onCanceled:function(event){},onFinishing:function(event,currentIndex){return!0},onFinished:function(event,currentIndex){},onContentLoaded:function(event,currentIndex){},onInit:function(event,currentIndex){},labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next <i class='material-icons'>&#xE315;</i>",previous:"<i class='material-icons'>&#xE314;</i> Previous",loading:"Loading ..."}}}(__webpack_require__(0))},720:()=>{!function(){"use strict";var codeMirrorEditor=function(instance){if(!instance.getWrapperElement)throw"Invalid CodeMirror object given";this.codeMirror=instance};codeMirrorEditor.prototype.getValue=function(){return this.codeMirror.getValue()},codeMirrorEditor.prototype.insertValue=function(val){this.codeMirror.replaceSelection(val)},codeMirrorEditor.prototype.setValue=function(val){var cursor=this.codeMirror.getCursor();this.codeMirror.setValue(val),this.codeMirror.setCursor(cursor)},codeMirrorEditor.attach=function(codeMirror,options){options=options||{};var editor=new codeMirrorEditor(codeMirror),inlineattach=new inlineAttachment(options,editor);codeMirror.getWrapperElement().addEventListener("paste",(function(e){inlineattach.onPaste(e)}),!1),codeMirror.setOption("onDragEvent",(function(data,e){if("drop"===e.type)return e.stopPropagation(),e.preventDefault(),inlineattach.onDrop(e)}))};var codeMirrorEditor4=function(instance){codeMirrorEditor.call(this,instance)};codeMirrorEditor4.attach=function(codeMirror,options){options=options||{};var editor=new codeMirrorEditor(codeMirror),inlineattach=new inlineAttachment(options,editor);codeMirror.getWrapperElement().addEventListener("paste",(function(e){inlineattach.onPaste(e)}),!1),codeMirror.on("drop",(function(data,e){return!!inlineattach.onDrop(e)&&(e.stopPropagation(),e.preventDefault(),!0)}))},inlineAttachment.editors.codemirror4=codeMirrorEditor4}()},279:(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=function o(a,l,s){function c(t,e){if(!l[t]){if(!a[t]){if(u)return u(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=l[t]={exports:{}};a[t][0].call(i.exports,(function(e){return c(a[t][1][e]||e)}),i,i.exports,o,a,l,s)}return l[t].exports}for(var u=void 0,e=0;e<s.length;e++)c(s[e]);return c}({1:[function(e,t,n){"use strict";n.byteLength=function(e){var t=d(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){for(var t,n=d(e),r=n[0],i=n[1],o=new f(3*(r+(u=i))/4-u),a=0,l=0<i?r-4:r,s=0;s<l;s+=4)t=h[e.charCodeAt(s)]<<18|h[e.charCodeAt(s+1)]<<12|h[e.charCodeAt(s+2)]<<6|h[e.charCodeAt(s+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=255&t;var u;return 2===i&&(t=h[e.charCodeAt(s)]<<2|h[e.charCodeAt(s+1)]>>4,o[a++]=255&t),1===i&&(t=h[e.charCodeAt(s)]<<10|h[e.charCodeAt(s+1)]<<4|h[e.charCodeAt(s+2)]>>2,o[a++]=t>>8&255,o[a++]=255&t),o},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(s(e,o,a<o+16383?a:o+16383));return 1===r?(t=e[n-1],i.push(l[t>>2]+l[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")),i.join("")};for(var l=[],h=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)l[i]=r[i],h[r.charCodeAt(i)]=i;function d(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function s(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(l[(i=r)>>18&63]+l[i>>12&63]+l[i>>6&63]+l[63&i]);return o.join("")}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){"use strict";var r=e("base64-js"),o=e("ieee754");n.Buffer=h,n.SlowBuffer=function(e){return+e!=e&&(e=0),h.alloc(+e)},n.INSPECT_MAX_BYTES=50;var i=2147483647;function a(e){if(i<e)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=h.prototype,t}function h(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(e)}return l(e,t,n)}function l(e,t,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return B(e)||e&&B(e.buffer)?function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=h.prototype,r}(e,t,n):"string"==typeof e?function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!h.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|d(e,t),r=a(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t):function(e){if(h.isBuffer(e)){var t=0|f(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(e){if(ArrayBuffer.isView(e)||"length"in e)return"number"!=typeof e.length||W(e.length)?a(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e){return s(e),a(e<0?0:0|f(e))}function u(e){for(var t=e.length<0?0:0|f(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e){if(i<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function d(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return D(e).length;t=(""+t).toLowerCase(),r=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),W(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=h.from(t,r)),h.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,a=1,l=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;l/=a=2,s/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(o=n;o<l;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===s)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(l<n+s&&(n=l-s),o=n;0<=o;o--){for(var h=!0,f=0;f<s;f++)if(c(e,o+f)!==c(t,f)){h=!1;break}if(h)return o}return-1}function v(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?i<(r=Number(r))&&(r=i):r=i;var o=t.length;o/2<r&&(r=o/2);for(var a=0;a<r;++a){var l=parseInt(t.substr(2*a,2),16);if(W(l))return a;e[n+a]=l}return a}function y(e,t,n,r){return R(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function b(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,l,s,c=e[i],u=null,h=239<c?4:223<c?3:191<c?2:1;if(i+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&127<(s=(31&c)<<6|63&o)&&(u=s);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(s=(15&c)<<12|(63&o)<<6|63&a)&&(s<55296||57343<s)&&(u=s);break;case 4:o=e[i+1],a=e[i+2],l=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&l)&&65535<(s=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&l)&&s<1114112&&(u=s)}null===u?(u=65533,h=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=h}return function(e){var t=e.length;if(t<=w)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=w));return n}(r)}n.kMaxLength=i,(h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{get:function(){if(this instanceof h)return this.buffer}}),Object.defineProperty(h.prototype,"offset",{get:function(){if(this instanceof h)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(e,t,n){return l(e,t,n)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(e,t,n){return i=t,o=n,s(r=e),r<=0?a(r):void 0!==i?"string"==typeof o?a(r).fill(i,o):a(r).fill(i):a(r);var r,i,o},h.allocUnsafe=function(e){return c(e)},h.allocUnsafeSlow=function(e){return c(e)},h.isBuffer=function(e){return null!=e&&!0===e._isBuffer},h.compare=function(e,t){if(!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var r=h.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(ArrayBuffer.isView(o)&&(o=h.from(o)),!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},h.byteLength=d,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?b(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return b(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return S(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},h.prototype.compare=function(e,t,n,r,i){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),l=Math.min(o,a),s=this.slice(r,i),c=e.slice(t,n),u=0;u<l;++u)if(s[u]!==c[u]){o=s[u],a=c[u];break}return o<a?-1:a<o?1:0},h.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},h.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},h.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},h.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o,a,l,s,c,u,h,f,d,p=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return f=t,d=n,R(D(e,(h=this).length-f),h,f,d);case"ascii":case"latin1":case"binary":return y(this,e,t,n);case"base64":return s=this,c=t,u=n,R(H(e),s,c,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=t,l=n,R(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,(o=this).length-a),o,a,l);default:if(p)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function S(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=I(e[o]);return i}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,o){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function A(e,t,n,r,i){return t=+t,n>>>=0,i||N(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function E(e,t,n,r,i){return t=+t,n>>>=0,i||N(e,0,n,8),o.write(e,t,n,r,52,8),n+8}h.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=h.prototype,r},h.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},h.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},h.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},h.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},h.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),o.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),o.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),o.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),o.read(this,e,!1,52,8)},h.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},h.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},h.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=0,a=1,l=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===l&&0!==this[t+o-1]&&(l=1),this[t+o]=(e/a>>0)-l&255;return t+n},h.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=n-1,a=1,l=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)e<0&&0===l&&0!==this[t+o+1]&&(l=1),this[t+o]=(e/a>>0)-l&255;return t+n},h.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},h.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},h.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},h.prototype.writeDoubleLE=function(e,t,n){return E(this,e,t,!0,n)},h.prototype.writeDoubleBE=function(e,t,n){return E(this,e,t,!1,n)},h.prototype.copy=function(e,t,n,r){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=i-1;0<=o;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},h.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=h.isBuffer(e)?e:new h(e,r),l=a.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%l]}return this};var O=/[^+/0-9A-Za-z-_]/g;function I(e){return e<16?"0"+e.toString(16):e.toString(16)}function D(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function R(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function B(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function W(e){return e!=e}},{"base64-js":1,ieee754:15}],4:[function(e,t,n){"use strict";var l=e("typo-js");function s(a){"function"==typeof(a=a||{}).codeMirrorInstance&&"function"==typeof a.codeMirrorInstance.defineMode?(String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),a.codeMirrorInstance.defineMode("spell-checker",(function(e){if(!s.aff_loading){s.aff_loading=!0;var t=new XMLHttpRequest;t.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),t.onload=function(){4===t.readyState&&200===t.status&&(s.aff_data=t.responseText,2==++s.num_loaded&&(s.typo=new l("en_US",s.aff_data,s.dic_data,{platform:"any"})))},t.send(null)}if(!s.dic_loading){s.dic_loading=!0;var n=new XMLHttpRequest;n.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),n.onload=function(){4===n.readyState&&200===n.status&&(s.dic_data=n.responseText,2==++s.num_loaded&&(s.typo=new l("en_US",s.aff_data,s.dic_data,{platform:"any"})))},n.send(null)}var r='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',i={token:function(e){var t=e.peek(),n="";if(r.includes(t))return e.next(),null;for(;null!=(t=e.peek())&&!r.includes(t);)n+=t,e.next();return s.typo&&!s.typo.check(n)?"spell-error":null}},o=a.codeMirrorInstance.getMode(e,e.backdrop||"text/plain");return a.codeMirrorInstance.overlayMode(o,i,!0)}))):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}s.num_loaded=0,s.aff_loading=!1,s.dic_loading=!1,s.aff_data="",s.dic_data="",t.exports=s},{"typo-js":17}],5:[function(e,t,n){!function(o){"use strict";o.defineOption("fullScreen",!1,(function(e,t,n){var r,i;n==o.Init&&(n=!1),!n!=!t&&(t?(i=(r=e).getWrapperElement(),r.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:i.style.width,height:i.style.height},i.style.width="",i.style.height="auto",i.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",r.refresh()):function(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var n=e.state.fullScreenRestore;t.style.width=n.width,t.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),e.refresh()}(e))}))}("object"==typeof n&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],6:[function(e,t,n){!function(o){function a(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function r(e){a(e);var t=e.state.placeholder=document.createElement("pre");t.style.cssText="height: 0; overflow: visible",t.style.direction=e.getOption("direction"),t.className="CodeMirror-placeholder";var n=e.getOption("placeholder");"string"==typeof n&&(n=document.createTextNode(n)),t.appendChild(n),e.display.lineSpace.insertBefore(t,e.display.lineSpace.firstChild)}function l(e){i(e)&&r(e)}function s(e){var t=e.getWrapperElement(),n=i(e);t.className=t.className.replace(" CodeMirror-empty","")+(n?" CodeMirror-empty":""),n?r(e):a(e)}function i(e){return 1===e.lineCount()&&""===e.getLine(0)}o.defineOption("placeholder","",(function(e,t,n){var r=n&&n!=o.Init;if(t&&!r)e.on("blur",l),e.on("change",s),e.on("swapDoc",s),s(e);else if(!t&&r){e.off("blur",l),e.off("change",s),e.off("swapDoc",s),a(e);var i=e.getWrapperElement();i.className=i.className.replace(" CodeMirror-empty","")}t&&!e.hasFocus()&&l(e)}))}("object"==typeof n&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],7:[function(e,t,n){!function(m){"use strict";var g=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,v=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,y=/[*+-]\s/;function x(e,t){var n=t.line,r=0,i=0,o=g.exec(e.getLine(n)),a=o[1];do{var l=n+(r+=1),s=e.getLine(l),c=g.exec(s);if(c){var u=c[1],h=parseInt(o[3],10)+r-i,f=parseInt(c[3],10),d=f;if(a!==u||isNaN(f)){if(a.length>u.length)return;if(a.length<u.length&&1===r)return;i+=1}else h===f&&(d=f+1),f<h&&(d=h+1),e.replaceRange(s.replace(g,u+d+c[4]+c[5]),{line:l,ch:0},{line:l,ch:s.length})}}while(c)}m.commands.newlineAndIndentContinueMarkdownList=function(e){if(e.getOption("disableInput"))return m.Pass;for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var i=t[r].head,o=e.getStateAfter(i.line),a=!1!==o.list,l=0!==o.quote,s=e.getLine(i.line),c=g.exec(s),u=/^\s*$/.test(s.slice(0,i.ch));if(!t[r].empty()||!a&&!l||!c||u)return void e.execCommand("newlineAndIndent");if(v.test(s))/>\s*$/.test(s)||e.replaceRange("",{line:i.line,ch:0},{line:i.line,ch:i.ch+1}),n[r]="\n";else{var h=c[1],f=c[5],d=!(y.test(c[2])||0<=c[2].indexOf(">")),p=d?parseInt(c[3],10)+1+c[4]:c[2].replace("x"," ");n[r]="\n"+h+p+f,d&&x(e,i)}}e.replaceSelections(n)}}("object"==typeof n&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],8:[function(e,t,n){!function(t){"use strict";t.overlayMode=function(r,i,o){return{startState:function(){return{base:t.startState(r),overlay:t.startState(i),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(e){return{base:t.copyState(r,e.base),overlay:t.copyState(i,e.overlay),basePos:e.basePos,baseCur:null,overlayPos:e.overlayPos,overlayCur:null}},token:function(e,t){return(e!=t.streamSeen||Math.min(t.basePos,t.overlayPos)<e.start)&&(t.streamSeen=e,t.basePos=t.overlayPos=e.start),e.start==t.basePos&&(t.baseCur=r.token(e,t.base),t.basePos=e.pos),e.start==t.overlayPos&&(e.pos=e.start,t.overlayCur=i.token(e,t.overlay),t.overlayPos=e.pos),e.pos=Math.min(t.basePos,t.overlayPos),null==t.overlayCur?t.baseCur:null!=t.baseCur&&t.overlay.combineTokens||o&&null==t.overlay.combineTokens?t.baseCur+" "+t.overlayCur:t.overlayCur},indent:r.indent&&function(e,t){return r.indent(e.base,t)},electricChars:r.electricChars,innerMode:function(e){return{state:e.base,mode:r}},blankLine:function(e){var t,n;return r.blankLine&&(t=r.blankLine(e.base)),i.blankLine&&(n=i.blankLine(e.overlay)),null==n?t:o&&null!=t?t+" "+n:n}}}}("object"==typeof n&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],9:[function(e,t,n){!function(i){"use strict";function o(e){e.state.markedSelection&&e.operation((function(){!function(e){if(!e.somethingSelected())return s(e);if(1<e.listSelections().length)return c(e);var t=e.getCursor("start"),n=e.getCursor("end"),r=e.state.markedSelection;if(!r.length)return l(e,t,n);var i=r[0].find(),o=r[r.length-1].find();if(!i||!o||n.line-t.line<=f||0<=p(t,o.to)||p(n,i.from)<=0)return c(e);for(;0<p(t,i.from);)r.shift().clear(),i=r[0].find();for(p(t,i.from)<0&&(i.to.line-t.line<f?(r.shift().clear(),l(e,t,i.to,0)):l(e,t,i.from,0));p(n,o.to)<0;)r.pop().clear(),o=r[r.length-1].find();0<p(n,o.to)&&(n.line-o.from.line<f?(r.pop().clear(),l(e,o.from,n)):l(e,o.to,n))}(e)}))}function a(e){e.state.markedSelection&&e.state.markedSelection.length&&e.operation((function(){s(e)}))}i.defineOption("styleSelectedText",!1,(function(e,t,n){var r=n&&n!=i.Init;t&&!r?(e.state.markedSelection=[],e.state.markedSelectionStyle="string"==typeof t?t:"CodeMirror-selectedtext",c(e),e.on("cursorActivity",o),e.on("change",a)):!t&&r&&(e.off("cursorActivity",o),e.off("change",a),s(e),e.state.markedSelection=e.state.markedSelectionStyle=null)}));var f=8,d=i.Pos,p=i.cmpPos;function l(e,t,n,r){if(0!=p(t,n))for(var i=e.state.markedSelection,o=e.state.markedSelectionStyle,a=t.line;;){var l=a==t.line?t:d(a,0),s=a+f,c=s>=n.line,u=c?n:d(s,0),h=e.markText(l,u,{className:o});if(null==r?i.push(h):i.splice(r++,0,h),c)break;a=s}}function s(e){for(var t=e.state.markedSelection,n=0;n<t.length;++n)t[n].clear();t.length=0}function c(e){s(e);for(var t=e.listSelections(),n=0;n<t.length;n++)l(e,t[n].from(),t[n].to())}}("object"==typeof n&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],10:[function(e,t,n){var r,i;r=this,i=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,m=/gecko\/\d/i.test(e),n=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),i=/Edge\/(\d+)/.exec(e),w=n||r||i,k=w&&(n?document.documentMode||6:+(i||r)[1]),x=!i&&/WebKit\//.test(e),o=x&&/Qt\/\d+\.\d+/.test(e),a=!i&&/Chrome\//.test(e),g=/Opera\//.test(e),s=/Apple Computer/.test(navigator.vendor),l=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),c=/PhantomJS/.test(e),u=!i&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),h=/Android/.test(e),f=u||h||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=u||/Mac/.test(t),d=/\bCrOS\b/.test(e),p=/win/i.test(t),v=g&&e.match(/Version\/(\d*\.\d*)/);v&&(v=Number(v[1])),v&&15<=v&&(x=!(g=!1));var y=b&&(o||g&&(null==v||v<12.11)),S=m||w&&9<=k;function C(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var L,T=function(e,t){var n=e.className,r=C(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function M(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function N(e,t){return M(e).appendChild(t)}function E(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function A(e,t,n,r){var i=E(e,t,n,r);return i.setAttribute("role","presentation"),i}function O(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function I(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function D(e,t){var n=e.className;C(t).test(n)||(e.className+=(n?" ":"")+t)}function H(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!C(n[r]).test(t)&&(t+=" "+n[r]);return t}L=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var R=function(e){e.select()};function B(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function W(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function F(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,a=i||0;;){var l=e.indexOf("\t",o);if(l<0||t<=l)return a+(t-o);a+=l-o,a+=n-a%n,o=l+1}}u?R=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:w&&(R=function(e){try{e.select()}catch(e){}});var z=function(){this.id=null};function P(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}z.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var _=30,j={toString:function(){return"CodeMirror.Pass"}},q={scroll:!1},U={origin:"*mouse"},$={origin:"+move"};function G(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||t<=i+a)return r+Math.min(a,t-i);if(i+=o-r,r=o+1,t<=(i+=n-i%n))return r}}var V=[""];function X(e){for(;V.length<=e;)V.push(K(V)+" ");return V[e]}function K(e){return e[e.length-1]}function Y(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Z(){}function J(e,t){var n;return Object.create?n=Object.create(e):(Z.prototype=e,n=new Z),t&&W(t,n),n}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(e){return/\w/.test(e)||""<e&&(e.toUpperCase()!=e.toLowerCase()||Q.test(e))}function te(e,t){return t?!!(-1<t.source.indexOf("\\w")&&ee(e))||t.test(e):ee(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return 768<=e.charCodeAt(0)&&re.test(e)}function oe(e,t,n){for(;(n<0?0<t:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function ae(e,t,n){for(var r=n<t?-1:1;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+r}}function le(e,t,n){var r=this;this.input=n,r.scrollbarFiller=E("div",null,"CodeMirror-scrollbar-filler"),r.scrollbarFiller.setAttribute("cm-not-content","true"),r.gutterFiller=E("div",null,"CodeMirror-gutter-filler"),r.gutterFiller.setAttribute("cm-not-content","true"),r.lineDiv=A("div",null,"CodeMirror-code"),r.selectionDiv=E("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=E("div",null,"CodeMirror-cursors"),r.measure=E("div",null,"CodeMirror-measure"),r.lineMeasure=E("div",null,"CodeMirror-measure"),r.lineSpace=A("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none");var i=A("div",[r.lineSpace],"CodeMirror-lines");r.mover=E("div",[i],null,"position: relative"),r.sizer=E("div",[r.mover],"CodeMirror-sizer"),r.sizerWidth=null,r.heightForcer=E("div",null,null,"position: absolute; height: "+_+"px; width: 1px;"),r.gutters=E("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=E("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=E("div",[r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),w&&k<8&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),x||m&&f||(r.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(r.wrapper):e(r.wrapper)),r.viewFrom=r.viewTo=t.first,r.reportedViewFrom=r.reportedViewTo=t.first,r.view=[],r.renderedView=null,r.externalMeasured=null,r.viewOffset=0,r.lastWrapHeight=r.lastWrapWidth=0,r.updateLineNumbers=null,r.nativeBarWidth=r.barHeight=r.barWidth=0,r.scrollbarsClipped=!1,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.alignWidgets=!1,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null,r.activeTouch=null,n.init(r)}function se(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function ce(e,n,r){var i=[],o=n.line;return e.iter(n.line,r.line+1,(function(e){var t=e.text;o==r.line&&(t=t.slice(0,r.ch)),o==n.line&&(t=t.slice(n.ch)),i.push(t),++o})),i}function ue(e,t,n){var r=[];return e.iter(t,n,(function(e){r.push(e.text)})),r}function he(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function fe(e){if(null==e.parent)return null;for(var t=e.parent,n=P(t.lines,e),r=t.parent;r;r=(t=r).parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function de(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var l=e.lines[a].height;if(t<l)break;t-=l}return n+a}function pe(e,t){return t>=e.first&&t<e.first+e.size}function me(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ge(e,t,n){if(void 0===n&&(n=null),!(this instanceof ge))return new ge(e,t,n);this.line=e,this.ch=t,this.sticky=n}function ve(e,t){return e.line-t.line||e.ch-t.ch}function ye(e,t){return e.sticky==t.sticky&&0==ve(e,t)}function xe(e){return ge(e.line,e.ch)}function be(e,t){return ve(e,t)<0?t:e}function we(e,t){return ve(e,t)<0?e:t}function ke(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Se(e,t){if(t.line<e.first)return ge(e.first,0);var n,r,i,o=e.first+e.size-1;return t.line>o?ge(o,se(e,o).text.length):(r=se(e,(n=t).line).text.length,null==(i=n.ch)||r<i?ge(n.line,r):i<0?ge(n.line,0):n)}function Ce(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=Se(e,t[r]);return n}var Le=!1,Te=!1;function Me(e,t,n){this.marker=e,this.from=t,this.to=n}function Ne(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Ae(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Ee(e,t){if(t.full)return null;var n=pe(e,t.from.line)&&se(e,t.from.line).markedSpans,r=pe(e,t.to.line)&&se(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==ve(t.from,t.to),l=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Me(a,o.from,l?null:o.to))}}return r}(n,i,a),s=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Me(a,l?null:o.from-t,null==o.to?null:o.to-t))}}return r}(r,o,a),c=1==t.text.length,u=K(t.text).length+(c?i:0);if(l)for(var h=0;h<l.length;++h){var f=l[h];if(null==f.to){var d=Ne(s,f.marker);d?c&&(f.to=null==d.to?null:d.to+u):f.to=i}}if(s)for(var p=0;p<s.length;++p){var m=s[p];null!=m.to&&(m.to+=u),null==m.from?Ne(l,m.marker)||(m.from=u,c&&(l||(l=[])).push(m)):(m.from+=u,c&&(l||(l=[])).push(m))}l&&(l=Oe(l)),s&&s!=l&&(s=Oe(s));var g=[l];if(!c){var v,y=t.text.length-2;if(0<y&&l)for(var x=0;x<l.length;++x)null==l[x].to&&(v||(v=[])).push(new Me(l[x].marker,null,null));for(var b=0;b<y;++b)g.push(v);g.push(s)}return g}function Oe(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ie(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function De(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function He(e){return e.inclusiveLeft?-1:0}function Re(e){return e.inclusiveRight?1:0}function Be(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=ve(r.from,i.from)||He(e)-He(t);return o?-o:ve(r.to,i.to)||Re(e)-Re(t)||t.id-e.id}function We(e,t){var n,r=Te&&e.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||Be(n,i.marker)<0)&&(n=i.marker);return n}function Fe(e){return We(e,!0)}function ze(e){return We(e,!1)}function Pe(e,t){var n,r=Te&&e.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||Be(n,o.marker)<0)&&(n=o.marker)}return n}function _e(e,t,n,r,i){var o=se(e,t),a=Te&&o.markedSpans;if(a)for(var l=0;l<a.length;++l){var s=a[l];if(s.marker.collapsed){var c=s.marker.find(0),u=ve(c.from,n)||He(s.marker)-He(i),h=ve(c.to,r)||Re(s.marker)-Re(i);if(!(0<=u&&h<=0||u<=0&&0<=h)&&(u<=0&&(s.marker.inclusiveRight&&i.inclusiveLeft?0<=ve(c.to,n):0<ve(c.to,n))||0<=u&&(s.marker.inclusiveRight&&i.inclusiveLeft?ve(c.from,r)<=0:ve(c.from,r)<0)))return!0}}}function je(e){for(var t;t=Fe(e);)e=t.find(-1,!0).line;return e}function qe(e,t){var n=se(e,t),r=je(n);return n==r?t:fe(r)}function Ue(e,t){if(t>e.lastLine())return t;var n,r=se(e,t);if(!$e(e,r))return t;for(;n=ze(r);)r=n.find(1,!0).line;return fe(r)+1}function $e(e,t){var n=Te&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Ge(e,t,r))return!0}}function Ge(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return Ge(e,r.line,Ne(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Ge(e,t,i))return!0}function Ve(e){for(var t=0,n=(e=je(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var l=o.children[a];if(l==n)break;t+=l.height}return t}function Xe(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Fe(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=ze(r);){var o=t.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function Ke(e){var n=e.display,t=e.doc;n.maxLine=se(t,t.first),n.maxLineLength=Xe(n.maxLine),n.maxLineChanged=!0,t.iter((function(e){var t=Xe(e);t>n.maxLineLength&&(n.maxLineLength=t,n.maxLine=e)}))}var Ye=null;function Ze(e,t,n){var r;Ye=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==n?r=i:Ye=i),o.from==t&&(o.from!=o.to&&"before"!=n?r=i:Ye=i)}return null!=r?r:Ye}var Je=function(){var W="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",F="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",z=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,P=/[stwN]/,_=/[LRr]/,j=/[Lb1n]/,q=/[1n]/;function U(e,t,n){this.level=e,this.from=t,this.to=n}return function(e,t){var n="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!z.test(e))return!1;for(var r,i=e.length,o=[],a=0;a<i;++a)o.push((r=e.charCodeAt(a))<=247?W.charAt(r):1424<=r&&r<=1524?"R":1536<=r&&r<=1785?F.charAt(r-1536):1774<=r&&r<=2220?"r":8192<=r&&r<=8203?"w":8204==r?"b":"L");for(var l=0,s=n;l<i;++l){var c=o[l];"m"==c?o[l]=s:s=c}for(var u=0,h=n;u<i;++u){var f=o[u];"1"==f&&"r"==h?o[u]="n":_.test(f)&&"r"==(h=f)&&(o[u]="R")}for(var d=1,p=o[0];d<i-1;++d){var m=o[d];"+"==m&&"1"==p&&"1"==o[d+1]?o[d]="1":","!=m||p!=o[d+1]||"1"!=p&&"n"!=p||(o[d]=p),p=m}for(var g=0;g<i;++g){var v=o[g];if(","==v)o[g]="N";else if("%"==v){var y=void 0;for(y=g+1;y<i&&"%"==o[y];++y);for(var x=g&&"!"==o[g-1]||y<i&&"1"==o[y]?"1":"N",b=g;b<y;++b)o[b]=x;g=y-1}}for(var w=0,k=n;w<i;++w){var S=o[w];"L"==k&&"1"==S?o[w]="L":_.test(S)&&(k=S)}for(var C=0;C<i;++C)if(P.test(o[C])){var L=void 0;for(L=C+1;L<i&&P.test(o[L]);++L);for(var T="L"==(C?o[C-1]:n),M=T==("L"==(L<i?o[L]:n))?T?"L":"R":n,N=C;N<L;++N)o[N]=M;C=L-1}for(var A,E=[],O=0;O<i;)if(j.test(o[O])){var I=O;for(++O;O<i&&j.test(o[O]);++O);E.push(new U(0,I,O))}else{var D=O,H=E.length;for(++O;O<i&&"L"!=o[O];++O);for(var R=D;R<O;)if(q.test(o[R])){D<R&&E.splice(H,0,new U(1,D,R));var B=R;for(++R;R<O&&q.test(o[R]);++R);E.splice(H,0,new U(2,B,R)),D=R}else++R;D<O&&E.splice(H,0,new U(1,D,O))}return"ltr"==t&&(1==E[0].level&&(A=e.match(/^\s+/))&&(E[0].from=A[0].length,E.unshift(new U(0,0,A[0].length))),1==K(E).level&&(A=e.match(/\s+$/))&&(K(E).to-=A[0].length,E.push(new U(0,i-A[0].length,i)))),"rtl"==t?E.reverse():E}}();function Qe(e,t){var n=e.order;return null==n&&(n=e.order=Je(e.text,t)),n}var et=[],tt=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||et).concat(n)}};function nt(e,t){return e._handlers&&e._handlers[t]||et}function rt(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=P(i,n);-1<o&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function it(e,t){var n=nt(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function ot(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),it(e,n||t.type,e,t),ht(t)||t.codemirrorIgnore}function at(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==P(n,t[r])&&n.push(t[r])}function lt(e,t){return 0<nt(e,t).length}function st(e){e.prototype.on=function(e,t){tt(this,e,t)},e.prototype.off=function(e,t){rt(this,e,t)}}function ct(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ut(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ht(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ft(e){ct(e),ut(e)}function dt(e){return e.target||e.srcElement}function pt(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var mt,gt,vt=function(){if(w&&k<9)return!1;var e=E("div");return"draggable"in e||"dragDrop"in e}();function yt(e){if(null==mt){var t=E("span","​");N(e,E("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(mt=t.offsetWidth<=1&&2<t.offsetHeight&&!(w&&k<8))}var n=mt?E("span","​"):E("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function xt(e){if(null!=gt)return gt;var t=N(e,document.createTextNode("AخA")),n=L(t,0,1).getBoundingClientRect(),r=L(t,1,2).getBoundingClientRect();return M(e),!(!n||n.left==n.right)&&(gt=r.right-n.right<3)}var bt,wt=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},kt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},St="oncopy"in(bt=E("div"))||(bt.setAttribute("oncopy","return;"),"function"==typeof bt.oncopy),Ct=null,Lt={},Tt={};function Mt(e){if("string"==typeof e&&Tt.hasOwnProperty(e))e=Tt[e];else if(e&&"string"==typeof e.name&&Tt.hasOwnProperty(e.name)){var t=Tt[e.name];"string"==typeof t&&(t={name:t}),(e=J(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Mt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Mt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Nt(e,t){t=Mt(t);var n=Lt[t.name];if(!n)return Nt(e,"text/plain");var r=n(e,t);if(At.hasOwnProperty(t.name)){var i=At[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)r[a]=t.modeProps[a];return r}var At={};function Et(e,t){W(t,At.hasOwnProperty(e)?At[e]:At[e]={})}function Ot(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function It(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Dt(e,t,n){return!e.startState||e.startState(t,n)}var Ht=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};Ht.prototype.eol=function(){return this.pos>=this.string.length},Ht.prototype.sol=function(){return this.pos==this.lineStart},Ht.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ht.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ht.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Ht.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ht.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ht.prototype.skipToEnd=function(){this.pos=this.string.length},Ht.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(-1<t)return this.pos=t,!0},Ht.prototype.backUp=function(e){this.pos-=e},Ht.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=F(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},Ht.prototype.indentation=function(){return F(this.string,null,this.tabSize)-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},Ht.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&0<r.index?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},Ht.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ht.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ht.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ht.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Rt=function(e,t){this.state=e,this.lookAhead=t},Bt=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function Wt(t,n,r,e){var s=[t.state.modeGen],i={};Gt(t,n.text,t.doc.mode,r,(function(e,t){return s.push(e,t)}),i,e);for(var c=r.state,o=function(e){r.baseTokens=s;var o=t.state.overlays[e],a=1,l=0;r.state=!0,Gt(t,n.text,o.mode,r,(function(e,t){for(var n=a;l<e;){var r=s[a];e<r&&s.splice(a,1,e,s[a+1],r),a+=2,l=Math.min(e,r)}if(t)if(o.opaque)s.splice(n,a-n,e,"overlay "+t),a=n+2;else for(;n<a;n+=2){var i=s[n+1];s[n+1]=(i?i+" ":"")+"overlay "+t}}),i),r.state=c,r.baseTokens=null,r.baseTokenPos=1},a=0;a<t.state.overlays.length;++a)o(a);return{styles:s,classes:i.bgClass||i.textClass?i:null}}function Ft(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=zt(e,fe(t)),i=t.text.length>e.options.maxHighlightLength&&Ot(e.doc.mode,r.state),o=Wt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function zt(n,r,e){var t=n.doc,i=n.display;if(!t.mode.startState)return new Bt(t,!0,r);var o=function(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),l=t;a<l;--l){if(l<=o.first)return o.first;var s=se(o,l-1),c=s.stateAfter;if(c&&(!n||l+(c instanceof Rt?c.lookAhead:0)<=o.modeFrontier))return l;var u=F(s.text,null,e.options.tabSize);(null==i||u<r)&&(i=l-1,r=u)}return i}(n,r,e),a=o>t.first&&se(t,o-1).stateAfter,l=a?Bt.fromSaved(t,a,o):new Bt(t,Dt(t.mode),o);return t.iter(o,r,(function(e){Pt(n,e.text,l);var t=l.line;e.stateAfter=t==r-1||t%5==0||t>=i.viewFrom&&t<i.viewTo?l.save():null,l.nextLine()})),e&&(t.modeFrontier=l.line),l}function Pt(e,t,n,r){var i=e.doc.mode,o=new Ht(t,e.options.tabSize,n);for(o.start=o.pos=r||0,""==t&&_t(i,n.state);!o.eol();)jt(i,o,n.state),o.start=o.pos}function _t(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=It(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function jt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=It(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}Bt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Bt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Bt.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},Bt.fromSaved=function(e,t,n){return t instanceof Rt?new Bt(e,Ot(e.mode,t.state),n,t.lookAhead):new Bt(e,Ot(e.mode,t),n)},Bt.prototype.save=function(e){var t=!1!==e?Ot(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new Rt(t,this.maxLookAhead):t};var qt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Ut(e,t,n,r){var i,o,a=e.doc,l=a.mode,s=se(a,(t=Se(a,t)).line),c=zt(e,t.line,n),u=new Ht(s.text,e.options.tabSize,c);for(r&&(o=[]);(r||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=jt(l,u,c.state),r&&o.push(new qt(u,i,Ot(a.mode,c.state)));return r?o:new qt(u,i,c.state)}function $t(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function Gt(e,t,n,r,i,o,a){var l=n.flattenSpans;null==l&&(l=e.options.flattenSpans);var s,c=0,u=null,h=new Ht(t,e.options.tabSize,r),f=e.options.addModeClass&&[null];for(""==t&&$t(_t(n,r.state),o);!h.eol();){if(h.pos>e.options.maxHighlightLength?(l=!1,a&&Pt(e,t,r,h.pos),h.pos=t.length,s=null):s=$t(jt(n,h,r.state,f),o),f){var d=f[0].name;d&&(s="m-"+(s?d+" "+s:d))}if(!l||u!=s){for(;c<h.start;)i(c=Math.min(h.start,c+5e3),u);u=s}h.start=h.pos}for(;c<h.pos;){var p=Math.min(h.pos,c+5e3);i(p,u),c=p}}var Vt=function(e,t,n){this.text=e,De(this,t),this.height=n?n(this):1};Vt.prototype.lineNo=function(){return fe(this)},st(Vt);var Xt={},Kt={};function Yt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Kt:Xt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Zt(e,t){var n=A("span",null,null,x?"padding-right: .1px":null),r={pre:A("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(w||x)&&e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,a=void 0;r.pos=0,r.addToken=Qt,xt(e.display.measure)&&(a=Qe(o,e.doc.direction))&&(r.addToken=en(r.addToken,a)),r.map=[],nn(o,r,Ft(e,o,t!=e.display.externalMeasured&&fe(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=H(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=H(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(yt(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(x){var l=r.content.lastChild;(/\bcm-tab\b/.test(l.className)||l.querySelector&&l.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return it(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=H(r.pre.className,r.textClass||"")),r}function Jt(e){var t=E("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Qt(e,t,n,r,i,o,a){if(t){var l,s=e.splitSpaces?function(e,t){if(1<e.length&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=" "),r+=o,n=" "==o}return r}(t,e.trailingSpace):t,c=e.cm.state.specialChars,u=!1;if(c.test(t)){l=document.createDocumentFragment();for(var h=0;;){c.lastIndex=h;var f=c.exec(t),d=f?f.index-h:t.length-h;if(d){var p=document.createTextNode(s.slice(h,h+d));w&&k<9?l.appendChild(E("span",[p])):l.appendChild(p),e.map.push(e.pos,e.pos+d,p),e.col+=d,e.pos+=d}if(!f)break;h+=d+1;var m=void 0;if("\t"==f[0]){var g=e.cm.options.tabSize,v=g-e.col%g;(m=l.appendChild(E("span",X(v),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),e.col+=v}else"\r"==f[0]||"\n"==f[0]?(m=l.appendChild(E("span","\r"==f[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",f[0]):((m=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),w&&k<9?l.appendChild(E("span",[m])):l.appendChild(m)),e.col+=1;e.map.push(e.pos,e.pos+1,m),e.pos++}}else e.col+=t.length,l=document.createTextNode(s),e.map.push(e.pos,e.pos+t.length,l),w&&k<9&&(u=!0),e.pos+=t.length;if(e.trailingSpace=32==s.charCodeAt(t.length-1),n||r||i||u||a){var y=n||"";r&&(y+=r),i&&(y+=i);var x=E("span",[l],y,a);return o&&(x.title=o),e.content.appendChild(x)}e.content.appendChild(l)}}function en(h,f){return function(e,t,n,r,i,o,a){n=n?n+" cm-force-border":"cm-force-border";for(var l=e.pos,s=l+t.length;;){for(var c=void 0,u=0;u<f.length&&!((c=f[u]).to>l&&c.from<=l);u++);if(c.to>=s)return h(e,t,n,r,i,o,a);h(e,t.slice(0,c.to-l),n,r,null,o,a),r=null,t=t.slice(c.to-l),l=c.to}}}function tn(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function nn(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,l,s,c,u,h,f,d=i.length,p=0,m=1,g="",v=0;;){if(v==p){s=c=u=h=l="",f=null,v=1/0;for(var y=[],x=void 0,b=0;b<r.length;++b){var w=r[b],k=w.marker;"bookmark"==k.type&&w.from==p&&k.widgetNode?y.push(k):w.from<=p&&(null==w.to||w.to>p||k.collapsed&&w.to==p&&w.from==p)?(null!=w.to&&w.to!=p&&v>w.to&&(v=w.to,c=""),k.className&&(s+=" "+k.className),k.css&&(l=(l?l+";":"")+k.css),k.startStyle&&w.from==p&&(u+=" "+k.startStyle),k.endStyle&&w.to==v&&(x||(x=[])).push(k.endStyle,w.to),k.title&&!h&&(h=k.title),k.collapsed&&(!f||Be(f.marker,k)<0)&&(f=w)):w.from>p&&v>w.from&&(v=w.from)}if(x)for(var S=0;S<x.length;S+=2)x[S+1]==v&&(c+=" "+x[S]);if(!f||f.from==p)for(var C=0;C<y.length;++C)tn(t,0,y[C]);if(f&&(f.from||0)==p){if(tn(t,(null==f.to?d+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(d<=p)break;for(var L=Math.min(d,v);;){if(g){var T=p+g.length;if(!f){var M=L<T?g.slice(0,L-p):g;t.addToken(t,M,a?a+s:s,u,p+M.length==v?c:"",h,l)}if(L<=T){g=g.slice(L-p),p=L;break}p=T,u=""}g=i.slice(o,o=n[m++]),a=Yt(n[m++],t.cm.options)}}else for(var N=1;N<n.length;N+=2)t.addToken(t,i.slice(o,o=n[N]),Yt(n[N+1],t.cm.options))}function rn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=ze(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?fe(K(this.rest))-n+1:1,this.node=this.text=null,this.hidden=$e(e,t)}function on(e,t,n){for(var r,i=[],o=t;o<n;o=r){var a=new rn(e.doc,se(e.doc,o),o);r=o+a.size,i.push(a)}return i}var an=null,ln=null;function sn(e,t){var n=nt(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);an?r=an.delayedCallbacks:ln?r=ln:(r=ln=[],setTimeout(cn,0));for(var o=function(e){r.push((function(){return n[e].apply(null,i)}))},a=0;a<n.length;++a)o(a)}}function cn(){var e=ln;ln=null;for(var t=0;t<e.length;++t)e[t]()}function un(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?dn(e,t):"gutter"==o?mn(e,t,n,r):"class"==o?pn(e,t):"widget"==o&&gn(e,t,r)}t.changes=null}function hn(e){return e.node==e.text&&(e.node=E("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),w&&k<8&&(e.node.style.zIndex=2)),e.node}function fn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Zt(e,t)}function dn(e,t){var n=t.text.className,r=fn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,pn(e,t)):n&&(t.text.className=n)}function pn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=hn(t);t.background=r.insertBefore(E("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?hn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function mn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=hn(t);t.gutterBackground=E("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=hn(t),l=t.gutter=E("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(l),a.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(E("div",me(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var s=0;s<e.options.gutters.length;++s){var c=e.options.gutters[s],u=o.hasOwnProperty(c)&&o[c];u&&l.appendChild(E("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function gn(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);vn(e,t,n)}function vn(e,t,n){if(yn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)yn(e,t.rest[r],t,n,!1)}function yn(e,t,n,r,i){if(t.widgets)for(var o=hn(n),a=0,l=t.widgets;a<l.length;++a){var s=l[a],c=E("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),xn(s,c,n,r),e.display.input.setUneditable(c),i&&s.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),sn(s,"redraw")}}function xn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function bn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!O(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),N(t.display.measure,E("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function wn(e,t){for(var n=dt(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function kn(e){return e.lineSpace.offsetTop}function Sn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Cn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=N(e.measure,E("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Ln(e){return _-e.display.nativeBarWidth}function Tn(e){return e.display.scroller.clientWidth-Ln(e)-e.display.barWidth}function Mn(e){return e.display.scroller.clientHeight-Ln(e)-e.display.barHeight}function Nn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(fe(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function An(e,t,n,r){return In(e,On(e,t),n,r)}function En(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[lr(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function On(e,t){var n=fe(t),r=En(e,n);r&&!r.text?r=null:r&&r.changes&&(un(e,r,n,nr(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=fe(t=je(t)),r=e.display.externalMeasured=new rn(e.doc,t,n);r.lineN=n;var i=r.built=Zt(e,r);return r.text=i.pre,N(e.display.lineMeasure,i.pre),r}(e,t));var i=Nn(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function In(e,t,n,r,i){t.before&&(n=-1);var o,a=n+(r||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&Tn(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),l=0;l<a.length-1;l++){var s=a[l],c=a[l+1];2<Math.abs(s.bottom-c.bottom)&&o.push((s.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,r){var i,o=Rn(t.map,n,r),a=o.node,l=o.start,s=o.end,c=o.collapse;if(3==a.nodeType){for(var u=0;u<4;u++){for(;l&&ie(t.line.text.charAt(o.coverStart+l));)--l;for(;o.coverStart+s<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+s));)++s;if((i=w&&k<9&&0==l&&s==o.coverEnd-o.coverStart?a.parentNode.getBoundingClientRect():Bn(L(a,l,s).getClientRects(),r)).left||i.right||0==l)break;s=l,l-=1,c="right"}w&&k<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Ct)return Ct;var t=N(e,E("span","x")),n=t.getBoundingClientRect(),r=L(t,0,1).getBoundingClientRect();return Ct=1<Math.abs(n.left-r.left)}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var h;0<l&&(c=r="right"),i=e.options.lineWrapping&&1<(h=a.getClientRects()).length?h["right"==r?h.length-1:0]:a.getBoundingClientRect()}if(w&&k<9&&!l&&(!i||!i.left&&!i.right)){var f=a.parentNode.getClientRects()[0];i=f?{left:f.left,right:f.left+tr(e.display),top:f.top,bottom:f.bottom}:Hn}for(var d=i.top-t.rect.top,p=i.bottom-t.rect.top,m=(d+p)/2,g=t.view.measure.heights,v=0;v<g.length-1&&!(m<g[v]);v++);var y=v?g[v-1]:0,x=g[v],b={left:("right"==c?i.right:i.left)-t.rect.left,right:("left"==c?i.left:i.right)-t.rect.left,top:y,bottom:x};return i.left||i.right||(b.bogus=!0),e.options.singleCursorHeightPerLine||(b.rtop=d,b.rbottom=p),b}(e,t,n,r)).bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Dn,Hn={left:0,right:0,top:0,bottom:0};function Rn(e,t,n){for(var r,i,o,a,l,s,c=0;c<e.length;c+=3)if(l=e[c],s=e[c+1],t<l?(i=0,o=1,a="left"):t<s?o=1+(i=t-l):(c==e.length-3||t==s&&e[c+3]>t)&&(i=(o=s-l)-1,s<=t&&(a="right")),null!=i){if(r=e[c+2],l==s&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],a="left";if("right"==n&&i==s-l)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],a="right";break}return{node:r,start:i,end:o,collapse:a,coverStart:l,coverEnd:s}}function Bn(e,t){var n=Hn;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;0<=i&&(n=e[i]).left==n.right;i--);return n}function Wn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Fn(e){e.display.externalMeasure=null,M(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Wn(e.display.view[t])}function zn(e){Fn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Pn(){return a&&h?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function _n(){return a&&h?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function jn(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=bn(e.widgets[n]));return t}function qn(e,t,n,r,i){if(!i){var o=jn(t);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=Ve(t);if("local"==r?a+=kn(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var l=e.display.lineSpace.getBoundingClientRect();a+=l.top+("window"==r?0:_n());var s=l.left+("window"==r?0:Pn());n.left+=s,n.right+=s}return n.top+=a,n.bottom+=a,n}function Un(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=Pn(),i-=_n();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function $n(e,t,n,r,i){return r||(r=se(e.doc,t.line)),qn(e,r,An(e,r,t.ch,i),n)}function Gn(r,e,i,o,a,l){function s(e,t){var n=In(r,a,e,t?"right":"left",l);return t?n.left=n.right:n.right=n.left,qn(r,o,n,i)}o=o||se(r.doc,e.line),a||(a=On(r,o));var c=Qe(o,r.doc.direction),t=e.ch,n=e.sticky;if(t>=o.text.length?(t=o.text.length,n="before"):t<=0&&(t=0,n="after"),!c)return s("before"==n?t-1:t,"before"==n);function u(e,t,n){return s(n?e-1:e,1==c[t].level!=n)}var h=Ze(c,t,n),f=Ye,d=u(t,h,"before"==n);return null!=f&&(d.other=u(t,f,"before"!=n)),d}function Vn(e,t){var n=0;t=Se(e.doc,t),e.options.lineWrapping||(n=tr(e.display)*t.ch);var r=se(e.doc,t.line),i=Ve(r)+kn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Xn(e,t,n,r,i){var o=ge(e,t,n);return o.xRel=i,r&&(o.outside=!0),o}function Kn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Xn(r.first,0,null,!0,-1);var i=de(r,n),o=r.first+r.size-1;if(o<i)return Xn(r.first+r.size-1,se(r,o).text.length,null,!0,1);t<0&&(t=0);for(var a=se(r,i);;){var l=Qn(e,a,i,t,n),s=Pe(a,l.ch+(0<l.xRel?1:0));if(!s)return l;var c=s.find(1);if(c.line==i)return c;a=se(r,i=c.line)}}function Yn(t,e,n,r){r-=jn(e);var i=e.text.length,o=ae((function(e){return In(t,n,e-1).bottom<=r}),i,0);return{begin:o,end:i=ae((function(e){return In(t,n,e).top>r}),o,i)}}function Zn(e,t,n,r){return n||(n=On(e,t)),Yn(e,t,n,qn(e,t,In(e,n,r),"line").top)}function Jn(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function Qn(n,e,t,r,i){i-=Ve(e);var o=On(n,e),a=jn(e),l=0,s=e.text.length,c=!0,u=Qe(e,n.doc.direction);if(u){var h=(n.options.lineWrapping?function(e,t,n,r,i,o,a){var l=Yn(e,t,r,a),s=l.begin,c=l.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,h=null,f=0;f<i.length;f++){var d=i[f];if(!(d.from>=c||d.to<=s)){var m=In(e,r,1!=d.level?Math.min(c,d.to)-1:Math.max(s,d.from)).right,g=m<o?o-m+1e9:m-o;(!u||g<h)&&(u=d,h=g)}}return u||(u=i[i.length-1]),u.from<s&&(u={from:s,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}:function(r,i,o,a,l,s,c){var e=ae((function(e){var t=l[e],n=1!=t.level;return Jn(Gn(r,ge(o,n?t.to:t.from,n?"before":"after"),"line",i,a),s,c,!0)}),0,l.length-1),t=l[e];if(0<e){var n=1!=t.level,u=Gn(r,ge(o,n?t.from:t.to,n?"after":"before"),"line",i,a);Jn(u,s,c,!0)&&u.top>c&&(t=l[e-1])}return t})(n,e,t,o,u,r,i);l=(c=1!=h.level)?h.from:h.to-1,s=c?h.to:h.from-1}var f,d,p=null,m=null,g=ae((function(e){var t=In(n,o,e);return t.top+=a,t.bottom+=a,!!Jn(t,r,i,!1)&&(t.top<=i&&t.left<=r&&(p=e,m=t),!0)}),l,s),v=!1;if(m){var y=r-m.left<m.right-r,x=y==c;g=p+(x?0:1),d=x?"after":"before",f=y?m.left:m.right}else{c||g!=s&&g!=l||g++,d=0==g?"after":g==e.text.length?"before":In(n,o,g-(c?1:0)).bottom+a<=i==c?"after":"before";var b=Gn(n,ge(t,g,d),"line",e,o);f=b.left,v=i<b.top||i>=b.bottom}return Xn(t,g=oe(e.text,g,1),d,v,r-f)}function er(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Dn){Dn=E("pre");for(var t=0;t<49;++t)Dn.appendChild(document.createTextNode("x")),Dn.appendChild(E("br"));Dn.appendChild(document.createTextNode("x"))}N(e.measure,Dn);var n=Dn.offsetHeight/50;return 3<n&&(e.cachedTextHeight=n),M(e.measure),n||1}function tr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=E("span","xxxxxxxxxx"),n=E("pre",[t]);N(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return 2<i&&(e.cachedCharWidth=i),i||10}function nr(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)n[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+i,r[e.options.gutters[a]]=o.clientWidth;return{fixedPos:rr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function rr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ir(r){var i=er(r.display),o=r.options.lineWrapping,a=o&&Math.max(5,r.display.scroller.clientWidth/tr(r.display)-3);return function(e){if($e(r.doc,e))return 0;var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;n++)e.widgets[n].height&&(t+=e.widgets[n].height);return o?t+(Math.ceil(e.text.length/a)||1)*i:t+i}}function or(e){var t=e.doc,n=ir(e);t.iter((function(e){var t=n(e);t!=e.height&&he(e,t)}))}function ar(e,t,n,r){var i=e.display;if(!n&&"true"==dt(t).getAttribute("cm-not-content"))return null;var o,a,l=i.lineSpace.getBoundingClientRect();try{o=t.clientX-l.left,a=t.clientY-l.top}catch(t){return null}var s,c=Kn(e,o,a);if(r&&1==c.xRel&&(s=se(e.doc,c.line).text).length==c.ch){var u=F(s,s.length,e.options.tabSize)-s.length;c=ge(c.line,Math.max(0,Math.round((o-Cn(e.display).left)/tr(e.display))-u))}return c}function lr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function sr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function cr(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var l=n.sel.ranges[a];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var s=l.empty();(s||e.options.showCursorWhenSelecting)&&ur(e,l.head,i),s||fr(e,l,o)}}return r}function ur(e,t,n){var r=Gn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(E("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(E("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function hr(e,t){return e.top-t.top||e.left-t.left}function fr(a,e,t){var n=a.display,r=a.doc,i=document.createDocumentFragment(),o=Cn(a.display),T=o.left,M=Math.max(n.sizerWidth,Tn(a)-n.sizer.offsetLeft)-o.right,N="ltr"==r.direction;function A(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),i.appendChild(E("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?M-e:n)+"px;\n                             height: "+(r-t)+"px"))}function l(n,y,x){var b,w,o=se(r,n),k=o.text.length;function S(e,t){return $n(a,ge(n,e),"div",o,t)}function C(e,t,n){var r=Zn(a,o,null,e),i="ltr"==t==("after"==n)?"left":"right";return S("after"==n?r.begin:r.end-(/\s/.test(o.text.charAt(r.end-1))?2:1),i)[i]}var L=Qe(o,r.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),i=!0)}i||r(t,n,"ltr")}(L,y||0,null==x?k:x,(function(e,t,n,r){var i="ltr"==n,o=S(e,i?"left":"right"),a=S(t-1,i?"right":"left"),l=null==y&&0==e,s=null==x&&t==k,c=0==r,u=!L||r==L.length-1;if(a.top-o.top<=3){var h=(N?s:l)&&u,f=(N?l:s)&&c?T:(i?o:a).left,d=h?M:(i?a:o).right;A(f,o.top,d-f,o.bottom)}else{var p,m,g,v;i?(p=N&&l&&c?T:o.left,m=N?M:C(e,n,"before"),g=N?T:C(t,n,"after"),v=N&&s&&u?M:a.right):(p=N?C(e,n,"before"):T,m=!N&&l&&c?M:o.right,g=!N&&s&&u?T:a.left,v=N?C(t,n,"after"):M),A(p,o.top,m-p,o.bottom),o.bottom<a.top&&A(T,o.bottom,null,a.top),A(g,a.top,v-g,a.bottom)}(!b||hr(o,b)<0)&&(b=o),hr(a,b)<0&&(b=a),(!w||hr(o,w)<0)&&(w=o),hr(a,w)<0&&(w=a)})),{start:b,end:w}}var s=e.from(),c=e.to();if(s.line==c.line)l(s.line,s.ch,c.ch);else{var u=se(r,s.line),h=se(r,c.line),f=je(u)==je(h),d=l(s.line,s.ch,f?u.text.length+1:null).end,p=l(c.line,f?0:null,c.ch).start;f&&(d.top<p.top-2?(A(d.right,d.top,null,d.bottom),A(T,p.top,p.left,p.bottom)):A(d.right,d.top,p.left-d.right,d.bottom)),d.bottom<p.top&&A(T,d.bottom,null,p.top)}t.appendChild(i)}function dr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval((function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function pr(e){e.state.focused||(e.display.input.focus(),gr(e))}function mr(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,vr(e))}),100)}function gr(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(it(e,"focus",e,t),e.state.focused=!0,D(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),x&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),dr(e))}function vr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(it(e,"blur",e,t),e.state.focused=!1,T(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function yr(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],o=void 0;if(!i.hidden){if(w&&k<8){var a=i.node.offsetTop+i.node.offsetHeight;o=a-n,n=a}else{var l=i.node.getBoundingClientRect();o=l.bottom-l.top}var s=i.line.height-o;if(o<2&&(o=er(t)),(.005<s||s<-.005)&&(he(i.line,o),xr(i.line),i.rest))for(var c=0;c<i.rest.length;c++)xr(i.rest[c])}}}function xr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function br(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-kn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=de(t,r),a=de(t,i);if(n&&n.ensure){var l=n.ensure.from.line,s=n.ensure.to.line;l<o?a=de(t,Ve(se(t,o=l))+e.wrapper.clientHeight):Math.min(s,t.lastLine())>=a&&(o=de(t,Ve(se(t,s))-e.wrapper.clientHeight),a=s)}return{from:o,to:Math.max(a,o+1)}}function wr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=rr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var l=n[a].alignable;if(l)for(var s=0;s<l.length;s++)l[s].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function kr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=me(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(E("div",[E("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",li(e),!0}return!1}function Sr(e,t){var n=e.display,r=er(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Mn(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var l=e.doc.height+Sn(n),s=t.top<r,c=t.bottom>l-r;if(t.top<i)a.scrollTop=s?0:t.top;else if(t.bottom>i+o){var u=Math.min(t.top,(c?l:t.bottom)-o);u!=i&&(a.scrollTop=u)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,f=Tn(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),d=t.right-t.left>f;return d&&(t.right=t.left+f),t.left<10?a.scrollLeft=0:t.left<h?a.scrollLeft=Math.max(0,t.left-(d?0:10)):t.right>f+h-3&&(a.scrollLeft=t.right+(d?0:10)-f),a}function Cr(e,t){null!=t&&(Mr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Lr(e){Mr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Tr(e,t,n){null==t&&null==n||Mr(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Mr(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Nr(e,Vn(e,t.from),Vn(e,t.to),t.margin))}function Nr(e,t,n,r){var i=Sr(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Tr(e,i.scrollLeft,i.scrollTop)}function Ar(e,t){Math.abs(e.doc.scrollTop-t)<2||(m||ai(e,{top:t}),Er(e,t,!0),m&&ai(e),ti(e,100))}function Er(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Or(e,t,n,r){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,wr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Ir(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+Sn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Ln(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Dr=function(e,t,n){this.cm=n;var r=this.vert=E("div",[E("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=E("div",[E("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),tt(r,"scroll",(function(){r.clientHeight&&t(r.scrollTop,"vertical")})),tt(i,"scroll",(function(){i.clientWidth&&t(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,w&&k<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Dr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<e.clientHeight&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Dr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Dr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Dr.prototype.zeroWidthHack=function(){var e=b&&!l?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new z,this.disableVert=new z},Dr.prototype.enableZeroWidthBar=function(n,r,i){n.style.pointerEvents="auto",r.set(1e3,(function e(){var t=n.getBoundingClientRect();("vert"==i?document.elementFromPoint(t.right-1,(t.top+t.bottom)/2):document.elementFromPoint((t.right+t.left)/2,t.bottom-1))!=n?n.style.pointerEvents="none":r.set(1e3,e)}))},Dr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Hr=function(){};function Rr(e,t){t||(t=Ir(e));var n=e.display.barWidth,r=e.display.barHeight;Br(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&yr(e),Br(e,Ir(e)),n=e.display.barWidth,r=e.display.barHeight}function Br(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Hr.prototype.update=function(){return{bottom:0,right:0}},Hr.prototype.setScrollLeft=function(){},Hr.prototype.setScrollTop=function(){},Hr.prototype.clear=function(){};var Wr={native:Dr,null:Hr};function Fr(n){n.display.scrollbars&&(n.display.scrollbars.clear(),n.display.scrollbars.addClass&&T(n.display.wrapper,n.display.scrollbars.addClass)),n.display.scrollbars=new Wr[n.options.scrollbarStyle]((function(e){n.display.wrapper.insertBefore(e,n.display.scrollbarFiller),tt(e,"mousedown",(function(){n.state.focused&&setTimeout((function(){return n.display.input.focus()}),0)})),e.setAttribute("cm-not-content","true")}),(function(e,t){"horizontal"==t?Or(n,e):Ar(n,e)}),n),n.display.scrollbars.addClass&&D(n.display.wrapper,n.display.scrollbars.addClass)}var zr=0;function Pr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++zr},t=e.curOp,an?an.ops.push(t):t.ownsGroup=an={ops:[t],delayedCallbacks:[]}}function _r(e){!function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{an=null,t(n)}}(e.curOp,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)jr(t[n]);for(var r=0;r<t.length;r++)(i=t[r]).updatedDisplay=i.mustUpdate&&ii(i.cm,i.update);for(var i,o=0;o<t.length;o++)qr(t[o]);for(var a=0;a<t.length;a++)Ur(t[a]);for(var l=0;l<t.length;l++)$r(t[l])}(e)}))}function jr(e){var t,n,r=e.cm,i=r.display;!(n=(t=r).display).scrollbarsClipped&&n.scroller.offsetWidth&&(n.nativeBarWidth=n.scroller.offsetWidth-n.scroller.clientWidth,n.heightForcer.style.height=Ln(t)+"px",n.sizer.style.marginBottom=-n.nativeBarWidth+"px",n.sizer.style.borderRightWidth=Ln(t)+"px",n.scrollbarsClipped=!0),e.updateMaxLine&&Ke(r),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&r.options.lineWrapping,e.update=e.mustUpdate&&new ri(r,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function qr(e){var t=e.cm,n=t.display;e.updatedDisplay&&yr(t),e.barMeasure=Ir(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=An(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Ln(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Tn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Ur(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Or(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==I();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Rr(t,e.barMeasure),e.updatedDisplay&&si(t,e.barMeasure),e.selectionChanged&&dr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&pr(e.cm)}function $r(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&oi(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Er(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Or(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!ot(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!c){var o=E("div","​",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-kn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Ln(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?ge(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?ge(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var a=!1,l=Gn(e,t),s=n&&n!=t?Gn(e,n):l,c=Sr(e,i={left:Math.min(l.left,s.left),top:Math.min(l.top,s.top)-r,right:Math.max(l.left,s.left),bottom:Math.max(l.bottom,s.bottom)+r}),u=e.doc.scrollTop,h=e.doc.scrollLeft;if(null!=c.scrollTop&&(Ar(e,c.scrollTop),1<Math.abs(e.doc.scrollTop-u)&&(a=!0)),null!=c.scrollLeft&&(Or(e,c.scrollLeft),1<Math.abs(e.doc.scrollLeft-h)&&(a=!0)),!a)break}return i}(t,Se(r,e.scrollToPos.from),Se(r,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||it(i[a],"hide");if(o)for(var l=0;l<o.length;++l)o[l].lines.length&&it(o[l],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&it(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Gr(e,t){if(e.curOp)return t();Pr(e);try{return t()}finally{_r(e)}}function Vr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Pr(e);try{return t.apply(e,arguments)}finally{_r(e)}}}function Xr(e){return function(){if(this.curOp)return e.apply(this,arguments);Pr(this);try{return e.apply(this,arguments)}finally{_r(this)}}}function Kr(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Pr(e);try{return t.apply(this,arguments)}finally{_r(e)}}}function Yr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Te&&qe(e.doc,t)<i.viewTo&&Jr(e);else if(n<=i.viewFrom)Te&&Ue(e.doc,n+r)>i.viewFrom?Jr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Jr(e);else if(t<=i.viewFrom){var o=Qr(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):Jr(e)}else if(n>=i.viewTo){var a=Qr(e,t,t,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):Jr(e)}else{var l=Qr(e,t,t,-1),s=Qr(e,n,n+r,1);l&&s?(i.view=i.view.slice(0,l.index).concat(on(e,l.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=r):Jr(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function Zr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[lr(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==P(a,n)&&a.push(n)}}}function Jr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Qr(e,t,n,r){var i,o=lr(e,t),a=e.display.view;if(!Te||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var l=e.display.viewFrom,s=0;s<o;s++)l+=a[s].size;if(l!=t){if(0<r){if(o==a.length-1)return null;i=l+a[o].size-t,o++}else i=l-t;t+=i,n+=i}for(;qe(e.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function ei(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function ti(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,B(ni,e))}function ni(s){var c=s.doc;if(!(c.highlightFrontier>=s.display.viewTo)){var u=+new Date+s.options.workTime,h=zt(s,c.highlightFrontier),f=[];c.iter(h.line,Math.min(c.first+c.size,s.display.viewTo+500),(function(e){if(h.line>=s.display.viewFrom){var t=e.styles,n=e.text.length>s.options.maxHighlightLength?Ot(c.mode,h.state):null,r=Wt(s,e,h,!0);n&&(h.state=n),e.styles=r.styles;var i=e.styleClasses,o=r.classes;o?e.styleClasses=o:i&&(e.styleClasses=null);for(var a=!t||t.length!=e.styles.length||i!=o&&(!i||!o||i.bgClass!=o.bgClass||i.textClass!=o.textClass),l=0;!a&&l<t.length;++l)a=t[l]!=e.styles[l];a&&f.push(h.line),e.stateAfter=h.save(),h.nextLine()}else e.text.length<=s.options.maxHighlightLength&&Pt(s,e.text,h),e.stateAfter=h.line%5==0?h.save():null,h.nextLine();if(+new Date>u)return ti(s,s.options.workDelay),!0})),c.highlightFrontier=h.line,c.modeFrontier=Math.max(c.modeFrontier,h.line),f.length&&Gr(s,(function(){for(var e=0;e<f.length;e++)Zr(s,f[e],"text")}))}}var ri=function(e,t,n){var r=e.display;this.viewport=t,this.visible=br(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Tn(e),this.force=n,this.dims=nr(e),this.events=[]};function ii(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Jr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ei(e))return!1;kr(e)&&(Jr(e),t.dims=nr(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),Te&&(o=qe(e.doc,o),a=Ue(e.doc,a));var l,s,c,u,h=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;s=o,c=a,0==(u=(l=e).display).view.length||s>=u.viewTo||c<=u.viewFrom?(u.view=on(l,s,c),u.viewFrom=s):(u.viewFrom>s?u.view=on(l,s,u.viewFrom).concat(u.view):u.viewFrom<s&&(u.view=u.view.slice(lr(l,s))),u.viewFrom=s,u.viewTo<c?u.view=u.view.concat(on(l,u.viewTo,c)):u.viewTo>c&&(u.view=u.view.slice(0,lr(l,c)))),u.viewTo=c,n.viewOffset=Ve(se(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var f=ei(e);if(!h&&0==f&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var d=function(e){if(e.hasFocus())return null;var t=I();if(!t||!O(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&O(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return 4<f&&(n.lineDiv.style.display="none"),function(n,e,t){var p,m,g,v,y,r=n.display,i=n.options.lineNumbers,o=r.lineDiv,a=o.firstChild;function l(e){var t=e.nextSibling;return x&&b&&n.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),t}for(var s=r.view,c=r.viewFrom,u=0;u<s.length;u++){var h=s[u];if(h.hidden);else if(h.node&&h.node.parentNode==o){for(;a!=h.node;)a=l(a);var f=i&&null!=e&&e<=c&&h.lineNumber;h.changes&&(-1<P(h.changes,"gutter")&&(f=!1),un(n,h,c,t)),f&&(M(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(me(n.options,c)))),a=h.node.nextSibling}else{var d=(g=c,v=t,y=fn(p=n,m=h),m.text=m.node=y.pre,y.bgClass&&(m.bgClass=y.bgClass),y.textClass&&(m.textClass=y.textClass),pn(p,m),mn(p,m,g,v),vn(p,m,v),m.node);o.insertBefore(d,a)}c+=h.size}for(;a;)a=l(a)}(e,n.updateLineNumbers,t.dims),4<f&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=I()&&(e.activeElt.focus(),e.anchorNode&&O(document.body,e.anchorNode)&&O(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(d),M(n.cursorDiv),M(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,h&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ti(e,400)),!(n.updateLineNumbers=null)}function oi(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Tn(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Sn(e.display)-Mn(e),n.top)}),t.visible=br(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&ii(e,t);r=!1){yr(e);var i=Ir(e);sr(e),Rr(e,i),si(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ai(e,t){var n=new ri(e,t);if(ii(e,n)){yr(e),oi(e,n);var r=Ir(e);sr(e),Rr(e,r),si(e,r),n.finish()}}function li(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function si(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Ln(e)+"px"}function ci(e){var t=e.display.gutters,n=e.options.gutters;M(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(E("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&((e.display.lineGutter=o).style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",li(e)}function ui(e){var t=P(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):-1<t&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}ri.prototype.signal=function(e,t){lt(e,t)&&this.events.push(arguments)},ri.prototype.finish=function(){for(var e=0;e<this.events.length;e++)it.apply(null,this.events[e])};var hi=0,fi=null;function di(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function pi(e){var t=di(e);return t.x*=fi,t.y*=fi,t}function mi(e,t){var n=di(t),r=n.x,i=n.y,o=e.display,a=o.scroller,l=a.scrollWidth>a.clientWidth,s=a.scrollHeight>a.clientHeight;if(r&&l||i&&s){if(i&&b&&x)e:for(var c=t.target,u=o.view;c!=a;c=c.parentNode)for(var h=0;h<u.length;h++)if(u[h].node==c){e.display.currentWheelTarget=c;break e}if(r&&!m&&!g&&null!=fi)return i&&s&&Ar(e,Math.max(0,a.scrollTop+i*fi)),Or(e,Math.max(0,a.scrollLeft+r*fi)),(!i||i&&s)&&ct(t),void(o.wheelStartX=null);if(i&&null!=fi){var f=i*fi,d=e.doc.scrollTop,p=d+o.wrapper.clientHeight;f<0?d=Math.max(0,d+f-50):p=Math.min(e.doc.height,p+f+50),ai(e,{top:d,bottom:p})}hi<20&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=r,o.wheelDY=i,setTimeout((function(){if(null!=o.wheelStartX){var e=a.scrollLeft-o.wheelStartX,t=a.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(fi=(fi*hi+n)/(hi+1),++hi)}}),200)):(o.wheelDX+=r,o.wheelDY+=i))}}w?fi=-.53:m?fi=15:a?fi=-.7:s&&(fi=-1/3);var gi=function(e,t){this.ranges=e,this.primIndex=t};gi.prototype.primary=function(){return this.ranges[this.primIndex]},gi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!ye(n.anchor,r.anchor)||!ye(n.head,r.head))return!1}return!0},gi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new vi(xe(this.ranges[t].anchor),xe(this.ranges[t].head));return new gi(e,this.primIndex)},gi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},gi.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(0<=ve(t,r.from())&&ve(e,r.to())<=0)return n}return-1};var vi=function(e,t){this.anchor=e,this.head=t};function yi(e,t){var n=e[t];e.sort((function(e,t){return ve(e.from(),t.from())})),t=P(e,n);for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];if(0<=ve(o.to(),i.from())){var a=we(o.from(),i.from()),l=be(o.to(),i.to()),s=o.empty()?i.from()==i.head:o.from()==o.head;r<=t&&--t,e.splice(--r,2,new vi(s?l:a,s?a:l))}}return new gi(e,t)}function xi(e,t){return new gi([new vi(e,t||e)],0)}function bi(e){return e.text?ge(e.from.line+e.text.length-1,K(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function wi(e,t){if(ve(e,t.from)<0)return e;if(ve(e,t.to)<=0)return bi(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=bi(t).ch-t.to.ch),ge(n,r)}function ki(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new vi(wi(i.anchor,t),wi(i.head,t)))}return yi(n,e.sel.primIndex)}function Si(e,t,n){return e.line==t.line?ge(n.line,e.ch-t.ch+n.ch):ge(n.line+(e.line-t.line),e.ch)}function Ci(e){e.doc.mode=Nt(e.options,e.doc.modeOption),Li(e)}function Li(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ti(e,100),e.state.modeGen++,e.curOp&&Yr(e)}function Ti(e,t){return 0==t.from.ch&&0==t.to.ch&&""==K(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Mi(e,r,t,i){function o(e){return t?t[e]:null}function n(e,t,n){!function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ie(e),De(e,n);var i=r?r(e):1;i!=e.height&&he(e,i)}(e,t,n,i),sn(e,"change",e,r)}function a(e,t){for(var n=[],r=e;r<t;++r)n.push(new Vt(c[r],o(r),i));return n}var l=r.from,s=r.to,c=r.text,u=se(e,l.line),h=se(e,s.line),f=K(c),d=o(c.length-1),p=s.line-l.line;if(r.full)e.insert(0,a(0,c.length)),e.remove(c.length,e.size-c.length);else if(Ti(e,r)){var m=a(0,c.length-1);n(h,h.text,d),p&&e.remove(l.line,p),m.length&&e.insert(l.line,m)}else if(u==h)if(1==c.length)n(u,u.text.slice(0,l.ch)+f+u.text.slice(s.ch),d);else{var g=a(1,c.length-1);g.push(new Vt(f+u.text.slice(s.ch),d,i)),n(u,u.text.slice(0,l.ch)+c[0],o(0)),e.insert(l.line+1,g)}else if(1==c.length)n(u,u.text.slice(0,l.ch)+c[0]+h.text.slice(s.ch),o(0)),e.remove(l.line+1,p);else{n(u,u.text.slice(0,l.ch)+c[0],o(0)),n(h,f+h.text.slice(s.ch),d);var v=a(1,c.length-1);1<p&&e.remove(l.line+1,p-1),e.insert(l.line+1,v)}sn(e,"change",e,r)}function Ni(e,l,s){!function e(t,n,r){if(t.linked)for(var i=0;i<t.linked.length;++i){var o=t.linked[i];if(o.doc!=n){var a=r&&o.sharedHist;s&&!a||(l(o.doc,a),e(o.doc,t,a))}}}(e,null,!0)}function Ai(e,t){if(t.cm)throw new Error("This document is already in use.");or((e.doc=t).cm=e),Ci(e),Ei(e),e.options.lineWrapping||Ke(e),e.options.mode=t.modeOption,Yr(e)}function Ei(e){("rtl"==e.doc.direction?D:T)(e.display.lineDiv,"CodeMirror-rtl")}function Oi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Ii(e,t){var n={from:xe(t.from),to:bi(t),text:ce(e,t.from,t.to)};return Wi(e,n,t.from.line,t.to.line+1),Ni(e,(function(e){return Wi(e,n,t.from.line,t.to.line+1)}),!0),n}function Di(e){for(;e.length&&K(e).ranges;)e.pop()}function Hi(e,t,n,r){var i=e.history;i.undone.length=0;var o,a,l,s=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=(l=i).lastOp==r?(Di(l.done),K(l.done)):l.done.length&&!K(l.done).ranges?K(l.done):1<l.done.length&&!l.done[l.done.length-2].ranges?(l.done.pop(),K(l.done)):void 0))a=K(o.changes),0==ve(t.from,t.to)&&0==ve(t.from,a.to)?a.to=bi(t):o.changes.push(Ii(e,t));else{var c=K(i.done);for(c&&c.ranges||Bi(e.sel,i.done),o={changes:[Ii(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,a||it(e,"historyAdded")}function Ri(e,t,n,r){var i,o,a,l,s,c=e.history,u=r&&r.origin;n==c.lastSelOp||u&&c.lastSelOrigin==u&&(c.lastModTime==c.lastSelTime&&c.lastOrigin==u||(i=e,o=u,a=K(c.done),l=t,"*"==(s=o.charAt(0))||"+"==s&&a.ranges.length==l.ranges.length&&a.somethingSelected()==l.somethingSelected()&&new Date-i.history.lastSelTime<=(i.cm?i.cm.options.historyEventDelay:500)))?c.done[c.done.length-1]=t:Bi(t,c.done),c.lastSelTime=+new Date,c.lastSelOrigin=u,c.lastSelOp=n,r&&!1!==r.clearRedo&&Di(c.undone)}function Bi(e,t){var n=K(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Wi(t,n,e,r){var i=n["spans_"+t.id],o=0;t.iter(Math.max(t.first,e),Math.min(t.first+t.size,r),(function(e){e.markedSpans&&((i||(i=n["spans_"+t.id]={}))[o]=e.markedSpans),++o}))}function Fi(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function zi(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Fi(n[i]));return r}(e,t),r=Ee(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var l=0;l<a.length;++l){for(var s=a[l],c=0;c<o.length;++c)if(o[c].marker==s.marker)continue e;o.push(s)}else a&&(n[i]=a)}return n}function Pi(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?gi.prototype.deepCopy.call(o):o);else{var a=o.changes,l=[];r.push({changes:l});for(var s=0;s<a.length;++s){var c=a[s],u=void 0;if(l.push({from:c.from,to:c.to,text:c.text}),t)for(var h in c)(u=h.match(/^spans_(\d+)$/))&&-1<P(t,Number(u[1]))&&(K(l)[h]=c[h],delete c[h])}}}return r}function _i(e,t,n,r){if(r){var i=e.anchor;if(n){var o=ve(t,i)<0;o!=ve(n,i)<0?(i=t,t=n):o!=ve(t,n)<0&&(t=n)}return new vi(i,t)}return new vi(n||t,t)}function ji(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Vi(e,new gi([_i(e.sel.primary(),t,n,i)],0),r)}function qi(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=_i(e.sel.ranges[o],t[o],null,i);Vi(e,yi(r,e.sel.primIndex),n)}function Ui(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Vi(e,yi(i,e.sel.primIndex),r)}function $i(e,t,n,r){Vi(e,xi(t,n),r)}function Gi(e,t,n){var r=e.history.done,i=K(r);i&&i.ranges?Xi(e,r[r.length-1]=t,n):Vi(e,t,n)}function Vi(e,t,n){Xi(e,t,n),Ri(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Xi(e,t,n){var r,i,o,a;(lt(e,"beforeSelectionChange")||e.cm&&lt(e.cm,"beforeSelectionChange"))&&(r=e,o=n,a={ranges:(i=t).ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new vi(Se(r,e[t].anchor),Se(r,e[t].head))},origin:o&&o.origin},it(r,"beforeSelectionChange",r,a),r.cm&&it(r.cm,"beforeSelectionChange",r.cm,a),t=a.ranges!=i.ranges?yi(a.ranges,a.ranges.length-1):i),Ki(e,Zi(e,t,n&&n.bias||(ve(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!e.cm||Lr(e.cm)}function Ki(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,at(e.cm)),sn(e,"cursorActivity",e))}function Yi(e){Ki(e,Zi(e,e.sel,null,!1))}function Zi(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],s=Qi(e,a.anchor,l&&l.anchor,n,r),c=Qi(e,a.head,l&&l.head,n,r);(i||s!=a.anchor||c!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new vi(s,c))}return i?yi(i,t.primIndex):t}function Ji(e,t,n,r,i){var o=se(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var l=o.markedSpans[a],s=l.marker;if((null==l.from||(s.inclusiveLeft?l.from<=t.ch:l.from<t.ch))&&(null==l.to||(s.inclusiveRight?l.to>=t.ch:l.to>t.ch))){if(i&&(it(s,"beforeCursorEnter"),s.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!s.atomic)continue;if(n){var c=s.find(r<0?1:-1),u=void 0;if((r<0?s.inclusiveRight:s.inclusiveLeft)&&(c=eo(e,c,-r,c&&c.line==t.line?o:null)),c&&c.line==t.line&&(u=ve(c,n))&&(r<0?u<0:0<u))return Ji(e,c,t,r,i)}var h=s.find(r<0?-1:1);return(r<0?s.inclusiveLeft:s.inclusiveRight)&&(h=eo(e,h,r,h.line==t.line?o:null)),h?Ji(e,h,t,r,i):null}}return t}function Qi(e,t,n,r,i){var o=r||1;return Ji(e,t,n,o,i)||!i&&Ji(e,t,n,o,!0)||Ji(e,t,n,-o,i)||!i&&Ji(e,t,n,-o,!0)||(e.cantEdit=!0,ge(e.first,0))}function eo(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?Se(e,ge(t.line-1)):null:0<n&&t.ch==(r||se(e,t.line)).text.length?t.line<e.first+e.size-1?ge(t.line+1,0):null:new ge(t.line,t.ch+n)}function to(e){e.setSelection(ge(e.firstLine(),0),ge(e.lastLine()),q)}function no(i,e,t){var o={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return o.canceled=!0}};return t&&(o.update=function(e,t,n,r){e&&(o.from=Se(i,e)),t&&(o.to=Se(i,t)),n&&(o.text=n),void 0!==r&&(o.origin=r)}),it(i,"beforeChange",i,o),i.cm&&it(i.cm,"beforeChange",i.cm,o),o.canceled?null:{from:o.from,to:o.to,text:o.text,origin:o.origin}}function ro(e,t,n){if(e.cm){if(!e.cm.curOp)return Vr(e.cm,ro)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(lt(e,"beforeChange")||e.cm&&lt(e.cm,"beforeChange"))||(t=no(e,t,!0))){var r=Le&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=P(r,n)||(r||(r=[])).push(n)}})),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],l=a.find(0),s=0;s<i.length;++s){var c=i[s];if(!(ve(c.to,l.from)<0||0<ve(c.from,l.to))){var u=[s,1],h=ve(c.from,l.from),f=ve(c.to,l.to);(h<0||!a.inclusiveLeft&&!h)&&u.push({from:c.from,to:l.from}),(0<f||!a.inclusiveRight&&!f)&&u.push({from:l.to,to:c.to}),i.splice.apply(i,u),s+=u.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;0<=i;--i)io(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else io(e,t)}}function io(e,n){if(1!=n.text.length||""!=n.text[0]||0!=ve(n.from,n.to)){var t=ki(e,n);Hi(e,n,t,e.cm?e.cm.curOp.id:NaN),lo(e,n,t,Ee(e,n));var r=[];Ni(e,(function(e,t){t||-1!=P(r,e.history)||(ho(e.history,n),r.push(e.history)),lo(e,n,null,Ee(e,n))}))}}function oo(i,o,e){var t=i.cm&&i.cm.state.suppressEdits;if(!t||e){for(var a,n=i.history,r=i.sel,l="undo"==o?n.done:n.undone,s="undo"==o?n.undone:n.done,c=0;c<l.length&&(a=l[c],e?!a.ranges||a.equals(i.sel):a.ranges);c++);if(c!=l.length){for(n.lastOrigin=n.lastSelOrigin=null;;){if(!(a=l.pop()).ranges){if(t)return void l.push(a);break}if(Bi(a,s),e&&!a.equals(i.sel))return void Vi(i,a,{clearRedo:!1});r=a}var u=[];Bi(r,s),s.push({changes:u,generation:n.generation}),n.generation=a.generation||++n.maxGeneration;for(var h=lt(i,"beforeChange")||i.cm&&lt(i.cm,"beforeChange"),f=function(e){var n=a.changes[e];if(n.origin=o,h&&!no(i,n,!1))return l.length=0,{};u.push(Ii(i,n));var t=e?ki(i,n):K(l);lo(i,n,t,zi(i,n)),!e&&i.cm&&i.cm.scrollIntoView({from:n.from,to:bi(n)});var r=[];Ni(i,(function(e,t){t||-1!=P(r,e.history)||(ho(e.history,n),r.push(e.history)),lo(e,n,null,zi(e,n))}))},d=a.changes.length-1;0<=d;--d){var p=f(d);if(p)return p.v}}}}function ao(e,t){if(0!=t&&(e.first+=t,e.sel=new gi(Y(e.sel.ranges,(function(e){return new vi(ge(e.anchor.line+t,e.anchor.ch),ge(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){Yr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Zr(e.cm,r,"gutter")}}function lo(e,t,n,r){if(e.cm&&!e.cm.curOp)return Vr(e.cm,lo)(e,t,n,r);if(t.to.line<e.first)ao(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);ao(e,i),t={from:ge(e.first,0),to:ge(t.to.line+i,t.to.ch),text:[K(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ge(o,se(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=ce(e,t.from,t.to),n||(n=ki(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,o=t.from,a=t.to,l=!1,s=o.line;e.options.lineWrapping||(s=fe(je(se(r,o.line))),r.iter(s,a.line+1,(function(e){if(e==i.maxLine)return l=!0}))),-1<r.sel.contains(t.from,t.to)&&at(e),Mi(r,t,n,ir(e)),e.options.lineWrapping||(r.iter(s,o.line+t.text.length,(function(e){var t=Xe(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,l=!1)})),l&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;n<r;r--){var i=se(e,r).stateAfter;if(i&&(!(i instanceof Rt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,o.line),ti(e,400);var c=t.text.length-(a.line-o.line)-1;t.full?Yr(e):o.line!=a.line||1!=t.text.length||Ti(e.doc,t)?Yr(e,o.line,a.line+1,c):Zr(e,o.line,"text");var u=lt(e,"changes"),h=lt(e,"change");if(h||u){var f={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};h&&sn(e,"change",e,f),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}(e.cm,t,r):Mi(e,t,r),Xi(e,n,q)}}function so(e,t,n,r,i){var o;r||(r=n),ve(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof t&&(t=e.splitLines(t)),ro(e,{from:n,to:r,text:t,origin:i})}function co(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function uo(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var l=0;l<o.ranges.length;l++)co(o.ranges[l].anchor,t,n,r),co(o.ranges[l].head,t,n,r)}else{for(var s=0;s<o.changes.length;++s){var c=o.changes[s];if(n<c.from.line)c.from=ge(c.from.line+r,c.from.ch),c.to=ge(c.to.line+r,c.to.ch);else if(t<=c.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function ho(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;uo(e.done,n,r,i),uo(e.undone,n,r,i)}function fo(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=se(e,ke(e,t)):i=fe(t),null==i?null:(r(o,i)&&e.cm&&Zr(e.cm,i,n),o)}function po(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function mo(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}vi.prototype.from=function(){return we(this.anchor,this.head)},vi.prototype.to=function(){return be(this.anchor,this.head)},vi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},po.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n,r=e,i=e+t;r<i;++r){var o=this.lines[r];this.height-=o.height,(n=o).parent=null,Ie(n),sn(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},mo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof po))){var l=[];this.collapse(l),this.children=[new po(l)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&50<i.lines.length){for(var a=i.lines.length%25+25,l=a;l<i.lines.length;){var s=new po(i.lines.slice(l,l+=25));i.height-=s.height,this.children.splice(++r,0,s),s.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new mo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=P(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var r=new mo(e.children);(r.parent=e).children=[r,t],e=r}t.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var go=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function vo(e,t,n){Ve(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Cr(e,n)}go.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=fe(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=bn(this);he(n,Math.max(0,n.height-o)),e&&(Gr(e,(function(){vo(e,n,-o),Zr(e,r,"widget")})),sn(e,"lineWidgetCleared",e,this,r))}},go.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=bn(this)-t;i&&(he(r,r.height+i),n&&Gr(n,(function(){n.curOp.forceUpdate=!0,vo(n,r,i),sn(n,"lineWidgetChanged",n,e,fe(r))})))},st(go);var yo=0,xo=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++yo};function bo(t,r,i,e,n){if(e&&e.shared)return function(e,n,r,i,o){(i=W(i)).shared=!1;var a=[bo(e,n,r,i,o)],l=a[0],s=i.widgetNode;return Ni(e,(function(e){s&&(i.widgetNode=s.cloneNode(!0)),a.push(bo(e,Se(e,n),Se(e,r),i,o));for(var t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;l=K(a)})),new wo(a,l)}(t,r,i,e,n);if(t.cm&&!t.cm.curOp)return Vr(t.cm,bo)(t,r,i,e,n);var o=new xo(t,n),a=ve(r,i);if(e&&W(e,o,!1),0<a||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=A("span",[o.replacedWith],"CodeMirror-widget"),e.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),e.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(_e(t,r.line,r,i,o)||r.line!=i.line&&_e(t,i.line,r,i,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Te=!0}o.addToHistory&&Hi(t,{from:r,to:i,origin:"markText"},t.sel,NaN);var l,s=r.line,c=t.cm;if(t.iter(s,i.line+1,(function(e){var t,n;c&&o.collapsed&&!c.options.lineWrapping&&je(e)==c.display.maxLine&&(l=!0),o.collapsed&&s!=r.line&&he(e,0),t=e,n=new Me(o,s==r.line?r.ch:null,s==i.line?i.ch:null),t.markedSpans=t.markedSpans?t.markedSpans.concat([n]):[n],n.marker.attachLine(t),++s})),o.collapsed&&t.iter(r.line,i.line+1,(function(e){$e(t,e)&&he(e,0)})),o.clearOnEnter&&tt(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(Le=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++yo,o.atomic=!0),c){if(l&&(c.curOp.updateMaxLine=!0),o.collapsed)Yr(c,r.line,i.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=r.line;u<=i.line;u++)Zr(c,u,"text");o.atomic&&Yi(c.doc),sn(c,"markerAdded",c,o)}return o}xo.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){var t=this.doc.cm,n=t&&!t.curOp;if(n&&Pr(t),lt(this,"clear")){var r=this.find();r&&sn(this,"clear",r.from,r.to)}for(var i=null,o=null,a=0;a<this.lines.length;++a){var l=e.lines[a],s=Ne(l.markedSpans,e);t&&!e.collapsed?Zr(t,fe(l),"text"):t&&(null!=s.to&&(o=fe(l)),null!=s.from&&(i=fe(l))),l.markedSpans=Ae(l.markedSpans,s),null==s.from&&e.collapsed&&!$e(e.doc,l)&&t&&he(l,er(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var u=je(e.lines[c]),h=Xe(u);h>t.display.maxLineLength&&(t.display.maxLine=u,t.display.maxLineLength=h,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&Yr(t,i,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Yi(t.doc)),t&&sn(t,"markerCleared",t,this,i,o),n&&_r(t),this.parent&&this.parent.clear()}},xo.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],a=Ne(o.markedSpans,this);if(null!=a.from&&(n=ge(t?o:fe(o),a.from),-1==e))return n;if(null!=a.to&&(r=ge(t?o:fe(o),a.to),1==e))return r}return n&&{from:n,to:r}},xo.prototype.changed=function(){var o=this,a=this.find(-1,!0),l=this,s=this.doc.cm;a&&s&&Gr(s,(function(){var e=a.line,t=fe(a.line),n=En(s,t);if(n&&(Wn(n),s.curOp.selectionChanged=s.curOp.forceUpdate=!0),s.curOp.updateMaxLine=!0,!$e(l.doc,e)&&null!=l.height){var r=l.height;l.height=null;var i=bn(l)-r;i&&he(e,e.height+i)}sn(s,"markerChanged",s,o)}))},xo.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=P(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},xo.prototype.detachLine=function(e){if(this.lines.splice(P(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},st(xo);var wo=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function ko(e){return e.findMarks(ge(e.first,0),e.clipPos(ge(e.lastLine())),(function(e){return e.parent}))}function So(o){for(var e=function(e){var t=o[e],n=[t.primary.doc];Ni(t.primary.doc,(function(e){return n.push(e)}));for(var r=0;r<t.markers.length;r++){var i=t.markers[r];-1==P(n,i.doc)&&(i.parent=null,t.markers.splice(r--,1))}},t=0;t<o.length;t++)e(t)}wo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();sn(this,"clear")}},wo.prototype.find=function(e,t){return this.primary.find(e,t)},st(wo);var Co=0,Lo=function(e,t,n,r,i){if(!(this instanceof Lo))return new Lo(e,t,n,r,i);null==n&&(n=0),mo.call(this,[new po([new Vt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=ge(n,0);this.sel=xi(o),this.history=new Oi(null),this.id=++Co,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Mi(this,{from:o,to:o,text:e}),Vi(this,xi(o),q)};Lo.prototype=J(mo.prototype,{constructor:Lo,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ue(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Kr((function(e){var t=ge(this.first,0),n=this.first+this.size-1;ro(this,{from:t,to:ge(n,se(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Tr(this.cm,0,0),Vi(this,xi(t),q)})),replaceRange:function(e,t,n,r){so(this,e,t=Se(this,t),n=n?Se(this,n):t,r)},getRange:function(e,t,n){var r=ce(this,Se(this,e),Se(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(pe(this,e))return se(this,e)},getLineNumber:function(e){return fe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=se(this,e)),je(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Se(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Kr((function(e,t,n){$i(this,Se(this,"number"==typeof e?ge(e,t||0):e),null,n)})),setSelection:Kr((function(e,t,n){$i(this,Se(this,e),Se(this,t||e),n)})),extendSelection:Kr((function(e,t,n){ji(this,Se(this,e),t&&Se(this,t),n)})),extendSelections:Kr((function(e,t){qi(this,Ce(this,e),t)})),extendSelectionsBy:Kr((function(e,t){qi(this,Ce(this,Y(this.sel.ranges,e)),t)})),setSelections:Kr((function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new vi(Se(this,e[i].anchor),Se(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Vi(this,yi(r,t),n)}})),addSelection:Kr((function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new vi(Se(this,e),Se(this,t||e))),Vi(this,yi(r,r.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=ce(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=ce(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Kr((function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}for(var l=t&&"end"!=t&&function(e,t,n){for(var r=[],i=ge(e.first,0),o=i,a=0;a<t.length;a++){var l=t[a],s=Si(l.from,i,o),c=Si(bi(l),i,o);if(i=l.to,o=c,"around"==n){var u=e.sel.ranges[a],h=ve(u.head,u.anchor)<0;r[a]=new vi(h?c:s,h?s:c)}else r[a]=new vi(s,s)}return new gi(r,e.sel.primIndex)}(this,r,t),s=r.length-1;0<=s;s--)ro(this,r[s]);l?Gi(this,l):this.cm&&Lr(this.cm)})),undo:Kr((function(){oo(this,"undo")})),redo:Kr((function(){oo(this,"redo")})),undoSelection:Kr((function(){oo(this,"undo",!0)})),redoSelection:Kr((function(){oo(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Oi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Pi(this.history.done),undone:Pi(this.history.undone)}},setHistory:function(e){var t=this.history=new Oi(this.history.maxGeneration);t.done=Pi(e.done.slice(0),null,!0),t.undone=Pi(e.undone.slice(0),null,!0)},setGutterMarker:Kr((function(e,n,r){return fo(this,e,"gutter",(function(e){var t=e.gutterMarkers||(e.gutterMarkers={});return!(t[n]=r)&&ne(t)&&(e.gutterMarkers=null),!0}))})),clearGutter:Kr((function(t){var n=this;this.iter((function(e){e.gutterMarkers&&e.gutterMarkers[t]&&fo(n,e,"gutter",(function(){return e.gutterMarkers[t]=null,ne(e.gutterMarkers)&&(e.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!pe(this,e))return null;if(!(e=se(this,t=e)))return null}else if(null==(t=fe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Kr((function(e,n,r){return fo(this,e,"gutter"==n?"gutter":"class",(function(e){var t="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(e[t]){if(C(r).test(e[t]))return!1;e[t]+=" "+r}else e[t]=r;return!0}))})),removeLineClass:Kr((function(e,o,a){return fo(this,e,"gutter"==o?"gutter":"class",(function(e){var t="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass",n=e[t];if(!n)return!1;if(null==a)e[t]=null;else{var r=n.match(C(a));if(!r)return!1;var i=r.index+r[0].length;e[t]=n.slice(0,r.index)+(r.index&&i!=n.length?" ":"")+n.slice(i)||null}return!0}))})),addLineWidget:Kr((function(e,t,n){return i=e,o=new go(r=this,t,n),(a=r.cm)&&o.noHScroll&&(a.display.alignWidgets=!0),fo(r,i,"widget",(function(e){var t=e.widgets||(e.widgets=[]);if(null==o.insertAt?t.push(o):t.splice(Math.min(t.length-1,Math.max(0,o.insertAt)),0,o),o.line=e,a&&!$e(r,e)){var n=Ve(e)<r.scrollTop;he(e,e.height+bn(o)),n&&Cr(a,o.height),a.curOp.forceUpdate=!0}return!0})),a&&sn(a,"lineWidgetAdded",a,o,"number"==typeof i?i:fe(i)),o;var r,i,o,a})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return bo(this,Se(this,e),Se(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return bo(this,e=Se(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=se(this,(e=Se(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(i,o,a){i=Se(this,i),o=Se(this,o);var l=[],s=i.line;return this.iter(i.line,o.line+1,(function(e){var t=e.markedSpans;if(t)for(var n=0;n<t.length;n++){var r=t[n];null!=r.to&&s==i.line&&i.ch>=r.to||null==r.from&&s!=i.line||null!=r.from&&s==o.line&&r.from>=o.ch||a&&!a(r.marker)||l.push(r.marker.parent||r.marker)}++s})),l},getAllMarks:function(){var r=[];return this.iter((function(e){var t=e.markedSpans;if(t)for(var n=0;n<t.length;++n)null!=t[n].from&&r.push(t[n].marker)})),r},posFromIndex:function(n){var r,i=this.first,o=this.lineSeparator().length;return this.iter((function(e){var t=e.text.length+o;if(n<t)return r=n,!0;n-=t,++i})),Se(this,ge(i,r))},indexFromPos:function(e){var t=(e=Se(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Lo(ue(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Lo(ue(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(ve(o,a)){var l=bo(e,o,a,r.primary,r.primary.type);r.markers.push(l),l.parent=r}}}(r,ko(this)),r},unlinkDoc:function(e){if(e instanceof ka&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),So(ko(this));break}if(e.history==this.history){var n=[e.id];Ni(e,(function(e){return n.push(e.id)}),!0),e.history=new Oi(null),e.history.done=Pi(this.history.done,n),e.history.undone=Pi(this.history.undone,n)}},iterLinkedDocs:function(e){Ni(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):wt(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Kr((function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&Gr(t=this.cm,(function(){Ei(t),Yr(t)})))}))}),Lo.prototype.eachLine=Lo.prototype.iter;var To=0;function Mo(e){var i=this;if(No(i),!ot(i,e)&&!wn(i.display,e)){ct(e),w&&(To=+new Date);var o=ar(i,e,!0),t=e.dataTransfer.files;if(o&&!i.isReadOnly())if(t&&t.length&&window.FileReader&&window.File)for(var a=t.length,l=Array(a),s=0,n=function(e,n){if(!i.options.allowDropFileTypes||-1!=P(i.options.allowDropFileTypes,e.type)){var r=new FileReader;r.onload=Vr(i,(function(){var e=r.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),l[n]=e,++s==a){var t={from:o=Se(i.doc,o),to:o,text:i.doc.splitLines(l.join(i.doc.lineSeparator())),origin:"paste"};ro(i.doc,t),Gi(i.doc,xi(o,bi(t)))}})),r.readAsText(e)}},r=0;r<a;++r)n(t[r],r);else{if(i.state.draggingText&&-1<i.doc.sel.contains(o))return i.state.draggingText(e),void setTimeout((function(){return i.display.input.focus()}),20);try{var c=e.dataTransfer.getData("Text");if(c){var u;if(i.state.draggingText&&!i.state.draggingText.copy&&(u=i.listSelections()),Xi(i.doc,xi(o,o)),u)for(var h=0;h<u.length;++h)so(i.doc,"",u[h].anchor,u[h].head,"drag");i.replaceSelection(c,"around","paste"),i.display.input.focus()}}catch(e){}}}}function No(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ao(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}var Eo=!1;function Oo(){var e;Eo||(tt(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Ao(Io)}),100))})),tt(window,"blur",(function(){return Ao(vr)})),Eo=!0)}function Io(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Do={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ho=0;Ho<10;Ho++)Do[Ho+48]=Do[Ho+96]=String(Ho);for(var Ro=65;Ro<=90;Ro++)Do[Ro]=String.fromCharCode(Ro);for(var Bo=1;Bo<=12;Bo++)Do[Bo+111]=Do[Bo+63235]="F"+Bo;var Wo={};function Fo(e){var t,n,r,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else{if(!/^s(hift)?$/i.test(l))throw new Error("Unrecognized modifier name: "+l);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function zo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=Y(n.split(" "),Fo),o=0;o<i.length;o++){var a=void 0,l=void 0;o==i.length-1?(l=i.join(" "),a=r):(l=i.slice(0,o+1).join(" "),a="...");var s=t[l];if(s){if(s!=a)throw new Error("Inconsistent bindings for "+l)}else t[l]=a}delete e[n]}for(var c in t)e[c]=t[c];return e}function Po(e,t,n,r){var i=(t=Uo(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Po(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var a=Po(e,t.fallthrough[o],n,r);if(a)return a}}}function _o(e){var t="string"==typeof e?e:Do[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function jo(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(y?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(y?t.ctrlKey:t.metaKey)&&"Cmd"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function qo(e,t){if(g&&34==e.keyCode&&e.char)return!1;var n=Do[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),jo(n,e,t))}function Uo(e){return"string"==typeof e?Wo[e]:e}function $o(t,e){for(var n=t.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=e(n[i]);r.length&&ve(o.from,K(r).to)<=0;){var a=r.pop();if(ve(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}Gr(t,(function(){for(var e=r.length-1;0<=e;e--)so(t.doc,"",r[e].from,r[e].to,"+delete");Lr(t)}))}function Go(e,t,n){var r=oe(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Vo(e,t,n){var r=Go(e,t.ch,n);return null==r?null:new ge(t.line,r,n<0?"after":"before")}function Xo(e,t,n,r,i){if(e){var o=Qe(n,t.doc.direction);if(o){var a,l=i<0?K(o):o[0],s=i<0==(1==l.level)?"after":"before";if(0<l.level||"rtl"==t.doc.direction){var c=On(t,n);a=i<0?n.text.length-1:0;var u=In(t,c,a).top;a=ae((function(e){return In(t,c,e).top==u}),i<0==(1==l.level)?l.from:l.to-1,a),"before"==s&&(a=Go(n,a,1))}else a=i<0?l.to:l.from;return new ge(r,a,s)}}return new ge(r,i<0?n.text.length:0,i<0?"before":"after")}Wo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Wo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Wo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Wo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Wo.default=b?Wo.macDefault:Wo.pcDefault;var Ko={selectAll:to,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),q)},killLine:function(n){return $o(n,(function(e){if(e.empty()){var t=se(n.doc,e.head.line).text.length;return e.head.ch==t&&e.head.line<n.lastLine()?{from:e.head,to:ge(e.head.line+1,0)}:{from:e.head,to:ge(e.head.line,t)}}return{from:e.from(),to:e.to()}}))},deleteLine:function(t){return $o(t,(function(e){return{from:ge(e.from().line,0),to:Se(t.doc,ge(e.to().line+1,0))}}))},delLineLeft:function(e){return $o(e,(function(e){return{from:ge(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(n){return $o(n,(function(e){var t=n.charCoords(e.head,"div").top+5;return{from:n.coordsChar({left:0,top:t},"div"),to:e.from()}}))},delWrappedLineRight:function(r){return $o(r,(function(e){var t=r.charCoords(e.head,"div").top+5,n=r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:t},"div");return{from:e.from(),to:n}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ge(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ge(e.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy((function(e){return Yo(t,e.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy((function(e){return Zo(t,e.head)}),{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy((function(e){return function(e,t){var n=se(e.doc,t),r=function(e){for(var t;t=ze(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=fe(r)),Xo(!0,e,n,t,-1)}(t,e.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(n){return n.extendSelectionsBy((function(e){var t=n.cursorCoords(e.head,"div").top+5;return n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:t},"div")}),$)},goLineLeft:function(n){return n.extendSelectionsBy((function(e){var t=n.cursorCoords(e.head,"div").top+5;return n.coordsChar({left:0,top:t},"div")}),$)},goLineLeftSmart:function(r){return r.extendSelectionsBy((function(e){var t=r.cursorCoords(e.head,"div").top+5,n=r.coordsChar({left:0,top:t},"div");return n.ch<r.getLine(n.line).search(/\S/)?Zo(r,e.head):n}),$)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=F(e.getLine(o.line),o.ch,r);t.push(X(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(a){return Gr(a,(function(){for(var e=a.listSelections(),t=[],n=0;n<e.length;n++)if(e[n].empty()){var r=e[n].head,i=se(a.doc,r.line).text;if(i)if(r.ch==i.length&&(r=new ge(r.line,r.ch-1)),0<r.ch)r=new ge(r.line,r.ch+1),a.replaceRange(i.charAt(r.ch-1)+i.charAt(r.ch-2),ge(r.line,r.ch-2),r,"+transpose");else if(r.line>a.doc.first){var o=se(a.doc,r.line-1).text;o&&(r=new ge(r.line,1),a.replaceRange(i.charAt(0)+a.doc.lineSeparator()+o.charAt(o.length-1),ge(r.line-1,o.length-1),r,"+transpose"))}t.push(new vi(r,r))}a.setSelections(t)}))},newlineAndIndent:function(r){return Gr(r,(function(){for(var e=r.listSelections(),t=e.length-1;0<=t;t--)r.replaceRange(r.doc.lineSeparator(),e[t].anchor,e[t].head,"+input");e=r.listSelections();for(var n=0;n<e.length;n++)r.indentLine(e[n].from().line,null,!0);Lr(r)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Yo(e,t){var n=se(e.doc,t),r=je(n);return r!=n&&(t=fe(r)),Xo(!0,e,r,t,1)}function Zo(e,t){var n=Yo(e,t.line),r=se(e.doc,n.line),i=Qe(r,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return ge(n.line,a?0:o,n.sticky)}return n}function Jo(e,t,n){if("string"==typeof t&&!(t=Ko[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=j}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var Qo=new z;function ea(e,t,n,r){var i=e.state.keySeq;if(i){if(_o(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Qo.set(50,(function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())})),ta(e,i+" "+t,n,r))return!0}return ta(e,t,n,r)}function ta(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Po(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Po(t,e.options.extraKeys,n,e)||Po(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&sn(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(ct(n),dr(e)),!!i}function na(t,e){var n=qo(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?ea(t,"Shift-"+n,e,(function(e){return Jo(t,e,!0)}))||ea(t,n,e,(function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return Jo(t,e)})):ea(t,n,e,(function(e){return Jo(t,e)})))}var ra=null;function ia(e){if(this.curOp.focus=I(),!ot(this,e)){w&&k<11&&27==e.keyCode&&(e.returnValue=!1);var t=e.keyCode;this.display.shift=16==t||e.shiftKey;var n=na(this,e);g&&(ra=n?t:null,!n&&88==t&&!St&&(b?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),18!=t||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(T(t,"CodeMirror-crosshair"),rt(document,"keyup",n),rt(document,"mouseover",n))}D(t,"CodeMirror-crosshair"),tt(document,"keyup",n),tt(document,"mouseover",n)}(this)}}function oa(e){16==e.keyCode&&(this.doc.sel.shift=!1),ot(this,e)}function aa(e){if(!(wn(this.display,e)||ot(this,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var t=e.keyCode,n=e.charCode;if(g&&t==ra)return ra=null,void ct(e);if(!g||e.which&&!(e.which<10)||!na(this,e)){var r,i=String.fromCharCode(null==n?t:n);"\b"!=i&&(ea(r=this,"'"+i+"'",e,(function(e){return Jo(r,e,!0)}))||this.display.input.onKeyPress(e))}}}var la,sa,ca=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ua(e){var t=this,n=t.display;if(!(ot(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,wn(n,e))x||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!da(t,e)){var r,i,o,a=ar(t,e),l=pt(e),s=a?(r=a,i=l,o=+new Date,sa&&sa.compare(o,r,i)?(la=sa=null,"triple"):la&&la.compare(o,r,i)?(sa=new ca(o,r,i),la=null,"double"):(la=new ca(o,r,i),sa=null,"single")):"single";window.focus(),1==l&&t.state.selectingText&&t.state.selectingText(e),a&&function(n,e,r,t,i){var o="Click";return"double"==t?o="Double"+o:"triple"==t&&(o="Triple"+o),ea(n,jo(o=(1==e?"Left":2==e?"Middle":"Right")+o,i),i,(function(e){if("string"==typeof e&&(e=Ko[e]),!e)return!1;var t=!1;try{n.isReadOnly()&&(n.state.suppressEdits=!0),t=e(n,r)!=j}finally{n.state.suppressEdits=!1}return t}))}(t,l,a,s,e)||(1==l?a?function(e,t,n,r){w?setTimeout(B(pr,e),0):e.curOp.focus=I();var i,o=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(null==i.unit){var o=d?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=b?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(b?n.altKey:n.ctrlKey)),i}(e,n,r),a=e.doc.sel;e.options.dragDrop&&vt&&!e.isReadOnly()&&"single"==n&&-1<(i=a.contains(t))&&(ve((i=a.ranges[i]).from(),t)<0||0<t.xRel)&&(0<ve(i.to(),t)||t.xRel<0)?function(t,n,r,i){var o=t.display,a=!1,l=Vr(t,(function(e){x&&(o.scroller.draggable=!1),t.state.draggingText=!1,rt(o.wrapper.ownerDocument,"mouseup",l),rt(o.wrapper.ownerDocument,"mousemove",s),rt(o.scroller,"dragstart",c),rt(o.scroller,"drop",l),a||(ct(e),i.addNew||ji(t.doc,r,null,null,i.extend),x||w&&9==k?setTimeout((function(){o.wrapper.ownerDocument.body.focus(),o.input.focus()}),20):o.input.focus())})),s=function(e){a=a||10<=Math.abs(n.clientX-e.clientX)+Math.abs(n.clientY-e.clientY)},c=function(){return a=!0};x&&(o.scroller.draggable=!0),(t.state.draggingText=l).copy=!i.moveOnDrag,o.scroller.dragDrop&&o.scroller.dragDrop(),tt(o.wrapper.ownerDocument,"mouseup",l),tt(o.wrapper.ownerDocument,"mousemove",s),tt(o.scroller,"dragstart",c),tt(o.scroller,"drop",l),mr(t),setTimeout((function(){return o.input.focus()}),20)}(e,r,t,o):function(g,e,v,y){var a=g.display,x=g.doc;ct(e);var b,w,k=x.sel,t=k.ranges;if(y.addNew&&!y.extend?(w=x.sel.contains(v),b=-1<w?t[w]:new vi(v,v)):(b=x.sel.primary(),w=x.sel.primIndex),"rectangle"==y.unit)y.addNew||(b=new vi(v,v)),v=ar(g,e,!0,!0),w=-1;else{var n=ha(g,v,y.unit);b=y.extend?_i(b,n.anchor,n.head,y.extend):n}y.addNew?-1==w?(w=t.length,Vi(x,yi(t.concat([b]),w),{scroll:!1,origin:"*mouse"})):1<t.length&&t[w].empty()&&"char"==y.unit&&!y.extend?(Vi(x,yi(t.slice(0,w).concat(t.slice(w+1)),0),{scroll:!1,origin:"*mouse"}),k=x.sel):Ui(x,w,b,U):(Vi(x,new gi([b],w=0),U),k=x.sel);var S=v;function l(e){if(0!=ve(S,e))if(S=e,"rectangle"==y.unit){for(var t=[],n=g.options.tabSize,r=F(se(x,v.line).text,v.ch,n),i=F(se(x,e.line).text,e.ch,n),o=Math.min(r,i),a=Math.max(r,i),l=Math.min(v.line,e.line),s=Math.min(g.lastLine(),Math.max(v.line,e.line));l<=s;l++){var c=se(x,l).text,u=G(c,o,n);o==a?t.push(new vi(ge(l,u),ge(l,u))):c.length>u&&t.push(new vi(ge(l,u),ge(l,G(c,a,n))))}t.length||t.push(new vi(v,v)),Vi(x,yi(k.ranges.slice(0,w).concat(t),w),{origin:"*mouse",scroll:!1}),g.scrollIntoView(e)}else{var h,f=b,d=ha(g,e,y.unit),p=f.anchor;0<ve(d.anchor,p)?(h=d.head,p=we(f.from(),d.anchor)):(h=d.anchor,p=be(f.to(),d.head));var m=k.ranges.slice(0);m[w]=function(e,t){var n=t.anchor,r=t.head,i=se(e.doc,n.line);if(0==ve(n,r)&&n.sticky==r.sticky)return t;var o=Qe(i);if(!o)return t;var a=Ze(o,n.ch,n.sticky),l=o[a];if(l.from!=n.ch&&l.to!=n.ch)return t;var s,c=a+(l.from==n.ch==(1!=l.level)?0:1);if(0==c||c==o.length)return t;if(r.line!=n.line)s=0<(r.line-n.line)*("ltr"==e.doc.direction?1:-1);else{var u=Ze(o,r.ch,r.sticky),h=u-a||(r.ch-n.ch)*(1==l.level?-1:1);s=u==c-1||u==c?h<0:0<h}var f=o[c+(s?-1:0)],d=s==(1==f.level),p=d?f.from:f.to,m=d?"after":"before";return n.ch==p&&n.sticky==m?t:new vi(new ge(n.line,p,m),r)}(g,new vi(Se(x,p),h)),Vi(x,yi(m,w),U)}}var s=a.wrapper.getBoundingClientRect(),c=0;function r(e){g.state.selectingText=!1,c=1/0,ct(e),a.input.focus(),rt(a.wrapper.ownerDocument,"mousemove",i),rt(a.wrapper.ownerDocument,"mouseup",o),x.history.lastSelOrigin=null}var i=Vr(g,(function(e){0!==e.buttons&&pt(e)?function e(t){var n=++c,r=ar(g,t,!0,"rectangle"==y.unit);if(r)if(0!=ve(r,S)){g.curOp.focus=I(),l(r);var i=br(a,x);(r.line>=i.to||r.line<i.from)&&setTimeout(Vr(g,(function(){c==n&&e(t)})),150)}else{var o=t.clientY<s.top?-20:t.clientY>s.bottom?20:0;o&&setTimeout(Vr(g,(function(){c==n&&(a.scroller.scrollTop+=o,e(t))})),50)}}(e):r(e)})),o=Vr(g,r);g.state.selectingText=o,tt(a.wrapper.ownerDocument,"mousemove",i),tt(a.wrapper.ownerDocument,"mouseup",o)}(e,r,t,o)}(t,a,s,e):dt(e)==n.scroller&&ct(e):2==l?(a&&ji(t.doc,a),setTimeout((function(){return n.input.focus()}),20)):3==l&&(S?pa(t,e):mr(t)))}}function ha(e,t,n){if("char"==n)return new vi(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new vi(ge(t.line,0),Se(e.doc,ge(t.line+1,0)));var r=n(e,t);return new vi(r.from,r.to)}function fa(e,t,n,r){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ct(t);var a=e.display,l=a.lineDiv.getBoundingClientRect();if(o>l.bottom||!lt(e,n))return ht(t);o-=l.top-a.viewOffset;for(var s=0;s<e.options.gutters.length;++s){var c=a.gutters.childNodes[s];if(c&&c.getBoundingClientRect().right>=i)return it(e,n,e,de(e.doc,o),e.options.gutters[s],t),ht(t)}}function da(e,t){return fa(e,t,"gutterClick",!0)}function pa(e,t){wn(e.display,t)||function(e,t){return!!lt(e,"gutterContextMenu")&&fa(e,t,"gutterContextMenu",!1)}(e,t)||ot(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function ma(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),zn(e)}ca.prototype.compare=function(e,t,n){return this.time+400>e&&0==ve(t,this.pos)&&n==this.button};var ga={toString:function(){return"CodeMirror.Init"}},va={},ya={};function xa(e){ci(e),Yr(e),wr(e)}function ba(e,t,n){if(!t!=!(n&&n!=ga)){var r=e.display.dragFunctions,i=t?tt:rt;i(e.display.scroller,"dragstart",r.start),i(e.display.scroller,"dragenter",r.enter),i(e.display.scroller,"dragover",r.over),i(e.display.scroller,"dragleave",r.leave),i(e.display.scroller,"drop",r.drop)}}function wa(e){e.options.lineWrapping?(D(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(T(e.display.wrapper,"CodeMirror-wrap"),Ke(e)),or(e),Yr(e),zn(e),setTimeout((function(){return Rr(e)}),100)}function ka(e,t){var n=this;if(!(this instanceof ka))return new ka(e,t);this.options=t=t?W(t):{},W(va,t,!1),ui(t);var r=t.value;"string"==typeof r&&(r=new Lo(r,t.mode,null,t.lineSeparator,t.direction)),this.doc=r;var i=new ka.inputStyles[t.inputStyle](this),o=this.display=new le(e,r,i);for(var a in ci(o.wrapper.CodeMirror=this),ma(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Fr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new z,keySeq:null,specialChars:null},t.autofocus&&!f&&o.input.focus(),w&&k<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(i){var o=i.display;tt(o.scroller,"mousedown",Vr(i,ua)),tt(o.scroller,"dblclick",w&&k<11?Vr(i,(function(e){if(!ot(i,e)){var t=ar(i,e);if(t&&!da(i,e)&&!wn(i.display,e)){ct(e);var n=i.findWordAt(t);ji(i.doc,n.anchor,n.head)}}})):function(e){return ot(i,e)||ct(e)}),S||tt(o.scroller,"contextmenu",(function(e){return pa(i,e)}));var n,r={end:0};function a(){o.activeTouch&&(n=setTimeout((function(){return o.activeTouch=null}),1e3),(r=o.activeTouch).end=+new Date)}function l(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return 400<n*n+r*r}tt(o.scroller,"touchstart",(function(e){if(!ot(i,e)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(e)&&!da(i,e)){o.input.ensurePolled(),clearTimeout(n);var t=+new Date;o.activeTouch={start:t,moved:!1,prev:t-r.end<=300?r:null},1==e.touches.length&&(o.activeTouch.left=e.touches[0].pageX,o.activeTouch.top=e.touches[0].pageY)}})),tt(o.scroller,"touchmove",(function(){o.activeTouch&&(o.activeTouch.moved=!0)})),tt(o.scroller,"touchend",(function(e){var t=o.activeTouch;if(t&&!wn(o,e)&&null!=t.left&&!t.moved&&new Date-t.start<300){var n,r=i.coordsChar(o.activeTouch,"page");n=!t.prev||l(t,t.prev)?new vi(r,r):!t.prev.prev||l(t,t.prev.prev)?i.findWordAt(r):new vi(ge(r.line,0),Se(i.doc,ge(r.line+1,0))),i.setSelection(n.anchor,n.head),i.focus(),ct(e)}a()})),tt(o.scroller,"touchcancel",a),tt(o.scroller,"scroll",(function(){o.scroller.clientHeight&&(Ar(i,o.scroller.scrollTop),Or(i,o.scroller.scrollLeft,!0),it(i,"scroll",i))})),tt(o.scroller,"mousewheel",(function(e){return mi(i,e)})),tt(o.scroller,"DOMMouseScroll",(function(e){return mi(i,e)})),tt(o.wrapper,"scroll",(function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0})),o.dragFunctions={enter:function(e){ot(i,e)||ft(e)},over:function(e){ot(i,e)||(function(e,t){var n=ar(e,t);if(n){var r=document.createDocumentFragment();ur(e,n,r),e.display.dragCursor||(e.display.dragCursor=E("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),N(e.display.dragCursor,r)}}(i,e),ft(e))},start:function(e){return function(e,t){if(w&&(!e.state.draggingText||+new Date-To<100))ft(t);else if(!ot(e,t)&&!wn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!s)){var n=E("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",g&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),g&&n.parentNode.removeChild(n)}}(i,e)},drop:Vr(i,Mo),leave:function(e){ot(i,e)||No(i)}};var e=o.input.getField();tt(e,"keyup",(function(e){return oa.call(i,e)})),tt(e,"keydown",Vr(i,ia)),tt(e,"keypress",Vr(i,aa)),tt(e,"focus",(function(e){return gr(i,e)})),tt(e,"blur",(function(e){return vr(i,e)}))}(this),Oo(),Pr(this),this.curOp.forceUpdate=!0,Ai(this,r),t.autofocus&&!f||this.hasFocus()?setTimeout(B(gr,this),20):vr(this),ya)ya.hasOwnProperty(a)&&ya[a](n,t[a],ga);kr(this),t.finishInit&&t.finishInit(this);for(var l=0;l<Sa.length;++l)Sa[l](n);_r(this),x&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}ka.defaults=va,ka.optionHandlers=ya;var Sa=[];function Ca(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=zt(e,t).state:n="prev");var a=e.options.tabSize,l=se(o,t),s=F(l.text,null,a);l.stateAfter&&(l.stateAfter=null);var c,u=l.text.match(/^\s*/)[0];if(r||/\S/.test(l.text)){if("smart"==n&&((c=o.mode.indent(i,l.text.slice(u.length),l.text))==j||150<c)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?F(se(o,t-1).text,null,a):0:"add"==n?c=s+e.options.indentUnit:"subtract"==n?c=s-e.options.indentUnit:"number"==typeof n&&(c=s+n),c=Math.max(0,c);var h="",f=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/a);d;--d)f+=a,h+="\t";if(f<c&&(h+=X(c-f)),h!=u)return so(o,h,ge(t,0),ge(t,u.length),"+input"),!(l.stateAfter=null);for(var p=0;p<o.sel.ranges.length;p++){var m=o.sel.ranges[p];if(m.head.line==t&&m.head.ch<u.length){var g=ge(t,u.length);Ui(o,p,new vi(g,g));break}}}ka.defineInitHook=function(e){return Sa.push(e)};var La=null;function Ta(e){La=e}function Ma(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var a,l=e.state.pasteIncoming||"paste"==i,s=wt(t),c=null;if(l&&1<r.ranges.length)if(La&&La.text.join("\n")==t){if(r.ranges.length%La.text.length==0){c=[];for(var u=0;u<La.text.length;u++)c.push(o.splitLines(La.text[u]))}}else s.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=Y(s,(function(e){return[e]})));for(var h=r.ranges.length-1;0<=h;h--){var f=r.ranges[h],d=f.from(),p=f.to();f.empty()&&(n&&0<n?d=ge(d.line,d.ch-n):e.state.overwrite&&!l?p=ge(p.line,Math.min(se(o,p.line).text.length,p.ch+K(s).length)):La&&La.lineWise&&La.text.join("\n")==t&&(d=p=ge(d.line,0))),a=e.curOp.updateInput;var m={from:d,to:p,text:c?c[h%c.length]:s,origin:i||(l?"paste":e.state.cutIncoming?"cut":"+input")};ro(e.doc,m),sn(e,"inputRead",e,m)}t&&!l&&Aa(e,t),Lr(e),e.curOp.updateInput=a,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Na(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Gr(t,(function(){return Ma(t,n,0,null,"paste")})),!0}function Aa(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;0<=r;r--){var i=n.ranges[r];if(!(100<i.head.ch||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),a=!1;if(o.electricChars){for(var l=0;l<o.electricChars.length;l++)if(-1<t.indexOf(o.electricChars.charAt(l))){a=Ca(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(se(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Ca(e,i.head.line,"smart"));a&&sn(e,"electricInput",e,i.head.line)}}}function Ea(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:ge(i,0),head:ge(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Oa(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Ia(){var e=E("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=E("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return x?e.style.width="1000px":e.setAttribute("wrap","off"),u&&(e.style.border="1px solid black"),Oa(e),t}function Da(r,i,o,e,a){var t=i,n=o,l=se(r,i.line);function s(e){var t,n;if(null==(t=a?function(t,n,l,e){var s=Qe(n,t.doc.direction);if(!s)return Vo(n,l,e);l.ch>=n.text.length?(l.ch=n.text.length,l.sticky="before"):l.ch<=0&&(l.ch=0,l.sticky="after");var r=Ze(s,l.ch,l.sticky),i=s[r];if("ltr"==t.doc.direction&&i.level%2==0&&(0<e?i.to>l.ch:i.from<l.ch))return Vo(n,l,e);var o,c=function(e,t){return Go(n,e instanceof ge?e.ch:e,t)},a=function(e){return t.options.lineWrapping?(o=o||On(t,n),Zn(t,n,o,e)):{begin:0,end:n.text.length}},u=a("before"==l.sticky?c(l,-1):l.ch);if("rtl"==t.doc.direction||1==i.level){var h=1==i.level==e<0,f=c(l,h?1:-1);if(null!=f&&(h?f<=i.to&&f<=u.end:f>=i.from&&f>=u.begin)){var d=h?"before":"after";return new ge(l.line,f,d)}}var p=function(e,t,n){for(var r=function(e,t){return t?new ge(l.line,c(e,1),"before"):new ge(l.line,e,"after")};0<=e&&e<s.length;e+=t){var i=s[e],o=0<t==(1!=i.level),a=o?n.begin:c(n.end,-1);if(i.from<=a&&a<i.to)return r(a,o);if(a=o?i.from:c(i.to,-1),n.begin<=a&&a<n.end)return r(a,o)}},m=p(r+e,e,u);if(m)return m;var g=0<e?u.end:c(u.begin,-1);return null==g||0<e&&g==n.text.length||!(m=p(0<e?0:s.length-1,e,a(g)))?null:m}(r.cm,l,i,o):Vo(l,i,o))){if(e||(n=i.line+o)<r.first||n>=r.first+r.size||(i=new ge(n,i.ch,i.sticky),!(l=se(r,n))))return!1;i=Xo(a,r.cm,l,i.line,o)}else i=t;return!0}if("char"==e)s();else if("column"==e)s(!0);else if("word"==e||"group"==e)for(var c=null,u="group"==e,h=r.cm&&r.cm.getHelper(i,"wordChars"),f=!0;!(o<0)||s(!f);f=!1){var d=l.text.charAt(i.ch)||"\n",p=te(d,h)?"w":u&&"\n"==d?"n":!u||/\s/.test(d)?null:"p";if(!u||f||p||(p="s"),c&&c!=p){o<0&&(o=1,s(),i.sticky="after");break}if(p&&(c=p),0<o&&!s(!f))break}var m=Qi(r,i,t,n,!0);return ye(t,m)&&(m.hitSide=!0),m}function Ha(e,t,n,r){var i,o,a=e.doc,l=t.left;if("page"==r){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(s-.5*er(e.display),3);i=(0<n?t.bottom:t.top)+n*c}else"line"==r&&(i=0<n?t.bottom+3:t.top-3);for(;(o=Kn(e,l,i)).outside;){if(n<0?i<=0:i>=a.height){o.hitSide=!0;break}i+=5*n}return o}var Ra=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new z,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ba(e,t){var n=En(e,t.line);if(!n||n.hidden)return null;var r=se(e.doc,t.line),i=Nn(n,r,t.line),o=Qe(r,e.doc.direction),a="left";o&&(a=Ze(o,t.ch)%2?"right":"left");var l=Rn(i.map,t.ch,a);return l.offset="right"==l.collapse?l.end:l.start,l}function Wa(e,t){return t&&(e.bad=!0),e}function Fa(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return Wa(e.clipPos(ge(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return za(o,t,n)}}function za(c,e,t){var n=c.text.firstChild,r=!1;if(!e||!O(n,e))return Wa(ge(fe(c.line),0),!0);if(e==n&&(r=!0,e=n.childNodes[t],t=0,!e)){var i=c.rest?K(c.rest):c.line;return Wa(ge(fe(i),i.text.length),r)}var o=3==e.nodeType?e:null,a=e;for(o||1!=e.childNodes.length||3!=e.firstChild.nodeType||(o=e.firstChild,t&&(t=o.nodeValue.length));a.parentNode!=n;)a=a.parentNode;var u=c.measure,h=u.maps;function l(e,t,n){for(var r=-1;r<(h?h.length:0);r++)for(var i=r<0?u.map:h[r],o=0;o<i.length;o+=3){var a=i[o+2];if(a==e||a==t){var l=fe(r<0?c.line:c.rest[r]),s=i[o]+n;return(n<0||a!=e)&&(s=i[o+(n?1:0)]),ge(l,s)}}}var s=l(o,a,t);if(s)return Wa(s,r);for(var f=a.nextSibling,d=o?o.nodeValue.length-t:0;f;f=f.nextSibling){if(s=l(f,f.firstChild,0))return Wa(ge(s.line,s.ch-d),r);d+=f.textContent.length}for(var p=a.previousSibling,m=t;p;p=p.previousSibling){if(s=l(p,p.firstChild,-1))return Wa(ge(s.line,s.ch+m),r);m+=p.textContent.length}}Ra.prototype.init=function(e){var t=this,a=this,l=a.cm,s=a.div=e.lineDiv;function n(e){if(!ot(l,e)){if(l.somethingSelected())Ta({lineWise:!1,text:l.getSelections()}),"cut"==e.type&&l.replaceSelection("",null,"cut");else{if(!l.options.lineWiseCopyCut)return;var t=Ea(l);Ta({lineWise:!0,text:t.text}),"cut"==e.type&&l.operation((function(){l.setSelections(t.ranges,0,q),l.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var n=La.text.join("\n");if(e.clipboardData.setData("Text",n),e.clipboardData.getData("Text")==n)return void e.preventDefault()}var r=Ia(),i=r.firstChild;l.display.lineSpace.insertBefore(r,l.display.lineSpace.firstChild),i.value=La.text.join("\n");var o=document.activeElement;R(i),setTimeout((function(){l.display.lineSpace.removeChild(r),o.focus(),o==s&&a.showPrimarySelection()}),50)}}Oa(s,l.options.spellcheck),tt(s,"paste",(function(e){ot(l,e)||Na(e,l)||k<=11&&setTimeout(Vr(l,(function(){return t.updateFromDOM()})),20)})),tt(s,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),tt(s,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),tt(s,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),tt(s,"touchstart",(function(){return a.forceCompositionEnd()})),tt(s,"input",(function(){t.composing||t.readFromDOMSoon()})),tt(s,"copy",n),tt(s,"cut",n)},Ra.prototype.prepareSelection=function(){var e=cr(this.cm,!1);return e.focus=this.cm.state.focused,e},Ra.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ra.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ra.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),r=n.from(),i=n.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||i.line<t.display.viewFrom)e.removeAllRanges();else{var o=Fa(t,e.anchorNode,e.anchorOffset),a=Fa(t,e.focusNode,e.focusOffset);if(!o||o.bad||!a||a.bad||0!=ve(we(o,a),r)||0!=ve(be(o,a),i)){var l=t.display.view,s=r.line>=t.display.viewFrom&&Ba(t,r)||{node:l[0].measure.map[2],offset:0},c=i.line<t.display.viewTo&&Ba(t,i);if(!c){var u=l[l.length-1].measure,h=u.maps?u.maps[u.maps.length-1]:u.map;c={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(s&&c){var f,d=e.rangeCount&&e.getRangeAt(0);try{f=L(s.node,s.offset,c.offset,c.node)}catch(e){}f&&(!m&&t.state.focused?(e.collapse(s.node,s.offset),f.collapsed||(e.removeAllRanges(),e.addRange(f))):(e.removeAllRanges(),e.addRange(f)),d&&null==e.anchorNode?e.addRange(d):m&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Ra.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Ra.prototype.showMultipleSelections=function(e){N(this.cm.display.cursorDiv,e.cursors),N(this.cm.display.selectionDiv,e.selection)},Ra.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ra.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return O(this.div,t)},Ra.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ra.prototype.blur=function(){this.div.blur()},Ra.prototype.getField=function(){return this.div},Ra.prototype.supportsTouch=function(){return!0},Ra.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():Gr(this.cm,(function(){return t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}))},Ra.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ra.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(h&&a&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Fa(t,e.anchorNode,e.anchorOffset),r=Fa(t,e.focusNode,e.focusOffset);n&&r&&Gr(t,(function(){Vi(t.doc,xi(n,r),q),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))}}},Ra.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),a=o.from(),l=o.to();if(0==a.ch&&a.line>r.firstLine()&&(a=ge(a.line-1,se(r.doc,a.line-1).length)),l.ch==se(r.doc,l.line).text.length&&l.line<r.lastLine()&&(l=ge(l.line+1,0)),a.line<i.viewFrom||l.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(e=lr(r,a.line))?(t=fe(i.view[0].line),n=i.view[0].node):(t=fe(i.view[e].line),n=i.view[e-1].node.nextSibling);var s,c,u=lr(r,l.line);if(u==i.view.length-1?(s=i.viewTo-1,c=i.lineDiv.lastChild):(s=fe(i.view[u+1].line)-1,c=i.view[u+1].node.previousSibling),!n)return!1;for(var h=r.doc.splitLines(function(s,e,t,c,u){var n="",h=!1,f=s.doc.lineSeparator(),d=!1;function p(){h&&(n+=f,d&&(n+=f),h=d=!1)}function m(e){e&&(p(),n+=e)}function g(e){if(1==e.nodeType){var t=e.getAttribute("cm-text");if(t)return void m(t);var n,r=e.getAttribute("cm-marker");if(r){var i=s.findMarks(ge(c,0),ge(u+1,0),(l=+r,function(e){return e.id==l}));return void(i.length&&(n=i[0].find(0))&&m(ce(s.doc,n.from,n.to).join(f)))}if("false"==e.getAttribute("contenteditable"))return;var o=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;o&&p();for(var a=0;a<e.childNodes.length;a++)g(e.childNodes[a]);/^(pre|p)$/i.test(e.nodeName)&&(d=!0),o&&(h=!0)}else 3==e.nodeType&&m(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var l}for(;g(e),e!=t;)e=e.nextSibling,d=!1;return n}(r,n,c,t,s)),f=ce(r.doc,ge(t,0),ge(s,se(r.doc,s).text.length));1<h.length&&1<f.length;)if(K(h)==K(f))h.pop(),f.pop(),s--;else{if(h[0]!=f[0])break;h.shift(),f.shift(),t++}for(var d=0,p=0,m=h[0],g=f[0],v=Math.min(m.length,g.length);d<v&&m.charCodeAt(d)==g.charCodeAt(d);)++d;for(var y=K(h),x=K(f),b=Math.min(y.length-(1==h.length?d:0),x.length-(1==f.length?d:0));p<b&&y.charCodeAt(y.length-p-1)==x.charCodeAt(x.length-p-1);)++p;if(1==h.length&&1==f.length&&t==a.line)for(;d&&d>a.ch&&y.charCodeAt(y.length-p-1)==x.charCodeAt(x.length-p-1);)d--,p++;h[h.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),h[0]=h[0].slice(d).replace(/\u200b+$/,"");var w=ge(t,d),k=ge(s,f.length?K(f).length-p:0);return 1<h.length||h[0]||ve(w,k)?(so(r.doc,h,w,k,"+input"),!0):void 0},Ra.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ra.prototype.reset=function(){this.forceCompositionEnd()},Ra.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ra.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Ra.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Gr(this.cm,(function(){return Yr(e.cm)}))},Ra.prototype.setUneditable=function(e){e.contentEditable="false"},Ra.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Vr(this.cm,Ma)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Ra.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Ra.prototype.onContextMenu=function(){},Ra.prototype.resetPosition=function(){},Ra.prototype.needsContentAttribute=!0;var Pa,_a,ja,qa=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new z,this.hasSelection=!1,this.composing=null};qa.prototype.init=function(t){var e=this,n=this,r=this.cm;this.createField(t);var i=this.textarea;function o(e){if(!ot(r,e)){if(r.somethingSelected())Ta({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Ea(r);Ta({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,q):(n.prevInput="",i.value=t.text.join("\n"),R(i))}"cut"==e.type&&(r.state.cutIncoming=!0)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),u&&(i.style.width="0px"),tt(i,"input",(function(){w&&9<=k&&e.hasSelection&&(e.hasSelection=null),n.poll()})),tt(i,"paste",(function(e){ot(r,e)||Na(e,r)||(r.state.pasteIncoming=!0,n.fastPoll())})),tt(i,"cut",o),tt(i,"copy",o),tt(t.scroller,"paste",(function(e){wn(t,e)||ot(r,e)||(r.state.pasteIncoming=!0,n.focus())})),tt(t.lineSpace,"selectstart",(function(e){wn(t,e)||ct(e)})),tt(i,"compositionstart",(function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}})),tt(i,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},qa.prototype.createField=function(e){this.wrapper=Ia(),this.textarea=this.wrapper.firstChild},qa.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=cr(e);if(e.options.moveInputWithCursor){var i=Gn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},qa.prototype.showSelection=function(e){var t=this.cm.display;N(t.cursorDiv,e.cursors),N(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},qa.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&R(this.textarea),w&&9<=k&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",w&&9<=k&&(this.hasSelection=null))}},qa.prototype.getField=function(){return this.textarea},qa.prototype.supportsTouch=function(){return!1},qa.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!f||I()!=this.textarea))try{this.textarea.focus()}catch(e){}},qa.prototype.blur=function(){this.textarea.blur()},qa.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},qa.prototype.receivedFocus=function(){this.slowPoll()},qa.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},qa.prototype.fastPoll=function(){var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,(function e(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}))},qa.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||kt(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(w&&9<=k&&this.hasSelection===i||b&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var a=0,l=Math.min(r.length,i.length);a<l&&r.charCodeAt(a)==i.charCodeAt(a);)++a;return Gr(t,(function(){Ma(t,i.slice(a),r.length-a,null,e.composing?"*compose":null),1e3<i.length||-1<i.indexOf("\n")?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},qa.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},qa.prototype.onKeyPress=function(){w&&9<=k&&(this.hasSelection=null),this.fastPoll()},qa.prototype.onContextMenu=function(e){var n=this,r=n.cm,i=r.display,o=n.textarea,t=ar(r,e),a=i.scroller.scrollTop;if(t&&!g){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(t)&&Vr(r,Vi)(r.doc,xi(t),q);var l=o.style.cssText,s=n.wrapper.style.cssText;n.wrapper.style.cssText="position: absolute";var c,u=n.wrapper.getBoundingClientRect();if(o.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-u.top-5)+"px; left: "+(e.clientX-u.left-5)+"px;\n      z-index: 1000; background: "+(w?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",x&&(c=window.scrollY),i.input.focus(),x&&window.scrollTo(null,c),i.input.reset(),r.somethingSelected()||(o.value=n.prevInput=" "),n.contextMenuPending=!0,i.selForContextMenu=r.doc.sel,clearTimeout(i.detectingSelectAll),w&&9<=k&&f(),S){ft(e);var h=function(){rt(window,"mouseup",h),setTimeout(d,20)};tt(window,"mouseup",h)}else setTimeout(d,50)}function f(){if(null!=o.selectionStart){var e=r.somethingSelected(),t="​"+(e?o.value:"");o.value="⇚",o.value=t,n.prevInput=e?"":"​",o.selectionStart=1,o.selectionEnd=t.length,i.selForContextMenu=r.doc.sel}}function d(){if(n.contextMenuPending=!1,n.wrapper.style.cssText=s,o.style.cssText=l,w&&k<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=a),null!=o.selectionStart){(!w||w&&k<9)&&f();var e=0,t=function(){i.selForContextMenu==r.doc.sel&&0==o.selectionStart&&0<o.selectionEnd&&"​"==n.prevInput?Vr(r,to)(r):e++<10?i.detectingSelectAll=setTimeout(t,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(t,200)}}},qa.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},qa.prototype.setUneditable=function(){},qa.prototype.needsContentAttribute=!1,function(i){var o=i.optionHandlers;function e(e,t,r,n){i.defaults[e]=t,r&&(o[e]=n?function(e,t,n){n!=ga&&r(e,t,n)}:r)}i.defineOption=e,i.Init=ga,e("value","",(function(e,t){return e.setValue(t)}),!0),e("mode",null,(function(e,t){e.doc.modeOption=t,Ci(e)}),!0),e("indentUnit",2,Ci,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,(function(e){Li(e),zn(e),Yr(e)}),!0),e("lineSeparator",null,(function(e,r){if(e.doc.lineSep=r){var i=[],o=e.doc.first;e.doc.iter((function(e){for(var t=0;;){var n=e.text.indexOf(r,t);if(-1==n)break;t=n+r.length,i.push(ge(o,n))}o++}));for(var t=i.length-1;0<=t;t--)so(e.doc,r,i[t],ge(i[t].line,i[t].ch+r.length))}})),e("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=ga&&e.refresh()})),e("specialCharPlaceholder",Jt,(function(e){return e.refresh()}),!0),e("electricChars",!0),e("inputStyle",f?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),e("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),e("rtlMoveVisually",!p),e("wholeLineUpdateBefore",!0),e("theme","default",(function(e){ma(e),xa(e)}),!0),e("keyMap","default",(function(e,t,n){var r=Uo(t),i=n!=ga&&Uo(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)})),e("extraKeys",null),e("configureMouse",null),e("lineWrapping",!1,wa,!0),e("gutters",[],(function(e){ui(e.options),xa(e)}),!0),e("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?rr(e.display)+"px":"0",e.refresh()}),!0),e("coverGutterNextToScrollbar",!1,(function(e){return Rr(e)}),!0),e("scrollbarStyle","native",(function(e){Fr(e),Rr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),e("lineNumbers",!1,(function(e){ui(e.options),xa(e)}),!0),e("firstLineNumber",1,xa,!0),e("lineNumberFormatter",(function(e){return e}),xa,!0),e("showCursorWhenSelecting",!1,sr,!0),e("resetSelectionOnContextMenu",!0),e("lineWiseCopyCut",!0),e("pasteLinesPerSelection",!0),e("readOnly",!1,(function(e,t){"nocursor"==t&&(vr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),e("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),e("dragDrop",!0,ba),e("allowDropFileTypes",null),e("cursorBlinkRate",530),e("cursorScrollMargin",0),e("cursorHeight",1,sr,!0),e("singleCursorHeightPerLine",!0,sr,!0),e("workTime",100),e("workDelay",100),e("flattenSpans",!0,Li,!0),e("addModeClass",!1,Li,!0),e("pollInterval",100),e("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),e("historyEventDelay",1250),e("viewportMargin",10,(function(e){return e.refresh()}),!0),e("maxHighlightLength",1e4,Li,!0),e("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),e("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),e("autofocus",null),e("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0)}(ka),_a=(Pa=ka).optionHandlers,ja=Pa.helpers={},Pa.prototype={constructor:Pa,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var n=this.options,r=n[e];n[e]==t&&"mode"!=e||(n[e]=t,_a.hasOwnProperty(e)&&Vr(this,_a[e])(this,t,r),it(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Uo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Xr((function(e,t){var n=e.token?e:Pa.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:n,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},(function(e){return e.priority})),this.state.modeGen++,Yr(this)})),removeOverlay:Xr((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void Yr(this)}})),indentLine:Xr((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),pe(this.doc,e)&&Ca(this,e,t,n)})),indentSelection:Xr((function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(Ca(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Lr(this));else{var o=i.from(),a=i.to(),l=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var s=l;s<n;++s)Ca(this,s,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&0<c[r].from().ch&&Ui(this.doc,r,new vi(o,c[r].to()),q)}}})),getTokenAt:function(e,t){return Ut(this,e,t)},getLineTokens:function(e,t){return Ut(this,ge(e),t,!0)},getTokenTypeAt:function(e){e=Se(this.doc,e);var t,n=Ft(this,se(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var l=t?t.indexOf("overlay "):-1;return l<0?t:0==l?null:t.slice(0,l-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?Pa.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!ja.hasOwnProperty(t))return n;var r=ja[t],i=this.getModeAt(e);if("string"==typeof i[t])r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var a=r[i[t][o]];a&&n.push(a)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(var l=0;l<r._global.length;l++){var s=r._global[l];s.pred(i,this)&&-1==P(n,s.val)&&n.push(s.val)}return n},getStateAfter:function(e,t){var n=this.doc;return zt(this,(e=ke(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Gn(this,null==e?n.head:"object"==typeof e?Se(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return $n(this,Se(this.doc,e),t||"page")},coordsChar:function(e,t){return Kn(this,(e=Un(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Un(this,{top:e,left:0},t||"page").top,de(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:o<e&&(e=o,i=!0),r=se(this.doc,e)}else r=e;return qn(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Ve(r):0)},defaultTextHeight:function(){return er(this.display)},defaultCharWidth:function(){return tr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o,l,s=this.display,c=(e=Gn(this,Se(this.doc,e))).bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==r)c=e.top;else if("above"==r||"near"==r){var h=Math.max(s.wrapper.clientHeight,this.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>h)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=h&&(c=e.bottom),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==i?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&(null!=(l=Sr(o=this,{left:u,top:c,right:u+t.offsetWidth,bottom:c+t.offsetHeight})).scrollTop&&Ar(o,l.scrollTop),null!=l.scrollLeft&&Or(o,l.scrollLeft))},triggerOnKeyDown:Xr(ia),triggerOnKeyPress:Xr(aa),triggerOnKeyUp:oa,triggerOnMouseDown:Xr(ua),execCommand:function(e){if(Ko.hasOwnProperty(e))return Ko[e].call(null,this)},triggerElectric:Xr((function(e){Aa(this,e)})),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=Se(this.doc,e),a=0;a<t&&!(o=Da(this.doc,o,i,n,r)).hitSide;++a);return o},moveH:Xr((function(t,n){var r=this;this.extendSelectionsBy((function(e){return r.display.shift||r.doc.extend||e.empty()?Da(r.doc,e.head,t,n,r.options.rtlMoveVisually):t<0?e.from():e.to()}),$)})),deleteH:Xr((function(n,r){var e=this.doc.sel,i=this.doc;e.somethingSelected()?i.replaceSelection("",null,"+delete"):$o(this,(function(e){var t=Da(i,e.head,n,r,!1);return n<0?{from:t,to:e.head}:{from:e.head,to:t}}))})),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var a=Se(this.doc,e),l=0;l<t;++l){var s=Gn(this,a,"div");if(null==o?o=s.left:s.left=o,(a=Ha(this,s,i,n)).hitSide)break}return a},moveV:Xr((function(r,i){var o=this,a=this.doc,l=[],s=!this.display.shift&&!a.extend&&a.sel.somethingSelected();if(a.extendSelectionsBy((function(e){if(s)return r<0?e.from():e.to();var t=Gn(o,e.head,"div");null!=e.goalColumn&&(t.left=e.goalColumn),l.push(t.left);var n=Ha(o,t,r,i);return"page"==i&&e==a.sel.primary()&&Cr(o,$n(o,n,"div").top-t.top),n}),$),l.length)for(var e=0;e<a.sel.ranges.length;e++)a.sel.ranges[e].goalColumn=l[e]})),findWordAt:function(e){var t=se(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!n?++r:--n;for(var o=t.charAt(n),a=te(o,i)?function(e){return te(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!te(e)};0<n&&a(t.charAt(n-1));)--n;for(;r<t.length&&a(t.charAt(r));)++r}return new vi(ge(e.line,n),ge(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?D(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite"),it(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==I()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Xr((function(e,t){Tr(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ln(this)-this.display.barHeight,width:e.scrollWidth-Ln(this)-this.display.barWidth,clientHeight:Mn(this),clientWidth:Tn(this)}},scrollIntoView:Xr((function(e,t){var n,r;null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ge(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?(r=e,Mr(n=this),n.curOp.scrollToPos=r):Nr(this,e.from,e.to,e.margin)})),setSize:Xr((function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&Fn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Zr(n,i,"widget");break}++i})),this.curOp.forceUpdate=!0,it(this,"refresh",this)})),operation:function(e){return Gr(this,e)},startOperation:function(){return Pr(this)},endOperation:function(){return _r(this)},refresh:Xr((function(){var e=this.display.cachedTextHeight;Yr(this),this.curOp.forceUpdate=!0,zn(this),Tr(this,this.doc.scrollLeft,this.doc.scrollTop),li(this),(null==e||.5<Math.abs(e-er(this.display)))&&or(this),it(this,"refresh",this)})),swapDoc:Xr((function(e){var t=this.doc;return t.cm=null,Ai(this,e),zn(this),this.display.input.reset(),Tr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,sn(this,"swapDoc",this,t),t})),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},st(Pa),Pa.registerHelper=function(e,t,n){ja.hasOwnProperty(e)||(ja[e]=Pa[e]={_global:[]}),ja[e][t]=n},Pa.registerGlobalHelper=function(e,t,n,r){Pa.registerHelper(e,t,r),ja[e]._global.push({pred:n,val:r})};var Ua,$a="iter insert remove copy getEditor constructor".split(" ");for(var Ga in Lo.prototype)Lo.prototype.hasOwnProperty(Ga)&&P($a,Ga)<0&&(ka.prototype[Ga]=function(e){return function(){return e.apply(this.doc,arguments)}}(Lo.prototype[Ga]));return st(Lo),ka.inputStyles={textarea:qa,contenteditable:Ra},ka.defineMode=function(e){ka.defaults.mode||"null"==e||(ka.defaults.mode=e),function(e,t){2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Lt[e]=t}.apply(this,arguments)},ka.defineMIME=function(e,t){Tt[e]=t},ka.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),ka.defineMIME("text/plain","null"),ka.defineExtension=function(e,t){ka.prototype[e]=t},ka.defineDocExtension=function(e,t){Lo.prototype[e]=t},ka.fromTextArea=function(t,e){if((e=e?W(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var n=I();e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function r(){t.value=l.getValue()}var i;if(t.form&&(tt(t.form,"submit",r),!e.leaveSubmitMethodAlone)){var o=t.form;i=o.submit;try{var a=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=a}}catch(e){}}e.finishInit=function(e){e.save=r,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,r(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(rt(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=i))}},t.style.display="none";var l=ka((function(e){return t.parentNode.insertBefore(e,t.nextSibling)}),e);return l},(Ua=ka).off=rt,Ua.on=tt,Ua.wheelEventPixels=pi,Ua.Doc=Lo,Ua.splitLines=wt,Ua.countColumn=F,Ua.findColumn=G,Ua.isWordChar=ee,Ua.Pass=j,Ua.signal=it,Ua.Line=Vt,Ua.changeEnd=bi,Ua.scrollbarModel=Wr,Ua.Pos=ge,Ua.cmpPos=ve,Ua.modes=Lt,Ua.mimeModes=Tt,Ua.resolveMode=Mt,Ua.getMode=Nt,Ua.modeExtensions=At,Ua.extendMode=Et,Ua.copyState=Ot,Ua.startState=Dt,Ua.innerMode=It,Ua.commands=Ko,Ua.keyMap=Wo,Ua.keyName=qo,Ua.isModifierKey=_o,Ua.lookupKey=Po,Ua.normalizeKeyMap=zo,Ua.StringStream=Ht,Ua.SharedTextMarker=wo,Ua.TextMarker=xo,Ua.LineWidget=go,Ua.e_preventDefault=ct,Ua.e_stopPropagation=ut,Ua.e_stop=ft,Ua.addClass=D,Ua.contains=O,Ua.rmClass=T,Ua.keyNames=Do,ka.version="5.39.0",ka},"object"==typeof n&&void 0!==t?t.exports=i():r.CodeMirror=i()},{}],11:[function(e,t,n){var r;r=function(a){"use strict";var l=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i;a.defineMode("gfm",(function(e,i){var o=0,t={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,t){if(t.combineTokens=null,t.codeBlock)return e.match(/^```+/)?t.codeBlock=!1:e.skipToEnd(),null;if(e.sol()&&(t.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),t.codeBlock=!0,null;if("`"===e.peek()){e.next();var n=e.pos;e.eatWhile("`");var r=1+e.pos-n;return t.code?r===o&&(t.code=!1):(o=r,t.code=!0),null}if(t.code)return e.next(),null;if(e.eatSpace())return t.ateSpace=!0,null;if((e.sol()||t.ateSpace)&&(t.ateSpace=!1)!==i.gitHubSpice){if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return t.combineTokens=!0,"link";if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return t.combineTokens=!0,"link"}return e.match(l)&&"]("!=e.string.slice(e.start-2,e.start)&&(0==e.start||/\W/.test(e.string.charAt(e.start-1)))?(t.combineTokens=!0,"link"):(e.next(),null)},blankLine:function(e){return e.code=!1,null}},n={taskLists:!0,strikethrough:!0,emoji:!0};for(var r in i)n[r]=i[r];return n.name="markdown",a.overlayMode(a.getMode(e,n),t)}),"markdown"),a.defineMIME("text/x-gfm","gfm")},"object"==typeof n&&"object"==typeof t?r(e("../../lib/codemirror"),e("../markdown/markdown"),e("../../addon/mode/overlay")):r(CodeMirror)},{"../../addon/mode/overlay":8,"../../lib/codemirror":10,"../markdown/markdown":12}],12:[function(e,t,n){var r;r=function(R){"use strict";R.defineMode("markdown",(function(p,w){var k=R.getMode(p,"text/html"),i="null"==k.name;void 0===w.highlightFormatting&&(w.highlightFormatting=!1),void 0===w.maxBlockquoteDepth&&(w.maxBlockquoteDepth=0),void 0===w.taskLists&&(w.taskLists=!1),void 0===w.strikethrough&&(w.strikethrough=!1),void 0===w.emoji&&(w.emoji=!1),void 0===w.fencedCodeBlockHighlighting&&(w.fencedCodeBlockHighlighting=!0),void 0===w.xml&&(w.xml=!0),void 0===w.tokenTypeOverrides&&(w.tokenTypeOverrides={});var S={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var e in S)S.hasOwnProperty(e)&&w.tokenTypeOverrides[e]&&(S[e]=w.tokenTypeOverrides[e]);var m=/^([*\-_])(?:\s*\1){2,}\s*$/,g=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,C=/^\[(x| )\](?=\s)/i,v=w.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,y=/^ *(?:\={1,}|-{1,})\s*$/,n=/^[^#!\[\]*_\\<>` "'(~:]+/,x=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,b=/^\s*\[[^\]]+?\]:.*$/,L=/[!\"#$%&\'()*+,\-\.\/:;<=>?@\[\\\]^_`{|}~—]/;function T(e,t,n){return t.f=t.inline=n,n(e,t)}function M(e,t,n){return t.f=t.block=n,n(e,t)}function r(e){if(e.linkTitle=!1,e.linkHref=!1,e.linkText=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,e.f==N){var t=i;if(!t){var n=R.innerMode(k,e.htmlState);t="xml"==n.mode.name&&null===n.state.tagStart&&!n.state.context&&n.state.tokenize.isInText}t&&(e.f=O,e.block=a,e.htmlState=null)}return e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine={stream:null},null}function a(e,t){var n,r=e.column()===t.indentation,i=!(n=t.prevLine.stream)||!/\S/.test(n.string),o=t.indentedCode,a=t.prevLine.hr,l=!1!==t.list,s=(t.listStack[t.listStack.length-1]||0)+3;t.indentedCode=!1;var c=t.indentation;if(null===t.indentationDiff&&(t.indentationDiff=t.indentation,l)){for(t.em=!1,t.strong=!1,t.code=!1,t.strikethrough=!1,t.list=null;c<t.listStack[t.listStack.length-1];)t.listStack.pop(),t.listStack.length?t.indentation=t.listStack[t.listStack.length-1]:t.list=!1;!1!==t.list&&(t.indentationDiff=c-t.listStack[t.listStack.length-1])}var u=!(i||a||t.prevLine.header||l&&o||t.prevLine.fencedCodeEnd),h=(!1===t.list||a||i)&&t.indentation<=s&&e.match(m),f=null;if(4<=t.indentationDiff&&(o||t.prevLine.fencedCodeEnd||t.prevLine.header||i))return e.skipToEnd(),t.indentedCode=!0,S.code;if(e.eatSpace())return null;if(r&&t.indentation<=s&&(f=e.match(v))&&f[1].length<=6)return t.quote=0,t.header=f[1].length,t.thisLine.header=!0,w.highlightFormatting&&(t.formatting="header"),t.f=t.inline,E(t);if(t.indentation<=s&&e.eat(">"))return t.quote=r?1:t.quote+1,w.highlightFormatting&&(t.formatting="quote"),e.eatSpace(),E(t);if(!h&&!t.setext&&r&&t.indentation<=s&&(f=e.match(g))){var d=f[1]?"ol":"ul";return t.indentation=c+e.current().length,t.list=!0,t.quote=0,t.listStack.push(t.indentation),w.taskLists&&e.match(C,!1)&&(t.taskList=!0),t.f=t.inline,w.highlightFormatting&&(t.formatting=["list","list-"+d]),E(t)}return r&&t.indentation<=s&&(f=e.match(x,!0))?(t.quote=0,t.fencedEndRE=new RegExp(f[1]+"+ *$"),t.localMode=w.fencedCodeBlockHighlighting&&function(e){if(R.findModeByName){var t=R.findModeByName(e);t&&(e=t.mime||t.mimes[0])}var n=R.getMode(p,e);return"null"==n.name?null:n}(f[2]),t.localMode&&(t.localState=R.startState(t.localMode)),t.f=t.block=A,w.highlightFormatting&&(t.formatting="code-block"),t.code=-1,E(t)):t.setext||!(u&&l||t.quote||!1!==t.list||t.code||h||b.test(e.string))&&(f=e.lookAhead(1))&&(f=f.match(y))?(t.setext?(t.header=t.setext,t.setext=0,e.skipToEnd(),w.highlightFormatting&&(t.formatting="header")):(t.header="="==f[0].charAt(0)?1:2,t.setext=t.header),t.thisLine.header=!0,t.f=t.inline,E(t)):h?(e.skipToEnd(),t.hr=!0,t.thisLine.hr=!0,S.hr):"["===e.peek()?T(e,t,H):T(e,t,t.inline)}function N(e,t){var n=k.token(e,t.htmlState);if(!i){var r=R.innerMode(k,t.htmlState);("xml"==r.mode.name&&null===r.state.tagStart&&!r.state.context&&r.state.tokenize.isInText||t.md_inside&&-1<e.current().indexOf(">"))&&(t.f=O,t.block=a,t.htmlState=null)}return n}function A(e,t){var n,r=t.listStack[t.listStack.length-1]||0,i=t.indentation<r,o=r+3;return t.fencedEndRE&&t.indentation<=o&&(i||e.match(t.fencedEndRE))?(w.highlightFormatting&&(t.formatting="code-block"),i||(n=E(t)),t.localMode=t.localState=null,t.block=a,t.f=O,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,i?M(e,t,t.block):n):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),S.code)}function E(e){var t=[];if(e.formatting){t.push(S.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var n=0;n<e.formatting.length;n++)t.push(S.formatting+"-"+e.formatting[n]),"header"===e.formatting[n]&&t.push(S.formatting+"-"+e.formatting[n]+"-"+e.header),"quote"===e.formatting[n]&&(!w.maxBlockquoteDepth||w.maxBlockquoteDepth>=e.quote?t.push(S.formatting+"-"+e.formatting[n]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(S.linkHref,"url"):(e.strong&&t.push(S.strong),e.em&&t.push(S.em),e.strikethrough&&t.push(S.strikethrough),e.emoji&&t.push(S.emoji),e.linkText&&t.push(S.linkText),e.code&&t.push(S.code),e.image&&t.push(S.image),e.imageAltText&&t.push(S.imageAltText,"link"),e.imageMarker&&t.push(S.imageMarker)),e.header&&t.push(S.header,S.header+"-"+e.header),e.quote&&(t.push(S.quote),!w.maxBlockquoteDepth||w.maxBlockquoteDepth>=e.quote?t.push(S.quote+"-"+e.quote):t.push(S.quote+"-"+w.maxBlockquoteDepth)),!1!==e.list){var r=(e.listStack.length-1)%3;r?1===r?t.push(S.list2):t.push(S.list3):t.push(S.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function t(e,t){if(e.match(n,!0))return E(t)}function O(e,t){var n=t.text(e,t);if(void 0!==n)return n;if(t.list)return t.list=null,E(t);if(t.taskList)return" "===e.match(C,!0)[1]?t.taskOpen=!0:t.taskClosed=!0,w.highlightFormatting&&(t.formatting="task"),t.taskList=!1,E(t);if(t.taskOpen=!1,t.taskClosed=!1,t.header&&e.match(/^#+$/,!0))return w.highlightFormatting&&(t.formatting="header"),E(t);var r=e.next();if(t.linkTitle){t.linkTitle=!1;var i=r;"("===r&&(i=")");var o="^\\s*(?:[^"+(i=(i+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+i;if(e.match(new RegExp(o),!0))return S.linkHref}if("`"===r){var a=t.formatting;w.highlightFormatting&&(t.formatting="code"),e.eatWhile("`");var l=e.current().length;if(0!=t.code||t.quote&&1!=l){if(l==t.code){var s=E(t);return t.code=0,s}return t.formatting=a,E(t)}return t.code=l,E(t)}if(t.code)return E(t);if("\\"===r&&(e.next(),w.highlightFormatting)){var c=E(t),u=S.formatting+"-escape";return c?c+" "+u:u}if("!"===r&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.imageMarker=!0,t.image=!0,w.highlightFormatting&&(t.formatting="image"),E(t);if("["===r&&t.imageMarker&&e.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return t.imageMarker=!1,t.imageAltText=!0,w.highlightFormatting&&(t.formatting="image"),E(t);if("]"===r&&t.imageAltText)return w.highlightFormatting&&(t.formatting="image"),c=E(t),t.imageAltText=!1,t.image=!1,t.inline=t.f=D,c;if("["===r&&!t.image)return t.linkText=!0,w.highlightFormatting&&(t.formatting="link"),E(t);if("]"===r&&t.linkText)return w.highlightFormatting&&(t.formatting="link"),c=E(t),t.linkText=!1,t.inline=t.f=e.match(/\(.*?\)| ?\[.*?\]/,!1)?D:O,c;if("<"===r&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return t.f=t.inline=I,w.highlightFormatting&&(t.formatting="link"),(c=E(t))?c+=" ":c="",c+S.linkInline;if("<"===r&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return t.f=t.inline=I,w.highlightFormatting&&(t.formatting="link"),(c=E(t))?c+=" ":c="",c+S.linkEmail;if(w.xml&&"<"===r&&e.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var h=e.string.indexOf(">",e.pos);if(-1!=h){var f=e.string.substring(e.start,h);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(f)&&(t.md_inside=!0)}return e.backUp(1),t.htmlState=R.startState(k),M(e,t,N)}if(w.xml&&"<"===r&&e.match(/^\/\w*?>/))return t.md_inside=!1,"tag";if("*"===r||"_"===r){for(var d=1,p=1==e.pos?" ":e.string.charAt(e.pos-2);d<3&&e.eat(r);)d++;var m=e.peek()||" ",g=!/\s/.test(m)&&(!L.test(m)||/\s/.test(p)||L.test(p)),v=!/\s/.test(p)&&(!L.test(p)||/\s/.test(m)||L.test(m)),y=null,x=null;if(d%2&&(t.em||!g||"*"!==r&&v&&!L.test(p)?t.em!=r||!v||"*"!==r&&g&&!L.test(m)||(y=!1):y=!0),1<d&&(t.strong||!g||"*"!==r&&v&&!L.test(p)?t.strong!=r||!v||"*"!==r&&g&&!L.test(m)||(x=!1):x=!0),null!=x||null!=y)return w.highlightFormatting&&(t.formatting=null==y?"strong":null==x?"em":"strong em"),!0===y&&(t.em=r),!0===x&&(t.strong=r),s=E(t),!1===y&&(t.em=!1),!1===x&&(t.strong=!1),s}else if(" "===r&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return E(t);e.backUp(1)}if(w.strikethrough)if("~"===r&&e.eatWhile(r)){if(t.strikethrough)return w.highlightFormatting&&(t.formatting="strikethrough"),s=E(t),t.strikethrough=!1,s;if(e.match(/^[^\s]/,!1))return t.strikethrough=!0,w.highlightFormatting&&(t.formatting="strikethrough"),E(t)}else if(" "===r&&e.match(/^~~/,!0)){if(" "===e.peek())return E(t);e.backUp(2)}if(w.emoji&&":"===r&&e.match(/^[a-z_\d+-]+:/)){t.emoji=!0,w.highlightFormatting&&(t.formatting="emoji");var b=E(t);return t.emoji=!1,b}return" "===r&&(e.match(/^ +$/,!1)?t.trailingSpace++:t.trailingSpace&&(t.trailingSpaceNewLine=!0)),E(t)}function I(e,t){if(">"===e.next()){t.f=t.inline=O,w.highlightFormatting&&(t.formatting="link");var n=E(t);return n?n+=" ":n="",n+S.linkInline}return e.match(/^[^>]+/,!0),S.linkInline}function D(e,t){if(e.eatSpace())return null;var i,n=e.next();return"("===n||"["===n?(t.f=t.inline=(i="("===n?")":"]",function(e,t){if(e.next()===i){t.f=t.inline=O,w.highlightFormatting&&(t.formatting="link-string");var r=E(t);return t.linkHref=!1,r}return e.match(o[i]),t.linkHref=!0,E(t)}),w.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,E(t)):"error"}var o={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function H(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=l,e.next(),w.highlightFormatting&&(t.formatting="link"),t.linkText=!0,E(t)):T(e,t,O)}function l(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=s,w.highlightFormatting&&(t.formatting="link");var n=E(t);return t.linkText=!1,n}return e.match(/^([^\]\\]|\\.)+/,!0),S.linkText}function s(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=O,S.linkHref+" url")}var c={startState:function(){return{f:a,prevLine:{stream:null},thisLine:{stream:null},block:a,htmlState:null,indentation:0,inline:O,text:t,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.thisLine,block:e.block,htmlState:e.htmlState&&R.copyState(k,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?R.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkText:e.linkText,linkTitle:e.linkTitle,linkHref:e.linkHref,code:e.code,em:e.em,strong:e.strong,strikethrough:e.strikethrough,emoji:e.emoji,header:e.header,setext:e.setext,hr:e.hr,taskList:e.taskList,list:e.list,listStack:e.listStack.slice(0),quote:e.quote,indentedCode:e.indentedCode,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside,fencedEndRE:e.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return r(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=N)){var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentation=n,t.indentationDiff=null,0<n)return null}}return t.f(e,t)},innerMode:function(e){return e.block==N?{state:e.htmlState,mode:k}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:c}},indent:function(e,t,n){return e.block==N&&k.indent?k.indent(e.htmlState,t,n):e.localState&&e.localMode.indent?e.localMode.indent(e.localState,t,n):R.Pass},blankLine:r,getType:E,closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return c}),"xml"),R.defineMIME("text/markdown","markdown"),R.defineMIME("text/x-markdown","markdown")},"object"==typeof n&&"object"==typeof t?r(e("../../lib/codemirror"),e("../xml/xml"),e("../meta")):r(CodeMirror)},{"../../lib/codemirror":10,"../meta":13,"../xml/xml":14}],13:[function(e,t,n){!function(o){"use strict";o.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var e=0;e<o.modeInfo.length;e++){var t=o.modeInfo[e];t.mimes&&(t.mime=t.mimes[0])}o.findModeByMIME=function(e){e=e.toLowerCase();for(var t=0;t<o.modeInfo.length;t++){var n=o.modeInfo[t];if(n.mime==e)return n;if(n.mimes)for(var r=0;r<n.mimes.length;r++)if(n.mimes[r]==e)return n}return/\+xml$/.test(e)?o.findModeByMIME("application/xml"):/\+json$/.test(e)?o.findModeByMIME("application/json"):void 0},o.findModeByExtension=function(e){for(var t=0;t<o.modeInfo.length;t++){var n=o.modeInfo[t];if(n.ext)for(var r=0;r<n.ext.length;r++)if(n.ext[r]==e)return n}},o.findModeByFileName=function(e){for(var t=0;t<o.modeInfo.length;t++){var n=o.modeInfo[t];if(n.file&&n.file.test(e))return n}var r=e.lastIndexOf("."),i=-1<r&&e.substring(r+1,e.length);if(i)return o.findModeByExtension(i)},o.findModeByName=function(e){e=e.toLowerCase();for(var t=0;t<o.modeInfo.length;t++){var n=o.modeInfo[t];if(n.name.toLowerCase()==e)return n;if(n.alias)for(var r=0;r<n.alias.length;r++)if(n.alias[r].toLowerCase()==e)return n}}}("object"==typeof n&&"object"==typeof t?e("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":10}],14:[function(e,t,n){!function(S){"use strict";var C={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},L={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};S.defineMode("xml",(function(e,t){var a,o,l=e.indentUnit,s={},n=t.htmlMode?C:L;for(var r in n)s[r]=n[r];for(var r in t)s[r]=t[r];function c(t,n){function e(e){return(n.tokenize=e)(t,n)}var r=t.next();return"<"==r?t.eat("!")?t.eat("[")?t.match("CDATA[")?e(i("atom","]]>")):null:t.match("--")?e(i("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),e(function r(i){return function(e,t){for(var n;null!=(n=e.next());){if("<"==n)return t.tokenize=r(i+1),t.tokenize(e,t);if(">"==n){if(1==i){t.tokenize=c;break}return t.tokenize=r(i-1),t.tokenize(e,t)}}return"meta"}}(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),n.tokenize=i("meta","?>"),"meta"):(a=t.eat("/")?"closeTag":"openTag",n.tokenize=u,"tag bracket"):"&"==r?(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error":(t.eatWhile(/[^&<]/),null)}function u(e,t){var n,r,i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=c,a=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return a="equals",null;if("<"==i){t.tokenize=c,t.state=p,t.tagName=t.tagStart=null;var o=t.tokenize(e,t);return o?o+" tag error":"tag error"}return/[\'\"]/.test(i)?(t.tokenize=(n=i,(r=function(e,t){for(;!e.eol();)if(e.next()==n){t.tokenize=u;break}return"string"}).isInAttribute=!0,r),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function i(n,r){return function(e,t){for(;!e.eol();){if(e.match(r)){t.tokenize=c;break}e.next()}return n}}function h(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(s.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function f(e){e.context&&(e.context=e.context.prev)}function d(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!s.contextGrabbers.hasOwnProperty(n)||!s.contextGrabbers[n].hasOwnProperty(t))return;f(e)}}function p(e,t,n){return"openTag"==e?(n.tagStart=t.column(),m):"closeTag"==e?g:p}function m(e,t,n){return"word"==e?(n.tagName=t.current(),o="tag",x):s.allowMissingTagName&&"endTag"==e?(o="tag bracket",x(e,t,n)):(o="error",m)}function g(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&s.implicitlyClosed.hasOwnProperty(n.context.tagName)&&f(n),n.context&&n.context.tagName==r||!1===s.matchClosing?(o="tag",v):(o="tag error",y)}return s.allowMissingTagName&&"endTag"==e?(o="tag bracket",v(e,t,n)):(o="error",y)}function v(e,t,n){return"endTag"!=e?(o="error",v):(f(n),p)}function y(e,t,n){return o="error",v(e,0,n)}function x(e,t,n){if("word"==e)return o="attribute",b;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||s.autoSelfClosers.hasOwnProperty(r)?d(n,r):(d(n,r),n.context=new h(n,r,i==n.indented)),p}return o="error",x}function b(e,t,n){return"equals"==e?w:(s.allowMissing||(o="error"),x(e,0,n))}function w(e,t,n){return"string"==e?k:"word"==e&&s.allowUnquoted?(o="string",x):(o="error",x(e,0,n))}function k(e,t,n){return"string"==e?k:x(e,0,n)}return c.isInText=!0,{startState:function(e){var t={tokenize:c,state:p,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;a=null;var n=t.tokenize(e,t);return(n||a)&&"comment"!=n&&(o=null,t.state=t.state(a||n,e,t),o&&(n="error"==o?n+" error":o)),n},indent:function(e,t,n){var r=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+l;if(r&&r.noIndent)return S.Pass;if(e.tokenize!=u&&e.tokenize!=c)return n?n.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==s.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+l*(s.multilineTagIndentFactor||1);if(s.alignCDATA&&/<!\[CDATA\[/.test(t))return 0;var i=t&&/^<(\/)?([\w_:\.-]*)/.exec(t);if(i&&i[1])for(;r;){if(r.tagName==i[2]){r=r.prev;break}if(!s.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(i)for(;r;){var o=s.contextGrabbers[r.tagName];if(!o||!o.hasOwnProperty(i[2]))break;r=r.prev}for(;r&&r.prev&&!r.startOfLine;)r=r.prev;return r?r.indent+l:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:s.htmlMode?"html":"xml",helperType:s.htmlMode?"html":"xml",skipAttribute:function(e){e.state==w&&(e.state=x)}}})),S.defineMIME("text/xml","xml"),S.defineMIME("application/xml","xml"),S.mimeModes.hasOwnProperty("text/html")||S.defineMIME("text/html",{name:"xml",htmlMode:!0})}("object"==typeof n&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],15:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,l=8*i-r-1,s=(1<<l)-1,c=s>>1,u=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-u)-1,d>>=-u,u+=l;0<u;o=256*o+e[t+h],h+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;0<u;a=256*a+e[t+h],h+=f,u-=8);if(0===o)o=1-c;else{if(o===s)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,l,s,c=8*o-i-1,u=(1<<c)-1,h=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),2<=(t+=1<=a+h?f/s:f*Math.pow(2,1-h))*s&&(a++,s/=2),u<=a+h?(l=0,a=u):1<=a+h?(l=(t*s-1)*Math.pow(2,i),a+=h):(l=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;e[n+d]=255&l,d+=p,l/=256,i-=8);for(a=a<<i|l,c+=i;0<c;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*m}},{}],16:[function(e,y,x){(function(e){!function(e){"use strict";var m={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:d,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:d,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:d,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function s(e){this.tokens=[],this.tokens.links={},this.options=e||v.defaults,this.rules=m.normal,this.options.pedantic?this.rules=m.pedantic:this.options.gfm&&(this.options.tables?this.rules=m.tables:this.rules=m.gfm)}m._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,m._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,m.def=t(m.def).replace("label",m._label).replace("title",m._title).getRegex(),m.bullet=/(?:[*+-]|\d+\.)/,m.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,m.item=t(m.item,"gm").replace(/bull/g,m.bullet).getRegex(),m.list=t(m.list).replace(/bull/g,m.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+m.def.source+")").getRegex(),m._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",m._comment=/<!--(?!-?>)[\s\S]*?-->/,m.html=t(m.html,"i").replace("comment",m._comment).replace("tag",m._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),m.paragraph=t(m.paragraph).replace("hr",m.hr).replace("heading",m.heading).replace("lheading",m.lheading).replace("tag",m._tag).getRegex(),m.blockquote=t(m.blockquote).replace("paragraph",m.paragraph).getRegex(),m.normal=p({},m),m.gfm=p({},m.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),m.gfm.paragraph=t(m.paragraph).replace("(?!","(?!"+m.gfm.fences.source.replace("\\1","\\2")+"|"+m.list.source.replace("\\1","\\3")+"|").getRegex(),m.tables=p({},m.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),m.pedantic=p({},m.normal,{html:t("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",m._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),s.rules=m,s.lex=function(e,t){return new s(t).lex(e)},s.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},s.prototype.token=function(e,t){var n,r,i,o,a,l,s,c,u,h,f,d,p;for(e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),1<i[0].length&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.nptable.exec(e))&&(l={type:"table",header:g(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(i[0].length),c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=g(l.cells[c],l.header.length);this.tokens.push(l)}else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),f=1<(o=i[2]).length,this.tokens.push({type:"list_start",ordered:f,start:f?+o:""}),n=!1,h=(i=i[0].match(this.rules.item)).length,c=0;c<h;c++)s=(l=i[c]).length,~(l=l.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(s-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+s+"}","gm"),"")),this.options.smartLists&&c!==h-1&&(o===(a=m.bullet.exec(i[c+1])[0])||1<o.length&&1<a.length||(e=i.slice(c+1).join("\n")+e,c=h-1)),r=n||/\n\n(?!\s*$)/.test(l),c!==h-1&&(n="\n"===l.charAt(l.length-1),r||(r=n)),p=void 0,(d=/^\[[ xX]\] /.test(l))&&(p=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),this.tokens.push({type:r?"loose_item_start":"list_item_start",task:d,checked:p}),this.token(l,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:i[0]});else if(t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),i[3]&&(i[3]=i[3].substring(1,i[3].length-1)),u=i[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[u]||(this.tokens.links[u]={href:i[2],title:i[3]});else if(t&&(i=this.rules.table.exec(e))&&(l={type:"table",header:g(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/(?: *\| *)?\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(i[0].length),c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=g(l.cells[c].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var n={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:d,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)|^__([^\s])__(?!_)|^\*\*([^\s])\*\*(?!\*)/,em:/^_([^\s][\s\S]*?[^\s_])_(?!_)|^_([^\s_][\s\S]*?[^\s])_(?!_)|^\*([^\s][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*][\s\S]*?[^\s])\*(?!\*)|^_([^\s_])_(?!_)|^\*([^\s*])\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:d,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function l(e,t){if(this.options=t||v.defaults,this.links=e,this.rules=n.normal,this.renderer=this.options.renderer||new r,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.options.breaks?this.rules=n.breaks:this.rules=n.gfm)}function r(e){this.options=e||v.defaults}function i(){}function c(e){this.tokens=[],this.token=null,this.options=e||v.defaults,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options}function u(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function h(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}function t(n,e){return n=n.source||n,e=e||"",{replace:function(e,t){return t=(t=t.source||t).replace(/(^|[^\[])\^/g,"$1"),n=n.replace(e,t),this},getRegex:function(){return new RegExp(n,e)}}}function o(e,t){return a[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?a[" "+e]=e+"/":a[" "+e]=e.replace(/[^/]*$/,"")),e=a[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}n._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,n._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,n._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,n.autolink=t(n.autolink).replace("scheme",n._scheme).replace("email",n._email).getRegex(),n._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,n.tag=t(n.tag).replace("comment",m._comment).replace("attribute",n._attribute).getRegex(),n._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|[^\[\]\\])*?/,n._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|(?:\\[()]?|\([^\s\x00-\x1f()\\]*\)|[^\s\x00-\x1f()\\])*?)/,n._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,n.link=t(n.link).replace("label",n._label).replace("href",n._href).replace("title",n._title).getRegex(),n.reflink=t(n.reflink).replace("label",n._label).getRegex(),n.normal=p({},n),n.pedantic=p({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:t(/^!?\[(label)\]\((.*?)\)/).replace("label",n._label).getRegex(),reflink:t(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",n._label).getRegex()}),n.gfm=p({},n.normal,{escape:t(n.escape).replace("])","~|])").getRegex(),url:t(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("email",n._email).getRegex(),_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:t(n.text).replace("]|","~]|").replace("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex()}),n.breaks=p({},n.gfm,{br:t(n.br).replace("{2,}","*").getRegex(),text:t(n.gfm.text).replace("{2,}","*").getRegex()}),l.rules=n,l.output=function(e,t,n){return new l(t,n).output(e)},l.prototype.output=function(e){for(var t,n,r,i,o,a="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),a+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),r="@"===o[2]?"mailto:"+(n=u(this.mangle(o[1]))):n=u(o[1]),a+=this.renderer.link(r,null,n);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),e=e.substring(o[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):u(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),this.inLink=!0,r=o[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=t[1],i=t[3]):i="":i=o[3]?o[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(o,{href:l.escapes(r),title:l.escapes(i)}),this.inLink=!1;else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){a+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),a+=this.renderer.strong(this.output(o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),a+=this.renderer.em(this.output(o[6]||o[5]||o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),a+=this.renderer.codespan(u(o[2].trim(),!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),a+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),a+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),a+=this.renderer.text(u(this.smartypants(o[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else o[0]=this.rules._backpedal.exec(o[0])[0],e=e.substring(o[0].length),"@"===o[2]?r="mailto:"+(n=u(o[0])):(n=u(o[0]),r="www."===o[1]?"http://"+n:n),a+=this.renderer.link(r,null,n);return a},l.escapes=function(e){return e?e.replace(l.rules._escapes,"$1"):e},l.prototype.outputLink=function(e,t){var n=t.href,r=t.title?u(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,u(e[1]))},l.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},l.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,i=0;i<r;i++)t=e.charCodeAt(i),.5<Math.random()&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},r.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+u(t,!0)+'">'+(n?e:u(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:u(e,!0))+"</code></pre>"},r.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},r.prototype.html=function(e){return e},r.prototype.heading=function(e,t,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},r.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},r.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},r.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},r.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},r.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},r.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},r.prototype.strong=function(e){return"<strong>"+e+"</strong>"},r.prototype.em=function(e){return"<em>"+e+"</em>"},r.prototype.codespan=function(e){return"<code>"+e+"</code>"},r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.prototype.del=function(e){return"<del>"+e+"</del>"},r.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(h(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return n}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return n}this.options.baseUrl&&!f.test(e)&&(e=o(this.options.baseUrl,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return n}var i='<a href="'+u(e)+'"';return t&&(i+=' title="'+t+'"'),i+">"+n+"</a>"},r.prototype.image=function(e,t,n){this.options.baseUrl&&!f.test(e)&&(e=o(this.options.baseUrl,e));var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+(this.options.xhtml?"/>":">")},r.prototype.text=function(e){return e},i.prototype.strong=i.prototype.em=i.prototype.codespan=i.prototype.del=i.prototype.text=function(e){return e},i.prototype.link=i.prototype.image=function(e,t,n){return""+n},i.prototype.br=function(){return""},c.parse=function(e,t){return new c(t).parse(e)},c.prototype.parse=function(e){this.inline=new l(e.links,this.options),this.inlineText=new l(e.links,p({},this.options,{renderer:new i})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},c.prototype.next=function(){return this.token=this.tokens.pop()},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,h(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,i="",o="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});o+=this.renderer.tablerow(n)}return this.renderer.table(i,o);case"blockquote_start":for(o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":o="";for(var a=this.token.ordered,l=this.token.start;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,a,l);case"list_item_start":for(o="",this.token.task&&(o+=this.renderer.checkbox(this.token.checked));"list_item_end"!==this.next().type;)o+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(o);case"loose_item_start":for(o="";"list_item_end"!==this.next().type;)o+=this.tok();return this.renderer.listitem(o);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var a={},f=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function d(){}function p(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function g(e,t){var n=e.replace(/([^\\])\|/g,"$1 |").split(/ +\| */),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].replace(/\\\|/g,"|");return n}function v(e,n,r){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(r||"function"==typeof n){r||(r=n,n=null);var i,o,a=(n=p({},v.defaults,n||{})).highlight,t=0;try{i=s.lex(e,n)}catch(e){return r(e)}o=i.length;var l=function(t){if(t)return n.highlight=a,r(t);var e;try{e=c.parse(i,n)}catch(e){t=e}return n.highlight=a,t?r(t):r(null,e)};if(!a||a.length<3)return l();if(delete n.highlight,!o)return l();for(;t<i.length;t++)!function(n){"code"!==n.type?--o||l():a(n.text,n.lang,(function(e,t){return e?l(e):null==t||t===n.text?--o||l():(n.text=t,n.escaped=!0,void(--o||l()))}))}(i[t])}else try{return n&&(n=p({},v.defaults,n)),c.parse(s.lex(e,n),n)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(n||v.defaults).silent)return"<p>An error occurred:</p><pre>"+u(e.message+"",!0)+"</pre>";throw e}}d.exec=d,v.options=v.setOptions=function(e){return p(v.defaults,e),v},v.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new r,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},v.defaults=v.getDefaults(),v.Parser=c,v.parser=c.parse,v.Renderer=r,v.TextRenderer=i,v.Lexer=s,v.lexer=s.lex,v.InlineLexer=l,v.inlineLexer=l.output,v.parse=v,void 0!==y&&"object"==typeof x?y.exports=v:e.marked=v}(this||("undefined"!=typeof window?window:e))}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(u,t,e){(function(c,p){var e;!function(){"use strict";(e=function(e,i,o,a){a=a||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=a.flags||{},this.memoized={},this.loaded=!1;var t,l,s,c,u,h=this;function n(e,t){var n=h._readFile(e,null,a.asyncLoad);a.asyncLoad?n.then((function(e){t(e)})):t(n)}function r(e){i=e,o&&d()}function f(e){o=e,i&&d()}function d(){for(h.rules=h._parseAFF(i),h.compoundRuleCodes={},l=0,c=h.compoundRules.length;l<c;l++){var e=h.compoundRules[l];for(s=0,u=e.length;s<u;s++)h.compoundRuleCodes[e[s]]=[]}for(l in"ONLYINCOMPOUND"in h.flags&&(h.compoundRuleCodes[h.flags.ONLYINCOMPOUND]=[]),h.dictionaryTable=h._parseDIC(o),h.compoundRuleCodes)0===h.compoundRuleCodes[l].length&&delete h.compoundRuleCodes[l];for(l=0,c=h.compoundRules.length;l<c;l++){var t=h.compoundRules[l],n="";for(s=0,u=t.length;s<u;s++){var r=t[s];r in h.compoundRuleCodes?n+="("+h.compoundRuleCodes[r].join("|")+")":n+=r}h.compoundRules[l]=new RegExp(n,"i")}h.loaded=!0,a.asyncLoad&&a.loadedCallback&&a.loadedCallback(h)}return e&&(h.dictionary=e,i&&o?d():"undefined"!=typeof window&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(t=a.dictionaryPath?a.dictionaryPath:"typo/dictionaries",i||n(chrome.extension.getURL(t+"/"+e+"/"+e+".aff"),r),o||n(chrome.extension.getURL(t+"/"+e+"/"+e+".dic"),f)):(t=a.dictionaryPath?a.dictionaryPath:void 0!==p?p+"/dictionaries":"./dictionaries",i||n(t+"/"+e+"/"+e+".aff",r),o||n(t+"/"+e+"/"+e+".dic",f))),this}).prototype={load:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this},_readFile:function(e,t,n){if(t=t||"utf8","undefined"!=typeof XMLHttpRequest){var r,i=new XMLHttpRequest;return i.open("GET",e,n),n&&(r=new Promise((function(e,t){i.onload=function(){200===i.status?e(i.responseText):t(i.statusText)},i.onerror=function(){t(i.statusText)}}))),i.overrideMimeType&&i.overrideMimeType("text/plain; charset="+t),i.send(null),n?r:i.responseText}if(void 0!==u){var o=u("fs");try{if(o.existsSync(e)){var a=o.statSync(e),l=o.openSync(e,"r"),s=new c(a.size);return o.readSync(l,s,0,s.length,null),s.toString(t,0,s.length)}console.log("Path "+e+" does not exist.")}catch(e){return console.log(e),""}}},_parseAFF:function(e){var t,n,r,i,o,a,l,s={},c=(e=this._removeAffixComments(e)).split("\n");for(i=0,a=c.length;i<a;i++){var u=(t=c[i]).split(/\s+/),h=u[0];if("PFX"==h||"SFX"==h){var f=u[1],d=u[2],p=[];for(l=(o=i+1)+(n=parseInt(u[3],10));o<l;o++){var m=(r=c[o].split(/\s+/))[2],g=r[3].split("/"),v=g[0];"0"===v&&(v="");var y=this.parseRuleCodes(g[1]),x=r[4],b={};b.add=v,0<y.length&&(b.continuationClasses=y),"."!==x&&(b.match="SFX"===h?new RegExp(x+"$"):new RegExp("^"+x)),"0"!=m&&(b.remove="SFX"===h?new RegExp(m+"$"):m),p.push(b)}s[f]={type:h,combineable:"Y"==d,entries:p},i+=n}else if("COMPOUNDRULE"===h){for(l=(o=i+1)+(n=parseInt(u[1],10));o<l;o++)r=(t=c[o]).split(/\s+/),this.compoundRules.push(r[1]);i+=n}else"REP"===h?3===(r=t.split(/\s+/)).length&&this.replacementTable.push([r[1],r[2]]):this.flags[h]=u[1]}return s},_removeAffixComments:function(e){return(e=(e=(e=e.replace(/^\s*#.*$/gm,"")).replace(/^\s\s*/m,"").replace(/\s\s*$/m,"")).replace(/\n{2,}/g,"\n")).replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_parseDIC:function(e){var t=(e=this._removeDicComments(e)).split("\n"),n={};function r(e,t){n.hasOwnProperty(e)||(n[e]=null),0<t.length&&(null===n[e]&&(n[e]=[]),n[e].push(t))}for(var i=1,o=t.length;i<o;i++){var a=t[i].split("/",2),l=a[0];if(1<a.length){var s=this.parseRuleCodes(a[1]);"NEEDAFFIX"in this.flags&&-1!=s.indexOf(this.flags.NEEDAFFIX)||r(l,s);for(var c=0,u=s.length;c<u;c++){var h=s[c],f=this.rules[h];if(f)for(var d=this._applyRule(l,f),p=0,m=d.length;p<m;p++){var g=d[p];if(r(g,[]),f.combineable)for(var v=c+1;v<u;v++){var y=s[v],x=this.rules[y];if(x&&x.combineable&&f.type!=x.type)for(var b=this._applyRule(g,x),w=0,k=b.length;w<k;w++)r(b[w],[])}}h in this.compoundRuleCodes&&this.compoundRuleCodes[h].push(l)}}else r(l.trim(),[])}return n},_removeDicComments:function(e){return e.replace(/^\t.*$/gm,"")},parseRuleCodes:function(e){if(!e)return[];if(!("FLAG"in this.flags))return e.split("");if("long"===this.flags.FLAG){for(var t=[],n=0,r=e.length;n<r;n+=2)t.push(e.substr(n,2));return t}return"num"===this.flags.FLAG?e.split(","):void 0},_applyRule:function(e,t){for(var n=t.entries,r=[],i=0,o=n.length;i<o;i++){var a=n[i];if(!a.match||e.match(a.match)){var l=e;if(a.remove&&(l=l.replace(a.remove,"")),"SFX"===t.type?l+=a.add:l=a.add+l,r.push(l),"continuationClasses"in a)for(var s=0,c=a.continuationClasses.length;s<c;s++){var u=this.rules[a.continuationClasses[s]];u&&(r=r.concat(this._applyRule(l,u)))}}}return r},check:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(t))return!0;if(t.toUpperCase()===t){var n=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(n,"KEEPCASE"))return!1;if(this.checkExact(n))return!0}var r=t.toLowerCase();if(r!==t){if(this.hasFlag(r,"KEEPCASE"))return!1;if(this.checkExact(r))return!0}return!1},checkExact:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t,n,r=this.dictionaryTable[e];if(void 0===r){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(t=0,n=this.compoundRules.length;t<n;t++)if(e.match(this.compoundRules[t]))return!0}else{if(null===r)return!0;if("object"==typeof r)for(t=0,n=r.length;t<n;t++)if(!this.hasFlag(e,"ONLYINCOMPOUND",r[t]))return!0}return!1},hasFlag:function(e,t,n){if(!this.loaded)throw"Dictionary not loaded.";return!(!(t in this.flags)||(void 0===n&&(n=Array.prototype.concat.apply([],this.dictionaryTable[e])),!n||-1===n.indexOf(this.flags[t])))},alphabet:"",suggest:function(e,u){if(!this.loaded)throw"Dictionary not loaded.";if(u=u||5,this.memoized.hasOwnProperty(e)){var t=this.memoized[e].limit;if(u<=t||this.memoized[e].suggestions.length<t)return this.memoized[e].suggestions.slice(0,u)}if(this.check(e))return[];for(var n=0,r=this.replacementTable.length;n<r;n++){var i=this.replacementTable[n];if(-1!==e.indexOf(i[0])){var o=e.replace(i[0],i[1]);if(this.check(o))return[o]}}var h=this;function f(e){var t,n,r,i,o,a,l=[];for(t=0,i=e.length;t<i;t++){var s=e[t];for(n=0,o=s.length+1;n<o;n++){var c=[s.substring(0,n),s.substring(n)];if(c[1]&&l.push(c[0]+c[1].substring(1)),1<c[1].length&&c[1][1]!==c[1][0]&&l.push(c[0]+c[1][1]+c[1][0]+c[1].substring(2)),c[1])for(r=0,a=h.alphabet.length;r<a;r++)h.alphabet[r]!=c[1].substring(0,1)&&l.push(c[0]+h.alphabet[r]+c[1].substring(1));if(c[1])for(r=0,a=h.alphabet.length;r<a;r++)l.push(c[0]+h.alphabet[r]+c[1])}}return l}return h.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[e]={suggestions:function(e){var t,n,r=f([e]),i=f(r),o=function(e){for(var t=[],n=0,r=e.length;n<r;n++)h.check(e[n])&&t.push(e[n]);return t}(r.concat(i)),a={};for(t=0,n=o.length;t<n;t++)o[t]in a?a[o[t]]+=1:a[o[t]]=1;var l=[];for(t in a)a.hasOwnProperty(t)&&l.push([t,a[t]]);l.sort((function(e,t){return e[1]<t[1]?-1:1})).reverse();var s=[],c="lowercase";for(e.toUpperCase()===e?c="uppercase":e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()===e&&(c="capitalized"),t=0,n=Math.min(u,l.length);t<n;t++)"uppercase"===c?l[t][0]=l[t][0].toUpperCase():"capitalized"===c&&(l[t][0]=l[t][0].substr(0,1).toUpperCase()+l[t][0].substr(1)),h.hasFlag(l[t][0],"NOSUGGEST")||s.push(l[t][0]);return s}(e),limit:u},this.memoized[e].suggestions}}}(),void 0!==t&&(t.exports=e)}).call(this,u("buffer").Buffer,"/node_modules/typo-js")},{buffer:3,fs:2}],18:[function(e,t,n){var r=e("codemirror");r.commands.tabAndIndentMarkdownList=function(e){var t=e.listSelections()[0].head;if(!1!==e.getStateAfter(t.line).list)e.execCommand("indentMore");else if(e.options.indentWithTabs)e.execCommand("insertTab");else{var n=Array(e.options.tabSize+1).join(" ");e.replaceSelection(n)}},r.commands.shiftTabAndUnindentMarkdownList=function(e){var t=e.listSelections()[0].head;if(!1!==e.getStateAfter(t.line).list)e.execCommand("indentLess");else if(e.options.indentWithTabs)e.execCommand("insertTab");else{var n=Array(e.options.tabSize+1).join(" ");e.replaceSelection(n)}}},{codemirror:10}],19:[function(e,t,n){"use strict";var c=e("codemirror");e("codemirror/addon/edit/continuelist.js"),e("./codemirror/tablist"),e("codemirror/addon/display/fullscreen.js"),e("codemirror/mode/markdown/markdown.js"),e("codemirror/addon/mode/overlay.js"),e("codemirror/addon/display/placeholder.js"),e("codemirror/addon/selection/mark-selection.js"),e("codemirror/mode/gfm/gfm.js"),e("codemirror/mode/xml/xml.js");var u=e("codemirror-spell-checker"),i=e("marked"),o=/Mac/.test(navigator.platform),a=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),h={toggleBold:r,toggleItalic:y,drawLink:E,toggleHeadingSmaller:k,toggleHeadingBigger:S,drawImage:O,toggleBlockquote:w,toggleOrderedList:N,toggleUnorderedList:M,toggleCodeBlock:b,togglePreview:W,toggleStrikethrough:x,toggleHeading1:C,toggleHeading2:L,toggleHeading3:T,cleanBlock:A,drawTable:I,drawHorizontalRule:D,undo:H,redo:R,toggleSideBySide:B,toggleFullScreen:v},l={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},s=function(e){for(var t in h)if(h[t]===e)return t;return null},f=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t};function d(e){return o?e.replace("Ctrl","Cmd"):e.replace("Cmd","Ctrl")}function p(e,t,n){e=e||{};var r=document.createElement("button");t=null==t||t,e.title&&t&&(r.title=function(e,t,n){var r,i=e;return t&&n[r=s(t)]&&(i+=" ("+d(n[r])+")"),i}(e.title,e.action,n),o&&(r.title=r.title.replace("Ctrl","⌘"),r.title=r.title.replace("Alt","⌥"))),e.noDisable&&r.classList.add("no-disable"),e.noMobile&&r.classList.add("no-mobile"),r.tabIndex=-1;var i=document.createElement("i");return i.className=e.className,r.appendChild(i),r}function m(e,t){t=t||e.getCursor("start");var n=e.getTokenAt(t);if(!n.type)return{};for(var r,i,o=n.type.split(" "),a={},l=0;l<o.length;l++)"strong"===(r=o[l])?a.bold=!0:"variable-2"===r?(i=e.getLine(t.line),/^\s*\d+\.\s/.test(i)?a["ordered-list"]=!0:a["unordered-list"]=!0):"atom"===r?a.quote=!0:"em"===r?a.italic=!0:"quote"===r?a.quote=!0:"strikethrough"===r?a.strikethrough=!0:"comment"===r?a.code=!0:"link"===r?a.link=!0:"tag"===r?a.image=!0:r.match(/^header(-[1-6])?$/)&&(a[r.replace("header","heading")]=!0);return a}var g="";function v(e){var t=e.codemirror;t.setOption("fullScreen",!t.getOption("fullScreen")),t.getOption("fullScreen")?(g=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=g;var n=t.getWrapperElement();if(/fullscreen/.test(n.previousSibling.className)?n.previousSibling.className=n.previousSibling.className.replace(/\s*fullscreen\b/,""):n.previousSibling.className+=" fullscreen",e.toolbarElements.fullscreen){var r=e.toolbarElements.fullscreen;/active/.test(r.className)?r.className=r.className.replace(/\s*active\s*/g,""):r.className+=" active"}var i=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(i.className)&&B(e)}function r(e){_(e,"bold",e.options.blockStyles.bold)}function y(e){_(e,"italic",e.options.blockStyles.italic)}function x(e){_(e,"strikethrough","~~")}function b(e){var t=e.options.blockStyles.code;function a(e){if("object"!=typeof e)throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof e+": "+e;return e.styles&&e.styles[2]&&-1!==e.styles[2].indexOf("formatting-code-block")}function l(e){return e.state.base.base||e.state.base}function n(e,t,n,r,i){n=n||e.getLineHandle(t),r=r||e.getTokenAt({line:t,ch:1}),i=i||!!n.text&&e.getTokenAt({line:t,ch:n.text.length-1});var o=r.type?r.type.split(" "):[];return i&&l(i).indentedCode?"indented":-1!==o.indexOf("comment")&&(l(r).fencedChars||l(i).fencedChars||a(n)?"fenced":"single")}var r,i,o,s,c,u,h,f,d,p,m,g,v=e.codemirror,y=v.getCursor("start"),x=v.getCursor("end"),b=v.getTokenAt({line:y.line,ch:y.ch||1}),w=v.getLineHandle(y.line),k=n(v,y.line,w,b);if("single"===k){var S=w.text.slice(0,y.ch).replace("`",""),C=w.text.slice(y.ch).replace("`","");v.replaceRange(S+C,{line:y.line,ch:0},{line:y.line,ch:99999999999999}),y.ch--,y!==x&&x.ch--,v.setSelection(y,x),v.focus()}else if("fenced"===k)if(y.line!==x.line||y.ch!==x.ch){for(r=y.line;0<=r&&!a(w=v.getLineHandle(r));r--);var L,T,M,N,A=l(v.getTokenAt({line:r,ch:1})).fencedChars;a(v.getLineHandle(y.line))?(L="",T=y.line):a(v.getLineHandle(y.line-1))?(L="",T=y.line-1):(L=A+"\n",T=y.line),a(v.getLineHandle(x.line))?(M="",N=x.line,0===x.ch&&(N+=1)):(M=0!==x.ch&&a(v.getLineHandle(x.line+1))?"":A+"\n",N=x.line+1),0===x.ch&&(N-=1),v.operation((function(){v.replaceRange(M,{line:N,ch:0},{line:N+(M?0:1),ch:0}),v.replaceRange(L,{line:T,ch:0},{line:T+(L?0:1),ch:0})})),v.setSelection({line:T+(L?1:0),ch:0},{line:N+(L?1:-1),ch:0}),v.focus()}else{var E=y.line;if(a(v.getLineHandle(y.line))&&("fenced"===n(v,y.line+1)?(r=y.line,E=y.line+1):(i=y.line,E=y.line-1)),void 0===r)for(r=E;0<=r&&!a(w=v.getLineHandle(r));r--);if(void 0===i)for(o=v.lineCount(),i=E;i<o&&!a(w=v.getLineHandle(i));i++);v.operation((function(){v.replaceRange("",{line:r,ch:0},{line:r+1,ch:0}),v.replaceRange("",{line:i-1,ch:0},{line:i,ch:0})})),v.focus()}else if("indented"===k){if(y.line!==x.line||y.ch!==x.ch)r=y.line,i=x.line,0===x.ch&&i--;else{for(r=y.line;0<=r;r--)if(!(w=v.getLineHandle(r)).text.match(/^\s*$/)&&"indented"!==n(v,r,w)){r+=1;break}for(o=v.lineCount(),i=y.line;i<o;i++)if(!(w=v.getLineHandle(i)).text.match(/^\s*$/)&&"indented"!==n(v,i,w)){i-=1;break}}var O=v.getLineHandle(i+1),I=O&&v.getTokenAt({line:i+1,ch:O.text.length-1});I&&l(I).indentedCode&&v.replaceRange("\n",{line:i+1,ch:0});for(var D=r;D<=i;D++)v.indentLine(D,"subtract");v.focus()}else{var H=y.line===x.line&&y.ch===x.ch&&0===y.ch,R=y.line!==x.line;H||R?(s=v,u=x,h=t,f=(c=y).line+1,d=u.line+1,m=h+"\n",g="\n"+h,(p=c.line!==u.line)&&d++,p&&0===u.ch&&(g=h+"\n",d--),F(s,!1,[m,g]),s.setSelection({line:f,ch:0},{line:d,ch:0})):F(v,!1,["`","`"])}}function w(e){P(e.codemirror,"quote")}function k(e){z(e.codemirror,"smaller")}function S(e){z(e.codemirror,"bigger")}function C(e){z(e.codemirror,void 0,1)}function L(e){z(e.codemirror,void 0,2)}function T(e){z(e.codemirror,void 0,3)}function M(e){P(e.codemirror,"unordered-list")}function N(e){P(e.codemirror,"ordered-list")}function A(e){!function(e){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className))for(var t,n=e.getCursor("start"),r=e.getCursor("end"),i=n.line;i<=r.line;i++)t=(t=e.getLine(i)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),e.replaceRange(t,{line:i,ch:0},{line:i,ch:99999999999999})}(e.codemirror)}function E(e){var t=e.codemirror,n=m(t),r=e.options,i="https://";if(r.promptURLs&&!(i=prompt(r.promptTexts.link)))return!1;F(t,n.link,r.insertTexts.link,i)}function O(e){var t=e.codemirror,n=m(t),r=e.options,i="https://";if(r.promptURLs&&!(i=prompt(r.promptTexts.image)))return!1;F(t,n.image,r.insertTexts.image,i)}function I(e){var t=e.codemirror,n=m(t),r=e.options;F(t,n.table,r.insertTexts.table)}function D(e){var t=e.codemirror,n=m(t),r=e.options;F(t,n.image,r.insertTexts.horizontalRule)}function H(e){var t=e.codemirror;t.undo(),t.focus()}function R(e){var t=e.codemirror;t.redo(),t.focus()}function B(e){var t=e.codemirror,n=t.getWrapperElement(),r=n.nextSibling,i=e.toolbarElements["side-by-side"],o=!1;/editor-preview-active-side/.test(r.className)?(r.className=r.className.replace(/\s*editor-preview-active-side\s*/g,""),i.className=i.className.replace(/\s*active\s*/g,""),n.className=n.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout((function(){t.getOption("fullScreen")||v(e),r.className+=" editor-preview-active-side"}),1),i.className+=" active",n.className+=" CodeMirror-sided",o=!0);var a=n.lastChild;if(/editor-preview-active/.test(a.className)){a.className=a.className.replace(/\s*editor-preview-active\s*/g,"");var l=e.toolbarElements.preview,s=n.previousSibling;l.className=l.className.replace(/\s*active\s*/g,""),s.className=s.className.replace(/\s*disabled-for-preview*/g,"")}t.sideBySideRenderingFunction||(t.sideBySideRenderingFunction=function(){r.innerHTML=e.options.previewRender(e.value(),r)}),o?(r.innerHTML=e.options.previewRender(e.value(),r),t.on("update",t.sideBySideRenderingFunction)):t.off("update",t.sideBySideRenderingFunction),t.refresh()}function W(e){var t=e.codemirror,n=t.getWrapperElement(),r=n.previousSibling,i=!!e.options.toolbar&&e.toolbarElements.preview,o=n.lastChild;o&&/editor-preview/.test(o.className)||((o=document.createElement("div")).className="editor-preview",n.appendChild(o)),/editor-preview-active/.test(o.className)?(o.className=o.className.replace(/\s*editor-preview-active\s*/g,""),i&&(i.className=i.className.replace(/\s*active\s*/g,""),r.className=r.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout((function(){o.className+=" editor-preview-active"}),1),i&&(i.className+=" active",r.className+=" disabled-for-preview")),o.innerHTML=e.options.previewRender(e.value(),o);var a=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(a.className)&&B(e)}function F(e,t,n,r){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){var i,o=n[0],a=n[1],l={},s={};Object.assign(l,e.getCursor("start")),Object.assign(s,e.getCursor("end")),r&&(a=a.replace("#url#",r)),t?(o=(i=e.getLine(l.line)).slice(0,l.ch),a=i.slice(l.ch),e.replaceRange(o+a,{line:l.line,ch:0})):(i=e.getSelection(),e.replaceSelection(o+i+a),l.ch+=o.length,l!==s&&(s.ch+=o.length)),e.setSelection(l,s),e.focus()}}function z(e,t,n){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var r,i,o,a=e.getCursor("start"),l=e.getCursor("end"),s=a.line;s<=l.line;s++)r=s,i=void 0,o=(i=e.getLine(r)).search(/[^#]/),i=void 0!==t?o<=0?"bigger"==t?"###### "+i:"# "+i:6==o&&"smaller"==t?i.substr(7):1==o&&"bigger"==t?i.substr(2):"bigger"==t?i.substr(1):"#"+i:1==n?o<=0?"# "+i:o==n?i.substr(o+1):"# "+i.substr(o+1):2==n?o<=0?"## "+i:o==n?i.substr(o+1):"## "+i.substr(o+1):o<=0?"### "+i:o==n?i.substr(o+1):"### "+i.substr(o+1),e.replaceRange(i,{line:r,ch:0},{line:r,ch:99999999999999});e.focus()}}function P(s,c){if(!/editor-preview-active/.test(s.getWrapperElement().lastChild.className)){for(var u=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,h=/^\s*/,f=m(s),e=s.getCursor("start"),t=s.getCursor("end"),d={quote:/^(\s*)>\s+/,"unordered-list":u,"ordered-list":u},p=1,n=e.line;n<=t.line;n++)!function(e){var t,n,r,i,o=s.getLine(e);if(f[c])o=o.replace(d[c],"$1");else{var a=u.exec(o),l=(i=p,{quote:">","unordered-list":"*","ordered-list":"%%i."}[c].replace("%%i",i));null!==a?(t=c,n=a[2],r=new RegExp({quote:">","unordered-list":"*","ordered-list":"d+."}[t]),n&&r.test(n)&&(l=""),o=a[1]+l+a[3]+o.replace(h,"").replace(d[c],"$1")):o=l+" "+o,p+=1}s.replaceRange(o,{line:e,ch:0},{line:e,ch:99999999999999})}(n);s.focus()}}function _(e,t,n,r){if(!/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className)){r=void 0===r?n:r;var i,o=e.codemirror,a=m(o),l=n,s=r,c=o.getCursor("start"),u=o.getCursor("end");a[t]?(l=(i=o.getLine(c.line)).slice(0,c.ch),s=i.slice(c.ch),"bold"==t?(l=l.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),s=s.replace(/(\*\*|__)/,"")):"italic"==t?(l=l.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),s=s.replace(/(\*|_)/,"")):"strikethrough"==t&&(l=l.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),s=s.replace(/(\*\*|~~)/,"")),o.replaceRange(l+s,{line:c.line,ch:0},{line:c.line,ch:99999999999999}),"bold"==t||"strikethrough"==t?(c.ch-=2,c!==u&&(u.ch-=2)):"italic"==t&&(c.ch-=1,c!==u&&(u.ch-=1))):(i=o.getSelection(),"bold"==t?i=(i=i.split("**").join("")).split("__").join(""):"italic"==t?i=(i=i.split("*").join("")).split("_").join(""):"strikethrough"==t&&(i=i.split("~~").join("")),o.replaceSelection(l+i+s),c.ch+=n.length,u.ch=c.ch+i.length),o.setSelection(c,u),o.focus()}}function j(e,t){for(var n in t)t.hasOwnProperty(n)&&(t[n]instanceof Array?e[n]=t[n].concat(e[n]instanceof Array?e[n]:[]):null!==t[n]&&"object"==typeof t[n]&&t[n].constructor===Object?e[n]=j(e[n]||{},t[n]):e[n]=t[n]);return e}function q(e){for(var t=1;t<arguments.length;t++)e=j(e,arguments[t]);return e}function U(e){var t=e.match(/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),n=0;if(null===t)return n;for(var r=0;r<t.length;r++)19968<=t[r].charCodeAt(0)?n+=t[r].length:n+=1;return n}var $={bold:{name:"bold",action:r,className:"fa fa-bold",title:"Bold",default:!0},italic:{name:"italic",action:y,className:"fa fa-italic",title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:x,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:k,className:"fa fa-header fa-heading",title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:k,className:"fa fa-header fa-heading fa-header-x fa-header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:S,className:"fa fa-header fa-heading fa-header-x fa-header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:C,className:"fa fa-header fa-heading fa-header-x fa-header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:L,className:"fa fa-header fa-heading fa-header-x fa-header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:T,className:"fa fa-header fa-heading fa-header-x fa-header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:b,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:w,className:"fa fa-quote-left",title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:M,className:"fa fa-list-ul",title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:N,className:"fa fa-list-ol",title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:A,className:"fa fa-eraser fa-clean-block",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:E,className:"fa fa-link",title:"Create Link",default:!0},image:{name:"image",action:O,className:"fa fa-image",title:"Insert Image",default:!0},table:{name:"table",action:I,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:D,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:W,className:"fa fa-eye",noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:B,className:"fa fa-columns",noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:v,className:"fa fa-arrows-alt",noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://simplemde.com/markdown-guide",className:"fa fa-question-circle",noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:H,className:"fa fa-undo",noDisable:!0,title:"Undo"},redo:{name:"redo",action:R,className:"fa fa-repeat",noDisable:!0,title:"Redo"}},G={link:["[","](#url#)"],image:["![](","#url#)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},V={link:"URL for the link:",image:"URL of the image:"},X={bold:"**",code:"```",italic:"*"};function K(e){(e=e||{}).parent=this;var t=!0;if(!1===e.autoDownloadFontAwesome&&(t=!1),!0!==e.autoDownloadFontAwesome)for(var n=document.styleSheets,r=0;r<n.length;r++)n[r].href&&-1<n[r].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")&&(t=!1);if(t){var i=document.createElement("link");i.rel="stylesheet",i.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(i)}if(e.element)this.element=e.element;else if(null===e.element)return void console.log("EasyMDE: Error. No element was found.");if(void 0===e.toolbar)for(var o in e.toolbar=[],$)$.hasOwnProperty(o)&&(-1!=o.indexOf("separator-")&&e.toolbar.push("|"),(!0===$[o].default||e.showIcons&&e.showIcons.constructor===Array&&-1!=e.showIcons.indexOf(o))&&e.toolbar.push(o));e.hasOwnProperty("status")||(e.status=["autosave","lines","words","cursor"]),e.previewRender||(e.previewRender=function(e){return this.parent.markdown(e)}),e.parsingConfig=q({highlightFormatting:!0},e.parsingConfig||{}),e.insertTexts=q({},G,e.insertTexts||{}),e.promptTexts=q({},V,e.promptTexts||{}),e.blockStyles=q({},X,e.blockStyles||{}),e.shortcuts=q({},l,e.shortcuts||{}),e.minHeight=e.minHeight||"300px",null!=e.autosave&&null!=e.autosave.unique_id&&""!=e.autosave.unique_id&&(e.autosave.uniqueId=e.autosave.unique_id),this.options=e,this.render(),!e.initialValue||this.options.autosave&&!0===this.options.autosave.foundSavedValue||this.value(e.initialValue)}function Y(){if("object"!=typeof localStorage)return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(e){return!1}return!0}K.prototype.markdown=function(e){if(i){var t;if(t=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&!1===this.options.renderingConfig.singleLineBreaks?t.breaks=!1:t.breaks=!0,this.options&&this.options.renderingConfig&&!0===this.options.renderingConfig.codeSyntaxHighlighting){var n=this.options.renderingConfig.hljs||window.hljs;n&&(t.highlight=function(e){return n.highlightAuto(e).value})}i.setOptions(t);var r=i(e);return function(e){for(var t;null!==(t=a.exec(e));){var n=t[0];if(-1===n.indexOf("target=")){var r=n.replace(/>$/,' target="_blank">');e=e.replace(n,r)}}return e}(r)}},K.prototype.render=function(e){if(e||(e=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==e){this.element=e;var t,n,r=this.options,i=this,o={};for(var a in r.shortcuts)null!==r.shortcuts[a]&&null!==h[a]&&function(e){o[d(r.shortcuts[e])]=function(){h[e](i)}}(a);if(o.Enter="newlineAndIndentContinueMarkdownList",o.Tab="tabAndIndentMarkdownList",o["Shift-Tab"]="shiftTabAndUnindentMarkdownList",o.Esc=function(e){e.getOption("fullScreen")&&v(i)},document.addEventListener("keydown",(function(e){27==(e=e||window.event).keyCode&&i.codemirror.getOption("fullScreen")&&v(i)}),!1),!1!==r.spellChecker?(t="spell-checker",(n=r.parsingConfig).name="gfm",n.gitHubSpice=!1,u({codeMirrorInstance:c})):((t=r.parsingConfig).name="gfm",t.gitHubSpice=!1),this.codemirror=c.fromTextArea(e,{mode:t,backdrop:n,theme:"paper",tabSize:null!=r.tabSize?r.tabSize:2,indentUnit:null!=r.tabSize?r.tabSize:2,indentWithTabs:!1!==r.indentWithTabs,lineNumbers:!1,autofocus:!0===r.autofocus,extraKeys:o,lineWrapping:!1!==r.lineWrapping,allowDropFileTypes:["text/plain"],placeholder:r.placeholder||e.getAttribute("placeholder")||"",styleSelectedText:null!=r.styleSelectedText?r.styleSelectedText:!f(),configureMouse:function(e,t,n){return{addNew:!1}}}),this.codemirror.getScrollerElement().style.minHeight=r.minHeight,!0===r.forceSync){var l=this.codemirror;l.on("change",(function(){l.save()}))}!(this.gui={})!==r.toolbar&&(this.gui.toolbar=this.createToolbar()),!1!==r.status&&(this.gui.statusbar=this.createStatusbar()),null!=r.autosave&&!0===r.autosave.enabled&&this.autosave(),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var s=this.codemirror;setTimeout(function(){s.refresh()}.bind(s),0)}},K.prototype.autosave=function(){if(Y()){var e=this;if(null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");null!=e.element.form&&null!=e.element.form&&e.element.form.addEventListener("submit",(function(){localStorage.removeItem("smde_"+e.options.autosave.uniqueId)})),!0!==this.options.autosave.loaded&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0),localStorage.setItem("smde_"+this.options.autosave.uniqueId,e.value());var t=document.getElementById("autosaved");if(null!=t&&null!=t&&""!=t){var n=new Date,r=n.getHours(),i=n.getMinutes(),o="am",a=r;12<=a&&(a=r-12,o="pm"),0==a&&(a=12),i=i<10?"0"+i:i,t.innerHTML="Autosaved: "+a+":"+i+" "+o}this.autosaveTimeoutId=setTimeout((function(){e.autosave()}),this.options.autosave.delay||1e4)}else console.log("EasyMDE: localStorage not available, cannot autosave")},K.prototype.clearAutosavedValue=function(){if(Y()){if(null==this.options.autosave||null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},K.prototype.createSideBySide=function(){var r=this.codemirror,e=r.getWrapperElement(),i=e.nextSibling;if(i&&/editor-preview-side/.test(i.className)||((i=document.createElement("div")).className="editor-preview-side",e.parentNode.insertBefore(i,e.nextSibling)),!1===this.options.syncSideBySidePreviewScroll)return i;var o=!1,a=!1;return r.on("scroll",(function(e){if(o)o=!1;else{a=!0;var t=e.getScrollInfo().height-e.getScrollInfo().clientHeight,n=parseFloat(e.getScrollInfo().top)/t,r=(i.scrollHeight-i.clientHeight)*n;i.scrollTop=r}})),i.onscroll=function(){if(a)a=!1;else{o=!0;var e=i.scrollHeight-i.clientHeight,t=parseFloat(i.scrollTop)/e,n=(r.getScrollInfo().height-r.getScrollInfo().clientHeight)*t;r.scrollTo(0,n)}},i},K.prototype.createToolbar=function(e){if((e=e||this.options.toolbar)&&0!==e.length){var t;for(t=0;t<e.length;t++)null!=$[e[t]]&&(e[t]=$[e[t]]);var r=document.createElement("div");r.className="editor-toolbar";var i=this,o={};for(i.toolbar=e,t=0;t<e.length;t++)if(("guide"!=e[t].name||!1!==i.options.toolbarGuideIcon)&&!(i.options.hideIcons&&-1!=i.options.hideIcons.indexOf(e[t].name)||("fullscreen"==e[t].name||"side-by-side"==e[t].name)&&f())){if("|"===e[t]){for(var n=!1,a=t+1;a<e.length;a++)"|"===e[a]||i.options.hideIcons&&-1!=i.options.hideIcons.indexOf(e[a].name)||(n=!0);if(!n)continue}!function(t){var e,n;"|"===t?((n=document.createElement("i")).className="separator",n.innerHTML="|",e=n):e=p(t,i.options.toolbarTips,i.options.shortcuts),t.action&&("function"==typeof t.action?e.onclick=function(e){e.preventDefault(),t.action(i)}:"string"==typeof t.action&&(e.onclick=function(e){e.preventDefault(),window.open(t.action,"_blank")})),o[t.name||t]=e,r.appendChild(e)}(e[t])}i.toolbarElements=o;var l=this.codemirror;l.on("cursorActivity",(function(){var e,t,n=m(l);for(var r in o)t=void 0,t=o[e=r],n[e]?t.className+=" active":"fullscreen"!=e&&"side-by-side"!=e&&(t.className=t.className.replace(/\s*active\s*/g,""))}));var s=l.getWrapperElement();return s.parentNode.insertBefore(r,s),r}},K.prototype.createStatusbar=function(e){e=e||this.options.status;var t=this.options,n=this.codemirror;if(e&&0!==e.length){var r,i,o,a=[];for(r=0;r<e.length;r++)if(o=i=void 0,"object"==typeof e[r])a.push({className:e[r].className,defaultValue:e[r].defaultValue,onUpdate:e[r].onUpdate});else{var l=e[r];"words"===l?(o=function(e){e.innerHTML=U(n.getValue())},i=function(e){e.innerHTML=U(n.getValue())}):"lines"===l?(o=function(e){e.innerHTML=n.lineCount()},i=function(e){e.innerHTML=n.lineCount()}):"cursor"===l?(o=function(e){e.innerHTML="0:0"},i=function(e){var t=n.getCursor();e.innerHTML=t.line+":"+t.ch}):"autosave"===l&&(o=function(e){null!=t.autosave&&!0===t.autosave.enabled&&e.setAttribute("id","autosaved")}),a.push({className:l,defaultValue:o,onUpdate:i})}var s=document.createElement("div");for(s.className="editor-statusbar",r=0;r<a.length;r++){var c=a[r],u=document.createElement("span");u.className=c.className,"function"==typeof c.defaultValue&&c.defaultValue(u),"function"==typeof c.onUpdate&&this.codemirror.on("update",function(e,t){return function(){t.onUpdate(e)}}(u,c)),s.appendChild(u)}var h=this.codemirror.getWrapperElement();return h.parentNode.insertBefore(s,h.nextSibling),s}},K.prototype.value=function(e){var t=this.codemirror;if(void 0===e)return t.getValue();if(t.getDoc().setValue(e),this.isPreviewActive()){var n=t.getWrapperElement().lastChild;n.innerHTML=this.options.previewRender(e,n)}return this},K.toggleBold=r,K.toggleItalic=y,K.toggleStrikethrough=x,K.toggleBlockquote=w,K.toggleHeadingSmaller=k,K.toggleHeadingBigger=S,K.toggleHeading1=C,K.toggleHeading2=L,K.toggleHeading3=T,K.toggleCodeBlock=b,K.toggleUnorderedList=M,K.toggleOrderedList=N,K.cleanBlock=A,K.drawLink=E,K.drawImage=O,K.drawTable=I,K.drawHorizontalRule=D,K.undo=H,K.redo=R,K.togglePreview=W,K.toggleSideBySide=B,K.toggleFullScreen=v,K.prototype.toggleBold=function(){r(this)},K.prototype.toggleItalic=function(){y(this)},K.prototype.toggleStrikethrough=function(){x(this)},K.prototype.toggleBlockquote=function(){w(this)},K.prototype.toggleHeadingSmaller=function(){k(this)},K.prototype.toggleHeadingBigger=function(){S(this)},K.prototype.toggleHeading1=function(){C(this)},K.prototype.toggleHeading2=function(){L(this)},K.prototype.toggleHeading3=function(){T(this)},K.prototype.toggleCodeBlock=function(){b(this)},K.prototype.toggleUnorderedList=function(){M(this)},K.prototype.toggleOrderedList=function(){N(this)},K.prototype.cleanBlock=function(){A(this)},K.prototype.drawLink=function(){E(this)},K.prototype.drawImage=function(){O(this)},K.prototype.drawTable=function(){I(this)},K.prototype.drawHorizontalRule=function(){D(this)},K.prototype.undo=function(){H(this)},K.prototype.redo=function(){R(this)},K.prototype.togglePreview=function(){W(this)},K.prototype.toggleSideBySide=function(){B(this)},K.prototype.toggleFullScreen=function(){v(this)},K.prototype.isPreviewActive=function(){var e=this.codemirror.getWrapperElement().lastChild;return/editor-preview-active/.test(e.className)},K.prototype.isSideBySideActive=function(){var e=this.codemirror.getWrapperElement().nextSibling;return/editor-preview-active-side/.test(e.className)},K.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},K.prototype.getState=function(){return m(this.codemirror)},K.prototype.toTextArea=function(){var e=this.codemirror,t=e.getWrapperElement();t.parentNode&&(this.gui.toolbar&&t.parentNode.removeChild(this.gui.toolbar),this.gui.statusbar&&t.parentNode.removeChild(this.gui.statusbar),this.gui.sideBySide&&t.parentNode.removeChild(this.gui.sideBySide)),e.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},t.exports=K},{"./codemirror/tablist":18,codemirror:10,"codemirror-spell-checker":4,"codemirror/addon/display/fullscreen.js":5,"codemirror/addon/display/placeholder.js":6,"codemirror/addon/edit/continuelist.js":7,"codemirror/addon/mode/overlay.js":8,"codemirror/addon/selection/mark-selection.js":9,"codemirror/mode/gfm/gfm.js":11,"codemirror/mode/markdown/markdown.js":12,"codemirror/mode/xml/xml.js":14,marked:16}]},{},[19])(19)},718:()=>{!function(document,window){"use strict";var inlineAttachment=function(options,instance){this.settings=inlineAttachment.util.merge(options,inlineAttachment.defaults),this.editor=instance,this.filenameTag="{filename}",this.lastValue=null};inlineAttachment.editors={},inlineAttachment.util={merge:function(){for(var result={},i=arguments.length-1;i>=0;i--){var obj=arguments[i];for(var k in obj)obj.hasOwnProperty(k)&&(result[k]=obj[k])}return result},appendInItsOwnLine:function(previous,appended){return(previous+"\n\n[[D]]"+appended).replace(/(\n{2,})\[\[D\]\]/,"\n\n").replace(/^(\n*)/,"")},insertTextAtCursor:function(el,text){var range,scrollPos=el.scrollTop,strPos=0,browser=!1;el.selectionStart||"0"===el.selectionStart?browser="ff":document.selection&&(browser="ie"),"ie"===browser?(el.focus(),(range=document.selection.createRange()).moveStart("character",-el.value.length),strPos=range.text.length):"ff"===browser&&(strPos=el.selectionStart);var front=el.value.substring(0,strPos),back=el.value.substring(strPos,el.value.length);el.value=front+text+back,strPos+=text.length,"ie"===browser?(el.focus(),(range=document.selection.createRange()).moveStart("character",-el.value.length),range.moveStart("character",strPos),range.moveEnd("character",0),range.select()):"ff"===browser&&(el.selectionStart=strPos,el.selectionEnd=strPos,el.focus()),el.scrollTop=scrollPos}},inlineAttachment.defaults={uploadUrl:"upload_attachment.php",uploadMethod:"POST",uploadFieldName:"file",defaultExtension:"png",jsonFieldName:"filename",allowedTypes:["image/jpeg","image/png","image/jpg","image/gif"],progressText:"![Uploading file...]()",urlText:"![file]({filename})",errorText:"Error uploading file",extraParams:{},extraHeaders:{},beforeFileUpload:function(){return!0},onFileReceived:function(){},onFileUploadResponse:function(){return!0},onFileUploadError:function(){return!0},onFileUploaded:function(){}},inlineAttachment.prototype.uploadFile=function(file){var me=this,formData=new FormData,xhr=new XMLHttpRequest,settings=this.settings,extension=settings.defaultExtension||settings.defualtExtension;if("function"==typeof settings.setupFormData&&settings.setupFormData(formData,file),file.name){var fileNameMatches=file.name.match(/\.(.+)$/);fileNameMatches&&(extension=fileNameMatches[1])}var remoteFilename="image-"+Date.now()+"."+extension;if("function"==typeof settings.remoteFilename&&(remoteFilename=settings.remoteFilename(file)),formData.append(settings.uploadFieldName,file,remoteFilename),"object"==typeof settings.extraParams)for(var key in settings.extraParams)settings.extraParams.hasOwnProperty(key)&&formData.append(key,settings.extraParams[key]);if(xhr.open("POST",settings.uploadUrl),"object"==typeof settings.extraHeaders)for(var header in settings.extraHeaders)settings.extraHeaders.hasOwnProperty(header)&&xhr.setRequestHeader(header,settings.extraHeaders[header]);return xhr.onload=function(){200===xhr.status||201===xhr.status?me.onFileUploadResponse(xhr):me.onFileUploadError(xhr)},!1!==settings.beforeFileUpload(xhr)&&xhr.send(formData),xhr},inlineAttachment.prototype.isFileAllowed=function(file){return"string"!==file.kind&&(0===this.settings.allowedTypes.indexOf("*")||this.settings.allowedTypes.indexOf(file.type)>=0)},inlineAttachment.prototype.onFileUploadResponse=function(xhr){if(!1!==this.settings.onFileUploadResponse.call(this,xhr)){var result=JSON.parse(xhr.responseText),filename=result[this.settings.jsonFieldName];if(result&&filename){var newValue;newValue="function"==typeof this.settings.urlText?this.settings.urlText.call(this,filename,result):this.settings.urlText.replace(this.filenameTag,filename);var text=this.editor.getValue().replace(this.lastValue,newValue);this.editor.setValue(text),this.settings.onFileUploaded.call(this,filename)}}},inlineAttachment.prototype.onFileUploadError=function(xhr){if(!1!==this.settings.onFileUploadError.call(this,xhr)){var text=this.editor.getValue().replace(this.lastValue,this.settings.errorText);this.editor.setValue(text)}},inlineAttachment.prototype.onFileInserted=function(file){!1!==this.settings.onFileReceived.call(this,file)&&(this.lastValue=this.settings.progressText,this.editor.insertValue(this.lastValue))},inlineAttachment.prototype.onPaste=function(e){var items,result=!1,clipboardData=e.clipboardData;if("object"==typeof clipboardData){items=clipboardData.items||clipboardData.files||[];for(var i=0;i<items.length;i++){var item=items[i];this.isFileAllowed(item)&&(result=!0,this.onFileInserted(item.getAsFile()),this.uploadFile(item.getAsFile()))}}return result&&e.preventDefault(),result},inlineAttachment.prototype.onDrop=function(e){for(var result=!1,i=0;i<e.dataTransfer.files.length;i++){var file=e.dataTransfer.files[i];this.isFileAllowed(file)&&(result=!0,this.onFileInserted(file),this.uploadFile(file))}return result},window.inlineAttachment=inlineAttachment}(document,window)},719:()=>{!function(){"use strict";inlineAttachment.editors.input={Editor:function(instance){var input=instance;return{getValue:function(){return input.value},insertValue:function(val){inlineAttachment.util.insertTextAtCursor(input,val)},setValue:function(val){input.value=val}}},attachToInput:function(input,options){options=options||{};var editor=new inlineAttachment.editors.input.Editor(input),inlineattach=new inlineAttachment(options,editor);input.addEventListener("paste",(function(e){inlineattach.onPaste(e)}),!1),input.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),inlineattach.onDrop(e)}),!1),input.addEventListener("dragenter",(function(e){e.stopPropagation(),e.preventDefault()}),!1),input.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault()}),!1)}}}()},334:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__;function FastClick(a,b){"use strict";function c(a,b){return function(){return a.apply(b,arguments)}}var d;if(b=b||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=b.touchBoundary||10,this.layer=a,this.tapDelay=b.tapDelay||200,!FastClick.notNeeded(a)){for(var e=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],f=this,g=0,h=e.length;h>g;g++)f[e[g]]=c(f[e[g]],f);deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(d=a.onclick,a.addEventListener("click",(function(a){d(a)}),!1),a.onclick=null)}}var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),deviceIsBlackBerry10=navigator.userAgent.indexOf("BB10")>0;FastClick.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},FastClick.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],(c=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.determineEventType=function(a){"use strict";return deviceIsAndroid&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(a){"use strict";var b;deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){"use strict";var b,c;if(!(b=a.fastClickScrollParent)||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],deviceIsIOS){if((d=window.getSelection()).rangeCount&&!d.isCollapsed)return!0;if(!deviceIsIOS4){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c},FastClick.prototype.onTouchMove=function(a){"use strict";return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0)},FastClick.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],(g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(d=g.tagName.toLowerCase())){if(b=this.findControl(g)){if(this.focus(g),deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.sendClick(g,a),deviceIsIOS&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return!(!deviceIsIOS||deviceIsIOS4||(e=g.fastClickScrollParent,!e||e.fastClickLastScrollTop===e.scrollTop))||(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){"use strict";return!this.targetElement||(!!a.forwardedTouchEvent||(!(a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick))||(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1)))},FastClick.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail||((b=this.onMouse(a))||(this.targetElement=null),b)},FastClick.prototype.destroy=function(){"use strict";var a=this.layer;deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){"use strict";var b,c,d;if(void 0===window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(c>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(deviceIsBlackBerry10&&((d=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&d[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction},FastClick.attach=function(a,b){"use strict";return new FastClick(a,b)},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){"use strict";return FastClick}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},101:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,V,W=[].slice,X={}.hasOwnProperty,Y=function(a,b){function c(){this.constructor=a}for(var d in b)X.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},Z=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};for(t={catchupTime:500,initialRate:.03,minTime:500,ghostTime:500,maxProgressPerFrame:10,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},B=function(){var a;return null!=(a="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?a:+new Date},D=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,s=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==D&&(D=function(a){return setTimeout(a,50)},s=function(a){return clearTimeout(a)}),F=function(a){var b,c;return b=B(),(c=function(){var d;return(d=B()-b)>=33?(b=B(),a(d,(function(){return D(c)}))):setTimeout(c,33-d)})()},E=function(){var a,b,c;return c=arguments[0],b=arguments[1],a=3<=arguments.length?W.call(arguments,2):[],"function"==typeof c[b]?c[b].apply(c,a):c[b]},u=function(){var a,b,c,d,e,f,g;for(b=arguments[0],f=0,g=(d=2<=arguments.length?W.call(arguments,1):[]).length;g>f;f++)if(c=d[f])for(a in c)X.call(c,a)&&(e=c[a],null!=b[a]&&"object"==typeof b[a]&&null!=e&&"object"==typeof e?u(b[a],e):b[a]=e);return b},p=function(a){var b,c,d,e,f;for(c=b=0,e=0,f=a.length;f>e;e++)d=a[e],c+=Math.abs(d),b++;return c/b},w=function(a,b){var c,d,e;if(null==a&&(a="options"),null==b&&(b=!0),e=document.querySelector("[data-pace-"+a+"]")){if(c=e.getAttribute("data-pace-"+a),!b)return c;try{return JSON.parse(c)}catch(f){return d=f,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",d):void 0}}},g=function(){function a(){}return a.prototype.on=function(a,b,c,d){var e;return null==d&&(d=!1),null==this.bindings&&(this.bindings={}),null==(e=this.bindings)[a]&&(e[a]=[]),this.bindings[a].push({handler:b,ctx:c,once:d})},a.prototype.once=function(a,b,c){return this.on(a,b,c,!0)},a.prototype.off=function(a,b){var c,d,e;if(null!=(null!=(d=this.bindings)?d[a]:void 0)){if(null==b)return delete this.bindings[a];for(c=0,e=[];c<this.bindings[a].length;)e.push(this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):c++);return e}},a.prototype.trigger=function(){var a,b,c,d,e,f,g,h,i;if(c=arguments[0],a=2<=arguments.length?W.call(arguments,1):[],null!=(g=this.bindings)?g[c]:void 0){for(e=0,i=[];e<this.bindings[c].length;)d=(h=this.bindings[c][e]).handler,b=h.ctx,f=h.once,d.apply(null!=b?b:this,a),i.push(f?this.bindings[c].splice(e,1):e++);return i}},a}(),null==window.Pace&&(window.Pace={}),u(Pace,g.prototype),C=Pace.options=u({},t,window.paceOptions,w()),P=0,R=(T=["ajax","document","eventLag","elements"]).length;R>P;P++)!0===C[J=T[P]]&&(C[J]=t[J]);i=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return Y(b,a),b}(Error),b=function(){function a(){this.progress=0}return a.prototype.getElement=function(){var a;if(null==this.el){if(!(a=document.querySelector(C.target)))throw new i;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=a.firstChild?a.insertBefore(this.el,a.firstChild):a.appendChild(this.el)}return this.el},a.prototype.finish=function(){var a;return(a=this.getElement()).className=a.className.replace("pace-active",""),a.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},a.prototype.update=function(a){return this.progress=a,this.render()},a.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(a){i=a}return this.el=void 0},a.prototype.render=function(){var a,b;return null!=document.querySelector(C.target)&&((a=this.getElement()).children[0].style.width=this.progress+"%",(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(a.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?b="99":(b=this.progress<10?"0":"",b+=0|this.progress),a.children[0].setAttribute("data-progress",""+b)),this.lastRenderedProgress=this.progress)},a.prototype.done=function(){return this.progress>=100},a}(),h=function(){function a(){this.bindings={}}return a.prototype.trigger=function(a,b){var c,d,e,f,g;if(null!=this.bindings[a]){for(g=[],d=0,e=(f=this.bindings[a]).length;e>d;d++)c=f[d],g.push(c.call(this,b));return g}},a.prototype.on=function(a,b){var c;return null==(c=this.bindings)[a]&&(c[a]=[]),this.bindings[a].push(b)},a}(),O=window.XMLHttpRequest,N=window.XDomainRequest,M=window.WebSocket,v=function(a,b){var d,e,f;for(d in f=[],b.prototype)try{e=b.prototype[d],f.push(null==a[d]&&"function"!=typeof e?a[d]=e:void 0)}catch(g){g}return f},z=[],Pace.ignore=function(){var a,b,c;return b=arguments[0],a=2<=arguments.length?W.call(arguments,1):[],z.unshift("ignore"),c=b.apply(null,a),z.shift(),c},Pace.track=function(){var a,b,c;return b=arguments[0],a=2<=arguments.length?W.call(arguments,1):[],z.unshift("track"),c=b.apply(null,a),z.shift(),c},I=function(a){var b;if(null==a&&(a="GET"),"track"===z[0])return"force";if(!z.length&&C.ajax){if("socket"===a&&C.ajax.trackWebSockets)return!0;if(b=a.toUpperCase(),Z.call(C.ajax.trackMethods,b)>=0)return!0}return!1},j=function(a){function b(){var a,c=this;b.__super__.constructor.apply(this,arguments),a=function(a){var b;return b=a.open,a.open=function(d,e){return I(d)&&c.trigger("request",{type:d,url:e,request:a}),b.apply(a,arguments)}},window.XMLHttpRequest=function(b){var c;return c=new O(b),a(c),c},v(window.XMLHttpRequest,O),null!=N&&(window.XDomainRequest=function(){var b;return b=new N,a(b),b},v(window.XDomainRequest,N)),null!=M&&C.ajax.trackWebSockets&&(window.WebSocket=function(a,b){var d;return d=null!=b?new M(a,b):new M(a),I("socket")&&c.trigger("request",{type:"socket",url:a,protocols:b,request:d}),d},v(window.WebSocket,M))}return Y(b,a),b}(h),Q=null,H=function(a){var b,c,d,e;for(c=0,d=(e=C.ajax.ignoreURLs).length;d>c;c++)if("string"==typeof(b=e[c])){if(-1!==a.indexOf(b))return!0}else if(b.test(a))return!0;return!1},(x=function(){return null==Q&&(Q=new j),Q})().on("request",(function(b){var c,d,e,f,g;return f=b.type,e=b.request,g=b.url,H(g)||Pace.running||!1===C.restartOnRequestAfter&&"force"!==I(f)?void 0:(d=arguments,"boolean"==typeof(c=C.restartOnRequestAfter||0)&&(c=0),setTimeout((function(){var c,g,h,i,j;if("socket"===f?e.readyState<2:0<(h=e.readyState)&&4>h){for(Pace.restart(),j=[],c=0,g=(i=Pace.sources).length;g>c;c++){if((J=i[c])instanceof a){J.watch.apply(J,d);break}j.push(void 0)}return j}}),c))})),a=function(){function a(){var a=this;this.elements=[],x().on("request",(function(){return a.watch.apply(a,arguments)}))}return a.prototype.watch=function(a){var b,c,d,e;return d=a.type,b=a.request,e=a.url,H(e)?void 0:(c="socket"===d?new m(b):new n(b),this.elements.push(c))},a}(),n=function(a){var b,d,e,f,g,h=this;if(this.progress=0,null!=window.ProgressEvent)for(a.addEventListener("progress",(function(a){return h.progress=a.lengthComputable?100*a.loaded/a.total:h.progress+(100-h.progress)/2})),d=0,e=(g=["load","abort","timeout","error"]).length;e>d;d++)b=g[d],a.addEventListener(b,(function(){return h.progress=100}));else f=a.onreadystatechange,a.onreadystatechange=function(){var b;return 0===(b=a.readyState)||4===b?h.progress=100:3===a.readyState&&(h.progress=50),"function"==typeof f?f.apply(null,arguments):void 0}},m=function(a){var b,c,d,e,f=this;for(this.progress=0,c=0,d=(e=["error","open"]).length;d>c;c++)b=e[c],a.addEventListener(b,(function(){return f.progress=100}))},d=function(a){var b,c,d,f;for(null==a&&(a={}),this.elements=[],null==a.selectors&&(a.selectors=[]),c=0,d=(f=a.selectors).length;d>c;c++)b=f[c],this.elements.push(new e(b))},e=function(){function a(a){this.selector=a,this.progress=0,this.check()}return a.prototype.check=function(){var a=this;return document.querySelector(this.selector)?this.done():setTimeout((function(){return a.check()}),C.elements.checkInterval)},a.prototype.done=function(){return this.progress=100},a}(),c=function(){function a(){var a,b,c=this;this.progress=null!=(b=this.states[document.readyState])?b:100,a=document.onreadystatechange,document.onreadystatechange=function(){return null!=c.states[document.readyState]&&(c.progress=c.states[document.readyState]),"function"==typeof a?a.apply(null,arguments):void 0}}return a.prototype.states={loading:0,interactive:50,complete:100},a}(),f=function(){var a,b,c,d,e,f=this;this.progress=0,a=0,e=[],d=0,c=B(),b=setInterval((function(){var g;return g=B()-c-50,c=B(),e.push(g),e.length>C.eventLag.sampleCount&&e.shift(),a=p(e),++d>=C.eventLag.minSamples&&a<C.eventLag.lagThreshold?(f.progress=100,clearInterval(b)):f.progress=3/(a+3)*100}),50)},l=function(){function a(a){this.source=a,this.last=this.sinceLastUpdate=0,this.rate=C.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=E(this.source,"progress"))}return a.prototype.tick=function(a,b){var c;return null==b&&(b=E(this.source,"progress")),b>=100&&(this.done=!0),b===this.last?this.sinceLastUpdate+=a:(this.sinceLastUpdate&&(this.rate=(b-this.last)/this.sinceLastUpdate),this.catchup=(b-this.progress)/C.catchupTime,this.sinceLastUpdate=0,this.last=b),b>this.progress&&(this.progress+=this.catchup*a),c=1-Math.pow(this.progress/100,C.easeFactor),this.progress+=c*this.rate*a,this.progress=Math.min(this.lastProgress+C.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},a}(),K=null,G=null,q=null,L=null,o=null,r=null,Pace.running=!1,y=function(){return C.restartOnPushState?Pace.restart():void 0},null!=window.history.pushState&&(S=window.history.pushState,window.history.pushState=function(){return y(),S.apply(window.history,arguments)}),null!=window.history.replaceState&&(V=window.history.replaceState,window.history.replaceState=function(){return y(),V.apply(window.history,arguments)}),k={ajax:a,elements:d,document:c,eventLag:f},(A=function(){var a,c,d,e,f,g,h,i;for(Pace.sources=K=[],c=0,e=(g=["ajax","elements","document","eventLag"]).length;e>c;c++)!1!==C[a=g[c]]&&K.push(new k[a](C[a]));for(d=0,f=(i=null!=(h=C.extraSources)?h:[]).length;f>d;d++)J=i[d],K.push(new J(C));return Pace.bar=q=new b,G=[],L=new l})(),Pace.stop=function(){return Pace.trigger("stop"),Pace.running=!1,q.destroy(),r=!0,null!=o&&("function"==typeof s&&s(o),o=null),A()},Pace.restart=function(){return Pace.trigger("restart"),Pace.stop(),Pace.start()},Pace.go=function(){var a;return Pace.running=!0,q.render(),a=B(),r=!1,o=F((function(b,c){var d,e,f,g,h,i,j,m,n,o,p,s,t,u,v;for(100-q.progress,e=o=0,f=!0,i=p=0,t=K.length;t>p;i=++p)for(J=K[i],n=null!=G[i]?G[i]:G[i]=[],j=s=0,u=(h=null!=(v=J.elements)?v:[J]).length;u>s;j=++s)g=h[j],f&=(m=null!=n[j]?n[j]:n[j]=new l(g)).done,m.done||(e++,o+=m.tick(b));return d=o/e,q.update(L.tick(b,d)),q.done()||f||r?(q.update(100),Pace.trigger("done"),setTimeout((function(){return q.finish(),Pace.running=!1,Pace.trigger("hide")}),Math.max(C.ghostTime,Math.max(C.minTime-(B()-a),0)))):c()}))},Pace.start=function(a){u(C,a),Pace.running=!0;try{q.render()}catch(b){i=b}return document.querySelector(".pace")?(Pace.trigger("start"),Pace.go()):setTimeout(Pace.start,50)},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return Pace}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}).call(this)},100:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){var jQuery=__webpack_require__(0);!function(a,b,c){function e(a,b){var d=this,e=c(d);if(d.value==e.attr("placeholder")&&e.hasClass("placeholder"))if(e.data("placeholder-password")){if(e=e.hide().next().show().attr("id",e.removeAttr("id").data("placeholder-id")),!0===a)return e[0].value=b;e.focus()}else d.value="",e.removeClass("placeholder"),d==g()&&d.select()}function f(){var a,b=this,f=c(b),g=this.id;if(""==b.value){if("password"==b.type){if(!f.data("placeholder-textinput")){try{a=f.clone().attr({type:"text"})}catch(h){a=c("<input>").attr(c.extend(function(a){var b={},d=/^jQuery\d+$/;return c.each(a.attributes,(function(a,c){c.specified&&!d.test(c.name)&&(b[c.name]=c.value)})),b}(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":f,"placeholder-id":g}).bind("focus.placeholder",e),f.data({"placeholder-textinput":a,"placeholder-id":g}).before(a)}f=f.removeAttr("id").hide().prev().attr("id",g).show()}f.addClass("placeholder"),f[0].value=f.attr("placeholder")}else f.removeClass("placeholder")}function g(){try{return b.activeElement}catch(a){}}var h,i,j="[object OperaMini]"==Object.prototype.toString.call(a.operamini),k="placeholder"in b.createElement("input")&&!j,l="placeholder"in b.createElement("textarea")&&!j,m=c.fn,n=c.valHooks,o=c.propHooks;k&&l?(i=m.placeholder=function(){return this}).input=i.textarea=!0:((i=m.placeholder=function(){return this.filter((k?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":e,"blur.placeholder":f}).data("placeholder-enabled",!0).trigger("blur.placeholder"),this}).input=k,i.textarea=l,h={get:function(a){var b=c(a),d=b.data("placeholder-password");return d?d[0].value:b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,b){var d=c(a),h=d.data("placeholder-password");return h?h[0].value=b:d.data("placeholder-enabled")?(""==b?(a.value=b,a!=g()&&f.call(a)):d.hasClass("placeholder")&&e.call(a,!0,b)||(a.value=b),d):a.value=b}},k||(n.input=h,o.value=h),l||(n.textarea=h,o.value=h),c((function(){c(b).delegate("form","submit.placeholder",(function(){var a=c(".placeholder",this).each(e);setTimeout((function(){a.each(f)}),10)}))})),c(a).bind("beforeunload.placeholder",(function(){c(".placeholder").each((function(){this.value=""}))})))}(this,document,jQuery)},278:module=>{module.exports=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i=void 0,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var toMarkdown,converters,_document,mdConverters=require("./lib/md-converters"),gfmConverters=require("./lib/gfm-converters"),collapse=require("collapse-whitespace"),_window="undefined"!=typeof window?window:this;function trim(string){return string.replace(/^[ \r\n\t]+|[ \r\n\t]+$/g,"")}_document="undefined"==typeof document?require("jsdom").jsdom():document;var blocks=["address","article","aside","audio","blockquote","body","canvas","center","dd","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","isindex","li","main","menu","nav","noframes","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"];function isBlock(node){return-1!==blocks.indexOf(node.nodeName.toLowerCase())}var voids=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function isVoid(node){return-1!==voids.indexOf(node.nodeName.toLowerCase())}function canParseHtml(){var Parser=_window.DOMParser,canParse=!1;try{(new Parser).parseFromString("","text/html")&&(canParse=!0)}catch(e){}return canParse}function createHtmlParser(){var Parser=function(){};return Parser.prototype.parseFromString=function(string){var newDoc=_document.implementation.createHTMLDocument("");return string.toLowerCase().indexOf("<!doctype")>-1?newDoc.documentElement.innerHTML=string:newDoc.body.innerHTML=string,newDoc},Parser}var HtmlParser=canParseHtml()?_window.DOMParser:createHtmlParser();function htmlToDom(string){var tree=(new HtmlParser).parseFromString(string,"text/html");return collapse(tree,isBlock),tree}function bfsOrder(node){for(var elem,children,i,inqueue=[node],outqueue=[];inqueue.length>0;)for(elem=inqueue.shift(),outqueue.push(elem),children=elem.childNodes,i=0;i<children.length;i++)1===children[i].nodeType&&inqueue.push(children[i]);return outqueue.shift(),outqueue}function getContent(node){for(var text="",i=0;i<node.childNodes.length;i++)if(1===node.childNodes[i].nodeType)text+=node.childNodes[i]._replacement;else{if(3!==node.childNodes[i].nodeType)continue;text+=node.childNodes[i].data}return text}function outer(node,content){return node.cloneNode(!1).outerHTML.replace("><",">"+content+"<")}function canConvert(node,filter){if("string"==typeof filter)return filter===node.nodeName.toLowerCase();if(Array.isArray(filter))return-1!==filter.indexOf(node.nodeName.toLowerCase());if("function"==typeof filter)return filter.call(toMarkdown,node);throw new TypeError("`filter` needs to be a string, array, or function")}function isFlankedByWhitespace(side,node){var sibling,regExp,isFlanked;return"left"===side?(sibling=node.previousSibling,regExp=/ $/):(sibling=node.nextSibling,regExp=/^ /),sibling&&(3===sibling.nodeType?isFlanked=regExp.test(sibling.nodeValue):1!==sibling.nodeType||isBlock(sibling)||(isFlanked=regExp.test(sibling.textContent))),isFlanked}function flankingWhitespace(node){var leading="",trailing="";if(!isBlock(node)){var hasLeading=/^[ \r\n\t]/.test(node.innerHTML),hasTrailing=/[ \r\n\t]$/.test(node.innerHTML);hasLeading&&!isFlankedByWhitespace("left",node)&&(leading=" "),hasTrailing&&!isFlankedByWhitespace("right",node)&&(trailing=" ")}return{leading,trailing}}function process(node){for(var replacement,content=getContent(node),i=0;i<converters.length;i++){var converter=converters[i];if(canConvert(node,converter.filter)){if("function"!=typeof converter.replacement)throw new TypeError("`replacement` needs to be a function that returns a string");var whitespace=flankingWhitespace(node);(whitespace.leading||whitespace.trailing)&&(content=trim(content)),replacement=whitespace.leading+converter.replacement.call(toMarkdown,content,node)+whitespace.trailing;break}}isVoid(node)||/A/.test(node.nodeName)||!/^\s*$/i.test(content)||(replacement=""),node._replacement=replacement}(toMarkdown=function(input,options){if(options=options||{},"string"!=typeof input)throw new TypeError(input+" is not a string");var clone=htmlToDom(input=input.replace(/(\d+)\. /g,"$1\\. ")).body,nodes=bfsOrder(clone);converters=mdConverters.slice(0),options.gfm&&(converters=gfmConverters.concat(converters)),options.converters&&(converters=options.converters.concat(converters));for(var i=nodes.length-1;i>=0;i--)process(nodes[i]);return getContent(clone).replace(/^[\t\r\n]+|[\t\r\n\s]+$/g,"").replace(/\n\s+\n/g,"\n\n").replace(/\n{3,}/g,"\n\n")}).isBlock=isBlock,toMarkdown.isVoid=isVoid,toMarkdown.trim=trim,toMarkdown.outer=outer,module.exports=toMarkdown},{"./lib/gfm-converters":2,"./lib/md-converters":3,"collapse-whitespace":5,jsdom:6}],2:[function(require,module,exports){"use strict";function cell(content,node){var prefix=" ";return 0===Array.prototype.indexOf.call(node.parentNode.childNodes,node)&&(prefix="| "),prefix+content+" |"}var highlightRegEx=/highlight highlight-(\S+)/;module.exports=[{filter:"br",replacement:function(){return"\n"}},{filter:["del","s","strike"],replacement:function(content){return"~~"+content+"~~"}},{filter:function(node){return"checkbox"===node.type&&"LI"===node.parentNode.nodeName},replacement:function(content,node){return(node.checked?"[x]":"[ ]")+" "}},{filter:["th","td"],replacement:function(content,node){return cell(content,node)}},{filter:"tr",replacement:function(content,node){var borderCells="",alignMap={left:":--",right:"--:",center:":-:"};if("THEAD"===node.parentNode.nodeName)for(var i=0;i<node.childNodes.length;i++){var align=node.childNodes[i].attributes.align,border="---";align&&(border=alignMap[align.value]||border),borderCells+=cell(border,node.childNodes[i])}return"\n"+content+(borderCells?"\n"+borderCells:"")}},{filter:"table",replacement:function(content){return"\n\n"+content+"\n\n"}},{filter:["thead","tbody","tfoot"],replacement:function(content){return content}},{filter:function(node){return"PRE"===node.nodeName&&node.firstChild&&"CODE"===node.firstChild.nodeName},replacement:function(content,node){return"\n\n```\n"+node.firstChild.textContent+"\n```\n\n"}},{filter:function(node){return"PRE"===node.nodeName&&"DIV"===node.parentNode.nodeName&&highlightRegEx.test(node.parentNode.className)},replacement:function(content,node){return"\n\n```"+node.parentNode.className.match(highlightRegEx)[1]+"\n"+node.textContent+"\n```\n\n"}},{filter:function(node){return"DIV"===node.nodeName&&highlightRegEx.test(node.className)},replacement:function(content){return"\n\n"+content+"\n\n"}}]},{}],3:[function(require,module,exports){"use strict";module.exports=[{filter:"p",replacement:function(content){return"\n\n"+content+"\n\n"}},{filter:"br",replacement:function(){return"  \n"}},{filter:["h1","h2","h3","h4","h5","h6"],replacement:function(content,node){for(var hLevel=node.nodeName.charAt(1),hPrefix="",i=0;i<hLevel;i++)hPrefix+="#";return"\n\n"+hPrefix+" "+content+"\n\n"}},{filter:"hr",replacement:function(){return"\n\n* * *\n\n"}},{filter:["em","i"],replacement:function(content){return"_"+content+"_"}},{filter:["strong","b"],replacement:function(content){return"**"+content+"**"}},{filter:function(node){var hasSiblings=node.previousSibling||node.nextSibling,isCodeBlock="PRE"===node.parentNode.nodeName&&!hasSiblings;return"CODE"===node.nodeName&&!isCodeBlock},replacement:function(content){return"`"+content+"`"}},{filter:function(node){return"A"===node.nodeName&&node.getAttribute("href")},replacement:function(content,node){var titlePart=node.title?' "'+node.title+'"':"";return"["+content+"]("+node.getAttribute("href")+titlePart+")"}},{filter:"img",replacement:function(content,node){var alt=node.alt||"",src=node.getAttribute("src")||"",title=node.title||"";return src?"!["+alt+"]("+src+(title?' "'+title+'"':"")+")":""}},{filter:function(node){return"PRE"===node.nodeName&&"CODE"===node.firstChild.nodeName},replacement:function(content,node){return"\n\n    "+node.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},{filter:"blockquote",replacement:function(content){return"\n\n"+(content=(content=(content=this.trim(content)).replace(/\n{3,}/g,"\n\n")).replace(/^/gm,"> "))+"\n\n"}},{filter:"li",replacement:function(content,node){content=content.replace(/^\s+/,"").replace(/\n/gm,"\n    ");var parent=node.parentNode,index=Array.prototype.indexOf.call(parent.children,node)+1;return(/ol/i.test(parent.nodeName)?index+".  ":"*   ")+content}},{filter:["ul","ol"],replacement:function(content,node){for(var strings=[],i=0;i<node.childNodes.length;i++)strings.push(node.childNodes[i]._replacement);return/li/i.test(node.parentNode.nodeName)?"\n"+strings.join("\n"):"\n\n"+strings.join("\n")+"\n\n"}},{filter:function(node){return this.isBlock(node)},replacement:function(content,node){return"\n\n"+this.outer(node,content)+"\n\n"}},{filter:function(){return!0},replacement:function(content,node){return this.outer(node,content)}}]},{}],4:[function(require,module,exports){module.exports=["address","article","aside","audio","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","noscript","ol","output","p","pre","section","table","tfoot","ul","video"]},{}],5:[function(require,module,exports){"use strict";var blocks=require("block-elements").map((function(name){return name.toUpperCase()}));function defaultBlockTest(node){return isElem(node)&&blocks.indexOf(node.nodeName)>=0}function isText(node){return node&&3===node.nodeType}function isElem(node){return node&&1===node.nodeType}function whitespace(root,isBlock){var nextNode,prevNode,prevText,node,text,startSpace=/^ /,endSpace=/ $/;function next(node){for(;node&&node!==root;){if(node.nextSibling)return node.nextSibling;node=node.parentNode,prevText&&isBlock(node)&&(prevText.data=prevText.data.replace(/[ \r\n\t]$/,""),prevText=null)}return null}function first(node){return node.firstChild?node.firstChild:next(node)}function remove(node){var nextNode=next(node);return node.parentNode.removeChild(node),nextNode}if("function"!=typeof isBlock&&(isBlock=defaultBlockTest),"PRE"!==root.nodeName){for(root.normalize(),node=first(root);node;)if(prevNode=node.previousSibling,nextNode=node.nextSibling,isText(node))text=node.data.replace(/[ \r\n\t]+/g," "),(!prevText||prevNode&&isBlock(prevNode))&&(text=text.replace(startSpace,"")),nextNode&&isBlock(nextNode)&&(text=text.replace(endSpace,"")),prevText&&endSpace.test(prevText.data)&&startSpace.test(text)&&(text=text.substr(1)),text?(node.data=text,prevText=node,node=next(node)):node=remove(node);else if(isElem(node)){if("PRE"===node.nodeName){node=next(node);continue}prevText&&isBlock(node)&&(prevText.data=prevText.data.replace(endSpace,""),prevText=null),node=first(node)}else node=remove(node);prevText&&(prevText.data=prevText.data.replace(endSpace,""))}}module.exports=whitespace},{"block-elements":4}],6:[function(require,module,exports){},{}]},{},[1])(1)},554:()=>{},731:()=>{},433:()=>{},432:()=>{},555:()=>{},741:()=>{}}]);